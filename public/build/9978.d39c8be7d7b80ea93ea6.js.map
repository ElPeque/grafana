{"version":3,"file":"9978.d39c8be7d7b80ea93ea6.js","mappings":"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","sources":["webpack://grafana/./node_modules/angular-bindonce/bindonce.js","webpack://grafana/./node_modules/angular-route/angular-route.js","webpack://grafana/./node_modules/angular-route/index.js","webpack://grafana/./node_modules/angular-sanitize/angular-sanitize.js","webpack://grafana/./node_modules/angular-sanitize/index.js","webpack://grafana/./node_modules/baron/src/autoUpdate.js","webpack://grafana/./node_modules/baron/src/controls.js","webpack://grafana/./node_modules/baron/src/core.js","webpack://grafana/./node_modules/baron/src/fix.js","webpack://grafana/./node_modules/baron/src/log.js","webpack://grafana/./node_modules/baron/src/utils.js","webpack://grafana/./public/app/angular/panel/panel_directive.ts","webpack://grafana/./public/app/angular/panel/panel_editor_tab.ts","webpack://grafana/./public/app/angular/panel/query_editor_row.ts","webpack://grafana/./public/app/angular/filters/filters.ts","webpack://grafana/./public/app/angular/services/alert_srv.ts","webpack://grafana/./public/app/angular/services/dynamic_directive_srv.ts","webpack://grafana/./public/app/angular/services/ng_react.ts","webpack://grafana/./public/app/angular/services/segment_srv.ts","webpack://grafana/./public/app/angular/services/popover_srv.ts","webpack://grafana/./public/app/angular/services/timer.ts","webpack://grafana/./public/app/angular/services/AngularLoader.ts","webpack://grafana/./public/app/angular/jquery_extended.ts","webpack://grafana/./public/app/angular/dropdown_typeahead.ts","webpack://grafana/./public/app/angular/autofill_event_fix.ts","webpack://grafana/./public/app/angular/metric_segment.ts","webpack://grafana/./public/app/angular/misc.ts","webpack://grafana/./public/app/angular/bsTooltip.ts","webpack://grafana/./public/app/angular/bsTypeahead.ts","webpack://grafana/./public/app/angular/ng_model_on_blur.ts","webpack://grafana/./public/app/angular/tags.ts","webpack://grafana/./public/app/angular/rebuild_on_change.ts","webpack://grafana/./public/app/angular/give_focus.ts","webpack://grafana/./public/app/angular/diff-view.ts","webpack://grafana/./public/app/angular/array_join.ts","webpack://grafana/./public/app/angular/react2angular.ts","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/e2e/selectors.ts","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/dataquery.gen.ts","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/AliasBy.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/constants.ts","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/Project.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/functions.ts","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/Aggregation.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/GroupBy.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/AlignmentFunction.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/PeriodSelect.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/Alignment.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/LabelFilter.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/AnnotationsHelp.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/LookbackPeriodSelect.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/SLO.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/Selector.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/Service.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/SLOQueryEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/MQLQueryEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/Fields.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/Preprocessor.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/VisualMetricQueryEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/GraphPeriod.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/MetricQueryEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/PromQLEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/QueryHeader.tsx","webpack://grafana/./public/app/plugins/datasource/cloud-monitoring/components/QueryEditor.tsx","webpack://grafana/./public/app/core/components/Select/MetricSelect.tsx","webpack://grafana/./public/app/angular/components/PageHeader/PanelHeaderMenuItem.tsx","webpack://grafana/./public/app/angular/components/PageHeader/PageHeader.tsx","webpack://grafana/./public/app/angular/angular_wrappers.ts","webpack://grafana/./public/app/angular/promiseToDigest.ts","webpack://grafana/./public/app/angular/components/query_part_editor.ts","webpack://grafana/./public/app/angular/components/form_dropdown/form_dropdown.ts","webpack://grafana/./public/app/angular/components/scroll.ts","webpack://grafana/./public/app/angular/components/jsontree.ts","webpack://grafana/./public/app/angular/components/switch.ts","webpack://grafana/./public/app/angular/components/info_popover.ts","webpack://grafana/./public/app/angular/components/spectrum_picker.ts","webpack://grafana/./public/app/angular/components/code_editor/code_editor.ts","webpack://grafana/./public/app/angular/components/sql_part/sql_part_editor.ts","webpack://grafana/./public/app/angular/components/HttpSettingsCtrl.ts","webpack://grafana/./public/app/angular/components/TlsAuthSettingsCtrl.ts","webpack://grafana/./public/app/angular/components/plugin_component.ts","webpack://grafana/./public/app/angular/GrafanaCtrl.ts","webpack://grafana/./public/app/core/navigation/patch/RouteParamsProvider.ts","webpack://grafana/./public/app/core/navigation/patch/RouteProvider.ts","webpack://grafana/./public/app/angular/bridgeReactAngularRouting.ts","webpack://grafana/./public/app/angular/injectorMonkeyPatch.ts","webpack://grafana/./public/app/angular/panel/AngularPanelReactWrapper.tsx","webpack://grafana/./public/app/angular/services/UtilSrv.ts","webpack://grafana/./public/app/angular/services/annotations_srv.ts","webpack://grafana/./public/app/angular/registerComponents.ts","webpack://grafana/./public/app/angular/AngularApp.ts","webpack://grafana/./public/app/angular/panel/query_ctrl.ts","webpack://grafana/./public/app/angular/partials.ts","webpack://grafana/./public/app/core/components/EmptyListCTA/EmptyListCTA.tsx","webpack://grafana/./public/app/core/components/Upgrade/ProBadge.tsx","webpack://grafana/./public/app/plugins/sdk.ts","webpack://grafana/./public/vendor/bootstrap/bootstrap.js","webpack://grafana/./public/vendor/tagsinput/bootstrap-tagsinput.js","webpack://grafana/./node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/EditorHeader.js","webpack://grafana/./node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/FlexItem.js","webpack://grafana/./node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/InlineSelect.js"],"sourcesContent":["(function () {\r\n\t\"use strict\";\r\n\t/**\r\n\t * Bindonce - Zero watches binding for AngularJs\r\n\t * @version v0.3.1\r\n\t * @link https://github.com/Pasvaz/bindonce\r\n\t * @author Pasquale Vazzana <pasqualevazzana@gmail.com>\r\n\t * @license MIT License, http://www.opensource.org/licenses/MIT\r\n\t */\r\n\r\n\tvar bindonceModule = angular.module('pasvaz.bindonce', []);\r\n\r\n\tbindonceModule.directive('bindonce', function ()\r\n\t{\r\n\t\tvar toBoolean = function (value)\r\n\t\t{\r\n\t\t\tif (value && value.length !== 0)\r\n\t\t\t{\r\n\t\t\t\tvar v = angular.lowercase(\"\" + value);\r\n\t\t\t\tvalue = !(v === 'f' || v === '0' || v === 'false' || v === 'no' || v === 'n' || v === '[]');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvalue = false;\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t};\r\n\r\n\t\tvar msie = parseInt((/msie (\\d+)/.exec(angular.lowercase(navigator.userAgent)) || [])[1], 10);\r\n\t\tif (isNaN(msie))\r\n\t\t{\r\n\t\t\tmsie = parseInt((/trident\\/.*; rv:(\\d+)/.exec(angular.lowercase(navigator.userAgent)) || [])[1], 10);\r\n\t\t}\r\n\r\n\t\tvar bindonceDirective =\r\n\t\t{\r\n\t\t\trestrict: \"AM\",\r\n\t\t\tcontroller: ['$scope', '$element', '$attrs', '$interpolate', function ($scope, $element, $attrs, $interpolate)\r\n\t\t\t{\r\n\t\t\t\tvar showHideBinder = function (elm, attr, value)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar show = (attr === 'show') ? '' : 'none';\r\n\t\t\t\t\tvar hide = (attr === 'hide') ? '' : 'none';\r\n\t\t\t\t\telm.css('display', toBoolean(value) ? show : hide);\r\n\t\t\t\t};\r\n\t\t\t\tvar classBinder = function (elm, value)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (angular.isObject(value) && !angular.isArray(value))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar results = [];\r\n\t\t\t\t\t\tangular.forEach(value, function (value, index)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (value) results.push(index);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvalue = results;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (value)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\telm.addClass(angular.isArray(value) ? value.join(' ') : value);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar ctrl =\r\n\t\t\t\t{\r\n\t\t\t\t\twatcherRemover: undefined,\r\n\t\t\t\t\tbinders: [],\r\n\t\t\t\t\tgroup: $attrs.boName,\r\n\t\t\t\t\telement: $element,\r\n\t\t\t\t\tran: false,\r\n\r\n\t\t\t\t\taddBinder: function (binder)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.binders.push(binder);\r\n\r\n\t\t\t\t\t\t// In case of late binding (when using the directive bo-name/bo-parent)\r\n\t\t\t\t\t\t// it happens only when you use nested bindonce, if the bo-children\r\n\t\t\t\t\t\t// are not dom children the linking can follow another order\r\n\t\t\t\t\t\tif (this.ran)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.runBinders();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tsetupWatcher: function (bindonceValue)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\tthis.watcherRemover = $scope.$watch(bindonceValue, function (newValue)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (newValue === undefined) return;\r\n\t\t\t\t\t\t\tthat.removeWatcher();\r\n\t\t\t\t\t\t\tthat.runBinders();\r\n\t\t\t\t\t\t}, true);\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tremoveWatcher: function ()\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (this.watcherRemover !== undefined)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.watcherRemover();\r\n\t\t\t\t\t\t\tthis.watcherRemover = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\trunBinders: function ()\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\twhile (this.binders.length > 0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar binder = this.binders.shift();\r\n\t\t\t\t\t\t\tif (this.group && this.group != binder.group) continue;\r\n\t\t\t\t\t\t\tvar value = binder.scope.$eval((binder.interpolate) ? $interpolate(binder.value) : binder.value);\r\n\t\t\t\t\t\t\tswitch (binder.attr)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcase 'boIf':\r\n\t\t\t\t\t\t\t\t\tif (toBoolean(value))\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tbinder.transclude(binder.scope.$new(), function (clone)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tvar parent = binder.element.parent();\r\n\t\t\t\t\t\t\t\t\t\t\tvar afterNode = binder.element && binder.element[binder.element.length - 1];\r\n\t\t\t\t\t\t\t\t\t\t\tvar parentNode = parent && parent[0] || afterNode && afterNode.parentNode;\r\n\t\t\t\t\t\t\t\t\t\t\tvar afterNextSibling = (afterNode && afterNode.nextSibling) || null;\r\n\t\t\t\t\t\t\t\t\t\t\tangular.forEach(clone, function (node)\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tparentNode.insertBefore(node, afterNextSibling);\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'boSwitch':\r\n\t\t\t\t\t\t\t\t\tvar selectedTranscludes, switchCtrl = binder.controller[0];\r\n\t\t\t\t\t\t\t\t\tif ((selectedTranscludes = switchCtrl.cases['!' + value] || switchCtrl.cases['?']))\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tbinder.scope.$eval(binder.attrs.change);\r\n\t\t\t\t\t\t\t\t\t\tangular.forEach(selectedTranscludes, function (selectedTransclude)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tselectedTransclude.transclude(binder.scope.$new(), function (clone)\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar parent = selectedTransclude.element.parent();\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar afterNode = selectedTransclude.element && selectedTransclude.element[selectedTransclude.element.length - 1];\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar parentNode = parent && parent[0] || afterNode && afterNode.parentNode;\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar afterNextSibling = (afterNode && afterNode.nextSibling) || null;\r\n\t\t\t\t\t\t\t\t\t\t\t\tangular.forEach(clone, function (node)\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tparentNode.insertBefore(node, afterNextSibling);\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'boSwitchWhen':\r\n\t\t\t\t\t\t\t\t\tvar ctrl = binder.controller[0];\r\n\t\t\t\t\t\t\t\t\tctrl.cases['!' + binder.attrs.boSwitchWhen] = (ctrl.cases['!' + binder.attrs.boSwitchWhen] || []);\r\n\t\t\t\t\t\t\t\t\tctrl.cases['!' + binder.attrs.boSwitchWhen].push({ transclude: binder.transclude, element: binder.element });\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'boSwitchDefault':\r\n\t\t\t\t\t\t\t\t\tvar ctrl = binder.controller[0];\r\n\t\t\t\t\t\t\t\t\tctrl.cases['?'] = (ctrl.cases['?'] || []);\r\n\t\t\t\t\t\t\t\t\tctrl.cases['?'].push({ transclude: binder.transclude, element: binder.element });\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'hide':\r\n\t\t\t\t\t\t\t\tcase 'show':\r\n\t\t\t\t\t\t\t\t\tshowHideBinder(binder.element, binder.attr, value);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'class':\r\n\t\t\t\t\t\t\t\t\tclassBinder(binder.element, value);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\t\t\t\tbinder.element.text(value);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'html':\r\n\t\t\t\t\t\t\t\t\tbinder.element.html(value);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'style':\r\n\t\t\t\t\t\t\t\t\tbinder.element.css(value);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'src':\r\n\t\t\t\t\t\t\t\t\tbinder.element.attr(binder.attr, value);\r\n\t\t\t\t\t\t\t\t\tif (msie) binder.element.prop('src', value);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'attr':\r\n\t\t\t\t\t\t\t\t\tangular.forEach(binder.attrs, function (attrValue, attrKey)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tvar newAttr, newValue;\r\n\t\t\t\t\t\t\t\t\t\tif (attrKey.match(/^boAttr./) && binder.attrs[attrKey])\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tnewAttr = attrKey.replace(/^boAttr/, '').replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\r\n\t\t\t\t\t\t\t\t\t\t\tnewValue = binder.scope.$eval(binder.attrs[attrKey]);\r\n\t\t\t\t\t\t\t\t\t\t\tbinder.element.attr(newAttr, newValue);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'href':\r\n\t\t\t\t\t\t\t\tcase 'alt':\r\n\t\t\t\t\t\t\t\tcase 'title':\r\n\t\t\t\t\t\t\t\tcase 'id':\r\n\t\t\t\t\t\t\t\tcase 'value':\r\n\t\t\t\t\t\t\t\t\tbinder.element.attr(binder.attr, value);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.ran = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn ctrl;\r\n\t\t\t}],\r\n\r\n\t\t\tlink: function (scope, elm, attrs, bindonceController)\r\n\t\t\t{\r\n\t\t\t\tvar value = (attrs.bindonce) ? scope.$eval(attrs.bindonce) : true;\r\n\t\t\t\tif (value !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tbindonceController.runBinders();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tbindonceController.setupWatcher(attrs.bindonce);\r\n\t\t\t\t\telm.bind(\"$destroy\", bindonceController.removeWatcher);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn bindonceDirective;\r\n\t});\r\n\r\n\tangular.forEach(\r\n\t[\r\n\t\t{ directiveName: 'boShow', attribute: 'show' },\r\n\t\t{ directiveName: 'boHide', attribute: 'hide' },\r\n\t\t{ directiveName: 'boClass', attribute: 'class' },\r\n\t\t{ directiveName: 'boText', attribute: 'text' },\r\n\t\t{ directiveName: 'boBind', attribute: 'text' },\r\n\t\t{ directiveName: 'boHtml', attribute: 'html' },\r\n\t\t{ directiveName: 'boSrcI', attribute: 'src', interpolate: true },\r\n\t\t{ directiveName: 'boSrc', attribute: 'src' },\r\n\t\t{ directiveName: 'boHrefI', attribute: 'href', interpolate: true },\r\n\t\t{ directiveName: 'boHref', attribute: 'href' },\r\n\t\t{ directiveName: 'boAlt', attribute: 'alt' },\r\n\t\t{ directiveName: 'boTitle', attribute: 'title' },\r\n\t\t{ directiveName: 'boId', attribute: 'id' },\r\n\t\t{ directiveName: 'boStyle', attribute: 'style' },\r\n\t\t{ directiveName: 'boValue', attribute: 'value' },\r\n\t\t{ directiveName: 'boAttr', attribute: 'attr' },\r\n\r\n\t\t{ directiveName: 'boIf', transclude: 'element', terminal: true, priority: 1000 },\r\n\t\t{ directiveName: 'boSwitch', require: 'boSwitch', controller: function () { this.cases = {}; } },\r\n\t\t{ directiveName: 'boSwitchWhen', transclude: 'element', priority: 800, require: '^boSwitch', },\r\n\t\t{ directiveName: 'boSwitchDefault', transclude: 'element', priority: 800, require: '^boSwitch', }\r\n\t],\r\n\tfunction (boDirective)\r\n\t{\r\n\t\tvar childPriority = 200;\r\n\t\treturn bindonceModule.directive(boDirective.directiveName, function ()\r\n\t\t{\r\n\t\t\tvar bindonceDirective =\r\n\t\t\t{\r\n\t\t\t\tpriority: boDirective.priority || childPriority,\r\n\t\t\t\ttransclude: boDirective.transclude || false,\r\n\t\t\t\tterminal: boDirective.terminal || false,\r\n\t\t\t\trequire: ['^bindonce'].concat(boDirective.require || []),\r\n\t\t\t\tcontroller: boDirective.controller,\r\n\t\t\t\tcompile: function (tElement, tAttrs, transclude)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn function (scope, elm, attrs, controllers)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar bindonceController = controllers[0];\r\n\t\t\t\t\t\tvar name = attrs.boParent;\r\n\t\t\t\t\t\tif (name && bindonceController.group !== name)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar element = bindonceController.element.parent();\r\n\t\t\t\t\t\t\tbindonceController = undefined;\r\n\t\t\t\t\t\t\tvar parentValue;\r\n\r\n\t\t\t\t\t\t\twhile (element[0].nodeType !== 9 && element.length)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif ((parentValue = element.data('$bindonceController'))\r\n\t\t\t\t\t\t\t\t\t&& parentValue.group === name)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tbindonceController = parentValue;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telement = element.parent();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!bindonceController)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthrow new Error(\"No bindonce controller: \" + name);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbindonceController.addBinder(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\telement: elm,\r\n\t\t\t\t\t\t\tattr: boDirective.attribute || boDirective.directiveName,\r\n\t\t\t\t\t\t\tattrs: attrs,\r\n\t\t\t\t\t\t\tvalue: attrs[boDirective.directiveName],\r\n\t\t\t\t\t\t\tinterpolate: boDirective.interpolate,\r\n\t\t\t\t\t\t\tgroup: name,\r\n\t\t\t\t\t\t\ttransclude: transclude,\r\n\t\t\t\t\t\t\tcontroller: controllers.slice(1),\r\n\t\t\t\t\t\t\tscope: scope\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\treturn bindonceDirective;\r\n\t\t});\r\n\t})\r\n})();\r\n","/**\n * @license AngularJS v1.8.3\n * (c) 2010-2020 Google LLC. http://angularjs.org\n * License: MIT\n */\n(function(window, angular) {'use strict';\n\n/* global shallowCopy: true */\n\n/**\n * Creates a shallow copy of an object, an array or a primitive.\n *\n * Assumes that there are no proto properties for objects.\n */\nfunction shallowCopy(src, dst) {\n  if (isArray(src)) {\n    dst = dst || [];\n\n    for (var i = 0, ii = src.length; i < ii; i++) {\n      dst[i] = src[i];\n    }\n  } else if (isObject(src)) {\n    dst = dst || {};\n\n    for (var key in src) {\n      if (!(key.charAt(0) === '$' && key.charAt(1) === '$')) {\n        dst[key] = src[key];\n      }\n    }\n  }\n\n  return dst || src;\n}\n\n/* global routeToRegExp: true */\n\n/**\n * @param {string} path - The path to parse. (It is assumed to have query and hash stripped off.)\n * @param {Object} opts - Options.\n * @return {Object} - An object containing an array of path parameter names (`keys`) and a regular\n *     expression (`regexp`) that can be used to identify a matching URL and extract the path\n *     parameter values.\n *\n * @description\n * Parses the given path, extracting path parameter names and a regular expression to match URLs.\n *\n * Originally inspired by `pathRexp` in `visionmedia/express/lib/utils.js`.\n */\nfunction routeToRegExp(path, opts) {\n  var keys = [];\n\n  var pattern = path\n    .replace(/([().])/g, '\\\\$1')\n    .replace(/(\\/)?:(\\w+)(\\*\\?|[?*])?/g, function(_, slash, key, option) {\n      var optional = option === '?' || option === '*?';\n      var star = option === '*' || option === '*?';\n      keys.push({name: key, optional: optional});\n      slash = slash || '';\n      return (\n        (optional ? '(?:' + slash : slash + '(?:') +\n        (star ? '(.+?)' : '([^/]+)') +\n        (optional ? '?)?' : ')')\n      );\n    })\n    .replace(/([/$*])/g, '\\\\$1');\n\n  if (opts.ignoreTrailingSlashes) {\n    pattern = pattern.replace(/\\/+$/, '') + '/*';\n  }\n\n  return {\n    keys: keys,\n    regexp: new RegExp(\n      '^' + pattern + '(?:[?#]|$)',\n      opts.caseInsensitiveMatch ? 'i' : ''\n    )\n  };\n}\n\n/* global routeToRegExp: false */\n/* global shallowCopy: false */\n\n// `isArray` and `isObject` are necessary for `shallowCopy()` (included via `src/shallowCopy.js`).\n// They are initialized inside the `$RouteProvider`, to ensure `window.angular` is available.\nvar isArray;\nvar isObject;\nvar isDefined;\nvar noop;\n\n/**\n * @ngdoc module\n * @name ngRoute\n * @description\n *\n * The `ngRoute` module provides routing and deeplinking services and directives for AngularJS apps.\n *\n * ## Example\n * See {@link ngRoute.$route#examples $route} for an example of configuring and using `ngRoute`.\n *\n */\n/* global -ngRouteModule */\nvar ngRouteModule = angular.\n  module('ngRoute', []).\n  info({ angularVersion: '1.8.3' }).\n  provider('$route', $RouteProvider).\n  // Ensure `$route` will be instantiated in time to capture the initial `$locationChangeSuccess`\n  // event (unless explicitly disabled). This is necessary in case `ngView` is included in an\n  // asynchronously loaded template.\n  run(instantiateRoute);\nvar $routeMinErr = angular.$$minErr('ngRoute');\nvar isEagerInstantiationEnabled;\n\n\n/**\n * @ngdoc provider\n * @name $routeProvider\n * @this\n *\n * @description\n *\n * Used for configuring routes.\n *\n * ## Example\n * See {@link ngRoute.$route#examples $route} for an example of configuring and using `ngRoute`.\n *\n * ## Dependencies\n * Requires the {@link ngRoute `ngRoute`} module to be installed.\n */\nfunction $RouteProvider() {\n  isArray = angular.isArray;\n  isObject = angular.isObject;\n  isDefined = angular.isDefined;\n  noop = angular.noop;\n\n  function inherit(parent, extra) {\n    return angular.extend(Object.create(parent), extra);\n  }\n\n  var routes = {};\n\n  /**\n   * @ngdoc method\n   * @name $routeProvider#when\n   *\n   * @param {string} path Route path (matched against `$location.path`). If `$location.path`\n   *    contains redundant trailing slash or is missing one, the route will still match and the\n   *    `$location.path` will be updated to add or drop the trailing slash to exactly match the\n   *    route definition.\n   *\n   *    * `path` can contain named groups starting with a colon: e.g. `:name`. All characters up\n   *        to the next slash are matched and stored in `$routeParams` under the given `name`\n   *        when the route matches.\n   *    * `path` can contain named groups starting with a colon and ending with a star:\n   *        e.g.`:name*`. All characters are eagerly stored in `$routeParams` under the given `name`\n   *        when the route matches.\n   *    * `path` can contain optional named groups with a question mark: e.g.`:name?`.\n   *\n   *    For example, routes like `/color/:color/largecode/:largecode*\\/edit` will match\n   *    `/color/brown/largecode/code/with/slashes/edit` and extract:\n   *\n   *    * `color: brown`\n   *    * `largecode: code/with/slashes`.\n   *\n   *\n   * @param {Object} route Mapping information to be assigned to `$route.current` on route\n   *    match.\n   *\n   *    Object properties:\n   *\n   *    - `controller` – `{(string|Function)=}` – Controller fn that should be associated with\n   *      newly created scope or the name of a {@link angular.Module#controller registered\n   *      controller} if passed as a string.\n   *    - `controllerAs` – `{string=}` – An identifier name for a reference to the controller.\n   *      If present, the controller will be published to scope under the `controllerAs` name.\n   *    - `template` – `{(string|Function)=}` – html template as a string or a function that\n   *      returns an html template as a string which should be used by {@link\n   *      ngRoute.directive:ngView ngView} or {@link ng.directive:ngInclude ngInclude} directives.\n   *      This property takes precedence over `templateUrl`.\n   *\n   *      If `template` is a function, it will be called with the following parameters:\n   *\n   *      - `{Array.<Object>}` - route parameters extracted from the current\n   *        `$location.path()` by applying the current route\n   *\n   *      One of `template` or `templateUrl` is required.\n   *\n   *    - `templateUrl` – `{(string|Function)=}` – path or function that returns a path to an html\n   *      template that should be used by {@link ngRoute.directive:ngView ngView}.\n   *\n   *      If `templateUrl` is a function, it will be called with the following parameters:\n   *\n   *      - `{Array.<Object>}` - route parameters extracted from the current\n   *        `$location.path()` by applying the current route\n   *\n   *      One of `templateUrl` or `template` is required.\n   *\n   *    - `resolve` - `{Object.<string, Function>=}` - An optional map of dependencies which should\n   *      be injected into the controller. If any of these dependencies are promises, the router\n   *      will wait for them all to be resolved or one to be rejected before the controller is\n   *      instantiated.\n   *      If all the promises are resolved successfully, the values of the resolved promises are\n   *      injected and {@link ngRoute.$route#$routeChangeSuccess $routeChangeSuccess} event is\n   *      fired. If any of the promises are rejected the\n   *      {@link ngRoute.$route#$routeChangeError $routeChangeError} event is fired.\n   *      For easier access to the resolved dependencies from the template, the `resolve` map will\n   *      be available on the scope of the route, under `$resolve` (by default) or a custom name\n   *      specified by the `resolveAs` property (see below). This can be particularly useful, when\n   *      working with {@link angular.Module#component components} as route templates.<br />\n   *      <div class=\"alert alert-warning\">\n   *        **Note:** If your scope already contains a property with this name, it will be hidden\n   *        or overwritten. Make sure, you specify an appropriate name for this property, that\n   *        does not collide with other properties on the scope.\n   *      </div>\n   *      The map object is:\n   *\n   *      - `key` – `{string}`: a name of a dependency to be injected into the controller.\n   *      - `factory` - `{string|Function}`: If `string` then it is an alias for a service.\n   *        Otherwise if function, then it is {@link auto.$injector#invoke injected}\n   *        and the return value is treated as the dependency. If the result is a promise, it is\n   *        resolved before its value is injected into the controller. Be aware that\n   *        `ngRoute.$routeParams` will still refer to the previous route within these resolve\n   *        functions.  Use `$route.current.params` to access the new route parameters, instead.\n   *\n   *    - `resolveAs` - `{string=}` - The name under which the `resolve` map will be available on\n   *      the scope of the route. If omitted, defaults to `$resolve`.\n   *\n   *    - `redirectTo` – `{(string|Function)=}` – value to update\n   *      {@link ng.$location $location} path with and trigger route redirection.\n   *\n   *      If `redirectTo` is a function, it will be called with the following parameters:\n   *\n   *      - `{Object.<string>}` - route parameters extracted from the current\n   *        `$location.path()` by applying the current route templateUrl.\n   *      - `{string}` - current `$location.path()`\n   *      - `{Object}` - current `$location.search()`\n   *\n   *      The custom `redirectTo` function is expected to return a string which will be used\n   *      to update `$location.url()`. If the function throws an error, no further processing will\n   *      take place and the {@link ngRoute.$route#$routeChangeError $routeChangeError} event will\n   *      be fired.\n   *\n   *      Routes that specify `redirectTo` will not have their controllers, template functions\n   *      or resolves called, the `$location` will be changed to the redirect url and route\n   *      processing will stop. The exception to this is if the `redirectTo` is a function that\n   *      returns `undefined`. In this case the route transition occurs as though there was no\n   *      redirection.\n   *\n   *    - `resolveRedirectTo` – `{Function=}` – a function that will (eventually) return the value\n   *      to update {@link ng.$location $location} URL with and trigger route redirection. In\n   *      contrast to `redirectTo`, dependencies can be injected into `resolveRedirectTo` and the\n   *      return value can be either a string or a promise that will be resolved to a string.\n   *\n   *      Similar to `redirectTo`, if the return value is `undefined` (or a promise that gets\n   *      resolved to `undefined`), no redirection takes place and the route transition occurs as\n   *      though there was no redirection.\n   *\n   *      If the function throws an error or the returned promise gets rejected, no further\n   *      processing will take place and the\n   *      {@link ngRoute.$route#$routeChangeError $routeChangeError} event will be fired.\n   *\n   *      `redirectTo` takes precedence over `resolveRedirectTo`, so specifying both on the same\n   *      route definition, will cause the latter to be ignored.\n   *\n   *    - `[reloadOnUrl=true]` - `{boolean=}` - reload route when any part of the URL changes\n   *      (including the path) even if the new URL maps to the same route.\n   *\n   *      If the option is set to `false` and the URL in the browser changes, but the new URL maps\n   *      to the same route, then a `$routeUpdate` event is broadcasted on the root scope (without\n   *      reloading the route).\n   *\n   *    - `[reloadOnSearch=true]` - `{boolean=}` - reload route when only `$location.search()`\n   *      or `$location.hash()` changes.\n   *\n   *      If the option is set to `false` and the URL in the browser changes, then a `$routeUpdate`\n   *      event is broadcasted on the root scope (without reloading the route).\n   *\n   *      <div class=\"alert alert-warning\">\n   *        **Note:** This option has no effect if `reloadOnUrl` is set to `false`.\n   *      </div>\n   *\n   *    - `[caseInsensitiveMatch=false]` - `{boolean=}` - match routes without being case sensitive\n   *\n   *      If the option is set to `true`, then the particular route can be matched without being\n   *      case sensitive\n   *\n   * @returns {Object} self\n   *\n   * @description\n   * Adds a new route definition to the `$route` service.\n   */\n  this.when = function(path, route) {\n    //copy original route object to preserve params inherited from proto chain\n    var routeCopy = shallowCopy(route);\n    if (angular.isUndefined(routeCopy.reloadOnUrl)) {\n      routeCopy.reloadOnUrl = true;\n    }\n    if (angular.isUndefined(routeCopy.reloadOnSearch)) {\n      routeCopy.reloadOnSearch = true;\n    }\n    if (angular.isUndefined(routeCopy.caseInsensitiveMatch)) {\n      routeCopy.caseInsensitiveMatch = this.caseInsensitiveMatch;\n    }\n    routes[path] = angular.extend(\n      routeCopy,\n      {originalPath: path},\n      path && routeToRegExp(path, routeCopy)\n    );\n\n    // create redirection for trailing slashes\n    if (path) {\n      var redirectPath = (path[path.length - 1] === '/')\n            ? path.substr(0, path.length - 1)\n            : path + '/';\n\n      routes[redirectPath] = angular.extend(\n        {originalPath: path, redirectTo: path},\n        routeToRegExp(redirectPath, routeCopy)\n      );\n    }\n\n    return this;\n  };\n\n  /**\n   * @ngdoc property\n   * @name $routeProvider#caseInsensitiveMatch\n   * @description\n   *\n   * A boolean property indicating if routes defined\n   * using this provider should be matched using a case insensitive\n   * algorithm. Defaults to `false`.\n   */\n  this.caseInsensitiveMatch = false;\n\n  /**\n   * @ngdoc method\n   * @name $routeProvider#otherwise\n   *\n   * @description\n   * Sets route definition that will be used on route change when no other route definition\n   * is matched.\n   *\n   * @param {Object|string} params Mapping information to be assigned to `$route.current`.\n   * If called with a string, the value maps to `redirectTo`.\n   * @returns {Object} self\n   */\n  this.otherwise = function(params) {\n    if (typeof params === 'string') {\n      params = {redirectTo: params};\n    }\n    this.when(null, params);\n    return this;\n  };\n\n  /**\n   * @ngdoc method\n   * @name $routeProvider#eagerInstantiationEnabled\n   * @kind function\n   *\n   * @description\n   * Call this method as a setter to enable/disable eager instantiation of the\n   * {@link ngRoute.$route $route} service upon application bootstrap. You can also call it as a\n   * getter (i.e. without any arguments) to get the current value of the\n   * `eagerInstantiationEnabled` flag.\n   *\n   * Instantiating `$route` early is necessary for capturing the initial\n   * {@link ng.$location#$locationChangeStart $locationChangeStart} event and navigating to the\n   * appropriate route. Usually, `$route` is instantiated in time by the\n   * {@link ngRoute.ngView ngView} directive. Yet, in cases where `ngView` is included in an\n   * asynchronously loaded template (e.g. in another directive's template), the directive factory\n   * might not be called soon enough for `$route` to be instantiated _before_ the initial\n   * `$locationChangeSuccess` event is fired. Eager instantiation ensures that `$route` is always\n   * instantiated in time, regardless of when `ngView` will be loaded.\n   *\n   * The default value is true.\n   *\n   * **Note**:<br />\n   * You may want to disable the default behavior when unit-testing modules that depend on\n   * `ngRoute`, in order to avoid an unexpected request for the default route's template.\n   *\n   * @param {boolean=} enabled - If provided, update the internal `eagerInstantiationEnabled` flag.\n   *\n   * @returns {*} The current value of the `eagerInstantiationEnabled` flag if used as a getter or\n   *     itself (for chaining) if used as a setter.\n   */\n  isEagerInstantiationEnabled = true;\n  this.eagerInstantiationEnabled = function eagerInstantiationEnabled(enabled) {\n    if (isDefined(enabled)) {\n      isEagerInstantiationEnabled = enabled;\n      return this;\n    }\n\n    return isEagerInstantiationEnabled;\n  };\n\n\n  this.$get = ['$rootScope',\n               '$location',\n               '$routeParams',\n               '$q',\n               '$injector',\n               '$templateRequest',\n               '$sce',\n               '$browser',\n      function($rootScope, $location, $routeParams, $q, $injector, $templateRequest, $sce, $browser) {\n\n    /**\n     * @ngdoc service\n     * @name $route\n     * @requires $location\n     * @requires $routeParams\n     *\n     * @property {Object} current Reference to the current route definition.\n     * The route definition contains:\n     *\n     *   - `controller`: The controller constructor as defined in the route definition.\n     *   - `locals`: A map of locals which is used by {@link ng.$controller $controller} service for\n     *     controller instantiation. The `locals` contain\n     *     the resolved values of the `resolve` map. Additionally the `locals` also contain:\n     *\n     *     - `$scope` - The current route scope.\n     *     - `$template` - The current route template HTML.\n     *\n     *     The `locals` will be assigned to the route scope's `$resolve` property. You can override\n     *     the property name, using `resolveAs` in the route definition. See\n     *     {@link ngRoute.$routeProvider $routeProvider} for more info.\n     *\n     * @property {Object} routes Object with all route configuration Objects as its properties.\n     *\n     * @description\n     * `$route` is used for deep-linking URLs to controllers and views (HTML partials).\n     * It watches `$location.url()` and tries to map the path to an existing route definition.\n     *\n     * Requires the {@link ngRoute `ngRoute`} module to be installed.\n     *\n     * You can define routes through {@link ngRoute.$routeProvider $routeProvider}'s API.\n     *\n     * The `$route` service is typically used in conjunction with the\n     * {@link ngRoute.directive:ngView `ngView`} directive and the\n     * {@link ngRoute.$routeParams `$routeParams`} service.\n     *\n     * @example\n     * This example shows how changing the URL hash causes the `$route` to match a route against the\n     * URL, and the `ngView` pulls in the partial.\n     *\n     * <example name=\"$route-service\" module=\"ngRouteExample\"\n     *          deps=\"angular-route.js\" fixBase=\"true\">\n     *   <file name=\"index.html\">\n     *     <div ng-controller=\"MainController\">\n     *       Choose:\n     *       <a href=\"Book/Moby\">Moby</a> |\n     *       <a href=\"Book/Moby/ch/1\">Moby: Ch1</a> |\n     *       <a href=\"Book/Gatsby\">Gatsby</a> |\n     *       <a href=\"Book/Gatsby/ch/4?key=value\">Gatsby: Ch4</a> |\n     *       <a href=\"Book/Scarlet\">Scarlet Letter</a><br/>\n     *\n     *       <div ng-view></div>\n     *\n     *       <hr />\n     *\n     *       <pre>$location.path() = {{$location.path()}}</pre>\n     *       <pre>$route.current.templateUrl = {{$route.current.templateUrl}}</pre>\n     *       <pre>$route.current.params = {{$route.current.params}}</pre>\n     *       <pre>$route.current.scope.name = {{$route.current.scope.name}}</pre>\n     *       <pre>$routeParams = {{$routeParams}}</pre>\n     *     </div>\n     *   </file>\n     *\n     *   <file name=\"book.html\">\n     *     controller: {{name}}<br />\n     *     Book Id: {{params.bookId}}<br />\n     *   </file>\n     *\n     *   <file name=\"chapter.html\">\n     *     controller: {{name}}<br />\n     *     Book Id: {{params.bookId}}<br />\n     *     Chapter Id: {{params.chapterId}}\n     *   </file>\n     *\n     *   <file name=\"script.js\">\n     *     angular.module('ngRouteExample', ['ngRoute'])\n     *\n     *      .controller('MainController', function($scope, $route, $routeParams, $location) {\n     *          $scope.$route = $route;\n     *          $scope.$location = $location;\n     *          $scope.$routeParams = $routeParams;\n     *      })\n     *\n     *      .controller('BookController', function($scope, $routeParams) {\n     *          $scope.name = 'BookController';\n     *          $scope.params = $routeParams;\n     *      })\n     *\n     *      .controller('ChapterController', function($scope, $routeParams) {\n     *          $scope.name = 'ChapterController';\n     *          $scope.params = $routeParams;\n     *      })\n     *\n     *     .config(function($routeProvider, $locationProvider) {\n     *       $routeProvider\n     *        .when('/Book/:bookId', {\n     *         templateUrl: 'book.html',\n     *         controller: 'BookController',\n     *         resolve: {\n     *           // I will cause a 1 second delay\n     *           delay: function($q, $timeout) {\n     *             var delay = $q.defer();\n     *             $timeout(delay.resolve, 1000);\n     *             return delay.promise;\n     *           }\n     *         }\n     *       })\n     *       .when('/Book/:bookId/ch/:chapterId', {\n     *         templateUrl: 'chapter.html',\n     *         controller: 'ChapterController'\n     *       });\n     *\n     *       // configure html5 to get links working on jsfiddle\n     *       $locationProvider.html5Mode(true);\n     *     });\n     *\n     *   </file>\n     *\n     *   <file name=\"protractor.js\" type=\"protractor\">\n     *     it('should load and compile correct template', function() {\n     *       element(by.linkText('Moby: Ch1')).click();\n     *       var content = element(by.css('[ng-view]')).getText();\n     *       expect(content).toMatch(/controller: ChapterController/);\n     *       expect(content).toMatch(/Book Id: Moby/);\n     *       expect(content).toMatch(/Chapter Id: 1/);\n     *\n     *       element(by.partialLinkText('Scarlet')).click();\n     *\n     *       content = element(by.css('[ng-view]')).getText();\n     *       expect(content).toMatch(/controller: BookController/);\n     *       expect(content).toMatch(/Book Id: Scarlet/);\n     *     });\n     *   </file>\n     * </example>\n     */\n\n    /**\n     * @ngdoc event\n     * @name $route#$routeChangeStart\n     * @eventType broadcast on root scope\n     * @description\n     * Broadcasted before a route change. At this  point the route services starts\n     * resolving all of the dependencies needed for the route change to occur.\n     * Typically this involves fetching the view template as well as any dependencies\n     * defined in `resolve` route property. Once  all of the dependencies are resolved\n     * `$routeChangeSuccess` is fired.\n     *\n     * The route change (and the `$location` change that triggered it) can be prevented\n     * by calling `preventDefault` method of the event. See {@link ng.$rootScope.Scope#$on}\n     * for more details about event object.\n     *\n     * @param {Object} angularEvent Synthetic event object.\n     * @param {Route} next Future route information.\n     * @param {Route} current Current route information.\n     */\n\n    /**\n     * @ngdoc event\n     * @name $route#$routeChangeSuccess\n     * @eventType broadcast on root scope\n     * @description\n     * Broadcasted after a route change has happened successfully.\n     * The `resolve` dependencies are now available in the `current.locals` property.\n     *\n     * {@link ngRoute.directive:ngView ngView} listens for the directive\n     * to instantiate the controller and render the view.\n     *\n     * @param {Object} angularEvent Synthetic event object.\n     * @param {Route} current Current route information.\n     * @param {Route|Undefined} previous Previous route information, or undefined if current is\n     * first route entered.\n     */\n\n    /**\n     * @ngdoc event\n     * @name $route#$routeChangeError\n     * @eventType broadcast on root scope\n     * @description\n     * Broadcasted if a redirection function fails or any redirection or resolve promises are\n     * rejected.\n     *\n     * @param {Object} angularEvent Synthetic event object\n     * @param {Route} current Current route information.\n     * @param {Route} previous Previous route information.\n     * @param {Route} rejection The thrown error or the rejection reason of the promise. Usually\n     * the rejection reason is the error that caused the promise to get rejected.\n     */\n\n    /**\n     * @ngdoc event\n     * @name $route#$routeUpdate\n     * @eventType broadcast on root scope\n     * @description\n     * Broadcasted if the same instance of a route (including template, controller instance,\n     * resolved dependencies, etc.) is being reused. This can happen if either `reloadOnSearch` or\n     * `reloadOnUrl` has been set to `false`.\n     *\n     * @param {Object} angularEvent Synthetic event object\n     * @param {Route} current Current/previous route information.\n     */\n\n    var forceReload = false,\n        preparedRoute,\n        preparedRouteIsUpdateOnly,\n        $route = {\n          routes: routes,\n\n          /**\n           * @ngdoc method\n           * @name $route#reload\n           *\n           * @description\n           * Causes `$route` service to reload the current route even if\n           * {@link ng.$location $location} hasn't changed.\n           *\n           * As a result of that, {@link ngRoute.directive:ngView ngView}\n           * creates new scope and reinstantiates the controller.\n           */\n          reload: function() {\n            forceReload = true;\n\n            var fakeLocationEvent = {\n              defaultPrevented: false,\n              preventDefault: function fakePreventDefault() {\n                this.defaultPrevented = true;\n                forceReload = false;\n              }\n            };\n\n            $rootScope.$evalAsync(function() {\n              prepareRoute(fakeLocationEvent);\n              if (!fakeLocationEvent.defaultPrevented) commitRoute();\n            });\n          },\n\n          /**\n           * @ngdoc method\n           * @name $route#updateParams\n           *\n           * @description\n           * Causes `$route` service to update the current URL, replacing\n           * current route parameters with those specified in `newParams`.\n           * Provided property names that match the route's path segment\n           * definitions will be interpolated into the location's path, while\n           * remaining properties will be treated as query params.\n           *\n           * @param {!Object<string, string>} newParams mapping of URL parameter names to values\n           */\n          updateParams: function(newParams) {\n            if (this.current && this.current.$$route) {\n              newParams = angular.extend({}, this.current.params, newParams);\n              $location.path(interpolate(this.current.$$route.originalPath, newParams));\n              // interpolate modifies newParams, only query params are left\n              $location.search(newParams);\n            } else {\n              throw $routeMinErr('norout', 'Tried updating route with no current route');\n            }\n          }\n        };\n\n    $rootScope.$on('$locationChangeStart', prepareRoute);\n    $rootScope.$on('$locationChangeSuccess', commitRoute);\n\n    return $route;\n\n    /////////////////////////////////////////////////////\n\n    /**\n     * @param on {string} current url\n     * @param route {Object} route regexp to match the url against\n     * @return {?Object}\n     *\n     * @description\n     * Check if the route matches the current url.\n     *\n     * Inspired by match in\n     * visionmedia/express/lib/router/router.js.\n     */\n    function switchRouteMatcher(on, route) {\n      var keys = route.keys,\n          params = {};\n\n      if (!route.regexp) return null;\n\n      var m = route.regexp.exec(on);\n      if (!m) return null;\n\n      for (var i = 1, len = m.length; i < len; ++i) {\n        var key = keys[i - 1];\n\n        var val = m[i];\n\n        if (key && val) {\n          params[key.name] = val;\n        }\n      }\n      return params;\n    }\n\n    function prepareRoute($locationEvent) {\n      var lastRoute = $route.current;\n\n      preparedRoute = parseRoute();\n      preparedRouteIsUpdateOnly = isNavigationUpdateOnly(preparedRoute, lastRoute);\n\n      if (!preparedRouteIsUpdateOnly && (lastRoute || preparedRoute)) {\n        if ($rootScope.$broadcast('$routeChangeStart', preparedRoute, lastRoute).defaultPrevented) {\n          if ($locationEvent) {\n            $locationEvent.preventDefault();\n          }\n        }\n      }\n    }\n\n    function commitRoute() {\n      var lastRoute = $route.current;\n      var nextRoute = preparedRoute;\n\n      if (preparedRouteIsUpdateOnly) {\n        lastRoute.params = nextRoute.params;\n        angular.copy(lastRoute.params, $routeParams);\n        $rootScope.$broadcast('$routeUpdate', lastRoute);\n      } else if (nextRoute || lastRoute) {\n        forceReload = false;\n        $route.current = nextRoute;\n\n        var nextRoutePromise = $q.resolve(nextRoute);\n\n        $browser.$$incOutstandingRequestCount('$route');\n\n        nextRoutePromise.\n          then(getRedirectionData).\n          then(handlePossibleRedirection).\n          then(function(keepProcessingRoute) {\n            return keepProcessingRoute && nextRoutePromise.\n              then(resolveLocals).\n              then(function(locals) {\n                // after route change\n                if (nextRoute === $route.current) {\n                  if (nextRoute) {\n                    nextRoute.locals = locals;\n                    angular.copy(nextRoute.params, $routeParams);\n                  }\n                  $rootScope.$broadcast('$routeChangeSuccess', nextRoute, lastRoute);\n                }\n              });\n          }).catch(function(error) {\n            if (nextRoute === $route.current) {\n              $rootScope.$broadcast('$routeChangeError', nextRoute, lastRoute, error);\n            }\n          }).finally(function() {\n            // Because `commitRoute()` is called from a `$rootScope.$evalAsync` block (see\n            // `$locationWatch`), this `$$completeOutstandingRequest()` call will not cause\n            // `outstandingRequestCount` to hit zero.  This is important in case we are redirecting\n            // to a new route which also requires some asynchronous work.\n\n            $browser.$$completeOutstandingRequest(noop, '$route');\n          });\n      }\n    }\n\n    function getRedirectionData(route) {\n      var data = {\n        route: route,\n        hasRedirection: false\n      };\n\n      if (route) {\n        if (route.redirectTo) {\n          if (angular.isString(route.redirectTo)) {\n            data.path = interpolate(route.redirectTo, route.params);\n            data.search = route.params;\n            data.hasRedirection = true;\n          } else {\n            var oldPath = $location.path();\n            var oldSearch = $location.search();\n            var newUrl = route.redirectTo(route.pathParams, oldPath, oldSearch);\n\n            if (angular.isDefined(newUrl)) {\n              data.url = newUrl;\n              data.hasRedirection = true;\n            }\n          }\n        } else if (route.resolveRedirectTo) {\n          return $q.\n            resolve($injector.invoke(route.resolveRedirectTo)).\n            then(function(newUrl) {\n              if (angular.isDefined(newUrl)) {\n                data.url = newUrl;\n                data.hasRedirection = true;\n              }\n\n              return data;\n            });\n        }\n      }\n\n      return data;\n    }\n\n    function handlePossibleRedirection(data) {\n      var keepProcessingRoute = true;\n\n      if (data.route !== $route.current) {\n        keepProcessingRoute = false;\n      } else if (data.hasRedirection) {\n        var oldUrl = $location.url();\n        var newUrl = data.url;\n\n        if (newUrl) {\n          $location.\n            url(newUrl).\n            replace();\n        } else {\n          newUrl = $location.\n            path(data.path).\n            search(data.search).\n            replace().\n            url();\n        }\n\n        if (newUrl !== oldUrl) {\n          // Exit out and don't process current next value,\n          // wait for next location change from redirect\n          keepProcessingRoute = false;\n        }\n      }\n\n      return keepProcessingRoute;\n    }\n\n    function resolveLocals(route) {\n      if (route) {\n        var locals = angular.extend({}, route.resolve);\n        angular.forEach(locals, function(value, key) {\n          locals[key] = angular.isString(value) ?\n              $injector.get(value) :\n              $injector.invoke(value, null, null, key);\n        });\n        var template = getTemplateFor(route);\n        if (angular.isDefined(template)) {\n          locals['$template'] = template;\n        }\n        return $q.all(locals);\n      }\n    }\n\n    function getTemplateFor(route) {\n      var template, templateUrl;\n      if (angular.isDefined(template = route.template)) {\n        if (angular.isFunction(template)) {\n          template = template(route.params);\n        }\n      } else if (angular.isDefined(templateUrl = route.templateUrl)) {\n        if (angular.isFunction(templateUrl)) {\n          templateUrl = templateUrl(route.params);\n        }\n        if (angular.isDefined(templateUrl)) {\n          route.loadedTemplateUrl = $sce.valueOf(templateUrl);\n          template = $templateRequest(templateUrl);\n        }\n      }\n      return template;\n    }\n\n    /**\n     * @returns {Object} the current active route, by matching it against the URL\n     */\n    function parseRoute() {\n      // Match a route\n      var params, match;\n      angular.forEach(routes, function(route, path) {\n        if (!match && (params = switchRouteMatcher($location.path(), route))) {\n          match = inherit(route, {\n            params: angular.extend({}, $location.search(), params),\n            pathParams: params});\n          match.$$route = route;\n        }\n      });\n      // No route matched; fallback to \"otherwise\" route\n      return match || routes[null] && inherit(routes[null], {params: {}, pathParams:{}});\n    }\n\n    /**\n     * @param {Object} newRoute - The new route configuration (as returned by `parseRoute()`).\n     * @param {Object} oldRoute - The previous route configuration (as returned by `parseRoute()`).\n     * @returns {boolean} Whether this is an \"update-only\" navigation, i.e. the URL maps to the same\n     *                    route and it can be reused (based on the config and the type of change).\n     */\n    function isNavigationUpdateOnly(newRoute, oldRoute) {\n      // IF this is not a forced reload\n      return !forceReload\n          // AND both `newRoute`/`oldRoute` are defined\n          && newRoute && oldRoute\n          // AND they map to the same Route Definition Object\n          && (newRoute.$$route === oldRoute.$$route)\n          // AND `reloadOnUrl` is disabled\n          && (!newRoute.reloadOnUrl\n              // OR `reloadOnSearch` is disabled\n              || (!newRoute.reloadOnSearch\n                  // AND both routes have the same path params\n                  && angular.equals(newRoute.pathParams, oldRoute.pathParams)\n              )\n          );\n    }\n\n    /**\n     * @returns {string} interpolation of the redirect path with the parameters\n     */\n    function interpolate(string, params) {\n      var result = [];\n      angular.forEach((string || '').split(':'), function(segment, i) {\n        if (i === 0) {\n          result.push(segment);\n        } else {\n          var segmentMatch = segment.match(/(\\w+)(?:[?*])?(.*)/);\n          var key = segmentMatch[1];\n          result.push(params[key]);\n          result.push(segmentMatch[2] || '');\n          delete params[key];\n        }\n      });\n      return result.join('');\n    }\n  }];\n}\n\ninstantiateRoute.$inject = ['$injector'];\nfunction instantiateRoute($injector) {\n  if (isEagerInstantiationEnabled) {\n    // Instantiate `$route`\n    $injector.get('$route');\n  }\n}\n\nngRouteModule.provider('$routeParams', $RouteParamsProvider);\n\n\n/**\n * @ngdoc service\n * @name $routeParams\n * @requires $route\n * @this\n *\n * @description\n * The `$routeParams` service allows you to retrieve the current set of route parameters.\n *\n * Requires the {@link ngRoute `ngRoute`} module to be installed.\n *\n * The route parameters are a combination of {@link ng.$location `$location`}'s\n * {@link ng.$location#search `search()`} and {@link ng.$location#path `path()`}.\n * The `path` parameters are extracted when the {@link ngRoute.$route `$route`} path is matched.\n *\n * In case of parameter name collision, `path` params take precedence over `search` params.\n *\n * The service guarantees that the identity of the `$routeParams` object will remain unchanged\n * (but its properties will likely change) even when a route change occurs.\n *\n * Note that the `$routeParams` are only updated *after* a route change completes successfully.\n * This means that you cannot rely on `$routeParams` being correct in route resolve functions.\n * Instead you can use `$route.current.params` to access the new route's parameters.\n *\n * @example\n * ```js\n *  // Given:\n *  // URL: http://server.com/index.html#/Chapter/1/Section/2?search=moby\n *  // Route: /Chapter/:chapterId/Section/:sectionId\n *  //\n *  // Then\n *  $routeParams ==> {chapterId:'1', sectionId:'2', search:'moby'}\n * ```\n */\nfunction $RouteParamsProvider() {\n  this.$get = function() { return {}; };\n}\n\nngRouteModule.directive('ngView', ngViewFactory);\nngRouteModule.directive('ngView', ngViewFillContentFactory);\n\n\n/**\n * @ngdoc directive\n * @name ngView\n * @restrict ECA\n *\n * @description\n * `ngView` is a directive that complements the {@link ngRoute.$route $route} service by\n * including the rendered template of the current route into the main layout (`index.html`) file.\n * Every time the current route changes, the included view changes with it according to the\n * configuration of the `$route` service.\n *\n * Requires the {@link ngRoute `ngRoute`} module to be installed.\n *\n * @animations\n * | Animation                        | Occurs                              |\n * |----------------------------------|-------------------------------------|\n * | {@link ng.$animate#enter enter}  | when the new element is inserted to the DOM |\n * | {@link ng.$animate#leave leave}  | when the old element is removed from to the DOM  |\n *\n * The enter and leave animation occur concurrently.\n *\n * @scope\n * @priority 400\n * @param {string=} onload Expression to evaluate whenever the view updates.\n *\n * @param {string=} autoscroll Whether `ngView` should call {@link ng.$anchorScroll\n *                  $anchorScroll} to scroll the viewport after the view is updated.\n *\n *                  - If the attribute is not set, disable scrolling.\n *                  - If the attribute is set without value, enable scrolling.\n *                  - Otherwise enable scrolling only if the `autoscroll` attribute value evaluated\n *                    as an expression yields a truthy value.\n * @example\n    <example name=\"ngView-directive\" module=\"ngViewExample\"\n             deps=\"angular-route.js;angular-animate.js\"\n             animations=\"true\" fixBase=\"true\">\n      <file name=\"index.html\">\n        <div ng-controller=\"MainCtrl as main\">\n          Choose:\n          <a href=\"Book/Moby\">Moby</a> |\n          <a href=\"Book/Moby/ch/1\">Moby: Ch1</a> |\n          <a href=\"Book/Gatsby\">Gatsby</a> |\n          <a href=\"Book/Gatsby/ch/4?key=value\">Gatsby: Ch4</a> |\n          <a href=\"Book/Scarlet\">Scarlet Letter</a><br/>\n\n          <div class=\"view-animate-container\">\n            <div ng-view class=\"view-animate\"></div>\n          </div>\n          <hr />\n\n          <pre>$location.path() = {{main.$location.path()}}</pre>\n          <pre>$route.current.templateUrl = {{main.$route.current.templateUrl}}</pre>\n          <pre>$route.current.params = {{main.$route.current.params}}</pre>\n          <pre>$routeParams = {{main.$routeParams}}</pre>\n        </div>\n      </file>\n\n      <file name=\"book.html\">\n        <div>\n          controller: {{book.name}}<br />\n          Book Id: {{book.params.bookId}}<br />\n        </div>\n      </file>\n\n      <file name=\"chapter.html\">\n        <div>\n          controller: {{chapter.name}}<br />\n          Book Id: {{chapter.params.bookId}}<br />\n          Chapter Id: {{chapter.params.chapterId}}\n        </div>\n      </file>\n\n      <file name=\"animations.css\">\n        .view-animate-container {\n          position:relative;\n          height:100px!important;\n          background:white;\n          border:1px solid black;\n          height:40px;\n          overflow:hidden;\n        }\n\n        .view-animate {\n          padding:10px;\n        }\n\n        .view-animate.ng-enter, .view-animate.ng-leave {\n          transition:all cubic-bezier(0.250, 0.460, 0.450, 0.940) 1.5s;\n\n          display:block;\n          width:100%;\n          border-left:1px solid black;\n\n          position:absolute;\n          top:0;\n          left:0;\n          right:0;\n          bottom:0;\n          padding:10px;\n        }\n\n        .view-animate.ng-enter {\n          left:100%;\n        }\n        .view-animate.ng-enter.ng-enter-active {\n          left:0;\n        }\n        .view-animate.ng-leave.ng-leave-active {\n          left:-100%;\n        }\n      </file>\n\n      <file name=\"script.js\">\n        angular.module('ngViewExample', ['ngRoute', 'ngAnimate'])\n          .config(['$routeProvider', '$locationProvider',\n            function($routeProvider, $locationProvider) {\n              $routeProvider\n                .when('/Book/:bookId', {\n                  templateUrl: 'book.html',\n                  controller: 'BookCtrl',\n                  controllerAs: 'book'\n                })\n                .when('/Book/:bookId/ch/:chapterId', {\n                  templateUrl: 'chapter.html',\n                  controller: 'ChapterCtrl',\n                  controllerAs: 'chapter'\n                });\n\n              $locationProvider.html5Mode(true);\n          }])\n          .controller('MainCtrl', ['$route', '$routeParams', '$location',\n            function MainCtrl($route, $routeParams, $location) {\n              this.$route = $route;\n              this.$location = $location;\n              this.$routeParams = $routeParams;\n          }])\n          .controller('BookCtrl', ['$routeParams', function BookCtrl($routeParams) {\n            this.name = 'BookCtrl';\n            this.params = $routeParams;\n          }])\n          .controller('ChapterCtrl', ['$routeParams', function ChapterCtrl($routeParams) {\n            this.name = 'ChapterCtrl';\n            this.params = $routeParams;\n          }]);\n\n      </file>\n\n      <file name=\"protractor.js\" type=\"protractor\">\n        it('should load and compile correct template', function() {\n          element(by.linkText('Moby: Ch1')).click();\n          var content = element(by.css('[ng-view]')).getText();\n          expect(content).toMatch(/controller: ChapterCtrl/);\n          expect(content).toMatch(/Book Id: Moby/);\n          expect(content).toMatch(/Chapter Id: 1/);\n\n          element(by.partialLinkText('Scarlet')).click();\n\n          content = element(by.css('[ng-view]')).getText();\n          expect(content).toMatch(/controller: BookCtrl/);\n          expect(content).toMatch(/Book Id: Scarlet/);\n        });\n      </file>\n    </example>\n */\n\n\n/**\n * @ngdoc event\n * @name ngView#$viewContentLoaded\n * @eventType emit on the current ngView scope\n * @description\n * Emitted every time the ngView content is reloaded.\n */\nngViewFactory.$inject = ['$route', '$anchorScroll', '$animate'];\nfunction ngViewFactory($route, $anchorScroll, $animate) {\n  return {\n    restrict: 'ECA',\n    terminal: true,\n    priority: 400,\n    transclude: 'element',\n    link: function(scope, $element, attr, ctrl, $transclude) {\n        var currentScope,\n            currentElement,\n            previousLeaveAnimation,\n            autoScrollExp = attr.autoscroll,\n            onloadExp = attr.onload || '';\n\n        scope.$on('$routeChangeSuccess', update);\n        update();\n\n        function cleanupLastView() {\n          if (previousLeaveAnimation) {\n            $animate.cancel(previousLeaveAnimation);\n            previousLeaveAnimation = null;\n          }\n\n          if (currentScope) {\n            currentScope.$destroy();\n            currentScope = null;\n          }\n          if (currentElement) {\n            previousLeaveAnimation = $animate.leave(currentElement);\n            previousLeaveAnimation.done(function(response) {\n              if (response !== false) previousLeaveAnimation = null;\n            });\n            currentElement = null;\n          }\n        }\n\n        function update() {\n          var locals = $route.current && $route.current.locals,\n              template = locals && locals.$template;\n\n          if (angular.isDefined(template)) {\n            var newScope = scope.$new();\n            var current = $route.current;\n\n            // Note: This will also link all children of ng-view that were contained in the original\n            // html. If that content contains controllers, ... they could pollute/change the scope.\n            // However, using ng-view on an element with additional content does not make sense...\n            // Note: We can't remove them in the cloneAttchFn of $transclude as that\n            // function is called before linking the content, which would apply child\n            // directives to non existing elements.\n            var clone = $transclude(newScope, function(clone) {\n              $animate.enter(clone, null, currentElement || $element).done(function onNgViewEnter(response) {\n                if (response !== false && angular.isDefined(autoScrollExp)\n                  && (!autoScrollExp || scope.$eval(autoScrollExp))) {\n                  $anchorScroll();\n                }\n              });\n              cleanupLastView();\n            });\n\n            currentElement = clone;\n            currentScope = current.scope = newScope;\n            currentScope.$emit('$viewContentLoaded');\n            currentScope.$eval(onloadExp);\n          } else {\n            cleanupLastView();\n          }\n        }\n    }\n  };\n}\n\n// This directive is called during the $transclude call of the first `ngView` directive.\n// It will replace and compile the content of the element with the loaded template.\n// We need this directive so that the element content is already filled when\n// the link function of another directive on the same element as ngView\n// is called.\nngViewFillContentFactory.$inject = ['$compile', '$controller', '$route'];\nfunction ngViewFillContentFactory($compile, $controller, $route) {\n  return {\n    restrict: 'ECA',\n    priority: -400,\n    link: function(scope, $element) {\n      var current = $route.current,\n          locals = current.locals;\n\n      $element.html(locals.$template);\n\n      var link = $compile($element.contents());\n\n      if (current.controller) {\n        locals.$scope = scope;\n        var controller = $controller(current.controller, locals);\n        if (current.controllerAs) {\n          scope[current.controllerAs] = controller;\n        }\n        $element.data('$ngControllerController', controller);\n        $element.children().data('$ngControllerController', controller);\n      }\n      scope[current.resolveAs || '$resolve'] = locals;\n\n      link(scope);\n    }\n  };\n}\n\n\n})(window, window.angular);\n","require('./angular-route');\nmodule.exports = 'ngRoute';\n","/**\n * @license AngularJS v1.8.3\n * (c) 2010-2020 Google LLC. http://angularjs.org\n * License: MIT\n */\n(function(window, angular) {'use strict';\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *     Any commits to this file should be reviewed with security in mind.  *\n *   Changes to this file can potentially create security vulnerabilities. *\n *          An approval from 2 Core members with history of modifying      *\n *                         this file is required.                          *\n *                                                                         *\n *  Does the change somehow allow for arbitrary javascript to be executed? *\n *    Or allows for someone to change the prototype of built-in objects?   *\n *     Or gives undesired access to variables likes document or window?    *\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\nvar $sanitizeMinErr = angular.$$minErr('$sanitize');\nvar bind;\nvar extend;\nvar forEach;\nvar isArray;\nvar isDefined;\nvar lowercase;\nvar noop;\nvar nodeContains;\nvar htmlParser;\nvar htmlSanitizeWriter;\n\n/**\n * @ngdoc module\n * @name ngSanitize\n * @description\n *\n * The `ngSanitize` module provides functionality to sanitize HTML.\n *\n * See {@link ngSanitize.$sanitize `$sanitize`} for usage.\n */\n\n/**\n * @ngdoc service\n * @name $sanitize\n * @kind function\n *\n * @description\n *   Sanitizes an html string by stripping all potentially dangerous tokens.\n *\n *   The input is sanitized by parsing the HTML into tokens. All safe tokens (from a trusted URI list) are\n *   then serialized back to a properly escaped HTML string. This means that no unsafe input can make\n *   it into the returned string.\n *\n *   The trusted URIs for URL sanitization of attribute values is configured using the functions\n *   `aHrefSanitizationTrustedUrlList` and `imgSrcSanitizationTrustedUrlList` of {@link $compileProvider}.\n *\n *   The input may also contain SVG markup if this is enabled via {@link $sanitizeProvider}.\n *\n * @param {string} html HTML input.\n * @returns {string} Sanitized HTML.\n *\n * @example\n   <example module=\"sanitizeExample\" deps=\"angular-sanitize.js\" name=\"sanitize-service\">\n   <file name=\"index.html\">\n     <script>\n         angular.module('sanitizeExample', ['ngSanitize'])\n           .controller('ExampleController', ['$scope', '$sce', function($scope, $sce) {\n             $scope.snippet =\n               '<p style=\"color:blue\">an html\\n' +\n               '<em onmouseover=\"this.textContent=\\'PWN3D!\\'\">click here</em>\\n' +\n               'snippet</p>';\n             $scope.deliberatelyTrustDangerousSnippet = function() {\n               return $sce.trustAsHtml($scope.snippet);\n             };\n           }]);\n     </script>\n     <div ng-controller=\"ExampleController\">\n        Snippet: <textarea ng-model=\"snippet\" cols=\"60\" rows=\"3\"></textarea>\n       <table>\n         <tr>\n           <td>Directive</td>\n           <td>How</td>\n           <td>Source</td>\n           <td>Rendered</td>\n         </tr>\n         <tr id=\"bind-html-with-sanitize\">\n           <td>ng-bind-html</td>\n           <td>Automatically uses $sanitize</td>\n           <td><pre>&lt;div ng-bind-html=\"snippet\"&gt;<br/>&lt;/div&gt;</pre></td>\n           <td><div ng-bind-html=\"snippet\"></div></td>\n         </tr>\n         <tr id=\"bind-html-with-trust\">\n           <td>ng-bind-html</td>\n           <td>Bypass $sanitize by explicitly trusting the dangerous value</td>\n           <td>\n           <pre>&lt;div ng-bind-html=\"deliberatelyTrustDangerousSnippet()\"&gt;\n&lt;/div&gt;</pre>\n           </td>\n           <td><div ng-bind-html=\"deliberatelyTrustDangerousSnippet()\"></div></td>\n         </tr>\n         <tr id=\"bind-default\">\n           <td>ng-bind</td>\n           <td>Automatically escapes</td>\n           <td><pre>&lt;div ng-bind=\"snippet\"&gt;<br/>&lt;/div&gt;</pre></td>\n           <td><div ng-bind=\"snippet\"></div></td>\n         </tr>\n       </table>\n       </div>\n   </file>\n   <file name=\"protractor.js\" type=\"protractor\">\n     it('should sanitize the html snippet by default', function() {\n       expect(element(by.css('#bind-html-with-sanitize div')).getAttribute('innerHTML')).\n         toBe('<p>an html\\n<em>click here</em>\\nsnippet</p>');\n     });\n\n     it('should inline raw snippet if bound to a trusted value', function() {\n       expect(element(by.css('#bind-html-with-trust div')).getAttribute('innerHTML')).\n         toBe(\"<p style=\\\"color:blue\\\">an html\\n\" +\n              \"<em onmouseover=\\\"this.textContent='PWN3D!'\\\">click here</em>\\n\" +\n              \"snippet</p>\");\n     });\n\n     it('should escape snippet without any filter', function() {\n       expect(element(by.css('#bind-default div')).getAttribute('innerHTML')).\n         toBe(\"&lt;p style=\\\"color:blue\\\"&gt;an html\\n\" +\n              \"&lt;em onmouseover=\\\"this.textContent='PWN3D!'\\\"&gt;click here&lt;/em&gt;\\n\" +\n              \"snippet&lt;/p&gt;\");\n     });\n\n     it('should update', function() {\n       element(by.model('snippet')).clear();\n       element(by.model('snippet')).sendKeys('new <b onclick=\"alert(1)\">text</b>');\n       expect(element(by.css('#bind-html-with-sanitize div')).getAttribute('innerHTML')).\n         toBe('new <b>text</b>');\n       expect(element(by.css('#bind-html-with-trust div')).getAttribute('innerHTML')).toBe(\n         'new <b onclick=\"alert(1)\">text</b>');\n       expect(element(by.css('#bind-default div')).getAttribute('innerHTML')).toBe(\n         \"new &lt;b onclick=\\\"alert(1)\\\"&gt;text&lt;/b&gt;\");\n     });\n   </file>\n   </example>\n */\n\n\n/**\n * @ngdoc provider\n * @name $sanitizeProvider\n * @this\n *\n * @description\n * Creates and configures {@link $sanitize} instance.\n */\nfunction $SanitizeProvider() {\n  var hasBeenInstantiated = false;\n  var svgEnabled = false;\n\n  this.$get = ['$$sanitizeUri', function($$sanitizeUri) {\n    hasBeenInstantiated = true;\n    if (svgEnabled) {\n      extend(validElements, svgElements);\n    }\n    return function(html) {\n      var buf = [];\n      htmlParser(html, htmlSanitizeWriter(buf, function(uri, isImage) {\n        return !/^unsafe:/.test($$sanitizeUri(uri, isImage));\n      }));\n      return buf.join('');\n    };\n  }];\n\n\n  /**\n   * @ngdoc method\n   * @name $sanitizeProvider#enableSvg\n   * @kind function\n   *\n   * @description\n   * Enables a subset of svg to be supported by the sanitizer.\n   *\n   * <div class=\"alert alert-warning\">\n   *   <p>By enabling this setting without taking other precautions, you might expose your\n   *   application to click-hijacking attacks. In these attacks, sanitized svg elements could be positioned\n   *   outside of the containing element and be rendered over other elements on the page (e.g. a login\n   *   link). Such behavior can then result in phishing incidents.</p>\n   *\n   *   <p>To protect against these, explicitly setup `overflow: hidden` css rule for all potential svg\n   *   tags within the sanitized content:</p>\n   *\n   *   <br>\n   *\n   *   <pre><code>\n   *   .rootOfTheIncludedContent svg {\n   *     overflow: hidden !important;\n   *   }\n   *   </code></pre>\n   * </div>\n   *\n   * @param {boolean=} flag Enable or disable SVG support in the sanitizer.\n   * @returns {boolean|$sanitizeProvider} Returns the currently configured value if called\n   *    without an argument or self for chaining otherwise.\n   */\n  this.enableSvg = function(enableSvg) {\n    if (isDefined(enableSvg)) {\n      svgEnabled = enableSvg;\n      return this;\n    } else {\n      return svgEnabled;\n    }\n  };\n\n\n  /**\n   * @ngdoc method\n   * @name $sanitizeProvider#addValidElements\n   * @kind function\n   *\n   * @description\n   * Extends the built-in lists of valid HTML/SVG elements, i.e. elements that are considered safe\n   * and are not stripped off during sanitization. You can extend the following lists of elements:\n   *\n   * - `htmlElements`: A list of elements (tag names) to extend the current list of safe HTML\n   *   elements. HTML elements considered safe will not be removed during sanitization. All other\n   *   elements will be stripped off.\n   *\n   * - `htmlVoidElements`: This is similar to `htmlElements`, but marks the elements as\n   *   \"void elements\" (similar to HTML\n   *   [void elements](https://rawgit.com/w3c/html/html5.1-2/single-page.html#void-elements)). These\n   *   elements have no end tag and cannot have content.\n   *\n   * - `svgElements`: This is similar to `htmlElements`, but for SVG elements. This list is only\n   *   taken into account if SVG is {@link ngSanitize.$sanitizeProvider#enableSvg enabled} for\n   *   `$sanitize`.\n   *\n   * <div class=\"alert alert-info\">\n   *   This method must be called during the {@link angular.Module#config config} phase. Once the\n   *   `$sanitize` service has been instantiated, this method has no effect.\n   * </div>\n   *\n   * <div class=\"alert alert-warning\">\n   *   Keep in mind that extending the built-in lists of elements may expose your app to XSS or\n   *   other vulnerabilities. Be very mindful of the elements you add.\n   * </div>\n   *\n   * @param {Array<String>|Object} elements - A list of valid HTML elements or an object with one or\n   *   more of the following properties:\n   *   - **htmlElements** - `{Array<String>}` - A list of elements to extend the current list of\n   *     HTML elements.\n   *   - **htmlVoidElements** - `{Array<String>}` - A list of elements to extend the current list of\n   *     void HTML elements; i.e. elements that do not have an end tag.\n   *   - **svgElements** - `{Array<String>}` - A list of elements to extend the current list of SVG\n   *     elements. The list of SVG elements is only taken into account if SVG is\n   *     {@link ngSanitize.$sanitizeProvider#enableSvg enabled} for `$sanitize`.\n   *\n   * Passing an array (`[...]`) is equivalent to passing `{htmlElements: [...]}`.\n   *\n   * @return {$sanitizeProvider} Returns self for chaining.\n   */\n  this.addValidElements = function(elements) {\n    if (!hasBeenInstantiated) {\n      if (isArray(elements)) {\n        elements = {htmlElements: elements};\n      }\n\n      addElementsTo(svgElements, elements.svgElements);\n      addElementsTo(voidElements, elements.htmlVoidElements);\n      addElementsTo(validElements, elements.htmlVoidElements);\n      addElementsTo(validElements, elements.htmlElements);\n    }\n\n    return this;\n  };\n\n\n  /**\n   * @ngdoc method\n   * @name $sanitizeProvider#addValidAttrs\n   * @kind function\n   *\n   * @description\n   * Extends the built-in list of valid attributes, i.e. attributes that are considered safe and are\n   * not stripped off during sanitization.\n   *\n   * **Note**:\n   * The new attributes will not be treated as URI attributes, which means their values will not be\n   * sanitized as URIs using `$compileProvider`'s\n   * {@link ng.$compileProvider#aHrefSanitizationTrustedUrlList aHrefSanitizationTrustedUrlList} and\n   * {@link ng.$compileProvider#imgSrcSanitizationTrustedUrlList imgSrcSanitizationTrustedUrlList}.\n   *\n   * <div class=\"alert alert-info\">\n   *   This method must be called during the {@link angular.Module#config config} phase. Once the\n   *   `$sanitize` service has been instantiated, this method has no effect.\n   * </div>\n   *\n   * <div class=\"alert alert-warning\">\n   *   Keep in mind that extending the built-in list of attributes may expose your app to XSS or\n   *   other vulnerabilities. Be very mindful of the attributes you add.\n   * </div>\n   *\n   * @param {Array<String>} attrs - A list of valid attributes.\n   *\n   * @returns {$sanitizeProvider} Returns self for chaining.\n   */\n  this.addValidAttrs = function(attrs) {\n    if (!hasBeenInstantiated) {\n      extend(validAttrs, arrayToMap(attrs, true));\n    }\n    return this;\n  };\n\n  //////////////////////////////////////////////////////////////////////////////////////////////////\n  // Private stuff\n  //////////////////////////////////////////////////////////////////////////////////////////////////\n\n  bind = angular.bind;\n  extend = angular.extend;\n  forEach = angular.forEach;\n  isArray = angular.isArray;\n  isDefined = angular.isDefined;\n  lowercase = angular.$$lowercase;\n  noop = angular.noop;\n\n  htmlParser = htmlParserImpl;\n  htmlSanitizeWriter = htmlSanitizeWriterImpl;\n\n  nodeContains = window.Node.prototype.contains || /** @this */ function(arg) {\n    // eslint-disable-next-line no-bitwise\n    return !!(this.compareDocumentPosition(arg) & 16);\n  };\n\n  // Regular Expressions for parsing tags and attributes\n  var SURROGATE_PAIR_REGEXP = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,\n    // Match everything outside of normal chars and \" (quote character)\n    NON_ALPHANUMERIC_REGEXP = /([^#-~ |!])/g;\n\n\n  // Good source of info about elements and attributes\n  // http://dev.w3.org/html5/spec/Overview.html#semantics\n  // http://simon.html5.org/html-elements\n\n  // Safe Void Elements - HTML5\n  // http://dev.w3.org/html5/spec/Overview.html#void-elements\n  var voidElements = stringToMap('area,br,col,hr,img,wbr');\n\n  // Elements that you can, intentionally, leave open (and which close themselves)\n  // http://dev.w3.org/html5/spec/Overview.html#optional-tags\n  var optionalEndTagBlockElements = stringToMap('colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr'),\n      optionalEndTagInlineElements = stringToMap('rp,rt'),\n      optionalEndTagElements = extend({},\n                                              optionalEndTagInlineElements,\n                                              optionalEndTagBlockElements);\n\n  // Safe Block Elements - HTML5\n  var blockElements = extend({}, optionalEndTagBlockElements, stringToMap('address,article,' +\n          'aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,' +\n          'h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul'));\n\n  // Inline Elements - HTML5\n  var inlineElements = extend({}, optionalEndTagInlineElements, stringToMap('a,abbr,acronym,b,' +\n          'bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,' +\n          'samp,small,span,strike,strong,sub,sup,time,tt,u,var'));\n\n  // SVG Elements\n  // https://wiki.whatwg.org/wiki/Sanitization_rules#svg_Elements\n  // Note: the elements animate,animateColor,animateMotion,animateTransform,set are intentionally omitted.\n  // They can potentially allow for arbitrary javascript to be executed. See #11290\n  var svgElements = stringToMap('circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,' +\n          'hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,' +\n          'radialGradient,rect,stop,svg,switch,text,title,tspan');\n\n  // Blocked Elements (will be stripped)\n  var blockedElements = stringToMap('script,style');\n\n  var validElements = extend({},\n                                     voidElements,\n                                     blockElements,\n                                     inlineElements,\n                                     optionalEndTagElements);\n\n  //Attributes that have href and hence need to be sanitized\n  var uriAttrs = stringToMap('background,cite,href,longdesc,src,xlink:href,xml:base');\n\n  var htmlAttrs = stringToMap('abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,' +\n      'color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,' +\n      'ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,' +\n      'scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,' +\n      'valign,value,vspace,width');\n\n  // SVG attributes (without \"id\" and \"name\" attributes)\n  // https://wiki.whatwg.org/wiki/Sanitization_rules#svg_Attributes\n  var svgAttrs = stringToMap('accent-height,accumulate,additive,alphabetic,arabic-form,ascent,' +\n      'baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,' +\n      'cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,' +\n      'font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,' +\n      'height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,' +\n      'marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,' +\n      'max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,' +\n      'path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,' +\n      'requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,' +\n      'stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,' +\n      'stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,' +\n      'stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,' +\n      'underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,' +\n      'width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,' +\n      'xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan', true);\n\n  var validAttrs = extend({},\n                                  uriAttrs,\n                                  svgAttrs,\n                                  htmlAttrs);\n\n  function stringToMap(str, lowercaseKeys) {\n    return arrayToMap(str.split(','), lowercaseKeys);\n  }\n\n  function arrayToMap(items, lowercaseKeys) {\n    var obj = {}, i;\n    for (i = 0; i < items.length; i++) {\n      obj[lowercaseKeys ? lowercase(items[i]) : items[i]] = true;\n    }\n    return obj;\n  }\n\n  function addElementsTo(elementsMap, newElements) {\n    if (newElements && newElements.length) {\n      extend(elementsMap, arrayToMap(newElements));\n    }\n  }\n\n  /**\n   * Create an inert document that contains the dirty HTML that needs sanitizing.\n   * We use the DOMParser API by default and fall back to createHTMLDocument if DOMParser is not\n   * available.\n   */\n  var getInertBodyElement /* function(html: string): HTMLBodyElement */ = (function(window, document) {\n    if (isDOMParserAvailable()) {\n      return getInertBodyElement_DOMParser;\n    }\n\n    if (!document || !document.implementation) {\n      throw $sanitizeMinErr('noinert', 'Can\\'t create an inert html document');\n    }\n    var inertDocument = document.implementation.createHTMLDocument('inert');\n    var inertBodyElement = (inertDocument.documentElement || inertDocument.getDocumentElement()).querySelector('body');\n    return getInertBodyElement_InertDocument;\n\n    function isDOMParserAvailable() {\n      try {\n        return !!getInertBodyElement_DOMParser('');\n      } catch (e) {\n        return false;\n      }\n    }\n\n    function getInertBodyElement_DOMParser(html) {\n      // We add this dummy element to ensure that the rest of the content is parsed as expected\n      // e.g. leading whitespace is maintained and tags like `<meta>` do not get hoisted to the `<head>` tag.\n      html = '<remove></remove>' + html;\n      try {\n        var body = new window.DOMParser().parseFromString(html, 'text/html').body;\n        body.firstChild.remove();\n        return body;\n      } catch (e) {\n        return undefined;\n      }\n    }\n\n    function getInertBodyElement_InertDocument(html) {\n      inertBodyElement.innerHTML = html;\n\n      // Support: IE 9-11 only\n      // strip custom-namespaced attributes on IE<=11\n      if (document.documentMode) {\n        stripCustomNsAttrs(inertBodyElement);\n      }\n\n      return inertBodyElement;\n    }\n  })(window, window.document);\n\n  /**\n   * @example\n   * htmlParser(htmlString, {\n   *     start: function(tag, attrs) {},\n   *     end: function(tag) {},\n   *     chars: function(text) {},\n   *     comment: function(text) {}\n   * });\n   *\n   * @param {string} html string\n   * @param {object} handler\n   */\n  function htmlParserImpl(html, handler) {\n    if (html === null || html === undefined) {\n      html = '';\n    } else if (typeof html !== 'string') {\n      html = '' + html;\n    }\n\n    var inertBodyElement = getInertBodyElement(html);\n    if (!inertBodyElement) return '';\n\n    //mXSS protection\n    var mXSSAttempts = 5;\n    do {\n      if (mXSSAttempts === 0) {\n        throw $sanitizeMinErr('uinput', 'Failed to sanitize html because the input is unstable');\n      }\n      mXSSAttempts--;\n\n      // trigger mXSS if it is going to happen by reading and writing the innerHTML\n      html = inertBodyElement.innerHTML;\n      inertBodyElement = getInertBodyElement(html);\n    } while (html !== inertBodyElement.innerHTML);\n\n    var node = inertBodyElement.firstChild;\n    while (node) {\n      switch (node.nodeType) {\n        case 1: // ELEMENT_NODE\n          handler.start(node.nodeName.toLowerCase(), attrToMap(node.attributes));\n          break;\n        case 3: // TEXT NODE\n          handler.chars(node.textContent);\n          break;\n      }\n\n      var nextNode;\n      if (!(nextNode = node.firstChild)) {\n        if (node.nodeType === 1) {\n          handler.end(node.nodeName.toLowerCase());\n        }\n        nextNode = getNonDescendant('nextSibling', node);\n        if (!nextNode) {\n          while (nextNode == null) {\n            node = getNonDescendant('parentNode', node);\n            if (node === inertBodyElement) break;\n            nextNode = getNonDescendant('nextSibling', node);\n            if (node.nodeType === 1) {\n              handler.end(node.nodeName.toLowerCase());\n            }\n          }\n        }\n      }\n      node = nextNode;\n    }\n\n    while ((node = inertBodyElement.firstChild)) {\n      inertBodyElement.removeChild(node);\n    }\n  }\n\n  function attrToMap(attrs) {\n    var map = {};\n    for (var i = 0, ii = attrs.length; i < ii; i++) {\n      var attr = attrs[i];\n      map[attr.name] = attr.value;\n    }\n    return map;\n  }\n\n\n  /**\n   * Escapes all potentially dangerous characters, so that the\n   * resulting string can be safely inserted into attribute or\n   * element text.\n   * @param value\n   * @returns {string} escaped text\n   */\n  function encodeEntities(value) {\n    return value.\n      replace(/&/g, '&amp;').\n      replace(SURROGATE_PAIR_REGEXP, function(value) {\n        var hi = value.charCodeAt(0);\n        var low = value.charCodeAt(1);\n        return '&#' + (((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000) + ';';\n      }).\n      replace(NON_ALPHANUMERIC_REGEXP, function(value) {\n        return '&#' + value.charCodeAt(0) + ';';\n      }).\n      replace(/</g, '&lt;').\n      replace(/>/g, '&gt;');\n  }\n\n  /**\n   * create an HTML/XML writer which writes to buffer\n   * @param {Array} buf use buf.join('') to get out sanitized html string\n   * @returns {object} in the form of {\n   *     start: function(tag, attrs) {},\n   *     end: function(tag) {},\n   *     chars: function(text) {},\n   *     comment: function(text) {}\n   * }\n   */\n  function htmlSanitizeWriterImpl(buf, uriValidator) {\n    var ignoreCurrentElement = false;\n    var out = bind(buf, buf.push);\n    return {\n      start: function(tag, attrs) {\n        tag = lowercase(tag);\n        if (!ignoreCurrentElement && blockedElements[tag]) {\n          ignoreCurrentElement = tag;\n        }\n        if (!ignoreCurrentElement && validElements[tag] === true) {\n          out('<');\n          out(tag);\n          forEach(attrs, function(value, key) {\n            var lkey = lowercase(key);\n            var isImage = (tag === 'img' && lkey === 'src') || (lkey === 'background');\n            if (validAttrs[lkey] === true &&\n              (uriAttrs[lkey] !== true || uriValidator(value, isImage))) {\n              out(' ');\n              out(key);\n              out('=\"');\n              out(encodeEntities(value));\n              out('\"');\n            }\n          });\n          out('>');\n        }\n      },\n      end: function(tag) {\n        tag = lowercase(tag);\n        if (!ignoreCurrentElement && validElements[tag] === true && voidElements[tag] !== true) {\n          out('</');\n          out(tag);\n          out('>');\n        }\n        // eslint-disable-next-line eqeqeq\n        if (tag == ignoreCurrentElement) {\n          ignoreCurrentElement = false;\n        }\n      },\n      chars: function(chars) {\n        if (!ignoreCurrentElement) {\n          out(encodeEntities(chars));\n        }\n      }\n    };\n  }\n\n\n  /**\n   * When IE9-11 comes across an unknown namespaced attribute e.g. 'xlink:foo' it adds 'xmlns:ns1' attribute to declare\n   * ns1 namespace and prefixes the attribute with 'ns1' (e.g. 'ns1:xlink:foo'). This is undesirable since we don't want\n   * to allow any of these custom attributes. This method strips them all.\n   *\n   * @param node Root element to process\n   */\n  function stripCustomNsAttrs(node) {\n    while (node) {\n      if (node.nodeType === window.Node.ELEMENT_NODE) {\n        var attrs = node.attributes;\n        for (var i = 0, l = attrs.length; i < l; i++) {\n          var attrNode = attrs[i];\n          var attrName = attrNode.name.toLowerCase();\n          if (attrName === 'xmlns:ns1' || attrName.lastIndexOf('ns1:', 0) === 0) {\n            node.removeAttributeNode(attrNode);\n            i--;\n            l--;\n          }\n        }\n      }\n\n      var nextNode = node.firstChild;\n      if (nextNode) {\n        stripCustomNsAttrs(nextNode);\n      }\n\n      node = getNonDescendant('nextSibling', node);\n    }\n  }\n\n  function getNonDescendant(propName, node) {\n    // An element is clobbered if its `propName` property points to one of its descendants\n    var nextNode = node[propName];\n    if (nextNode && nodeContains.call(node, nextNode)) {\n      throw $sanitizeMinErr('elclob', 'Failed to sanitize html because the element is clobbered: {0}', node.outerHTML || node.outerText);\n    }\n    return nextNode;\n  }\n}\n\nfunction sanitizeText(chars) {\n  var buf = [];\n  var writer = htmlSanitizeWriter(buf, noop);\n  writer.chars(chars);\n  return buf.join('');\n}\n\n\n// define ngSanitize module and register $sanitize service\nangular.module('ngSanitize', [])\n  .provider('$sanitize', $SanitizeProvider)\n  .info({ angularVersion: '1.8.3' });\n\n/**\n * @ngdoc filter\n * @name linky\n * @kind function\n *\n * @description\n * Finds links in text input and turns them into html links. Supports `http/https/ftp/sftp/mailto` and\n * plain email address links.\n *\n * Requires the {@link ngSanitize `ngSanitize`} module to be installed.\n *\n * @param {string} text Input text.\n * @param {string} [target] Window (`_blank|_self|_parent|_top`) or named frame to open links in.\n * @param {object|function(url)} [attributes] Add custom attributes to the link element.\n *\n *    Can be one of:\n *\n *    - `object`: A map of attributes\n *    - `function`: Takes the url as a parameter and returns a map of attributes\n *\n *    If the map of attributes contains a value for `target`, it overrides the value of\n *    the target parameter.\n *\n *\n * @returns {string} Html-linkified and {@link $sanitize sanitized} text.\n *\n * @usage\n   <span ng-bind-html=\"linky_expression | linky\"></span>\n *\n * @example\n   <example module=\"linkyExample\" deps=\"angular-sanitize.js\" name=\"linky-filter\">\n     <file name=\"index.html\">\n       <div ng-controller=\"ExampleController\">\n       Snippet: <textarea ng-model=\"snippet\" cols=\"60\" rows=\"3\"></textarea>\n       <table>\n         <tr>\n           <th>Filter</th>\n           <th>Source</th>\n           <th>Rendered</th>\n         </tr>\n         <tr id=\"linky-filter\">\n           <td>linky filter</td>\n           <td>\n             <pre>&lt;div ng-bind-html=\"snippet | linky\"&gt;<br>&lt;/div&gt;</pre>\n           </td>\n           <td>\n             <div ng-bind-html=\"snippet | linky\"></div>\n           </td>\n         </tr>\n         <tr id=\"linky-target\">\n          <td>linky target</td>\n          <td>\n            <pre>&lt;div ng-bind-html=\"snippetWithSingleURL | linky:'_blank'\"&gt;<br>&lt;/div&gt;</pre>\n          </td>\n          <td>\n            <div ng-bind-html=\"snippetWithSingleURL | linky:'_blank'\"></div>\n          </td>\n         </tr>\n         <tr id=\"linky-custom-attributes\">\n          <td>linky custom attributes</td>\n          <td>\n            <pre>&lt;div ng-bind-html=\"snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}\"&gt;<br>&lt;/div&gt;</pre>\n          </td>\n          <td>\n            <div ng-bind-html=\"snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}\"></div>\n          </td>\n         </tr>\n         <tr id=\"escaped-html\">\n           <td>no filter</td>\n           <td><pre>&lt;div ng-bind=\"snippet\"&gt;<br>&lt;/div&gt;</pre></td>\n           <td><div ng-bind=\"snippet\"></div></td>\n         </tr>\n       </table>\n     </file>\n     <file name=\"script.js\">\n       angular.module('linkyExample', ['ngSanitize'])\n         .controller('ExampleController', ['$scope', function($scope) {\n           $scope.snippet =\n             'Pretty text with some links:\\n' +\n             'http://angularjs.org/,\\n' +\n             'mailto:us@somewhere.org,\\n' +\n             'another@somewhere.org,\\n' +\n             'and one more: ftp://127.0.0.1/.';\n           $scope.snippetWithSingleURL = 'http://angularjs.org/';\n         }]);\n     </file>\n     <file name=\"protractor.js\" type=\"protractor\">\n       it('should linkify the snippet with urls', function() {\n         expect(element(by.id('linky-filter')).element(by.binding('snippet | linky')).getText()).\n             toBe('Pretty text with some links: http://angularjs.org/, us@somewhere.org, ' +\n                  'another@somewhere.org, and one more: ftp://127.0.0.1/.');\n         expect(element.all(by.css('#linky-filter a')).count()).toEqual(4);\n       });\n\n       it('should not linkify snippet without the linky filter', function() {\n         expect(element(by.id('escaped-html')).element(by.binding('snippet')).getText()).\n             toBe('Pretty text with some links: http://angularjs.org/, mailto:us@somewhere.org, ' +\n                  'another@somewhere.org, and one more: ftp://127.0.0.1/.');\n         expect(element.all(by.css('#escaped-html a')).count()).toEqual(0);\n       });\n\n       it('should update', function() {\n         element(by.model('snippet')).clear();\n         element(by.model('snippet')).sendKeys('new http://link.');\n         expect(element(by.id('linky-filter')).element(by.binding('snippet | linky')).getText()).\n             toBe('new http://link.');\n         expect(element.all(by.css('#linky-filter a')).count()).toEqual(1);\n         expect(element(by.id('escaped-html')).element(by.binding('snippet')).getText())\n             .toBe('new http://link.');\n       });\n\n       it('should work with the target property', function() {\n        expect(element(by.id('linky-target')).\n            element(by.binding(\"snippetWithSingleURL | linky:'_blank'\")).getText()).\n            toBe('http://angularjs.org/');\n        expect(element(by.css('#linky-target a')).getAttribute('target')).toEqual('_blank');\n       });\n\n       it('should optionally add custom attributes', function() {\n        expect(element(by.id('linky-custom-attributes')).\n            element(by.binding(\"snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}\")).getText()).\n            toBe('http://angularjs.org/');\n        expect(element(by.css('#linky-custom-attributes a')).getAttribute('rel')).toEqual('nofollow');\n       });\n     </file>\n   </example>\n */\nangular.module('ngSanitize').filter('linky', ['$sanitize', function($sanitize) {\n  var LINKY_URL_REGEXP =\n        /((s?ftp|https?):\\/\\/|(www\\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\\S*[^\\s.;,(){}<>\"\\u201d\\u2019]/i,\n      MAILTO_REGEXP = /^mailto:/i;\n\n  var linkyMinErr = angular.$$minErr('linky');\n  var isDefined = angular.isDefined;\n  var isFunction = angular.isFunction;\n  var isObject = angular.isObject;\n  var isString = angular.isString;\n\n  return function(text, target, attributes) {\n    if (text == null || text === '') return text;\n    if (!isString(text)) throw linkyMinErr('notstring', 'Expected string but received: {0}', text);\n\n    var attributesFn =\n      isFunction(attributes) ? attributes :\n      isObject(attributes) ? function getAttributesObject() {return attributes;} :\n      function getEmptyAttributesObject() {return {};};\n\n    var match;\n    var raw = text;\n    var html = [];\n    var url;\n    var i;\n    while ((match = raw.match(LINKY_URL_REGEXP))) {\n      // We can not end in these as they are sometimes found at the end of the sentence\n      url = match[0];\n      // if we did not match ftp/http/www/mailto then assume mailto\n      if (!match[2] && !match[4]) {\n        url = (match[3] ? 'http://' : 'mailto:') + url;\n      }\n      i = match.index;\n      addText(raw.substr(0, i));\n      addLink(url, match[0].replace(MAILTO_REGEXP, ''));\n      raw = raw.substring(i + match[0].length);\n    }\n    addText(raw);\n    return $sanitize(html.join(''));\n\n    function addText(text) {\n      if (!text) {\n        return;\n      }\n      html.push(sanitizeText(text));\n    }\n\n    function addLink(url, text) {\n      var key, linkAttributes = attributesFn(url);\n      html.push('<a ');\n\n      for (key in linkAttributes) {\n        html.push(key + '=\"' + linkAttributes[key] + '\" ');\n      }\n\n      if (isDefined(target) && !('target' in linkAttributes)) {\n        html.push('target=\"',\n                  target,\n                  '\" ');\n      }\n      html.push('href=\"',\n                url.replace(/\"/g, '&quot;'),\n                '\">');\n      addText(text);\n      html.push('</a>');\n    }\n  };\n}]);\n\n\n})(window, window.angular);\n","require('./angular-sanitize');\nmodule.exports = 'ngSanitize';\n","'use strict'\n\n/* Autoupdate plugin for baron 0.6+ */\n\nfunction autoUpdateOne(MutationObserver) {\n    var self = this\n    var watcher\n\n    if (this._au) {\n        return\n    }\n\n    function actualizeWatcher() {\n        if (!self.root[self.origin.offset]) {\n            startWatch()\n        } else {\n            stopWatch()\n        }\n    }\n\n    // Set interval timeout for watching when root node will be visible\n    function startWatch() {\n        if (watcher) return\n\n        watcher = setInterval(function() {\n            if (self.root[self.origin.offset]) {\n                stopWatch()\n                self.update()\n            }\n        }, 300) // is it good enought for you?)\n    }\n\n    function stopWatch() {\n        clearInterval(watcher)\n        watcher = null\n    }\n\n    var debouncedUpdater = self._debounce(function() {\n        self.update()\n    }, 300)\n\n    this._observer = new MutationObserver(function() {\n        actualizeWatcher()\n        self.update()\n        debouncedUpdater()\n    })\n\n    this.on('init', function() {\n        self._observer.observe(self.root, {\n            childList: true,\n            subtree: true,\n            characterData: true\n            // attributes: true\n            // No reasons to set attributes to true\n            // The case when root/child node with already properly inited baron toggled to hidden and then back to visible,\n            // and the size of parent was changed during that hidden state, is very rare\n            // Other cases are covered by watcher, and you still can do .update by yourself\n        })\n\n        actualizeWatcher()\n    })\n\n    this.on('dispose', function() {\n        self._observer.disconnect()\n        stopWatch()\n        delete self._observer\n    })\n\n    this._au = true\n}\n\nmodule.exports = function autoUpdateCreator(win) {\n    var MutationObserver = win.MutationObserver || win.WebKitMutationObserver || win.MozMutationObserver || null\n\n    return function autoUpdate() {\n        if (!MutationObserver) return this\n\n        autoUpdateOne.call(this, MutationObserver)\n\n        return this\n    }\n}\n","'use strict'\n\n/* Controls plugin for baron */\n\nvar qs = require('./utils').qs\n\nmodule.exports = function controls(params) {\n    var forward, backward, track, screen,\n        self = this,\n        event\n\n    screen = params.screen || 0.9\n\n    if (params.forward) {\n        forward = qs(params.forward, this.clipper)\n\n        event = {\n            element: forward,\n\n            handler: function() {\n                var y = self.pos() + (params.delta || 30)\n\n                self.pos(y)\n            },\n\n            type: 'click'\n        }\n\n        this._eventHandlers.push(event) // For auto-dispose\n        this.event(event.element, event.type, event.handler, 'on')\n    }\n\n    if (params.backward) {\n        backward = qs(params.backward, this.clipper)\n\n        event = {\n            element: backward,\n\n            handler: function() {\n                var y = self.pos() - (params.delta || 30)\n\n                self.pos(y)\n            },\n\n            type: 'click'\n        }\n\n        this._eventHandlers.push(event) // For auto-dispose\n        this.event(event.element, event.type, event.handler, 'on')\n    }\n\n    if (params.track) {\n        if (params.track === true) {\n            track = this.track\n        } else {\n            track = qs(params.track, this.clipper)\n        }\n\n        if (track) {\n            event = {\n                element: track,\n\n                handler: function(e) {\n                    // https://github.com/Diokuz/baron/issues/121\n                    if (e.target != track) return\n\n                    var x = e['offset' + self.origin.x],\n                        xBar = self.bar[self.origin.offsetPos],\n                        sign = 0\n\n                    if (x < xBar) {\n                        sign = -1\n                    } else if (x > xBar + self.bar[self.origin.offset]) {\n                        sign = 1\n                    }\n\n                    var y = self.pos() + sign * screen * self.scroller[self.origin.client]\n\n                    self.pos(y)\n                },\n\n                type: 'mousedown'\n            }\n\n            this._eventHandlers.push(event) // For auto-dispose\n            this.event(event.element, event.type, event.handler, 'on')\n        }\n    }\n}\n","'use strict'\n\nvar g = (function() {\n    return this || (1, eval)('this')\n}())\nvar scopedWindow = g && g.window || g\n\nvar event = require('./utils').event\nvar css = require('./utils').css\nvar add = require('./utils').add\nvar has = require('./utils').has\nvar rm = require('./utils').rm\nvar clone = require('./utils').clone\nvar qs = require('./utils').qs\n\nvar _baron = baron // Stored baron value for noConflict usage\n// var Item = {}\nvar pos = ['left', 'top', 'right', 'bottom', 'width', 'height']\n// Global store for all baron instances (to be able to dispose them on html-nodes)\nvar instances = []\nvar origin = {\n    v: { // Vertical\n        x: 'Y', pos: pos[1], oppos: pos[3], crossPos: pos[0], crossOpPos: pos[2],\n        size: pos[5],\n        crossSize: pos[4], crossMinSize: 'min-' + pos[4], crossMaxSize: 'max-' + pos[4],\n        client: 'clientHeight', crossClient: 'clientWidth',\n        scrollEdge: 'scrollLeft',\n        offset: 'offsetHeight', crossOffset: 'offsetWidth', offsetPos: 'offsetTop',\n        scroll: 'scrollTop', scrollSize: 'scrollHeight'\n    },\n    h: { // Horizontal\n        x: 'X', pos: pos[0], oppos: pos[2], crossPos: pos[1], crossOpPos: pos[3],\n        size: pos[4],\n        crossSize: pos[5], crossMinSize: 'min-' + pos[5], crossMaxSize: 'max-' + pos[5],\n        client: 'clientWidth', crossClient: 'clientHeight',\n        scrollEdge: 'scrollTop',\n        offset: 'offsetWidth', crossOffset: 'offsetHeight', offsetPos: 'offsetLeft',\n        scroll: 'scrollLeft', scrollSize: 'scrollWidth'\n    }\n}\n\n// Some ugly vars\nvar opera12maxScrollbarSize = 17\n// I hate you https://github.com/Diokuz/baron/issues/110\nvar macmsxffScrollbarSize = 15\nvar macosxffRe = /[\\s\\S]*Macintosh[\\s\\S]*\\) Gecko[\\s\\S]*/\nvar isMacFF = macosxffRe.test(scopedWindow.navigator && scopedWindow.navigator.userAgent)\n\nvar log, liveBarons, shownErrors\n\nif (process.env.NODE_ENV !== 'production') {\n    log = require('./log')\n    liveBarons = 0\n    shownErrors = {\n        liveTooMany: false,\n        allTooMany: false\n    }\n}\n\n// window.baron and jQuery.fn.baron points to this function\nfunction baron(user) {\n    var withParams = !!user\n    var tryNode = (user && user[0]) || user\n    var isNode = typeof user == 'string' || tryNode instanceof HTMLElement\n    var params = isNode ? { root: user } : clone(user)\n    var jQueryMode\n    var rootNode\n    var defaultParams = {\n        direction: 'v',\n        barOnCls: '_scrollbar',\n        resizeDebounce: 0,\n        event: event,\n        cssGuru: false,\n        impact: 'scroller',\n        position: 'static'\n    }\n\n    params = params || {}\n\n    // Extending default params by user-defined params\n    for (var key in defaultParams) {\n        if (params[key] == null) { // eslint-disable-line\n            params[key] = defaultParams[key]\n        }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n        if (params.position == 'absolute' && params.impact == 'clipper') {\n            log('error', [\n                'Simultaneous use of `absolute` position and `clipper` impact values detected.',\n                'Those values cannot be used together.',\n                'See more https://github.com/Diokuz/baron/issues/138'\n            ].join(' '), params)\n        }\n    }\n\n    // `this` could be a jQuery instance\n    jQueryMode = this && this instanceof scopedWindow.jQuery\n\n    if (params._chain) {\n        rootNode = params.root\n    } else if (jQueryMode) {\n        params.root = rootNode = this[0]\n    } else {\n        rootNode = qs(params.root || params.scroller)\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n        if (!rootNode) {\n            log('error', [\n                'Baron initialization failed: root node not found.'\n            ].join(', '), params)\n\n            return // or return baron-shell?\n        }\n    }\n\n    var attr = manageAttr(rootNode, params.direction)\n    var id = +attr // Could be NaN\n\n    params.index = id\n\n    // baron() can return existing instances,\n    // @TODO update params on-the-fly\n    // https://github.com/Diokuz/baron/issues/124\n    if (id == id && attr !== null && instances[id]) {\n        if (process.env.NODE_ENV !== 'production') {\n            if (withParams) {\n                log('error', [\n                    'repeated initialization for html-node detected',\n                    'https://github.com/Diokuz/baron/blob/master/docs/logs/repeated.md'\n                ].join(', '), params.root)\n            }\n        }\n\n        return instances[id]\n    }\n\n    // root and scroller can be different nodes\n    if (params.root && params.scroller) {\n        params.scroller = qs(params.scroller, rootNode)\n        if (process.env.NODE_ENV !== 'production') {\n            if (!params.scroller) {\n                log('error', 'Scroller not found!', rootNode, params.scroller)\n            }\n        }\n    } else {\n        params.scroller = rootNode\n    }\n\n    params.root = rootNode\n\n    var instance = init(params)\n\n    if (instance.autoUpdate) {\n        instance.autoUpdate()\n    }\n\n    return instance\n}\n\nfunction arrayEach(_obj, iterator) {\n    var i = 0\n    var obj = _obj\n\n    if (obj.length === undefined || obj === scopedWindow) obj = [obj]\n\n    while (obj[i]) {\n        iterator.call(this, obj[i], i)\n        i++\n    }\n}\n\n// shortcut for getTime\nfunction getTime() {\n    return new Date().getTime()\n}\n\nif (process.env.NODE_ENV !== 'production') {\n    baron._instances = instances\n}\n\nfunction manageEvents(item, eventManager, mode) {\n    // Creating new functions for one baron item only one time\n    item._eventHandlers = item._eventHandlers || [\n        {\n            // onScroll:\n            element: item.scroller,\n\n            handler: function(e) {\n                item.scroll(e)\n            },\n\n            type: 'scroll'\n        }, {\n            // css transitions & animations\n            element: item.root,\n\n            handler: function() {\n                item.update()\n            },\n\n            type: 'transitionend animationend'\n        }, {\n            // onKeyup (textarea):\n            element: item.scroller,\n\n            handler: function() {\n                item.update()\n            },\n\n            type: 'keyup'\n        }, {\n            // onMouseDown:\n            element: item.bar,\n\n            handler: function(e) {\n                e.preventDefault() // Text selection disabling in Opera\n                item.selection() // Disable text selection in ie8\n                item.drag.now = 1 // Save private byte\n                if (item.draggingCls) {\n                    add(item.root, item.draggingCls)\n                }\n            },\n\n            type: 'touchstart mousedown'\n        }, {\n            // onMouseUp:\n            element: document,\n\n            handler: function() {\n                item.selection(1) // Enable text selection\n                item.drag.now = 0\n                if (item.draggingCls) {\n                    rm(item.root, item.draggingCls)\n                }\n            },\n\n            type: 'mouseup blur touchend'\n        }, {\n            // onCoordinateReset:\n            element: document,\n\n            handler: function(e) {\n                if (e.button != 2) { // Not RM\n                    item._pos0(e)\n                }\n            },\n\n            type: 'touchstart mousedown'\n        }, {\n            // onMouseMove:\n            element: document,\n\n            handler: function(e) {\n                if (item.drag.now) {\n                    item.drag(e)\n                }\n            },\n\n            type: 'mousemove touchmove'\n        }, {\n            // @TODO make one global listener\n            // onResize:\n            element: scopedWindow,\n\n            handler: function() {\n                item.update()\n            },\n\n            type: 'resize'\n        }, {\n            // @todo remove\n            // sizeChange:\n            element: item.root,\n\n            handler: function() {\n                item.update()\n            },\n\n            type: 'sizeChange'\n        }, {\n            // Clipper onScroll bug https://github.com/Diokuz/baron/issues/116\n            element: item.clipper,\n\n            handler: function() {\n                item.clipperOnScroll()\n            },\n\n            type: 'scroll'\n        }\n    ]\n\n    arrayEach(item._eventHandlers, function(evt) {\n        if (evt.element) {\n            // workaround for element-elements in `fix` plugin\n            // @todo dispose `fix` in proper way and remove workaround\n            if (evt.element.length && evt.element !== scopedWindow) {\n                for (var i = 0; i < evt.element.length; i++) {\n                    eventManager(evt.element[i], evt.type, evt.handler, mode)\n                }\n            } else {\n                eventManager(evt.element, evt.type, evt.handler, mode)\n            }\n        }\n    })\n\n    // if (item.scroller) {\n    //     event(item.scroller, 'scroll', item._eventHandlers.onScroll, mode)\n    // }\n    // if (item.bar) {\n    //     event(item.bar, 'touchstart mousedown', item._eventHandlers.onMouseDown, mode)\n    // }\n    // event(document, 'mouseup blur touchend', item._eventHandlers.onMouseUp, mode)\n    // event(document, 'touchstart mousedown', item._eventHandlers.onCoordinateReset, mode)\n    // event(document, 'mousemove touchmove', item._eventHandlers.onMouseMove, mode)\n    // event(window, 'resize', item._eventHandlers.onResize, mode)\n    // if (item.root) {\n    //     event(item.root, 'sizeChange', item._eventHandlers.onResize, mode)\n    //     // Custon event for alternate baron update mechanism\n    // }\n}\n\n// set, remove or read baron-specific id-attribute\n// @returns {String|null} - id node value, or null, if there is no attr\nfunction manageAttr(node, direction, mode, id) {\n    var attrName = 'data-baron-' + direction + '-id'\n\n    if (mode == 'on') {\n        node.setAttribute(attrName, id)\n    } else if (mode == 'off') {\n        node.removeAttribute(attrName)\n    }\n\n    return node.getAttribute(attrName)\n}\n\nfunction init(params) {\n    var out = new baron.prototype.constructor(params)\n\n    manageEvents(out, params.event, 'on')\n\n    manageAttr(out.root, params.direction, 'on', instances.length)\n    instances.push(out)\n\n    if (process.env.NODE_ENV !== 'production') {\n        liveBarons++\n        if (liveBarons > 100 && !shownErrors.liveTooMany) {\n            log('warn', [\n                'You have too many live baron instances on page (' + liveBarons + ')!',\n                'Are you forget to dispose some of them?',\n                'All baron instances can be found in baron._instances:'\n            ].join(' '), instances)\n            shownErrors.liveTooMany = true\n        }\n        if (instances.length > 1000 && !shownErrors.allTooMany) {\n            log('warn', [\n                'You have too many inited baron instances on page (' + instances.length + ')!',\n                'Some of them are disposed, and thats good news.',\n                'but baron.init was call too many times, and thats is bad news.',\n                'All baron instances can be found in baron._instances:'\n            ].join(' '), instances)\n            shownErrors.allTooMany = true\n        }\n    }\n\n    out.update()\n\n    return out\n}\n\nfunction fire(eventName) {\n    if (this.events && this.events[eventName]) {\n        for (var i = 0; i < this.events[eventName].length; i++) {\n            var args = Array.prototype.slice.call( arguments, 1 )\n\n            this.events[eventName][i].apply(this, args)\n        }\n    }\n}\n\nbaron.prototype = {\n    // underscore.js realization\n    // used in autoUpdate plugin\n    _debounce: function(func, wait) {\n        var self = this,\n            timeout,\n            // args, // right now there is no need for arguments\n            // context, // and for context\n            timestamp\n            // result // and for result\n\n        var later = function() {\n            if (self._disposed) {\n                clearTimeout(timeout)\n                timeout = self = null\n                return\n            }\n\n            var last = getTime() - timestamp\n\n            if (last < wait && last >= 0) {\n                timeout = setTimeout(later, wait - last)\n            } else {\n                timeout = null\n                // result = func.apply(context, args)\n                func()\n                // context = args = null\n            }\n        }\n\n        return function() {\n            // context = this\n            // args = arguments\n            timestamp = getTime()\n\n            if (!timeout) {\n                timeout = setTimeout(later, wait)\n            }\n\n            // return result\n        }\n    },\n\n    constructor: function(params) {\n        var barPos,\n            scrollerPos0,\n            track,\n            resizePauseTimer,\n            scrollingTimer,\n            resizeLastFire,\n            oldBarSize\n\n        resizeLastFire = getTime()\n\n        this.params = params\n        this.event = params.event\n        this.events = {}\n\n        // DOM elements\n        this.root = params.root // Always html node, not just selector\n        this.scroller = qs(params.scroller)\n        if (process.env.NODE_ENV !== 'production') {\n            if (this.scroller.tagName == 'body') {\n                log('error', [\n                    'Please, do not use BODY as a scroller.',\n                    'https://github.com/Diokuz/baron/blob/master/docs/logs/do-not-use-body.md'\n                ].join(', '), params)\n            }\n        }\n        this.bar = qs(params.bar, this.root)\n        track = this.track = qs(params.track, this.root)\n        if (!this.track && this.bar) {\n            track = this.bar.parentNode\n        }\n        this.clipper = this.scroller.parentNode\n\n        // Parameters\n        this.direction = params.direction\n        this.rtl = params.rtl\n        this.origin = origin[this.direction]\n        this.barOnCls = params.barOnCls\n        this.scrollingCls = params.scrollingCls\n        this.draggingCls = params.draggingCls\n        this.impact = params.impact\n        this.position = params.position\n        this.rtl = params.rtl\n        this.barTopLimit = 0\n        this.resizeDebounce = params.resizeDebounce\n\n        // Updating height or width of bar\n        function setBarSize(_size) {\n            var barMinSize = this.barMinSize || 20\n            var size = _size\n\n            if (size > 0 && size < barMinSize) {\n                size = barMinSize\n            }\n\n            if (this.bar) {\n                css(this.bar, this.origin.size, parseInt(size, 10) + 'px')\n            }\n        }\n\n        // Updating top or left bar position\n        function posBar(_pos) {\n            if (this.bar) {\n                var was = css(this.bar, this.origin.pos),\n                    will = +_pos + 'px'\n\n                if (will && will != was) {\n                    css(this.bar, this.origin.pos, will)\n                }\n            }\n        }\n\n        // Free path for bar\n        function k() {\n            return track[this.origin.client] - this.barTopLimit - this.bar[this.origin.offset]\n        }\n\n        // Relative content top position to bar top position\n        function relToPos(r) {\n            return r * k.call(this) + this.barTopLimit\n        }\n\n        // Bar position to relative content position\n        function posToRel(t) {\n            return (t - this.barTopLimit) / k.call(this)\n        }\n\n        // Cursor position in main direction in px // Now with iOs support\n        this.cursor = function(e) {\n            return e['client' + this.origin.x] ||\n                (((e.originalEvent || e).touches || {})[0] || {})['page' + this.origin.x]\n        }\n\n        // Text selection pos preventing\n        function dontPosSelect() {\n            return false\n        }\n\n        this.pos = function(x) { // Absolute scroller position in px\n            var ie = 'page' + this.origin.x + 'Offset',\n                key = (this.scroller[ie]) ? ie : this.origin.scroll\n\n            if (x !== undefined) this.scroller[key] = x\n\n            return this.scroller[key]\n        }\n\n        this.rpos = function(r) { // Relative scroller position (0..1)\n            var free = this.scroller[this.origin.scrollSize] - this.scroller[this.origin.client],\n                x\n\n            if (r) {\n                x = this.pos(r * free)\n            } else {\n                x = this.pos()\n            }\n\n            return x / (free || 1)\n        }\n\n        // Switch on the bar by adding user-defined CSS classname to scroller\n        this.barOn = function(dispose) {\n            if (this.barOnCls) {\n                var noScroll = this.scroller[this.origin.client] >= this.scroller[this.origin.scrollSize]\n\n                if (dispose || noScroll) {\n                    if (has(this.root, this.barOnCls)) {\n                        rm(this.root, this.barOnCls)\n                    }\n                } else if (!has(this.root, this.barOnCls)) {\n                    add(this.root, this.barOnCls)\n                }\n            }\n        }\n\n        this._pos0 = function(e) {\n            scrollerPos0 = this.cursor(e) - barPos\n        }\n\n        this.drag = function(e) {\n            var rel = posToRel.call(this, this.cursor(e) - scrollerPos0)\n            var sub = (this.scroller[this.origin.scrollSize] - this.scroller[this.origin.client])\n\n            this.scroller[this.origin.scroll] = rel * sub\n        }\n\n        // Text selection preventing on drag\n        this.selection = function(enable) {\n            this.event(document, 'selectpos selectstart', dontPosSelect, enable ? 'off' : 'on')\n        }\n\n        // onResize & DOM modified handler\n        // also fires on init\n        // Note: max/min-size didnt sets if size did not really changed (for example, on init in Chrome)\n        this.resize = function() {\n            var self = this\n            var minPeriod = (self.resizeDebounce === undefined) ? 300 : self.resizeDebounce\n            var delay = 0\n\n            if (getTime() - resizeLastFire < minPeriod) {\n                clearTimeout(resizePauseTimer)\n                delay = minPeriod\n            }\n\n            function upd() {\n                var offset = self.scroller[self.origin.crossOffset]\n                var client = self.scroller[self.origin.crossClient]\n                var padding = 0\n                var was, will\n\n                // https://github.com/Diokuz/baron/issues/110\n                if (isMacFF) {\n                    padding = macmsxffScrollbarSize\n\n                // Opera 12 bug https://github.com/Diokuz/baron/issues/105\n                } else if (client > 0 && offset === 0) {\n                    // Only Opera 12 in some rare nested flexbox cases goes here\n                    // Sorry guys for magic,\n                    // but I dont want to create temporary html-nodes set\n                    // just for measuring scrollbar size in Opera 12.\n                    // 17px for Windows XP-8.1, 15px for Mac (really rare).\n                    offset = client + opera12maxScrollbarSize\n                }\n\n                if (offset) { // if there is no size, css should not be set\n                    self.barOn()\n\n                    if (self.impact == 'scroller') { // scroller\n                        var delta = offset - client + padding\n\n                        // `static` position works only for `scroller` impact\n                        if (self.position == 'static') { // static\n                            was = css(self.scroller, self.origin.crossSize)\n                            will = self.clipper[self.origin.crossClient] + delta + 'px'\n\n                            if (was != will) {\n                                self._setCrossSizes(self.scroller, will)\n                            }\n                        } else { // absolute\n                            var styles = {}\n                            var key = self.rtl ? 'Left' : 'Right'\n\n                            if (self.direction == 'h') {\n                                key = 'Bottom'\n                            }\n\n                            styles['padding' + key] = delta + 'px'\n                            css(self.scroller, styles)\n                        }\n                    } else { // clipper\n                        was = css(self.clipper, self.origin.crossSize)\n                        will = client + 'px'\n\n                        if (was != will) {\n                            self._setCrossSizes(self.clipper, will)\n                        }\n                    }\n                } else {\n                    // do nothing (display: none, or something)\n                }\n\n                Array.prototype.unshift.call(arguments, 'resize')\n                fire.apply(self, arguments)\n\n                resizeLastFire = getTime()\n            }\n\n            if (delay) {\n                resizePauseTimer = setTimeout(upd, delay)\n            } else {\n                upd()\n            }\n        }\n\n        this.updatePositions = function(force) {\n            var newBarSize,\n                self = this\n\n            if (self.bar) {\n                newBarSize = (track[self.origin.client] - self.barTopLimit) *\n                    self.scroller[self.origin.client] / self.scroller[self.origin.scrollSize]\n\n                // Positioning bar\n                if (force || parseInt(oldBarSize, 10) != parseInt(newBarSize, 10)) {\n                    setBarSize.call(self, newBarSize)\n                    oldBarSize = newBarSize\n                }\n\n                barPos = relToPos.call(self, self.rpos())\n\n                posBar.call(self, barPos)\n            }\n\n            Array.prototype.unshift.call( arguments, 'scroll' )\n            fire.apply(self, arguments)\n        }\n\n        // onScroll handler\n        this.scroll = function() {\n            var self = this\n\n            self.updatePositions()\n\n            if (self.scrollingCls) {\n                if (!scrollingTimer) {\n                    add(self.root, self.scrollingCls)\n                }\n                clearTimeout(scrollingTimer)\n                scrollingTimer = setTimeout(function() {\n                    rm(self.root, self.scrollingCls)\n                    scrollingTimer = undefined\n                }, 300)\n            }\n        }\n\n        // https://github.com/Diokuz/baron/issues/116\n        this.clipperOnScroll = function() {\n            // WTF is this line? https://github.com/Diokuz/baron/issues/134\n            // if (this.direction == 'h') return\n\n            // assign `initial scroll position` to `clipper.scrollLeft` (0 for ltr, ~20 for rtl)\n            if (!this.rtl) {\n                this.clipper[this.origin.scrollEdge] = 0\n            } else {\n                this.clipper[this.origin.scrollEdge] = this.clipper[this.origin.scrollSize]\n            }\n        }\n\n        // Flexbox `align-items: stretch` (default) requires to set min-width for vertical\n        // and max-height for horizontal scroll. Just set them all.\n        // http://www.w3.org/TR/css-flexbox-1/#valdef-align-items-stretch\n        this._setCrossSizes = function(node, size) {\n            var styles = {}\n\n            styles[this.origin.crossSize] = size\n            styles[this.origin.crossMinSize] = size\n            styles[this.origin.crossMaxSize] = size\n\n            css(node, styles)\n        }\n\n        // Set common css rules\n        this._dumbCss = function(on) {\n            if (params.cssGuru) return\n\n            var overflow = on ? 'hidden' : null\n            var msOverflowStyle = on ? 'none' : null\n\n            css(this.clipper, {\n                overflow: overflow,\n                msOverflowStyle: msOverflowStyle,\n                position: this.position == 'static' ? '' : 'relative'\n            })\n\n            var scroll = on ? 'scroll' : null\n            var axis = this.direction == 'v' ? 'y' : 'x'\n            var scrollerCss = {}\n\n            scrollerCss['overflow-' + axis] = scroll\n            scrollerCss['box-sizing'] = 'border-box'\n            scrollerCss.margin = '0'\n            scrollerCss.border = '0'\n\n            if (this.position == 'absolute') {\n                scrollerCss.position = 'absolute'\n                scrollerCss.top = '0'\n\n                if (this.direction == 'h') {\n                    scrollerCss.left = scrollerCss.right = '0'\n                } else {\n                    scrollerCss.bottom = '0'\n                    scrollerCss.right = this.rtl ? '0' : ''\n                    scrollerCss.left = this.rtl ? '' : '0'\n                }\n            }\n\n            css(this.scroller, scrollerCss)\n        }\n\n        // onInit actions\n        this._dumbCss(true)\n\n        if (isMacFF) {\n            var padding = 'paddingRight'\n            var styles = {}\n            // getComputedStyle is ie9+, but we here only in f ff\n            var paddingWas = scopedWindow.getComputedStyle(this.scroller)[[padding]]\n\n            if (params.direction == 'h') {\n                padding = 'paddingBottom'\n            } else if (params.rtl) {\n                padding = 'paddingLeft'\n            }\n\n            var numWas = parseInt(paddingWas, 10)\n\n            if (numWas != numWas) numWas = 0\n            styles[padding] = (macmsxffScrollbarSize + numWas) + 'px'\n            css(this.scroller, styles)\n        }\n\n        return this\n    },\n\n    // fires on any update and on init\n    update: function(params) {\n        if (process.env.NODE_ENV !== 'production') {\n            if (this._disposed) {\n                log('error', [\n                    'Update on disposed baron instance detected.',\n                    'You should clear your stored baron value for this instance:',\n                    this\n                ].join(' '), params)\n            }\n        }\n\n        fire.call(this, 'upd', params) // Update all plugins' params\n\n        this.resize(1)\n        this.updatePositions(1)\n\n        return this\n    },\n\n    // One instance\n    dispose: function() {\n        if (process.env.NODE_ENV !== 'production') {\n            if (this._disposed) {\n                log('error', 'Already disposed:', this)\n            }\n\n            liveBarons--\n        }\n\n        manageEvents(this, this.event, 'off')\n        manageAttr(this.root, this.params.direction, 'off')\n        if (this.params.direction == 'v') {\n            this._setCrossSizes(this.scroller, '')\n        } else {\n            this._setCrossSizes(this.clipper, '')\n        }\n        this._dumbCss(false)\n        this.barOn(true)\n        fire.call(this, 'dispose')\n        instances[this.params.index] = null\n        this.params = null\n        this._disposed = true\n    },\n\n    on: function(eventName, func, arg) {\n        var names = eventName.split(' ')\n\n        for (var i = 0; i < names.length; i++) {\n            if (names[i] == 'init') {\n                func.call(this, arg)\n            } else {\n                this.events[names[i]] = this.events[names[i]] || []\n\n                this.events[names[i]].push(function(userArg) {\n                    func.call(this, userArg || arg)\n                })\n            }\n        }\n    },\n\n    baron: function(params) {\n        params.root = this.params.root\n        params.scroller = this.params.scroller\n        params.direction = (this.params.direction == 'v') ? 'h' : 'v'\n        params._chain = true\n\n        return baron(params)\n    }\n}\n\n// baron.fn.constructor.prototype = baron.fn\nbaron.prototype.constructor.prototype = baron.prototype\n\n// Use when you need \"baron\" global var for another purposes\nbaron.noConflict = function() {\n    scopedWindow.baron = _baron // Restoring original value of \"baron\" global var\n\n    return baron\n}\n\nbaron.version = '3.0.1'\n\nbaron.prototype.autoUpdate = require('./autoUpdate')(scopedWindow)\nbaron.prototype.fix = require('./fix')\nbaron.prototype.controls = require('./controls')\n\nmodule.exports = baron\n","'use strict'\n\n/* Fixable elements plugin for baron */\n\nvar log = require('./log')\nvar css = require('./utils').css\nvar add = require('./utils').add\nvar rm = require('./utils').rm\n\nmodule.exports = function fix(userParams) {\n    var elements,\n        viewPortSize,\n        params = { // Default params\n            outside: '',\n            inside: '',\n            before: '',\n            after: '',\n            past: '',\n            future: '',\n            radius: 0,\n            minView: 0\n        },\n        topFixHeights = [], // inline style for element\n        topRealHeights = [], // ? something related to negative margins for fixable elements\n        headerTops = [], // offset positions when not fixed\n        scroller = this.scroller,\n        eventManager = this.event,\n        self = this\n\n    if (process.env.NODE_ENV !== 'production') {\n        if (this.position != 'static') {\n            log('error', [\n                'Fix plugin cannot work properly in non-static baron position.',\n                'See more https://github.com/Diokuz/baron/issues/135'\n            ].join(' '), this.params)\n        }\n    }\n\n    // i - number of fixing element, pos - fix-position in px, flag - 1: top, 2: bottom\n    // Invocation only in case when fix-state changed\n    function fixElement(i, _pos, flag) {\n        var pos = _pos\n        var ori = flag == 1 ? 'pos' : 'oppos'\n\n        if (viewPortSize < (params.minView || 0)) { // No headers fixing when no enought space for viewport\n            pos = undefined\n        }\n\n        // Removing all fixing stuff - we can do this because fixElement triggers only when fixState really changed\n        css(elements[i], this.origin.pos, '')\n        css(elements[i], this.origin.oppos, '')\n        rm(elements[i], params.outside)\n\n        // Fixing if needed\n        if (pos !== undefined) {\n            pos += 'px'\n            css(elements[i], this.origin[ori], pos)\n            add(elements[i], params.outside)\n        }\n    }\n\n    function bubbleWheel(e) {\n        try {\n            var i = document.createEvent('WheelEvent') // i - for extra byte\n\n            // evt.initWebKitWheelEvent(deltaX, deltaY, window, screenX, screenY, clientX, clientY, ctrlKey, altKey, shiftKey, metaKey)\n            i.initWebKitWheelEvent(e.originalEvent.wheelDeltaX, e.originalEvent.wheelDeltaY)\n            scroller.dispatchEvent(i)\n            e.preventDefault()\n        } catch (ex) {\n            //\n        }\n    }\n\n    function init(_params) {\n        var pos\n\n        for (var key in _params) {\n            params[key] = _params[key]\n        }\n\n        if (params.elements instanceof HTMLElement) {\n            elements = [params.elements]\n        } else if (typeof params.elements == 'string') {\n            elements = this.scroller.querySelectorAll(params.elements)\n        } else if (params.elements && params.elements[0] instanceof HTMLElement) {\n            elements = params.elements\n        }\n\n        if (elements) {\n            viewPortSize = this.scroller[this.origin.client]\n            for (var i = 0; i < elements.length; i++) {\n                // Variable header heights\n                pos = {}\n                pos[this.origin.size] = elements[i][this.origin.offset] + 'px'\n                if (elements[i].parentNode !== this.scroller) {\n                    css(elements[i].parentNode, pos)\n                }\n                pos = {}\n                pos[this.origin.crossSize] = elements[i].parentNode[this.origin.crossClient] + 'px'\n                css(elements[i], pos)\n\n                // Between fixed headers\n                viewPortSize -= elements[i][this.origin.offset]\n\n                headerTops[i] = elements[i].parentNode[this.origin.offsetPos] // No paddings for parentNode\n\n                // Summary elements height above current\n                topFixHeights[i] = (topFixHeights[i - 1] || 0) // Not zero because of negative margins\n                topRealHeights[i] = (topRealHeights[i - 1] || Math.min(headerTops[i], 0))\n\n                if (elements[i - 1]) {\n                    topFixHeights[i] += elements[i - 1][this.origin.offset]\n                    topRealHeights[i] += elements[i - 1][this.origin.offset]\n                }\n\n                if ( !(i == 0 && headerTops[i] == 0)/* && force */) {\n                    this.event(elements[i], 'mousewheel', bubbleWheel, 'off')\n                    this.event(elements[i], 'mousewheel', bubbleWheel)\n                }\n            }\n\n            if (params.limiter && elements[0]) { // Bottom edge of first header as top limit for track\n                if (this.track && this.track != this.scroller) {\n                    pos = {}\n                    pos[this.origin.pos] = elements[0].parentNode[this.origin.offset] + 'px'\n                    css(this.track, pos)\n                } else {\n                    this.barTopLimit = elements[0].parentNode[this.origin.offset]\n                }\n                // this.barTopLimit = elements[0].parentNode[this.origin.offset]\n                this.scroll()\n            }\n\n            if (params.limiter === false) { // undefined (in second fix instance) should have no influence on bar limit\n                this.barTopLimit = 0\n            }\n        }\n\n        var event = {\n            element: elements,\n\n            handler: function() {\n                var parent = this.parentNode,\n                    top = parent.offsetTop,\n                    num\n\n                // finding num -> elements[num] === this\n                for (var j = 0; j < elements.length; j++ ) {\n                    if (elements[j] === this) num = j\n                }\n\n                var locPos = top - topFixHeights[num]\n\n                if (params.scroll) { // User defined callback\n                    params.scroll({\n                        x1: self.scroller.scrollTop,\n                        x2: locPos\n                    })\n                } else {\n                    self.scroller.scrollTop = locPos\n                }\n            },\n\n            type: 'click'\n        }\n\n        if (params.clickable) {\n            this._eventHandlers.push(event) // For auto-dispose\n            // eventManager(event.element, event.type, event.handler, 'off')\n            for (var j = 0; j < event.element.length; j++) {\n                eventManager(event.element[j], event.type, event.handler, 'on')\n            }\n        }\n    }\n\n    this.on('init', init, userParams)\n\n    var fixFlag = [], // 1 - past, 2 - future, 3 - current (not fixed)\n        gradFlag = []\n\n    this.on('init scroll', function() {\n        var fixState, hTop, gradState\n        var i\n\n        if (elements) {\n            var change\n\n            // fixFlag update\n            for (i = 0; i < elements.length; i++) {\n                fixState = 0\n                if (headerTops[i] - this.pos() < topRealHeights[i] + params.radius) {\n                    // Header trying to go up\n                    fixState = 1\n                    hTop = topFixHeights[i]\n                } else if (headerTops[i] - this.pos() > topRealHeights[i] + viewPortSize - params.radius) {\n                    // Header trying to go down\n                    fixState = 2\n                    // console.log('topFixHeights[i] + viewPortSize + topRealHeights[i]', topFixHeights[i], this.scroller[this.origin.client], topRealHeights[i])\n                    hTop = this.scroller[this.origin.client] - elements[i][this.origin.offset] - topFixHeights[i] - viewPortSize\n                    // console.log('hTop', hTop, viewPortSize, elements[this.origin.offset], topFixHeights[i])\n                    // (topFixHeights[i] + viewPortSize + elements[this.origin.offset]) - this.scroller[this.origin.client]\n                } else {\n                    // Header in viewport\n                    fixState = 3\n                    hTop = undefined\n                }\n\n                gradState = false\n                if (headerTops[i] - this.pos() < topRealHeights[i] || headerTops[i] - this.pos() > topRealHeights[i] + viewPortSize) {\n                    gradState = true\n                }\n\n                if (fixState != fixFlag[i] || gradState != gradFlag[i]) {\n                    fixElement.call(this, i, hTop, fixState)\n                    fixFlag[i] = fixState\n                    gradFlag[i] = gradState\n                    change = true\n                }\n            }\n\n            // Adding positioning classes (on last top and first bottom header)\n            if (change) { // At leats one change in elements flag structure occured\n                for (i = 0; i < elements.length; i++) {\n                    if (fixFlag[i] == 1 && params.past) {\n                        add(elements[i], params.past)\n                        rm(elements[i], params.future)\n                    }\n\n                    if (fixFlag[i] == 2 && params.future) {\n                        add(elements[i], params.future)\n                        rm(elements[i], params.past)\n                    }\n\n                    if (fixFlag[i] == 3) {\n                        rm(elements[i], params.past)\n                        rm(elements[i], params.future)\n                        add(elements[i], params.inside)\n                    }\n\n                    if (fixFlag[i] != fixFlag[i + 1] && fixFlag[i] == 1) {\n                        add(elements[i], params.before)\n                        rm(elements[i], params.after) // Last top fixed header\n                    } else if (fixFlag[i] != fixFlag[i - 1] && fixFlag[i] == 2) {\n                        add(elements[i], params.after)\n                        rm(elements[i], params.before) // First bottom fixed header\n                    } else {\n                        rm(elements[i], params.before)\n                        rm(elements[i], params.after)\n                    }\n\n                    if (params.grad) {\n                        if (gradFlag[i]) {\n                            add(elements[i], params.grad)\n                        } else {\n                            rm(elements[i], params.grad)\n                        }\n                    }\n                }\n            }\n        }\n    })\n\n    this.on('resize upd', function(updParams) {\n        init.call(this, updParams && updParams.fix)\n    })\n\n    return this\n}\n","module.exports = function log(level, msg, more) {\n    var func = console[level] || console.log\n    var args = [\n        'Baron: ' + msg,\n        more\n    ]\n\n    Function.prototype.apply.call(func, console, args)\n}\n","'use strict'\n\n// Test via a getter in the options object to see if the passive property is accessed\n// https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\nvar supportsPassive = false\n\ntry {\n    var opts = Object.defineProperty({}, 'passive', {\n        get: function() {\n            supportsPassive = true\n        }\n    })\n\n    window.addEventListener('test', null, opts)\n} catch (e) {\n    // pass\n}\n\nmodule.exports.event = function event(elem, _eventNames, handler, mode) {\n    var eventNames = _eventNames.split(' ')\n    var prefix = mode == 'on' ? 'add' : 'remove'\n\n    eventNames.forEach(function(eventName) {\n        var options = false\n\n        if (['scroll', 'touchstart', 'touchmove'].indexOf(eventName) != -1 && supportsPassive) {\n            options = { passive: true }\n        }\n\n        elem[prefix + 'EventListener'](eventName, handler, options)\n    })\n}\n\nfunction each(obj, handler) {\n    for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            handler(key, obj[key])\n        }\n    }\n}\n\nmodule.exports.css = function css(node, key, value) {\n    var styles\n\n    if (value === undefined) {\n        // Getter mode\n        if (typeof key == 'string') {\n            return node.style[key]\n        }\n\n        styles = key\n    } else {\n        styles = {}\n        styles[key] = value\n    }\n\n    each(styles, function(k, val) {\n        node.style[k] = val\n    })\n}\n\nmodule.exports.add = function add(node, cls) {\n    if (!cls) {\n        return\n    }\n\n    node.classList.add(cls)\n}\n\nmodule.exports.rm = function add(node, cls) {\n    if (!cls) {\n        return\n    }\n\n    node.classList.remove(cls)\n}\n\nmodule.exports.has = function has(node, cls) {\n    if (!cls) {\n        return false\n    }\n\n    return node.classList.contains(cls)\n}\n\nmodule.exports.clone = function clone(_input) {\n    var output = {}\n    var input = _input || {}\n\n    each(input, function(key, value) {\n        output[key] = value\n    })\n\n    return output\n}\n\nmodule.exports.qs = function qs(selector, _ctx) {\n    if (selector instanceof HTMLElement) {\n        return selector\n    }\n\n    var ctx = _ctx || document\n\n    return ctx.querySelector(selector)\n}\n\nmodule.exports.each = each\n","// @ts-ignore\nimport baron from 'baron';\nimport { Subscription } from 'rxjs';\n\nimport { PanelEvents } from '@grafana/data';\nimport { RefreshEvent } from '@grafana/runtime';\nimport { coreModule } from 'app/angular/core_module';\nimport { PanelDirectiveReadyEvent, RenderEvent } from 'app/types/events';\n\nimport { PanelModel } from '../../features/dashboard/state/PanelModel';\n\nimport { PanelCtrl } from './panel_ctrl';\n\nconst panelTemplate = `\n  <ng-transclude class=\"panel-height-helper\"></ng-transclude>\n`;\n\ncoreModule.directive('grafanaPanel', [\n  '$timeout',\n  ($timeout) => {\n    return {\n      restrict: 'E',\n      template: panelTemplate,\n      transclude: true,\n      scope: { ctrl: '=' },\n      link: (scope: any, elem) => {\n        const ctrl: PanelCtrl = scope.ctrl;\n        const panel: PanelModel = scope.ctrl.panel;\n        const subs = new Subscription();\n\n        let panelScrollbar: any;\n\n        function resizeScrollableContent() {\n          if (panelScrollbar) {\n            panelScrollbar.update();\n          }\n        }\n\n        ctrl.events.on(PanelEvents.componentDidMount, () => {\n          if ((ctrl as any).__proto__.constructor.scrollable) {\n            const scrollRootClass = 'baron baron__root baron__clipper panel-content--scrollable';\n            const scrollerClass = 'baron__scroller';\n            const scrollBarHTML = `\n            <div class=\"baron__track\">\n              <div class=\"baron__bar\"></div>\n            </div>\n          `;\n\n            const scrollRoot = elem;\n            const scroller = elem.find(':first').find(':first');\n\n            scrollRoot.addClass(scrollRootClass);\n            $(scrollBarHTML).appendTo(scrollRoot);\n            scroller.addClass(scrollerClass);\n\n            panelScrollbar = baron({\n              root: scrollRoot[0],\n              scroller: scroller[0],\n              bar: '.baron__bar',\n              barOnCls: '_scrollbar',\n              scrollingCls: '_scrolling',\n            });\n\n            panelScrollbar.scroll();\n          }\n        });\n\n        function updateDimensionsFromParentScope() {\n          ctrl.height = scope.$parent.$parent.size.height;\n          ctrl.width = scope.$parent.$parent.size.width;\n        }\n\n        updateDimensionsFromParentScope();\n\n        // Pass PanelModel events down to angular controller event emitter\n        subs.add(\n          panel.events.subscribe(RefreshEvent, () => {\n            updateDimensionsFromParentScope();\n            ctrl.events.emit('refresh');\n          })\n        );\n\n        subs.add(\n          panel.events.subscribe(RenderEvent, (event) => {\n            // this event originated from angular so no need to bubble it back\n            if (event.payload?.fromAngular) {\n              return;\n            }\n\n            updateDimensionsFromParentScope();\n\n            $timeout(() => {\n              resizeScrollableContent();\n              ctrl.events.emit('render');\n            });\n          })\n        );\n\n        subs.add(\n          ctrl.events.subscribe(RenderEvent, (event) => {\n            // this event originated from angular so bubble it to react so the PanelChromeAngular can update the panel header alert state\n            if (event.payload) {\n              event.payload.fromAngular = true;\n              panel.events.publish(event);\n            }\n          })\n        );\n\n        scope.$on('$destroy', () => {\n          elem.off();\n\n          // Remove PanelModel.event subs\n          subs.unsubscribe();\n          // Remove Angular controller event subs\n          ctrl.events.emit(PanelEvents.panelTeardown);\n          ctrl.events.removeAllListeners();\n\n          if (panelScrollbar) {\n            panelScrollbar.dispose();\n          }\n        });\n\n        panel.events.publish(PanelDirectiveReadyEvent);\n      },\n    };\n  },\n]);\n","import angular from 'angular';\n\nconst directiveModule = angular.module('grafana.directives');\nconst directiveCache: any = {};\n\ndirectiveModule.directive('panelEditorTab', ['dynamicDirectiveSrv', panelEditorTab]);\n\nfunction panelEditorTab(dynamicDirectiveSrv: any) {\n  return dynamicDirectiveSrv.create({\n    scope: {\n      ctrl: '=',\n      editorTab: '=',\n    },\n    directive: (scope: any) => {\n      const pluginId = scope.ctrl.pluginId;\n      const tabName = scope.editorTab.title\n        .toLowerCase()\n        .replace(' ', '-')\n        .replace('&', '')\n        .replace(' ', '')\n        .replace(' ', '-');\n\n      if (directiveCache[pluginId]) {\n        if (directiveCache[pluginId][tabName]) {\n          return directiveCache[pluginId][tabName];\n        }\n      } else {\n        directiveCache[pluginId] = [];\n      }\n\n      const result = {\n        fn: () => scope.editorTab.directiveFn(),\n        name: `panel-editor-tab-${pluginId}${tabName}`,\n      };\n\n      directiveCache[pluginId][tabName] = result;\n\n      return result;\n    },\n  });\n}\n","import { coreModule } from 'app/angular/core_module';\n\nexport class QueryRowCtrl {\n  target: any;\n  queryCtrl: any;\n  panelCtrl: any;\n  panel: any;\n  hasTextEditMode = false;\n\n  $onInit() {\n    this.panelCtrl = this.queryCtrl.panelCtrl;\n    this.target = this.queryCtrl.target;\n    this.panel = this.panelCtrl.panel;\n\n    if (this.hasTextEditMode && this.queryCtrl.toggleEditorMode) {\n      // expose this function to react parent component\n      this.panelCtrl.toggleEditorMode = this.queryCtrl.toggleEditorMode.bind(this.queryCtrl);\n    }\n\n    if (this.queryCtrl.getCollapsedText) {\n      // expose this function to react parent component\n      this.panelCtrl.getCollapsedText = this.queryCtrl.getCollapsedText.bind(this.queryCtrl);\n    }\n  }\n}\n\ncoreModule.directive('queryEditorRow', queryEditorRowDirective);\n\nfunction queryEditorRowDirective() {\n  return {\n    restrict: 'E',\n    controller: QueryRowCtrl,\n    bindToController: true,\n    controllerAs: 'ctrl',\n    templateUrl: 'public/app/angular/panel/partials/query_editor_row.html',\n    transclude: true,\n    scope: {\n      queryCtrl: '=',\n      canCollapse: '=',\n      hasTextEditMode: '=',\n    },\n  };\n}\n","import angular from 'angular';\nimport { isArray, isNull, isObject, isUndefined } from 'lodash';\n\nimport { dateTime } from '@grafana/data';\nimport { getTemplateSrv, TemplateSrv } from 'app/features/templating/template_srv';\n\nimport coreModule from '../core_module';\n\ncoreModule.filter('stringSort', () => {\n  return (input: any) => {\n    return input.sort();\n  };\n});\n\ncoreModule.filter('slice', () => {\n  return (arr: any[], start: any, end: any) => {\n    if (!isUndefined(arr)) {\n      return arr.slice(start, end);\n    }\n    return arr;\n  };\n});\n\ncoreModule.filter('stringify', () => {\n  return (arr: any[]) => {\n    if (isObject(arr) && !isArray(arr)) {\n      return angular.toJson(arr);\n    } else {\n      return isNull(arr) ? null : arr.toString();\n    }\n  };\n});\n\ncoreModule.filter('moment', () => {\n  return (date: string, mode: string) => {\n    switch (mode) {\n      case 'ago':\n        return dateTime(date).fromNow();\n    }\n    return dateTime(date).fromNow();\n  };\n});\n\nfunction interpolateTemplateVars(templateSrv: TemplateSrv = getTemplateSrv()) {\n  const filterFunc: any = (text: string, scope: any) => {\n    let scopedVars;\n    if (scope.ctrl) {\n      scopedVars = (scope.ctrl.panel || scope.ctrl.row).scopedVars;\n    } else {\n      scopedVars = scope.row.scopedVars;\n    }\n\n    return templateSrv.replaceWithText(text, scopedVars);\n  };\n\n  filterFunc.$stateful = true;\n  return filterFunc;\n}\n\ncoreModule.filter('interpolateTemplateVars', interpolateTemplateVars);\nexport default {};\n","import coreModule from 'app/angular/core_module';\n\nexport class AlertSrv {\n  constructor() {}\n\n  set() {\n    console.warn('old deprecated alert srv being used');\n  }\n}\n\n// this is just added to not break old plugins that might be using it\ncoreModule.service('alertSrv', AlertSrv);\n","import angular from 'angular';\n\nimport coreModule from '../core_module';\n\nclass DynamicDirectiveSrv {\n  static $inject = ['$compile'];\n\n  constructor(private $compile: angular.ICompileService) {}\n\n  addDirective(element: any, name: string, scope: any) {\n    const child = angular.element(document.createElement(name));\n    this.$compile(child)(scope);\n\n    element.empty();\n    element.append(child);\n  }\n\n  link(scope: any, elem: JQLite, attrs: any, options: any) {\n    const directiveInfo = options.directive(scope);\n    if (!directiveInfo || !directiveInfo.fn) {\n      elem.empty();\n      return;\n    }\n\n    if (!directiveInfo.fn.registered) {\n      coreModule.directive(attrs.$normalize(directiveInfo.name), directiveInfo.fn);\n      directiveInfo.fn.registered = true;\n    }\n\n    this.addDirective(elem, directiveInfo.name, scope);\n  }\n\n  create(options: any) {\n    const directiveDef = {\n      restrict: 'E',\n      scope: options.scope,\n      link: (scope: any, elem: JQLite, attrs: any) => {\n        if (options.watchPath) {\n          let childScope: any = null;\n          scope.$watch(options.watchPath, () => {\n            if (childScope) {\n              childScope.$destroy();\n            }\n            childScope = scope.$new();\n            this.link(childScope, elem, attrs, options);\n          });\n        } else {\n          this.link(scope, elem, attrs, options);\n        }\n      },\n    };\n\n    return directiveDef;\n  }\n}\n\ncoreModule.service('dynamicDirectiveSrv', DynamicDirectiveSrv);\n","//\n// This is using ng-react with this PR applied https://github.com/ngReact/ngReact/pull/199\n//\n\n// # ngReact\n// ### Use React Components inside of your Angular applications\n//\n// Composed of\n// - reactComponent (generic directive for delegating off to React Components)\n// - reactDirective (factory for creating specific directives that correspond to reactComponent directives)\n\nimport angular, { auto } from 'angular';\nimport { kebabCase } from 'lodash';\nimport { ComponentType } from 'react';\nimport * as React from 'react';\nimport { createRoot, Root } from 'react-dom/client';\n\n// get a react component from name (components can be an angular injectable e.g. value, factory or\n// available on window\nfunction getReactComponent(\n  name: string | Function,\n  $injector: auto.IInjectorService\n): ComponentType<React.PropsWithChildren<{}>> {\n  // if name is a function assume it is component and return it\n  if (angular.isFunction(name)) {\n    return name as unknown as ComponentType<React.PropsWithChildren<{}>>;\n  }\n\n  // a React component name must be specified\n  if (!name) {\n    throw new Error('ReactComponent name attribute must be specified');\n  }\n\n  // ensure the specified React component is accessible, and fail fast if it's not\n  let reactComponent;\n  try {\n    reactComponent = $injector.get(name);\n  } catch (e) {}\n\n  if (!reactComponent) {\n    try {\n      reactComponent = name.split('.').reduce((current, namePart) => {\n        // @ts-ignore\n        return current[namePart];\n      }, window);\n    } catch (e) {}\n  }\n\n  if (!reactComponent) {\n    throw Error('Cannot find react component ' + name);\n  }\n\n  return reactComponent as unknown as ComponentType<React.PropsWithChildren<{}>>;\n}\n\n// wraps a function with scope.$apply, if already applied just return\nfunction applied(fn: any, scope: any) {\n  if (fn.wrappedInApply) {\n    return fn;\n  }\n  // this had the equivalent of `eslint-disable-next-line prefer-arrow/prefer-arrow-functions`\n  const wrapped: any = function () {\n    const args = arguments;\n    const phase = scope.$root.$$phase;\n    if (phase === '$apply' || phase === '$digest') {\n      return fn.apply(null, args);\n    } else {\n      return scope.$apply(() => {\n        return fn.apply(null, args);\n      });\n    }\n  };\n  wrapped.wrappedInApply = true;\n  return wrapped;\n}\n\n/**\n * wraps functions on obj in scope.$apply\n *\n * keeps backwards compatibility, as if propsConfig is not passed, it will\n * work as before, wrapping all functions and won't wrap only when specified.\n *\n * @version 0.4.1\n * @param obj react component props\n * @param scope current scope\n * @param propsConfig configuration object for all properties\n * @returns {Object} props with the functions wrapped in scope.$apply\n */\nfunction applyFunctions(obj: any, scope: any, propsConfig?: any): object {\n  return Object.keys(obj || {}).reduce((prev, key) => {\n    const value = obj[key];\n    const config = (propsConfig || {})[key] || {};\n    /**\n     * wrap functions in a function that ensures they are scope.$applied\n     * ensures that when function is called from a React component\n     * the Angular digest cycle is run\n     */\n    // @ts-ignore\n    prev[key] = angular.isFunction(value) && config.wrapApply !== false ? applied(value, scope) : value;\n\n    return prev;\n  }, {});\n}\n\n/**\n *\n * @param watchDepth (value of HTML watch-depth attribute)\n * @param scope (angular scope)\n *\n * Uses the watchDepth attribute to determine how to watch props on scope.\n * If watchDepth attribute is NOT reference or collection, watchDepth defaults to deep watching by value\n */\nfunction watchProps(watchDepth: string, scope: any, watchExpressions: any[], listener: any) {\n  const supportsWatchCollection = angular.isFunction(scope.$watchCollection);\n  const supportsWatchGroup = angular.isFunction(scope.$watchGroup);\n\n  const watchGroupExpressions = [];\n\n  for (const expr of watchExpressions) {\n    const actualExpr = getPropExpression(expr);\n    const exprWatchDepth = getPropWatchDepth(watchDepth, expr);\n\n    // ignore empty expressions & expressions with functions\n    if (!actualExpr || actualExpr.match(/\\(.*\\)/) || exprWatchDepth === 'one-time') {\n      continue;\n    }\n\n    if (exprWatchDepth === 'collection' && supportsWatchCollection) {\n      scope.$watchCollection(actualExpr, listener);\n    } else if (exprWatchDepth === 'reference' && supportsWatchGroup) {\n      watchGroupExpressions.push(actualExpr);\n    } else {\n      scope.$watch(actualExpr, listener, exprWatchDepth !== 'reference');\n    }\n  }\n\n  if (watchDepth === 'one-time') {\n    listener();\n  }\n\n  if (watchGroupExpressions.length) {\n    scope.$watchGroup(watchGroupExpressions, listener);\n  }\n}\n\n// render React component, with scope[attrs.props] being passed in as the component props\nfunction renderComponent(component: any, props: object, scope: any, root: Root) {\n  scope.$evalAsync(() => {\n    root.render(React.createElement(component, props));\n  });\n}\n\n// get prop name from prop (string or array)\nfunction getPropName(prop: any) {\n  return Array.isArray(prop) ? prop[0] : prop;\n}\n\n// get prop name from prop (string or array)\nfunction getPropConfig(prop: any) {\n  return Array.isArray(prop) ? prop[1] : {};\n}\n\n// get prop expression from prop (string or array)\nfunction getPropExpression(prop: any) {\n  return Array.isArray(prop) ? prop[0] : prop;\n}\n\n/**\n * Finds the normalized attribute knowing that React props accept any type of capitalization and it also handles\n * kabab case attributes which can be used in case the attribute would also be a standard html attribute and would be\n * evaluated by the browser as such.\n * @param attrs All attributes of the component.\n * @param propName Name of the prop that react component expects.\n */\nfunction findAttribute(attrs: object, propName: string): string {\n  const index = Object.keys(attrs).find((attr: any) => {\n    return attr.toLowerCase() === propName.toLowerCase() || kebabCase(attr) === kebabCase(propName);\n  });\n  // @ts-ignore\n  return attrs[index];\n}\n\n// get watch depth of prop (string or array)\nfunction getPropWatchDepth(defaultWatch: string, prop: string | any[]) {\n  const customWatchDepth = Array.isArray(prop) && angular.isObject(prop[1]) && prop[1].watchDepth;\n  return customWatchDepth || defaultWatch;\n}\n\n// # reactComponent\n// Directive that allows React components to be used in Angular templates.\n//\n// Usage:\n//     <react-component name=\"Hello\" props=\"name\"/>\n//\n// This requires that there exists an injectable or globally available 'Hello' React component.\n// The 'props' attribute is optional and is passed to the component.\n//\n// The following would would create and register the component:\n//\n//     var module = angular.module('ace.react.components');\n//     module.value('Hello', React.createClass({\n//         render: function() {\n//             return <div>Hello {this.props.name}</div>;\n//         }\n//     }));\n//\nconst reactComponent = ($injector: any): any => {\n  return {\n    restrict: 'E',\n    replace: true,\n    link: function (scope: any, elem: Element[], attrs: any) {\n      const reactComponent = getReactComponent(attrs.name, $injector);\n\n      const root = createRoot(elem[0]);\n      const renderMyComponent = () => {\n        const scopeProps = scope.$eval(attrs.props);\n        const props = applyFunctions(scopeProps, scope);\n\n        renderComponent(reactComponent, props, scope, root);\n      };\n\n      // If there are props, re-render when they change\n      attrs.props ? watchProps(attrs.watchDepth, scope, [attrs.props], renderMyComponent) : renderMyComponent();\n\n      // cleanup when scope is destroyed\n      scope.$on('$destroy', () => {\n        if (!attrs.onScopeDestroy) {\n          root.unmount();\n        } else {\n          scope.$eval(attrs.onScopeDestroy, {\n            unmountComponent: root.unmount.bind(this),\n          });\n        }\n      });\n    },\n  };\n};\n\n// # reactDirective\n// Factory function to create directives for React components.\n//\n// With a component like this:\n//\n//     var module = angular.module('ace.react.components');\n//     module.value('Hello', React.createClass({\n//         render: function() {\n//             return <div>Hello {this.props.name}</div>;\n//         }\n//     }));\n//\n// A directive can be created and registered with:\n//\n//     module.directive('hello', function(reactDirective) {\n//         return reactDirective('Hello', ['name']);\n//     });\n//\n// Where the first argument is the injectable or globally accessible name of the React component\n// and the second argument is an array of property names to be watched and passed to the React component\n// as props.\n//\n// This directive can then be used like this:\n//\n//     <hello name=\"name\"/>\n//\nconst reactDirective = ($injector: auto.IInjectorService) => {\n  return (reactComponentName: string, props: string[], conf: any, injectableProps: any) => {\n    const directive = {\n      restrict: 'E',\n      replace: true,\n      link: function (scope: any, elem: Element[], attrs: any) {\n        const reactComponent = getReactComponent(reactComponentName, $injector);\n        const root = createRoot(elem[0]);\n\n        // if props is not defined, fall back to use the React component's propTypes if present\n        props = props || Object.keys(reactComponent.propTypes || {});\n\n        // for each of the properties, get their scope value and set it to scope.props\n        const renderMyComponent = () => {\n          let scopeProps: any = {};\n          const config: any = {};\n\n          props.forEach((prop) => {\n            const propName = getPropName(prop);\n            scopeProps[propName] = scope.$eval(findAttribute(attrs, propName));\n            config[propName] = getPropConfig(prop);\n          });\n\n          scopeProps = applyFunctions(scopeProps, scope, config);\n          scopeProps = angular.extend({}, scopeProps, injectableProps);\n          renderComponent(reactComponent, scopeProps, scope, root);\n        };\n\n        // watch each property name and trigger an update whenever something changes,\n        // to update scope.props with new values\n        const propExpressions = props.map((prop) => {\n          return Array.isArray(prop)\n            ? [findAttribute(attrs, prop[0]), getPropConfig(prop)]\n            : findAttribute(attrs, prop);\n        });\n\n        // If we don't have any props, then our watch statement won't fire.\n        props.length ? watchProps(attrs.watchDepth, scope, propExpressions, renderMyComponent) : renderMyComponent();\n\n        // cleanup when scope is destroyed\n        scope.$on('$destroy', () => {\n          if (!attrs.onScopeDestroy) {\n            root.unmount();\n          } else {\n            scope.$eval(attrs.onScopeDestroy, {\n              unmountComponent: root.unmount.bind(this),\n            });\n          }\n        });\n      },\n    };\n    return angular.extend(directive, conf);\n  };\n};\n\nconst ngModule = angular.module('react', []);\nngModule.directive('reactComponent', ['$injector', reactComponent]);\nngModule.factory('reactDirective', ['$injector', reactDirective]);\n","import { each, isString, map } from 'lodash';\n\nimport coreModule from '../core_module';\n\ncoreModule.service('uiSegmentSrv', ['$sce', 'templateSrv', uiSegmentSrv]);\n\nexport function uiSegmentSrv(this: any, $sce: any, templateSrv: any) {\n  const self = this;\n\n  class MetricSegment {\n    value: string;\n    html: any;\n    type: any;\n    expandable?: boolean;\n    text?: string;\n    cssClass?: string;\n    fake?: boolean;\n    custom?: boolean;\n    selectMode?: any;\n\n    constructor(options: any) {\n      if (options === '*' || options.value === '*') {\n        this.value = '*';\n        this.html = $sce.trustAsHtml('<i class=\"fa fa-asterisk\"><i>');\n        this.type = options.type;\n        this.expandable = true;\n        return;\n      }\n\n      if (isString(options)) {\n        this.value = options;\n        this.html = $sce.trustAsHtml(templateSrv.highlightVariablesAsHtml(this.value));\n        return;\n      }\n\n      // temp hack to work around legacy inconsistency in segment model\n      this.text = options.value;\n\n      this.cssClass = options.cssClass;\n      this.custom = options.custom;\n      this.type = options.type;\n      this.fake = options.fake;\n      this.value = options.value;\n      this.selectMode = options.selectMode;\n      this.expandable = options.expandable;\n      this.html = options.html || $sce.trustAsHtml(templateSrv.highlightVariablesAsHtml(this.value));\n    }\n  }\n\n  this.getSegmentForValue = function (value: string, fallbackText: string) {\n    if (value) {\n      return this.newSegment(value);\n    } else {\n      return this.newSegment({ value: fallbackText, fake: true });\n    }\n  };\n\n  this.newSelectMeasurement = () => {\n    return new MetricSegment({ value: 'select measurement', fake: true });\n  };\n\n  this.newFake = (text: string, type: string, cssClass: string) => {\n    return new MetricSegment({ value: text, fake: true, type: type, cssClass: cssClass });\n  };\n\n  this.newSegment = (options: any) => {\n    return new MetricSegment(options);\n  };\n\n  this.newKey = (key: string) => {\n    return new MetricSegment({ value: key, type: 'key', cssClass: 'query-segment-key' });\n  };\n\n  this.newKeyValue = (value: string) => {\n    return new MetricSegment({ value: value, type: 'value', cssClass: 'query-segment-value' });\n  };\n\n  this.newCondition = (condition: string) => {\n    return new MetricSegment({ value: condition, type: 'condition', cssClass: 'query-keyword' });\n  };\n\n  this.newOperator = (op: string) => {\n    return new MetricSegment({ value: op, type: 'operator', cssClass: 'query-segment-operator' });\n  };\n\n  this.newOperators = (ops: string[]) => {\n    return map(ops, (op) => {\n      return new MetricSegment({ value: op, type: 'operator', cssClass: 'query-segment-operator' });\n    });\n  };\n\n  this.transformToSegments = (addTemplateVars: boolean, variableTypeFilter: string) => {\n    return (results: any[]) => {\n      const segments = map(results, (segment) => {\n        return self.newSegment({ value: segment.text, expandable: segment.expandable });\n      });\n\n      if (addTemplateVars) {\n        each(templateSrv.getVariables(), (variable) => {\n          if (variableTypeFilter === void 0 || variableTypeFilter === variable.type) {\n            segments.unshift(self.newSegment({ type: 'value', value: '$' + variable.name, expandable: true }));\n          }\n        });\n      }\n\n      return segments;\n    };\n  };\n\n  this.newSelectMetric = () => {\n    return new MetricSegment({ value: 'select metric', fake: true });\n  };\n\n  this.newPlusButton = () => {\n    return new MetricSegment({\n      fake: true,\n      html: '<i class=\"fa fa-plus \"></i>',\n      type: 'plus-button',\n      cssClass: 'query-part',\n    });\n  };\n}\n","import { extend } from 'lodash';\n// @ts-ignore\nimport Drop from 'tether-drop';\n\nimport { GrafanaRootScope } from 'app/angular/GrafanaCtrl';\nimport coreModule from 'app/angular/core_module';\n\ncoreModule.service('popoverSrv', ['$compile', '$rootScope', '$timeout', popoverSrv]);\n\nfunction popoverSrv(this: any, $compile: any, $rootScope: GrafanaRootScope, $timeout: any) {\n  let openDrop: any = null;\n\n  this.close = () => {\n    if (openDrop) {\n      openDrop.close();\n    }\n  };\n\n  this.show = (options: any) => {\n    if (openDrop) {\n      openDrop.close();\n      openDrop = null;\n    }\n\n    const scope = extend($rootScope.$new(true), options.model);\n    let drop: any;\n\n    const cleanUp = () => {\n      setTimeout(() => {\n        scope.$destroy();\n\n        if (drop.tether) {\n          drop.destroy();\n        }\n\n        if (options.onClose) {\n          options.onClose();\n        }\n      });\n\n      openDrop = null;\n    };\n\n    scope.dismiss = () => {\n      drop.close();\n    };\n\n    const contentElement = document.createElement('div');\n    contentElement.innerHTML = options.template;\n\n    $compile(contentElement)(scope);\n\n    $timeout(() => {\n      drop = new Drop({\n        target: options.element,\n        content: contentElement,\n        position: options.position,\n        classes: options.classNames || 'drop-popover',\n        openOn: options.openOn,\n        hoverCloseDelay: 200,\n        tetherOptions: {\n          constraints: [{ to: 'scrollParent', attachment: 'together' }],\n        },\n      });\n\n      drop.on('close', () => {\n        cleanUp();\n      });\n\n      openDrop = drop;\n      openDrop.open();\n    }, 100);\n\n    // return close function\n    return () => {\n      if (drop) {\n        drop.close();\n      }\n    };\n  };\n}\n","import { ITimeoutService } from 'angular';\nimport { without, each } from 'lodash';\n\nimport coreModule from 'app/angular/core_module';\n\n// This service really just tracks a list of $timeout promises to give us a\n// method for canceling them all when we need to\nexport class Timer {\n  timers: Array<angular.IPromise<any>> = [];\n\n  static $inject = ['$timeout'];\n\n  constructor(private $timeout: ITimeoutService) {}\n\n  register(promise: angular.IPromise<any>) {\n    this.timers.push(promise);\n    return promise;\n  }\n\n  cancel(promise: angular.IPromise<any>) {\n    this.timers = without(this.timers, promise);\n    this.$timeout.cancel(promise);\n  }\n\n  cancelAll() {\n    each(this.timers, (t) => {\n      this.$timeout.cancel(t);\n    });\n    this.timers = [];\n  }\n}\n\ncoreModule.service('timer', Timer);\n","import angular from 'angular';\nimport { assign } from 'lodash';\n\nimport { AngularComponent, AngularLoader as AngularLoaderInterface } from '@grafana/runtime';\nimport { GrafanaRootScope } from 'app/angular/GrafanaCtrl';\nimport coreModule from 'app/angular/core_module';\n\nexport class AngularLoader implements AngularLoaderInterface {\n  static $inject = ['$compile', '$rootScope'];\n\n  constructor(\n    private $compile: angular.ICompileService,\n    private $rootScope: GrafanaRootScope\n  ) {}\n\n  load(elem: HTMLElement, scopeProps: any, template: string): AngularComponent {\n    const scope = this.$rootScope.$new();\n\n    assign(scope, scopeProps);\n\n    const compiledElem = this.$compile(template)(scope);\n    const rootNode = angular.element(elem);\n    rootNode.append(compiledElem);\n\n    return {\n      destroy: () => {\n        scope.$destroy();\n        compiledElem.remove();\n      },\n      digest: () => {\n        if (!scope.$$phase) {\n          scope.$digest();\n        }\n      },\n      getScope: () => {\n        return scope;\n      },\n    };\n  }\n}\n\ncoreModule.service('angularLoader', AngularLoader);\n","import angular from 'angular';\nimport $ from 'jquery';\nimport { extend } from 'lodash';\n\nconst $win = $(window);\n\n$.fn.place_tt = (() => {\n  const defaults = {\n    offset: 5,\n  };\n\n  return function (this: any, x: number, y: number, opts: any) {\n    opts = $.extend(true, {}, defaults, opts);\n\n    return this.each(() => {\n      const $tooltip = $(this);\n      let width, height;\n\n      $tooltip.addClass('grafana-tooltip');\n\n      $('#tooltip').remove();\n      $tooltip.appendTo(document.body);\n\n      if (opts.compile) {\n        angular\n          .element(document)\n          .injector()\n          .invoke([\n            '$compile',\n            '$rootScope',\n            ($compile, $rootScope) => {\n              const tmpScope = $rootScope.$new(true);\n              extend(tmpScope, opts.scopeData);\n\n              $compile($tooltip)(tmpScope);\n              tmpScope.$digest();\n              tmpScope.$destroy();\n            },\n          ]);\n      }\n\n      width = $tooltip.outerWidth(true)!;\n      height = $tooltip.outerHeight(true)!;\n\n      const left = x + opts.offset + width > $win.width()! ? x - opts.offset - width : x + opts.offset;\n      const top = y + opts.offset + height > $win.height()! ? y - opts.offset - height : y + opts.offset;\n\n      $tooltip.css('left', left > 0 ? left : 0);\n      $tooltip.css('top', top > 0 ? top : 0);\n    });\n  };\n})();\n","import $ from 'jquery';\nimport { each, reduce } from 'lodash';\n\nimport coreModule from './core_module';\n\nexport function dropdownTypeahead($compile: any) {\n  const inputTemplate =\n    '<input type=\"text\"' +\n    ' class=\"gf-form-input input-medium tight-form-input\"' +\n    ' spellcheck=\"false\" style=\"display:none\"></input>';\n\n  const buttonTemplate =\n    '<a class=\"gf-form-label tight-form-func dropdown-toggle\"' +\n    ' tabindex=\"1\" gf-dropdown=\"menuItems\" data-toggle=\"dropdown\"' +\n    ' ><i class=\"fa fa-plus\"></i></a>';\n\n  return {\n    scope: {\n      menuItems: '=dropdownTypeahead',\n      dropdownTypeaheadOnSelect: '&dropdownTypeaheadOnSelect',\n      model: '=ngModel',\n    },\n    link: ($scope: any, elem: any, attrs: any) => {\n      const $input = $(inputTemplate);\n      const $button = $(buttonTemplate);\n      $input.appendTo(elem);\n      $button.appendTo(elem);\n\n      if (attrs.linkText) {\n        $button.html(attrs.linkText);\n      }\n\n      if (attrs.ngModel) {\n        $scope.$watch('model', (newValue: any) => {\n          each($scope.menuItems, (item) => {\n            each(item.submenu, (subItem) => {\n              if (subItem.value === newValue) {\n                $button.html(subItem.text);\n              }\n            });\n          });\n        });\n      }\n\n      const typeaheadValues = reduce(\n        $scope.menuItems,\n        (memo: any[], value, index) => {\n          if (!value.submenu) {\n            value.click = 'menuItemSelected(' + index + ')';\n            memo.push(value.text);\n          } else {\n            each(value.submenu, (item, subIndex) => {\n              item.click = 'menuItemSelected(' + index + ',' + subIndex + ')';\n              memo.push(value.text + ' ' + item.text);\n            });\n          }\n          return memo;\n        },\n        []\n      );\n\n      const closeDropdownMenu = () => {\n        $input.hide();\n        $input.val('');\n        $button.show();\n        $button.focus();\n        elem.removeClass('open');\n      };\n\n      $scope.menuItemSelected = (index: number, subIndex: number) => {\n        const menuItem = $scope.menuItems[index];\n        const payload: any = { $item: menuItem };\n        if (menuItem.submenu && subIndex !== void 0) {\n          payload.$subItem = menuItem.submenu[subIndex];\n        }\n        $scope.dropdownTypeaheadOnSelect(payload);\n        closeDropdownMenu();\n      };\n\n      $input.attr('data-provide', 'typeahead');\n      $input.typeahead({\n        source: typeaheadValues,\n        minLength: 1,\n        items: 10,\n        updater: (value: string) => {\n          const result: any = {};\n          each($scope.menuItems, (menuItem) => {\n            each(menuItem.submenu, (submenuItem) => {\n              if (value === menuItem.text + ' ' + submenuItem.text) {\n                result.$subItem = submenuItem;\n                result.$item = menuItem;\n              }\n            });\n          });\n\n          if (result.$item) {\n            $scope.$apply(() => {\n              $scope.dropdownTypeaheadOnSelect(result);\n            });\n          }\n\n          $input.trigger('blur');\n          return '';\n        },\n      });\n\n      $button.click(() => {\n        $button.hide();\n        $input.show();\n        $input.focus();\n      });\n\n      $input.keyup(() => {\n        elem.toggleClass('open', $input.val() === '');\n      });\n\n      elem.mousedown((evt: Event) => {\n        evt.preventDefault();\n      });\n\n      $input.blur(() => {\n        $input.hide();\n        $input.val('');\n        $button.show();\n        $button.focus();\n        // clicking the function dropdown menu won't\n        // work if you remove class at once\n        setTimeout(() => {\n          elem.removeClass('open');\n        }, 200);\n      });\n\n      $compile(elem.contents())($scope);\n    },\n  };\n}\n\nexport function dropdownTypeahead2($compile: any) {\n  const inputTemplate =\n    '<input type=\"text\"' + ' class=\"gf-form-input\"' + ' spellcheck=\"false\" style=\"display:none\"></input>';\n\n  const buttonTemplate =\n    '<a class=\"{{buttonTemplateClass}} dropdown-toggle\"' +\n    ' tabindex=\"1\" gf-dropdown=\"menuItems\" data-toggle=\"dropdown\"' +\n    ' ><i class=\"fa fa-plus\"></i></a>';\n\n  return {\n    scope: {\n      menuItems: '=dropdownTypeahead2',\n      dropdownTypeaheadOnSelect: '&dropdownTypeaheadOnSelect',\n      model: '=ngModel',\n      buttonTemplateClass: '@',\n    },\n    link: ($scope: any, elem: any, attrs: any) => {\n      const $input = $(inputTemplate);\n\n      if (!$scope.buttonTemplateClass) {\n        $scope.buttonTemplateClass = 'gf-form-input';\n      }\n\n      const $button = $(buttonTemplate);\n      const timeoutId = {\n        blur: null as any,\n      };\n      $input.appendTo(elem);\n      $button.appendTo(elem);\n\n      if (attrs.linkText) {\n        $button.html(attrs.linkText);\n      }\n\n      if (attrs.ngModel) {\n        $scope.$watch('model', (newValue: any) => {\n          each($scope.menuItems, (item) => {\n            each(item.submenu, (subItem) => {\n              if (subItem.value === newValue) {\n                $button.html(subItem.text);\n              }\n            });\n          });\n        });\n      }\n\n      const typeaheadValues = reduce(\n        $scope.menuItems,\n        (memo: any[], value, index) => {\n          if (!value.submenu) {\n            value.click = 'menuItemSelected(' + index + ')';\n            memo.push(value.text);\n          } else {\n            each(value.submenu, (item, subIndex) => {\n              item.click = 'menuItemSelected(' + index + ',' + subIndex + ')';\n              memo.push(value.text + ' ' + item.text);\n            });\n          }\n          return memo;\n        },\n        []\n      );\n\n      const closeDropdownMenu = () => {\n        $input.hide();\n        $input.val('');\n        $button.show();\n        $button.focus();\n        elem.removeClass('open');\n      };\n\n      $scope.menuItemSelected = (index: number, subIndex: number) => {\n        const menuItem = $scope.menuItems[index];\n        const payload: any = { $item: menuItem };\n        if (menuItem.submenu && subIndex !== void 0) {\n          payload.$subItem = menuItem.submenu[subIndex];\n        }\n        $scope.dropdownTypeaheadOnSelect(payload);\n        closeDropdownMenu();\n      };\n\n      $input.attr('data-provide', 'typeahead');\n      $input.typeahead({\n        source: typeaheadValues,\n        minLength: 1,\n        items: 10,\n        updater: (value: string) => {\n          const result: any = {};\n          each($scope.menuItems, (menuItem) => {\n            each(menuItem.submenu, (submenuItem) => {\n              if (value === menuItem.text + ' ' + submenuItem.text) {\n                result.$subItem = submenuItem;\n                result.$item = menuItem;\n              }\n            });\n          });\n\n          if (result.$item) {\n            $scope.$apply(() => {\n              $scope.dropdownTypeaheadOnSelect(result);\n            });\n          }\n\n          $input.trigger('blur');\n          return '';\n        },\n      });\n\n      $button.click(() => {\n        $button.hide();\n        $input.show();\n        $input.focus();\n      });\n\n      $input.keyup(() => {\n        elem.toggleClass('open', $input.val() === '');\n      });\n\n      elem.mousedown((evt: Event) => {\n        evt.preventDefault();\n        timeoutId.blur = null;\n      });\n\n      $input.blur(() => {\n        timeoutId.blur = setTimeout(() => {\n          closeDropdownMenu();\n        }, 1);\n      });\n\n      $compile(elem.contents())($scope);\n    },\n  };\n}\n\ncoreModule.directive('dropdownTypeahead', ['$compile', dropdownTypeahead]);\ncoreModule.directive('dropdownTypeahead2', ['$compile', dropdownTypeahead2]);\n","import coreModule from './core_module';\n\nexport function autofillEventFix($compile: any) {\n  return {\n    link: ($scope: any, elem: any) => {\n      const input = elem[0];\n      const dispatchChangeEvent = () => {\n        const event = new Event('change');\n        return input.dispatchEvent(event);\n      };\n      const onAnimationStart = ({ animationName }: AnimationEvent) => {\n        switch (animationName) {\n          case 'onAutoFillStart':\n            return dispatchChangeEvent();\n          case 'onAutoFillCancel':\n            return dispatchChangeEvent();\n        }\n        return null;\n      };\n\n      // const onChange = (evt: Event) => console.log(evt);\n\n      input.addEventListener('animationstart', onAnimationStart);\n      // input.addEventListener('change', onChange);\n\n      $scope.$on('$destroy', () => {\n        input.removeEventListener('animationstart', onAnimationStart);\n        // input.removeEventListener('change', onChange);\n      });\n    },\n  };\n}\n\ncoreModule.directive('autofillEventFix', ['$compile', autofillEventFix]);\n","import $ from 'jquery';\nimport { debounce, find, indexOf, map, escape, unescape } from 'lodash';\n\nimport { TemplateSrv } from 'app/features/templating/template_srv';\n\nimport coreModule from './core_module';\n\nexport function metricSegment($compile: any, $sce: any, templateSrv: TemplateSrv) {\n  const inputTemplate =\n    '<input type=\"text\" data-provide=\"typeahead\" ' +\n    ' class=\"gf-form-input input-medium\"' +\n    ' spellcheck=\"false\" style=\"display:none\"></input>';\n\n  const linkTemplate =\n    '<a class=\"gf-form-label\" ng-class=\"segment.cssClass\" ' +\n    'tabindex=\"1\" give-focus=\"segment.focus\" ng-bind-html=\"segment.html\"></a>';\n\n  const selectTemplate =\n    '<a class=\"gf-form-input gf-form-input--dropdown\" ng-class=\"segment.cssClass\" ' +\n    'tabindex=\"1\" give-focus=\"segment.focus\" ng-bind-html=\"segment.html\"></a>';\n\n  return {\n    scope: {\n      segment: '=',\n      getOptions: '&',\n      onChange: '&',\n      debounce: '@',\n    },\n    link: ($scope: any, elem: any) => {\n      const $input = $(inputTemplate);\n      const segment = $scope.segment;\n      const $button = $(segment.selectMode ? selectTemplate : linkTemplate);\n      let options = null;\n      let cancelBlur: any = null;\n      let linkMode = true;\n      const debounceLookup = $scope.debounce;\n\n      $input.appendTo(elem);\n      $button.appendTo(elem);\n\n      $scope.updateVariableValue = (value: string) => {\n        if (value === '' || segment.value === value) {\n          return;\n        }\n\n        $scope.$apply(() => {\n          const selected: any = find($scope.altSegments, { value: value });\n          if (selected) {\n            segment.value = selected.value;\n            segment.html = selected.html || $sce.trustAsHtml(templateSrv.highlightVariablesAsHtml(selected.value));\n            segment.fake = false;\n            segment.expandable = selected.expandable;\n\n            if (selected.type) {\n              segment.type = selected.type;\n            }\n          } else if (segment.custom !== 'false') {\n            segment.value = value;\n            segment.html = $sce.trustAsHtml(templateSrv.highlightVariablesAsHtml(value));\n            segment.expandable = true;\n            segment.fake = false;\n          }\n\n          $scope.onChange();\n        });\n      };\n\n      $scope.switchToLink = (fromClick: boolean) => {\n        if (linkMode && !fromClick) {\n          return;\n        }\n\n        clearTimeout(cancelBlur);\n        cancelBlur = null;\n        linkMode = true;\n        $input.hide();\n        $button.show();\n        $scope.updateVariableValue($input.val());\n      };\n\n      $scope.inputBlur = () => {\n        // happens long before the click event on the typeahead options\n        // need to have long delay because the blur\n        cancelBlur = setTimeout($scope.switchToLink, 200);\n      };\n\n      $scope.source = (query: string, callback: any) => {\n        $scope.$apply(() => {\n          $scope.getOptions({ $query: query }).then((altSegments: any) => {\n            $scope.altSegments = altSegments;\n            options = map($scope.altSegments, (alt) => {\n              return escape(alt.value);\n            });\n\n            // add custom values\n            if (segment.custom !== 'false') {\n              if (!segment.fake && indexOf(options, segment.value) === -1) {\n                options.unshift(escape(segment.value));\n              }\n            }\n\n            callback(options);\n          });\n        });\n      };\n\n      $scope.updater = (value: string) => {\n        value = unescape(value);\n        if (value === segment.value) {\n          clearTimeout(cancelBlur);\n          $input.focus();\n          return value;\n        }\n\n        $input.val(value);\n        $scope.switchToLink(true);\n\n        return value;\n      };\n\n      $scope.matcher = function (item: string) {\n        if (linkMode) {\n          return false;\n        }\n        let str = this.query;\n        if (str[0] === '/') {\n          str = str.substring(1);\n        }\n        if (str[str.length - 1] === '/') {\n          str = str.substring(0, str.length - 1);\n        }\n        try {\n          return item.toLowerCase().match(str.toLowerCase());\n        } catch (e) {\n          return false;\n        }\n      };\n\n      $input.attr('data-provide', 'typeahead');\n      $input.typeahead({\n        source: $scope.source,\n        minLength: 0,\n        items: 10000,\n        updater: $scope.updater,\n        matcher: $scope.matcher,\n      });\n\n      const typeahead = $input.data('typeahead');\n      typeahead.lookup = function () {\n        this.query = this.$element.val() || '';\n        const items = this.source(this.query, $.proxy(this.process, this));\n        return items ? this.process(items) : items;\n      };\n\n      if (debounceLookup) {\n        typeahead.lookup = debounce(typeahead.lookup, 500, { leading: true });\n      }\n\n      $button.keydown((evt) => {\n        // trigger typeahead on down arrow or enter key\n        if (evt.keyCode === 40 || evt.keyCode === 13) {\n          $button.click();\n        }\n      });\n\n      $button.click(() => {\n        options = null;\n        $input.css('width', Math.max($button.width()!, 80) + 16 + 'px');\n\n        $button.hide();\n        $input.show();\n        $input.focus();\n\n        linkMode = false;\n\n        const typeahead = $input.data('typeahead');\n        if (typeahead) {\n          $input.val('');\n          typeahead.lookup();\n        }\n      });\n\n      $input.blur($scope.inputBlur);\n\n      $compile(elem.contents())($scope);\n    },\n  };\n}\n\nexport function metricSegmentModel(uiSegmentSrv: any) {\n  return {\n    template:\n      '<metric-segment segment=\"segment\" get-options=\"getOptionsInternal()\" on-change=\"onSegmentChange()\"></metric-segment>',\n    restrict: 'E',\n    scope: {\n      property: '=',\n      options: '=',\n      getOptions: '&',\n      onChange: '&',\n    },\n    link: {\n      pre: function postLink($scope: any, elem: any, attrs: any) {\n        let cachedOptions: any;\n\n        $scope.valueToSegment = (value: any) => {\n          const option: any = find($scope.options, { value: value });\n          const segment = {\n            cssClass: attrs.cssClass,\n            custom: attrs.custom,\n            value: option ? option.text : value,\n            selectMode: attrs.selectMode,\n          };\n\n          return uiSegmentSrv.newSegment(segment);\n        };\n\n        $scope.getOptionsInternal = () => {\n          if ($scope.options) {\n            cachedOptions = $scope.options;\n            return Promise.resolve(\n              map($scope.options, (option) => {\n                return { value: option.text };\n              })\n            );\n          } else {\n            return $scope.getOptions().then((options: any) => {\n              cachedOptions = options;\n              return map(options, (option) => {\n                if (option.html) {\n                  return option;\n                }\n                return { value: option.text };\n              });\n            });\n          }\n        };\n\n        $scope.onSegmentChange = () => {\n          if (cachedOptions) {\n            const option: any = find(cachedOptions, { text: $scope.segment.value });\n            if (option && option.value !== $scope.property) {\n              $scope.property = option.value;\n            } else if (attrs.custom !== 'false') {\n              $scope.property = $scope.segment.value;\n            }\n          } else {\n            $scope.property = $scope.segment.value;\n          }\n\n          // needs to call this after digest so\n          // property is synced with outerscope\n          $scope.$$postDigest(() => {\n            $scope.$apply(() => {\n              $scope.onChange();\n            });\n          });\n        };\n\n        $scope.segment = $scope.valueToSegment($scope.property);\n      },\n    },\n  };\n}\n\ncoreModule.directive('metricSegment', ['$compile', '$sce', 'templateSrv', metricSegment]);\ncoreModule.directive('metricSegmentModel', ['uiSegmentSrv', metricSegmentModel]);\n","import angular from 'angular';\n\nimport coreModule from './core_module';\n\ncoreModule.directive('tip', ['$compile', tip]);\n\nfunction tip($compile: any) {\n  return {\n    restrict: 'E',\n    link: (scope: any, elem: any, attrs: any) => {\n      let _t =\n        '<i class=\"grafana-tip fa fa-' +\n        (attrs.icon || 'question-circle') +\n        '\" bs-tooltip=\"\\'' +\n        // here we double-html-encode any special characters in the source string\n        // this is needed so that the final html contains the encoded entities as they\n        // will be decoded when _t is parsed by angular\n        elem.text().replace(/[\\'\\\"\\\\{}<>&]/g, (m: string) => '&amp;#' + m.charCodeAt(0) + ';') +\n        '\\'\"></i>';\n      elem.replaceWith($compile(angular.element(_t))(scope));\n    },\n  };\n}\n\ncoreModule.directive('compile', ['$compile', compile]);\n\nfunction compile($compile: any) {\n  return {\n    restrict: 'A',\n    link: (scope: any, element: any, attrs: any) => {\n      scope.$watch(\n        (scope: any) => {\n          return scope.$eval(attrs.compile);\n        },\n        (value: any) => {\n          element.html(value);\n          $compile(element.contents())(scope);\n        }\n      );\n    },\n  };\n}\n\ncoreModule.directive('watchChange', watchChange);\n\nfunction watchChange() {\n  return {\n    scope: { onchange: '&watchChange' },\n    link: (scope: any, element: any) => {\n      element.on('input', () => {\n        scope.$apply(() => {\n          scope.onchange({ inputValue: element.val() });\n        });\n      });\n    },\n  };\n}\n\ncoreModule.directive('editorOptBool', ['$compile', editorOptBool]);\n\nfunction editorOptBool($compile: any) {\n  return {\n    restrict: 'E',\n    link: (scope: any, elem: any, attrs: any) => {\n      const ngchange = attrs.change ? ' ng-change=\"' + attrs.change + '\"' : '';\n      const tip = attrs.tip ? ' <tip>' + attrs.tip + '</tip>' : '';\n      const showIf = attrs.showIf ? ' ng-show=\"' + attrs.showIf + '\" ' : '';\n\n      const template =\n        '<div class=\"editor-option gf-form-checkbox text-center\"' +\n        showIf +\n        '>' +\n        ' <label for=\"' +\n        attrs.model +\n        '\" class=\"small\">' +\n        attrs.text +\n        tip +\n        '</label>' +\n        '<input class=\"cr1\" id=\"' +\n        attrs.model +\n        '\" type=\"checkbox\" ' +\n        '       ng-model=\"' +\n        attrs.model +\n        '\"' +\n        ngchange +\n        '       ng-checked=\"' +\n        attrs.model +\n        '\"></input>' +\n        ' <label for=\"' +\n        attrs.model +\n        '\" class=\"cr1\"></label>';\n      elem.replaceWith($compile(angular.element(template))(scope));\n    },\n  };\n}\n\ncoreModule.directive('editorCheckbox', ['$compile, $interpolate', editorCheckbox]);\n\nfunction editorCheckbox($compile: any, $interpolate: any) {\n  return {\n    restrict: 'E',\n    link: (scope: any, elem: any, attrs: any) => {\n      const text = $interpolate(attrs.text)(scope);\n      const model = $interpolate(attrs.model)(scope);\n      const ngchange = attrs.change ? ' ng-change=\"' + attrs.change + '\"' : '';\n      const tip = attrs.tip ? ' <tip>' + attrs.tip + '</tip>' : '';\n      const label = '<label for=\"' + scope.$id + model + '\" class=\"checkbox-label\">' + text + tip + '</label>';\n\n      let template =\n        '<input class=\"cr1\" id=\"' +\n        scope.$id +\n        model +\n        '\" type=\"checkbox\" ' +\n        '       ng-model=\"' +\n        model +\n        '\"' +\n        ngchange +\n        '       ng-checked=\"' +\n        model +\n        '\"></input>' +\n        ' <label for=\"' +\n        scope.$id +\n        model +\n        '\" class=\"cr1\"></label>';\n\n      template = template + label;\n      elem.addClass('gf-form-checkbox');\n      elem.html($compile(angular.element(template))(scope));\n    },\n  };\n}\n\ncoreModule.directive('gfDropdown', ['$parse', '$compile', '$timeout', gfDropdown]);\n\nfunction gfDropdown($parse: any, $compile: any, $timeout: any) {\n  function buildTemplate(items: any, placement?: any) {\n    const upclass = placement === 'top' ? 'dropup' : '';\n    const ul = ['<ul class=\"dropdown-menu ' + upclass + '\" role=\"menu\" aria-labelledby=\"drop1\">', '</ul>'];\n\n    for (let index = 0; index < items.length; index++) {\n      const item = items[index];\n\n      if (item.divider) {\n        ul.splice(index + 1, 0, '<li class=\"divider\"></li>');\n        continue;\n      }\n\n      let li =\n        '<li' +\n        (item.submenu && item.submenu.length ? ' class=\"dropdown-submenu\"' : '') +\n        '>' +\n        '<a tabindex=\"-1\" ng-href=\"' +\n        (item.href || '') +\n        '\"' +\n        (item.click ? ' ng-click=\"' + item.click + '\"' : '') +\n        (item.target ? ' target=\"' + item.target + '\"' : '') +\n        (item.method ? ' data-method=\"' + item.method + '\"' : '') +\n        '>' +\n        (item.text || '') +\n        '</a>';\n\n      if (item.submenu && item.submenu.length) {\n        li += buildTemplate(item.submenu).join('\\n');\n      }\n\n      li += '</li>';\n      ul.splice(index + 1, 0, li);\n    }\n\n    return ul;\n  }\n\n  return {\n    restrict: 'EA',\n    scope: true,\n    link: function postLink(scope: any, iElement: any, iAttrs: any) {\n      const getter = $parse(iAttrs.gfDropdown),\n        items = getter(scope);\n      $timeout(() => {\n        const placement = iElement.data('placement');\n        const dropdown = angular.element(buildTemplate(items, placement).join(''));\n        dropdown.insertAfter(iElement);\n        $compile(iElement.next('ul.dropdown-menu'))(scope);\n      });\n\n      iElement.addClass('dropdown-toggle').attr('data-toggle', 'dropdown');\n    },\n  };\n}\n","import angular from 'angular';\nimport $ from 'jquery';\n\nimport coreModule from './core_module';\n\ncoreModule.directive('bsTooltip', [\n  '$parse',\n  '$compile',\n  function ($parse: any, $compile: any) {\n    return {\n      restrict: 'A',\n      scope: true,\n      link: function postLink(scope: any, element: any, attrs: any) {\n        let getter = $parse(attrs.bsTooltip),\n          value = getter(scope);\n        scope.$watch(attrs.bsTooltip, function (newValue: any, oldValue: any) {\n          if (newValue !== oldValue) {\n            value = newValue;\n          }\n        });\n        // Grafana change, always hide other tooltips\n        if (true) {\n          element.on('show', function (ev: any) {\n            $('.tooltip.in').each(function () {\n              const $this = $(this),\n                tooltip = $this.data('tooltip');\n              if (tooltip && !tooltip.$element.is(element)) {\n                $this.tooltip('hide');\n              }\n            });\n          });\n        }\n        element.tooltip({\n          title: function () {\n            return angular.isFunction(value) ? value.apply(null, arguments) : value;\n          },\n          html: true,\n          container: 'body', // Grafana change\n        });\n        const tooltip = element.data('tooltip');\n        tooltip.show = function () {\n          const r = $.fn.tooltip.Constructor.prototype.show.apply(this, arguments);\n          this.tip().data('tooltip', this);\n          return r;\n        };\n        scope._tooltip = function (event: any) {\n          element.tooltip(event);\n        };\n        scope.hide = function () {\n          element.tooltip('hide');\n        };\n        scope.show = function () {\n          element.tooltip('show');\n        };\n        scope.dismiss = scope.hide;\n      },\n    };\n  },\n]);\n","import angular from 'angular';\nimport $ from 'jquery';\nimport { isFunction } from 'lodash';\n\nimport coreModule from './core_module';\n\ncoreModule.directive('bsTypeahead', [\n  '$parse',\n  function ($parse: any) {\n    return {\n      restrict: 'A',\n      require: '?ngModel',\n      link: function postLink(scope: any, element: any, attrs: any, controller: any) {\n        let getter = $parse(attrs.bsTypeahead),\n          value = getter(scope);\n        scope.$watch(attrs.bsTypeahead, function (newValue: any, oldValue: any) {\n          if (newValue !== oldValue) {\n            value = newValue;\n          }\n        });\n        element.attr('data-provide', 'typeahead');\n        element.typeahead({\n          source: function () {\n            return angular.isFunction(value) ? value.apply(null, arguments) : value;\n          },\n          minLength: attrs.minLength || 1,\n          items: attrs.item,\n          updater: function (value: any) {\n            if (controller) {\n              scope.$apply(function () {\n                controller.$setViewValue(value);\n              });\n            }\n            scope.$emit('typeahead-updated', value);\n            return value;\n          },\n        });\n        const typeahead = element.data('typeahead');\n        typeahead.lookup = function () {\n          let items;\n          this.query = this.$element.val() || '';\n          if (this.query.length < this.options.minLength) {\n            return this.shown ? this.hide() : this;\n          }\n          items = isFunction(this.source) ? this.source(this.query, $.proxy(this.process, this)) : this.source;\n          return items ? this.process(items) : this;\n        };\n        if (!!attrs.matchAll) {\n          typeahead.matcher = function () {\n            return true;\n          };\n        }\n        if (attrs.minLength === '0') {\n          setTimeout(function () {\n            element.on('focus', function () {\n              element.val().length === 0 && setTimeout(element.typeahead.bind(element, 'lookup'), 200);\n            });\n          });\n        }\n      },\n    };\n  },\n]);\n","import { rangeUtil } from '@grafana/data';\n\nimport coreModule from './core_module';\n\nfunction ngModelOnBlur() {\n  return {\n    restrict: 'A',\n    priority: 1,\n    require: 'ngModel',\n    link: (scope: any, elm: any, attr: any, ngModelCtrl: any) => {\n      if (attr.type === 'radio' || attr.type === 'checkbox') {\n        return;\n      }\n\n      elm.off('input keydown change');\n      elm.bind('blur', () => {\n        scope.$apply(() => {\n          ngModelCtrl.$setViewValue(elm.val());\n        });\n      });\n    },\n  };\n}\n\nfunction emptyToNull() {\n  return {\n    restrict: 'A',\n    require: 'ngModel',\n    link: (scope: any, elm: any, attrs: any, ctrl: any) => {\n      ctrl.$parsers.push((viewValue: any) => {\n        if (viewValue === '') {\n          return null;\n        }\n        return viewValue;\n      });\n    },\n  };\n}\n\nfunction validTimeSpan() {\n  return {\n    require: 'ngModel',\n    link: (scope: any, elm: any, attrs: any, ctrl: any) => {\n      ctrl.$validators.integer = (modelValue: any, viewValue: any) => {\n        if (ctrl.$isEmpty(modelValue)) {\n          return true;\n        }\n        if (viewValue.indexOf('$') === 0 || viewValue.indexOf('+$') === 0) {\n          return true; // allow template variable\n        }\n        const info = rangeUtil.describeTextRange(viewValue);\n        return info.invalid !== true;\n      };\n    },\n  };\n}\n\ncoreModule.directive('ngModelOnblur', ngModelOnBlur);\ncoreModule.directive('emptyToNull', emptyToNull);\ncoreModule.directive('validTimeSpan', validTimeSpan);\n","import angular from 'angular';\nimport $ from 'jquery';\n\nimport { getTagColorsFromName } from '@grafana/ui';\n\nimport coreModule from './core_module';\nimport 'vendor/tagsinput/bootstrap-tagsinput.js';\n\nfunction setColor(name: string, element: JQuery) {\n  const { color, borderColor } = getTagColorsFromName(name);\n  element.css('background-color', color);\n  element.css('border-color', borderColor);\n}\n\nfunction tagColorFromName() {\n  return {\n    scope: { tagColorFromName: '=' },\n    link: (scope: any, element: any) => {\n      setColor(scope.tagColorFromName, element);\n    },\n  };\n}\n\nfunction bootstrapTagsinput() {\n  function getItemProperty(scope: any, property: any) {\n    if (!property) {\n      return undefined;\n    }\n\n    if (angular.isFunction(scope.$parent[property])) {\n      return scope.$parent[property];\n    }\n\n    return (item: any) => {\n      return item[property];\n    };\n  }\n\n  return {\n    restrict: 'EA',\n    scope: {\n      model: '=ngModel',\n      onTagsUpdated: '&',\n    },\n    template: '<select multiple></select>',\n    replace: false,\n    link: function (scope: any, element: any, attrs: any) {\n      if (!angular.isArray(scope.model)) {\n        scope.model = [];\n      }\n\n      const select = $('select', element);\n\n      if (attrs.placeholder) {\n        select.attr('placeholder', attrs.placeholder);\n      }\n\n      select.tagsinput({\n        typeahead: {\n          source: angular.isFunction(scope.$parent[attrs.typeaheadSource])\n            ? scope.$parent[attrs.typeaheadSource]\n            : null,\n        },\n        widthClass: attrs.widthClass,\n        itemValue: getItemProperty(scope, attrs.itemvalue),\n        itemText: getItemProperty(scope, attrs.itemtext),\n        tagClass: angular.isFunction(scope.$parent[attrs.tagclass])\n          ? scope.$parent[attrs.tagclass]\n          : () => {\n              return attrs.tagclass;\n            },\n      });\n\n      select.on('itemAdded', (event: any) => {\n        if (scope.model.indexOf(event.item) === -1) {\n          scope.model.push(event.item);\n          if (scope.onTagsUpdated) {\n            scope.onTagsUpdated();\n          }\n        }\n        const tagElement = select\n          .next()\n          .children('span')\n          .filter(() => {\n            return $(this).text() === event.item;\n          });\n        setColor(event.item, tagElement);\n      });\n\n      select.on('itemRemoved', (event: any) => {\n        const idx = scope.model.indexOf(event.item);\n        if (idx !== -1) {\n          scope.model.splice(idx, 1);\n          if (scope.onTagsUpdated) {\n            scope.onTagsUpdated();\n          }\n        }\n      });\n\n      scope.$watch(\n        'model',\n        () => {\n          if (!angular.isArray(scope.model)) {\n            scope.model = [];\n          }\n\n          select.tagsinput('removeAll');\n\n          for (let i = 0; i < scope.model.length; i++) {\n            select.tagsinput('add', scope.model[i]);\n          }\n        },\n        true\n      );\n    },\n  };\n}\n\ncoreModule.directive('tagColorFromName', tagColorFromName);\ncoreModule.directive('bootstrapTagsinput', bootstrapTagsinput);\n","import $ from 'jquery';\n\nimport coreModule from './core_module';\n\nfunction getBlockNodes(nodes: any[]) {\n  let node = nodes[0];\n  const endNode = nodes[nodes.length - 1];\n  let blockNodes: any[] | undefined;\n  node = node.nextSibling;\n\n  for (let i = 1; node !== endNode && node; i++) {\n    if (blockNodes || nodes[i] !== node) {\n      if (!blockNodes) {\n        blockNodes = $([].slice.call(nodes, 0, i)) as any;\n      }\n\n      blockNodes!.push(node);\n    }\n    node = node.nextSibling;\n  }\n\n  return blockNodes || nodes;\n}\n\ncoreModule.directive('rebuildOnChange', ['$animate', rebuildOnChange]);\n\nfunction rebuildOnChange($animate: any) {\n  return {\n    multiElement: true,\n    terminal: true,\n    transclude: true,\n    priority: 600,\n    restrict: 'E',\n    link: (scope: any, elem: any, attrs: any, ctrl: any, transclude: any) => {\n      let block: any, childScope: any, previousElements: any;\n\n      function cleanUp() {\n        if (previousElements) {\n          previousElements.remove();\n          previousElements = null;\n        }\n        if (childScope) {\n          childScope.$destroy();\n          childScope = null;\n        }\n        if (block) {\n          previousElements = getBlockNodes(block.clone);\n          $animate.leave(previousElements).then(() => {\n            previousElements = null;\n          });\n          block = null;\n        }\n      }\n\n      scope.$watch(attrs.property, function rebuildOnChangeAction(value: any, oldValue: any) {\n        if (childScope && value !== oldValue) {\n          cleanUp();\n        }\n\n        if (!childScope && (value || attrs.showNull)) {\n          transclude((clone: any, newScope: any) => {\n            childScope = newScope;\n            clone[clone.length++] = document.createComment(' end rebuild on change ');\n            block = { clone: clone };\n            $animate.enter(clone, elem.parent(), elem);\n          });\n        } else {\n          cleanUp();\n        }\n      });\n    },\n  };\n}\n","import coreModule from './core_module';\n\ncoreModule.directive('giveFocus', () => {\n  return (scope: any, element: any, attrs: any) => {\n    element.click((e: any) => {\n      e.stopPropagation();\n    });\n\n    scope.$watch(\n      attrs.giveFocus,\n      (newValue: any) => {\n        if (!newValue) {\n          return;\n        }\n        setTimeout(() => {\n          element.focus();\n          const domEl: any = element[0];\n          if (domEl.setSelectionRange) {\n            const pos = element.val().length * 2;\n            domEl.setSelectionRange(pos, pos);\n          }\n        }, 200);\n      },\n      true\n    );\n  };\n});\n\nexport default {};\n","import angular from 'angular';\n\nimport { GrafanaRootScope } from 'app/angular/GrafanaCtrl';\n\nimport coreModule from './core_module';\n\nexport class DeltaCtrl {\n  observer: any;\n\n  constructor() {\n    const waitForCompile = () => {};\n\n    this.observer = new MutationObserver(waitForCompile);\n\n    const observerConfig = {\n      attributes: true,\n      attributeFilter: ['class'],\n      characterData: false,\n      childList: true,\n      subtree: false,\n    };\n\n    this.observer.observe(angular.element('.delta-html')[0], observerConfig);\n  }\n\n  $onDestroy() {\n    this.observer.disconnect();\n  }\n}\n\nexport function delta() {\n  return {\n    controller: DeltaCtrl,\n    replace: false,\n    restrict: 'A',\n  };\n}\n\ncoreModule.directive('diffDelta', delta);\n\n// Link to JSON line number\nexport class LinkJSONCtrl {\n  static $inject = ['$scope', '$rootScope', '$anchorScroll'];\n\n  constructor(\n    private $scope: any,\n    private $rootScope: GrafanaRootScope,\n    private $anchorScroll: any\n  ) {}\n\n  goToLine(line: number) {\n    let unbind: () => void;\n\n    const scroll = () => {\n      this.$anchorScroll(`l${line}`);\n      unbind();\n    };\n\n    this.$scope.switchView().then(() => {\n      unbind = this.$rootScope.$on('json-diff-ready', scroll.bind(this));\n    });\n  }\n}\n\nexport function linkJson() {\n  return {\n    controller: LinkJSONCtrl,\n    controllerAs: 'ctrl',\n    replace: true,\n    restrict: 'E',\n    scope: {\n      line: '@lineDisplay',\n      link: '@lineLink',\n      switchView: '&',\n    },\n    template: `<a class=\"diff-linenum btn btn-inverse btn-small\" ng-click=\"ctrl.goToLine(link)\">Line {{ line }}</a>`,\n  };\n}\n\ncoreModule.directive('diffLinkJson', linkJson);\n","import { isArray } from 'lodash';\n\nimport coreModule from './core_module';\n\nexport function arrayJoin() {\n  'use strict';\n\n  return {\n    restrict: 'A',\n    require: 'ngModel',\n    link: (scope: any, element: any, attr: any, ngModel: any) => {\n      function split_array(text: string) {\n        return (text || '').split(',');\n      }\n\n      function join_array(text: string) {\n        if (isArray(text)) {\n          return ((text || '') as any).join(',');\n        } else {\n          return text;\n        }\n      }\n\n      ngModel.$parsers.push(split_array);\n      ngModel.$formatters.push(join_array);\n    },\n  };\n}\n\ncoreModule.directive('arrayJoin', arrayJoin);\n","import { config } from '@grafana/runtime';\nimport coreModule from 'app/angular/core_module';\nimport { provideTheme } from 'app/core/utils/ConfigProvider';\n\nexport function react2AngularDirective(name: string, component: any, options: any) {\n  coreModule.directive(name, [\n    'reactDirective',\n    (reactDirective) => {\n      return reactDirective(provideTheme(component, config.theme2), options);\n    },\n  ]);\n}\n","import { E2ESelectors } from '@grafana/e2e-selectors';\n\nexport const components = {\n  queryEditor: {\n    container: 'data-testid cloud-monitoring-query-editor',\n    header: {\n      select: 'data-testid cloud-monitoring-header',\n    },\n    visualMetricsQueryEditor: {\n      container: { input: 'data-testid cloud-monitoring-visual-metrics-query-editor' },\n    },\n    mqlMetricsQueryEditor: {\n      container: { input: 'data-testid cloud-monitoring-mql-query-editor' },\n    },\n    sloQueryEditor: {\n      container: {\n        input: 'data-testid cloud-monitoring-slo-query-editor',\n      },\n    },\n    promQlQueryEditor: {\n      container: {\n        input: 'data-testid cloud-monitoring-prom-ql-query-editor',\n      },\n    },\n  },\n};\n\nexport const selectors: { components: E2ESelectors<typeof components> } = {\n  components: components,\n};\n","// Code generated - EDITING IS FUTILE. DO NOT EDIT.\n//\n// Generated by:\n//     public/app/plugins/gen.go\n// Using jennies:\n//     TSTypesJenny\n//     PluginTsTypesJenny\n//\n// Run 'make gen-cue' from repository root to regenerate.\n\nimport * as common from '@grafana/schema';\n\nexport interface CloudMonitoringQuery extends common.DataQuery {\n  /**\n   * Aliases can be set to modify the legend labels. e.g. {{metric.label.xxx}}. See docs for more detail.\n   */\n  aliasBy?: string;\n  /**\n   * Time interval in milliseconds.\n   */\n  intervalMs?: number;\n  /**\n   * PromQL sub-query properties.\n   */\n  promQLQuery?: PromQLQuery;\n  /**\n   * SLO sub-query properties.\n   */\n  sloQuery?: SLOQuery;\n  /**\n   * GCM query type.\n   * queryType: #QueryType\n   * Time Series List sub-query properties.\n   */\n  timeSeriesList?: TimeSeriesList;\n  /**\n   * Time Series sub-query properties.\n   */\n  timeSeriesQuery?: TimeSeriesQuery;\n}\n\n/**\n * Defines the supported queryTypes.\n */\nexport enum QueryType {\n  ANNOTATION = 'annotation',\n  PROMQL = 'promQL',\n  SLO = 'slo',\n  TIME_SERIES_LIST = 'timeSeriesList',\n  TIME_SERIES_QUERY = 'timeSeriesQuery',\n}\n\n/**\n * Time Series List sub-query properties.\n */\nexport interface TimeSeriesList {\n  /**\n   * Alignment period to use when regularizing data. Defaults to cloud-monitoring-auto.\n   */\n  alignmentPeriod?: string;\n  /**\n   * Reducer applied across a set of time-series values. Defaults to REDUCE_NONE.\n   */\n  crossSeriesReducer: string;\n  /**\n   * Array of filters to query data by. Labels that can be filtered on are defined by the metric.\n   */\n  filters?: Array<string>;\n  /**\n   * Array of labels to group data by.\n   */\n  groupBys?: Array<string>;\n  /**\n   * Alignment function to be used. Defaults to ALIGN_MEAN.\n   */\n  perSeriesAligner?: string;\n  /**\n   * Preprocessor is not part of the API, but is used to store the preprocessor and not affect the UI for the rest of parameters\n   */\n  preprocessor?: PreprocessorType;\n  /**\n   * GCP project to execute the query against.\n   */\n  projectName: string;\n  /**\n   * Only present if a preprocessor is selected. Alignment period to use when regularizing data. Defaults to cloud-monitoring-auto.\n   */\n  secondaryAlignmentPeriod?: string;\n  /**\n   * Only present if a preprocessor is selected. Reducer applied across a set of time-series values. Defaults to REDUCE_NONE.\n   */\n  secondaryCrossSeriesReducer?: string;\n  /**\n   * Only present if a preprocessor is selected. Array of labels to group data by.\n   */\n  secondaryGroupBys?: Array<string>;\n  /**\n   * Only present if a preprocessor is selected. Alignment function to be used. Defaults to ALIGN_MEAN.\n   */\n  secondaryPerSeriesAligner?: string;\n  /**\n   * Annotation text.\n   */\n  text?: string;\n  /**\n   * Annotation title.\n   */\n  title?: string;\n  /**\n   * Data view, defaults to FULL.\n   */\n  view?: string;\n}\n\nexport const defaultTimeSeriesList: Partial<TimeSeriesList> = {\n  filters: [],\n  groupBys: [],\n  secondaryGroupBys: [],\n};\n\n/**\n * Types of pre-processor available. Defined by the metric.\n */\nexport enum PreprocessorType {\n  Delta = 'delta',\n  None = 'none',\n  Rate = 'rate',\n}\n\n/**\n * Time Series sub-query properties.\n */\nexport interface TimeSeriesQuery {\n  /**\n   * To disable the graphPeriod, it should explictly be set to 'disabled'.\n   */\n  graphPeriod?: ('disabled' | string);\n  /**\n   * GCP project to execute the query against.\n   */\n  projectName: string;\n  /**\n   * MQL query to be executed.\n   */\n  query: string;\n}\n\n/**\n * SLO sub-query properties.\n */\nexport interface SLOQuery {\n  /**\n   * Alignment period to use when regularizing data. Defaults to cloud-monitoring-auto.\n   */\n  alignmentPeriod?: string;\n  /**\n   * SLO goal value.\n   */\n  goal?: number;\n  /**\n   * Specific lookback period for the SLO.\n   */\n  lookbackPeriod?: string;\n  /**\n   * Alignment function to be used. Defaults to ALIGN_MEAN.\n   */\n  perSeriesAligner?: string;\n  /**\n   * GCP project to execute the query against.\n   */\n  projectName: string;\n  /**\n   * SLO selector.\n   */\n  selectorName: string;\n  /**\n   * ID for the service the SLO is in.\n   */\n  serviceId: string;\n  /**\n   * Name for the service the SLO is in.\n   */\n  serviceName: string;\n  /**\n   * ID for the SLO.\n   */\n  sloId: string;\n  /**\n   * Name of the SLO.\n   */\n  sloName: string;\n}\n\n/**\n * PromQL sub-query properties.\n */\nexport interface PromQLQuery {\n  /**\n   * PromQL expression/query to be executed.\n   */\n  expr: string;\n  /**\n   * GCP project to execute the query against.\n   */\n  projectName: string;\n  /**\n   * PromQL min step\n   */\n  step: string;\n}\n\n/**\n * @deprecated This type is for migration purposes only. Replaced by TimeSeriesList Metric sub-query properties.\n */\nexport interface MetricQuery {\n  /**\n   * Aliases can be set to modify the legend labels. e.g. {{metric.label.xxx}}. See docs for more detail.\n   */\n  aliasBy?: string;\n  /**\n   * Alignment period to use when regularizing data. Defaults to cloud-monitoring-auto.\n   */\n  alignmentPeriod?: string;\n  /**\n   * Reducer applied across a set of time-series values. Defaults to REDUCE_NONE.\n   */\n  crossSeriesReducer: string;\n  editorMode: string;\n  /**\n   * Array of filters to query data by. Labels that can be filtered on are defined by the metric.\n   */\n  filters?: Array<string>;\n  /**\n   * To disable the graphPeriod, it should explictly be set to 'disabled'.\n   */\n  graphPeriod?: ('disabled' | string);\n  /**\n   * Array of labels to group data by.\n   */\n  groupBys?: Array<string>;\n  metricKind?: MetricKind;\n  metricType: string;\n  /**\n   * Alignment function to be used. Defaults to ALIGN_MEAN.\n   */\n  perSeriesAligner?: string;\n  /**\n   * Preprocessor is not part of the API, but is used to store the preprocessor and not affect the UI for the rest of parameters\n   */\n  preprocessor?: PreprocessorType;\n  /**\n   * GCP project to execute the query against.\n   */\n  projectName: string;\n  /**\n   * MQL query to be executed.\n   */\n  query: string;\n  valueType?: string;\n  view?: string;\n}\n\nexport const defaultMetricQuery: Partial<MetricQuery> = {\n  filters: [],\n  groupBys: [],\n};\n\nexport enum MetricKind {\n  CUMULATIVE = 'CUMULATIVE',\n  DELTA = 'DELTA',\n  GAUGE = 'GAUGE',\n  METRIC_KIND_UNSPECIFIED = 'METRIC_KIND_UNSPECIFIED',\n}\n\nexport enum ValueTypes {\n  BOOL = 'BOOL',\n  DISTRIBUTION = 'DISTRIBUTION',\n  DOUBLE = 'DOUBLE',\n  INT64 = 'INT64',\n  MONEY = 'MONEY',\n  STRING = 'STRING',\n  VALUE_TYPE_UNSPECIFIED = 'VALUE_TYPE_UNSPECIFIED',\n}\n\nexport enum AlignmentTypes {\n  ALIGN_COUNT = 'ALIGN_COUNT',\n  ALIGN_COUNT_FALSE = 'ALIGN_COUNT_FALSE',\n  ALIGN_COUNT_TRUE = 'ALIGN_COUNT_TRUE',\n  ALIGN_DELTA = 'ALIGN_DELTA',\n  ALIGN_FRACTION_TRUE = 'ALIGN_FRACTION_TRUE',\n  ALIGN_INTERPOLATE = 'ALIGN_INTERPOLATE',\n  ALIGN_MAX = 'ALIGN_MAX',\n  ALIGN_MEAN = 'ALIGN_MEAN',\n  ALIGN_MIN = 'ALIGN_MIN',\n  ALIGN_NEXT_OLDER = 'ALIGN_NEXT_OLDER',\n  ALIGN_NONE = 'ALIGN_NONE',\n  ALIGN_PERCENTILE_05 = 'ALIGN_PERCENTILE_05',\n  ALIGN_PERCENTILE_50 = 'ALIGN_PERCENTILE_50',\n  ALIGN_PERCENTILE_95 = 'ALIGN_PERCENTILE_95',\n  ALIGN_PERCENTILE_99 = 'ALIGN_PERCENTILE_99',\n  ALIGN_PERCENT_CHANGE = 'ALIGN_PERCENT_CHANGE',\n  ALIGN_RATE = 'ALIGN_RATE',\n  ALIGN_STDDEV = 'ALIGN_STDDEV',\n  ALIGN_SUM = 'ALIGN_SUM',\n}\n\n/**\n * @deprecated Use TimeSeriesList instead. Legacy annotation query properties for migration purposes.\n */\nexport interface LegacyCloudMonitoringAnnotationQuery {\n  /**\n   * Array of filters to query data by. Labels that can be filtered on are defined by the metric.\n   */\n  filters: Array<string>;\n  metricKind: MetricKind;\n  metricType: string;\n  /**\n   * GCP project to execute the query against.\n   */\n  projectName: string;\n  /**\n   * Query refId.\n   */\n  refId: string;\n  /**\n   * Annotation text.\n   */\n  text: string;\n  /**\n   * Annotation title.\n   */\n  title: string;\n  valueType: string;\n}\n\nexport const defaultLegacyCloudMonitoringAnnotationQuery: Partial<LegacyCloudMonitoringAnnotationQuery> = {\n  filters: [],\n};\n\n/**\n * Query filter representation.\n */\nexport interface Filter {\n  /**\n   * Filter condition.\n   */\n  condition?: string;\n  /**\n   * Filter key.\n   */\n  key: string;\n  /**\n   * Filter operator.\n   */\n  operator: string;\n  /**\n   * Filter value.\n   */\n  value: string;\n}\n\nexport enum MetricFindQueryTypes {\n  Aggregations = 'aggregations',\n  Aligners = 'aligners',\n  AlignmentPeriods = 'alignmentPeriods',\n  DefaultProject = 'defaultProject',\n  LabelKeys = 'labelKeys',\n  LabelValues = 'labelValues',\n  MetricTypes = 'metricTypes',\n  Projects = 'projects',\n  ResourceTypes = 'resourceTypes',\n  SLO = 'slo',\n  SLOServices = 'sloServices',\n  Selectors = 'selectors',\n  Services = 'services',\n}\n\nexport interface GoogleCloudMonitoringDataQuery {}\n","import { debounce } from 'lodash';\nimport { useState } from 'react';\nimport * as React from 'react';\n\nimport { EditorField } from '@grafana/plugin-ui';\nimport { Input } from '@grafana/ui';\n\nexport interface Props {\n  refId: string;\n  onChange: (alias: string) => void;\n  value?: string;\n}\n\nexport const AliasBy = ({ refId, value = '', onChange }: Props) => {\n  const [alias, setAlias] = useState(value ?? '');\n\n  const propagateOnChange = debounce(onChange, 1000);\n\n  const onInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setAlias(e.currentTarget.value);\n    propagateOnChange(e.currentTarget.value);\n  };\n\n  return (\n    <EditorField label=\"Alias by\">\n      <Input id={`${refId}-alias-by`} value={alias} onChange={onInputChange} />\n    </EditorField>\n  );\n};\n","import { QueryType, MetricKind, ValueTypes } from './types/query';\n\n// not super excited about using uneven numbers, but this makes it align perfectly with rows that has two fields\nexport const INPUT_WIDTH = 71;\nexport const LABEL_WIDTH = 19;\nexport const INNER_LABEL_WIDTH = 14;\nexport const SELECT_WIDTH = 28;\n\nexport const ALIGNMENTS = [\n  {\n    text: 'none',\n    value: 'ALIGN_NONE',\n    valueTypes: [\n      ValueTypes.INT64,\n      ValueTypes.DOUBLE,\n      ValueTypes.MONEY,\n      ValueTypes.DISTRIBUTION,\n      ValueTypes.STRING,\n      ValueTypes.VALUE_TYPE_UNSPECIFIED,\n      ValueTypes.BOOL,\n    ],\n    metricKinds: [MetricKind.GAUGE],\n  },\n  {\n    text: 'delta',\n    value: 'ALIGN_DELTA',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.CUMULATIVE, MetricKind.DELTA],\n  },\n  {\n    text: 'rate',\n    value: 'ALIGN_RATE',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.CUMULATIVE, MetricKind.DELTA],\n  },\n  {\n    text: 'interpolate',\n    value: 'ALIGN_INTERPOLATE',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE],\n  },\n  {\n    text: 'next older',\n    value: 'ALIGN_NEXT_OLDER',\n    valueTypes: [\n      ValueTypes.INT64,\n      ValueTypes.DOUBLE,\n      ValueTypes.MONEY,\n      ValueTypes.DISTRIBUTION,\n      ValueTypes.STRING,\n      ValueTypes.VALUE_TYPE_UNSPECIFIED,\n      ValueTypes.BOOL,\n    ],\n    metricKinds: [MetricKind.GAUGE],\n  },\n  {\n    text: 'min',\n    value: 'ALIGN_MIN',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'max',\n    value: 'ALIGN_MAX',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'mean',\n    value: 'ALIGN_MEAN',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'count',\n    value: 'ALIGN_COUNT',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.BOOL],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'sum',\n    value: 'ALIGN_SUM',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'stddev',\n    value: 'ALIGN_STDDEV',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'count true',\n    value: 'ALIGN_COUNT_TRUE',\n    valueTypes: [ValueTypes.BOOL],\n    metricKinds: [MetricKind.GAUGE],\n  },\n  {\n    text: 'count false',\n    value: 'ALIGN_COUNT_FALSE',\n    valueTypes: [ValueTypes.BOOL],\n    metricKinds: [MetricKind.GAUGE],\n  },\n  {\n    text: 'fraction true',\n    value: 'ALIGN_FRACTION_TRUE',\n    valueTypes: [ValueTypes.BOOL],\n    metricKinds: [MetricKind.GAUGE],\n  },\n  {\n    text: 'percentile 99',\n    value: 'ALIGN_PERCENTILE_99',\n    valueTypes: [ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'percentile 95',\n    value: 'ALIGN_PERCENTILE_95',\n    valueTypes: [ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'percentile 50',\n    value: 'ALIGN_PERCENTILE_50',\n    valueTypes: [ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'percentile 05',\n    value: 'ALIGN_PERCENTILE_05',\n    valueTypes: [ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'percent change',\n    value: 'ALIGN_PERCENT_CHANGE',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n];\n\nexport const AGGREGATIONS = [\n  {\n    text: 'none',\n    value: 'REDUCE_NONE',\n    valueTypes: [\n      ValueTypes.INT64,\n      ValueTypes.DOUBLE,\n      ValueTypes.MONEY,\n      ValueTypes.DISTRIBUTION,\n      ValueTypes.BOOL,\n      ValueTypes.STRING,\n    ],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE, MetricKind.METRIC_KIND_UNSPECIFIED],\n  },\n  {\n    text: 'mean',\n    value: 'REDUCE_MEAN',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE],\n  },\n  {\n    text: 'min',\n    value: 'REDUCE_MIN',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE, MetricKind.METRIC_KIND_UNSPECIFIED],\n  },\n  {\n    text: 'max',\n    value: 'REDUCE_MAX',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE, MetricKind.METRIC_KIND_UNSPECIFIED],\n  },\n  {\n    text: 'sum',\n    value: 'REDUCE_SUM',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE, MetricKind.METRIC_KIND_UNSPECIFIED],\n  },\n  {\n    text: 'std. dev.',\n    value: 'REDUCE_STDDEV',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE, MetricKind.METRIC_KIND_UNSPECIFIED],\n  },\n  {\n    text: 'count',\n    value: 'REDUCE_COUNT',\n    valueTypes: [\n      ValueTypes.INT64,\n      ValueTypes.DOUBLE,\n      ValueTypes.MONEY,\n      ValueTypes.DISTRIBUTION,\n      ValueTypes.BOOL,\n      ValueTypes.STRING,\n    ],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE],\n  },\n  {\n    text: 'count true',\n    value: 'REDUCE_COUNT_TRUE',\n    valueTypes: [ValueTypes.BOOL],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'count false',\n    value: 'REDUCE_COUNT_FALSE',\n    valueTypes: [ValueTypes.BOOL],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: '99th percentile',\n    value: 'REDUCE_PERCENTILE_99',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE],\n  },\n  {\n    text: '95th percentile',\n    value: 'REDUCE_PERCENTILE_95',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE],\n  },\n  {\n    text: '50th percentile',\n    value: 'REDUCE_PERCENTILE_50',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE],\n  },\n  {\n    text: '5th percentile',\n    value: 'REDUCE_PERCENTILE_05',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE],\n  },\n];\n\nexport type periodOption = {\n  text: string;\n  value: string;\n  hidden?: boolean;\n};\n\nexport const ALIGNMENT_PERIODS: periodOption[] = [\n  { text: 'grafana auto', value: 'grafana-auto' },\n  { text: 'stackdriver auto', value: 'stackdriver-auto', hidden: true },\n  { text: 'cloud monitoring auto', value: 'cloud-monitoring-auto' },\n  { text: '1m', value: '+60s' },\n  { text: '2m', value: '+120s' },\n  { text: '5m', value: '+300s' },\n  { text: '10m', value: '+600s' },\n  { text: '30m', value: '+1800s' },\n  { text: '1h', value: '+3600s' },\n  { text: '3h', value: '+7200s' },\n  { text: '6h', value: '+21600s' },\n  { text: '1d', value: '+86400s' },\n  { text: '3d', value: '+259200s' },\n  { text: '1w', value: '+604800s' },\n];\n\nexport const GRAPH_PERIODS: periodOption[] = [\n  { text: 'auto', value: 'auto' },\n  { text: '1m', value: '1m' },\n  { text: '2m', value: '2m' },\n  { text: '5m', value: '5m' },\n  { text: '10m', value: '10m' },\n  { text: '30m', value: '30m' },\n  { text: '1h', value: '1h' },\n  { text: '3h', value: '3h' },\n  { text: '6h', value: '6h' },\n  { text: '1d', value: '1d' },\n  { text: '3d', value: '3d' },\n  { text: '1w', value: '1w' },\n];\n\n// Usable units: ns, us, ms, s, m, h\n// ref. https://cloud.google.com/stackdriver/docs/solutions/slo-monitoring/api/timeseries-selectors#tss-names-args\nexport const LOOKBACK_PERIODS: periodOption[] = [\n  { text: '1m', value: '1m' },\n  { text: '2m', value: '2m' },\n  { text: '5m', value: '5m' },\n  { text: '10m', value: '10m' },\n  { text: '30m', value: '30m' },\n  { text: '1h', value: '1h' },\n  { text: '3h', value: '3h' },\n  { text: '6h', value: '6h' },\n  { text: '24h', value: '24h' },\n  { text: '72h', value: '72h' },\n];\n\nexport const SYSTEM_LABELS = [\n  'metadata.system_labels.cloud_account',\n  'metadata.system_labels.name',\n  'metadata.system_labels.region',\n  'metadata.system_labels.state',\n  'metadata.system_labels.instance_group',\n  'metadata.system_labels.node_name',\n  'metadata.system_labels.service_name',\n  'metadata.system_labels.top_level_controller_type',\n  'metadata.system_labels.top_level_controller_name',\n  'metadata.system_labels.container_image',\n];\n\nexport const SLO_BURN_RATE_SELECTOR_NAME = 'select_slo_burn_rate';\n\nexport const SELECTORS = [\n  { label: 'SLI Value', value: 'select_slo_health' },\n  { label: 'SLO Compliance', value: 'select_slo_compliance' },\n  { label: 'SLO Error Budget Remaining', value: 'select_slo_budget_fraction' },\n  { label: 'SLO Burn Rate', value: SLO_BURN_RATE_SELECTOR_NAME },\n];\n\nexport const QUERY_TYPES = [\n  { label: 'Builder', value: QueryType.TIME_SERIES_LIST },\n  { label: 'MQL', value: QueryType.TIME_SERIES_QUERY },\n  { label: 'Service Level Objectives (SLO)', value: QueryType.SLO },\n  { label: 'PromQL', value: QueryType.PROMQL },\n];\n","import { useEffect, useMemo, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/plugin-ui';\nimport { Select } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\n\nexport interface Props {\n  refId: string;\n  datasource: CloudMonitoringDatasource;\n  onChange: (projectName: string) => void;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  projectName: string;\n}\n\nexport function Project({ refId, projectName, datasource, onChange, templateVariableOptions }: Props) {\n  const [projects, setProjects] = useState<Array<SelectableValue<string>>>([]);\n  useEffect(() => {\n    datasource.getProjects().then((projects) => setProjects(projects));\n  }, [datasource]);\n\n  const projectsWithTemplateVariables = useMemo(\n    () => [\n      {\n        label: 'Template Variables',\n        options: templateVariableOptions,\n      },\n      ...projects,\n    ],\n    [projects, templateVariableOptions]\n  );\n\n  return (\n    <EditorField label=\"Project\">\n      <Select\n        width=\"auto\"\n        allowCustomValue\n        formatCreateLabel={(v) => `Use project: ${v}`}\n        onChange={({ value }) => onChange(value!)}\n        options={projectsWithTemplateVariables}\n        value={{ value: projectName, label: projectName }}\n        placeholder=\"Select Project\"\n        inputId={`${refId}-project`}\n      />\n    </EditorField>\n  );\n}\n","import { chunk, initial, startCase, uniqBy } from 'lodash';\n\nimport { rangeUtil } from '@grafana/data';\nimport { getTemplateSrv, TemplateSrv } from '@grafana/runtime';\n\nimport { AGGREGATIONS, ALIGNMENTS, SYSTEM_LABELS } from './constants';\nimport CloudMonitoringDatasource from './datasource';\nimport { AlignmentTypes, PreprocessorType, TimeSeriesList, MetricKind, ValueTypes } from './types/query';\nimport { CustomMetaData, MetricDescriptor } from './types/types';\n\nexport const extractServicesFromMetricDescriptors = (metricDescriptors: MetricDescriptor[]) =>\n  uniqBy(metricDescriptors, 'service');\n\nexport const getMetricTypesByService = (metricDescriptors: MetricDescriptor[], service: string) =>\n  metricDescriptors.filter((m: MetricDescriptor) => m.service === service);\n\nexport const getMetricTypes = (\n  metricDescriptors: MetricDescriptor[],\n  metricType: string,\n  interpolatedMetricType: string,\n  selectedService: string\n) => {\n  const metricTypes = getMetricTypesByService(metricDescriptors, selectedService).map((m) => ({\n    value: m.type,\n    name: m.displayName,\n  }));\n  const metricTypeExistInArray = metricTypes.some(\n    (m: { value: string; name: string }) => m.value === interpolatedMetricType\n  );\n  const metricTypeByService = metricTypes.length ? metricTypes[0].value : '';\n  const selectedMetricType = metricTypeExistInArray ? metricType : metricTypeByService;\n  return {\n    metricTypes,\n    selectedMetricType,\n  };\n};\n\nexport const getAlignmentOptionsByMetric = (\n  metricValueType?: string,\n  metricKind?: string,\n  preprocessor?: PreprocessorType\n) => {\n  if (preprocessor && preprocessor === PreprocessorType.Rate) {\n    metricKind = MetricKind.GAUGE;\n  }\n\n  return !metricValueType\n    ? []\n    : ALIGNMENTS.filter((i) => {\n        return (\n          i.valueTypes.indexOf(metricValueType as ValueTypes) !== -1 &&\n          i.metricKinds.indexOf(metricKind as MetricKind) !== -1\n        );\n      });\n};\n\nexport const getAggregationOptionsByMetric = (valueType: ValueTypes, metricKind: MetricKind) => {\n  return !metricKind\n    ? []\n    : AGGREGATIONS.filter((i) => {\n        return i.valueTypes.indexOf(valueType) !== -1 && i.metricKinds.indexOf(metricKind) !== -1;\n      });\n};\n\nexport const getLabelKeys = async (\n  datasource: CloudMonitoringDatasource,\n  selectedMetricType: string,\n  projectName: string\n) => {\n  const refId = 'handleLabelKeysQuery';\n  const labels = await datasource.getLabels(selectedMetricType, refId, projectName);\n  return [...Object.keys(labels), ...SYSTEM_LABELS];\n};\n\nexport const getAlignmentPickerData = (\n  valueType: string | undefined = ValueTypes.DOUBLE,\n  metricKind: string | undefined = MetricKind.GAUGE,\n  perSeriesAligner: string | undefined = AlignmentTypes.ALIGN_MEAN,\n  preprocessor?: PreprocessorType\n) => {\n  const templateSrv: TemplateSrv = getTemplateSrv();\n  const alignOptions = getAlignmentOptionsByMetric(valueType, metricKind, preprocessor).map((option) => ({\n    ...option,\n    label: option.text,\n  }));\n  if (!alignOptions.some((o: { value: string }) => o.value === templateSrv.replace(perSeriesAligner))) {\n    perSeriesAligner = alignOptions.length > 0 ? alignOptions[0].value : AlignmentTypes.ALIGN_MEAN;\n  }\n  return { alignOptions, perSeriesAligner };\n};\n\nexport const labelsToGroupedOptions = (groupBys: string[]) => {\n  const groups = groupBys.reduce<\n    Record<\n      string,\n      Array<{\n        value: string;\n        label: string;\n      }>\n    >\n  >((acc, curr) => {\n    const arr = curr.split('.').map(startCase);\n    const group = (arr.length === 2 ? arr : initial(arr)).join(' ');\n    const option = {\n      value: curr,\n      label: curr,\n    };\n    if (acc[group]) {\n      acc[group] = [...acc[group], option];\n    } else {\n      acc[group] = [option];\n    }\n    return acc;\n  }, {});\n  return Object.entries(groups).map(([label, options]) => ({ label, options, expanded: true }), []);\n};\n\nexport const stringArrayToFilters = (filterArray: string[]) =>\n  chunk(filterArray, 4).map(([key, operator, value, condition = 'AND']) => ({\n    key,\n    operator,\n    value,\n    condition,\n  }));\n\nexport const alignmentPeriodLabel = (customMetaData: CustomMetaData, datasource: CloudMonitoringDatasource) => {\n  const { perSeriesAligner, alignmentPeriod } = customMetaData;\n  if (!alignmentPeriod || !perSeriesAligner) {\n    return '';\n  }\n\n  const alignment = ALIGNMENTS.find((ap) => ap.value === datasource.templateSrv.replace(perSeriesAligner));\n  const seconds = parseInt(alignmentPeriod, 10);\n  const hms = rangeUtil.secondsToHms(seconds);\n  return `${hms} interval (${alignment?.text ?? ''})`;\n};\n\nexport const getMetricType = (query?: TimeSeriesList) => {\n  const metricTypeKey = query?.filters?.findIndex((f) => f === 'metric.type')!;\n  // filters are in the format [key, operator, value] so we need to add 2 to get the value\n  const metricType = query?.filters?.[metricTypeKey + 2];\n  return metricType || '';\n};\n\nexport const setMetricType = (query: TimeSeriesList, metricType: string) => {\n  if (!query.filters) {\n    query.filters = ['metric.type', '=', metricType];\n    return query;\n  }\n  const metricTypeKey = query?.filters?.findIndex((f) => f === 'metric.type')!;\n  if (metricTypeKey === -1) {\n    query.filters.push('metric.type', '=', metricType);\n  } else {\n    // filters are in the format [key, operator, value] so we need to add 2 to get the value\n    query.filters![metricTypeKey + 2] = metricType;\n  }\n  return query;\n};\n","import { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/plugin-ui';\nimport { Select } from '@grafana/ui';\n\nimport { getAggregationOptionsByMetric } from '../functions';\nimport { ValueTypes } from '../types/query';\nimport { MetricDescriptor } from '../types/types';\n\nexport interface Props {\n  refId: string;\n  onChange: (metricDescriptor: string) => void;\n  metricDescriptor?: MetricDescriptor;\n  crossSeriesReducer: string;\n  groupBys: string[];\n  templateVariableOptions: Array<SelectableValue<string>>;\n}\n\nexport const Aggregation = (props: Props) => {\n  const aggOptions = useAggregationOptionsByMetric(props);\n  const selected = useSelectedFromOptions(aggOptions, props);\n\n  return (\n    <EditorField\n      label=\"Group by function\"\n      data-testid=\"cloud-monitoring-aggregation\"\n      tooltip={\n        'Aggregation function used on the metric data. Defaults to none for scalar data and mean for distribution data. Not applying an aggregation to distribution data may lead to performance issues.'\n      }\n    >\n      <Select\n        width=\"auto\"\n        onChange={({ value }) => props.onChange(value!)}\n        value={selected}\n        options={[\n          {\n            label: 'Template Variables',\n            options: props.templateVariableOptions,\n          },\n          {\n            label: 'Aggregations',\n            expanded: true,\n            options: aggOptions,\n          },\n        ]}\n        placeholder=\"Select Reducer\"\n        inputId={`${props.refId}-group-by-function`}\n        menuPlacement=\"top\"\n      />\n    </EditorField>\n  );\n};\n\nconst useAggregationOptionsByMetric = ({ metricDescriptor }: Props): Array<SelectableValue<string>> => {\n  const valueType = metricDescriptor?.valueType;\n  const metricKind = metricDescriptor?.metricKind;\n\n  return useMemo(() => {\n    if (!valueType || !metricKind) {\n      return [];\n    }\n\n    return getAggregationOptionsByMetric(valueType as ValueTypes, metricKind).map((a) => ({\n      ...a,\n      label: a.text,\n    }));\n  }, [valueType, metricKind]);\n};\n\nconst useSelectedFromOptions = (aggOptions: Array<SelectableValue<string>>, props: Props) => {\n  return useMemo(() => {\n    const allOptions = [...aggOptions, ...props.templateVariableOptions];\n    return allOptions.find((s) => s.value === props.crossSeriesReducer);\n  }, [aggOptions, props.crossSeriesReducer, props.templateVariableOptions]);\n};\n","import { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField, EditorFieldGroup } from '@grafana/plugin-ui';\nimport { MultiSelect } from '@grafana/ui';\n\nimport { SYSTEM_LABELS } from '../constants';\nimport { labelsToGroupedOptions } from '../functions';\nimport { TimeSeriesList } from '../types/query';\nimport { MetricDescriptor } from '../types/types';\n\nimport { Aggregation } from './Aggregation';\n\nexport interface Props {\n  refId: string;\n  variableOptionGroup: SelectableValue<string>;\n  labels: string[];\n  metricDescriptor?: MetricDescriptor;\n  onChange: (query: TimeSeriesList) => void;\n  query: TimeSeriesList;\n}\n\nexport const GroupBy = ({\n  refId,\n  labels: groupBys = [],\n  query,\n  onChange,\n  variableOptionGroup,\n  metricDescriptor,\n}: Props) => {\n  const options = useMemo(\n    () => [variableOptionGroup, ...labelsToGroupedOptions([...groupBys, ...SYSTEM_LABELS])],\n    [groupBys, variableOptionGroup]\n  );\n\n  return (\n    <EditorFieldGroup>\n      <EditorField\n        label=\"Group by\"\n        tooltip=\"You can reduce the amount of data returned for a metric by combining different time series. To combine multiple time series, you can specify a grouping and a function. Grouping is done on the basis of labels. The grouping function is used to combine the time series in the group into a single time series.\"\n      >\n        <MultiSelect\n          allowCustomValue\n          inputId={`${refId}-group-by`}\n          width=\"auto\"\n          placeholder=\"Choose label\"\n          options={options}\n          value={query.groupBys ?? []}\n          onChange={(options) => {\n            onChange({ ...query, groupBys: options.map((o) => o.value!) });\n          }}\n          menuPlacement=\"top\"\n        />\n      </EditorField>\n      <Aggregation\n        metricDescriptor={metricDescriptor}\n        templateVariableOptions={variableOptionGroup.options}\n        crossSeriesReducer={query.crossSeriesReducer}\n        groupBys={query.groupBys ?? []}\n        onChange={(crossSeriesReducer) => onChange({ ...query, crossSeriesReducer })}\n        refId={refId}\n      />\n    </EditorFieldGroup>\n  );\n};\n","import { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Select } from '@grafana/ui';\n\nimport { getAlignmentPickerData } from '../functions';\nimport { PreprocessorType, SLOQuery, TimeSeriesList } from '../types/query';\nimport { MetricDescriptor } from '../types/types';\n\nexport interface Props {\n  inputId: string;\n  onChange: (query: TimeSeriesList | SLOQuery) => void;\n  query: TimeSeriesList | SLOQuery;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  metricDescriptor?: MetricDescriptor;\n  preprocessor?: PreprocessorType;\n}\n\nexport const AlignmentFunction = ({\n  inputId,\n  query,\n  templateVariableOptions,\n  onChange,\n  metricDescriptor,\n  preprocessor,\n}: Props) => {\n  const { perSeriesAligner: psa } = query;\n  let { valueType, metricKind } = metricDescriptor || {};\n\n  const { perSeriesAligner, alignOptions } = useMemo(\n    () => getAlignmentPickerData(valueType, metricKind, psa, preprocessor),\n    [valueType, metricKind, psa, preprocessor]\n  );\n\n  return (\n    <Select\n      onChange={({ value }) => onChange({ ...query, perSeriesAligner: value! })}\n      value={[...alignOptions, ...templateVariableOptions].find((s) => s.value === perSeriesAligner)}\n      options={[\n        {\n          label: 'Template Variables',\n          options: templateVariableOptions,\n        },\n        {\n          label: 'Alignment options',\n          expanded: true,\n          options: alignOptions,\n        },\n      ]}\n      placeholder=\"Select Alignment\"\n      inputId={inputId}\n      menuPlacement=\"top\"\n    />\n  );\n};\n","import { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Select } from '@grafana/ui';\n\nimport { periodOption } from '../constants';\n\nexport interface Props {\n  inputId: string;\n  onChange: (period: string) => void;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  aligmentPeriods: periodOption[];\n  selectWidth?: number;\n  category?: string;\n  disabled?: boolean;\n  current?: string;\n}\n\nexport function PeriodSelect({\n  inputId,\n  templateVariableOptions,\n  onChange,\n  current,\n  disabled,\n  aligmentPeriods,\n}: Props) {\n  const options = useMemo(\n    () =>\n      aligmentPeriods.map((ap) => ({\n        ...ap,\n        label: ap.text,\n      })),\n    [aligmentPeriods]\n  );\n  const visibleOptions = useMemo(() => options.filter((ap) => !ap.hidden), [options]);\n\n  return (\n    <Select\n      width=\"auto\"\n      onChange={({ value }) => onChange(value!)}\n      value={[...options, ...templateVariableOptions].find((s) => s.value === current)}\n      options={[\n        {\n          label: 'Template Variables',\n          options: templateVariableOptions,\n        },\n        {\n          label: 'Aggregations',\n          expanded: true,\n          options: visibleOptions,\n        },\n      ]}\n      placeholder=\"Select Period\"\n      inputId={inputId}\n      disabled={disabled}\n      allowCustomValue\n      menuPlacement=\"top\"\n    />\n  );\n}\n","import { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField, EditorFieldGroup } from '@grafana/plugin-ui';\n\nimport { ALIGNMENT_PERIODS } from '../constants';\nimport CloudMonitoringDatasource from '../datasource';\nimport { alignmentPeriodLabel } from '../functions';\nimport { PreprocessorType, TimeSeriesList } from '../types/query';\nimport { CustomMetaData, MetricDescriptor } from '../types/types';\n\nimport { AlignmentFunction } from './AlignmentFunction';\nimport { PeriodSelect } from './PeriodSelect';\n\nexport interface Props {\n  refId: string;\n  onChange: (query: TimeSeriesList) => void;\n  query: TimeSeriesList;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  customMetaData: CustomMetaData;\n  datasource: CloudMonitoringDatasource;\n  metricDescriptor?: MetricDescriptor;\n  preprocessor?: PreprocessorType;\n}\n\nexport const Alignment = ({\n  refId,\n  templateVariableOptions,\n  onChange,\n  query,\n  customMetaData,\n  datasource,\n  metricDescriptor,\n  preprocessor,\n}: Props) => {\n  const alignmentLabel = useMemo(() => alignmentPeriodLabel(customMetaData, datasource), [customMetaData, datasource]);\n  return (\n    <EditorFieldGroup>\n      <EditorField\n        label=\"Alignment function\"\n        tooltip=\"The process of alignment consists of collecting all data points received in a fixed length of time, applying a function to combine those data points, and assigning a timestamp to the result.\"\n      >\n        <AlignmentFunction\n          inputId={`${refId}-alignment-function`}\n          templateVariableOptions={templateVariableOptions}\n          query={query}\n          onChange={(q) => onChange({ ...query, ...q })}\n          metricDescriptor={metricDescriptor}\n          preprocessor={preprocessor}\n        />\n      </EditorField>\n      <EditorField label=\"Alignment period\" tooltip={alignmentLabel}>\n        <PeriodSelect\n          inputId={`${refId}-alignment-period`}\n          templateVariableOptions={templateVariableOptions}\n          current={query.alignmentPeriod}\n          onChange={(period) => onChange({ ...query, alignmentPeriod: period })}\n          aligmentPeriods={ALIGNMENT_PERIODS}\n        />\n      </EditorField>\n    </EditorFieldGroup>\n  );\n};\n","import { useMemo } from 'react';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { AccessoryButton, EditorField, EditorList, EditorRow } from '@grafana/plugin-ui';\nimport { HorizontalGroup, Select } from '@grafana/ui';\n\nimport { labelsToGroupedOptions, stringArrayToFilters } from '../functions';\n\nexport interface Props {\n  labels: { [key: string]: string[] };\n  filters: string[];\n  onChange: (filters: string[]) => void;\n  variableOptionGroup: SelectableValue<string>;\n}\n\ninterface Filter {\n  key: string;\n  operator: string;\n  value: string;\n  condition: string;\n}\n\nconst DEFAULT_OPERATOR = '=';\nconst DEFAULT_CONDITION = 'AND';\n\nconst filtersToStringArray = (filters: Filter[]) =>\n  filters.flatMap(({ key, operator, value, condition }) => [key, operator, value, condition]).slice(0, -1);\n\nconst operators = ['=', '!=', '=~', '!=~'].map(toOption);\n\n// These keys are not editable as labels but they have its own selector.\n// For example the 'metric.type' is set with the metric name selector.\nconst protectedFilterKeys = ['metric.type'];\n\nexport const LabelFilter = ({ labels = {}, filters: filterArray, onChange: _onChange, variableOptionGroup }: Props) => {\n  const rawFilters: Filter[] = stringArrayToFilters(filterArray);\n  const filters = rawFilters.filter(({ key }) => !protectedFilterKeys.includes(key));\n  const protectedFilters = rawFilters.filter(({ key }) => protectedFilterKeys.includes(key));\n\n  const options = useMemo(\n    () => [variableOptionGroup, ...labelsToGroupedOptions(Object.keys(labels))],\n    [labels, variableOptionGroup]\n  );\n\n  const getOptions = ({ key = '', value = '' }: Partial<Filter>) => {\n    // Add the current key and value as options if they are manually entered\n    const keyPresent = options.some((op) => {\n      if (op.options) {\n        return options.some((opp) => opp.label === key);\n      }\n      return op.label === key;\n    });\n    if (!keyPresent) {\n      options.push({ label: key, value: key });\n    }\n\n    const valueOptions = labels.hasOwnProperty(key)\n      ? [variableOptionGroup, ...labels[key].map(toOption)]\n      : [variableOptionGroup];\n    const valuePresent = valueOptions.some((op) => op.label === value);\n    if (!valuePresent) {\n      valueOptions.push({ label: value, value });\n    }\n\n    return { options, valueOptions };\n  };\n\n  const onChange = (items: Array<Partial<Filter>>) => {\n    const filters = items.concat(protectedFilters).map(({ key, operator, value, condition }) => ({\n      key: key || '',\n      operator: operator || DEFAULT_OPERATOR,\n      value: value || '',\n      condition: condition || DEFAULT_CONDITION,\n    }));\n    _onChange(filtersToStringArray(filters));\n  };\n\n  const renderItem = (item: Partial<Filter>, onChangeItem: (item: Filter) => void, onDeleteItem: () => void) => {\n    const { key = '', operator = DEFAULT_OPERATOR, value = '', condition = DEFAULT_CONDITION } = item;\n    const { options, valueOptions } = getOptions(item);\n\n    return (\n      <HorizontalGroup spacing=\"xs\" width=\"auto\">\n        <Select\n          aria-label=\"Filter label key\"\n          formatCreateLabel={(v) => `Use label key: ${v}`}\n          allowCustomValue\n          value={key}\n          options={options}\n          onChange={({ value: key = '' }) => onChangeItem({ key, operator, value, condition })}\n        />\n        <Select\n          value={operator}\n          options={operators}\n          onChange={({ value: operator = DEFAULT_OPERATOR }) => onChangeItem({ key, operator, value, condition })}\n        />\n        <Select\n          aria-label=\"Filter label value\"\n          placeholder=\"add filter value\"\n          formatCreateLabel={(v) => `Use label value: ${v}`}\n          allowCustomValue\n          value={value}\n          options={valueOptions}\n          onChange={({ value = '' }) => onChangeItem({ key, operator, value, condition })}\n        />\n        <AccessoryButton aria-label=\"Remove\" icon=\"times\" variant=\"secondary\" onClick={onDeleteItem} type=\"button\" />\n      </HorizontalGroup>\n    );\n  };\n\n  return (\n    <EditorRow>\n      <EditorField\n        label=\"Filter\"\n        tooltip=\"To reduce the amount of data charted, apply a filter. A filter has three components: a label, a comparison, and a value. The comparison can be an equality, inequality, or regular expression.\"\n      >\n        <EditorList items={filters} renderItem={renderItem} onChange={onChange} />\n      </EditorField>\n    </EditorRow>\n  );\n};\n","import { Alert } from '@grafana/ui';\n\nexport const AnnotationsHelp = () => {\n  return (\n    <Alert severity=\"info\" title=\"Annotation Query Format\">\n      <div>\n        <p>\n          An annotation is an event that is overlaid on top of graphs. Annotation rendering is expensive so it is\n          important to limit the number of rows returned.{' '}\n        </p>\n        <p>\n          The Title and Text fields support templating and can use data returned from the query. For example, the Title\n          field could have the following text:\n        </p>\n        <code>\n          {`${'{{metric.type}}'}`} has value: {`${'{{metric.value}}'}`}\n        </code>\n        <p>\n          Example Result: <code>monitoring.googleapis.com/uptime_check/http_status has this value: 502</code>\n        </p>\n        <span>Patterns:</span>\n        <p>\n          <code>{`${'{{metric.value}}'}`}</code> = value of the metric/point\n        </p>\n        <p>\n          <code>{`${'{{metric.type}}'}`}</code> = metric type e.g. compute.googleapis.com/instance/cpu/usage_time\n        </p>\n        <p>\n          <code>{`${'{{metric.name}}'}`}</code> = name part of metric e.g. instance/cpu/usage_time\n        </p>\n        <p>\n          <code>{`${'{{metric.service}}'}`}</code> = service part of metric e.g. compute\n        </p>\n        <p>\n          <code>{`${'{{metric.label.label_name}}'}`}</code> = Metric label metadata e.g. metric.label.instance_name\n        </p>\n        <p>\n          <code>{`${'{{resource.label.label_name}}'}`}</code> = Resource label metadata e.g. resource.label.zone\n        </p>\n      </div>\n    </Alert>\n  );\n};\n","import { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/plugin-ui';\nimport { Select } from '@grafana/ui';\n\nimport { LOOKBACK_PERIODS } from '../constants';\n\nexport interface Props {\n  refId: string;\n  onChange: (lookbackPeriod: string) => void;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  current?: string;\n}\n\nexport const LookbackPeriodSelect = ({ refId, current, templateVariableOptions, onChange }: Props) => {\n  const options = LOOKBACK_PERIODS.map((lp) => ({\n    ...lp,\n    label: lp.text,\n  }));\n  if (current && !options.find((op) => op.value === current)) {\n    options.push({ label: current, text: current, value: current, hidden: false });\n  }\n  const visibleOptions = options.filter((lp) => !lp.hidden);\n\n  return (\n    <EditorField label=\"Lookback period\" htmlFor={`${refId}-lookback-period`}>\n      <Select\n        inputId={`${refId}-lookback-period`}\n        width=\"auto\"\n        allowCustomValue\n        value={[...options, ...templateVariableOptions].find((s) => s.value === current)}\n        options={[\n          {\n            label: 'Template Variables',\n            options: templateVariableOptions,\n          },\n          {\n            label: 'Predefined periods',\n            expanded: true,\n            options: visibleOptions,\n          },\n        ]}\n        onChange={({ value }) => onChange(value!)}\n      />\n    </EditorField>\n  );\n};\n","import { useEffect, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/plugin-ui';\nimport { Select } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { SLOQuery } from '../types/query';\n\nexport interface Props {\n  refId: string;\n  onChange: (query: SLOQuery) => void;\n  query: SLOQuery;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  datasource: CloudMonitoringDatasource;\n}\n\nexport const SLO = ({ refId, query, templateVariableOptions, onChange, datasource }: Props) => {\n  const [slos, setSLOs] = useState<Array<SelectableValue<string>>>([]);\n  const { projectName, serviceId } = query;\n\n  useEffect(() => {\n    if (!projectName || !serviceId) {\n      return;\n    }\n\n    datasource.getServiceLevelObjectives(projectName, serviceId).then((sloIds: Array<SelectableValue<string>>) => {\n      setSLOs([\n        {\n          label: 'Template Variables',\n          options: templateVariableOptions,\n        },\n        ...sloIds,\n      ]);\n    });\n  }, [datasource, projectName, serviceId, templateVariableOptions]);\n\n  return (\n    <EditorField label=\"SLO\">\n      <Select\n        inputId={`${refId}-slo`}\n        width=\"auto\"\n        allowCustomValue\n        value={query?.sloId && { value: query?.sloId, label: query?.sloName || query?.sloId }}\n        placeholder=\"Select SLO\"\n        options={slos}\n        onChange={async ({ value: sloId = '', label: sloName = '' }) => {\n          const slos = await datasource.getServiceLevelObjectives(projectName, serviceId);\n          const slo = slos.find(({ value }) => value === datasource.templateSrv.replace(sloId));\n          onChange({ ...query, sloId, sloName, goal: slo?.goal });\n        }}\n      />\n    </EditorField>\n  );\n};\n","import { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/plugin-ui';\nimport { Select } from '@grafana/ui';\n\nimport { SELECTORS } from '../constants';\nimport CloudMonitoringDatasource from '../datasource';\nimport { SLOQuery } from '../types/query';\n\nexport interface Props {\n  refId: string;\n  onChange: (query: SLOQuery) => void;\n  query: SLOQuery;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  datasource: CloudMonitoringDatasource;\n}\n\nexport const Selector = ({ refId, query, templateVariableOptions, onChange, datasource }: Props) => {\n  return (\n    <EditorField label=\"Selector\" htmlFor={`${refId}-slo-selector`}>\n      <Select\n        inputId={`${refId}-slo-selector`}\n        width=\"auto\"\n        allowCustomValue\n        value={[...SELECTORS, ...templateVariableOptions].find((s) => s.value === query?.selectorName)}\n        options={[\n          {\n            label: 'Template Variables',\n            options: templateVariableOptions,\n          },\n          ...SELECTORS,\n        ]}\n        onChange={({ value: selectorName }) => onChange({ ...query, selectorName: selectorName ?? '' })}\n      />\n    </EditorField>\n  );\n};\n","import { useEffect, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/plugin-ui';\nimport { Select } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { SLOQuery } from '../types/query';\n\nexport interface Props {\n  refId: string;\n  onChange: (query: SLOQuery) => void;\n  query: SLOQuery;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  datasource: CloudMonitoringDatasource;\n}\n\nexport const Service = ({ refId, query, templateVariableOptions, onChange, datasource }: Props) => {\n  const [services, setServices] = useState<Array<SelectableValue<string>>>([]);\n  const { projectName } = query;\n\n  useEffect(() => {\n    if (!projectName) {\n      return;\n    }\n\n    datasource.getSLOServices(projectName).then((services: Array<SelectableValue<string>>) => {\n      setServices([\n        {\n          label: 'Template Variables',\n          options: templateVariableOptions,\n        },\n        ...services,\n      ]);\n    });\n  }, [datasource, projectName, templateVariableOptions]);\n\n  return (\n    <EditorField label=\"Service\">\n      <Select\n        inputId={`${refId}-slo-service`}\n        width=\"auto\"\n        allowCustomValue\n        value={query?.serviceId && { value: query?.serviceId, label: query?.serviceName || query?.serviceId }}\n        placeholder=\"Select service\"\n        options={services}\n        onChange={({ value: serviceId = '', label: serviceName = '' }) =>\n          onChange({ ...query, serviceId, serviceName, sloId: '' })\n        }\n      />\n    </EditorField>\n  );\n};\n","import { useMemo } from 'react';\nimport * as React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField, EditorFieldGroup, EditorRow } from '@grafana/plugin-ui';\n\nimport { ALIGNMENT_PERIODS, SLO_BURN_RATE_SELECTOR_NAME } from '../constants';\nimport CloudMonitoringDatasource from '../datasource';\nimport { selectors } from '../e2e/selectors';\nimport { alignmentPeriodLabel } from '../functions';\nimport { AlignmentTypes, SLOQuery } from '../types/query';\nimport { CustomMetaData } from '../types/types';\n\nimport { AliasBy } from './AliasBy';\nimport { LookbackPeriodSelect } from './LookbackPeriodSelect';\nimport { PeriodSelect } from './PeriodSelect';\nimport { Project } from './Project';\nimport { SLO } from './SLO';\nimport { Selector } from './Selector';\nimport { Service } from './Service';\n\nexport interface Props {\n  refId: string;\n  customMetaData: CustomMetaData;\n  variableOptionGroup: SelectableValue<string>;\n  onChange: (query: SLOQuery) => void;\n  onRunQuery: () => void;\n  query: SLOQuery;\n  datasource: CloudMonitoringDatasource;\n  aliasBy?: string;\n  onChangeAliasBy: (aliasBy: string) => void;\n}\n\nexport const defaultQuery: (dataSource: CloudMonitoringDatasource) => SLOQuery = (dataSource) => ({\n  projectName: dataSource.getDefaultProject(),\n  alignmentPeriod: 'cloud-monitoring-auto',\n  perSeriesAligner: AlignmentTypes.ALIGN_MEAN,\n  aliasBy: '',\n  selectorName: 'select_slo_health',\n  serviceId: '',\n  serviceName: '',\n  sloId: '',\n  sloName: '',\n  lookbackPeriod: '',\n});\n\nexport function SLOQueryEditor({\n  refId,\n  query,\n  datasource,\n  onChange,\n  variableOptionGroup,\n  customMetaData,\n  aliasBy,\n  onChangeAliasBy,\n}: React.PropsWithChildren<Props>) {\n  const alignmentLabel = useMemo(() => alignmentPeriodLabel(customMetaData, datasource), [customMetaData, datasource]);\n  return (\n    <span data-testid={selectors.components.queryEditor.sloQueryEditor.container.input}>\n      <EditorRow>\n        <Project\n          refId={refId}\n          templateVariableOptions={variableOptionGroup.options}\n          projectName={query.projectName}\n          datasource={datasource}\n          onChange={(projectName) => onChange({ ...query, projectName })}\n        />\n        <Service\n          refId={refId}\n          datasource={datasource}\n          templateVariableOptions={variableOptionGroup.options}\n          query={query}\n          onChange={onChange}\n        />\n        <SLO\n          refId={refId}\n          datasource={datasource}\n          templateVariableOptions={variableOptionGroup.options}\n          query={query}\n          onChange={onChange}\n        />\n        <Selector\n          refId={refId}\n          datasource={datasource}\n          templateVariableOptions={variableOptionGroup.options}\n          query={query}\n          onChange={onChange}\n        />\n        {query.selectorName === SLO_BURN_RATE_SELECTOR_NAME && (\n          <LookbackPeriodSelect\n            refId={refId}\n            onChange={(lookbackPeriod) => onChange({ ...query, lookbackPeriod: lookbackPeriod })}\n            current={query.lookbackPeriod}\n            templateVariableOptions={variableOptionGroup.options}\n          />\n        )}\n\n        <EditorFieldGroup>\n          <EditorField label=\"Alignment period\" tooltip={alignmentLabel}>\n            <PeriodSelect\n              inputId={`${refId}-alignment-period`}\n              templateVariableOptions={variableOptionGroup.options}\n              current={query.alignmentPeriod}\n              onChange={(period) => onChange({ ...query, alignmentPeriod: period })}\n              aligmentPeriods={ALIGNMENT_PERIODS}\n            />\n          </EditorField>\n        </EditorFieldGroup>\n\n        <AliasBy refId={refId} value={aliasBy} onChange={onChangeAliasBy} />\n      </EditorRow>\n    </span>\n  );\n}\n","import * as React from 'react';\n\nimport { TextArea } from '@grafana/ui';\n\nimport { selectors } from '../e2e/selectors';\n\nexport interface Props {\n  onChange: (query: string) => void;\n  onRunQuery: () => void;\n  query: string;\n}\n\nexport function MQLQueryEditor({ query, onChange, onRunQuery }: React.PropsWithChildren<Props>) {\n  const onKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (event.key === 'Enter' && (event.shiftKey || event.ctrlKey)) {\n      event.preventDefault();\n      onRunQuery();\n    }\n  };\n\n  return (\n    <span data-testid={selectors.components.queryEditor.mqlMetricsQueryEditor.container.input}>\n      <TextArea\n        name=\"Query\"\n        className=\"slate-query-field\"\n        value={query}\n        rows={10}\n        placeholder=\"Enter a Cloud Monitoring MQL query (Run with Shift+Enter)\"\n        onBlur={onRunQuery}\n        onChange={(e) => onChange(e.currentTarget.value)}\n        onKeyDown={onKeyDown}\n      />\n    </span>\n  );\n}\n","import { SelectableValue } from '@grafana/data';\nimport { Field, Select } from '@grafana/ui';\n\ninterface VariableQueryFieldProps {\n  onChange: (value: string) => void;\n  options: SelectableValue[];\n  value: string;\n  label: string;\n  allowCustomValue?: boolean;\n}\n\nexport const VariableQueryField = ({\n  label,\n  onChange,\n  value,\n  options,\n  allowCustomValue = false,\n}: VariableQueryFieldProps) => {\n  return (\n    <Field label={label}>\n      <Select\n        width={25}\n        allowCustomValue={allowCustomValue}\n        value={value}\n        onChange={({ value }) => onChange(value!)}\n        options={options}\n      />\n    </Field>\n  );\n};\n","import { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/plugin-ui';\nimport { RadioButtonGroup } from '@grafana/ui';\n\nimport { getAlignmentPickerData } from '../functions';\nimport { PreprocessorType, TimeSeriesList, MetricKind, ValueTypes } from '../types/query';\nimport { MetricDescriptor } from '../types/types';\n\nconst NONE_OPTION = { label: 'None', value: PreprocessorType.None };\n\nexport interface Props {\n  metricDescriptor?: MetricDescriptor;\n  onChange: (query: TimeSeriesList) => void;\n  query: TimeSeriesList;\n}\n\nexport const Preprocessor = ({ query, metricDescriptor, onChange }: Props) => {\n  const options = useOptions(metricDescriptor);\n\n  return (\n    <EditorField\n      label=\"Pre-processing\"\n      tooltip=\"Preprocessing options are displayed when the selected metric has a metric kind of delta or cumulative. The specific options available are determined by the metric's value type. If you select 'Rate', data points are aligned and converted to a rate per time series. If you select 'Delta', data points are aligned by their delta (difference) per time series\"\n    >\n      <RadioButtonGroup\n        onChange={(value: PreprocessorType) => {\n          const { perSeriesAligner: psa } = query;\n          const { valueType, metricKind } = metricDescriptor ?? {};\n          const { perSeriesAligner } = getAlignmentPickerData(valueType, metricKind, psa, value);\n          onChange({ ...query, preprocessor: value, perSeriesAligner });\n        }}\n        value={query.preprocessor ?? PreprocessorType.None}\n        options={options}\n      />\n    </EditorField>\n  );\n};\n\nconst useOptions = (metricDescriptor?: MetricDescriptor): Array<SelectableValue<PreprocessorType>> => {\n  const metricKind = metricDescriptor?.metricKind;\n  const valueType = metricDescriptor?.valueType;\n\n  return useMemo(() => {\n    if (!metricKind || metricKind === MetricKind.GAUGE || valueType === ValueTypes.DISTRIBUTION) {\n      return [NONE_OPTION];\n    }\n\n    const options = [\n      NONE_OPTION,\n      {\n        label: 'Rate',\n        value: PreprocessorType.Rate,\n        description: 'Data points are aligned and converted to a rate per time series',\n      },\n    ];\n\n    return metricKind === MetricKind.CUMULATIVE\n      ? [\n          ...options,\n          {\n            label: 'Delta',\n            value: PreprocessorType.Delta,\n            description: 'Data points are aligned by their delta (difference) per time series',\n          },\n        ]\n      : options;\n  }, [metricKind, valueType]);\n};\n","import { css } from '@emotion/css';\nimport debounce from 'debounce-promise';\nimport { startCase, uniqBy } from 'lodash';\nimport { useCallback, useEffect, useState } from 'react';\nimport * as React from 'react';\n\nimport { GrafanaTheme2, SelectableValue, TimeRange } from '@grafana/data';\nimport { EditorField, EditorFieldGroup, EditorRow } from '@grafana/plugin-ui';\nimport { reportInteraction } from '@grafana/runtime';\nimport { getSelectStyles, Select, AsyncSelect, useStyles2, useTheme2 } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { selectors } from '../e2e/selectors';\nimport { getAlignmentPickerData, getMetricType, setMetricType } from '../functions';\nimport { PreprocessorType, TimeSeriesList, MetricKind, ValueTypes } from '../types/query';\nimport { CustomMetaData, MetricDescriptor } from '../types/types';\n\nimport { AliasBy } from './AliasBy';\nimport { Alignment } from './Alignment';\nimport { GroupBy } from './GroupBy';\nimport { LabelFilter } from './LabelFilter';\nimport { defaultTimeSeriesList } from './MetricQueryEditor';\nimport { Preprocessor } from './Preprocessor';\nimport { Project } from './Project';\n\nexport interface Props {\n  refId: string;\n  customMetaData: CustomMetaData;\n  onChange: (query: TimeSeriesList) => void;\n  datasource: CloudMonitoringDatasource;\n  query: TimeSeriesList;\n  variableOptionGroup: SelectableValue<string>;\n  aliasBy?: string;\n  onChangeAliasBy: (aliasBy: string) => void;\n  range: TimeRange;\n}\n\nexport function Editor({\n  refId,\n  onChange,\n  datasource,\n  query,\n  variableOptionGroup,\n  customMetaData,\n  aliasBy,\n  onChangeAliasBy,\n  range,\n}: React.PropsWithChildren<Props>) {\n  const [labels, setLabels] = useState<{ [k: string]: string[] }>({});\n  const [metricDescriptors, setMetricDescriptors] = useState<MetricDescriptor[]>([]);\n  const [metricDescriptor, setMetricDescriptor] = useState<MetricDescriptor>();\n  const [metrics, setMetrics] = useState<Array<SelectableValue<string>>>([]);\n  const [services, setServices] = useState<Array<SelectableValue<string>>>([]);\n  const [service, setService] = useState<string>('');\n  const [timeRange, setTimeRange] = useState<TimeRange>({ ...range });\n\n  const useTime = (time: TimeRange) => {\n    if (\n      timeRange !== null &&\n      (timeRange.raw.from.toString() !== time.raw.from.toString() ||\n        timeRange.raw.to.toString() !== time.raw.to.toString())\n    ) {\n      setTimeRange({ ...time });\n    }\n  };\n\n  useTime(range);\n\n  const theme = useTheme2();\n  const selectStyles = getSelectStyles(theme);\n\n  const customStyle = useStyles2(getStyles);\n\n  const { projectName, groupBys, crossSeriesReducer } = query;\n  const metricType = getMetricType(query);\n  const { templateSrv } = datasource;\n\n  const getSelectedMetricDescriptor = useCallback(\n    (metricDescriptors: MetricDescriptor[], metricType: string) => {\n      return metricDescriptors.find((md) => md.type === templateSrv.replace(metricType))!;\n    },\n    [templateSrv]\n  );\n\n  useEffect(() => {\n    if (projectName && metricType) {\n      datasource\n        .getLabels(metricType, refId, projectName, { groupBys, crossSeriesReducer }, timeRange)\n        .then((labels) => setLabels(labels));\n    }\n  }, [datasource, groupBys, metricType, projectName, refId, crossSeriesReducer, timeRange]);\n\n  useEffect(() => {\n    const loadMetricDescriptors = async () => {\n      if (projectName) {\n        const metricDescriptors = await datasource.getMetricTypes(projectName);\n        reportInteraction('cloud-monitoring-metric-descriptors-loaded', {\n          count: metricDescriptors.length,\n        });\n        const services = getServicesList(metricDescriptors);\n        setMetricDescriptors(metricDescriptors);\n        setServices(services);\n      }\n    };\n    loadMetricDescriptors();\n  }, [datasource, projectName, customStyle, selectStyles.optionDescription]);\n\n  useEffect(() => {\n    const getMetricsList = (metricDescriptors: MetricDescriptor[]) => {\n      const selectedMetricDescriptor = getSelectedMetricDescriptor(metricDescriptors, metricType);\n      if (!selectedMetricDescriptor) {\n        return [];\n      }\n\n      const metricsByService = metricDescriptors\n        .filter((m) => m.service === selectedMetricDescriptor.service)\n        .map((m) => ({\n          service: m.service,\n          value: m.type,\n          label: m.displayName,\n          component: function optionComponent() {\n            return (\n              <div>\n                <div className={customStyle}>{m.type}</div>\n                <div className={selectStyles.optionDescription}>{m.description}</div>\n              </div>\n            );\n          },\n        }));\n      return metricsByService;\n    };\n\n    const metrics = getMetricsList(metricDescriptors);\n    const service = metrics.length > 0 ? metrics[0].service : '';\n    const metricDescriptor = getSelectedMetricDescriptor(metricDescriptors, metricType);\n    setMetricDescriptor(metricDescriptor);\n    setMetrics(metrics);\n    setService(service);\n  }, [metricDescriptors, getSelectedMetricDescriptor, metricType, customStyle, selectStyles.optionDescription]);\n\n  const onServiceChange = ({ value: service }: SelectableValue<string>) => {\n    const metrics = metricDescriptors\n      .filter((m: MetricDescriptor) => m.service === templateSrv.replace(service))\n      .map((m: MetricDescriptor) => ({\n        service: m.service,\n        value: m.type,\n        label: m.displayName,\n        description: m.description,\n      }));\n    // On service change reset all query values except the project name\n    query.filters = [];\n\n    if (metrics.length > 0 && !metrics.some((m) => m.value === templateSrv.replace(metricType))) {\n      onMetricTypeChange(metrics[0]);\n      setService(service!);\n      setMetrics(metrics);\n    } else {\n      setService(service!);\n      setMetrics(metrics);\n    }\n  };\n\n  const getServicesList = (metricDescriptors: MetricDescriptor[]) => {\n    const services = metricDescriptors.map((m) => ({\n      value: m.service,\n      label: startCase(m.serviceShortName),\n    }));\n\n    return services.length > 0 ? uniqBy(services, (s) => s.value) : [];\n  };\n\n  const filterMetrics = async (filter: string) => {\n    const metrics = await datasource.filterMetricsByType(projectName, service);\n    const filtered = metrics\n      .filter((m) => m.type.includes(filter.toLowerCase()))\n      .map((m) => ({\n        value: m.type,\n        label: m.displayName,\n        component: function optionComponent() {\n          return (\n            <div>\n              <div className={customStyle}>{m.type}</div>\n              <div className={selectStyles.optionDescription}>{m.description}</div>\n            </div>\n          );\n        },\n      }));\n    return [\n      {\n        label: 'Template Variables',\n        options: variableOptionGroup.options,\n      },\n      ...filtered,\n    ];\n  };\n\n  const debounceFilter = debounce(filterMetrics, 400);\n\n  const onMetricTypeChange = ({ value }: SelectableValue<string>) => {\n    const metricDescriptor = getSelectedMetricDescriptor(metricDescriptors, value!);\n    setMetricDescriptor(metricDescriptor);\n    const { metricKind, valueType } = metricDescriptor;\n    const preprocessor =\n      metricKind === MetricKind.GAUGE || valueType === ValueTypes.DISTRIBUTION\n        ? PreprocessorType.None\n        : PreprocessorType.Rate;\n    const { perSeriesAligner } = getAlignmentPickerData(valueType, metricKind, query.perSeriesAligner, preprocessor);\n\n    // On metric name change reset query to defaults except project name and filters\n    Object.assign(query, {\n      ...defaultTimeSeriesList(datasource),\n      // If the metric value type is DISTRIBUTION use REDUCE_MEAN in order to avoid\n      // returning data frames with a large number of frames (as we return a frame per bucket).\n      // DISTRIBUTION metrics only typically make sense with an aggregation performed against them or\n      // when filtered to a specific label value.\n      crossSeriesReducer: valueType === ValueTypes.DISTRIBUTION ? 'REDUCE_MEAN' : 'REDUCE_NONE',\n      projectName: query.projectName,\n      filters: query.filters,\n    });\n    onChange({\n      ...setMetricType(\n        {\n          ...query,\n          perSeriesAligner,\n        },\n        value!\n      ),\n      preprocessor,\n    });\n  };\n\n  return (\n    <span data-testid={selectors.components.queryEditor.visualMetricsQueryEditor.container.input}>\n      <EditorRow>\n        <EditorFieldGroup>\n          <Project\n            refId={refId}\n            templateVariableOptions={variableOptionGroup.options}\n            projectName={projectName}\n            datasource={datasource}\n            onChange={(projectName) => {\n              onChange({ ...query, projectName });\n            }}\n          />\n\n          <EditorField label=\"Service\" width=\"auto\">\n            <Select\n              width=\"auto\"\n              onChange={onServiceChange}\n              isLoading={services.length === 0}\n              value={[...services, ...variableOptionGroup.options].find((s) => s.value === service)}\n              options={[\n                {\n                  label: 'Template Variables',\n                  options: variableOptionGroup.options,\n                },\n                ...services,\n              ]}\n              placeholder=\"Select Services\"\n              inputId={`${refId}-service`}\n            />\n          </EditorField>\n          <EditorField label=\"Metric name\" width=\"auto\" htmlFor={`${refId}-select-metric`}>\n            <span title={service === '' ? 'Select a service first' : 'Type to search metrics'}>\n              <AsyncSelect\n                width=\"auto\"\n                onChange={onMetricTypeChange}\n                value={[...metrics, ...variableOptionGroup.options].find((s) => s.value === metricType)}\n                loadOptions={debounceFilter}\n                defaultOptions={[\n                  {\n                    label: 'Template Variables',\n                    options: variableOptionGroup.options,\n                  },\n                  ...metrics.slice(0, 100),\n                ]}\n                placeholder=\"Select Metric\"\n                inputId={`${refId}-select-metric`}\n                disabled={service === ''}\n              />\n            </span>\n          </EditorField>\n        </EditorFieldGroup>\n      </EditorRow>\n\n      <>\n        <LabelFilter\n          labels={labels}\n          filters={query.filters!}\n          onChange={(filters: string[]) => onChange({ ...query, filters })}\n          variableOptionGroup={variableOptionGroup}\n        />\n        <EditorRow>\n          <Preprocessor metricDescriptor={metricDescriptor} query={query} onChange={onChange} />\n          <GroupBy\n            refId={refId}\n            labels={Object.keys(labels)}\n            query={query}\n            onChange={onChange}\n            variableOptionGroup={variableOptionGroup}\n            metricDescriptor={metricDescriptor}\n          />\n          <Alignment\n            refId={refId}\n            datasource={datasource}\n            templateVariableOptions={variableOptionGroup.options}\n            query={query}\n            customMetaData={customMetaData}\n            onChange={onChange}\n            metricDescriptor={metricDescriptor}\n            preprocessor={query.preprocessor}\n          />\n          <AliasBy refId={refId} value={aliasBy} onChange={onChangeAliasBy} />\n        </EditorRow>\n      </>\n    </span>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) =>\n  css({\n    label: 'grafana-select-option-description',\n    fontWeight: 'normal',\n    fontStyle: 'italic',\n    color: theme.colors.text.secondary,\n  });\n\nexport const VisualMetricQueryEditor = React.memo(Editor);\n","import { SelectableValue } from '@grafana/data';\nimport { EditorField, EditorRow } from '@grafana/plugin-ui';\nimport { HorizontalGroup, Switch } from '@grafana/ui';\n\nimport { GRAPH_PERIODS } from '../constants';\n\nimport { PeriodSelect } from './index';\n\nexport interface Props {\n  refId: string;\n  onChange: (period: string) => void;\n  variableOptionGroup: SelectableValue<string>;\n  graphPeriod?: string;\n}\n\nexport const GraphPeriod = ({ refId, onChange, graphPeriod, variableOptionGroup }: Props) => {\n  return (\n    <EditorRow>\n      <EditorField\n        label=\"Graph period\"\n        htmlFor={`${refId}-graph-period`}\n        tooltip={\n          <>\n            Set <code>graph_period</code> which forces a preferred period between points. Automatically set to the\n            current interval if left blank.\n          </>\n        }\n      >\n        <HorizontalGroup>\n          <Switch\n            data-testid={`${refId}-switch-graph-period`}\n            value={graphPeriod !== 'disabled'}\n            onChange={(e) => onChange(e.currentTarget.checked ? '' : 'disabled')}\n          />\n          <PeriodSelect\n            inputId={`${refId}-graph-period`}\n            templateVariableOptions={variableOptionGroup.options}\n            current={graphPeriod}\n            onChange={onChange}\n            disabled={graphPeriod === 'disabled'}\n            aligmentPeriods={GRAPH_PERIODS}\n          />\n        </HorizontalGroup>\n      </EditorField>\n    </EditorRow>\n  );\n};\n","import { useCallback, useEffect } from 'react';\nimport * as React from 'react';\n\nimport { SelectableValue, TimeRange } from '@grafana/data';\nimport { EditorRows } from '@grafana/plugin-ui';\nimport { Stack } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { AlignmentTypes, CloudMonitoringQuery, QueryType, TimeSeriesList, TimeSeriesQuery } from '../types/query';\nimport { CustomMetaData } from '../types/types';\n\nimport { AliasBy } from './AliasBy';\nimport { GraphPeriod } from './GraphPeriod';\nimport { MQLQueryEditor } from './MQLQueryEditor';\nimport { Project } from './Project';\nimport { VisualMetricQueryEditor } from './VisualMetricQueryEditor';\n\nexport interface Props {\n  refId: string;\n  customMetaData: CustomMetaData;\n  variableOptionGroup: SelectableValue<string>;\n  onChange: (query: CloudMonitoringQuery) => void;\n  onRunQuery: () => void;\n  query: CloudMonitoringQuery;\n  datasource: CloudMonitoringDatasource;\n  range: TimeRange;\n}\n\nexport const defaultTimeSeriesList: (dataSource: CloudMonitoringDatasource) => TimeSeriesList = (dataSource) => ({\n  projectName: dataSource.getDefaultProject(),\n  crossSeriesReducer: 'REDUCE_NONE',\n  alignmentPeriod: 'cloud-monitoring-auto',\n  perSeriesAligner: AlignmentTypes.ALIGN_MEAN,\n  groupBys: [],\n  filters: [],\n});\n\nexport const defaultTimeSeriesQuery: (dataSource: CloudMonitoringDatasource) => TimeSeriesQuery = (dataSource) => ({\n  projectName: dataSource.getDefaultProject(),\n  query: '',\n});\n\nfunction Editor({\n  refId,\n  query,\n  datasource,\n  onChange: onQueryChange,\n  onRunQuery,\n  customMetaData,\n  variableOptionGroup,\n  range,\n}: React.PropsWithChildren<Props>) {\n  const onChangeTimeSeriesList = useCallback(\n    (timeSeriesList: TimeSeriesList) => {\n      let filtersComplete = true;\n      if (timeSeriesList?.filters && timeSeriesList.filters.length > 0) {\n        for (const filter of timeSeriesList.filters) {\n          if (filter === '') {\n            filtersComplete = false;\n            break;\n          }\n        }\n      }\n      onQueryChange({ ...query, timeSeriesList });\n      if (filtersComplete) {\n        onRunQuery();\n      }\n    },\n    [onQueryChange, onRunQuery, query]\n  );\n\n  const onChangeTimeSeriesQuery = useCallback(\n    (timeSeriesQuery: TimeSeriesQuery) => {\n      onQueryChange({ ...query, timeSeriesQuery });\n      onRunQuery();\n    },\n    [onQueryChange, onRunQuery, query]\n  );\n\n  useEffect(() => {\n    if (query.queryType === QueryType.TIME_SERIES_LIST && !query.timeSeriesList) {\n      onQueryChange({\n        refId: query.refId,\n        datasource: query.datasource,\n        queryType: QueryType.TIME_SERIES_LIST,\n        timeSeriesList: defaultTimeSeriesList(datasource),\n        aliasBy: query.aliasBy,\n      });\n    }\n    if (query.queryType === QueryType.TIME_SERIES_QUERY && !query.timeSeriesQuery) {\n      onQueryChange({\n        refId: query.refId,\n        datasource: query.datasource,\n        queryType: QueryType.TIME_SERIES_QUERY,\n        timeSeriesQuery: defaultTimeSeriesQuery(datasource),\n        aliasBy: query.aliasBy,\n      });\n    }\n  }, [onQueryChange, query, datasource]);\n\n  return (\n    <EditorRows>\n      {(query.queryType === QueryType.ANNOTATION || query.queryType === QueryType.TIME_SERIES_LIST) &&\n        query.timeSeriesList && (\n          <VisualMetricQueryEditor\n            refId={refId}\n            variableOptionGroup={variableOptionGroup}\n            customMetaData={customMetaData}\n            onChange={onChangeTimeSeriesList}\n            datasource={datasource}\n            query={query.timeSeriesList}\n            aliasBy={query.aliasBy}\n            onChangeAliasBy={(aliasBy: string) => onQueryChange({ ...query, aliasBy })}\n            range={range}\n          />\n        )}\n\n      {query.queryType === QueryType.TIME_SERIES_QUERY && query.timeSeriesQuery && (\n        <>\n          <Stack gap={1} direction=\"row\">\n            <Project\n              refId={refId}\n              datasource={datasource}\n              onChange={(projectName) =>\n                onChangeTimeSeriesQuery({ ...query.timeSeriesQuery!, projectName: projectName })\n              }\n              templateVariableOptions={variableOptionGroup.options}\n              projectName={query.timeSeriesQuery.projectName!}\n            />\n            <AliasBy\n              refId={refId}\n              value={query.aliasBy}\n              onChange={(aliasBy: string) => onQueryChange({ ...query, aliasBy })}\n            />\n          </Stack>\n          <MQLQueryEditor\n            onChange={(q: string) => onChangeTimeSeriesQuery({ ...query.timeSeriesQuery!, query: q })}\n            onRunQuery={onRunQuery}\n            query={query.timeSeriesQuery.query}\n          ></MQLQueryEditor>\n          <GraphPeriod\n            onChange={(graphPeriod: string) => onChangeTimeSeriesQuery({ ...query.timeSeriesQuery!, graphPeriod })}\n            graphPeriod={query.timeSeriesQuery.graphPeriod}\n            refId={refId}\n            variableOptionGroup={variableOptionGroup}\n          />\n        </>\n      )}\n    </EditorRows>\n  );\n}\n\nexport const MetricQueryEditor = React.memo(Editor);\n","import * as React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField, EditorRow } from '@grafana/plugin-ui';\nimport { TextArea, Input } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { selectors } from '../e2e/selectors';\nimport { PromQLQuery } from '../types/query';\n\nimport { Project } from './Project';\n\nexport interface Props {\n  refId: string;\n  variableOptionGroup: SelectableValue<string>;\n  onChange: (query: PromQLQuery) => void;\n  onRunQuery: () => void;\n  query: PromQLQuery;\n  datasource: CloudMonitoringDatasource;\n}\n\nexport const defaultQuery: (dataSource: CloudMonitoringDatasource) => PromQLQuery = (dataSource) => ({\n  projectName: dataSource.getDefaultProject(),\n  expr: '',\n  step: '10s',\n});\n\nexport function PromQLQueryEditor({\n  refId,\n  query,\n  datasource,\n  onChange,\n  variableOptionGroup,\n  onRunQuery,\n}: React.PropsWithChildren<Props>) {\n  function onReturnKeyDown(e: React.KeyboardEvent) {\n    if (e.key === 'Enter' && e.shiftKey) {\n      onRunQuery();\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  return (\n    <span data-testid={selectors.components.queryEditor.promQlQueryEditor.container.input}>\n      <EditorRow>\n        <Project\n          refId={refId}\n          templateVariableOptions={variableOptionGroup.options}\n          projectName={query.projectName}\n          datasource={datasource}\n          onChange={(projectName) => onChange({ ...query, projectName })}\n        />\n        <TextArea\n          name=\"Query\"\n          className=\"slate-query-field\"\n          value={query.expr}\n          rows={10}\n          placeholder=\"Enter a Cloud Monitoring Prometheus query (Run with Shift+Enter)\"\n          onBlur={onRunQuery}\n          onKeyDown={onReturnKeyDown}\n          onChange={(e) => onChange({ ...query, expr: e.currentTarget.value })}\n        />\n        <EditorField\n          label=\"Min step\"\n          tooltip={\n            'Time units and built-in variables can be used here, for example: $__interval, $__rate_interval, 5s, 1m, 3h, 1d, 1y (Default if no unit is specified: 10s)'\n          }\n        >\n          <Input\n            type={'string'}\n            placeholder={'auto'}\n            onChange={(e) => onChange({ ...query, step: e.currentTarget.value })}\n            onKeyDown={onReturnKeyDown}\n            value={query.step ?? ''}\n          />\n        </EditorField>\n      </EditorRow>\n    </span>\n  );\n}\n","import { EditorHeader, FlexItem, InlineSelect } from '@grafana/plugin-ui';\n\nimport { QUERY_TYPES } from '../constants';\nimport { CloudMonitoringQuery } from '../types/query';\n\nexport interface QueryEditorHeaderProps {\n  query: CloudMonitoringQuery;\n  onChange: (value: CloudMonitoringQuery) => void;\n  onRunQuery: () => void;\n}\n\nexport const QueryHeader = (props: QueryEditorHeaderProps) => {\n  const { query, onChange, onRunQuery } = props;\n  const { queryType } = query;\n\n  return (\n    <EditorHeader>\n      <InlineSelect\n        label=\"Query type\"\n        options={QUERY_TYPES}\n        value={queryType}\n        onChange={({ value }) => {\n          onChange({ ...query, queryType: value! });\n          onRunQuery();\n        }}\n      />\n      <FlexItem grow={1} />\n    </EditorHeader>\n  );\n};\n","import deepEqual from 'fast-deep-equal';\nimport { isEqual } from 'lodash';\nimport { useEffect, useState } from 'react';\n\nimport { QueryEditorProps, getDefaultTimeRange, toOption } from '@grafana/data';\nimport { EditorRows } from '@grafana/plugin-ui';\nimport { ConfirmModal } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { selectors } from '../e2e/selectors';\nimport { CloudMonitoringQuery, PromQLQuery, QueryType, SLOQuery } from '../types/query';\nimport { CloudMonitoringOptions } from '../types/types';\n\nimport { defaultTimeSeriesList, defaultTimeSeriesQuery } from './MetricQueryEditor';\nimport { PromQLQueryEditor } from './PromQLEditor';\nimport { QueryHeader } from './QueryHeader';\nimport { defaultQuery as defaultSLOQuery } from './SLOQueryEditor';\n\nimport { MetricQueryEditor, SLOQueryEditor } from './';\n\nexport type Props = QueryEditorProps<CloudMonitoringDatasource, CloudMonitoringQuery, CloudMonitoringOptions>;\n\nexport const QueryEditor = (props: Props) => {\n  const { datasource, query, onRunQuery, onChange, range } = props;\n  const [modalIsOpen, setModalIsOpen] = useState<boolean>(false);\n\n  useEffect(() => {\n    const migrated = datasource.migrateQuery(query);\n    if (!deepEqual(migrated, query)) {\n      onChange({ ...migrated });\n    }\n  }, [query, datasource, onChange]);\n\n  const [currentQuery, setCurrentQuery] = useState<CloudMonitoringQuery>(query);\n  const [queryHasBeenEdited, setQueryHasBeenEdited] = useState<boolean>(false);\n\n  const sloQuery = { ...defaultSLOQuery(datasource), ...query.sloQuery };\n  const onSLOQueryChange = (q: SLOQuery) => {\n    onChange({ ...query, sloQuery: q });\n    onRunQuery();\n  };\n\n  const promQLQuery = {\n    ...{ projectName: datasource.getDefaultProject(), expr: '', step: '10s' },\n    ...query.promQLQuery,\n  };\n  const onPromQLQueryChange = (q: PromQLQuery) => {\n    onChange({ ...query, promQLQuery: q });\n  };\n\n  const onMetricQueryChange = (q: CloudMonitoringQuery) => {\n    if (\n      (q.queryType === QueryType.TIME_SERIES_LIST && !isEqual(q.timeSeriesList, defaultTimeSeriesList(datasource))) ||\n      (q.queryType === QueryType.TIME_SERIES_QUERY && !isEqual(q.timeSeriesQuery, defaultTimeSeriesQuery(datasource)))\n    ) {\n      setQueryHasBeenEdited(true);\n    }\n    onChange(q);\n  };\n\n  const meta = props.data?.series.length ? props.data?.series[0].meta : {};\n  const customMetaData = meta?.custom ?? {};\n  const variableOptionGroup = {\n    label: 'Template Variables',\n    expanded: false,\n    options: datasource.getVariables().map(toOption),\n  };\n\n  // Use a known query type\n  useEffect(() => {\n    if (!query.queryType || !Object.values(QueryType).includes(query.queryType)) {\n      onChange({ ...query, queryType: QueryType.TIME_SERIES_LIST });\n    }\n  });\n  const queryType = query.queryType;\n\n  const checkForModalDisplay = (q: CloudMonitoringQuery) => {\n    if (\n      queryHasBeenEdited &&\n      (currentQuery.queryType === QueryType.TIME_SERIES_LIST || currentQuery.queryType === QueryType.TIME_SERIES_QUERY)\n    ) {\n      if (currentQuery.queryType !== q.queryType) {\n        setModalIsOpen(true);\n      }\n    } else {\n      onChange(q);\n    }\n    setCurrentQuery(q);\n  };\n\n  return (\n    <span data-testid={selectors.components.queryEditor.container}>\n      <EditorRows>\n        <ConfirmModal\n          data-testid=\"switch-query-type-modal\"\n          title=\"Warning\"\n          body=\"By switching your query type, your current query will be lost.\"\n          isOpen={modalIsOpen}\n          onConfirm={() => {\n            setModalIsOpen(false);\n            onChange(currentQuery);\n            setQueryHasBeenEdited(false);\n          }}\n          confirmText=\"Confirm\"\n          onDismiss={() => {\n            setModalIsOpen(false);\n            setCurrentQuery(query);\n          }}\n        />\n        <QueryHeader query={query} onChange={checkForModalDisplay} onRunQuery={onRunQuery} />\n\n        {queryType === QueryType.PROMQL && (\n          <PromQLQueryEditor\n            refId={query.refId}\n            variableOptionGroup={variableOptionGroup}\n            onChange={onPromQLQueryChange}\n            onRunQuery={onRunQuery}\n            datasource={datasource}\n            query={promQLQuery}\n          />\n        )}\n\n        {queryType !== QueryType.SLO && (\n          <MetricQueryEditor\n            refId={query.refId}\n            variableOptionGroup={variableOptionGroup}\n            customMetaData={customMetaData}\n            onChange={onMetricQueryChange}\n            onRunQuery={onRunQuery}\n            datasource={datasource}\n            query={query}\n            range={range || getDefaultTimeRange()}\n          />\n        )}\n\n        {queryType === QueryType.SLO && (\n          <SLOQueryEditor\n            refId={query.refId}\n            variableOptionGroup={variableOptionGroup}\n            customMetaData={customMetaData}\n            onChange={onSLOQueryChange}\n            onRunQuery={onRunQuery}\n            datasource={datasource}\n            query={sloQuery}\n            aliasBy={query.aliasBy}\n            onChangeAliasBy={(aliasBy: string) => onChange({ ...query, aliasBy })}\n          />\n        )}\n      </EditorRows>\n    </span>\n  );\n};\n","import { flatten } from 'lodash';\nimport { useCallback, useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Select } from '@grafana/ui';\nimport { Variable } from 'app/types/templates';\n\nexport interface Props {\n  onChange: (value: string | undefined) => void;\n  options: Array<SelectableValue<string>>;\n  isSearchable: boolean;\n  value: string;\n  placeholder?: string;\n  className?: string;\n  variables?: Variable[];\n}\n\nexport const MetricSelect = (props: Props) => {\n  const { value, placeholder, className, isSearchable, onChange } = props;\n  const options = useSelectOptions(props);\n  const selected = useSelectedOption(options, value);\n  const onChangeValue = useCallback((selectable: SelectableValue<string>) => onChange(selectable.value), [onChange]);\n\n  return (\n    <Select\n      className={className}\n      isMulti={false}\n      isClearable={false}\n      backspaceRemovesValue={false}\n      onChange={onChangeValue}\n      options={options}\n      isSearchable={isSearchable}\n      maxMenuHeight={500}\n      placeholder={placeholder}\n      noOptionsMessage=\"No options found\"\n      value={selected}\n    />\n  );\n};\n\nconst useSelectOptions = ({ variables = [], options }: Props): Array<SelectableValue<string>> => {\n  return useMemo(() => {\n    if (!Array.isArray(variables) || variables.length === 0) {\n      return options;\n    }\n\n    return [\n      {\n        label: 'Template Variables',\n        options: variables.map(({ name }) => ({\n          label: `$${name}`,\n          value: `$${name}`,\n        })),\n      },\n      ...options,\n    ];\n  }, [variables, options]);\n};\n\nconst useSelectedOption = (options: Array<SelectableValue<string>>, value: string): SelectableValue<string> => {\n  return useMemo(() => {\n    const allOptions = options.every((o) => o.options) ? flatten(options.map((o) => o.options)) : options;\n    return allOptions.find((option) => option.value === value);\n  }, [options, value]);\n};\n","import { css } from '@emotion/css';\nimport { useState } from 'react';\nimport * as React from 'react';\n\nimport { PanelMenuItem, GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Icon, toIconName, useStyles2 } from '@grafana/ui';\n\ninterface Props {\n  children?: React.ReactNode;\n}\n\nexport const PanelHeaderMenuItem = (props: Props & PanelMenuItem) => {\n  const [ref, setRef] = useState<HTMLLIElement | null>(null);\n  const isSubMenu = props.type === 'submenu';\n  const styles = useStyles2(getStyles);\n  const icon = props.iconClassName ? toIconName(props.iconClassName) : undefined;\n\n  switch (props.type) {\n    case 'divider':\n      return <li className=\"divider\" />;\n    case 'group':\n      return (\n        <li>\n          <span className={styles.groupLabel}>{props.text}</span>\n        </li>\n      );\n    default:\n      return (\n        <li\n          className={isSubMenu ? `dropdown-submenu ${getDropdownLocationCssClass(ref)}` : undefined}\n          ref={setRef}\n          data-testid={selectors.components.Panels.Panel.menuItems(props.text)}\n        >\n          <a onClick={props.onClick} href={props.href} role=\"menuitem\">\n            {icon && <Icon name={icon} className={styles.menuIconClassName} />}\n            <span\n              className=\"dropdown-item-text\"\n              data-testid={selectors.components.Panels.Panel.headerItems(props.text)}\n            >\n              {props.text}\n              {isSubMenu && <Icon name=\"angle-right\" className={styles.shortcutIconClassName} />}\n            </span>\n\n            {props.shortcut && (\n              <span className=\"dropdown-menu-item-shortcut\">\n                <Icon name=\"keyboard\" className={styles.menuIconClassName} /> {props.shortcut}\n              </span>\n            )}\n          </a>\n          {props.children}\n        </li>\n      );\n  }\n};\n\nfunction getDropdownLocationCssClass(element: HTMLElement | null) {\n  if (!element) {\n    return 'invisible';\n  }\n\n  const wrapperPos = element.parentElement!.getBoundingClientRect();\n  const pos = element.getBoundingClientRect();\n\n  if (pos.width === 0) {\n    return 'invisible';\n  }\n\n  if (wrapperPos.right + pos.width + 10 > window.innerWidth) {\n    return 'pull-left';\n  } else {\n    return 'pull-right';\n  }\n}\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    menuIconClassName: css({\n      marginRight: theme.spacing(1),\n      'a::after': {\n        display: 'none',\n      },\n    }),\n    shortcutIconClassName: css({\n      position: 'absolute',\n      top: '7px',\n      right: theme.spacing(0.5),\n      color: theme.colors.text.secondary,\n    }),\n    groupLabel: css({\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.size.sm,\n      padding: theme.spacing(0.5, 1),\n    }),\n  };\n}\n","import { css, cx } from '@emotion/css';\nimport * as React from 'react';\n\nimport { NavModelItem, GrafanaTheme2 } from '@grafana/data';\nimport { Tab, TabsBar, Icon, useStyles2, toIconName } from '@grafana/ui';\n\nimport { PageInfoItem } from '../../../core/components/Page/types';\nimport { PageInfo } from '../../../core/components/PageInfo/PageInfo';\nimport { ProBadge } from '../../../core/components/Upgrade/ProBadge';\n\nimport { PanelHeaderMenuItem } from './PanelHeaderMenuItem';\n\nexport interface Props {\n  navItem: NavModelItem;\n  renderTitle?: (title: string) => React.ReactNode;\n  actions?: React.ReactNode;\n  info?: PageInfoItem[];\n  subTitle?: React.ReactNode;\n}\n\nconst SelectNav = ({ children, customCss }: { children: NavModelItem[]; customCss: string }) => {\n  if (!children || children.length === 0) {\n    return null;\n  }\n\n  const defaultSelectedItem = children.find((navItem) => {\n    return navItem.active === true;\n  });\n\n  return (\n    <div className={`gf-form-select-wrapper width-20 ${customCss}`}>\n      <div className=\"dropdown\">\n        <button\n          type=\"button\"\n          className=\"gf-form-input dropdown-toggle\"\n          data-toggle=\"dropdown\"\n          style={{ textAlign: 'left' }}\n        >\n          {defaultSelectedItem?.text}\n        </button>\n        <ul role=\"menu\" className=\"dropdown-menu dropdown-menu--menu\">\n          {children.map((navItem: NavModelItem) => {\n            if (navItem.hideFromTabs) {\n              // TODO: Rename hideFromTabs => hideFromNav\n              return null;\n            }\n            return (\n              <PanelHeaderMenuItem\n                key={navItem.url}\n                iconClassName={navItem.icon}\n                text={navItem.text}\n                href={navItem.url}\n              />\n            );\n          })}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nconst Navigation = ({ children }: { children: NavModelItem[] }) => {\n  if (!children || children.length === 0) {\n    return null;\n  }\n\n  return (\n    <nav>\n      <SelectNav customCss=\"page-header__select-nav\">{children}</SelectNav>\n      <TabsBar className=\"page-header__tabs\" hideBorder={true}>\n        {children.map((child, index) => {\n          return (\n            !child.hideFromTabs && (\n              <Tab\n                label={child.text}\n                active={child.active}\n                key={`${child.url}-${index}`}\n                icon={child.icon}\n                href={child.url}\n                suffix={child.tabSuffix}\n              />\n            )\n          );\n        })}\n      </TabsBar>\n    </nav>\n  );\n};\n\nexport const PageHeader = ({ navItem: model, renderTitle, actions, info, subTitle }: Props) => {\n  const styles = useStyles2(getStyles);\n\n  if (!model) {\n    return null;\n  }\n\n  const renderHeader = (main: NavModelItem) => {\n    const marginTop = main.icon === 'grafana' ? 12 : 14;\n    const icon = main.icon && toIconName(main.icon);\n    const sub = subTitle ?? main.subTitle;\n\n    return (\n      <div className=\"page-header__inner\">\n        <span className=\"page-header__logo\">\n          {icon && <Icon name={icon} size=\"xxxl\" style={{ marginTop }} />}\n          {main.img && <img className=\"page-header__img\" src={main.img} alt=\"\" />}\n        </span>\n\n        <div className={cx('page-header__info-block', styles.headerText)}>\n          {renderTitle ? renderTitle(main.text) : renderHeaderTitle(main.text, main.highlightText)}\n          {info && <PageInfo info={info} />}\n          {sub && <div className=\"page-header__sub-title\">{sub}</div>}\n          {actions && <div className={styles.actions}>{actions}</div>}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className={styles.headerCanvas}>\n      <div className=\"page-container\">\n        <div className=\"page-header\">\n          {renderHeader(model)}\n          {model.children && model.children.length > 0 && <Navigation>{model.children}</Navigation>}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nfunction renderHeaderTitle(title: string, highlightText: NavModelItem['highlightText']) {\n  if (!title) {\n    return null;\n  }\n\n  return (\n    <h1 className=\"page-header__title\">\n      {title}\n      {highlightText && (\n        <ProBadge\n          text={highlightText}\n          className={css({\n            verticalAlign: 'middle',\n          })}\n        />\n      )}\n    </h1>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  actions: css({\n    display: 'flex',\n    flexDirection: 'row',\n    gap: theme.spacing(1),\n  }),\n  headerText: css({\n    display: 'flex',\n    flexDirection: 'column',\n    gap: theme.spacing(1),\n  }),\n  headerCanvas: css({\n    background: theme.colors.background.canvas,\n  }),\n});\n","import {\n  ClipboardButton,\n  ColorPicker,\n  DataLinksInlineEditor,\n  DataSourceHttpSettings,\n  GraphContextMenu,\n  Icon,\n  LegacyForms,\n  SeriesColorPickerPopoverWithTheme,\n  Spinner,\n  UnitPicker,\n} from '@grafana/ui';\nimport { react2AngularDirective } from 'app/angular/react2angular';\nimport { OldFolderPicker } from 'app/core/components/Select/OldFolderPicker';\nimport { TimePickerSettings } from 'app/features/dashboard/components/DashboardSettings/TimePickerSettings';\nimport { QueryEditor as CloudMonitoringQueryEditor } from 'app/plugins/datasource/cloud-monitoring/components/QueryEditor';\n\nimport EmptyListCTA from '../core/components/EmptyListCTA/EmptyListCTA';\nimport { Footer } from '../core/components/Footer/Footer';\nimport { MetricSelect } from '../core/components/Select/MetricSelect';\nimport { TagFilter } from '../core/components/TagFilter/TagFilter';\nimport { HelpModal } from '../core/components/help/HelpModal';\n\nimport { PageHeader } from './components/PageHeader/PageHeader';\n\nconst { SecretFormField } = LegacyForms;\n\nexport function registerAngularDirectives() {\n  react2AngularDirective('footer', Footer, []);\n  react2AngularDirective('icon', Icon, [\n    'name',\n    'size',\n    'type',\n    ['onClick', { watchDepth: 'reference', wrapApply: true }],\n  ]);\n  react2AngularDirective('spinner', Spinner, ['inline']);\n  react2AngularDirective('helpModal', HelpModal, []);\n  react2AngularDirective('pageHeader', PageHeader, ['model', 'noTabs']);\n  react2AngularDirective('emptyListCta', EmptyListCTA, [\n    'title',\n    'buttonIcon',\n    'buttonLink',\n    'buttonTitle',\n    ['onClick', { watchDepth: 'reference', wrapApply: true }],\n    'proTip',\n    'proTipLink',\n    'proTipLinkTitle',\n    'proTipTarget',\n    'infoBox',\n    'infoBoxTitle',\n  ]);\n  react2AngularDirective('tagFilter', TagFilter, [\n    'tags',\n    ['onChange', { watchDepth: 'reference' }],\n    ['tagOptions', { watchDepth: 'reference' }],\n  ]);\n  react2AngularDirective('colorPicker', ColorPicker, [\n    'color',\n    ['onChange', { watchDepth: 'reference', wrapApply: true }],\n  ]);\n  react2AngularDirective('seriesColorPickerPopover', SeriesColorPickerPopoverWithTheme, [\n    'color',\n    'series',\n    'onColorChange',\n    'onToggleAxis',\n  ]);\n  react2AngularDirective('unitPicker', UnitPicker, [\n    'value',\n    'width',\n    ['onChange', { watchDepth: 'reference', wrapApply: true }],\n  ]);\n  react2AngularDirective('metricSelect', MetricSelect, [\n    'options',\n    'onChange',\n    'value',\n    'isSearchable',\n    'className',\n    'placeholder',\n    ['variables', { watchDepth: 'reference' }],\n  ]);\n  react2AngularDirective('cloudMonitoringQueryEditor', CloudMonitoringQueryEditor, [\n    'target',\n    'onQueryChange',\n    'onExecuteQuery',\n    ['events', { watchDepth: 'reference' }],\n    ['datasource', { watchDepth: 'reference' }],\n    ['templateSrv', { watchDepth: 'reference' }],\n  ]);\n  react2AngularDirective('secretFormField', SecretFormField, [\n    'value',\n    'isConfigured',\n    'inputWidth',\n    'labelWidth',\n    'aria-label',\n    ['onReset', { watchDepth: 'reference', wrapApply: true }],\n    ['onChange', { watchDepth: 'reference', wrapApply: true }],\n  ]);\n  react2AngularDirective('graphContextMenu', GraphContextMenu, [\n    'x',\n    'y',\n    'itemsGroup',\n    ['onClose', { watchDepth: 'reference', wrapApply: true }],\n    ['getContextMenuSource', { watchDepth: 'reference', wrapApply: true }],\n    ['timeZone', { watchDepth: 'reference', wrapApply: true }],\n  ]);\n\n  // We keep the drilldown terminology here because of as using data-* directive\n  // being in conflict with HTML data attributes\n  react2AngularDirective('drilldownLinksEditor', DataLinksInlineEditor, [\n    'value',\n    'links',\n    'suggestions',\n    ['onChange', { watchDepth: 'reference', wrapApply: true }],\n  ]);\n\n  react2AngularDirective('datasourceHttpSettingsNext', DataSourceHttpSettings, [\n    'defaultUrl',\n    'showAccessOptions',\n    'dataSourceConfig',\n    'showForwardOAuthIdentityOption',\n    ['onChange', { watchDepth: 'reference', wrapApply: true }],\n  ]);\n  react2AngularDirective('folderPicker', OldFolderPicker, [\n    'labelClass',\n    'rootName',\n    'enableCreateNew',\n    'enableReset',\n    'initialTitle',\n    'initialFolderId',\n    'dashboardId',\n    'onCreateFolder',\n    ['enterFolderCreation', { watchDepth: 'reference', wrapApply: true }],\n    ['exitFolderCreation', { watchDepth: 'reference', wrapApply: true }],\n    ['onLoad', { watchDepth: 'reference', wrapApply: true }],\n    ['onChange', { watchDepth: 'reference', wrapApply: true }],\n  ]);\n\n  react2AngularDirective('timePickerSettings', TimePickerSettings, [\n    'renderCount',\n    'refreshIntervals',\n    'timePickerHidden',\n    'nowDelay',\n    'timezone',\n    ['onTimeZoneChange', { watchDepth: 'reference', wrapApply: true }],\n    ['onRefreshIntervalChange', { watchDepth: 'reference', wrapApply: true }],\n    ['onNowDelayChange', { watchDepth: 'reference', wrapApply: true }],\n    ['onHideTimePickerChange', { watchDepth: 'reference', wrapApply: true }],\n  ]);\n\n  react2AngularDirective('clipboardButton', ClipboardButton, [\n    ['getText', { watchDepth: 'reference', wrapApply: true }],\n  ]);\n}\n","import { IScope } from 'angular';\n\nexport const promiseToDigest = ($scope: IScope) => (promise: Promise<any>) => promise.finally($scope.$evalAsync);\n","import $ from 'jquery';\nimport { debounce, each, map, partial, escape, unescape } from 'lodash';\n\nimport coreModule from 'app/angular/core_module';\n\nimport { promiseToDigest } from '../promiseToDigest';\n\nconst template = `\n<div class=\"dropdown cascade-open\">\n<a ng-click=\"showActionsMenu()\" class=\"query-part-name pointer dropdown-toggle\" data-toggle=\"dropdown\">{{part.def.type}}</a>\n<span>(</span><span class=\"query-part-parameters\"></span><span>)</span>\n<ul class=\"dropdown-menu\">\n  <li ng-repeat=\"action in partActions\">\n    <a ng-click=\"triggerPartAction(action)\">{{action.text}}</a>\n  </li>\n</ul>\n`;\n\ncoreModule.directive('queryPartEditor', ['templateSrv', queryPartEditorDirective]);\n\nexport function queryPartEditorDirective(templateSrv: any) {\n  const paramTemplate = '<input type=\"text\" class=\"hide input-mini tight-form-func-param\"></input>';\n\n  return {\n    restrict: 'E',\n    template: template,\n    scope: {\n      part: '=',\n      handleEvent: '&',\n      debounce: '@',\n    },\n    link: function postLink($scope: any, elem: any) {\n      const part = $scope.part;\n      const partDef = part.def;\n      const $paramsContainer = elem.find('.query-part-parameters');\n      const debounceLookup = $scope.debounce;\n\n      $scope.partActions = [];\n\n      function clickFuncParam(this: any, paramIndex: number) {\n        const $link = $(this);\n        const $input = $link.next();\n\n        $input.val(part.params[paramIndex]);\n        $input.css('width', $link.width()! + 16 + 'px');\n\n        $link.hide();\n        $input.show();\n        $input.focus();\n        $input.select();\n\n        const typeahead = $input.data('typeahead');\n        if (typeahead) {\n          $input.val('');\n          typeahead.lookup();\n        }\n      }\n\n      function inputBlur(this: any, paramIndex: number) {\n        const $input = $(this);\n        const $link = $input.prev();\n        const newValue = $input.val();\n\n        if (newValue !== '' || part.def.params[paramIndex].optional) {\n          $link.html(templateSrv.highlightVariablesAsHtml(newValue));\n\n          part.updateParam($input.val(), paramIndex);\n          $scope.$apply(() => {\n            $scope.handleEvent({ $event: { name: 'part-param-changed' } });\n          });\n        }\n\n        $input.hide();\n        $link.show();\n      }\n\n      function inputKeyPress(this: any, paramIndex: number, e: any) {\n        if (e.which === 13) {\n          inputBlur.call(this, paramIndex);\n        }\n      }\n\n      function inputKeyDown(this: any) {\n        this.style.width = (3 + this.value.length) * 8 + 'px';\n      }\n\n      function addTypeahead($input: JQuery, param: any, paramIndex: number) {\n        if (!param.options && !param.dynamicLookup) {\n          return;\n        }\n\n        const typeaheadSource = (query: string, callback: any) => {\n          if (param.options) {\n            let options = param.options;\n            if (param.type === 'int') {\n              options = map(options, (val) => {\n                return val.toString();\n              });\n            }\n            return options;\n          }\n\n          $scope.$apply(() => {\n            $scope.handleEvent({ $event: { name: 'get-param-options' } }).then((result: any) => {\n              const dynamicOptions = map(result, (op) => {\n                return escape(op.value);\n              });\n              callback(dynamicOptions);\n            });\n          });\n        };\n\n        $input.attr('data-provide', 'typeahead');\n\n        $input.typeahead({\n          source: typeaheadSource,\n          minLength: 0,\n          items: 1000,\n          updater: (value: string) => {\n            value = unescape(value);\n            setTimeout(() => {\n              inputBlur.call($input[0], paramIndex);\n            }, 0);\n            return value;\n          },\n        });\n\n        const typeahead = $input.data('typeahead');\n        typeahead.lookup = function () {\n          this.query = this.$element.val() || '';\n          const items = this.source(this.query, $.proxy(this.process, this));\n          return items ? this.process(items) : items;\n        };\n\n        if (debounceLookup) {\n          typeahead.lookup = debounce(typeahead.lookup, 500, { leading: true });\n        }\n      }\n\n      $scope.showActionsMenu = () => {\n        promiseToDigest($scope)(\n          $scope.handleEvent({ $event: { name: 'get-part-actions' } }).then((res: any) => {\n            $scope.partActions = res;\n          })\n        );\n      };\n\n      $scope.triggerPartAction = (action: string) => {\n        $scope.handleEvent({ $event: { name: 'action', action: action } });\n      };\n\n      function addElementsAndCompile() {\n        each(partDef.params, (param: any, index: number) => {\n          if (param.optional && part.params.length <= index) {\n            return;\n          }\n\n          if (index > 0) {\n            $('<span>, </span>').appendTo($paramsContainer);\n          }\n\n          const paramValue = templateSrv.highlightVariablesAsHtml(part.params[index]);\n          const $paramLink = $('<a class=\"graphite-func-param-link pointer\">' + paramValue + '</a>');\n          const $input = $(paramTemplate);\n\n          $paramLink.appendTo($paramsContainer);\n          $input.appendTo($paramsContainer);\n\n          $input.blur(partial(inputBlur, index));\n          $input.keyup(inputKeyDown);\n          $input.keypress(partial(inputKeyPress, index));\n          $paramLink.click(partial(clickFuncParam, index));\n\n          addTypeahead($input, param, index);\n        });\n      }\n\n      function relink() {\n        $paramsContainer.empty();\n        addElementsAndCompile();\n      }\n\n      relink();\n    },\n  };\n}\n","import { ISCEService } from 'angular';\nimport { debounce, find, indexOf, map, isObject, escape, unescape } from 'lodash';\n\nimport coreModule from '../../core_module';\nimport { promiseToDigest } from '../../promiseToDigest';\n\nfunction typeaheadMatcher(this: any, item: string) {\n  let str = this.query;\n  if (str === '') {\n    return true;\n  }\n  if (str[0] === '/') {\n    str = str.substring(1);\n  }\n  if (str[str.length - 1] === '/') {\n    str = str.substring(0, str.length - 1);\n  }\n  return item.toLowerCase().match(str.toLowerCase());\n}\n\nexport class FormDropdownCtrl {\n  inputElement: JQLite;\n  linkElement: JQLite;\n  model: any;\n  display: any;\n  text: any;\n  options: any;\n  cssClass: any;\n  cssClasses: any;\n  allowCustom: any;\n  labelMode: boolean;\n  linkMode: boolean;\n  cancelBlur: any;\n  onChange: any;\n  getOptions: any;\n  optionCache: any;\n  lookupText: boolean;\n  placeholder: any;\n  startOpen: any;\n  debounce: boolean;\n\n  static $inject = ['$scope', '$element', '$sce', 'templateSrv'];\n\n  constructor(\n    private $scope: any,\n    $element: JQLite,\n    private $sce: ISCEService,\n    private templateSrv: any\n  ) {\n    this.inputElement = $element.find('input').first();\n    this.linkElement = $element.find('a').first();\n    this.linkMode = true;\n    this.cancelBlur = null;\n    this.labelMode = false;\n    this.lookupText = false;\n    this.debounce = false;\n\n    // listen to model changes\n    $scope.$watch('ctrl.model', this.modelChanged.bind(this));\n  }\n\n  $onInit() {\n    if (this.labelMode) {\n      this.cssClasses = 'gf-form-label ' + this.cssClass;\n    } else {\n      this.cssClasses = 'gf-form-input gf-form-input--dropdown ' + this.cssClass;\n    }\n\n    if (this.placeholder) {\n      this.inputElement.attr('placeholder', this.placeholder);\n    }\n\n    this.inputElement.attr('data-provide', 'typeahead');\n    this.inputElement.typeahead({\n      source: this.typeaheadSource.bind(this),\n      minLength: 0,\n      items: 10000,\n      updater: this.typeaheadUpdater.bind(this),\n      matcher: typeaheadMatcher,\n    });\n\n    // modify typeahead lookup\n    // this = typeahead\n    const typeahead = this.inputElement.data('typeahead');\n    typeahead.lookup = function () {\n      this.query = this.$element.val() || '';\n      this.source(this.query, this.process.bind(this));\n    };\n\n    if (this.debounce) {\n      typeahead.lookup = debounce(typeahead.lookup, 500, { leading: true });\n    }\n\n    this.linkElement.keydown((evt) => {\n      // trigger typeahead on down arrow or enter key\n      if (evt.keyCode === 40 || evt.keyCode === 13) {\n        this.linkElement.click();\n      }\n    });\n\n    this.inputElement.keydown((evt) => {\n      if (evt.keyCode === 13) {\n        setTimeout(() => {\n          this.inputElement.blur();\n        }, 300);\n      }\n    });\n\n    this.inputElement.blur(this.inputBlur.bind(this));\n\n    if (this.startOpen) {\n      setTimeout(this.open.bind(this), 0);\n    }\n  }\n\n  getOptionsInternal(query: string) {\n    return promiseToDigest(this.$scope)(Promise.resolve(this.getOptions({ $query: query })));\n  }\n\n  isPromiseLike(obj: any) {\n    return obj && typeof obj.then === 'function';\n  }\n\n  modelChanged() {\n    if (isObject(this.model)) {\n      this.updateDisplay((this.model as any).text);\n    } else {\n      // if we have text use it\n      if (this.lookupText) {\n        this.getOptionsInternal('').then((options: any) => {\n          const item: any = find(options, { value: this.model });\n          this.updateDisplay(item ? item.text : this.model);\n        });\n      } else {\n        this.updateDisplay(this.model);\n      }\n    }\n  }\n\n  typeaheadSource(query: string, callback: (res: any) => void) {\n    this.getOptionsInternal(query).then((options: any) => {\n      this.optionCache = options;\n\n      // extract texts\n      const optionTexts = map(options, (op: any) => {\n        return escape(op.text);\n      });\n\n      // add custom values\n      if (this.allowCustom && this.text !== '') {\n        if (indexOf(optionTexts, this.text) === -1) {\n          optionTexts.unshift(this.text);\n        }\n      }\n\n      callback(optionTexts);\n    });\n  }\n\n  typeaheadUpdater(text: string) {\n    if (text === this.text) {\n      clearTimeout(this.cancelBlur);\n      this.inputElement.focus();\n      return text;\n    }\n\n    this.inputElement.val(text);\n    this.switchToLink(true);\n    return text;\n  }\n\n  switchToLink(fromClick: boolean) {\n    if (this.linkMode && !fromClick) {\n      return;\n    }\n\n    clearTimeout(this.cancelBlur);\n    this.cancelBlur = null;\n    this.linkMode = true;\n    this.inputElement.hide();\n    this.linkElement.show();\n    this.updateValue(this.inputElement.val() as string);\n  }\n\n  inputBlur() {\n    // happens long before the click event on the typeahead options\n    // need to have long delay because the blur\n    this.cancelBlur = setTimeout(this.switchToLink.bind(this), 200);\n  }\n\n  updateValue(text: string) {\n    text = unescape(text);\n\n    if (text === '' || this.text === text) {\n      return;\n    }\n\n    this.$scope.$apply(() => {\n      const option: any = find(this.optionCache, { text: text });\n\n      if (option) {\n        if (isObject(this.model)) {\n          this.model = option;\n        } else {\n          this.model = option.value;\n        }\n        this.text = option.text;\n      } else if (this.allowCustom) {\n        if (isObject(this.model)) {\n          (this.model as any).text = (this.model as any).value = text;\n        } else {\n          this.model = text;\n        }\n        this.text = text;\n      }\n\n      // needs to call this after digest so\n      // property is synced with outerscope\n      this.$scope.$$postDigest(() => {\n        this.$scope.$apply(() => {\n          this.onChange({ $option: option });\n        });\n      });\n    });\n  }\n\n  updateDisplay(text: string) {\n    this.text = text;\n    this.display = this.$sce.trustAsHtml(this.templateSrv.highlightVariablesAsHtml(text));\n  }\n\n  open() {\n    this.inputElement.css('width', Math.max(this.linkElement.width()!, 80) + 16 + 'px');\n\n    this.inputElement.show();\n    this.inputElement.focus();\n\n    this.linkElement.hide();\n    this.linkMode = false;\n\n    const typeahead = this.inputElement.data('typeahead');\n    if (typeahead) {\n      this.inputElement.val('');\n      typeahead.lookup();\n    }\n  }\n}\n\nconst template = `\n<input type=\"text\"\n  data-provide=\"typeahead\"\n  class=\"gf-form-input\"\n  spellcheck=\"false\"\n  style=\"display:none\">\n</input>\n<a ng-class=\"ctrl.cssClasses\"\n   tabindex=\"1\"\n   ng-click=\"ctrl.open()\"\n   give-focus=\"ctrl.focus\"\n   ng-bind-html=\"ctrl.display || '&nbsp;'\">\n</a>\n`;\n\nexport function formDropdownDirective() {\n  return {\n    restrict: 'E',\n    template: template,\n    controller: FormDropdownCtrl,\n    bindToController: true,\n    controllerAs: 'ctrl',\n    scope: {\n      model: '=',\n      getOptions: '&',\n      onChange: '&',\n      cssClass: '@',\n      allowCustom: '@',\n      labelMode: '@',\n      lookupText: '@',\n      placeholder: '@',\n      startOpen: '@',\n      debounce: '@',\n    },\n  };\n}\n\ncoreModule.directive('gfFormDropdown', formDropdownDirective);\n","// @ts-ignore\nimport baron from 'baron';\nimport $ from 'jquery';\n\nimport coreModule from 'app/angular/core_module';\n\nconst scrollBarHTML = `\n<div class=\"baron__track\">\n  <div class=\"baron__bar\"></div>\n</div>\n`;\n\nconst scrollRootClass = 'baron baron__root';\nconst scrollerClass = 'baron__scroller';\n\nexport function geminiScrollbar() {\n  return {\n    restrict: 'A',\n    link: (scope: any, elem: any, attrs: any) => {\n      let scrollRoot = elem.parent();\n      const scroller = elem;\n\n      if (attrs.grafanaScrollbar && attrs.grafanaScrollbar === 'scrollonroot') {\n        scrollRoot = scroller;\n      }\n\n      scrollRoot.addClass(scrollRootClass);\n      $(scrollBarHTML).appendTo(scrollRoot);\n      elem.addClass(scrollerClass);\n\n      const scrollParams = {\n        root: scrollRoot[0],\n        scroller: scroller[0],\n        bar: '.baron__bar',\n        barOnCls: '_scrollbar',\n        scrollingCls: '_scrolling',\n        track: '.baron__track',\n        direction: 'v',\n      };\n\n      const scrollbar = baron(scrollParams);\n\n      scope.$on('$destroy', () => {\n        scrollbar.dispose();\n      });\n    },\n  };\n}\n\ncoreModule.directive('grafanaScrollbar', geminiScrollbar);\n","import { JsonExplorer } from '@grafana/ui';\nimport coreModule from 'app/angular/core_module';\n\ncoreModule.directive('jsonTree', [\n  function jsonTreeDirective() {\n    return {\n      restrict: 'E',\n      scope: {\n        object: '=',\n        startExpanded: '@',\n        rootName: '@',\n      },\n      link: (scope: any, elem) => {\n        let expansionLevel = scope.startExpanded;\n        if (scope.startExpanded === 'true') {\n          expansionLevel = 2;\n        } else if (scope.startExpanded === 'false') {\n          expansionLevel = 1;\n        }\n        const jsonObject = { [scope.rootName]: scope.object };\n        const jsonExp = new JsonExplorer(jsonObject, expansionLevel, {\n          animateOpen: true,\n        });\n        const html = jsonExp.render(true);\n        elem.append(html);\n      },\n    };\n  },\n]);\n","import coreModule from 'app/angular/core_module';\n\nconst template = `\n<label for=\"check-{{ctrl.id}}\" class=\"gf-form-switch-container\">\n  <div class=\"gf-form-label {{ctrl.labelClass}}\" ng-show=\"ctrl.label\">\n    {{ctrl.label}}\n    <info-popover mode=\"right-normal\" ng-if=\"ctrl.tooltip\" position=\"top center\">\n      {{ctrl.tooltip}}\n    </info-popover>\n  </div>\n  <div class=\"gf-form-switch {{ctrl.switchClass}}\" ng-if=\"ctrl.show\">\n    <input id=\"check-{{ctrl.id}}\" type=\"checkbox\" ng-model=\"ctrl.checked\" ng-change=\"ctrl.internalOnChange()\">\n    <span class=\"gf-form-switch__slider\"></span>\n  </div>\n</label>\n`;\n\nconst checkboxTemplate = `\n<label for=\"check-{{ctrl.id}}\" class=\"gf-form-switch-container\">\n   <div class=\"gf-form-label {{ctrl.labelClass}}\" ng-show=\"ctrl.label\">\n    {{ctrl.label}}\n    <info-popover mode=\"right-normal\" ng-if=\"ctrl.tooltip\" position=\"top center\">\n      {{ctrl.tooltip}}\n    </info-popover>\n  </div>\n  <div class=\"gf-form-checkbox {{ctrl.switchClass}}\" ng-if=\"ctrl.show\">\n    <input id=\"check-{{ctrl.id}}\" type=\"checkbox\" ng-model=\"ctrl.checked\" ng-change=\"ctrl.internalOnChange()\">\n    <span class=\"gf-form-switch__checkbox\"></span>\n  </div>\n</label>\n`;\n\nexport class SwitchCtrl {\n  onChange: any;\n  checked: any;\n  show: any;\n  id: any;\n  label?: string;\n\n  static $inject = ['$scope', '$timeout'];\n\n  constructor(\n    $scope: any,\n    private $timeout: any\n  ) {\n    this.show = true;\n    this.id = $scope.$id;\n  }\n\n  internalOnChange() {\n    return this.$timeout(() => {\n      return this.onChange();\n    });\n  }\n}\n\nexport function switchDirective() {\n  return {\n    restrict: 'E',\n    controller: SwitchCtrl,\n    controllerAs: 'ctrl',\n    bindToController: true,\n    scope: {\n      checked: '=',\n      label: '@',\n      labelClass: '@',\n      tooltip: '@',\n      switchClass: '@',\n      onChange: '&',\n    },\n    template: template,\n  };\n}\n\nexport function checkboxDirective() {\n  return {\n    restrict: 'E',\n    controller: SwitchCtrl,\n    controllerAs: 'ctrl',\n    bindToController: true,\n    scope: {\n      checked: '=',\n      label: '@',\n      labelClass: '@',\n      tooltip: '@',\n      switchClass: '@',\n      onChange: '&',\n    },\n    template: checkboxTemplate,\n  };\n}\n\ncoreModule.directive('gfFormSwitch', switchDirective);\ncoreModule.directive('gfFormCheckbox', checkboxDirective);\n","import { each } from 'lodash';\n// @ts-ignore\nimport Drop from 'tether-drop';\n\nimport coreModule from 'app/angular/core_module';\n\nexport function infoPopover() {\n  return {\n    restrict: 'E',\n    template: `<icon name=\"'info-circle'\" style=\"margin-left: 10px;\" size=\"'xs'\"></icon>`,\n    transclude: true,\n    link: (scope: any, elem: any, attrs: any, ctrl: any, transclude: any) => {\n      const offset = attrs.offset || '0 -10px';\n      const position = attrs.position || 'right middle';\n      let classes = 'drop-help drop-hide-out-of-bounds';\n      const openOn = 'hover';\n\n      elem.addClass('gf-form-help-icon');\n\n      if (attrs.wide) {\n        classes += ' drop-wide';\n      }\n\n      if (attrs.mode) {\n        elem.addClass('gf-form-help-icon--' + attrs.mode);\n      }\n\n      transclude((clone: any, newScope: any) => {\n        const content = document.createElement('div');\n        content.className = 'markdown-html';\n\n        each(clone, (node) => {\n          content.appendChild(node);\n        });\n\n        const dropOptions = {\n          target: elem[0],\n          content: content,\n          position: position,\n          classes: classes,\n          openOn: openOn,\n          hoverOpenDelay: 400,\n          tetherOptions: {\n            offset: offset,\n            constraints: [\n              {\n                to: 'window',\n                attachment: 'together',\n                pin: true,\n              },\n            ],\n          },\n        };\n\n        // Create drop in next digest after directive content is rendered.\n        scope.$applyAsync(() => {\n          const drop = new Drop(dropOptions);\n\n          const unbind = scope.$on('$destroy', () => {\n            drop.destroy();\n            unbind();\n          });\n        });\n      });\n    },\n  };\n}\n\ncoreModule.directive('infoPopover', infoPopover);\n","/**\n * Wrapper for the new ngReact <color-picker> directive for backward compatibility.\n * Allows remaining <spectrum-picker> untouched in outdated plugins.\n * Technically, it's just a wrapper for react component with two-way data binding support.\n */\nimport coreModule from '../core_module';\n\ncoreModule.directive('spectrumPicker', spectrumPicker);\n\nexport function spectrumPicker() {\n  return {\n    restrict: 'E',\n    require: 'ngModel',\n    scope: true,\n    replace: true,\n    template: '<color-picker color=\"ngModel.$viewValue\" on-change=\"onColorChange\"></color-picker>',\n    link: (scope: any, element: any, attrs: any, ngModel: any) => {\n      scope.ngModel = ngModel;\n      scope.onColorChange = (color: string) => {\n        ngModel.$setViewValue(color);\n      };\n    },\n  };\n}\n","/**\n * codeEditor directive based on Ace code editor\n * https://github.com/ajaxorg/ace\n *\n * Basic usage:\n * <code-editor content=\"ctrl.target.query\" on-change=\"ctrl.panelCtrl.refresh()\"\n *  data-mode=\"sql\" data-show-gutter>\n * </code-editor>\n *\n * Params:\n * content:      Editor content.\n * onChange:     Function called on content change (invoked on editor blur, ctrl+enter, not on every change).\n * getCompleter: Function returned external completer. Completer is an object implemented getCompletions() method,\n *               see Prometheus Data Source implementation for details.\n *\n * Some Ace editor options available via data-* attributes:\n * data-mode               - Language mode (text, sql, javascript, etc.). Default is 'text'.\n * data-theme              - Editor theme (eg 'solarized_dark').\n * data-max-lines          - Max editor height in lines. Editor grows automatically from 1 to maxLines.\n * data-show-gutter        - Show gutter (contains line numbers and additional info).\n * data-tab-size           - Tab size, default is 2.\n * data-behaviours-enabled - Specifies whether to use behaviors or not. \"Behaviors\" in this case is the auto-pairing of\n *                           special characters, like quotation marks, parenthesis, or brackets.\n * data-snippets-enabled   - Specifies whether to use snippets or not. \"Snippets\" are small pieces of code that can be\n *                           inserted via the completion box.\n *\n * Keybindings:\n * Ctrl-Enter (Command-Enter): run onChange() function\n */\n\nimport coreModule from 'app/angular/core_module';\nimport config from 'app/core/config';\n\nconst DEFAULT_THEME_DARK = 'ace/theme/grafana-dark';\nconst DEFAULT_THEME_LIGHT = 'ace/theme/textmate';\nconst DEFAULT_MODE = 'text';\nconst DEFAULT_MAX_LINES = 10;\nconst DEFAULT_TAB_SIZE = 2;\nconst DEFAULT_BEHAVIORS = true;\nconst DEFAULT_SNIPPETS = true;\n\nconst editorTemplate = `<div></div>`;\n\nasync function link(scope: any, elem: any, attrs: any) {\n  // Options\n  const langMode = attrs.mode || DEFAULT_MODE;\n  const maxLines = attrs.maxLines || DEFAULT_MAX_LINES;\n  const showGutter = attrs.showGutter !== undefined;\n  const tabSize = attrs.tabSize || DEFAULT_TAB_SIZE;\n  const behavioursEnabled = attrs.behavioursEnabled ? attrs.behavioursEnabled === 'true' : DEFAULT_BEHAVIORS;\n  const snippetsEnabled = attrs.snippetsEnabled ? attrs.snippetsEnabled === 'true' : DEFAULT_SNIPPETS;\n\n  // Initialize editor\n  const aceElem = elem.get(0);\n  const { default: ace } = await import(/* webpackChunkName: \"brace\" */ 'brace');\n  await import('brace/ext/language_tools');\n  await import('brace/theme/textmate');\n  await import('brace/mode/text');\n  await import('brace/snippets/text');\n  await import('brace/mode/sql');\n  await import('brace/snippets/sql');\n  await import('brace/mode/sqlserver');\n  await import('brace/snippets/sqlserver');\n  await import('brace/mode/markdown');\n  await import('brace/snippets/markdown');\n  await import('brace/mode/json');\n  await import('brace/snippets/json');\n\n  // @ts-ignore\n  await import('./theme-grafana-dark');\n\n  const codeEditor = ace.edit(aceElem);\n  const editorSession = codeEditor.getSession();\n\n  const editorOptions = {\n    maxLines: maxLines,\n    showGutter: showGutter,\n    tabSize: tabSize,\n    behavioursEnabled: behavioursEnabled,\n    highlightActiveLine: false,\n    showPrintMargin: false,\n    autoScrollEditorIntoView: true, // this is needed if editor is inside scrollable page\n  };\n\n  // Set options\n  codeEditor.setOptions(editorOptions);\n  // disable depreacation warning\n  codeEditor.$blockScrolling = Infinity;\n  // Padding hacks\n  (codeEditor.renderer as any).setScrollMargin(10, 10);\n  codeEditor.renderer.setPadding(10);\n\n  setThemeMode();\n  setLangMode(langMode);\n  setEditorContent(scope.content);\n\n  // Add classes\n  elem.addClass('gf-code-editor');\n  const textarea = elem.find('textarea');\n  textarea.addClass('gf-form-input');\n\n  // All aria-label to be set for accessibility\n  textarea.attr('aria-label', attrs.textareaLabel);\n\n  if (scope.codeEditorFocus) {\n    setTimeout(() => {\n      textarea.focus();\n      const domEl = textarea[0];\n      if (domEl.setSelectionRange) {\n        const pos = textarea.val().length * 2;\n        domEl.setSelectionRange(pos, pos);\n      }\n    }, 100);\n  }\n\n  // Event handlers\n  editorSession.on('change', (e) => {\n    scope.$apply(() => {\n      const newValue = codeEditor.getValue();\n      scope.content = newValue;\n    });\n  });\n\n  // Sync with outer scope - update editor content if model has been changed from outside of directive.\n  scope.$watch('content', (newValue: any, oldValue: any) => {\n    const editorValue = codeEditor.getValue();\n    if (newValue !== editorValue && newValue !== oldValue) {\n      scope.$$postDigest(() => {\n        setEditorContent(newValue);\n      });\n    }\n  });\n\n  codeEditor.on('blur', () => {\n    scope.onChange();\n  });\n\n  scope.$on('$destroy', () => {\n    codeEditor.destroy();\n  });\n\n  // Keybindings\n  codeEditor.commands.addCommand({\n    name: 'executeQuery',\n    bindKey: { win: 'Ctrl-Enter', mac: 'Command-Enter' },\n    exec: () => {\n      scope.onChange();\n    },\n  });\n\n  function setLangMode(lang: string) {\n    ace.acequire('ace/ext/language_tools');\n    codeEditor.setOptions({\n      enableBasicAutocompletion: true,\n      enableLiveAutocompletion: true,\n      enableSnippets: snippetsEnabled,\n    });\n\n    if (scope.getCompleter()) {\n      // make copy of array as ace seems to share completers array between instances\n      const anyEditor = codeEditor as any;\n      anyEditor.completers = anyEditor.completers.slice();\n      anyEditor.completers.push(scope.getCompleter());\n    }\n\n    const aceModeName = `ace/mode/${lang}`;\n    editorSession.setMode(aceModeName);\n  }\n\n  function setThemeMode() {\n    let theme = DEFAULT_THEME_DARK;\n    if (config.bootData.user.lightTheme) {\n      theme = DEFAULT_THEME_LIGHT;\n    }\n\n    codeEditor.setTheme(theme);\n  }\n\n  function setEditorContent(value: string) {\n    codeEditor.setValue(value);\n    codeEditor.clearSelection();\n  }\n}\n\nexport function codeEditorDirective() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n    scope: {\n      content: '=',\n      datasource: '=',\n      codeEditorFocus: '<',\n      onChange: '&',\n      getCompleter: '&',\n    },\n    link: link,\n  };\n}\n\ncoreModule.directive('codeEditor', codeEditorDirective);\n","import $ from 'jquery';\nimport { debounce, each, indexOf, map, partial, escape, unescape } from 'lodash';\n\nimport coreModule from 'app/angular/core_module';\n\nconst template = `\n<div class=\"dropdown cascade-open\">\n<a ng-click=\"showActionsMenu()\" class=\"query-part-name pointer dropdown-toggle\" data-toggle=\"dropdown\">{{part.label}}</a>\n<span>{{part.def.wrapOpen}}</span><span class=\"query-part-parameters\"></span><span>{{part.def.wrapClose}}</span>\n<ul class=\"dropdown-menu\">\n  <li ng-repeat=\"action in partActions\">\n    <a ng-click=\"triggerPartAction(action)\">{{action.text}}</a>\n  </li>\n</ul>\n`;\n\ncoreModule.directive('sqlPartEditor', ['templateSrv', sqlPartEditorDirective]);\n\nexport function sqlPartEditorDirective(templateSrv: any) {\n  const paramTemplate = '<input type=\"text\" class=\"hide input-mini\"></input>';\n\n  return {\n    restrict: 'E',\n    template: template,\n    scope: {\n      part: '=',\n      handleEvent: '&',\n      debounce: '@',\n    },\n    link: function postLink($scope: any, elem: any) {\n      const part = $scope.part;\n      const partDef = part.def;\n      const $paramsContainer = elem.find('.query-part-parameters');\n      const debounceLookup = $scope.debounce;\n      let cancelBlur: any = null;\n\n      $scope.partActions = [];\n\n      function clickFuncParam(this: any, paramIndex: number) {\n        const $link = $(this);\n        const $input = $link.next();\n\n        $input.val(part.params[paramIndex]);\n        $input.css('width', $link.width()! + 16 + 'px');\n\n        $link.hide();\n        $input.show();\n        $input.focus();\n        $input.select();\n\n        const typeahead = $input.data('typeahead');\n        if (typeahead) {\n          $input.val('');\n          typeahead.lookup();\n        }\n      }\n\n      function inputBlur($input: JQuery, paramIndex: number) {\n        cancelBlur = setTimeout(() => {\n          switchToLink($input, paramIndex);\n        }, 200);\n      }\n\n      function switchToLink($input: JQuery, paramIndex: number) {\n        const $link = $input.prev();\n        const newValue = $input.val();\n\n        if (newValue !== '' || part.def.params[paramIndex].optional) {\n          $link.html(templateSrv.highlightVariablesAsHtml(newValue));\n\n          part.updateParam($input.val(), paramIndex);\n          $scope.$apply(() => {\n            $scope.handleEvent({ $event: { name: 'part-param-changed' } });\n          });\n        }\n\n        $input.hide();\n        $link.show();\n      }\n\n      function inputKeyPress(this: any, paramIndex: number, e: any) {\n        if (e.which === 13) {\n          switchToLink($(this), paramIndex);\n        }\n      }\n\n      function inputKeyDown(this: any) {\n        this.style.width = (3 + this.value.length) * 8 + 'px';\n      }\n\n      function addTypeahead($input: JQuery, param: any, paramIndex: number) {\n        if (!param.options && !param.dynamicLookup) {\n          return;\n        }\n\n        const typeaheadSource = (query: string, callback: any) => {\n          if (param.options) {\n            let options = param.options;\n            if (param.type === 'int') {\n              options = map(options, (val) => {\n                return val.toString();\n              });\n            }\n            return options;\n          }\n\n          $scope.$apply(() => {\n            $scope.handleEvent({ $event: { name: 'get-param-options', param: param } }).then((result: any) => {\n              const dynamicOptions = map(result, (op) => {\n                return escape(op.value);\n              });\n\n              // add current value to dropdown if it's not in dynamicOptions\n              if (indexOf(dynamicOptions, part.params[paramIndex]) === -1) {\n                dynamicOptions.unshift(escape(part.params[paramIndex]));\n              }\n\n              callback(dynamicOptions);\n            });\n          });\n        };\n\n        $input.attr('data-provide', 'typeahead');\n\n        $input.typeahead({\n          source: typeaheadSource,\n          minLength: 0,\n          items: 1000,\n          updater: (value: string) => {\n            value = unescape(value);\n            if (value === part.params[paramIndex]) {\n              clearTimeout(cancelBlur);\n              $input.focus();\n              return value;\n            }\n            return value;\n          },\n        });\n\n        const typeahead = $input.data('typeahead');\n        typeahead.lookup = function () {\n          this.query = this.$element.val() || '';\n          const items = this.source(this.query, $.proxy(this.process, this));\n          return items ? this.process(items) : items;\n        };\n\n        if (debounceLookup) {\n          typeahead.lookup = debounce(typeahead.lookup, 500, { leading: true });\n        }\n      }\n\n      $scope.showActionsMenu = () => {\n        $scope.handleEvent({ $event: { name: 'get-part-actions' } }).then((res: any) => {\n          $scope.partActions = res;\n        });\n      };\n\n      $scope.triggerPartAction = (action: string) => {\n        $scope.handleEvent({ $event: { name: 'action', action: action } });\n      };\n\n      function addElementsAndCompile() {\n        each(partDef.params, (param: any, index: number) => {\n          if (param.optional && part.params.length <= index) {\n            return;\n          }\n\n          if (index > 0) {\n            $('<span>' + partDef.separator + '</span>').appendTo($paramsContainer);\n          }\n\n          const paramValue = templateSrv.highlightVariablesAsHtml(part.params[index]);\n          const $paramLink = $('<a class=\"query-part__link\">' + paramValue + '</a>');\n          const $input = $(paramTemplate);\n\n          $paramLink.appendTo($paramsContainer);\n          $input.appendTo($paramsContainer);\n\n          $input.blur(partial(inputBlur, $input, index));\n          $input.keyup(inputKeyDown);\n          $input.keypress(partial(inputKeyPress, index));\n          $paramLink.click(partial(clickFuncParam, index));\n\n          addTypeahead($input, param, index);\n        });\n      }\n\n      function relink() {\n        $paramsContainer.empty();\n        addElementsAndCompile();\n      }\n\n      relink();\n    },\n  };\n}\n","import { coreModule } from 'app/angular/core_module';\n\ncoreModule.directive('datasourceHttpSettings', () => {\n  return {\n    scope: {\n      current: '=',\n      suggestUrl: '@',\n      noDirectAccess: '@',\n      showForwardOAuthIdentityOption: '@',\n    },\n    templateUrl: 'public/app/angular/partials/http_settings_next.html',\n    link: {\n      pre: ($scope: any) => {\n        // do not show access option if direct access is disabled\n        $scope.showAccessOption = $scope.noDirectAccess !== 'true';\n        $scope.onChange = (datasourceSetting: any) => {\n          $scope.current = datasourceSetting;\n        };\n      },\n    },\n  };\n});\n","import { coreModule } from 'app/angular/core_module';\n\ncoreModule.directive('datasourceTlsAuthSettings', () => {\n  return {\n    scope: {\n      current: '=',\n    },\n    templateUrl: 'public/app/angular/partials/tls_auth_settings.html',\n  };\n});\n","import angular, { ILocationService } from 'angular';\nimport { each } from 'lodash';\n\nimport { DataSourceApi, PanelEvents } from '@grafana/data';\nimport coreModule from 'app/angular/core_module';\nimport config from 'app/core/config';\n\nimport { importPanelPlugin } from '../../features/plugins/importPanelPlugin';\nimport { importDataSourcePlugin, importAppPlugin } from '../../features/plugins/plugin_loader';\n\ncoreModule.directive('pluginComponent', ['$compile', '$http', '$templateCache', '$location', pluginDirectiveLoader]);\n\nfunction pluginDirectiveLoader($compile: any, $http: any, $templateCache: any, $location: ILocationService) {\n  function getTemplate(component: { template: any; templateUrl: any }) {\n    if (component.template) {\n      return Promise.resolve(component.template);\n    }\n    const cached = $templateCache.get(component.templateUrl);\n    if (cached) {\n      return Promise.resolve(cached);\n    }\n    return $http.get(component.templateUrl).then((res: any) => {\n      return res.data;\n    });\n  }\n\n  function relativeTemplateUrlToAbs(templateUrl: string, baseUrl: string) {\n    if (!templateUrl) {\n      return undefined;\n    }\n    if (templateUrl.indexOf('public') === 0) {\n      return templateUrl;\n    }\n\n    return baseUrl + '/' + templateUrl;\n  }\n\n  function getPluginComponentDirective(options: any) {\n    // handle relative template urls for plugin templates\n    options.Component.templateUrl = relativeTemplateUrlToAbs(options.Component.templateUrl, options.baseUrl);\n\n    return () => {\n      return {\n        templateUrl: options.Component.templateUrl,\n        template: options.Component.template,\n        restrict: 'E',\n        controller: options.Component,\n        controllerAs: 'ctrl',\n        bindToController: true,\n        scope: options.bindings,\n        link: (scope: any, elem: any, attrs: any, ctrl: any) => {\n          if (ctrl.link) {\n            ctrl.link(scope, elem, attrs, ctrl);\n          }\n          if (ctrl.init) {\n            ctrl.init();\n          }\n        },\n      };\n    };\n  }\n\n  function loadPanelComponentInfo(scope: any, attrs: any) {\n    const componentInfo: any = {\n      name: 'panel-plugin-' + scope.panel.type,\n      bindings: { dashboard: '=', panel: '=', row: '=' },\n      attrs: {\n        dashboard: 'dashboard',\n        panel: 'panel',\n        class: 'panel-height-helper',\n      },\n    };\n\n    const panelInfo = config.panels[scope.panel.type];\n    return importPanelPlugin(panelInfo.id).then((panelPlugin) => {\n      const PanelCtrl = panelPlugin.angularPanelCtrl;\n      componentInfo.Component = PanelCtrl;\n\n      if (!PanelCtrl || PanelCtrl.registered) {\n        return componentInfo;\n      }\n\n      if (PanelCtrl.templatePromise) {\n        return PanelCtrl.templatePromise.then((res: any) => {\n          return componentInfo;\n        });\n      }\n\n      if (panelInfo) {\n        PanelCtrl.templateUrl = relativeTemplateUrlToAbs(PanelCtrl.templateUrl, panelInfo.baseUrl);\n      }\n\n      PanelCtrl.templatePromise = getTemplate(PanelCtrl).then((template: any) => {\n        PanelCtrl.templateUrl = null;\n        PanelCtrl.template = `<grafana-panel ctrl=\"ctrl\" class=\"panel-height-helper\">${template}</grafana-panel>`;\n        return { ...componentInfo, baseUrl: panelInfo.baseUrl };\n      });\n\n      return PanelCtrl.templatePromise;\n    });\n  }\n\n  function getModule(scope: any, attrs: any): any {\n    switch (attrs.type) {\n      // QueryCtrl\n      case 'query-ctrl': {\n        const ds: DataSourceApi = scope.ctrl.datasource as DataSourceApi;\n\n        return Promise.resolve({\n          baseUrl: ds.meta.baseUrl,\n          name: 'query-ctrl-' + ds.meta.id,\n          bindings: { target: '=', panelCtrl: '=', datasource: '=' },\n          attrs: {\n            target: 'ctrl.target',\n            'panel-ctrl': 'ctrl',\n            datasource: 'ctrl.datasource',\n          },\n          Component: ds.components!.QueryCtrl,\n        });\n      }\n      // Annotations\n      case 'annotations-query-ctrl': {\n        const baseUrl = scope.ctrl.currentDatasource.meta.baseUrl;\n        const pluginId = scope.ctrl.currentDatasource.meta.id;\n\n        return importDataSourcePlugin(scope.ctrl.currentDatasource.meta).then((dsPlugin) => {\n          return {\n            baseUrl,\n            name: 'annotations-query-ctrl-' + pluginId,\n            bindings: { annotation: '=', datasource: '=' },\n            attrs: {\n              annotation: 'ctrl.currentAnnotation',\n              datasource: 'ctrl.currentDatasource',\n            },\n            Component: dsPlugin.components.AnnotationsQueryCtrl,\n          };\n        });\n      }\n      // Datasource ConfigCtrl\n      case 'datasource-config-ctrl': {\n        const dsMeta = scope.ctrl.datasourceMeta;\n        const angularUrl = $location.url();\n        return importDataSourcePlugin(dsMeta).then((dsPlugin) => {\n          scope.$watch(\n            'ctrl.current',\n            () => {\n              // This watcher can trigger when we navigate away due to late digests\n              // This check is to stop onModelChanged from being called when navigating away\n              // as it triggers a redux action which comes before the angular $routeChangeSucces and\n              // This makes the bridgeSrv think location changed from redux before detecting it was actually\n              // changed from angular.\n              if (angularUrl === $location.url()) {\n                scope.onModelChanged(scope.ctrl.current);\n              }\n            },\n            true\n          );\n\n          return {\n            baseUrl: dsMeta.baseUrl,\n            name: 'ds-config-' + dsMeta.id,\n            bindings: { meta: '=', current: '=' },\n            attrs: { meta: 'ctrl.datasourceMeta', current: 'ctrl.current' },\n            Component: dsPlugin.angularConfigCtrl,\n          };\n        });\n      }\n      // AppConfigCtrl\n      case 'app-config-ctrl': {\n        const model = scope.ctrl.model;\n        return importAppPlugin(model).then((appPlugin) => {\n          return {\n            baseUrl: model.baseUrl,\n            name: 'app-config-' + model.id,\n            bindings: { appModel: '=', appEditCtrl: '=' },\n            attrs: { 'app-model': 'ctrl.model', 'app-edit-ctrl': 'ctrl' },\n            Component: appPlugin.angularConfigCtrl,\n          };\n        });\n      }\n      // Panel\n      case 'panel': {\n        return loadPanelComponentInfo(scope, attrs);\n      }\n      default: {\n        return Promise.reject({\n          message: 'Could not find component type: ' + attrs.type,\n        });\n      }\n    }\n  }\n\n  function appendAndCompile(scope: any, elem: JQuery, componentInfo: any) {\n    const child = angular.element(document.createElement(componentInfo.name));\n    each(componentInfo.attrs, (value, key) => {\n      child.attr(key, value);\n    });\n\n    $compile(child)(scope);\n    elem.empty();\n\n    // let a binding digest cycle complete before adding to dom\n    setTimeout(() => {\n      scope.$applyAsync(() => {\n        elem.append(child);\n        setTimeout(() => {\n          scope.$applyAsync(() => {\n            scope.$broadcast(PanelEvents.componentDidMount.name);\n          });\n        });\n      });\n    });\n  }\n\n  function registerPluginComponent(scope: any, elem: JQuery, attrs: any, componentInfo: any) {\n    if (componentInfo.notFound) {\n      elem.empty();\n      return;\n    }\n\n    if (!componentInfo.Component) {\n      throw {\n        message: 'Failed to find exported plugin component for ' + componentInfo.name,\n      };\n    }\n\n    if (!componentInfo.Component.registered) {\n      const directiveName = attrs.$normalize(componentInfo.name);\n      const directiveFn = getPluginComponentDirective(componentInfo);\n      coreModule.directive(directiveName, directiveFn);\n      componentInfo.Component.registered = true;\n    }\n\n    appendAndCompile(scope, elem, componentInfo);\n  }\n\n  return {\n    restrict: 'E',\n    link: (scope: any, elem: JQuery, attrs: any) => {\n      getModule(scope, attrs)\n        .then((componentInfo: any) => {\n          registerPluginComponent(scope, elem, attrs, componentInfo);\n        })\n        .catch((err: any) => {\n          console.error('Plugin component error', err);\n        });\n    },\n  };\n}\n","import { IRootScopeService, IAngularEvent, auto } from 'angular';\nimport $ from 'jquery';\nimport _ from 'lodash'; // eslint-disable-line lodash/import-scope\n\nimport { AppEvent } from '@grafana/data';\nimport { setLegacyAngularInjector, setAngularLoader } from '@grafana/runtime';\nimport { colors } from '@grafana/ui';\nimport coreModule from 'app/angular/core_module';\nimport { AngularLoader } from 'app/angular/services/AngularLoader';\nimport appEvents from 'app/core/app_events';\nimport config from 'app/core/config';\nimport { ContextSrv } from 'app/core/services/context_srv';\nimport { AppEventEmitter, AppEventConsumer } from 'app/types';\n\nimport { UtilSrv } from './services/UtilSrv';\n\nexport type GrafanaRootScope = IRootScopeService & AppEventEmitter & AppEventConsumer & { colors: string[] };\n\nexport class GrafanaCtrl {\n  static $inject = ['$scope', 'utilSrv', '$rootScope', 'contextSrv', 'angularLoader', '$injector'];\n\n  constructor(\n    $scope: any,\n    utilSrv: UtilSrv,\n    $rootScope: GrafanaRootScope,\n    contextSrv: ContextSrv,\n    angularLoader: AngularLoader,\n    $injector: auto.IInjectorService\n  ) {\n    // make angular loader service available to react components\n    setAngularLoader(angularLoader);\n    setLegacyAngularInjector($injector);\n\n    $scope.init = () => {\n      $scope.contextSrv = contextSrv;\n      $scope.appSubUrl = config.appSubUrl;\n      $scope._ = _;\n      utilSrv.init();\n    };\n\n    $rootScope.colors = colors;\n\n    $rootScope.onAppEvent = function <T>(\n      event: AppEvent<T> | string,\n      callback: (event: IAngularEvent, ...args: any[]) => void,\n      localScope?: any\n    ) {\n      let unbind;\n      if (typeof event === 'string') {\n        unbind = $rootScope.$on(event, callback);\n      } else {\n        unbind = $rootScope.$on(event.name, callback);\n      }\n\n      let callerScope = this;\n      if (callerScope.$id === 1 && !localScope) {\n        console.warn('warning rootScope onAppEvent called without localscope');\n      }\n      if (localScope) {\n        callerScope = localScope;\n      }\n      callerScope.$on('$destroy', unbind);\n    };\n\n    $rootScope.appEvent = <T>(event: AppEvent<T> | string, payload?: T | any) => {\n      if (typeof event === 'string') {\n        $rootScope.$emit(event, payload);\n        appEvents.emit(event, payload);\n      } else {\n        $rootScope.$emit(event.name, payload);\n        appEvents.emit(event, payload);\n      }\n    };\n\n    $scope.init();\n  }\n}\n\nexport function grafanaAppDirective() {\n  return {\n    restrict: 'E',\n    controller: GrafanaCtrl,\n    link: (scope: IRootScopeService & AppEventEmitter, elem: JQuery) => {\n      const body = $('body');\n      // see https://github.com/zenorocha/clipboard.js/issues/155\n      $.fn.modal.Constructor.prototype.enforceFocus = () => {};\n\n      // handle in active view state class\n      let lastActivity = new Date().getTime();\n      let activeUser = true;\n      const inActiveTimeLimit = 60 * 5000;\n\n      function checkForInActiveUser() {\n        if (!activeUser) {\n          return;\n        }\n        // only go to activity low mode on dashboard page\n        if (!body.hasClass('page-dashboard')) {\n          return;\n        }\n\n        if (new Date().getTime() - lastActivity > inActiveTimeLimit) {\n          activeUser = false;\n          body.addClass('view-mode--inactive');\n        }\n      }\n\n      function userActivityDetected() {\n        lastActivity = new Date().getTime();\n        if (!activeUser) {\n          activeUser = true;\n          body.removeClass('view-mode--inactive');\n        }\n      }\n\n      // mouse and keyboard is user activity\n      body.mousemove(userActivityDetected);\n      body.keydown(userActivityDetected);\n      // set useCapture = true to catch event here\n      document.addEventListener('wheel', userActivityDetected, { capture: true, passive: true });\n      // treat tab change as activity\n      document.addEventListener('visibilitychange', userActivityDetected);\n\n      // check every 2 seconds\n      setInterval(checkForInActiveUser, 2000);\n\n      // handle document clicks that should hide things\n      body.click((evt) => {\n        const target = $(evt.target);\n        if (target.parents().length === 0) {\n          return;\n        }\n\n        // ensure dropdown menu doesn't impact on z-index\n        body.find('.dropdown-menu-open').removeClass('dropdown-menu-open');\n\n        // for stuff that animates, slides out etc, clicking it needs to\n        // hide it right away\n        const clickAutoHide = target.closest('[data-click-hide]');\n        if (clickAutoHide.length) {\n          const clickAutoHideParent = clickAutoHide.parent();\n          clickAutoHide.detach();\n          setTimeout(() => {\n            clickAutoHideParent.append(clickAutoHide);\n          }, 100);\n        }\n\n        // hide popovers\n        const popover = elem.find('.popover');\n        if (popover.length > 0 && target.parents('.graph-legend').length === 0) {\n          popover.hide();\n        }\n      });\n    },\n  };\n}\n\ncoreModule.directive('grafanaApp', grafanaAppDirective);\n","// This is empty for now, as I think it's not going to be necessary.\n// This replaces Angular RouteParamsProvider implementation with a dummy one to keep the ball rolling\n\nimport { navigationLogger } from '@grafana/runtime';\n\nexport class RouteParamsProvider {\n  constructor() {\n    navigationLogger('Patch angular', false, 'RouteParamsProvider');\n  }\n  $get = () => {\n    // throw new Error('TODO: Refactor $routeParams');\n  };\n}\n","// This is empty for now, as I think it's not going to be necessary.\n// This replaces Angular RouteProvider implementation with a dummy one to keep the ball rolling\n\nimport { navigationLogger } from '@grafana/runtime';\n\nexport class RouteProvider {\n  constructor() {\n    navigationLogger('Patch angular', false, 'RouteProvider');\n  }\n\n  $get() {\n    return this;\n  }\n}\n","import { ILocationService } from 'angular';\n\nimport { RouteParamsProvider } from '../core/navigation/patch/RouteParamsProvider';\nimport { RouteProvider } from '../core/navigation/patch/RouteProvider';\n\nimport { AngularLocationWrapper } from './AngularLocationWrapper';\nimport { coreModule } from './core_module';\n\n// Neutralizing Angular’s location tampering\n// https://stackoverflow.com/a/19825756\nconst tamperAngularLocation = () => {\n  coreModule.config([\n    '$provide',\n    ($provide: any) => {\n      $provide.decorator('$browser', [\n        '$delegate',\n        ($delegate: any) => {\n          $delegate.onUrlChange = () => {};\n          $delegate.url = () => '';\n\n          return $delegate;\n        },\n      ]);\n    },\n  ]);\n};\n\n// Intercepting $location service with implementation based on history\nconst interceptAngularLocation = () => {\n  coreModule.config([\n    '$provide',\n    ($provide: any) => {\n      $provide.decorator('$location', [\n        '$delegate',\n        ($delegate: ILocationService) => {\n          $delegate = new AngularLocationWrapper() as unknown as ILocationService;\n          return $delegate;\n        },\n      ]);\n    },\n  ]);\n  coreModule.provider('$route', RouteProvider);\n  coreModule.provider('$routeParams', RouteParamsProvider);\n};\n\nexport function initAngularRoutingBridge() {\n  tamperAngularLocation();\n  interceptAngularLocation();\n}\n","export function monkeyPatchInjectorWithPreAssignedBindings(injector: any) {\n  injector.oldInvoke = injector.invoke;\n  injector.invoke = (fn: any, self: any, locals: any, serviceName: any) => {\n    const parentScope = locals?.$scope?.$parent;\n\n    if (parentScope) {\n      // PanelCtrl\n      if (parentScope.panel) {\n        self.panel = parentScope.panel;\n      }\n\n      // Panels & dashboard SettingsCtrl\n      if (parentScope.dashboard) {\n        self.dashboard = parentScope.dashboard;\n      }\n\n      // Query editors\n      if (parentScope.ctrl?.target) {\n        self.panelCtrl = parentScope.ctrl;\n        self.datasource = parentScope.ctrl.datasource;\n        self.target = parentScope.ctrl.target;\n      }\n\n      // Data source ConfigCtrl\n      if (parentScope.ctrl?.datasourceMeta) {\n        self.meta = parentScope.ctrl.datasourceMeta;\n        self.current = parentScope.ctrl.current;\n      }\n\n      // Data source AnnotationsQueryCtrl\n      if (parentScope.ctrl?.currentAnnotation) {\n        self.annotation = parentScope.ctrl.currentAnnotation;\n        self.datasource = parentScope.ctrl.currentDatasource;\n      }\n\n      // App config ctrl\n      if (parentScope.isAppConfigCtrl) {\n        self.appEditCtrl = parentScope.ctrl;\n        self.appModel = parentScope.ctrl.model;\n      }\n\n      // App page ctrl\n      if (parentScope.$parent?.$parent?.ctrl?.appModel) {\n        self.appModel = parentScope.$parent?.$parent?.ctrl?.appModel;\n      }\n    }\n\n    return injector.oldInvoke(fn, self, locals, serviceName);\n  };\n}\n","import { ComponentType, useEffect, useRef } from 'react';\nimport { Observable, ReplaySubject } from 'rxjs';\n\nimport { EventBusSrv, PanelData, PanelPlugin, PanelProps, FieldConfigSource } from '@grafana/data';\nimport { AngularComponent, getAngularLoader, RefreshEvent } from '@grafana/runtime';\nimport { getDashboardSrv } from 'app/features/dashboard/services/DashboardSrv';\nimport { DashboardModelCompatibilityWrapper } from 'app/features/dashboard-scene/utils/DashboardModelCompatibilityWrapper';\nimport { GetDataOptions } from 'app/features/query/state/PanelQueryRunner';\nimport { RenderEvent } from 'app/types/events';\n\ninterface AngularScopeProps {\n  panel: PanelModelCompatibilityWrapper;\n  dashboard: DashboardModelCompatibilityWrapper;\n  queryRunner: FakeQueryRunner;\n  size: {\n    height: number;\n    width: number;\n  };\n}\n\nexport function getAngularPanelReactWrapper(plugin: PanelPlugin): ComponentType<PanelProps> {\n  return function AngularWrapper(props: PanelProps) {\n    const divRef = useRef<HTMLDivElement>(null);\n    const angularState = useRef<AngularScopeProps | undefined>();\n    const angularComponent = useRef<AngularComponent | undefined>();\n\n    useEffect(() => {\n      if (!divRef.current) {\n        return;\n      }\n\n      const loader = getAngularLoader();\n      const template = '<plugin-component type=\"panel\" class=\"panel-height-helper\"></plugin-component>';\n      const queryRunner = new FakeQueryRunner();\n      const fakePanel = new PanelModelCompatibilityWrapper(plugin, props, queryRunner);\n\n      angularState.current = {\n        // @ts-ignore\n        panel: fakePanel,\n        // @ts-ignore\n        dashboard: getDashboardSrv().getCurrent(),\n        size: { width: props.width, height: props.height },\n        queryRunner: queryRunner,\n      };\n\n      angularComponent.current = loader.load(divRef.current, angularState.current, template);\n\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    // Re-render angular panel when dimensions change\n    useEffect(() => {\n      if (!angularComponent.current) {\n        return;\n      }\n\n      angularState.current!.size.height = props.height;\n      angularState.current!.size.width = props.width;\n      angularState.current!.panel.events.publish(new RenderEvent());\n    }, [props.width, props.height]);\n\n    // Pass new data to angular panel\n    useEffect(() => {\n      if (!angularState.current?.panel) {\n        return;\n      }\n\n      angularState.current.queryRunner.forwardNewData(props.data);\n    }, [props.data]);\n\n    return <div ref={divRef} className=\"panel-height-helper\" />;\n  };\n}\n\nclass PanelModelCompatibilityWrapper {\n  id: number;\n  type: string;\n  title: string;\n  plugin: PanelPlugin;\n  events: EventBusSrv;\n  queryRunner: FakeQueryRunner;\n  fieldConfig: FieldConfigSource;\n  options: Record<string, unknown>;\n\n  constructor(plugin: PanelPlugin, props: PanelProps, queryRunner: FakeQueryRunner) {\n    // Assign legacy \"root\" level options\n    if (props.options.angularOptions) {\n      Object.assign(this, props.options.angularOptions);\n    }\n\n    this.id = props.id;\n    this.type = plugin.meta.id;\n    this.title = props.title;\n    this.fieldConfig = props.fieldConfig;\n    this.options = props.options;\n\n    this.plugin = plugin;\n    this.events = new EventBusSrv();\n    this.queryRunner = queryRunner;\n  }\n\n  refresh() {\n    this.events.publish(new RefreshEvent());\n  }\n\n  render() {\n    this.events.publish(new RenderEvent());\n  }\n\n  getQueryRunner() {\n    return this.queryRunner;\n  }\n}\n\nclass FakeQueryRunner {\n  private subject = new ReplaySubject<PanelData>(1);\n\n  getData(options: GetDataOptions): Observable<PanelData> {\n    return this.subject;\n  }\n\n  forwardNewData(data: PanelData) {\n    this.subject.next(data);\n  }\n\n  run() {}\n}\n","import { deprecationWarning } from '@grafana/data';\nimport { appEvents } from 'app/core/app_events';\n\nimport { HideModalEvent, ShowModalEvent } from '../../types/events';\n\n/**\n * Old legacy utilSrv exposed to angular services and handles angular modals.\n * Not used by any core or known external plugin.\n */\nexport class UtilSrv {\n  modalScope: any;\n\n  constructor() {}\n\n  init() {\n    appEvents.subscribe(ShowModalEvent, (e) => this.showModal(e.payload));\n    appEvents.subscribe(HideModalEvent, this.hideModal.bind(this));\n  }\n\n  /**\n   * @deprecated use showModalReact instead that has this capability built in\n   */\n  hideModal() {\n    deprecationWarning('UtilSrv', 'hideModal', '');\n    if (this.modalScope && this.modalScope.dismiss) {\n      this.modalScope.dismiss();\n    }\n  }\n\n  /**\n   * @deprecated\n   */\n  showModal(options: any) {\n    deprecationWarning('UtilSrv', 'showModal', 'publish ShowModalReactEvent');\n  }\n}\n","import { cloneDeep } from 'lodash';\n\nimport { AnnotationEvent, deprecationWarning } from '@grafana/data';\nimport { deleteAnnotation, saveAnnotation, updateAnnotation } from 'app/features/annotations/api';\nimport { AnnotationQueryOptions } from 'app/features/annotations/types';\n\n/**\n * @deprecated AnnotationsSrv is deprecated in favor of DashboardQueryRunner\n */\nexport class AnnotationsSrv {\n  /**\n   * @deprecated clearPromiseCaches is deprecated\n   */\n  clearPromiseCaches() {\n    deprecationWarning('annotations_srv.ts', 'clearPromiseCaches', 'DashboardQueryRunner');\n  }\n\n  /**\n   * @deprecated getAnnotations is deprecated in favor of DashboardQueryRunner.getResult\n   */\n  getAnnotations(options: AnnotationQueryOptions) {\n    deprecationWarning('annotations_srv.ts', 'getAnnotations', 'DashboardQueryRunner.getResult');\n    return Promise.resolve({ annotations: [], alertState: undefined });\n  }\n\n  /**\n   * @deprecated getAlertStates is deprecated in favor of DashboardQueryRunner.getResult\n   */\n  getAlertStates(options: any) {\n    deprecationWarning('annotations_srv.ts', 'getAlertStates', 'DashboardQueryRunner.getResult');\n    return Promise.resolve(undefined);\n  }\n\n  /**\n   * @deprecated getGlobalAnnotations is deprecated in favor of DashboardQueryRunner.getResult\n   */\n  getGlobalAnnotations(options: AnnotationQueryOptions) {\n    deprecationWarning('annotations_srv.ts', 'getGlobalAnnotations', 'DashboardQueryRunner.getResult');\n    return Promise.resolve([]);\n  }\n\n  /**\n   * @deprecated saveAnnotationEvent is deprecated\n   */\n  saveAnnotationEvent(annotation: AnnotationEvent) {\n    deprecationWarning('annotations_srv.ts', 'saveAnnotationEvent', 'api/saveAnnotation');\n    return saveAnnotation(annotation);\n  }\n\n  /**\n   * @deprecated updateAnnotationEvent is deprecated\n   */\n  updateAnnotationEvent(annotation: AnnotationEvent) {\n    deprecationWarning('annotations_srv.ts', 'updateAnnotationEvent', 'api/updateAnnotation');\n    return updateAnnotation(annotation);\n  }\n\n  /**\n   * @deprecated deleteAnnotationEvent is deprecated\n   */\n  deleteAnnotationEvent(annotation: AnnotationEvent) {\n    deprecationWarning('annotations_srv.ts', 'deleteAnnotationEvent', 'api/deleteAnnotation');\n    return deleteAnnotation(annotation);\n  }\n\n  /**\n   * @deprecated translateQueryResult is deprecated in favor of DashboardQueryRunner/utils/translateQueryResult\n   */\n  translateQueryResult(annotation: any, results: any) {\n    deprecationWarning('annotations_srv.ts', 'translateQueryResult', 'DashboardQueryRunner/utils/translateQueryResult');\n    // if annotation has snapshotData\n    // make clone and remove it\n    if (annotation.snapshotData) {\n      annotation = cloneDeep(annotation);\n      delete annotation.snapshotData;\n    }\n\n    for (const item of results) {\n      item.source = annotation;\n      item.color = annotation.iconColor;\n      item.type = annotation.name;\n      item.isRegion = item.timeEnd && item.time !== item.timeEnd;\n    }\n\n    return results;\n  }\n}\n","import { getBackendSrv, getDataSourceSrv } from '@grafana/runtime';\nimport { contextSrv } from 'app/core/core';\nimport { getDashboardSrv } from 'app/features/dashboard/services/DashboardSrv';\nimport { validationSrv } from 'app/features/manage-dashboards/services/ValidationSrv';\nimport { getLinkSrv } from 'app/features/panel/panellinks/link_srv';\n\nimport coreModule from './core_module';\nimport { UtilSrv } from './services/UtilSrv';\nimport { AnnotationsSrv } from './services/annotations_srv';\n\nexport function registerComponents() {\n  coreModule.factory('backendSrv', () => getBackendSrv());\n  coreModule.factory('contextSrv', () => contextSrv);\n  coreModule.factory('dashboardSrv', () => getDashboardSrv());\n  coreModule.factory('datasourceSrv', () => getDataSourceSrv());\n  coreModule.factory('linkSrv', () => getLinkSrv());\n  coreModule.factory('validationSrv', () => validationSrv);\n  coreModule.service('annotationsSrv', AnnotationsSrv);\n  coreModule.service('utilSrv', UtilSrv);\n}\n","import 'angular';\nimport 'angular-route';\nimport 'angular-sanitize';\nimport 'angular-bindonce';\nimport 'vendor/bootstrap/bootstrap';\n\nimport angular from 'angular'; // eslint-disable-line no-duplicate-imports\nimport { extend } from 'lodash';\n\nimport { getTemplateSrv } from '@grafana/runtime';\nimport { coreModule, angularModules } from 'app/angular/core_module';\nimport appEvents from 'app/core/app_events';\nimport { config } from 'app/core/config';\nimport { contextSrv } from 'app/core/services/context_srv';\nimport { DashboardLoaderSrv } from 'app/features/dashboard/services/DashboardLoaderSrv';\nimport { getTimeSrv } from 'app/features/dashboard/services/TimeSrv';\nimport { setAngularPanelReactWrapper } from 'app/features/plugins/importPanelPlugin';\nimport { SystemJS } from 'app/features/plugins/loader/systemjs';\nimport { buildImportMap } from 'app/features/plugins/loader/utils';\nimport * as sdk from 'app/plugins/sdk';\n\nimport { registerAngularDirectives } from './angular_wrappers';\nimport { initAngularRoutingBridge } from './bridgeReactAngularRouting';\nimport { monkeyPatchInjectorWithPreAssignedBindings } from './injectorMonkeyPatch';\nimport { getAngularPanelReactWrapper } from './panel/AngularPanelReactWrapper';\nimport { promiseToDigest } from './promiseToDigest';\nimport { registerComponents } from './registerComponents';\n\n// Angular plugin dependencies map\nconst importMap = {\n  angular: {\n    ...angular,\n    default: angular,\n  },\n  'app/core/core_module': {\n    default: coreModule,\n    __useDefault: true,\n  },\n  'app/core/core': {\n    appEvents: appEvents,\n    contextSrv: contextSrv,\n    coreModule: coreModule,\n  },\n  'app/plugins/sdk': sdk,\n  'app/core/utils/promiseToDigest': { promiseToDigest },\n} as Record<string, System.Module>;\n\nexport class AngularApp {\n  ngModuleDependencies: any[];\n  preBootModules: any[];\n  registerFunctions: any;\n\n  constructor() {\n    this.preBootModules = [];\n    this.ngModuleDependencies = [];\n    this.registerFunctions = {};\n  }\n\n  init() {\n    const app = angular.module('grafana', []);\n\n    setAngularPanelReactWrapper(getAngularPanelReactWrapper);\n\n    app.config([\n      '$controllerProvider',\n      '$compileProvider',\n      '$filterProvider',\n      '$httpProvider',\n      '$provide',\n      '$sceDelegateProvider',\n      (\n        $controllerProvider: angular.IControllerProvider,\n        $compileProvider: angular.ICompileProvider,\n        $filterProvider: angular.IFilterProvider,\n        $httpProvider: angular.IHttpProvider,\n        $provide: angular.auto.IProvideService,\n        $sceDelegateProvider: angular.ISCEDelegateProvider\n      ) => {\n        if (config.buildInfo.env !== 'development') {\n          $compileProvider.debugInfoEnabled(false);\n        }\n\n        $httpProvider.useApplyAsync(true);\n\n        if (Boolean(config.pluginsCDNBaseURL)) {\n          $sceDelegateProvider.trustedResourceUrlList(['self', `${config.pluginsCDNBaseURL}/**`]);\n        }\n\n        this.registerFunctions.controller = $controllerProvider.register;\n        this.registerFunctions.directive = $compileProvider.directive;\n        this.registerFunctions.factory = $provide.factory;\n        this.registerFunctions.service = $provide.service;\n        this.registerFunctions.filter = $filterProvider.register;\n\n        $provide.decorator('$http', [\n          '$delegate',\n          '$templateCache',\n          ($delegate: any, $templateCache: any) => {\n            const get = $delegate.get;\n            $delegate.get = (url: string, config: any) => {\n              if (url.match(/\\.html$/)) {\n                // some template's already exist in the cache\n                if (!$templateCache.get(url)) {\n                  url += '?v=' + new Date().getTime();\n                }\n              }\n              return get(url, config);\n            };\n            return $delegate;\n          },\n        ]);\n      },\n    ]);\n\n    this.ngModuleDependencies = ['grafana.core', 'ngSanitize', 'grafana', 'pasvaz.bindonce', 'react'];\n\n    // makes it possible to add dynamic stuff\n    angularModules.forEach((m: angular.IModule) => {\n      this.useModule(m);\n    });\n\n    // register react angular wrappers\n    angular.module('grafana.services').service('dashboardLoaderSrv', DashboardLoaderSrv);\n\n    coreModule.factory('timeSrv', () => getTimeSrv());\n    coreModule.factory('templateSrv', () => getTemplateSrv());\n\n    registerAngularDirectives();\n    registerComponents();\n    initAngularRoutingBridge();\n\n    const imports = buildImportMap(importMap);\n    // pass the map of module names so systemjs can resolve them\n    SystemJS.addImportMap({ imports });\n\n    // disable tool tip animation\n    $.fn.tooltip.defaults.animation = false;\n  }\n\n  useModule(module: angular.IModule) {\n    if (this.preBootModules) {\n      this.preBootModules.push(module);\n    } else {\n      extend(module, this.registerFunctions);\n    }\n    this.ngModuleDependencies.push(module.name);\n    return module;\n  }\n\n  bootstrap() {\n    const injector = angular.bootstrap(document.getElementById('ngRoot')!, this.ngModuleDependencies);\n\n    monkeyPatchInjectorWithPreAssignedBindings(injector);\n\n    injector.invoke(() => {\n      this.preBootModules.forEach((module) => {\n        extend(module, this.registerFunctions);\n      });\n\n      // I don't know\n      return () => {};\n    });\n\n    return injector;\n  }\n}\n","import { auto } from 'angular';\nimport { indexOf } from 'lodash';\n\nexport class QueryCtrl<T = any> {\n  target!: T;\n  datasource!: any;\n  panelCtrl!: any;\n  panel: any;\n  hasRawMode!: boolean;\n  error?: string | null;\n  isLastQuery: boolean;\n\n  constructor(\n    public $scope: any,\n    public $injector: auto.IInjectorService\n  ) {\n    this.panelCtrl = this.panelCtrl ?? $scope.ctrl.panelCtrl;\n    this.target = this.target ?? $scope.ctrl.target;\n    this.datasource = this.datasource ?? $scope.ctrl.datasource;\n    this.panel = this.panelCtrl?.panel ?? $scope.ctrl.panelCtrl.panel;\n    this.isLastQuery = indexOf(this.panel.targets, this.target) === this.panel.targets.length - 1;\n  }\n\n  refresh() {\n    this.panelCtrl.refresh();\n  }\n}\n","let templates = (require as any).context('../', true, /\\.html$/);\ntemplates.keys().forEach((key: string) => {\n  templates(key);\n});\n","import { css } from '@emotion/css';\nimport { MouseEvent } from 'react';\n\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Alert, Button, CallToActionCard, Icon, IconName, LinkButton } from '@grafana/ui';\nimport { Trans } from 'app/core/internationalization';\n\nexport interface Props {\n  title: string;\n  buttonIcon: IconName;\n  buttonLink?: string;\n  buttonTitle: string;\n  buttonDisabled?: boolean;\n  onClick?: (event: MouseEvent) => void;\n  proTip?: string;\n  proTipLink?: string;\n  proTipLinkTitle?: string;\n  proTipTarget?: string;\n  infoBox?: { __html: string };\n  infoBoxTitle?: string;\n}\n\nconst ctaStyle = css({\n  textAlign: 'center',\n});\n\nconst infoBoxStyles = css({\n  maxWidth: '700px',\n  margin: '0 auto',\n});\n\nconst EmptyListCTA = ({\n  title,\n  buttonIcon,\n  buttonLink,\n  buttonTitle,\n  buttonDisabled,\n  onClick,\n  proTip,\n  proTipLink,\n  proTipLinkTitle,\n  proTipTarget,\n  infoBox,\n  infoBoxTitle,\n}: Props) => {\n  const footer = () => {\n    return (\n      <>\n        {proTip ? (\n          <span key=\"proTipFooter\">\n            <Icon name=\"rocket\" />\n            <Trans i18nKey=\"empty-list-cta.pro-tip\">ProTip: {{ proTip }}</Trans>\n            {proTipLink && (\n              <a href={proTipLink} target={proTipTarget} className=\"text-link\">\n                {proTipLinkTitle}\n              </a>\n            )}\n          </span>\n        ) : (\n          ''\n        )}\n        {infoBox ? (\n          <Alert severity=\"info\" title={infoBoxTitle ?? ''} className={infoBoxStyles}>\n            <div dangerouslySetInnerHTML={infoBox} />\n          </Alert>\n        ) : (\n          ''\n        )}\n      </>\n    );\n  };\n\n  const ctaElementClassName = !footer()\n    ? css({\n        marginBottom: '20px',\n      })\n    : '';\n\n  const ButtonEl = buttonLink ? LinkButton : Button;\n  const ctaElement = (\n    <ButtonEl\n      size=\"lg\"\n      onClick={onClick}\n      href={buttonLink}\n      icon={buttonIcon}\n      className={ctaElementClassName}\n      data-testid={selectors.components.CallToActionCard.buttonV2(buttonTitle)}\n      disabled={buttonDisabled}\n    >\n      {buttonTitle}\n    </ButtonEl>\n  );\n\n  return <CallToActionCard className={ctaStyle} message={title} footer={footer()} callToActionElement={ctaElement} />;\n};\n\nexport default EmptyListCTA;\n","import { css, cx } from '@emotion/css';\nimport { HTMLAttributes, useEffect } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { reportExperimentView } from '@grafana/runtime';\nimport { useStyles2 } from '@grafana/ui';\n\nexport interface Props extends HTMLAttributes<HTMLSpanElement> {\n  text?: string;\n  experimentId?: string;\n  eventVariant?: string;\n}\n\nexport const ProBadge = ({ text = 'PRO', className, experimentId, eventVariant = '', ...htmlProps }: Props) => {\n  const styles = useStyles2(getStyles);\n\n  useEffect(() => {\n    if (experimentId) {\n      reportExperimentView(experimentId, 'test', eventVariant);\n    }\n  }, [experimentId, eventVariant]);\n\n  return (\n    <span className={cx(styles.badge, className)} {...htmlProps}>\n      {text}\n    </span>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    badge: css({\n      marginLeft: theme.spacing(1.25),\n      borderRadius: theme.shape.borderRadius(5),\n      backgroundColor: theme.colors.success.main,\n      padding: theme.spacing(0.25, 0.75),\n      color: 'white', // use the same color for both themes\n      fontWeight: theme.typography.fontWeightMedium,\n      fontSize: theme.typography.pxToRem(10),\n    }),\n  };\n};\n","import { makeClassES5Compatible } from '@grafana/data';\nimport { loadPluginCss } from '@grafana/runtime';\nimport { MetricsPanelCtrl as MetricsPanelCtrlES6 } from 'app/angular/panel/metrics_panel_ctrl';\nimport { PanelCtrl as PanelCtrlES6 } from 'app/angular/panel/panel_ctrl';\nimport { QueryCtrl as QueryCtrlES6 } from 'app/angular/panel/query_ctrl';\n\nconst PanelCtrl = makeClassES5Compatible(PanelCtrlES6);\nconst MetricsPanelCtrl = makeClassES5Compatible(MetricsPanelCtrlES6);\nconst QueryCtrl = makeClassES5Compatible(QueryCtrlES6);\n\nexport { PanelCtrl, MetricsPanelCtrl, QueryCtrl, loadPluginCss };\n","/* ===================================================\n * bootstrap-transition.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#transitions\n * ===================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n  /* CSS TRANSITION SUPPORT (http://www.modernizr.com/)\n   * ======================================================= */\n\n  $(function() {\n\n    $.support.transition = (function() {\n\n      var transitionEnd = (function() {\n\n        var el = document.createElement('bootstrap')\n          , transEndEventNames = {\n            'WebkitTransition': 'webkitTransitionEnd'\n            , 'MozTransition': 'transitionend'\n            , 'OTransition': 'oTransitionEnd otransitionend'\n            , 'transition': 'transitionend'\n          }\n          , name\n\n        for (name in transEndEventNames) {\n          if (el.style[name] !== undefined) {\n            return transEndEventNames[name]\n          }\n        }\n\n      }())\n\n      return transitionEnd && {\n        end: transitionEnd\n      }\n\n    })()\n\n  })\n\n}(window.jQuery);/* ==========================================================\n * bootstrap-alert.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#alerts\n * ==========================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function($) {\n\n  \"use strict\"; // jshint ;_;\n\n  /* ============================================================\n   * bootstrap-dropdown.js v2.3.2\n   * http://getbootstrap.com/2.3.2/javascript.html#dropdowns\n   * ============================================================\n   * Copyright 2013 Twitter, Inc.\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * ============================================================ */\n\n\n  /* DROPDOWN CLASS DEFINITION\n   * ========================= */\n\n  var toggle = '[data-toggle=dropdown]'\n    , Dropdown = function(element) {\n      var $el = $(element).on('click.dropdown.data-api', this.toggle)\n      $('html').on('click.dropdown.data-api', function() {\n        $el.parent().removeClass('open')\n      })\n    }\n\n  Dropdown.prototype = {\n\n    constructor: Dropdown\n\n    , toggle: function(e) {\n      var $this = $(this)\n        , $parent\n        , isActive\n\n      if ($this.is('.disabled, :disabled')) return\n\n      $parent = getParent($this)\n\n      isActive = $parent.hasClass('open')\n\n      clearMenus()\n\n      if (!isActive) {\n        if ('ontouchstart' in document.documentElement) {\n          // if mobile we we use a backdrop because click events don't delegate\n          $('<div class=\"dropdown-backdrop\"/>').insertBefore($(this)).on('click', clearMenus)\n        }\n        $parent.toggleClass('open')\n      }\n\n      $this.focus()\n\n      return false\n    }\n\n    , keydown: function(e) {\n      var $this\n        , $items\n        , $active\n        , $parent\n        , isActive\n        , index\n\n      if (!/(38|40|27)/.test(e.keyCode)) return\n\n      $this = $(this)\n\n      e.preventDefault()\n      e.stopPropagation()\n\n      if ($this.is('.disabled, :disabled')) return\n\n      $parent = getParent($this)\n\n      isActive = $parent.hasClass('open')\n\n      if (!isActive || (isActive && e.keyCode == 27)) {\n        if (e.which == 27) $parent.find(toggle).focus()\n        return $this.click()\n      }\n\n      $items = $('[role=menu] li:not(.divider):visible a', $parent)\n\n      if (!$items.length) return\n\n      index = $items.index($items.filter(':focus'))\n\n      if (e.keyCode == 38 && index > 0) index--                                        // up\n      if (e.keyCode == 40 && index < $items.length - 1) index++                        // down\n      if (!~index) index = 0\n\n      $items\n        .eq(index)\n        .focus()\n    }\n\n  }\n\n  function clearMenus() {\n    $('.dropdown-backdrop').remove()\n    $(toggle).each(function() {\n      getParent($(this)).removeClass('open')\n    })\n  }\n\n  function getParent($this) {\n    var selector = $this.attr('data-target')\n      , $parent\n\n    if (!selector) {\n      selector = $this.attr('href')\n      // grafana backport fix from bootstrap 3\n      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\n    }\n\n    $parent = selector && $.find(selector)\n\n    if (!$parent || !$parent.length) $parent = $this.parent()\n\n    return $parent\n  }\n\n\n  /* DROPDOWN PLUGIN DEFINITION\n   * ========================== */\n\n  var old = $.fn.dropdown\n\n  $.fn.dropdown = function(option) {\n    return this.each(function() {\n      var $this = $(this)\n        , data = $this.data('dropdown')\n      if (!data) $this.data('dropdown', (data = new Dropdown(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  $.fn.dropdown.Constructor = Dropdown\n\n\n  /* DROPDOWN NO CONFLICT\n   * ==================== */\n\n  $.fn.dropdown.noConflict = function() {\n    $.fn.dropdown = old\n    return this\n  }\n\n\n  /* APPLY TO STANDARD DROPDOWN ELEMENTS\n   * =================================== */\n\n  $(document)\n    .on('click.dropdown.data-api', clearMenus)\n    .on('click.dropdown.data-api', '.dropdown form', function(e) { e.stopPropagation() })\n    .on('click.dropdown.data-api', toggle, Dropdown.prototype.toggle)\n    .on('keydown.dropdown.data-api', toggle + ', [role=menu]', Dropdown.prototype.keydown)\n\n}(window.jQuery);\n/* =========================================================\n * bootstrap-modal.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#modals\n * =========================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================= */\n\n\n!function($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n  /* MODAL CLASS DEFINITION\n   * ====================== */\n\n  var Modal = function(element, options) {\n    this.options = options\n    this.$element = $(element)\n      .delegate('[data-dismiss=\"modal\"]', 'click.dismiss.modal', $.proxy(this.hide, this))\n    this.options.remote && this.$element.find('.modal-body').load(this.options.remote)\n  }\n\n  Modal.prototype = {\n\n    constructor: Modal\n\n    , toggle: function() {\n      return this[!this.isShown ? 'show' : 'hide']()\n    }\n\n    , show: function() {\n      var that = this\n        , e = $.Event('show')\n\n      this.$element.trigger(e)\n\n      if (this.isShown || e.isDefaultPrevented()) return\n\n      this.isShown = true\n\n      this.escape()\n\n      this.backdrop(function() {\n        var transition = $.support.transition && that.$element.hasClass('fade')\n\n        if (!that.$element.parent().length) {\n          that.$element.appendTo(document.body) //don't move modals dom position\n        }\n\n        that.$element.show()\n\n        if (transition) {\n          that.$element[0].offsetWidth // force reflow\n        }\n\n        that.$element\n          .addClass('in')\n          .attr('aria-hidden', false)\n\n        that.enforceFocus()\n\n        transition ?\n          that.$element.one($.support.transition.end, function() { that.$element.focus().trigger('shown') }) :\n          that.$element.focus().trigger('shown')\n\n      })\n    }\n\n    , hide: function(e) {\n      e && e.preventDefault()\n\n      var that = this\n\n      e = $.Event('hide')\n\n      this.$element.trigger(e)\n\n      if (!this.isShown || e.isDefaultPrevented()) return\n\n      this.isShown = false\n\n      this.escape()\n\n      $(document).off('focusin.modal')\n\n      this.$element\n        .removeClass('in')\n        .attr('aria-hidden', true)\n\n      $.support.transition && this.$element.hasClass('fade') ?\n        this.hideWithTransition() :\n        this.hideModal()\n    }\n\n    , enforceFocus: function() {\n      var that = this\n      $(document).on('focusin.modal', function(e) {\n        if (that.$element[0] !== e.target && !that.$element.has(e.target).length) {\n          that.$element.focus()\n        }\n      })\n    }\n\n    , escape: function() {\n      var that = this\n      if (this.isShown && this.options.keyboard) {\n        this.$element.on('keyup.dismiss.modal', function(e) {\n          e.which == 27 && that.hide()\n        })\n      } else if (!this.isShown) {\n        this.$element.off('keyup.dismiss.modal')\n      }\n    }\n\n    , hideWithTransition: function() {\n      var that = this\n        , timeout = setTimeout(function() {\n          that.$element.off($.support.transition.end)\n          that.hideModal()\n        }, 500)\n\n      this.$element.one($.support.transition.end, function() {\n        clearTimeout(timeout)\n        that.hideModal()\n      })\n    }\n\n    , hideModal: function() {\n      var that = this\n      this.$element.hide()\n      this.backdrop(function() {\n        that.removeBackdrop()\n        that.$element.trigger('hidden')\n      })\n    }\n\n    , removeBackdrop: function() {\n      this.$backdrop && this.$backdrop.remove()\n      this.$backdrop = null\n    }\n\n    , backdrop: function(callback) {\n      var that = this\n        , animate = this.$element.hasClass('fade') ? 'fade' : ''\n\n      if (this.isShown && this.options.backdrop) {\n        var doAnimate = $.support.transition && animate\n\n        this.$backdrop = $('<div class=\"modal-backdrop ' + animate + '\" />')\n          .appendTo(document.body)\n\n        this.$backdrop.click(\n          this.options.backdrop == 'static' ?\n            $.proxy(this.$element[0].focus, this.$element[0])\n            : $.proxy(this.hide, this)\n        )\n\n        if (doAnimate) this.$backdrop[0].offsetWidth // force reflow\n\n        this.$backdrop.addClass('in')\n\n        if (!callback) return\n\n        doAnimate ?\n          this.$backdrop.one($.support.transition.end, callback) :\n          callback()\n\n      } else if (!this.isShown && this.$backdrop) {\n        this.$backdrop.removeClass('in')\n\n        $.support.transition && this.$element.hasClass('fade') ?\n          this.$backdrop.one($.support.transition.end, callback) :\n          callback()\n\n      } else if (callback) {\n        callback()\n      }\n    }\n  }\n\n\n  /* MODAL PLUGIN DEFINITION\n   * ======================= */\n\n  var old = $.fn.modal\n\n  $.fn.modal = function(option) {\n    return this.each(function() {\n      var $this = $(this)\n        , data = $this.data('modal')\n        , options = $.extend({}, $.fn.modal.defaults, $this.data(), typeof option == 'object' && option)\n      if (!data) $this.data('modal', (data = new Modal(this, options)))\n      if (typeof option == 'string') data[option]()\n      else if (options.show) data.show()\n    })\n  }\n\n  $.fn.modal.defaults = {\n    backdrop: true\n    , keyboard: true\n    , show: true\n  }\n\n  $.fn.modal.Constructor = Modal\n\n\n  /* MODAL NO CONFLICT\n   * ================= */\n\n  $.fn.modal.noConflict = function() {\n    $.fn.modal = old\n    return this\n  }\n\n\n  /* MODAL DATA-API\n   * ============== */\n\n  $(document).on('click.modal.data-api', '[data-toggle=\"modal\"]', function(e) {\n    var $this = $(this)\n      , href = $this.attr('href')\n      , $target = $.find($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, ''))) //strip for ie7\n      , option = $target.data('modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())\n\n    e.preventDefault()\n\n    $target\n      .modal(option)\n      .one('hide', function() {\n        $this.focus()\n      })\n  })\n\n}(window.jQuery);\n/* ===========================================================\n * bootstrap-tooltip.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#tooltips\n * Inspired by the original jQuery.tipsy by Jason Frame\n * ===========================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n  /* TOOLTIP PUBLIC CLASS DEFINITION\n   * =============================== */\n\n  var Tooltip = function(element, options) {\n    this.init('tooltip', element, options)\n  }\n\n  Tooltip.prototype = {\n\n    constructor: Tooltip\n\n    , init: function(type, element, options) {\n      var eventIn\n        , eventOut\n        , triggers\n        , trigger\n        , i\n\n      this.type = type\n      this.$element = $(element)\n      this.options = this.getOptions(options)\n      this.enabled = true\n\n      triggers = this.options.trigger.split(' ')\n\n      for (i = triggers.length; i--;) {\n        trigger = triggers[i]\n        if (trigger == 'click') {\n          this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))\n        } else if (trigger != 'manual') {\n          eventIn = trigger == 'hover' ? 'mouseenter' : 'focus'\n          eventOut = trigger == 'hover' ? 'mouseleave' : 'blur'\n          this.$element.on(eventIn + '.' + this.type, this.options.selector, $.proxy(this.enter, this))\n          this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))\n        }\n      }\n\n      this.options.selector ?\n        (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :\n        this.fixTitle()\n    }\n\n    , getOptions: function(options) {\n      options = $.extend({}, $.fn[this.type].defaults, this.$element.data(), options)\n\n      if (options.delay && typeof options.delay == 'number') {\n        options.delay = {\n          show: options.delay\n          , hide: options.delay\n        }\n      }\n\n      return options\n    }\n\n    , enter: function(e) {\n      var defaults = $.fn[this.type].defaults\n        , options = {}\n        , self\n\n      this._options && $.each(this._options, function(key, value) {\n        if (defaults[key] != value) options[key] = value\n      }, this)\n\n      self = $(e.currentTarget)[this.type](options).data(this.type)\n\n      if (!self.options.delay || !self.options.delay.show) return self.show()\n\n      clearTimeout(this.timeout)\n      self.hoverState = 'in'\n      this.timeout = setTimeout(function() {\n        if (self.hoverState == 'in') self.show()\n      }, self.options.delay.show)\n    }\n\n    , leave: function(e) {\n      var self = $(e.currentTarget)[this.type](this._options).data(this.type)\n\n      if (this.timeout) clearTimeout(this.timeout)\n      if (!self.options.delay || !self.options.delay.hide) return self.hide()\n\n      self.hoverState = 'out'\n      this.timeout = setTimeout(function() {\n        if (self.hoverState == 'out') self.hide()\n      }, self.options.delay.hide)\n    }\n\n    , show: function() {\n      var $tip\n        , pos\n        , actualWidth\n        , actualHeight\n        , placement\n        , tp\n        , e = $.Event('show')\n\n      if (this.hasContent() && this.enabled) {\n        this.$element.trigger(e)\n        if (e.isDefaultPrevented()) return\n        $tip = this.tip()\n        this.setContent()\n\n        if (this.options.animation) {\n          $tip.addClass('fade')\n        }\n\n        placement = typeof this.options.placement == 'function' ?\n          this.options.placement.call(this, $tip[0], this.$element[0]) :\n          this.options.placement\n\n        $tip\n          .detach()\n          .css({ top: 0, left: 0, display: 'block' })\n\n        if (this.options.container) {\n          $tip.appendTo($.find(this.options.container));\n        } else {\n          $tip.insertAfter(this.$element)\n        }\n\n        pos = this.getPosition()\n\n        actualWidth = $tip[0].offsetWidth\n        actualHeight = $tip[0].offsetHeight\n\n        switch (placement) {\n          case 'bottom':\n            tp = { top: pos.top + pos.height, left: pos.left + pos.width / 2 - actualWidth / 2 }\n            break\n          case 'top':\n            tp = { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2 }\n            break\n          case 'left':\n            tp = { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth }\n            break\n          case 'right':\n            tp = { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width }\n            break\n\n          // extend placements (top)\n          case 'topLeft':\n            tp = { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - (actualWidth * .10) };\n            break;\n          case 'topRight':\n            tp = { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - (actualWidth * .90) };\n            break;\n\n          // extend placements (right)\n          case 'rightTop':\n            tp = { top: pos.top + pos.height / 2 - (actualHeight * .10), left: pos.left + pos.width };\n            break;\n          case 'rightBottom':\n            tp = { top: pos.top + pos.height / 2 - (actualHeight * .90), left: pos.left + pos.width };\n            break;\n\n          // extend placements (bottom)\n          case 'bottomLeft':\n            tp = { top: pos.top + pos.height, left: pos.left + pos.width / 2 - (actualWidth * .10) };\n            break;\n          case 'bottomRight':\n            tp = { top: pos.top + pos.height, left: pos.left + pos.width / 2 - (actualWidth * .90) };\n            break;\n\n          // extend placements (left)\n          case 'leftTop':\n            tp = { top: pos.top + pos.height / 2 - (actualHeight * .10), left: pos.left - actualWidth };\n            break;\n          case 'leftBottom':\n            tp = { top: pos.top + pos.height / 2 - (actualHeight * .90), left: pos.left - actualWidth };\n            break;\n\n\n        }\n\n        this.applyPlacement(tp, placement)\n        this.$element.trigger('shown')\n      }\n    }\n\n    , applyPlacement: function(offset, placement) {\n      var $tip = this.tip()\n        , width = $tip[0].offsetWidth\n        , height = $tip[0].offsetHeight\n        , actualWidth\n        , actualHeight\n        , delta\n        , replace\n\n      $tip\n        .offset(offset)\n        .addClass(placement)\n        .addClass('in')\n\n      actualWidth = $tip[0].offsetWidth\n      actualHeight = $tip[0].offsetHeight\n\n      if (placement == 'top' && actualHeight != height) {\n        offset.top = offset.top + height - actualHeight\n        replace = true\n      }\n\n      if (placement == 'bottom' || placement == 'top') {\n        delta = 0\n\n        if (offset.left < 0) {\n          delta = offset.left * -2\n          offset.left = 0\n          $tip.offset(offset)\n          actualWidth = $tip[0].offsetWidth\n          actualHeight = $tip[0].offsetHeight\n        }\n\n        this.replaceArrow(delta - width + actualWidth, actualWidth, 'left')\n      } else {\n        this.replaceArrow(actualHeight - height, actualHeight, 'top')\n      }\n\n      if (replace) $tip.offset(offset)\n    }\n\n    , replaceArrow: function(delta, dimension, position) {\n      this\n        .arrow()\n        .css(position, delta ? (50 * (1 - delta / dimension) + \"%\") : '')\n    }\n\n    , setContent: function() {\n      var $tip = this.tip()\n        , title = this.getTitle()\n\n      //$tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)\n      $tip.find('.tooltip-inner').text(title)\n      $tip.removeClass('fade in top bottom left right')\n    }\n\n    , hide: function() {\n      var that = this\n        , $tip = this.tip()\n        , e = $.Event('hide')\n\n      this.$element.trigger(e)\n      if (e.isDefaultPrevented()) return\n\n      $tip.removeClass('in')\n\n      function removeWithAnimation() {\n        var timeout = setTimeout(function() {\n          $tip.off($.support.transition.end).detach()\n        }, 500)\n\n        $tip.one($.support.transition.end, function() {\n          clearTimeout(timeout)\n          $tip.detach()\n        })\n      }\n\n      $.support.transition && this.$tip.hasClass('fade') ?\n        removeWithAnimation() :\n        $tip.detach()\n\n      this.$element.trigger('hidden')\n\n      return this\n    }\n\n    , fixTitle: function() {\n      var $e = this.$element\n      if ($e.attr('title') || typeof ($e.attr('data-original-title')) != 'string') {\n        $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')\n      }\n    }\n\n    , hasContent: function() {\n      return this.getTitle()\n    }\n\n    , getPosition: function() {\n      var el = this.$element[0]\n      return $.extend({}, (typeof el.getBoundingClientRect == 'function') ? el.getBoundingClientRect() : {\n        width: el.offsetWidth\n        , height: el.offsetHeight\n      }, this.$element.offset())\n    }\n\n    , getTitle: function() {\n      var title\n        , $e = this.$element\n        , o = this.options\n\n      title = $e.attr('data-original-title')\n        || (typeof o.title == 'function' ? o.title.call($e[0]) : o.title)\n\n      return title\n    }\n\n    , tip: function() {\n      return this.$tip = this.$tip || $(this.options.template)\n    }\n\n    , arrow: function() {\n      return this.$arrow = this.$arrow || this.tip().find(\".tooltip-arrow\")\n    }\n\n    , validate: function() {\n      if (!this.$element[0].parentNode) {\n        this.hide()\n        this.$element = null\n        this.options = null\n      }\n    }\n\n    , enable: function() {\n      this.enabled = true\n    }\n\n    , disable: function() {\n      this.enabled = false\n    }\n\n    , toggleEnabled: function() {\n      this.enabled = !this.enabled\n    }\n\n    , toggle: function(e) {\n      var self = e ? $(e.currentTarget)[this.type](this._options).data(this.type) : this\n      self.tip().hasClass('in') ? self.hide() : self.show()\n    }\n\n    , destroy: function() {\n      this.hide().$element.off('.' + this.type).removeData(this.type)\n    }\n\n  }\n\n\n  /* TOOLTIP PLUGIN DEFINITION\n   * ========================= */\n\n  var old = $.fn.tooltip\n\n  $.fn.tooltip = function(option) {\n    return this.each(function() {\n      var $this = $(this)\n        , data = $this.data('tooltip')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('tooltip', (data = new Tooltip(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.tooltip.Constructor = Tooltip\n\n  $.fn.tooltip.defaults = {\n    animation: true\n    , placement: 'top'\n    , selector: false\n    , template: '<div class=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>'\n    , trigger: 'hover focus'\n    , title: ''\n    , delay: 0\n    , html: false\n    , container: false\n  }\n\n\n  /* TOOLTIP NO CONFLICT\n   * =================== */\n\n  $.fn.tooltip.noConflict = function() {\n    $.fn.tooltip = old\n    return this\n  }\n\n}(window.jQuery);\n\n/* ========================================================\n * bootstrap-tab.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#tabs\n * ========================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ======================================================== */\n\n\n!function($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n  /* TAB CLASS DEFINITION\n   * ==================== */\n\n  var Tab = function(element) {\n    this.element = $(element)\n  }\n\n  Tab.prototype = {\n\n    constructor: Tab\n\n    , show: function() {\n      var $this = this.element\n        , $ul = $this.closest('ul:not(.dropdown-menu)')\n        , selector = $this.attr('data-target')\n        , previous\n        , $target\n        , e\n\n      if (!selector) {\n        selector = $this.attr('href')\n        selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\n      }\n\n      if ($this.parent('li').hasClass('active')) return\n\n      previous = $ul.find('.active:last a')[0]\n\n      e = $.Event('show', {\n        relatedTarget: previous\n      })\n\n      $this.trigger(e)\n\n      if (e.isDefaultPrevented()) return\n\n      $target = $.find(selector)\n\n      this.activate($this.parent('li'), $ul)\n      this.activate($target, $target.parent(), function() {\n        $this.trigger({\n          type: 'shown'\n          , relatedTarget: previous\n        })\n      })\n    }\n\n    , activate: function(element, container, callback) {\n      var $active = container.find('> .active')\n        , transition = callback\n          && $.support.transition\n          && $active.hasClass('fade')\n\n      function next() {\n        $active\n          .removeClass('active')\n          .find('> .dropdown-menu > .active')\n          .removeClass('active')\n\n        element.addClass('active')\n\n        if (transition) {\n          element[0].offsetWidth // reflow for transition\n          element.addClass('in')\n        } else {\n          element.removeClass('fade')\n        }\n\n        if (element.parent('.dropdown-menu')) {\n          element.closest('li.dropdown').addClass('active')\n        }\n\n        callback && callback()\n      }\n\n      transition ?\n        $active.one($.support.transition.end, next) :\n        next()\n\n      $active.removeClass('in')\n    }\n  }\n\n\n  /* TAB PLUGIN DEFINITION\n   * ===================== */\n\n  var old = $.fn.tab\n\n  $.fn.tab = function(option) {\n    return this.each(function() {\n      var $this = $(this)\n        , data = $this.data('tab')\n      if (!data) $this.data('tab', (data = new Tab(this)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.tab.Constructor = Tab\n\n\n  /* TAB NO CONFLICT\n   * =============== */\n\n  $.fn.tab.noConflict = function() {\n    $.fn.tab = old\n    return this\n  }\n\n\n  /* TAB DATA-API\n   * ============ */\n\n  $(document).on('click.tab.data-api', '[data-toggle=\"tab\"], [data-toggle=\"pill\"]', function(e) {\n    e.preventDefault()\n    $(this).tab('show')\n  })\n\n}(window.jQuery);/* =============================================================\n * bootstrap-typeahead.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#typeahead\n * =============================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n\n!function($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n  /* TYPEAHEAD PUBLIC CLASS DEFINITION\n   * ================================= */\n\n  var Typeahead = function(element, options) {\n    this.$element = $(element)\n    this.options = $.extend({}, $.fn.typeahead.defaults, options)\n    this.matcher = this.options.matcher || this.matcher\n    this.sorter = this.options.sorter || this.sorter\n    this.highlighter = this.options.highlighter || this.highlighter\n    this.updater = this.options.updater || this.updater\n    this.source = this.options.source\n    this.$menu = $(this.options.menu)\n    this.shown = false\n    this.listen()\n  }\n\n  Typeahead.prototype = {\n\n    constructor: Typeahead\n\n    , select: function() {\n      // CHANGE (rashidkpc) If nothing is selected, use existing value\n      var val = this.$menu.find('.active').attr('data-value') || this.$element.val();\n      this.$element\n        .val(this.updater(val))\n        .change()\n      return this.hide()\n    }\n\n    , updater: function(item) {\n      return item\n    }\n\n    , show: function() {\n      var pos = $.extend({}, this.$element.position(), {\n        height: this.$element[0].offsetHeight\n      })\n\n      this.$menu\n        .insertAfter(this.$element)\n        .css({\n          top: pos.top + pos.height\n          , left: pos.left\n        })\n        .show()\n\n      this.shown = true\n      return this\n    }\n\n    , hide: function() {\n      this.$menu.hide()\n      this.shown = false\n      return this\n    }\n\n    , lookup: function(event) {\n      var items\n\n      this.query = this.$element.val()\n\n      if (!this.query || this.query.length < this.options.minLength) {\n        return this.shown ? this.hide() : this\n      }\n\n      items = $.isFunction(this.source) ? this.source(this.query, $.proxy(this.process, this)) : this.source\n\n      return items ? this.process(items) : this\n    }\n\n    , process: function(items) {\n      var that = this\n\n      items = $.grep(items, function(item) {\n        return that.matcher(item)\n      })\n\n      items = this.sorter(items)\n\n      if (!items.length) {\n        return this.shown ? this.hide() : this\n      }\n\n      return this.render(items.slice(0, this.options.items)).show()\n    }\n\n    , matcher: function(item) {\n      return ~item.toLowerCase().indexOf(this.query.toLowerCase())\n    }\n\n    , sorter: function(items) {\n      var beginswith = []\n        , caseSensitive = []\n        , caseInsensitive = []\n        , item\n\n      while (item = items.shift()) {\n        if (!item.toLowerCase().indexOf(this.query.toLowerCase())) beginswith.push(item)\n        else if (~item.indexOf(this.query)) caseSensitive.push(item)\n        else caseInsensitive.push(item)\n      }\n\n      return beginswith.concat(caseSensitive, caseInsensitive)\n    }\n\n    , highlighter: function(item) {\n      var query = this.query.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&')\n      if (!query) {\n        return item;\n      }\n      return item.replace(new RegExp('(' + query + ')', 'ig'), function($1, match) {\n        return '<strong>' + match + '</strong>'\n      });\n    }\n\n    , render: function(items) {\n      var that = this\n\n      items = $(items).map(function(i, item) {\n        i = $(that.options.item).attr('data-value', item)\n        i.find('a').html(that.highlighter(item))\n        return i[0]\n      })\n\n      // CHANGE (rashidpc) Do not select first element by default\n      // items.first().addClass('active')\n      this.$menu.html(items)\n      return this\n    }\n\n    , next: function(event) {\n      var active = this.$menu.find('.active').removeClass('active')\n        , next = active.next()\n\n      if (!next.length) {\n        next = $(this.$menu.find('li')[0])\n      }\n\n      next.addClass('active')\n    }\n\n    , prev: function(event) {\n      var active = this.$menu.find('.active').removeClass('active')\n        , prev = active.prev()\n\n      if (!prev.length) {\n        prev = this.$menu.find('li').last()\n      }\n\n      prev.addClass('active')\n    }\n\n    , listen: function() {\n      this.$element\n        .on('focus', $.proxy(this.focus, this))\n        .on('blur', $.proxy(this.blur, this))\n        .on('keypress', $.proxy(this.keypress, this))\n        .on('keyup', $.proxy(this.keyup, this))\n\n      if (this.eventSupported('keydown')) {\n        this.$element.on('keydown', $.proxy(this.keydown, this))\n      }\n\n      this.$menu\n        .on('click', $.proxy(this.click, this))\n        .on('mouseenter', 'li', $.proxy(this.mouseenter, this))\n        .on('mouseleave', 'li', $.proxy(this.mouseleave, this))\n    },\n\n    destroy: function() {\n      this.$element.off().removeData('typeahead');\n      this.$menu.off();\n    }\n\n    , eventSupported: function(eventName) {\n      var isSupported = eventName in this.$element\n      if (!isSupported) {\n        this.$element.setAttribute(eventName, 'return;')\n        isSupported = typeof this.$element[eventName] === 'function'\n      }\n      return isSupported\n    }\n\n    , move: function(e) {\n      if (!this.shown) return\n\n      // grafana change, shift+left parenthesis\n      if (e.shiftKey && e.keyCode === 40) {\n        return;\n      }\n\n      switch (e.keyCode) {\n        case 9: // tab\n        case 13: // enter\n        case 27: // escape\n          e.preventDefault()\n          break\n\n        case 38: // up arrow\n          e.preventDefault()\n          this.prev()\n          break\n\n        case 40: // down arrow\n          e.preventDefault()\n          this.next()\n          break\n      }\n\n      e.stopPropagation()\n    }\n\n    , keydown: function(e) {\n      this.suppressKeyPressRepeat = ~$.inArray(e.keyCode, [40, 38, 9, 13, 27, 57])\n      this.move(e)\n    }\n\n    , keypress: function(e) {\n      if (this.suppressKeyPressRepeat) return\n      this.move(e)\n    }\n\n    , keyup: function(e) {\n      switch (e.keyCode) {\n        case 40: // down arrow\n        case 38: // up arrow\n        case 16: // shift\n        case 17: // ctrl\n        case 18: // alt\n          break\n\n        case 9: // tab\n        case 13: // enter\n          if (!this.shown) return\n          this.select()\n          break\n\n        case 27: // escape\n          if (!this.shown) return\n          this.hide()\n          break\n\n        default:\n          this.lookup();\n      }\n\n      if (e.keyCode === 13 && typeof this.$menu.find('.active').attr('data-value') === 'undefined') {\n        // CHANGE (rashidkpc). Enter was hit, nothing was selected from typeahead, submit form\n        this.$element.submit();\n      } else {\n        e.stopPropagation()\n        e.preventDefault()\n      }\n\n    }\n\n    , focus: function(e) {\n      this.focused = true\n    }\n\n    , blur: function(e) {\n      this.focused = false\n      if (!this.mousedover && this.shown) this.hide()\n    }\n\n    , click: function(e) {\n      e.stopPropagation()\n      e.preventDefault()\n      this.select()\n      this.$element.focus()\n    }\n\n    , mouseenter: function(e) {\n      this.mousedover = true\n      this.$menu.find('.active').removeClass('active')\n      $(e.currentTarget).addClass('active')\n    }\n\n    , mouseleave: function(e) {\n      this.mousedover = false\n      if (!this.focused && this.shown) this.hide()\n    }\n\n  }\n\n\n  /* TYPEAHEAD PLUGIN DEFINITION\n   * =========================== */\n\n  var old = $.fn.typeahead\n\n  $.fn.typeahead = function(option) {\n    return this.each(function() {\n      var $this = $(this)\n        , data = $this.data('typeahead')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('typeahead', (data = new Typeahead(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.typeahead.defaults = {\n    source: []\n    , items: 8\n    , menu: '<ul class=\"typeahead dropdown-menu\"></ul>'\n    , item: '<li><a href=\"#\"></a></li>'\n    , minLength: 1\n  }\n\n  $.fn.typeahead.Constructor = Typeahead\n\n\n  /* TYPEAHEAD NO CONFLICT\n   * =================== */\n\n  $.fn.typeahead.noConflict = function() {\n    $.fn.typeahead = old\n    return this\n  }\n\n\n  /* TYPEAHEAD DATA-API\n   * ================== */\n\n  $(document).on('focus.typeahead.data-api', '[data-provide=\"typeahead\"]', function(e) {\n    var $this = $(this)\n    if ($this.data('typeahead')) return\n    $this.typeahead($this.data())\n  })\n\n}(window.jQuery);\n/* ==========================================================\n * bootstrap-affix.js v2.3.2\n * http://getbootstrap.com/2.3.2/javascript.html#affix\n * ==========================================================\n * Copyright 2013 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n  /* AFFIX CLASS DEFINITION\n   * ====================== */\n\n  var Affix = function(element, options) {\n    this.options = $.extend({}, $.fn.affix.defaults, options)\n    this.$window = $(window)\n      .on('scroll.affix.data-api', $.proxy(this.checkPosition, this))\n      .on('click.affix.data-api', $.proxy(function() { setTimeout($.proxy(this.checkPosition, this), 1) }, this))\n    this.$element = $(element)\n    this.checkPosition()\n  }\n\n  Affix.prototype.checkPosition = function() {\n    if (!this.$element.is(':visible')) return\n\n    var scrollHeight = $(document).height()\n      , scrollTop = this.$window.scrollTop()\n      , position = this.$element.offset()\n      , offset = this.options.offset\n      , offsetBottom = offset.bottom\n      , offsetTop = offset.top\n      , reset = 'affix affix-top affix-bottom'\n      , affix\n\n    if (typeof offset != 'object') offsetBottom = offsetTop = offset\n    if (typeof offsetTop == 'function') offsetTop = offset.top()\n    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom()\n\n    affix = this.unpin != null && (scrollTop + this.unpin <= position.top) ?\n      false : offsetBottom != null && (position.top + this.$element.height() >= scrollHeight - offsetBottom) ?\n        'bottom' : offsetTop != null && scrollTop <= offsetTop ?\n          'top' : false\n\n    if (this.affixed === affix) return\n\n    this.affixed = affix\n    this.unpin = affix == 'bottom' ? position.top - scrollTop : null\n\n    this.$element.removeClass(reset).addClass('affix' + (affix ? '-' + affix : ''))\n  }\n\n\n  /* AFFIX PLUGIN DEFINITION\n   * ======================= */\n\n  var old = $.fn.affix\n\n  $.fn.affix = function(option) {\n    return this.each(function() {\n      var $this = $(this)\n        , data = $this.data('affix')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('affix', (data = new Affix(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.affix.Constructor = Affix\n\n  $.fn.affix.defaults = {\n    offset: 0\n  }\n\n\n  /* AFFIX NO CONFLICT\n   * ================= */\n\n  $.fn.affix.noConflict = function() {\n    $.fn.affix = old\n    return this\n  }\n\n\n  /* AFFIX DATA-API\n   * ============== */\n\n  $(window).on('load', function() {\n    $('[data-spy=\"affix\"]').each(function() {\n      var $spy = $(this)\n        , data = $spy.data()\n\n      data.offset = data.offset || {}\n\n      data.offsetBottom && (data.offset.bottom = data.offsetBottom)\n      data.offsetTop && (data.offset.top = data.offsetTop)\n\n      $spy.affix(data)\n    })\n  })\n\n\n}(window.jQuery);\n","(function ($) {\n  \"use strict\";\n\n  var defaultOptions = {\n    tagClass: function(item) {\n      return 'label label-info';\n    },\n    itemValue: function(item) {\n      return item ? item.toString() : item;\n    },\n    itemText: function(item) {\n      return this.itemValue(item);\n    },\n    freeInput: true,\n    maxTags: undefined,\n    confirmKeys: [13],\n    onTagExists: function(item, $tag) {\n      $tag.hide().fadeIn();\n    }\n  };\n\n  /**\n   * Constructor function\n   */\n  function TagsInput(element, options) {\n    this.itemsArray = [];\n\n    this.$element = $(element);\n    this.$element.hide();\n\n    this.widthClass = options.widthClass || 'width-9';\n    this.isSelect = (element.tagName === 'SELECT');\n    this.multiple = (this.isSelect && element.hasAttribute('multiple'));\n    this.objectItems = options && options.itemValue;\n    this.placeholderText = element.hasAttribute('placeholder') ? this.$element.attr('placeholder') : '';\n\n    this.$container = $('<div class=\"bootstrap-tagsinput\"></div>');\n    this.$input = $('<input class=\"gf-form-input ' + this.widthClass + '\" type=\"text\" placeholder=\"' + this.placeholderText + '\"/>').appendTo(this.$container);\n\n    this.$element.after(this.$container);\n\n    this.build(options);\n  }\n\n  TagsInput.prototype = {\n    constructor: TagsInput,\n\n    /**\n     * Adds the given item as a new tag. Pass true to dontPushVal to prevent\n     * updating the elements val()\n     */\n    add: function(item, dontPushVal) {\n      var self = this;\n\n      if (self.options.maxTags && self.itemsArray.length >= self.options.maxTags)\n        return;\n\n      // Ignore falsey values, except false\n      if (item !== false && !item)\n        return;\n\n      // Throw an error when trying to add an object while the itemValue option was not set\n      if (typeof item === \"object\" && !self.objectItems)\n        throw(\"Can't add objects when itemValue option is not set\");\n\n      // Ignore strings only containg whitespace\n      if (item.toString().match(/^\\s*$/))\n        return;\n\n      // If SELECT but not multiple, remove current tag\n      if (self.isSelect && !self.multiple && self.itemsArray.length > 0)\n        self.remove(self.itemsArray[0]);\n\n      if (typeof item === \"string\" && this.$element[0].tagName === 'INPUT') {\n        var items = item.split(',');\n        if (items.length > 1) {\n          for (var i = 0; i < items.length; i++) {\n            this.add(items[i], true);\n          }\n\n          if (!dontPushVal)\n            self.pushVal();\n          return;\n        }\n      }\n\n      var itemValue = self.options.itemValue(item),\n          itemText = self.options.itemText(item),\n          tagClass = self.options.tagClass(item);\n\n      // Ignore items already added\n      var existing = $.grep(self.itemsArray, function(item) { return self.options.itemValue(item) === itemValue; } )[0];\n      if (existing) {\n        // Invoke onTagExists\n        if (self.options.onTagExists) {\n          var $existingTag = $(\".tag\", self.$container).filter(function() { return $(this).data(\"item\") === existing; });\n          self.options.onTagExists(item, $existingTag);\n        }\n        return;\n      }\n\n      // register item in internal array and map\n      self.itemsArray.push(item);\n\n      // add a tag element\n      var $tag = $('<span class=\"tag ' + htmlEncode(tagClass) + '\">' + htmlEncode(itemText) + '<span data-role=\"remove\"></span></span>');\n      $tag.data('item', item);\n      self.findInputWrapper().before($tag);\n      $tag.after(' ');\n\n      // add <option /> if item represents a value not present in one of the <select />'s options\n      if (self.isSelect && !$('option[value=\"' + escape(itemValue) + '\"]',self.$element)[0]) {\n        var $option = $('<option selected>' + htmlEncode(itemText) + '</option>');\n        $option.data('item', item);\n        $option.attr('value', itemValue);\n        self.$element.append($option);\n      }\n\n      if (!dontPushVal)\n        self.pushVal();\n\n      // Add class when reached maxTags\n      if (self.options.maxTags === self.itemsArray.length)\n        self.$container.addClass('bootstrap-tagsinput-max');\n\n      self.$element.trigger($.Event('itemAdded', { item: item }));\n    },\n\n    /**\n     * Removes the given item. Pass true to dontPushVal to prevent updating the\n     * elements val()\n     */\n    remove: function(item, dontPushVal) {\n      var self = this;\n\n      if (self.objectItems) {\n        if (typeof item === \"object\")\n          item = $.grep(self.itemsArray, function(other) { return self.options.itemValue(other) ==  self.options.itemValue(item); } )[0];\n        else\n          item = $.grep(self.itemsArray, function(other) { return self.options.itemValue(other) ==  item; } )[0];\n      }\n\n      if (item) {\n        $('.tag', self.$container).filter(function() { return $(this).data('item') === item; }).remove();\n        $('option', self.$element).filter(function() { return $(this).data('item') === item; }).remove();\n        self.itemsArray.splice($.inArray(item, self.itemsArray), 1);\n      }\n\n      if (!dontPushVal)\n        self.pushVal();\n\n      // Remove class when reached maxTags\n      if (self.options.maxTags > self.itemsArray.length)\n        self.$container.removeClass('bootstrap-tagsinput-max');\n\n      self.$element.trigger($.Event('itemRemoved',  { item: item }));\n    },\n\n    /**\n     * Removes all items\n     */\n    removeAll: function() {\n      var self = this;\n\n      $('.tag', self.$container).remove();\n      $('option', self.$element).remove();\n\n      while(self.itemsArray.length > 0)\n        self.itemsArray.pop();\n\n      self.pushVal();\n\n      if (self.options.maxTags && !this.isEnabled())\n        this.enable();\n    },\n\n    /**\n     * Refreshes the tags so they match the text/value of their corresponding\n     * item.\n     */\n    refresh: function() {\n      var self = this;\n      $('.tag', self.$container).each(function() {\n        var $tag = $(this),\n            item = $tag.data('item'),\n            itemValue = self.options.itemValue(item),\n            itemText = self.options.itemText(item),\n            tagClass = self.options.tagClass(item);\n\n          // Update tag's class and inner text\n          $tag.attr('class', null);\n          $tag.addClass('tag ' + htmlEncode(tagClass));\n          $tag.contents().filter(function() {\n            return this.nodeType == 3;\n          })[0].nodeValue = htmlEncode(itemText);\n\n          if (self.isSelect) {\n            var option = $('option', self.$element).filter(function() { return $(this).data('item') === item; });\n            option.attr('value', itemValue);\n          }\n      });\n    },\n\n    /**\n     * Returns the items added as tags\n     */\n    items: function() {\n      return this.itemsArray;\n    },\n\n    /**\n     * Assembly value by retrieving the value of each item, and set it on the\n     * element.\n     */\n    pushVal: function() {\n      var self = this,\n          val = $.map(self.items(), function(item) {\n            return self.options.itemValue(item).toString();\n          });\n\n      self.$element.val(val, true).trigger('change');\n    },\n\n    /**\n     * Initializes the tags input behaviour on the element\n     */\n    build: function(options) {\n      var self = this;\n\n      self.options = $.extend({}, defaultOptions, options);\n      var typeahead = self.options.typeahead || {};\n\n      // When itemValue is set, freeInput should always be false\n      if (self.objectItems)\n        self.options.freeInput = false;\n\n      makeOptionItemFunction(self.options, 'itemValue');\n      makeOptionItemFunction(self.options, 'itemText');\n      makeOptionItemFunction(self.options, 'tagClass');\n\n      // for backwards compatibility, self.options.source is deprecated\n      if (self.options.source)\n        typeahead.source = self.options.source;\n\n      if (typeahead.source && $.fn.typeahead) {\n        makeOptionFunction(typeahead, 'source');\n\n        self.$input.typeahead({\n          source: function (query, process) {\n            function processItems(items) {\n              var texts = [];\n\n              for (var i = 0; i < items.length; i++) {\n                var text = self.options.itemText(items[i]);\n                map[text] = items[i];\n                texts.push(text);\n              }\n              process(texts);\n            }\n\n            this.map = {};\n            var map = this.map,\n                data = typeahead.source(query);\n\n            if ($.isFunction(data.success)) {\n              // support for Angular promises\n              data.success(processItems);\n            } else {\n              // support for functions and jquery promises\n              $.when(data)\n               .then(processItems);\n            }\n          },\n          updater: function (text) {\n            self.add(this.map[text]);\n          },\n          matcher: function (text) {\n            return (text.toLowerCase().indexOf(this.query.trim().toLowerCase()) !== -1);\n          },\n          sorter: function (texts) {\n            return texts.sort();\n          },\n          highlighter: function (text) {\n            var regex = new RegExp( '(' + this.query + ')', 'gi' );\n            return text.replace( regex, \"<strong>$1</strong>\" );\n          }\n        });\n      }\n\n      self.$container.on('click', $.proxy(function(event) {\n        self.$input.focus();\n      }, self));\n\n      self.$container.on('blur', 'input', $.proxy(function(event) {\n        var $input = $(event.target);\n        self.add($input.val());\n        $input.val('');\n        event.preventDefault();\n      }, self));\n\n      self.$container.on('keydown', 'input', $.proxy(function(event) {\n        var $input = $(event.target),\n            $inputWrapper = self.findInputWrapper();\n\n        switch (event.which) {\n          // BACKSPACE\n          case 8:\n            if (doGetCaretPosition($input[0]) === 0) {\n              var prev = $inputWrapper.prev();\n              if (prev) {\n                self.remove(prev.data('item'));\n              }\n            }\n            break;\n\n          // DELETE\n          case 46:\n            if (doGetCaretPosition($input[0]) === 0) {\n              var next = $inputWrapper.next();\n              if (next) {\n                self.remove(next.data('item'));\n              }\n            }\n            break;\n\n          // LEFT ARROW\n          case 37:\n            // Try to move the input before the previous tag\n            var $prevTag = $inputWrapper.prev();\n            if ($input.val().length === 0 && $prevTag[0]) {\n              $prevTag.before($inputWrapper);\n              $input.focus();\n            }\n            break;\n          // RIGHT ARROW\n          case 39:\n            // Try to move the input after the next tag\n            var $nextTag = $inputWrapper.next();\n            if ($input.val().length === 0 && $nextTag[0]) {\n              $nextTag.after($inputWrapper);\n              $input.focus();\n            }\n            break;\n         default:\n            // When key corresponds one of the confirmKeys, add current input\n            // as a new tag\n            if (self.options.freeInput && $.inArray(event.which, self.options.confirmKeys) >= 0) {\n              self.add($input.val());\n              $input.val('');\n              event.preventDefault();\n            }\n        }\n\n        // Reset internal input's size\n        $input.attr('size', Math.max(this.inputSize, $input.val().length));\n      }, self));\n\n      // Remove icon clicked\n      self.$container.on('click', '[data-role=remove]', $.proxy(function(event) {\n        self.remove($(event.target).closest('.tag').data('item'));\n        // Grafana mod, if tags input used in popover the click event will bubble up and hide popover\n        event.stopPropagation();\n      }, self));\n\n      // Only add existing value as tags when using strings as tags\n      if (self.options.itemValue === defaultOptions.itemValue) {\n        if (self.$element[0].tagName === 'INPUT') {\n            self.add(self.$element.val());\n        } else {\n          $('option', self.$element).each(function() {\n            self.add($(this).attr('value'), true);\n          });\n        }\n      }\n    },\n\n    /**\n     * Removes all tagsinput behaviour and unregsiter all event handlers\n     */\n    destroy: function() {\n      var self = this;\n\n      // Unbind events\n      self.$container.off('keypress', 'input');\n      self.$container.off('click', '[role=remove]');\n\n      self.$container.remove();\n      self.$element.removeData('tagsinput');\n      self.$element.show();\n    },\n\n    /**\n     * Sets focus on the tagsinput\n     */\n    focus: function() {\n      this.$input.focus();\n    },\n\n    /**\n     * Returns the internal input element\n     */\n    input: function() {\n      return this.$input;\n    },\n\n    /**\n     * Returns the element which is wrapped around the internal input. This\n     * is normally the $container, but typeahead.js moves the $input element.\n     */\n    findInputWrapper: function() {\n      var elt = this.$input[0],\n          container = this.$container[0];\n      while(elt && elt.parentNode !== container)\n        elt = elt.parentNode;\n\n      return $(elt);\n    }\n  };\n\n  /**\n   * Register JQuery plugin\n   */\n  $.fn.tagsinput = function(arg1, arg2) {\n    var results = [];\n\n    this.each(function() {\n      var tagsinput = $(this).data('tagsinput');\n\n      // Initialize a new tags input\n      if (!tagsinput) {\n        tagsinput = new TagsInput(this, arg1);\n        $(this).data('tagsinput', tagsinput);\n        results.push(tagsinput);\n\n        if (this.tagName === 'SELECT') {\n          $('option', $(this)).attr('selected', 'selected');\n        }\n\n        // Init tags from $(this).val()\n        $(this).val($(this).val());\n      } else {\n        // Invoke function on existing tags input\n        var retVal = tagsinput[arg1](arg2);\n        if (retVal !== undefined)\n          results.push(retVal);\n      }\n    });\n\n    if ( typeof arg1 == 'string') {\n      // Return the results from the invoked function calls\n      return results.length > 1 ? results : results[0];\n    } else {\n      return results;\n    }\n  };\n\n  $.fn.tagsinput.Constructor = TagsInput;\n\n  /**\n   * Most options support both a string or number as well as a function as\n   * option value. This function makes sure that the option with the given\n   * key in the given options is wrapped in a function\n   */\n  function makeOptionItemFunction(options, key) {\n    if (typeof options[key] !== 'function') {\n      var propertyName = options[key];\n      options[key] = function(item) { return item[propertyName]; };\n    }\n  }\n  function makeOptionFunction(options, key) {\n    if (typeof options[key] !== 'function') {\n      var value = options[key];\n      options[key] = function() { return value; };\n    }\n  }\n  /**\n   * HtmlEncodes the given value\n   */\n  var htmlEncodeContainer = $('<div />');\n  function htmlEncode(value) {\n    if (value) {\n      return htmlEncodeContainer.text(value).html();\n    } else {\n      return '';\n    }\n  }\n\n  /**\n   * Returns the position of the caret in the given input field\n   * http://flightschool.acylt.com/devnotes/caret-position-woes/\n   */\n  function doGetCaretPosition(oField) {\n    var iCaretPos = 0;\n    if (document.selection) {\n      oField.focus ();\n      var oSel = document.selection.createRange();\n      oSel.moveStart ('character', -oField.value.length);\n      iCaretPos = oSel.text.length;\n    } else if (oField.selectionStart || oField.selectionStart == '0') {\n      iCaretPos = oField.selectionStart;\n    }\n    return (iCaretPos);\n  }\n\n  /**\n   * Initialize tagsinput behaviour on inputs and selects which have\n   * data-role=tagsinput\n   */\n  $(function() {\n    $(\"input[data-role=tagsinput], select[multiple][data-role=tagsinput]\").tagsinput();\n  });\n})(window.jQuery);\n","import { css } from '@emotion/css';\nimport React from 'react';\nimport '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nconst EditorHeader = ({ children }) => {\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.root }, children);\n};\nconst getStyles = (theme) => ({\n  root: css({\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    alignItems: \"center\",\n    gap: theme.spacing(3),\n    minHeight: theme.spacing(4)\n  })\n});\n\nexport { EditorHeader };\n//# sourceMappingURL=EditorHeader.js.map\n","import React from 'react';\n\nconst FlexItem = ({ grow, shrink }) => {\n  return /* @__PURE__ */ React.createElement(\"div\", { style: { display: \"block\", flexGrow: grow, flexShrink: shrink } });\n};\n\nexport { FlexItem };\n//# sourceMappingURL=FlexItem.js.map\n","import { css, cx } from '@emotion/css';\nimport React, { useState } from 'react';\nimport '@grafana/data';\nimport { useStyles2, Select, SelectContainer as SelectContainer$1 } from '@grafana/ui';\n\nfunction InlineSelect({ label: labelProp, ...props }) {\n  const [id] = useState(() => Math.random().toString(16).slice(2));\n  const styles = useStyles2(getSelectStyles);\n  const components = {\n    SelectContainer,\n    ValueContainer,\n    SingleValue: ValueContainer\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.root }, labelProp && /* @__PURE__ */ React.createElement(\"label\", { className: styles.label, htmlFor: id }, labelProp, \":\", \"\\xA0\"), /* @__PURE__ */ React.createElement(Select, { openMenuOnFocus: true, inputId: id, ...props, components }));\n}\nconst SelectContainer = (props) => {\n  const { children } = props;\n  const styles = useStyles2(getSelectStyles);\n  return /* @__PURE__ */ React.createElement(SelectContainer$1, { ...props, className: cx(props.className, styles.container) }, children);\n};\nconst ValueContainer = (props) => {\n  const { className, children } = props;\n  const styles = useStyles2(getSelectStyles);\n  return /* @__PURE__ */ React.createElement(\"div\", { className: cx(className, styles.valueContainer) }, children);\n};\nconst getSelectStyles = (theme) => ({\n  root: css({\n    display: \"flex\",\n    fontSize: 12,\n    alignItems: \"center\"\n  }),\n  label: css({\n    color: theme.colors.text.secondary,\n    whiteSpace: \"nowrap\"\n  }),\n  container: css({\n    background: \"none\",\n    borderColor: \"transparent\"\n  }),\n  valueContainer: css({\n    display: \"flex\",\n    alignItems: \"center\",\n    flex: \"initial\",\n    color: theme.colors.text.secondary,\n    fontSize: 12\n  })\n});\n\nexport { InlineSelect };\n//# sourceMappingURL=InlineSelect.js.map\n"],"names":["bindonceModule","toBoolean","value","v","msie","bindonceDirective","$scope","$element","$attrs","$interpolate","showHideBinder","elm","attr","show","hide","classBinder","results","index","ctrl","binder","bindonceValue","that","newValue","clone","parent","afterNode","parentNode","afterNextSibling","node","selectedTranscludes","switchCtrl","selectedTransclude","attrValue","attrKey","newAttr","scope","attrs","bindonceController","boDirective","childPriority","tElement","tAttrs","transclude","controllers","name","element","parentValue","window","angular","shallowCopy","src","dst","isArray","i","ii","isObject","key","routeToRegExp","path","opts","keys","pattern","_","slash","option","optional","star","isDefined","noop","ngRouteModule","$RouteProvider","instantiateRoute","$routeMinErr","isEagerInstantiationEnabled","inherit","extra","routes","route","routeCopy","redirectPath","params","enabled","$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser","forceReload","preparedRoute","preparedRouteIsUpdateOnly","$route","fakeLocationEvent","prepareRoute","commitRoute","newParams","interpolate","switchRouteMatcher","on","m","len","val","$locationEvent","lastRoute","parseRoute","isNavigationUpdateOnly","nextRoute","nextRoutePromise","getRedirectionData","handlePossibleRedirection","keepProcessingRoute","resolveLocals","locals","error","data","oldPath","oldSearch","newUrl","oldUrl","template","getTemplateFor","templateUrl","match","newRoute","oldRoute","string","result","segment","segmentMatch","$RouteParamsProvider","ngViewFactory","ngViewFillContentFactory","$anchorScroll","$animate","$transclude","currentScope","currentElement","previousLeaveAnimation","autoScrollExp","onloadExp","update","cleanupLastView","response","newScope","current","$compile","$controller","link","controller","module","$sanitizeMinErr","bind","extend","forEach","lowercase","nodeContains","htmlParser","htmlSanitizeWriter","$SanitizeProvider","hasBeenInstantiated","svgEnabled","$$sanitizeUri","validElements","svgElements","html","buf","uri","isImage","enableSvg","elements","addElementsTo","voidElements","validAttrs","arrayToMap","htmlParserImpl","htmlSanitizeWriterImpl","arg","SURROGATE_PAIR_REGEXP","NON_ALPHANUMERIC_REGEXP","stringToMap","optionalEndTagBlockElements","optionalEndTagInlineElements","optionalEndTagElements","blockElements","inlineElements","blockedElements","uriAttrs","htmlAttrs","svgAttrs","str","lowercaseKeys","items","obj","elementsMap","newElements","getInertBodyElement","document","isDOMParserAvailable","getInertBodyElement_DOMParser","inertDocument","inertBodyElement","getInertBodyElement_InertDocument","body","stripCustomNsAttrs","handler","mXSSAttempts","attrToMap","nextNode","getNonDescendant","map","encodeEntities","hi","low","uriValidator","ignoreCurrentElement","out","tag","lkey","chars","l","attrNode","attrName","propName","sanitizeText","writer","$sanitize","LINKY_URL_REGEXP","MAILTO_REGEXP","linkyMinErr","isFunction","isString","text","target","attributes","attributesFn","raw","url","addText","addLink","linkAttributes","autoUpdateOne","MutationObserver","self","watcher","actualizeWatcher","stopWatch","startWatch","debouncedUpdater","win","qs","forward","backward","track","screen","event","y","e","x","xBar","sign","g","scopedWindow","css","add","has","rm","_baron","baron","pos","instances","origin","opera12maxScrollbarSize","macmsxffScrollbarSize","macosxffRe","isMacFF","log","liveBarons","shownErrors","user","withParams","tryNode","isNode","jQueryMode","rootNode","defaultParams","manageAttr","id","instance","init","arrayEach","_obj","iterator","getTime","manageEvents","item","eventManager","mode","evt","direction","fire","eventName","args","func","wait","timeout","timestamp","later","last","barPos","scrollerPos0","resizePauseTimer","scrollingTimer","resizeLastFire","oldBarSize","setBarSize","_size","barMinSize","size","posBar","_pos","was","will","k","relToPos","r","posToRel","t","dontPosSelect","ie","free","dispose","noScroll","rel","sub","enable","minPeriod","delay","upd","offset","client","padding","delta","styles","force","newBarSize","overflow","msOverflowStyle","scroll","axis","scrollerCss","paddingWas","numWas","names","userArg","userParams","viewPortSize","topFixHeights","topRealHeights","headerTops","scroller","fixElement","flag","ori","bubbleWheel","_params","top","num","j","locPos","fixFlag","gradFlag","fixState","hTop","gradState","change","updParams","level","msg","more","supportsPassive","elem","_eventNames","eventNames","prefix","options","each","cls","_input","output","input","selector","_ctx","ctx","panelTemplate","$timeout","panel","subs","Subscription","panelScrollbar","resizeScrollableContent","scrollRootClass","scrollerClass","scrollBarHTML","scrollRoot","updateDimensionsFromParentScope","directiveModule","directiveCache","panelEditorTab","dynamicDirectiveSrv","pluginId","tabName","QueryRowCtrl","queryEditorRowDirective","arr","start","end","date","interpolateTemplateVars","templateSrv","filterFunc","scopedVars","AlertSrv","DynamicDirectiveSrv","child","directiveInfo","childScope","getReactComponent","reactComponent","namePart","applied","fn","wrapped","phase","applyFunctions","propsConfig","prev","config","watchProps","watchDepth","watchExpressions","listener","supportsWatchCollection","supportsWatchGroup","watchGroupExpressions","expr","actualExpr","getPropExpression","exprWatchDepth","getPropWatchDepth","renderComponent","component","props","root","getPropName","prop","getPropConfig","findAttribute","defaultWatch","renderMyComponent","scopeProps","reactDirective","reactComponentName","conf","injectableProps","directive","propExpressions","ngModule","uiSegmentSrv","MetricSegment","fallbackText","type","cssClass","condition","op","ops","addTemplateVars","variableTypeFilter","segments","variable","popoverSrv","openDrop","drop","cleanUp","contentElement","Timer","promise","AngularLoader","compiledElem","$win","defaults","$tooltip","width","height","tmpScope","left","dropdownTypeahead","inputTemplate","buttonTemplate","$input","$button","subItem","typeaheadValues","memo","subIndex","closeDropdownMenu","menuItem","payload","submenuItem","dropdownTypeahead2","timeoutId","autofillEventFix","dispatchChangeEvent","onAnimationStart","animationName","metricSegment","linkTemplate","selectTemplate","cancelBlur","linkMode","debounceLookup","selected","fromClick","query","callback","altSegments","alt","typeahead","metricSegmentModel","cachedOptions","tip","_t","compile","watchChange","editorOptBool","ngchange","editorCheckbox","model","label","gfDropdown","$parse","buildTemplate","placement","ul","li","iElement","iAttrs","getter","oldValue","ev","$this","tooltip","ngModelOnBlur","ngModelCtrl","emptyToNull","viewValue","validTimeSpan","modelValue","setColor","color","borderColor","tagColorFromName","bootstrapTagsinput","getItemProperty","property","select","tagElement","idx","getBlockNodes","nodes","endNode","blockNodes","rebuildOnChange","block","previousElements","domEl","DeltaCtrl","waitForCompile","observerConfig","LinkJSONCtrl","line","unbind","linkJson","arrayJoin","ngModel","split_array","join_array","react2AngularDirective","selectors","QueryType","defaultTimeSeriesList","PreprocessorType","defaultMetricQuery","MetricKind","ValueTypes","AlignmentTypes","defaultLegacyCloudMonitoringAnnotationQuery","MetricFindQueryTypes","AliasBy","refId","onChange","alias","setAlias","propagateOnChange","onInputChange","EditorField","Input","INPUT_WIDTH","LABEL_WIDTH","INNER_LABEL_WIDTH","SELECT_WIDTH","ALIGNMENTS","AGGREGATIONS","ALIGNMENT_PERIODS","GRAPH_PERIODS","LOOKBACK_PERIODS","SLO_BURN_RATE_SELECTOR_NAME","SELECTORS","QUERY_TYPES","Project","projectName","datasource","templateVariableOptions","projects","setProjects","projectsWithTemplateVariables","extractServicesFromMetricDescriptors","metricDescriptors","getMetricTypesByService","service","getMetricTypes","metricType","interpolatedMetricType","selectedService","metricTypes","metricTypeExistInArray","metricTypeByService","getAlignmentOptionsByMetric","metricValueType","metricKind","preprocessor","getAggregationOptionsByMetric","valueType","getLabelKeys","selectedMetricType","labels","getAlignmentPickerData","perSeriesAligner","alignOptions","o","labelsToGroupedOptions","groupBys","groups","acc","curr","group","stringArrayToFilters","filterArray","operator","alignmentPeriodLabel","customMetaData","alignmentPeriod","alignment","ap","seconds","getMetricType","metricTypeKey","f","setMetricType","Aggregation","aggOptions","useAggregationOptionsByMetric","useSelectedFromOptions","metricDescriptor","a","s","GroupBy","variableOptionGroup","EditorFieldGroup","crossSeriesReducer","AlignmentFunction","inputId","psa","PeriodSelect","disabled","aligmentPeriods","visibleOptions","Alignment","alignmentLabel","q","period","DEFAULT_OPERATOR","DEFAULT_CONDITION","filtersToStringArray","filters","operators","protectedFilterKeys","LabelFilter","_onChange","rawFilters","protectedFilters","getOptions","opp","valueOptions","renderItem","onChangeItem","onDeleteItem","AccessoryButton","EditorRow","EditorList","AnnotationsHelp","LookbackPeriodSelect","lp","SLO","slos","setSLOs","serviceId","sloIds","sloId","sloName","slo","Selector","selectorName","Service","services","setServices","serviceName","defaultQuery","dataSource","SLOQueryEditor","aliasBy","onChangeAliasBy","lookbackPeriod","MQLQueryEditor","onRunQuery","onKeyDown","TextArea","VariableQueryField","allowCustomValue","NONE_OPTION","Preprocessor","useOptions","RadioButtonGroup","Editor","range","setLabels","setMetricDescriptors","setMetricDescriptor","metrics","setMetrics","setService","timeRange","setTimeRange","time","theme","selectStyles","getSelectStyles","customStyle","getStyles","getSelectedMetricDescriptor","md","getServicesList","selectedMetricDescriptor","onServiceChange","onMetricTypeChange","filterMetrics","filter","filtered","debounceFilter","VisualMetricQueryEditor","GraphPeriod","graphPeriod","Switch","defaultTimeSeriesQuery","onQueryChange","onChangeTimeSeriesList","timeSeriesList","filtersComplete","onChangeTimeSeriesQuery","timeSeriesQuery","EditorRows","Stack","MetricQueryEditor","PromQLQueryEditor","onReturnKeyDown","QueryHeader","queryType","EditorHeader","InlineSelect","FlexItem","QueryEditor","modalIsOpen","setModalIsOpen","migrated","currentQuery","setCurrentQuery","queryHasBeenEdited","setQueryHasBeenEdited","sloQuery","onSLOQueryChange","promQLQuery","onPromQLQueryChange","onMetricQueryChange","checkForModalDisplay","ConfirmModal","MetricSelect","placeholder","className","isSearchable","useSelectOptions","useSelectedOption","onChangeValue","selectable","variables","PanelHeaderMenuItem","ref","setRef","isSubMenu","icon","getDropdownLocationCssClass","Icon","wrapperPos","SelectNav","children","customCss","defaultSelectedItem","navItem","Navigation","TabsBar","Tab","PageHeader","renderTitle","actions","info","subTitle","renderHeader","main","marginTop","renderHeaderTitle","PageInfo","title","highlightText","ProBadge","SecretFormField","registerAngularDirectives","Footer","Spinner","HelpModal","EmptyListCTA","TagFilter","ColorPicker","SeriesColorPickerPopover","UnitPicker","GraphContextMenu","DataLinksInlineEditor","DataSourceHttpSettings","OldFolderPicker","TimePickerSettings","ClipboardButton","promiseToDigest","queryPartEditorDirective","paramTemplate","part","partDef","$paramsContainer","clickFuncParam","paramIndex","$link","inputBlur","inputKeyPress","inputKeyDown","addTypeahead","param","typeaheadSource","dynamicOptions","res","action","addElementsAndCompile","paramValue","$paramLink","relink","typeaheadMatcher","FormDropdownCtrl","optionTexts","formDropdownDirective","geminiScrollbar","scrollParams","scrollbar","expansionLevel","jsonObject","checkboxTemplate","SwitchCtrl","switchDirective","checkboxDirective","infoPopover","position","classes","openOn","content","dropOptions","spectrumPicker","DEFAULT_THEME_DARK","DEFAULT_THEME_LIGHT","DEFAULT_MODE","DEFAULT_MAX_LINES","DEFAULT_TAB_SIZE","DEFAULT_BEHAVIORS","DEFAULT_SNIPPETS","editorTemplate","langMode","maxLines","showGutter","tabSize","behavioursEnabled","snippetsEnabled","aceElem","ace","codeEditor","editorSession","editorOptions","setThemeMode","setLangMode","setEditorContent","textarea","editorValue","lang","anyEditor","aceModeName","codeEditorDirective","sqlPartEditorDirective","switchToLink","datasourceSetting","pluginDirectiveLoader","$http","$templateCache","getTemplate","cached","relativeTemplateUrlToAbs","baseUrl","getPluginComponentDirective","loadPanelComponentInfo","componentInfo","panelInfo","importPanelPlugin","panelPlugin","PanelCtrl","getModule","ds","dsPlugin","dsMeta","angularUrl","appPlugin","appendAndCompile","registerPluginComponent","directiveName","directiveFn","err","GrafanaCtrl","utilSrv","contextSrv","angularLoader","colors","localScope","callerScope","grafanaAppDirective","lastActivity","activeUser","inActiveTimeLimit","checkForInActiveUser","userActivityDetected","clickAutoHide","clickAutoHideParent","popover","RouteParamsProvider","RouteProvider","tamperAngularLocation","$provide","$delegate","interceptAngularLocation","AngularLocationWrapper","initAngularRoutingBridge","monkeyPatchInjectorWithPreAssignedBindings","injector","parentScope","getAngularPanelReactWrapper","plugin","divRef","angularState","angularComponent","loader","queryRunner","FakeQueryRunner","fakePanel","PanelModelCompatibilityWrapper","EventBus","ReplaySubject","UtilSrv","deprecationWarning","AnnotationsSrv","annotation","registerComponents","importMap","sdk","AngularApp","app","$controllerProvider","$compileProvider","$filterProvider","$httpProvider","$sceDelegateProvider","get","DashboardLoaderSrv","imports","QueryCtrl","templates","ctaStyle","infoBoxStyles","buttonIcon","buttonLink","buttonTitle","buttonDisabled","onClick","proTip","proTipLink","proTipLinkTitle","proTipTarget","infoBox","infoBoxTitle","footer","ctaElementClassName","ButtonEl","ctaElement","experimentId","eventVariant","htmlProps","MetricsPanelCtrl","$","transitionEnd","el","transEndEventNames","toggle","Dropdown","$el","$parent","isActive","getParent","clearMenus","$items","$active","old","Modal","transition","animate","doAnimate","href","$target","Tooltip","eventIn","eventOut","triggers","trigger","$tip","actualWidth","actualHeight","tp","replace","dimension","removeWithAnimation","$e","$ul","previous","container","next","Typeahead","beginswith","caseSensitive","caseInsensitive","$1","active","isSupported","Affix","scrollHeight","scrollTop","offsetBottom","offsetTop","reset","affix","$spy","defaultOptions","$tag","TagsInput","dontPushVal","itemValue","itemText","tagClass","existing","$existingTag","htmlEncode","$option","other","makeOptionItemFunction","makeOptionFunction","process","processItems","texts","regex","$inputWrapper","doGetCaretPosition","$prevTag","$nextTag","elt","arg1","arg2","tagsinput","retVal","propertyName","htmlEncodeContainer","oField","iCaretPos","oSel","grow","shrink","labelProp","components","SelectContainer","ValueContainer"],"sourceRoot":""}