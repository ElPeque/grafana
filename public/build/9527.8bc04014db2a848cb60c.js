"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9527],{71839:(dt,Z,t)=>{t.d(Z,{o:()=>P});var A=t(74848),B=t(96540),I=t(40462),V=t(38075),Y=t(63739),F=t(47286),O=t(85832),G=t(87579),R=t(7257),g=t(6248);function D(i,a,o=[]){for(const n of o)if(typeof n=="function"){if(!n(i,a))return!1}else if(a[n]!==i[n])return!1;return!0}const N={x:I.sJ.get(V.Ct.firstTimeField).get({}),y:I.sJ.get(V.Ct.byTypes).get(new Set([Y.PU.number,Y.PU.enum]))};class P extends B.Component{constructor(a){super(a),this.getTimeRange=()=>this.props.timeRange;let o=this.prepState(a);o.alignedData=o.config.prepData([o.alignedFrame]),this.state=o,this.plotInstance=B.createRef()}prepState(a,o=!0){let n=null;const{frames:s,fields:r=N,preparePlotFrame:f,replaceVariables:v,dataLinkPostProcessor:M}=a,y=f??g.m,p=s.some(E=>E.fields.some(W=>(W.config.links?.length??0)>0)),z=y(s,{...r,y:p?()=>!0:r.y},a.timeRange);if((0,R.uY)("GraphNG",!1,"data aligned",z),z){let E=z;if(p){const m=Array.isArray(this.props.timeZone)?this.props.timeZone[0]:this.props.timeZone;let h=s.map((u,x)=>({...u,fields:z.fields.filter((T,_)=>_===0||T.state?.origin?.frameIndex===x),length:z.length}));h.forEach((u,x)=>{u.fields.forEach(T=>{T.getLinks=(0,F._M)(u,T,{...T.state?.scopedVars,__dataContext:{value:{data:h,field:T,frame:u,frameIndex:x}}},v,m,M)})}),E={...z,fields:z.fields.filter((u,x)=>x===0||r.y(u,z,[z]))}}if(a.omitHideFromViz){const m=E.fields.filter(h=>h.config.custom?.hideFrom?.viz!==!0);E={...E,fields:m,length:m.length}}let W=this.state?.config;o&&(W=a.prepConfig(E,this.props.frames,this.getTimeRange),(0,R.uY)("GraphNG",!1,"config prepared",W)),n={alignedFrame:E,config:W},(0,R.uY)("GraphNG",!1,"data prepared",n.alignedData)}return n}componentDidUpdate(a){const{frames:o,structureRev:n,timeZone:s,cursorSync:r,propsToDiff:f}=this.props,v=!D(a,this.props,f);if(o!==a.frames||v||s!==a.timeZone||r!==a.cursorSync){let M=this.prepState(this.props,!1);M&&((this.state.config===void 0||s!==a.timeZone||r!==a.cursorSync||n!==a.structureRev||!n||v)&&(M.config=this.props.prepConfig(M.alignedFrame,this.props.frames,this.getTimeRange),(0,R.uY)("GraphNG",!1,"config recreated",M.config)),M.alignedData=M.config.prepData([M.alignedFrame]),this.setState(M))}}render(){const{width:a,height:o,children:n,renderLegend:s}=this.props,{config:r,alignedFrame:f,alignedData:v}=this.state;return r?(0,A.jsx)(O.KU,{width:a,height:o,legend:s(r),children:(M,y)=>(0,A.jsx)(G.Z,{config:r,data:v,width:M,height:y,plotRef:p=>this.plotInstance.current=p,children:n?n(r,f):null})}):null}}},6248:(dt,Z,t)=>{t.d(Z,{m:()=>R});var A=t(63739),B=t(77230),I=t(66380);function V(g,D,N){let P,i;for(let a=0;a<D.length;a++)if(D[a]==null)i==null&&P!=null&&(i=a);else{if(i!=null&&P!=null){if(g[a]-P<N)for(;i<a;)D[i++]=void 0;i=null}P=g[a]}return D}var Y=t(7500);function F(g){return g.type===A.PU.number&&g.config.custom?.drawStyle===Y.GR.Bars&&!g.config.custom?.hideFrom?.viz}function O(g,D){return g.fields.find(N=>D!=null?N.name===D:N.type===A.PU.time)}function G(g,D){const N=O(g,D);let P=N?.values;for(let i=0;i<g.fields.length;i++){let a=g.fields[i];if(a===N||F(a))continue;let o=a.config.custom?.spanNulls;typeof o=="number"&&o!==-1&&P&&(a.values=V(P,a.values,o))}return g}function R(g,D,N){let P;t:for(let n of g)for(let s of n.fields)if(D.x(s,n,g)){P=s;break t}g=g.map(n=>P?.state?.nullThresholdApplied?n:(0,I.M)({frame:n,refFieldName:P.name,refFieldPseudoMin:N?.from.valueOf(),refFieldPseudoMax:N?.to.valueOf()}));let i=g.reduce((n,s)=>n+s.fields.reduce((r,f)=>r+(F(f)?1:0),0),0),a=1/0;i>1&&g.forEach(n=>{if(!n.fields.some(F))return;const s=P.values;for(let r=0;r<s.length;r++)r>0&&(a=Math.min(a,s[r]-s[r-1]))});let o=(0,B.Fd)({frames:g,joinBy:D.x,keep:D.y,keepOriginIndices:!0,keepDisplayNames:!0,nullMode:n=>{if(F(n))return B.WO;let s=n.config.custom?.spanNulls;return s===!0?B.RC:s===-1?B.WO:B.JI}});return o?(o=G(o,P.name),a!==1/0&&(o.fields.forEach((n,s)=>{let r=n.values;if(s===0){let f=r[r.length-1];r.push(f+a,f+2*a)}else F(n)?r.push(null,null):r.push(void 0,void 0)}),o.length+=2),o):null}},29519:(dt,Z,t)=>{t.d(Z,{Z:()=>W});var A=t(74848),B=t(96540),I=t(31376),V=t(29675),Y=t(71839),F=t(2543),O=t(36613),G=t(63739),R=t(59141),g=t(16869),D=t(18752),N=t(62931),P=t(23570),i=t(7500),a=t(5858),o=t(5077),n=t(24415),s=t(7257);const r=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),f=Array(53);for(let m=0;m<f.length;m++)f[m]=2**m;const v=(m,h=1)=>m==null?"-":m.toFixed(h),M={drawStyle:i.GR.Line,showPoints:i.yL.Auto,axisPlacement:i.vM.Auto},y=({frame:m,theme:h,timeZones:u,getTimeRange:x,allFrames:T,renderers:_,tweakScale:j=c=>c,tweakAxis:X=c=>c,hoverProximity:Q,orientation:k=i.wV.Horizontal})=>{const c=k!==i.wV.Vertical,d=new a.e(u[0]);let w;d.setPrepData(L=>(w=L[0],(0,s.bq)(L[0],d.getStackingGroups())));const C=m.fields[0];if(!C)return d;const q="x";let tt="";const lt=C.config.custom?.axisPlacement===i.vM.Hidden?i.vM.Hidden:c?i.vM.Bottom:i.vM.Left,mt=C.config.custom?.axisPlacement!==i.vM.Hidden;if(C.type===G.PU.time){d.addScale({scaleKey:q,orientation:c?i.Lt.Horizontal:i.Lt.Vertical,direction:c?i.ON.Right:i.ON.Up,isTime:!0,range:()=>{const e=x();return[e.from.valueOf(),e.to.valueOf()]}});const L=u.length>1?(e,S)=>c?S.map((l,ot)=>ot<2?null:l):S:void 0;for(let e=0;e<u.length;e++){const S=u[e];d.addAxis({scaleKey:q,isTime:!0,placement:lt,show:mt,label:C.config.custom?.axisLabel,timeZone:S,theme:h,grid:{show:e===0&&C.config.custom?.axisGridShow},filter:L})}u.length>1&&d.addHook("drawAxes",e=>{e.ctx.save();let S=0;e.axes.forEach(l=>{if(c&&l.side===2){e.ctx.fillStyle=h.colors.text.primary,e.ctx.textAlign="left",e.ctx.textBaseline="bottom";let ot=l._pos+l._size;e.ctx.fillText(u[S],e.bbox.left,ot*O.A.pxRatio),S++}}),e.ctx.restore()})}else d.addScale({scaleKey:q,orientation:c?i.Lt.Horizontal:i.Lt.Vertical,direction:c?i.ON.Right:i.ON.Up,range:(L,e,S)=>[C.config.min??e,C.config.max??S]}),d.addAxis({scaleKey:q,placement:lt,show:mt,label:C.config.custom?.axisLabel,theme:h,grid:{show:C.config.custom?.axisGridShow},formatValue:(L,e)=>(0,R.cN)(C.display(L,e))});let xt=_?.flatMap(L=>Object.values(L.fieldMap).filter(e=>L.indicesOnly.indexOf(e)===-1))??[],it;for(let L=1;L<m.fields.length;L++){const e=m.fields[L],S={...e.config,custom:{...M,...e.config.custom}},l=S.custom;if(e===C||e.type!==G.PU.number&&e.type!==G.PU.enum)continue;let ot=e.display??v;e.config.custom?.stacking?.mode===i.gs.Percent&&(ot=(0,g.J)({field:{...e,config:{...e.config,unit:"percentunit"}},theme:h}));const ct=(0,n.M)(S,e.type),ut=(0,D.Qi)(e),Et=(0,D.lz)(e,h).color;if(d.addScale(j({scaleKey:ct,orientation:c?i.Lt.Vertical:i.Lt.Horizontal,direction:c?i.ON.Up:i.ON.Right,distribution:l.scaleDistribution?.type,log:l.scaleDistribution?.log,linearThreshold:l.scaleDistribution?.linearThreshold,min:e.config.min,max:e.config.max,softMin:l.axisSoftMin,softMax:l.axisSoftMax,centeredZero:l.axisCenteredZero,stackingMode:l.stacking?.mode,range:e.type===G.PU.enum?(U,nt,et)=>[-1,e.config.type.enum.text.length]:void 0,decimals:e.config.decimals},e)),tt||(tt=ct),l.axisPlacement!==i.vM.Hidden){let U;l.axisColorMode===i.Y$.Series&&(ut.isByValue&&e.config.custom?.gradientMode===i.on.Scheme&&ut.id===N.Y.Thresholds?U=(0,o.pl)(1,h,ut,e.config.thresholds):U=Et);const nt={border:{show:l.axisBorderShow||!1,width:1/devicePixelRatio,stroke:U||h.colors.text.primary},ticks:{show:l.axisBorderShow||!1,stroke:U||h.colors.text.primary},color:U||h.colors.text.primary};let et,K,b;if(r.has(S.unit))et=f;else if(e.type===G.PU.enum){let H=e.config.type.enum.text;b=H.map(($,J)=>J),K=H}d.addAxis(X({scaleKey:ct,label:l.axisLabel,size:l.axisWidth,placement:c?l.axisPlacement??i.vM.Auto:i.vM.Bottom,formatValue:(H,$)=>(0,R.cN)(ot(H,$)),theme:h,grid:{show:l.axisGridShow},decimals:e.config.decimals,distr:l.scaleDistribution?.type,splits:b,values:K,incrs:et,...nt},e))}const Lt=l.drawStyle===i.GR.Points?i.yL.Always:l.showPoints;let Pt=()=>null;l.spanNulls!==!0&&(Pt=(U,nt,et,K)=>{let b=[],H=U.series[nt];if(!et&&K&&K.length){const[$,J]=H.idxs,pt=U.data[0],st=U.data[nt],Mt=Math.round(U.valToPos(pt[$],"x",!0)),ht=Math.round(U.valToPos(pt[J],"x",!0));K[0][0]===Mt&&b.push($);for(let at=0;at<K.length;at++){let Dt=K[at],_t=K[at+1];if(_t&&Dt[1]===_t[0]){let rt=U.posToIdx(Dt[1],!0);if(st[rt]==null)for(let ft=1;ft<100;ft++){if(st[rt+ft]!=null){rt+=ft;break}if(st[rt-ft]!=null){rt-=ft;break}}b.push(rt)}}K[K.length-1][1]===ht&&b.push(J)}return b.length?b:null});let{fillOpacity:gt}=l,yt=null,vt=null;if(e.state?.origin){it||(it=p(m,T));const U=T[e.state.origin.frameIndex],nt=U?.fields[e.state.origin.fieldIndex],et=(0,P.Ct)(nt??e,U,T);if(xt.indexOf(et)>=0)yt=()=>null,vt=()=>{};else if(l.transform===i.NU.Constant){const K=O.A.paths.linear();yt=(b,H)=>{const $=b._data,J=x();let pt=[J.from.valueOf(),J.to.valueOf()],st=$[H].find(at=>at!=null),Mt=[st,st],ht=$.slice();return ht[0]=pt,ht[H]=Mt,K({...b,_data:ht},H,0,1)}}if(l.fillBelowTo){const K=m.fields.find(J=>l.fillBelowTo===J.name||l.fillBelowTo===J.config?.displayNameFromDS||l.fillBelowTo===(0,P.Ct)(J,m,T)),b=K?(0,P.Ct)(K,m,T):l.fillBelowTo,H=it.get(et),$=it.get(b);(0,F.isNumber)($)&&(0,F.isNumber)(H)?(d.addBand({series:[H,$],fill:void 0}),gt||(gt=35)):gt=0}}let Ot;ut.id===N.Y.Thresholds&&(Ot=U=>(0,D.lz)(w.fields[U],h).color),d.addSeries({pathBuilder:yt,pointsBuilder:vt,scaleKey:ct,showPoints:Lt,pointsFilter:Pt,colorMode:ut,fillOpacity:gt,theme:h,dynamicSeriesColor:Ot,drawStyle:l.drawStyle,lineColor:l.lineColor??Et,lineWidth:l.lineWidth,lineInterpolation:l.lineInterpolation,lineStyle:l.lineStyle,barAlignment:l.barAlignment,barWidthFactor:l.barWidthFactor,barMaxWidth:l.barMaxWidth,pointSize:l.pointSize,spanNulls:l.spanNulls||!1,show:!l.hideFrom?.viz,gradientMode:l.gradientMode,thresholds:S.thresholds,hardMin:e.config.min,hardMax:e.config.max,softMin:l.axisSoftMin,softMax:l.axisSoftMax,dataFrameFieldIndex:e.state?.origin}),l.thresholdsStyle&&S.thresholds&&(l.thresholdsStyle.mode??i.Ly.Off)!==i.Ly.Off&&d.addThresholds({config:l.thresholdsStyle,thresholds:S.thresholds,scaleKey:ct,theme:h,hardMin:e.config.min,hardMax:e.config.max,softMin:l.axisSoftMin,softMax:l.axisSoftMax})}let Tt=(0,s.ro)(m);d.setStackingGroups(Tt),_?.forEach(L=>{it||(it=p(m,T));let e={};for(let S in L.fieldMap){let l=L.fieldMap[S];e[S]=it.get(l)}L.init(d,e)});const St=15;let Ct={hover:{prox:(L,e,S)=>Q??(L.data[e][S]===null?St:null),skip:[null]},focus:{prox:Q??30}};return d.setCursor(Ct),d};function p(m,h){const u=new Map;return m.fields.forEach((x,T)=>{const _=x.state?.origin;if(_){const j=h[_.frameIndex]?.fields[_.fieldIndex];j&&u.set((0,P.Ct)(j,h[_.frameIndex],h),T)}}),u}const z=["legend","options","theme"];class E extends B.Component{constructor(){super(...arguments),this.prepConfig=(h,u,x)=>{const{theme:T,timeZone:_,options:j,renderers:X,tweakAxis:Q,tweakScale:k}=this.props;return y({frame:h,theme:T,timeZones:Array.isArray(_)?_:[_],getTimeRange:x,allFrames:u,renderers:X,tweakScale:k,tweakAxis:Q,hoverProximity:j?.tooltip?.hoverProximity,orientation:j?.orientation})},this.renderLegend=h=>{const{legend:u,frames:x}=this.props;return!h||u&&!u.showLegend||!(0,I.t)(h,x)?null:(0,A.jsx)(I.$,{data:x,config:h,...u})}}render(){return(0,A.jsx)(Y.o,{...this.props,prepConfig:this.prepConfig,propsToDiff:z,renderLegend:this.renderLegend})}}const W=(0,V.cV)(E);W.displayName="TimeSeries"},70561:(dt,Z,t)=>{t.d(Z,{k:()=>P});var A=t(74848),B=t(59141),I=t(63739),V=t(7500),Y=t(53823),F=t(14411),O=t(33409),G=t(69921),R=t(37813),g=t(69598),D=t(11044),N=t(16725);const P=({series:i,_rest:a,dataIdxs:o,seriesIdx:n,mode:s=V.$N.Single,sortOrder:r=V.xB.None,isPinned:f,annotate:v,maxHeight:M,replaceVariables:y=E=>E,dataLinks:p,hideZeros:z})=>{const E=i.fields[0],W=(0,B.cN)(E.display(E.values[o[0]])),m=(0,R.cp)(i.fields,E,o,n,s,r,x=>x.type===I.PU.number||x.type===I.PU.enum,z);a?.forEach(x=>{x.config.custom?.hideFrom?.tooltip||m.push({label:x.state?.displayName??x.name,value:(0,D.Sc)(x,x.values[o[0]])})});let h;if(n!=null){const x=i.fields[n],T=p.some(_=>_.oneClick===!0);if(f||T){const _=o[n],j=(0,g.OG)(i,x,y,_);h=(0,A.jsx)(F.S,{dataLinks:p,actions:j,annotate:v})}}const u=E.config.custom?.hideFrom?.tooltip?null:{label:E.type===I.PU.time?"":E.state?.displayName??E.name,value:W};return(0,A.jsxs)(G.i,{children:[u!=null&&(0,A.jsx)(O.A,{item:u,isPinned:f}),(0,A.jsx)(Y.o,{items:m,isPinned:f,scrollable:(0,N.T5)({mode:s,maxHeight:M}),maxHeight:M}),h]})}},61733:(dt,Z,t)=>{t.d(Z,{Oq:()=>I,QB:()=>Y,it:()=>B,uZ:()=>A});var A=(O=>(O.Circle="circle",O.Square="square",O))(A||{}),B=(O=>(O.Auto="auto",O.Manual="manual",O))(B||{}),I=(O=>(O.Lines="lines",O.Points="points",O.PointsAndLines="points+lines",O))(I||{});const V={id:""},Y={fillOpacity:50,show:"points"},F={series:[]}},11044:(dt,Z,t)=>{t.d(Z,{Sc:()=>g,hV:()=>N,rE:()=>i});var A=t(59141),B=t(38075),I=t(23570),V=t(40462),Y=t(63739),F=t(62931),O=t(32370),G=t(7500),R=t(61733);function g(o,n){return o.display?(0,A.cN)(o.display(n)):`${n}`}function D(o){return o.id===B.jR.byIndex?(n,s)=>s===o.options:()=>!1}function N(o,n,s,r){(0,I.Fm)(s),(0,I.j2)(s,r);let f=[];n.length===0&&(n=[{}]);const{palette:v,getColorByName:M}=O.$.theme2.visualization;if(n.forEach((y,p)=>{if(o===R.it.Manual&&(y.frame?.matcher==null||y.x?.matcher==null||y.y?.matcher==null))return;let z=(0,V.NS)(y.x?.matcher??{id:B.Ct.byType,options:"number"}),E=(0,V.NS)(y.y?.matcher??{id:B.Ct.byType,options:"number"}),W=y.color?(0,V.NS)(y.color.matcher):null,m=y.size?(0,V.NS)(y.size.matcher):null,h=y.frame?D(y.frame.matcher):null;s.forEach((u,x)=>{if(h!=null&&!h(u,x))return;let T=[],_=[],j=u.fields.filter(c=>c.type===Y.PU.number),X=j.find(c=>z(c,u,s)),Q=W!=null?j.find(c=>c!==X&&W(c,u,s)):void 0,k=m!=null?j.find(c=>c!==X&&c!==Q&&m(c,u,s)):void 0;X!=null&&(j.forEach(c=>{if(c!==X&&!(o===R.it.Auto&&(c===Q||c===k))&&!(o===R.it.Manual&&_.length>0)&&E(c,u,s)&&!c.config.custom?.hideFrom?.viz){let d=c,w=y.name?.fixed;if(w==null){const q=s.length>1&&(u.name!=null||Object.keys(d.labels??{}).length>0),{displayName:tt,displayNameFromDS:lt}=d.config,mt=tt!=null||lt!=null;if(q&&mt){const xt=d.state.displayName;d.config.displayName=d.config.displayNameFromDS=d.state.displayName=void 0,w=(0,I.Ct)(d,u,s),w=w.replace(d.name,lt??tt),d.config.displayName=tt,d.config.displayNameFromDS=lt,d.state.displayName=xt}else w=(0,I.Ct)(d,u,s)}let C={name:{value:w},showPoints:d.config.custom.show===R.Oq.Lines?G.yL.Never:G.yL.Always,pointShape:d.config.custom.pointShape,pointStrokeWidth:d.config.custom.pointStrokeWidth,fillOpacity:d.config.custom.fillOpacity,showLine:d.config.custom.show!==R.Oq.Points,lineWidth:d.config.custom.lineWidth??2,lineStyle:d.config.custom.lineStyle,x:{field:X},y:{field:d},color:{},size:{},_rest:T};Q!=null&&(C.color.field=Q),k!=null&&(C.size.field=k,C.size.min=k.config.custom.pointSize?.min??5,C.size.max=k.config.custom.pointSize?.max??100),_.push(C)}}),_.length,u.fields.forEach(c=>{_.some(({x:w,y:C,color:q,size:tt})=>w.field===c||C.field===c||q.field===c||tt.field===c)||T.push(c)}),f.push(..._))})}),f.length!==0){let y=0;f.forEach((p,z)=>{if(p.color.field==null){let E=p.y.field.config.color??{mode:F.Y.PaletteClassic},W="";E.mode===F.Y.PaletteClassic?W=M(v[y++%v.length]):E.mode===F.Y.Fixed&&(W=M(E.fixedColor)),p.color.fixed=W}p.size.field==null&&(p.size.fixed=p.y.field.config.custom.pointSize?.fixed??5)}),P(f)}return f}function P(o){let n=o.map(f=>f.name.value.split(/\s+/g));const{prefix:s,suffix:r}=a(n);(s<1/0||r<1/0)&&o.forEach((f,v)=>{f.name.value=n[v].slice(s,n[v].length-r).join(" ")})}function i(o){let n=o.map(M=>M.split(/\s+/g)),{prefix:s,suffix:r}=a(n),f=n[0];if(f.length===1&&s===1&&r===1)return"";let v=[];return s>0&&v.push(...f.slice(0,s)),r>0&&v.push(...f.slice(-r)),v.join(" ")}function a(o){let n=1/0,s=1/0,r=o[0];for(let f=1;f<o.length;f++)o[f].length<r.length&&(r=o[f]);for(let f=1;f<o.length;f++){let v=o[f];if(v!==r){let M=0;for(let p=0;p<r.length&&v[p]===r[p];p++)M++;M<n&&(n=M);let y=0;for(let p=r.length-1;p>=0&&v[p]===r[p];p--)y++;y<s&&(s=y)}}return{prefix:n,suffix:s}}}}]);

//# sourceMappingURL=9527.8bc04014db2a848cb60c.js.map