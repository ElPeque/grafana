"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1085],{79653:(N,M,e)=>{e.d(M,{e:()=>d});var t=e(74848),o=e(54594);const d=({isCollapsed:a,onToggle:v,idControlled:u,className:r,text:A,size:y="xl",...x})=>(0,t.jsx)(o.$n,{type:"button",fill:"text",variant:"secondary","aria-expanded":!a,"aria-controls":u,className:r,icon:a?"angle-right":"angle-down",onClick:()=>v(!a),...x,children:A})},76778:(N,M,e)=>{e.d(M,{P:()=>r});var t=e(74848),o=e(22803),d=e(29675),a=e(45565),v=e(48583),u=e(79784);const r=({children:y,icon:x,color:i="secondary",direction:B="row",...P})=>{const O=(0,d.of)(A),L=typeof P.onClick=="function",l=B==="row",f=l?"center":"flex-start",s=l?.5:0;return(0,t.jsx)("div",{className:(0,o.cx)({[O.interactive]:L}),...P,children:(0,t.jsx)(a.E,{variant:"bodySmall",color:i,children:(0,t.jsxs)(v.B,{direction:B,alignItems:f,gap:s,wrap:"wrap",children:[x&&(0,t.jsx)(u.I,{size:"xs",name:x}),y]})})})},A=()=>({interactive:(0,o.css)({cursor:"pointer"})})},98747:(N,M,e)=>{e.d(M,{S:()=>d,X:()=>a});var t=e(74848),o=e(45565);const d=({content:v})=>(0,t.jsx)(o.E,{color:"primary",children:v}),a=({content:v})=>(0,t.jsx)(o.E,{variant:"code",children:v})},74625:(N,M,e)=>{e.d(M,{z8:()=>yt,yz:()=>ct,uO:()=>lt});var t=e(74848),o=e(22803),d=e(2543),a=e(96540),v=e(3202),u=e(29675),r=e(48583),A=e(79784),y=e(45565),x=e(6736),i=e(11817),B=e(98747),P=e(19224),O=e(54731),L=e(54594),l=e(60232),f=e(76966),s=e(79179),c=e(41972),R=e(13005),W=e(18269),D=e(13693),C=e(747),z=e(35874),I=e(5127),K=e(27219),w=e(7484),b=e(66384);const G=()=>(0,t.jsx)(b.E,{text:"Unused","aria-label":"unused",color:"orange",icon:"exclamation-triangle",tooltip:"This contact point is not used in any notification policy or alert rule"});var J=e(80681);const Q=({contactPoint:n,onDelete:h})=>{const{name:m,id:E,provisioned:p,policies:T=[]}=n,U=(0,u.of)(Y),[j,g]=(0,a.useState)(!1),{selectedAlertmanager:S}=(0,R.VI)(),_=(0,D.dM)(S),[$,H]=(0,C.L7)(C.QI.ExportContactPoint),[F,k]=(0,C.L7)(C.QI.UpdateContactPoint),[dt,Mt]=(0,C.L7)(C.QI.UpdateContactPoint),[Ot,Ct]=(0,s.G)(),It=(0,J.T8)(S,n),Tt=T.filter(rt=>rt.route.type!=="auto-generated"),mt=(0,D.gw)(n,W.T.InUseRoutes),st=_?Number(mt):T.length,ut=_?Number(mt):Tt.length,q=Number((0,D.gw)(n,W.T.InUseRules))||0,At=_?!!(st||q):T.length>0,Rt=(0,D.Au)(n)||k,et=F&&Rt&&!p,xt=(0,D.zl)(n)||Mt,pt=dt&&xt&&(!p&&!ut&&!q),tt=[];if(It&&tt.push((0,t.jsx)(a.Fragment,{children:(0,t.jsx)(P.W.Item,{icon:"unlock",label:"Manage permissions",onClick:()=>g(!0)})},"manage-permissions")),$&&tt.push((0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(P.W.Item,{icon:"download-alt",label:"Export",ariaLabel:"export",disabled:!H,"data-testid":"export",onClick:()=>Ct(m)}),(0,t.jsx)(P.W.Divider,{})]},"export-contact-point")),dt){const rt=(0,i.t)("alerting.contact-points.delete-reasons.no-permissions","You do not have the required permission to delete this contact point"),Kt=(0,i.t)("alerting.contact-points.delete-reasons.provisioned","Contact point is provisioned and cannot be deleted via the UI"),Ut=(0,i.t)("alerting.contact-points.delete-reasons.policies","Contact point is referenced by one or more notification policies"),St=(0,i.t)("alerting.contact-points.delete-reasons.rules","Contact point is referenced by one or more alert rules"),bt=[xt?"":rt,p?Kt:"",ut>0?Ut:"",q?St:""].filter(Boolean),_t=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.x6,{i18nKey:"alerting.contact-points.delete-reasons.heading",children:"Contact point cannot be deleted for the following reasons:"}),(0,t.jsx)("br",{}),bt.map(nt=>(0,t.jsx)("li",{children:nt},nt))]});tt.push((0,t.jsx)(f.A,{shouldWrap:!pt,wrap:nt=>(0,t.jsx)(x.m,{content:_t,placement:"top",children:(0,t.jsx)("span",{children:nt})}),children:(0,t.jsx)(P.W.Item,{label:"Delete",ariaLabel:"delete",icon:"trash-alt",destructive:!0,disabled:!pt,onClick:()=>h(n)})},"delete-contact-point"))}const Bt=(0,i.t)("alerting.contact-points.used-by","Used by {{ count }} notification policy",{count:st}),Lt=(0,i.t)("alerting.contact-points.used-by-rules","Used by {{ count }} alert rule",{count:q}),Wt=E||m;return(0,t.jsxs)("div",{className:U.headerWrapper,children:[(0,t.jsxs)(r.B,{direction:"row",alignItems:"center",gap:1,children:[(0,t.jsx)(r.B,{alignItems:"center",gap:1,minWidth:0,children:(0,t.jsx)(y.E,{element:"h2",variant:"body",weight:"medium",truncate:!0,children:m})}),st>0&&(0,t.jsx)(O.Y,{href:(0,z.G)("/alerting/routes",{contactPoint:m}),variant:"bodySmall",color:"primary",inline:!1,children:Bt}),q>0&&(0,t.jsx)(O.Y,{href:(0,z.G)("/alerting/list",{search:`contactPoint:"${m}"`}),variant:"bodySmall",color:"primary",inline:!1,children:Lt}),p&&(0,t.jsx)(K.rS,{tooltip:!0,provenance:(0,D.gw)(n,W.T.Provenance)}),!At&&(0,t.jsx)(G,{}),(0,t.jsx)(w.h,{}),(0,t.jsx)(L.z9,{tooltipPlacement:"top",tooltip:p?"Provisioned contact points cannot be edited in the UI":void 0,variant:"secondary",size:"sm",icon:et?"pen":"eye",type:"button","aria-label":`${et?"edit":"view"}-action`,"data-testid":`${et?"edit":"view"}-action`,href:`/alerting/notifications/receivers/${encodeURIComponent(Wt)}/edit`,children:et?"Edit":"View"}),tt.length>0&&(0,t.jsx)(l.m,{overlay:(0,t.jsx)(P.W,{children:tt}),children:(0,t.jsx)(I.A,{"aria-label":`More actions for contact point "${n.name}"`})})]}),Ot,j&&(0,t.jsx)(c.v,{resource:"receivers",resourceId:n.id,resourceName:n.name,onClose:()=>g(!1)})]})},Y=n=>({headerWrapper:(0,o.css)({background:`${n.colors.background.secondary}`,padding:`${n.spacing(1)} ${n.spacing(1.5)}`,borderBottom:`solid 1px ${n.colors.border.weak}`,borderTopLeftRadius:`${n.shape.radius.default}`,borderTopRightRadius:`${n.shape.radius.default}`})});var Z=e(25356),ot=e(85651);const gt=n=>{const[h,m]=(0,a.useState)(!1),[E,p]=(0,a.useState)(),[T,U]=(0,a.useState)(),[j,g]=(0,a.useState)(!1),S=(0,a.useCallback)(()=>{j||(p(void 0),m(!1),U(void 0))},[j]),_=(0,a.useCallback)(({name:F,resourceVersion:k})=>{p({name:F,resourceVersion:k}),m(!0),U(void 0)},[]),$=(0,a.useCallback)(()=>{E&&(g(!0),n(E).then(()=>m(!1)).catch(U).finally(()=>{g(!1)}))},[n,E]);return[(0,a.useMemo)(()=>T?(0,t.jsx)(vt,{isOpen:h,onDismiss:S,error:T}):(0,t.jsxs)(Z.a,{isOpen:h,onDismiss:S,closeOnBackdropClick:!j,closeOnEscape:!j,title:"Delete contact point",children:[(0,t.jsx)("p",{children:"Deleting this contact point will permanently remove it."}),(0,t.jsx)("p",{children:"Are you sure you want to delete this contact point?"}),(0,t.jsxs)(Z.a.ButtonRow,{children:[(0,t.jsx)(L.$n,{type:"button",variant:"destructive",onClick:$,disabled:j,children:j?"Deleting...":"Yes, delete contact point"}),(0,t.jsx)(L.$n,{type:"button",variant:"secondary",onClick:S,disabled:j,children:(0,t.jsx)(i.x6,{i18nKey:"alerting.common.cancel",children:"Cancel"})})]})]}),[T,S,$,j,h]),_,S]},vt=({isOpen:n,onDismiss:h,error:m})=>(0,t.jsxs)(Z.a,{isOpen:n,onDismiss:h,closeOnBackdropClick:!0,closeOnEscape:!0,title:"Something went wrong",children:[(0,t.jsx)("p",{children:"Failed to update your configuration:"}),(0,t.jsx)("pre",{children:(0,t.jsx)("code",{children:(0,ot.JZ)(m)})})]});var ht=e(35626);const ft={pagerduty:"PagerDuty",pushover:"Pushover",slack:"Slack",opsgenie:"OpsGenie",webhook:"Webhook",victorops:"VictorOps",wechat:"WeChat",discord:"Discord",webex:"Cisco Webex Teams",sns:"Amazon SNS",telegram:"Telegram",msteams:"Microsoft Teams"},it={discord:"discord",email:"envelope",googlechat:"google-hangouts-alt",hipchat:"hipchat",line:"line",pagerduty:"pagerduty",slack:"slack",teams:"microsoft",telegram:"telegram-alt",webhook:"link",sns:"amazon"};var X=e(76778);const Et=({metadata:{icon:n,title:h,externalUrl:m,warning:E}})=>{const p=(0,u.of)(jt);return(0,t.jsxs)(r.B,{alignItems:"center",gap:.5,children:[(0,t.jsxs)(r.B,{direction:"row",alignItems:"center",gap:.5,children:[E?(0,t.jsx)(x.m,{content:E,theme:"error",children:(0,t.jsx)(A.I,{name:"exclamation-triangle",className:p.warnIcon})}):(0,t.jsx)("img",{src:n,alt:h,height:"16px"}),(0,t.jsx)("span",{children:h})]}),m&&(0,t.jsx)(L.z9,{icon:"external-link-alt",href:m,target:"_blank",variant:"secondary",size:"sm"})]})},jt=n=>({warnIcon:(0,o.css)({fill:n.colors.warning.text})});var V=e(44862);const yt=({contactPoint:n})=>{const{grafana_managed_receiver_configs:h}=n,m=(0,u.of)(at),{selectedAlertmanager:E}=(0,R.VI)(),[p]=(0,ht.$x)({alertmanager:E}),[T,U]=gt(p.execute),j=h.some(g=>!!g[V.MX]);return(0,t.jsxs)("div",{className:m.contactPointWrapper,"data-testid":"contact-point",children:[(0,t.jsxs)(r.B,{direction:"column",gap:0,children:[(0,t.jsx)(Q,{contactPoint:n,onDelete:g=>U({name:g.id||g.name,resourceVersion:g.metadata?.resourceVersion})}),j?(0,t.jsx)("div",{children:h.map((g,S)=>{const _=g[V.v4],$=g[V.MX],H=!g.disableResolveMessage,F=g[V.sW],k=$.name+S;return(0,t.jsx)(Pt,{name:$.name,type:g.type,description:(0,J.aM)(g),diagnostics:_,pluginMetadata:F,sendingResolved:H},k)})}):(0,t.jsx)("div",{className:m.integrationWrapper,children:(0,t.jsx)(ct,{receivers:h})})]}),T]})},Pt=n=>{const{name:h,type:m,description:E,diagnostics:p,pluginMetadata:T,sendingResolved:U=!0}=n,j=(0,u.of)(at),g=p!==void 0;return(0,t.jsx)("div",{className:j.integrationWrapper,children:(0,t.jsxs)(r.B,{direction:"column",gap:.5,children:[(0,t.jsx)(lt,{name:h,type:m,description:E,pluginMetadata:T}),g&&(0,t.jsx)(Dt,{diagnostics:p,sendingResolved:U})]})})};function lt(n){const{name:h,type:m,description:E,pluginMetadata:p}=n,T=it[m];return(0,t.jsxs)(r.B,{direction:"row",alignItems:"center",gap:1,children:[(0,t.jsxs)(r.B,{direction:"row",alignItems:"center",gap:.5,children:[T&&(0,t.jsx)(A.I,{name:T}),p?(0,t.jsx)(Et,{metadata:p}):(0,t.jsx)(y.E,{variant:"body",color:"primary",children:h})]}),E&&(0,t.jsx)(y.E,{variant:"bodySmall",color:"secondary",children:E})]})}const ct=({receivers:n,limit:h})=>{const m=h??Number.MAX_VALUE,E=(0,d.groupBy)(n,j=>j.type),p=(0,d.size)(E),T=Object.entries(E).slice(0,m),U=p-m;return(0,t.jsx)(r.B,{direction:"column",gap:0,children:(0,t.jsxs)(r.B,{direction:"row",alignItems:"center",gap:1,children:[T.length===0&&(0,t.jsx)(X.P,{color:"warning",icon:"exclamation-triangle",children:(0,t.jsx)(i.x6,{i18nKey:"alerting.contact-points.no-integrations",children:"No integrations configured"})}),T.map(([j,g],S)=>{const _=it[j],$=ft[j]??(0,d.upperFirst)(j),H=(0,d.size)(E)-1===S,F=g[0];return(0,t.jsxs)(a.Fragment,{children:[(0,t.jsxs)(r.B,{direction:"row",alignItems:"center",gap:.5,children:[F[V.sW]?.icon&&(0,t.jsx)("img",{width:"14px",src:F[V.sW]?.icon,alt:F[V.sW]?.title}),_&&(0,t.jsx)(A.I,{name:_}),(0,t.jsxs)("span",{children:[$,g.length>1&&` (${g.length})`]})]}),!H&&"\u22C5"]},j)}),U>0&&(0,t.jsx)("span",{children:`+${U} more`})]})})},Dt=({diagnostics:n,sendingResolved:h})=>{const m=(0,u.of)(at),E=!!n.lastNotifyAttemptError,p=(0,v.KQ)(n.lastNotifyAttempt),T=n.lastNotifyAttemptDuration,U=p.isValid();return(0,t.jsx)("div",{className:m.metadataRow,children:(0,t.jsx)(r.B,{direction:"row",gap:1,children:E?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(X.P,{color:"error",icon:"exclamation-circle",children:(0,t.jsx)(x.m,{content:n.lastNotifyAttemptError,children:(0,t.jsx)("span",{children:(0,t.jsx)(i.x6,{i18nKey:"alerting.contact-points.last-delivery-failed",children:"Last delivery attempt failed"})})})})}):(0,t.jsxs)(t.Fragment,{children:[U&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(X.P,{icon:"clock-nine",children:[(0,t.jsx)(i.x6,{i18nKey:"alerting.contact-points.last-delivery-attempt",children:"Last delivery attempt"}),(0,t.jsx)(x.m,{content:p.toLocaleString(),children:(0,t.jsx)("span",{children:(0,t.jsx)(y.E,{color:"primary",children:p.locale("en").fromNow()})})})]}),(0,t.jsx)(X.P,{icon:"stopwatch",children:(0,t.jsxs)(i.x6,{i18nKey:"alerting.contact-points.delivery-duration",children:["Last delivery took ",(0,t.jsx)(B.S,{content:T})]})})]}),!U&&(0,t.jsx)(X.P,{icon:"clock-nine",children:(0,t.jsx)(i.x6,{i18nKey:"alerting.contact-points.no-delivery-attempts",children:"No delivery attempts"})}),!h&&(0,t.jsx)(X.P,{icon:"info-circle",children:(0,t.jsxs)(i.x6,{i18nKey:"alerting.contact-points.only-firing",children:["Delivering ",(0,t.jsx)(y.E,{color:"primary",children:"only firing"})," notifications"]})})]})})})},at=n=>({contactPointWrapper:(0,o.css)({borderRadius:`${n.shape.radius.default}`,border:`solid 1px ${n.colors.border.weak}`,borderBottom:"none"}),integrationWrapper:(0,o.css)({position:"relative",background:`${n.colors.background.primary}`,padding:`${n.spacing(1)} ${n.spacing(1.5)}`,borderBottom:`solid 1px ${n.colors.border.weak}`}),metadataRow:(0,o.css)({borderBottomLeftRadius:`${n.shape.radius.default}`,borderBottomRightRadius:`${n.shape.radius.default}`}),noIntegrationsContainer:(0,o.css)({paddingTop:`${n.spacing(1.5)}`,paddingLeft:`${n.spacing(1.5)}`})})},79179:(N,M,e)=>{e.d(M,{B:()=>O,G:()=>L});var t=e(74848),o=e(96540),d=e(42941),a=e(747),v=e(81876),u=e(5240),r=e(75319),A=e(41494),y=e(65071);const x=({receiverName:l,decrypt:f,exportFormat:s,onClose:c})=>{const{currentData:R="",isFetching:W}=u.hK.useExportReceiverQuery({receiverName:l,decrypt:f,format:s}),D=`cp-${l}-${new Date().getTime()}`;return W?(0,t.jsx)(v._,{text:"Loading...."}):(0,t.jsx)(r.J,{format:s,textDefinition:R,downloadFileName:D,onClose:c})},i=({onClose:l,receiverName:f,decrypt:s})=>{const[c,R]=(0,o.useState)("yaml");return(0,t.jsx)(A.m,{activeTab:c,onTabChange:R,onClose:l,formatProviders:Object.values(y.sl),children:(0,t.jsx)(x,{receiverName:f,decrypt:s,exportFormat:c,onClose:l})})},B=({decrypt:l,exportFormat:f,onClose:s})=>{const{currentData:c="",isFetching:R}=u.hK.useExportReceiversQuery({decrypt:l,format:f}),W=`contact-points-${new Date().getTime()}`;return R?(0,t.jsx)(v._,{text:"Loading...."}):(0,t.jsx)(r.J,{format:f,textDefinition:c,downloadFileName:W,onClose:s})},P=({onClose:l,decrypt:f})=>{const[s,c]=(0,o.useState)("yaml");return(0,t.jsx)(A.m,{activeTab:s,onTabChange:c,onClose:l,formatProviders:Object.values(y.sl),children:(0,t.jsx)(B,{decrypt:f,exportFormat:s,onClose:l})})},O=Symbol("all contact points"),L=()=>{const[l,f]=(0,o.useState)(null),[s,c]=(0,d.A)(!1),[R,W]=(0,a.L7)(a.QI.DecryptSecrets),D=R&&W,C=(0,o.useCallback)(()=>{f(null),c(!1)},[c]),z=K=>{f(K),c(!0)};return[(0,o.useMemo)(()=>!l||!s?null:l===O?(0,t.jsx)(P,{decrypt:D,onClose:C}):(0,t.jsx)(i,{receiverName:l,decrypt:D,onClose:C}),[D,s,C,l]),z]}},75319:(N,M,e)=>{e.d(M,{J:()=>L});var t=e(74848),o=e(22803),d=e(4213),a=e.n(d),v=e(96540),u=e(70713),r=e(29675),A=e(3886),y=e(54594),x=e(93604),i=e(54731),B=e(37e3),P=e(11817),O=e(65071);function L({format:s,textDefinition:c,downloadFileName:R,onClose:W}){const D=(0,r.of)(l),C=O.sl[s],z=(0,v.useCallback)(()=>{const K=new Blob([c],{type:`application/${s};charset=utf-8`});a()(K,`${R}.${s}`)},[c,R,s]),I=(0,v.useMemo)(()=>C.formatter?C.formatter(c):c,[C,c]);return(0,t.jsxs)("div",{className:D.container,children:[(0,t.jsx)(f,{exportProvider:C}),(0,t.jsx)("div",{className:D.content,children:(0,t.jsx)(u.default,{disableWidth:!0,children:({height:K})=>(0,t.jsx)(A.B,{width:"100%",height:K,language:s,value:I,monacoOptions:{minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",readOnly:!0}})})}),(0,t.jsxs)("div",{className:D.actions,children:[(0,t.jsx)(y.$n,{variant:"secondary",onClick:W,children:(0,t.jsx)(P.x6,{i18nKey:"alerting.common.cancel",children:"Cancel"})}),(0,t.jsx)(x.b,{icon:"copy",getText:()=>c,children:"Copy code"}),(0,t.jsx)(y.$n,{icon:"download-alt",onClick:z,children:"Download"})]})]})}const l=s=>({container:(0,o.css)({display:"flex",flexDirection:"column",height:"100%",gap:s.spacing(2)}),content:(0,o.css)({flex:"1 1 100%"}),actions:(0,o.css)({flex:0,justifyContent:"flex-end",display:"flex",gap:s.spacing(1)})});function f({exportProvider:s}){const{name:c,type:R}=s,W={file:{title:"File-provisioning format",component:(0,t.jsxs)(t.Fragment,{children:[c," format is only valid for File Provisioning."," ",(0,t.jsx)(i.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/file-provisioning/",external:!0,children:"Read more in the docs."})]})},api:{title:"API-provisioning format",component:(0,t.jsxs)(t.Fragment,{children:[c," format is only valid for API Provisioning."," ",(0,t.jsx)(i.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/http-api-provisioning/",external:!0,children:"Read more in the docs."})]})},terraform:{title:"Terraform-provisioning format",component:(0,t.jsxs)(t.Fragment,{children:[c," format is only valid for Terraform Provisioning."," ",(0,t.jsx)(i.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/terraform-provisioning/",external:!0,children:"Read more in the docs."})]})}},{title:D,component:C}=W[R];return(0,t.jsx)(B.F,{title:D,severity:"info",bottomSpacing:0,topSpacing:0,children:C})}},41494:(N,M,e)=>{e.d(M,{m:()=>v});var t=e(74848),o=e(58528),d=e(11817),a=e(8750);function v({activeTab:u,onTabChange:r,children:A,onClose:y,formatProviders:x,title:i="Export"}){const B=Object.values(x).map(O=>({label:O.name,value:O.exportFormat})),P=x.length>1?(0,d.t)("alerting.export.subtitle.formats","Select the format and download the file or copy the contents to clipboard"):(0,d.t)("alerting.export.subtitle.one-format","Download the file or copy the contents to clipboard");return(0,t.jsx)(o._,{title:i,subtitle:P,tabs:(0,t.jsx)(a.sb,{tabs:B,setActiveTab:r,activeTab:u}),onClose:y,size:"md",children:A})}},65071:(N,M,e)=>{e.d(M,{dX:()=>d,sl:()=>a});const t={name:"JSON",exportFormat:"json",type:"file",formatter:u=>{try{return JSON.stringify(JSON.parse(u),null,4)}catch{return u}}},o={name:"YAML",exportFormat:"yaml",type:"file"},d={name:"Terraform (HCL)",exportFormat:"hcl",type:"terraform"},a={[t.exportFormat]:t,[o.exportFormat]:o,[d.exportFormat]:d},v=[t,o]},41972:(N,M,e)=>{e.d(M,{k:()=>y,v:()=>r});var t=e(74848),o=e(96540),d=e(58528),a=e(54594),v=e(12590),u=e(11817);const r=({resourceName:x,title:i,onClose:B,...P})=>{const O=(0,u.t)("alerting.manage-permissions.title","Manage permissions");return(0,t.jsx)(d._,{onClose:B,title:i||O,subtitle:x,children:(0,t.jsx)(v.x,{...P,canSetPermissions:!0})})},A=({onClick:x})=>(0,t.jsx)(a.$n,{variant:"secondary",onClick:x,icon:"unlock",children:(0,t.jsx)(u.x6,{i18nKey:"alerting.manage-permissions.button",children:"Manage permissions"})}),y=({resource:x,resourceId:i,resourceName:B,title:P,renderButton:O})=>{const[L,l]=(0,o.useState)(!1),f=()=>l(!1),s=()=>l(!0);return(0,t.jsxs)(t.Fragment,{children:[O?O({onClick:s}):(0,t.jsx)(A,{onClick:s}),L&&(0,t.jsx)(r,{resource:x,resourceId:i,resourceName:B,title:P,onClose:f})]})}},8750:(N,M,e)=>{e.d(M,{G_:()=>s,sb:()=>c});var t=e(74848),o=e(22803),d=e(20382),a=e(96540),v=e(49785),u=e(70713),r=e(29675),A=e(58528),y=e(10247),x=e(88849),i=e(54594),B=e(6736),P=e(79784),O=e(3886),L=e(82096),l=e(82700);const f=[{label:"Yaml",value:"yaml"}],s=({onClose:I})=>{const[K,w]=(0,a.useState)("yaml"),{setValue:b}=(0,v.xW)(),G=(0,r.of)(z),J=Q=>{for(const Y in Q)b(Y,Q[Y]);I()};return(0,t.jsx)(A._,{title:"Inspect Alert rule",subtitle:(0,t.jsx)("div",{className:G.subtitle,children:(0,t.jsx)(c,{tabs:f,setActiveTab:w,activeTab:K})}),onClose:I,children:K==="yaml"&&(0,t.jsx)(R,{onSubmit:J})})};function c({tabs:I,activeTab:K,setActiveTab:w}){return(0,t.jsx)(y.U,{children:I.map((b,G)=>(0,t.jsx)(x.o,{label:b.label,value:b.value,onChangeTab:()=>w(b.value),active:K===b.value},`${b.value}-${G}`))})}const R=({onSubmit:I})=>{const K=(0,r.of)(C),{getValues:w}=(0,v.xW)(),b=(0,L.l1)(w()),[G,J]=(0,a.useState)((0,d.Bh)(b)),Q=()=>{const Y=(0,d.Hh)(G),Z=w(),ot=D(Y);I({...Z,...ot})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:K.applyButton,children:[(0,t.jsx)(i.$n,{type:"button",onClick:Q,children:"Apply"}),(0,t.jsx)(B.m,{content:(0,t.jsx)(W,{}),theme:"info",placement:"left-start",interactive:!0,children:(0,t.jsx)(P.I,{name:"exclamation-triangle",size:"xl"})})]}),(0,t.jsx)("div",{className:K.content,children:(0,t.jsx)(u.default,{disableWidth:!0,children:({height:Y})=>(0,t.jsx)(O.B,{width:"100%",height:Y,language:"yaml",value:G,onBlur:J,monacoOptions:{minimap:{enabled:!1}}})})})]})};function W(){return(0,t.jsxs)("div",{children:["The YAML content in the editor only contains alert rule configuration ",(0,t.jsx)("br",{}),"To configure Prometheus, you need to provide the rest of the"," ",(0,t.jsx)("a",{href:"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/",target:"_blank",rel:"noreferrer",children:"configuration file content."})]})}function D(I){return(0,l.$y)(I)?(0,L.Qk)(I):(0,l.i7)(I)?(0,L.XI)(I):{}}const C=I=>({content:(0,o.css)({flexGrow:1,height:"100%",paddingBottom:"16px",marginBottom:I.spacing(2)}),applyButton:(0,o.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:0,marginBottom:I.spacing(2)})}),z=()=>({subtitle:(0,o.css)({display:"flex",alignItems:"center",justifyContent:"space-between"})})}}]);

//# sourceMappingURL=1085.ce6b637da6fd95dfb85b.js.map