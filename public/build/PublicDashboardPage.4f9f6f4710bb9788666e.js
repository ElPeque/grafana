"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7197],{67293:(V,C,t)=>{t.d(C,{GU:()=>m,YO:()=>L,qm:()=>O});var o=t(74848),l=t(22803),a=t(96540),y=t(29675),D=t(11817),h=t(77455),j=t(50363);const O=({children:i,enterAnimation:g=!0})=>{const v=(0,y.of)(L);return(0,o.jsx)("div",{className:(0,l.cx)(v.loginInnerBox,g&&v.enterAnimation),children:i})},m=({children:i,branding:g,isChangingPassword:v})=>{const u=(0,y.of)(L),[R,z]=(0,a.useState)(!1),I=g?.loginSubtitle??h.M.GetLoginSubTitle(),A=g?.loginTitle??h.M.LoginTitle,B=g?.loginBoxBackground||h.M.LoginBoxBackground(),N=g?.loginLogo,H=g?.hideEdition??h.M.HideEdition;return(0,a.useEffect)(()=>z(!0),[]),(0,o.jsxs)(h.M.LoginBackground,{className:(0,l.cx)(u.container,R&&u.loginAnim,g?.loginBackground),children:[(0,o.jsx)("div",{className:u.loginMain,children:(0,o.jsxs)("div",{className:(0,l.cx)(u.loginContent,B,"login-content-box"),children:[(0,o.jsxs)("div",{className:u.loginLogoWrapper,children:[(0,o.jsx)(h.M.LoginLogo,{className:u.loginLogo,logo:N}),(0,o.jsx)("div",{className:u.titleWrapper,children:v?(0,o.jsx)("h1",{className:u.mainTitle,children:(0,o.jsx)(D.x6,{i18nKey:"login.layout.update-password",children:"Update your password"})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h1",{className:u.mainTitle,children:A}),I&&(0,o.jsx)("h3",{className:u.subTitle,children:I})]})})]}),(0,o.jsx)("div",{className:u.loginOuterBox,children:i})]})}),g?.hideFooter?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(j.wi,{hideEdition:H,customLinks:g?.footerLinks})]})},S=(0,l.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,L=i=>({loginMain:(0,l.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,l.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",flex:1,minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,l.css)({"&:before":{opacity:1},".login-content-box":{opacity:1}}),submitButton:(0,l.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,l.css)({width:"100%",maxWidth:60,marginBottom:i.spacing(2),[i.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,l.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:i.spacing(3)}),titleWrapper:(0,l.css)({textAlign:"center"}),mainTitle:(0,l.css)({fontSize:22,[i.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,l.css)({fontSize:i.typography.size.md,color:i.colors.text.secondary}),loginContent:(0,l.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:i.shape.radius.default,padding:i.spacing(2,0),opacity:0,[i.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.5s ease-in-out"},[i.breakpoints.up("sm")]:{minHeight:i.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,l.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,l.css)({padding:i.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",[i.transitions.handleMotion("no-preference")]:{transition:"0.25s ease"}}),enterAnimation:(0,l.css)({[i.transitions.handleMotion("no-preference")]:{animation:`${S} ease-out 0.2s`}})})},90821:(V,C,t)=>{t.r(C),t.d(C,{default:()=>vs});var o=t(74848),l=t(32370),a=t(22803),y=t(96540),D=t(54148),h=t(80426),j=t(58779),O=t(61034),m=t(29675),S=t(48583),L=t(79784),i=t(90231),g=t(37e3),v=t(54122),u=t(20337);const R="https://grafana.com/?src=grafananet&cnt=public-dashboards",z="public/img/grafana_text_logo_light.svg",I="public/img/grafana_text_logo_dark.svg",A="grafana-logo",B=s=>{const n=(0,m.$j)(),e=(0,m.of)(J),{footerHide:c,footerText:r,footerLink:f,footerLogo:d,headerLogoHide:p}=s||{footerHide:!1,footerText:"Powered by",footerLogo:A,footerLink:R,headerLogoHide:!1};return{footerHide:c,footerText:(0,o.jsx)("span",{className:e.text,children:r}),footerLogo:d===A?n.isDark?z:I:d,footerLink:f,headerLogoHide:p}};let N=()=>B();function H(s){N=()=>B(s)}const J=s=>({text:(0,a.css)({color:s.colors.text.secondary,fontSize:s.typography.body.fontSize})}),Q=j.Tp.pages.PublicDashboard,K=function(){const s=(0,m.of)(X),n=N();return n.footerHide?null:(0,o.jsx)("div",{className:s.footer,"data-testid":Q.footer,children:(0,o.jsxs)("a",{className:s.link,href:n.footerLink,target:"_blank",rel:"noreferrer noopener",children:[n.footerText," ",(0,o.jsx)("img",{className:s.logoImg,alt:"",src:n.footerLogo})]})})},X=s=>({footer:(0,a.css)({display:"flex",justifyContent:"end",height:"30px",backgroundColor:s.colors.background.canvas,position:"sticky",bottom:0,zIndex:s.zIndex.navbarFixed,padding:s.spacing(.5,0)}),link:(0,a.css)({display:"flex",alignItems:"center"}),logoImg:(0,a.css)({height:"16px",marginLeft:s.spacing(.5)})});var U=t(77455),w=t(67293);const G=j.Tp.pages.PublicDashboard.NotAvailable,M=({paused:s})=>{const n=(0,m.of)(q),e=(0,m.of)(w.YO),c=U.M.LoginBoxBackground();return(0,o.jsx)(U.M.LoginBackground,{className:n.container,"data-testid":G.container,children:(0,o.jsxs)("div",{className:(0,a.cx)(n.box,c),children:[(0,o.jsx)(U.M.LoginLogo,{className:e.loginLogo}),(0,o.jsx)("p",{className:n.title,"data-testid":G.title,children:s?"This dashboard has been paused by the administrator":"The dashboard you are trying to access does not exist"}),s&&(0,o.jsx)("p",{className:n.description,"data-testid":G.pausedDescription,children:"Try again later"})]})})},q=s=>({container:(0,a.css)({display:"flex",justifyContent:"center",alignItems:"center",height:"100%",":before":{opacity:1}}),box:(0,a.css)({width:"608px",display:"flex",alignItems:"center",flexDirection:"column",gap:s.spacing(4),zIndex:1,borderRadius:s.shape.borderRadius(4),padding:s.spacing(6,8),opacity:1}),title:(0,a.css)({fontSize:s.typography.h3.fontSize,textAlign:"center",margin:0}),description:(0,a.css)({fontSize:s.typography.h5.fontSize,margin:0})});var T=t(61491),_=t(70819),ss=t(44172);const W=j.Tp.pages.PublicDashboardScene;function os({route:s}){const{accessToken:n=""}=(0,D.g)(),e=(0,ss.sP)(),c=(0,m.of)(k),{dashboard:r,isLoading:f,loadError:d}=e.useState();return(0,y.useEffect)(()=>(e.loadDashboard({uid:n,route:_.Z4.Public}),()=>{e.clearState()}),[e,n,s.routeName]),d?(0,o.jsx)(ts,{error:d}):r?r.state.controls?.state.hideTimeControls?(0,o.jsx)(Y,{model:r}):(0,o.jsx)(O.$L,{scene:r,children:(0,o.jsx)(Y,{model:r})}):(0,o.jsx)(v.Y,{layout:h.k.Custom,className:c.loadingPage,"data-testid":W.loadingPage,children:f&&(0,o.jsx)(u.A,{})})}function Y({model:s}){const[n,e]=(0,y.useState)(!1),{controls:c,title:r}=s.useState(),{timePicker:f,refreshPicker:d,hideTimeControls:p}=c.useState(),x=s.getBodyToRender(),b=(0,m.of)(k);return(0,y.useEffect)(()=>d.activate(),[d]),(0,y.useEffect)(()=>(e(!0),s.activate()),[s]),n?(0,o.jsxs)(v.Y,{layout:h.k.Custom,className:b.page,"data-testid":W.page,children:[(0,o.jsxs)("div",{className:b.controls,children:[(0,o.jsxs)(S.B,{alignItems:"center",children:[(0,o.jsx)("div",{className:b.iconTitle,children:(0,o.jsx)(L.I,{name:"grafana",size:"lg","aria-hidden":!0})}),(0,o.jsx)("span",{className:b.title,children:r})]}),!p&&(0,o.jsxs)(S.B,{children:[(0,o.jsx)(f.Component,{model:f}),(0,o.jsx)(d.Component,{model:d})]})]}),(0,o.jsx)("div",{className:b.body,children:(0,o.jsx)(x.Component,{model:x})}),(0,o.jsx)(K,{})]}):null}function k(s){return{loadingPage:(0,a.css)({justifyContent:"center"}),page:(0,a.css)({padding:s.spacing(0,2)}),controls:(0,a.css)({display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:s.zIndex.navbarFixed,background:s.colors.background.canvas,padding:s.spacing(2,0),[s.breakpoints.down("sm")]:{flexDirection:"column",gap:s.spacing(1),alignItems:"stretch"}}),iconTitle:(0,a.css)({display:"none",[s.breakpoints.up("sm")]:{display:"flex",alignItems:"center"}}),title:(0,a.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",fontSize:s.typography.h4.fontSize,margin:0}),body:(0,a.css)({label:"body",display:"flex",flex:1,flexDirection:"column",overflowY:"auto"})}}function ts({error:s}){const n=(0,m.of)(k),e=s.status,c=s.messageId,r=s.message,f=e===403&&c==="publicdashboards.notEnabled",d=e===404&&c==="publicdashboards.notFound",p=e===404&&c==="publicdashboards.dashboardNotFound",x=d?void 0:!f,b=d||p;return x===!1?(0,o.jsx)(M,{paused:!0}):b?(0,o.jsx)(M,{}):(0,o.jsx)(v.Y,{layout:h.k.Custom,className:n.loadingPage,"data-testid":W.loadingPage,children:(0,o.jsx)(i.a,{paddingY:4,display:"flex",direction:"column",alignItems:"center",children:(0,o.jsx)(g.F,{severity:T.AppNotificationSeverity.Error,title:r,children:r})})})}var ns=t(84596),es=t(39645),as=t(95382),is=t(89880),rs=t(39601),ls=t(44608);const $=({initError:s})=>s?(0,o.jsx)("div",{className:cs.dashboardLoading,children:(0,o.jsx)(g.F,{severity:T.AppNotificationSeverity.Error,title:s.message,children:(0,ls.q6)(s.error)})}):null,cs={dashboardLoading:(0,a.css)({height:"60vh",display:"flex",alignItems:"center",justifyContent:"center"})};var ds=t(50870),gs=t(1877),Z=t(80757),us=t(83241);const fs=j.Tp.pages.PublicDashboard,xs=({dashboard:s})=>{const n=(0,T.useDispatch)(),e=N(),c=r=>{n((0,is.Cj)(r))};return(0,o.jsx)(es.d,{title:s.title,pageIcon:e.headerLogoHide?void 0:"grafana",buttonOverflowAlignment:"right",children:!s.timepicker.hidden&&(0,o.jsx)(rs.$,{dashboard:s,onChangeTimeZone:c})})},hs=s=>{const{route:n}=s,e=(0,D.zy)(),{accessToken:c}=(0,D.g)(),r=(0,T.useDispatch)(),f=(0,as.Il)(),d=(0,ns.A)({...s,location:e}),p=(0,m.of)(ms),x=(0,T.useSelector)(E=>E.dashboard),b=x.initError,P=x.getModel();return(0,y.useEffect)(()=>{r((0,us.v)({routeName:n.routeName,fixUrl:!1,accessToken:c,keybindingSrv:f.keybindings}))},[n.routeName,c,f.keybindings,r]),(0,y.useEffect)(()=>{if(d?.location.search!==e.search){const E=d?.queryParams,F=s.queryParams;(F?.from!==E?.from||F?.to!==E?.to)&&!P?.timepicker.hidden&&(0,Z.jG)().updateTimeRangeFromUrl(),!E?.refresh&&F?.refresh&&(0,Z.jG)().setAutoRefresh(F.refresh)}},[d,e.search,s.queryParams,P?.timepicker.hidden,c]),b?(0,o.jsx)(bs,{error:b}):P?(0,o.jsxs)(v.Y,{pageNav:{text:P.title},layout:h.k.Custom,"data-testid":fs.page,children:[(0,o.jsx)(xs,{dashboard:P}),x.initError&&(0,o.jsx)($,{initError:x.initError}),(0,o.jsx)("div",{className:p.gridContainer,children:(0,o.jsx)(gs.N,{dashboard:P,isEditable:!1,viewPanel:null,editPanel:null,hidePanelMenus:!0})}),(0,o.jsx)("div",{className:p.footer,children:(0,o.jsx)(K,{})})]}):(0,o.jsx)(ds.P,{initPhase:x.initPhase})},ms=s=>({gridContainer:(0,a.css)({flex:1,padding:s.spacing(2,2,2,2),overflow:"auto"}),footer:(0,a.css)({padding:s.spacing(0,2)})}),ps=hs;function bs({error:s}){let n,e;if(typeof s.error=="object"&&s.error!==null&&"data"in s.error){const x=s.error;n=x.data.statusCode,e=x.data.messageId}const c=n===403&&e==="publicdashboards.notEnabled",r=n===404&&e==="publicdashboards.notFound",f=n===404&&e==="publicdashboards.dashboardNotFound",d=r?void 0:!c,p=r||f;return d===!1?(0,o.jsx)(M,{paused:!0}):p?(0,o.jsx)(M,{}):(0,o.jsx)($,{initError:s})}function ys(s){return l.$.featureToggles.publicDashboardsScene?(0,o.jsx)(os,{...s}):(0,o.jsx)(ps,{...s})}const vs=ys}}]);

//# sourceMappingURL=PublicDashboardPage.4f9f6f4710bb9788666e.js.map