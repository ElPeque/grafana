"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3236],{44634:(V,j,o)=>{o.r(j),o.d(j,{default:()=>ut});var a=o(74848),N=o(96540),T=o(32370),A=o(48583),z=o(90231),K=o(10247),H=o(88849),Y=o(11238),Q=o(32174),J=o(85651),Z=o(37104),f=o(22803),X=o(13686),_=o(29675),w=o(45565),W=o(54731);function ee(){const n=(0,_.$j)(),t=(0,_.of)(te);return(0,a.jsxs)("div",{className:t.grid,children:[(0,a.jsx)(M,{children:(0,a.jsxs)(A.B,{direction:"column",gap:1,children:[(0,a.jsx)(w.E,{element:"h3",children:"How it works"}),(0,a.jsxs)("ul",{className:t.list,children:[(0,a.jsx)("li",{children:"Grafana alerting periodically queries data sources and evaluates the condition defined in the alert rule"}),(0,a.jsx)("li",{children:"If the condition is breached, an alert instance fires"}),(0,a.jsx)("li",{children:"Firing instances are routed to notification policies based on matching labels"}),(0,a.jsx)("li",{children:"Notifications are sent out to the contact points specified in the notification policy"})]}),(0,a.jsx)("div",{className:t.svgContainer,children:(0,a.jsx)(A.B,{justifyContent:"center",children:(0,a.jsx)(X.default,{src:`public/img/alerting/at_a_glance_${n.name.toLowerCase()}.svg`,width:void 0,height:void 0})})})]})}),(0,a.jsx)(M,{children:(0,a.jsxs)(A.B,{direction:"column",gap:1,children:[(0,a.jsx)(w.E,{element:"h3",children:"Get started"}),(0,a.jsxs)("ul",{className:t.list,children:[(0,a.jsxs)("li",{children:[(0,a.jsx)(w.E,{weight:"bold",children:"Create an alert rule"})," to query a data source and evaluate the condition defined in the alert rule"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)(w.E,{weight:"bold",children:"Route alert notifications"})," either directly to a contact point or through notification policies for more flexibility"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)(w.E,{weight:"bold",children:"Monitor"})," your alert rules using dashboards and visualizations"]})]}),(0,a.jsxs)("p",{children:["For a hands-on introduction, refer to our"," ",(0,a.jsx)(W.Y,{href:"https://grafana.com/tutorials/alerting-get-started/",icon:"angle-right",inline:!0,external:!0,children:"tutorial to get started with Grafana Alerting"})]})]})})]})}const te=n=>({grid:(0,f.css)({display:"grid",gridTemplateRows:"min-content auto auto",gridTemplateColumns:"1fr",gap:n.spacing(2),width:"100%",[n.breakpoints.up("lg")]:{gridTemplateColumns:"3fr 2fr"}}),ctaContainer:(0,f.css)({gridColumn:"1 / span 5"}),svgContainer:(0,f.css)({"& svg":{maxWidth:"900px",flex:1}}),list:(0,f.css)({margin:n.spacing(0,2),"& > li":{marginBottom:n.spacing(1)}})});function ne({className:n}){const t=(0,_.of)(ae);return(0,a.jsx)(A.B,{gap:2,direction:"column",children:(0,a.jsxs)(M,{className:(0,f.cx)(t.ctaContainer,n),children:[(0,a.jsx)(G,{title:"Alert rules",description:"Define the condition that must be met before an alert rule fires",href:"/alerting/list",hrefText:"Manage alert rules"}),(0,a.jsx)("div",{className:t.separator}),(0,a.jsx)(G,{title:"Contact points",description:"Configure who receives notifications and how they are sent",href:"/alerting/notifications",hrefText:"Manage contact points"}),(0,a.jsx)("div",{className:t.separator}),(0,a.jsx)(G,{title:"Notification policies",description:"Configure how firing alert instances are routed to contact points",href:"/alerting/routes",hrefText:"Manage notification policies"})]})})}const ae=n=>({ctaContainer:(0,f.css)({padding:n.spacing(2),display:"flex",gap:n.spacing(4),justifyContent:"space-between",flexWrap:"wrap",[n.breakpoints.down("lg")]:{flexDirection:"column"}}),separator:(0,f.css)({width:"1px",backgroundColor:n.colors.border.medium,[n.breakpoints.down("lg")]:{display:"none"}})});function G({title:n,description:t,href:s,hrefText:r}){const l=(0,_.of)(re);return(0,a.jsxs)("div",{className:l.container,children:[(0,a.jsx)(w.E,{element:"h2",variant:"h3",children:n}),(0,a.jsx)("div",{className:l.desc,children:t}),(0,a.jsx)("div",{className:l.actionRow,children:(0,a.jsx)(W.Y,{href:s,inline:!1,children:r})})]})}const re=n=>({container:(0,f.css)({color:n.colors.text.primary,flex:1,minWidth:"240px",display:"grid",rowGap:n.spacing(1),gridTemplateColumns:"min-content 1fr 1fr 1fr",gridTemplateRows:"min-content auto min-content","& h2":{marginBottom:0,gridColumn:"2 / span 3",gridRow:1}}),desc:(0,f.css)({gridColumn:"2 / span 3",gridRow:2}),actionRow:(0,f.css)({gridColumn:"2 / span 3",gridRow:3,maxWidth:"240px"})});function M({children:n,className:t}){const s=(0,_.of)(se);return(0,a.jsx)("div",{className:(0,f.cx)(s.box,t),children:n})}const se=n=>({box:(0,f.css)({padding:n.spacing(2),backgroundColor:n.colors.background.secondary,borderRadius:n.shape.radius.default})});var ie=o(98437),e=o(61034),oe=o(6736),R=o(79784),le=o(77855);function S({children:n}){const t=(0,_.of)(ue);return(0,a.jsx)("div",{className:t.sectionFooter,children:n&&(0,a.jsx)("div",{children:n})})}const ue=n=>({sectionFooter:(0,f.css)({marginBottom:n.spacing(2)})});function ce({datasources:n}){const t=(0,_.of)(de),s=n.map(r=>(0,a.jsxs)("div",{children:[r.settings?.meta.info.logos.small&&(0,a.jsx)("img",{className:t.dsImage,src:r.settings?.meta.info.logos.small,alt:r.settings?.name||r.uid}),(0,a.jsx)("span",{children:r.settings?.name||r.uid})]},r.uid));return(0,a.jsx)("div",{className:t.dsContainer,children:s})}const de=n=>({dsImage:(0,f.css)({label:"ds-image",width:"16px",marginRight:"3px"}),dsContainer:(0,f.css)({display:"flex",flexDirection:"row",fontSize:n.typography.bodySmall.fontSize,gap:"10px",marginBottom:"10px",justifyContent:"flex-end"})});function D({children:n,datasources:t}){const s=(0,_.of)(ge);return(0,a.jsxs)("div",{className:s.container,children:[n,t&&(0,a.jsx)(ce,{datasources:t})]})}const ge=n=>({container:(0,f.css)({display:"flex",flexDirection:"row",justifyContent:"space-between"})});var F=o(99116),L=o(93407),me=o(25356),P=o(54594),B=o(19224),fe=o(60232),pe=o(99764),he=o(83893);const ve=({queries:n,range:t,variables:s})=>{const r=s?.variables.find(m=>m.state.name==="rule_group")?.getValue()||null;r!==null&&(n=n?.map(m=>({...m,expr:m.expr.replace("$rule_group",String(r))})));const l={datasource:n?.length&&n[0].datasource?.uid||null,queries:n?.map(({expr:m,refId:x},v)=>({expr:m,refId:x}))||[],range:(0,L.sQ)(t?{from:t.from,to:t.to}:{from:"now-1h",to:"now"})};return`/explore?left=${encodeURIComponent((0,L.Pp)(l))}`},ye=({model:n})=>{const t=e.jh.getData(n).useState(),s=e.jh.getTimeRange(n).useState(),r=e.jh.getVariables(n).useState(),l=n.state.panel,h=ve({queries:t.data?.request?.targets,range:s,variables:r}),m=(0,_.of)(_e),[x,v]=(0,N.useState)(!1),y=()=>{v(!1)},$=ct=>{(0,he.AK)({useful:ct,panel:l}),y()},C=(0,a.jsx)(me.a,{title:"Rate this panel",isOpen:x,onDismiss:y,onClickBackdrop:y,className:m.container,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Help us improve this page by telling us whether this panel is useful to you!"}),(0,a.jsxs)("div",{className:m.buttonsContainer,children:[(0,a.jsx)(P.$n,{variant:"secondary",className:m.buttonContainer,onClick:()=>$(!1),children:(0,a.jsxs)("div",{className:m.button,children:[(0,a.jsx)(R.I,{name:"thumbs-up",className:m.thumbsdown,size:"xxxl"}),(0,a.jsx)("span",{children:"I don't like it"})]})}),(0,a.jsx)(P.$n,{variant:"secondary",className:m.buttonContainer,onClick:()=>$(!0),children:(0,a.jsxs)("div",{className:m.button,children:[(0,a.jsx)(R.I,{name:"thumbs-up",size:"xxxl"}),(0,a.jsx)("span",{children:"I like it"})]})})]})]})}),E=(0,a.jsxs)(B.W,{children:[(0,a.jsx)(B.W.Item,{label:"Explore",icon:"compass",url:h,target:"_blank"}),(0,a.jsx)(B.W.Item,{label:"Rate this panel",icon:"comment-alt-message",onClick:()=>v(!0)})]});return(0,a.jsxs)("div",{children:[(0,a.jsx)(fe.m,{overlay:E,placement:"bottom-start",children:(0,a.jsx)(pe.K,{name:"ellipsis-v",variant:"secondary",className:m.menu,"aria-label":"Rate this panel"})}),C]})};class d extends e.Bs{static{this.Component=ye}}const _e=n=>({buttonsContainer:(0,f.css)({display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"stretch",gap:"25px"}),buttonContainer:(0,f.css)({height:"150px",width:"150px",cursor:"pointer",justifyContent:"center"}),button:(0,f.css)({display:"flex",flexDirection:"column"}),container:(0,f.css)({maxWidth:"370px"}),menu:(0,f.css)({height:"25px",margin:"0"}),thumbsdown:(0,f.css)({transform:"scale(-1, -1);"})});function xe(n,t){const s=i?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="active", id="${i}"})`:'sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="active"})',r=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:s}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The number of currently active alert rules").setData(r).setThresholds({mode:F.O.Absolute,steps:[{color:"green",value:0},{color:"green",value:80}]}).setNoValue("0").setHeaderActions([new d({panel:t})]).build()})}var u=o(7500);function we(n,t){const s=i?`sum by(state) (grafanacloud_grafana_instance_alerting_alerts{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_alerts)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]}),l=new e.Es({$data:r,transformations:[{id:"renameByRegex",options:{regex:"alerting",renamePattern:"firing"}}]});return new e.vA({...g,height:"400px",body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your alert rule instances based on state").setData(l).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(h=>h.matchFieldsWithName("firing").overrideColor(p("firing")).matchFieldsWithName("normal").overrideColor(p("normal")).matchFieldsWithName("pending").overrideColor(p("pending")).matchFieldsWithName("error").overrideColor(p("error")).matchFieldsWithName("nodata").overrideColor(p("nodata"))).setHeaderActions([new d({panel:t})]).build()})}function be(n,t){const s=i?`sum(grafanacloud_grafana_instance_alerting_rule_evaluations_total:rate5m{id="${i}"}) - sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m{id="${i}"})`:"sum(grafanacloud_grafana_instance_alerting_rule_evaluations_total:rate5m) - sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m)",r=i?`sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m{id="${i}"})`:"sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m)",l=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"success"},{refId:"B",expr:r,range:!0,legendFormat:"failed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed alert rule evaluations").setData(l).setOption("tooltip",{mode:u.$N.Multi}).setCustomFieldConfig("drawStyle",u.GR.Line).setOverrides(h=>h.matchFieldsWithName("success").overrideColor(p("success")).matchFieldsWithName("failed").overrideColor(p("failed"))).setHeaderActions([new d({panel:t})]).build()})}function I(n,t,s,r){const l=i?`sum by (state) (grafanacloud_grafana_instance_alerting_alerts{state="${r}", id="${i}"})`:`sum by (state) (grafanacloud_grafana_instance_alerting_alerts{state="${r}"})`,h=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:l,legendFormat:"{{state}}"}]});return new e.vA({height:"100%",body:e.d0.stat().setTitle(t).setDescription(s).setData(h).setOverrides(m=>m.matchFieldsWithName(r).overrideColor(p(r))).setNoValue("0").setHeaderActions([new d({panel:t})]).build()})}var k=o(81160);function Ae(n,t){const s=`sum by(rule_group) (grafanacloud_instance_rule_group_iterations_missed_total:rate5m{id="${i}"})`,r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{rule_group}}"}]}),l=()=>m=>m.pipe((0,k.T)(x=>x.map(v=>({...v,fields:v.fields.map(y=>{const C=(y.config.displayNameFromDS||"").match(/\/rules\/\d+\/(\w+);(\w+)/);return C&&(y.config.displayName=`Folder: ${C[1]} - Group: ${C[2]}`),y})})))),h=new e.Es({$data:r,transformations:[l]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of missed iterations per evaluation group").setData(h).setOption("tooltip",{mode:u.$N.Multi}).setCustomFieldConfig("drawStyle",u.GR.Line).setHeaderActions([new d({panel:t})]).build()})}var Ce=o(8270),Se=o(35874);function je(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",expr:'topk(10, sum by(labels_alertname, ruleUID) (count_over_time({from="state-history"} | json | current = `Alerting` [1w])))',instant:!0}]}),r=(m,x)=>({...m,values:m.values.map((v,y)=>{const C=x.fields.find(E=>E.name==="ruleUID")?.values[y];return(0,a.jsx)(Ne,{value:v,ruleUID:C},v)})}),l=()=>m=>m.pipe((0,k.T)(x=>x.map(v=>({...v,fields:v.fields.map(y=>y.name==="labels_alertname"?r(y,v):y)})))),h=new e.Es({$data:s,transformations:[l,{id:"sortBy",options:{fields:{},sort:[{field:"Value #A",desc:!0}]}},{id:"organize",options:{excludeByName:{Time:!0,ruleUID:!0},indexByName:{labels_alertname:0,"Value #A":1},renameByName:{labels_alertname:"Alert rule name","Value #A":"Number of fires"}}}]});return new e.vA({...g,body:e.d0.table().setTitle(t).setDescription("The alert rule instances that have fired the most").setData(h).setNoValue("No new alerts fired last week").setHeaderActions([new d({panel:t})]).build()})}function Ne({value:n,ruleUID:t}){const s=l=>({link:(0,f.css)({"& > a":{color:l.colors.text.link}})}),r=(0,_.of)(s);return(0,a.jsx)("div",{className:r.link,children:(0,a.jsx)(Ce.N,{target:"_blank",href:(0,Se.G)(`/alerting/grafana/${t}/view`),children:n})})}function De(n,t){const s=i?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="paused", id="${i}"})`:'sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="paused"})',r=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:s}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The number of current paused alert rules").setData(r).setThresholds({mode:F.O.Absolute,steps:[{color:"yellow",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions([new d({panel:t})]).build()})}function Fe(n,t){const s=i?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}} evaluation"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("See how many of your alert rules are paused or active").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(l=>l.matchFieldsWithName("active evaluation").overrideColor(p("active evaluation"))).setHeaderActions([new d({panel:t})]).build()})}function Ie(n,t){const s=i?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{id="${i}"}) / ignoring(state) group_left sum(grafanacloud_grafana_instance_alerting_rule_group_rules{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules) / ignoring(state) group_left sum(grafanacloud_grafana_instance_alerting_rule_group_rules)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}} evaluation"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("See what percentage of your alert rules are paused or active").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setCustomFieldConfig("fillOpacity",45).setUnit("percentunit").setOption("tooltip",{mode:u.$N.Multi}).setMax(1).setOverrides(l=>l.matchFieldsWithName("active evaluation").overrideColor(p("active evaluation"))).setHeaderActions([new d({panel:t})]).build()})}function $e(n,t){const s=i?`sum by (state) (grafanacloud_grafana_instance_alerting_alertmanager_alerts{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_alertmanager_alerts)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your firing alert rule instances based on state").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(l=>l.matchFieldsWithName("active").overrideColor(p("active"))).setHeaderActions([new d({panel:t})]).build()})}function Te(n,t){const s=i?`sum by (state) (grafanacloud_grafana_instance_alerting_silences{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_silences)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of silences by state").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setHeaderActions([new d({panel:t})]).build()})}function Ge(n,t){const s=i?`sum by (state) (grafanacloud_instance_alertmanager_alerts{stack_id="${i}"})`:"sum by (state) (grafanacloud_instance_alertmanager_alerts)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your firing alert rule instances based on state").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(l=>l.matchFieldsWithName("active").overrideColor(p("active"))).setHeaderActions([new d({panel:t})]).build()})}function Me(n,t){const s=i?`sum by (cluster)(grafanacloud_instance_alertmanager_invalid_config{stack_id="${i}"})`:"sum by (cluster)(grafanacloud_instance_alertmanager_invalid_config)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{cluster}}"}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The current state of your alertmanager configuration").setData(r).setUnit("bool_yes_no").setOption("graphMode",u.$p.None).setHeaderActions([new d({panel:t})]).build()})}function Re(n,t){const s=i?`sum by(cluster)(grafanacloud_instance_alertmanager_notifications_per_second{stack_id="${i}"}) - sum by (cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second{stack_id="${i}"})`:"sum by(cluster)(grafanacloud_instance_alertmanager_notifications_per_second) - sum by (cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second)",r=i?`sum by(cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second{stack_id="${i}"})`:"sum by(cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second)",l=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"success"},{refId:"B",expr:r,range:!0,legendFormat:"failed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed notifications").setData(l).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(h=>h.matchFieldsWithName("success").overrideColor(p("success")).matchFieldsWithName("failed").overrideColor(p("failed"))).setHeaderActions([new d({panel:t})]).build()})}function Be(n,t){const s=i?`sum by (state) (grafanacloud_instance_alertmanager_silences{stack_id="${i}"})`:"sum by (state) (grafanacloud_instance_alertmanager_silences)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of silences by state").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setHeaderActions([new d({panel:t})]).build()})}var Oe=o(13076);function Ee(n,t){const s=i?`grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group", stack_id="${i}"} / grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group", stack_id="${i}"}`:'grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group"} / grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group"}',r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"duration / interval"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The percentage of interval time spent evaluating").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOption("legend",{showLegend:!1}).setUnit("percentunit").setThresholds({mode:Oe.Ol.Percentage,steps:[{color:"green",value:0},{color:"red",value:80},{color:"yellow",value:60}]}).setHeaderActions([new d({panel:t})]).build()})}function He(n,t){const s=i?`grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group", stack_id="${i}"}`:'grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group"}',r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{rule_group}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("How long it took to evaluate the rule group").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setUnit("s").setOption("tooltip",{mode:u.$N.Multi}).setOption("legend",{showLegend:!1}).setOverrides(l=>l.matchFieldsByQuery("A").overrideColor({mode:"fixed",fixedColor:"blue"})).setHeaderActions([new d({panel:t})]).build()})}function We(n,t){const s=i?`grafanacloud_instance_rule_evaluations_total:rate5m{rule_group="$rule_group", stack_id="${i}"} - grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group", stack_id="${i}"}`:'grafanacloud_instance_rule_evaluations_total:rate5m{rule_group="$rule_group"} - grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group"}',r=i?`grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group", stack_id="${i}"}`:'grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group"}',l=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"success"},{refId:"B",expr:r,range:!0,legendFormat:"failed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed evaluations for the rule group").setData(l).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(h=>h.matchFieldsWithName("success").overrideColor(p("success")).matchFieldsWithName("failed").overrideColor(p("failed"))).setHeaderActions([new d({panel:t})]).build()})}function Le(n,t){const s=i?`grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group", stack_id="${i}"}`:'grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group"}',r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"interval"}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The current and historical rule group evaluation interval").setData(r).setUnit("s").setOption("graphMode",u.$p.Area).setHeaderActions([new d({panel:t})]).build()})}function Pe(n,t){const s=i?`sum(grafanacloud_instance_rule_group_rules{rule_group="$rule_group", stack_id="${i}"})`:'sum(grafanacloud_instance_rule_group_rules{rule_group="$rule_group"})',r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"number of rules"}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The current and historical number of alert rules in the rule group").setData(r).setUnit("none").setOption("graphMode",u.$p.Area).setOverrides(l=>l.matchFieldsByQuery("A").overrideColor({mode:"fixed",fixedColor:"blue"})).setNoValue("0").setHeaderActions([new d({panel:t})]).build()})}function ke(n,t){const s=i?`sum(grafanacloud_instance_rule_evaluations_total:rate5m{stack_id="${i}"}) - sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m{stack_id="${i}"})`:"sum(grafanacloud_instance_rule_evaluations_total:rate5m) - sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m)",r=i?`sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m{stack_id="${i}"})`:"sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m)",l=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"success"},{refId:"B",expr:r,range:!0,legendFormat:"failed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed alert rule evaluations").setData(l).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(h=>h.matchFieldsWithName("failed").overrideColor(p("failed"))).setHeaderActions([new d({panel:t})]).build()})}function Ue(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:'sum by (alertstate) (ALERTS{alertstate="firing"})'}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The number of currently firing alert rule instances").setData(s).setThresholds({mode:F.O.Absolute,steps:[{color:"red",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions([new d({panel:t})]).build()})}function qe(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",expr:"sum by (alertstate) (ALERTS)",range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of firing and pending alert rule instances").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(r=>r.matchFieldsWithName("firing").overrideColor(p("firing"))).setHeaderActions([new d({panel:t})]).build()})}function Ve(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",expr:"sum by (alertstate) (ALERTS) / ignoring(alertstate) group_left sum(ALERTS)",range:!0,legendFormat:"{{alertstate}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("See what percentage of your alert rules are firing versus pending").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setCustomFieldConfig("fillOpacity",45).setUnit("percentunit").setMax(1).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(r=>r.matchFieldsWithName("firing").overrideColor(p("firing"))).setHeaderActions([new d({panel:t})]).build()})}function ze(n,t){const s=i?`sum(grafanacloud_instance_rule_group_iterations_missed_total:rate5m{stack_id="${i}"})`:"sum(grafanacloud_instance_rule_group_iterations_missed_total:rate5m)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"missed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of evaluations missed").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOption("legend",{showLegend:!1}).setOverrides(l=>l.matchFieldsWithName("missed").overrideColor(p("missed"))).setHeaderActions([new d({panel:t})]).build()})}function Ke(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",expr:'topk(10, sum by(alertname) (ALERTS{alertstate="firing"}))',instant:!0,range:!1,format:"table"}]}),r=new e.Es({$data:s,transformations:[{id:"organize",options:{excludeByName:{Time:!0},indexByName:{},renameByName:{Value:"Number of fires",alertname:"Alert Rule Name"}}}]});return new e.vA({...g,body:e.d0.table().setTitle(t).setDescription("The alert rules that have fired the most").setData(r).setHeaderActions([new d({panel:t})]).build()})}function Ye(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:'sum by (alertstate) (ALERTS{alertstate="pending"})'}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The number of currently pending alert rule instances").setData(s).setThresholds({mode:F.O.Absolute,steps:[{color:"yellow",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions([new d({panel:t})]).build()})}const O={type:"loki",uid:"grafanacloud-alert-state-history",settings:void 0},c={type:"prometheus",uid:"grafanacloud-usage",settings:void 0},b={type:"prometheus",uid:"grafanacloud-prom",settings:void 0},Qe={alerting:"red",firing:"red",active:"red",missed:"red",failed:"red",pending:"yellow",nodata:"blue","active evaluation":"blue",normal:"green",success:"green",error:"orange"};function p(n){return{mode:"fixed",fixedColor:Qe[n]}}const g={minHeight:300},Je=new e.JZ({from:"now-1w",to:"now"}),U=(0,le.G)(),i=U.includes("stacks-")?U.replace("stacks-",""):void 0,q=()=>{const n=(0,ie.l)();return[O,c,b].forEach(t=>{t.settings=n.getInstanceSettings(t.uid)}),[O,c,b]},Ze=()=>{const[n,t,s]=q();return t.settings};function Xe(){const[n,t,s]=q(),r=[],l=n.settings&&t.settings,h=!!t.settings,m=!!t.settings,x=t.settings&&s.settings,v=!!t.settings;return l&&r.push(new e.vA({ySizing:"content",body:et()})),h&&r.push(new e.vA({ySizing:"content",body:tt()})),x&&r.push(new e.vA({ySizing:"content",body:at()})),v&&r.push(new e.vA({ySizing:"content",body:rt()})),m&&r.push(new e.vA({ySizing:"content",body:nt()})),new e.P1({$timeRange:Je,controls:[new e.dM({component:D,props:{children:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(w.E,{children:["Monitor the status of your system"," ",(0,a.jsx)(oe.m,{content:(0,a.jsxs)("div",{children:["Alerting insights provides pre-built dashboards to monitor your alerting data.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"You can identify patterns in why things go wrong and discover trends in alerting performance within your organization."]}),children:(0,a.jsx)(R.I,{name:"info-circle",size:"sm"})})]})})}}),new e.N0,new e.KE({}),new e.WM({})],body:new e.G1({direction:"column",children:r})})}function et(){return new e.Or({title:"Grafana-managed alert rules",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.G1({direction:"column",children:[new e.G1({children:[je(O,"Top 10 firing instances"),xe(c,"Active rules"),De(c,"Paused rules")]}),new e.G1({children:[we(c,"Alert instances by state"),new e.G1({height:"400px",direction:"column",children:[new e.G1({height:"400px",children:[I(c,"Firing instances","The number of currently firing alert rule instances","alerting"),I(c,"Pending instances","The number of currently pending alert rule instances","pending")]}),new e.G1({children:[I(c,"No data instances","The current number of alert rule instances in No data state","nodata"),I(c,"Error instances","The current number of alert rule instances in Error state","error")]})]})]}),new e.G1({children:[Fe(c,"Alert rule evaluation"),Ie(c,"% of alert rule evaluation")]}),new e.G1({children:[be(c,"Evaluation success vs failures"),Ae(c,"Iterations missed per evaluation group")]})]}),new e.dM({component:S})]})})}function tt(){return new e.Or({title:"Grafana Alertmanager",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.G1({children:[$e(c,"Firing alerts by state"),Te(c,"Silences")]}),new e.dM({component:S})]})})}function nt(){return new e.Or({title:"Mimir Alertmanager",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:D,props:{datasources:[c]}})}),new e.G1({children:[Ge(c,"Firing alerts by state"),Re(c,"Notification delivery")]}),new e.G1({children:[Be(c,"Silences"),Me(c,"Invalid configuration")]}),new e.dM({component:S})]})})}function at(){return new e.Or({title:"Mimir-managed alert rules",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:D,props:{datasources:[b,c]}})}),new e.G1({children:[Ke(b,"Top 10 firing rules"),Ue(b,"Firing instances"),Ye(b,"Pending instances")]}),new e.G1({children:[qe(b,"Firing and pending alert instances"),Ve(b,"% of alert instances by state")]}),new e.G1({children:[ke(c,"Evaluation success vs failures"),ze(c,"Missed evaluations")]}),new e.dM({component:S})]})})}function rt(){const n=new e.fS({label:"Rule Group",name:"rule_group",datasource:c,query:"label_values(grafanacloud_instance_rule_group_rules,rule_group)"});return new e.Or({title:"Mimir-managed alert rules - per rule group",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:D,props:{datasources:[c]}})}),new e.G1({children:[We(c,"Rule group evaluation"),Le(c,"Rule group interval")]}),new e.G1({children:[He(c,"Rule group evaluation duration"),Pe(c,"Rules per group"),Ee(c,"Evaluation duration / interval ratio")]}),new e.dM({component:S})]}),$variables:new e.Pj({variables:[n]}),controls:[new e.K8({})]})}var st=o(13893);function it(){const n=(0,_.of)(ot),{components:t}=(0,st.u)();return t.length===0?null:(0,a.jsxs)(A.B,{direction:"column",gap:2,children:[(0,a.jsx)(w.E,{element:"h3",variant:"h4",children:"Speed up your alerts creation now by using one of our tailored apps"}),(0,a.jsx)(A.B,{gap:2,wrap:"wrap",direction:"row",children:t.map((s,r)=>(0,a.jsx)("div",{className:n.box,children:(0,a.jsx)(s,{})},r))})]})}const ot=n=>({box:(0,f.css)({padding:n.spacing(2),flex:1,backgroundColor:n.colors.background.secondary,maxWidth:"460px"})});function lt(){const n=(Ze()||(0,J.ES)())&&!!T.$.featureToggles.alertingInsights,[t,s]=(0,N.useState)(n?"insights":"overview"),r=Xe();return(0,a.jsxs)(Q.d,{title:"Alerting",subTitle:"Learn about problems in your systems moments after they occur",navId:"alerting",children:[(0,a.jsxs)(A.B,{gap:2,direction:"column",children:[(0,a.jsx)(ne,{}),(0,a.jsx)(it,{})]}),(0,a.jsxs)(z.a,{marginTop:{lg:2,md:0,xs:0},children:[(0,a.jsxs)(K.U,{children:[n&&(0,a.jsx)(H.o,{label:"Insights",active:t==="insights",onChangeTab:()=>s("insights")},"insights"),(0,a.jsx)(H.o,{label:"Get started",active:t==="overview",onChangeTab:()=>s("overview")},"overview")]}),(0,a.jsxs)(Y.J,{children:[t==="insights"&&(0,a.jsx)(r.Component,{model:r}),t==="overview"&&(0,a.jsx)(ee,{})]})]})]})}const ut=(0,Z.S)(lt)},13893:(V,j,o)=>{o.d(j,{u:()=>T});var a=o(93253),N=o(75177);function T(){return(0,N.f)({extensionPointId:a.S.AlertingHomePage,limitPerPlugin:1})}}}]);

//# sourceMappingURL=AlertingHome.68b1e48c617137c5b59c.js.map