"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2041],{53539:(E,f,s)=>{s.d(f,{i:()=>e});var n=s(2543),t=s.n(n),r=s(3202),l=s(63739);const e=(h,p=!1)=>{const S=h.values;switch(h.type){case l.PU.number:return R(S,p);case l.PU.string:return U(S,p);case l.PU.boolean:return N(S,p);case l.PU.time:return typeof h.values[0]=="number"?F(S,p):L(S,p);default:return K(p)}},c=(h,p)=>{if(!h||!p)return y(h,p);if((0,n.isNumber)(h)&&(0,n.isNumber)(p))return o(h,p);if((0,r.u8)(h)&&(0,r.u8)(p)){if((0,r.KQ)(h).isBefore(p))return-1;if((0,r.KQ)(p).isBefore(h))return 1}return 0},o=(h,p)=>h-p,u=new Intl.Collator("en",{sensitivity:"base"}).compare,g=(h,p)=>!h||!p?y(h,p):u(String(h),String(p)),v=(h,p)=>y(h,p),y=(h,p)=>!h&&p?1:h&&!p?-1:0,F=(h,p)=>{let S=p?-1:1;return(P,O)=>S*(h[P]-h[O])},L=(h,p)=>(S,P)=>{const O=h[S],M=h[P];return p?c(M,O):c(O,M)},N=(h,p)=>(S,P)=>{const O=h[S],M=h[P];return p?v(M,O):v(O,M)},R=(h,p)=>(S,P)=>{const O=h[S],M=h[P];return p?o(M,O):o(O,M)},U=(h,p)=>(S,P)=>{const O=h[S],M=h[P];return p?g(M,O):g(O,M)},K=h=>(p,S)=>h?o(S,p):o(p,S)},45188:(E,f,s)=>{s.d(f,{c:()=>t});var n=s(7500);function t(r,l,e){switch((r==null||e==null)&&(r==null&&(r="null"),e==null&&(e="null"),(l===n.zT.GTE||l===n.zT.LTE)&&(l=n.zT.EQ)),l){case n.zT.EQ:return`${r}`==`${e}`;case n.zT.NEQ:return`${r}`!=`${e}`;case n.zT.GT:return r>e;case n.zT.GTE:return r>=e;case n.zT.LT:return r<e;case n.zT.LTE:return r<=e;default:return!1}}},52735:(E,f,s)=>{s.d(f,{_:()=>o});var n=s(63739),t=s(38075);const r={id:t.Ct.byType,name:"Field Type",description:"match based on the field type",defaultOptions:n.PU.number,get:u=>(g,v,y)=>u===g.type,getOptionsDisplayText:u=>`Field type: ${u}`},l={id:t.Ct.byTypes,name:"Field Type",description:"match based on the field types",defaultOptions:new Set,get:u=>(g,v,y)=>u.has(g.type),getOptionsDisplayText:u=>`Field types: ${[...u].join(" | ")}`},e={id:t.Ct.numeric,name:"Numeric Fields",description:"Fields with type number",get:()=>r.get(n.PU.number),getOptionsDisplayText:()=>"Numeric Fields"},c={id:t.Ct.time,name:"Time Fields",description:"Fields with type time",get:()=>r.get(n.PU.time),getOptionsDisplayText:()=>"Time Fields"};function o(){return[r,l,e,c]}},23936:(E,f,s)=>{s.d(f,{u:()=>c});var n=s(7500),t=s(91357),r=s(45188),l=s(38075);function e(o){return o===t.gy.allIsNull||o===t.gy.allIsZero}const c={id:l.Ct.byValue,name:"By value (reducer)",description:"Reduce a field to a single value and test for inclusion",defaultOptions:{reducer:t.gy.allIsZero,op:n.zT.GTE,value:0},get:o=>{if(!o||!o.reducer)return()=>!1;let{reducer:u,op:g,value:v}=o;const y=e(u);return g||(g=n.zT.EQ),(F,L,N)=>{const R=(0,t.Nw)({field:F,reducers:[u]})[u];return y?!!R:(0,r.c)(R,g,v)}},getOptionsDisplayText:o=>`By value (${o.reducer})`}},38075:(E,f,s)=>{s.d(f,{Ct:()=>t,Js:()=>l,cV:()=>n,jR:()=>r});var n=(e=>(e.anyMatch="anyMatch",e.allMatch="allMatch",e.invertMatch="invertMatch",e.alwaysMatch="alwaysMatch",e.neverMatch="neverMatch",e))(n||{}),t=(e=>(e.numeric="numeric",e.time="time",e.first="first",e.firstTimeField="firstTimeField",e.byType="byType",e.byTypes="byTypes",e.byName="byName",e.byNames="byNames",e.byRegexp="byRegexp",e.byRegexpOrNames="byRegexpOrNames",e.byFrameRefID="byFrameRefID",e.byValue="byValue",e))(t||{}),r=(e=>(e.byName="byName",e.byRefId="byRefId",e.byIndex="byIndex",e))(r||{}),l=(e=>(e.regex="regex",e.isNull="isNull",e.isNotNull="isNotNull",e.greater="greater",e.greaterOrEqual="greaterOrEqual",e.lower="lower",e.lowerOrEqual="lowerOrEqual",e.equal="equal",e.notEqual="notEqual",e.substring="substring",e.notSubstring="notSubstring",e.between="between",e))(l||{})},75235:(E,f,s)=>{s.d(f,{i:()=>l});var n=s(67793),t=s(38075);const r={id:t.jR.byRefId,name:"Query refId",description:"match the refId",defaultOptions:"A",get:e=>{let c=null;if((0,n.AP)(e))try{c=(0,n.dO)(e)}catch(o){o instanceof Error&&console.warn(o.message)}else if(e.includes("|")){const o=e.split("|").map(n.jD).join("|");c=new RegExp(`^(?:${o})$`)}return o=>c?.test(o.refId||"")??o.refId===e},getOptionsDisplayText:e=>`RefID: ${e}`};function l(){return[r]}},80645:(E,f,s)=>{s.d(f,{W:()=>e});var n=s(63739),t=s(38075);const r={id:t.Ct.first,name:"First Field",description:"The first field in the frame",get:c=>(o,u,g)=>o===u.fields[0],getOptionsDisplayText:()=>"First field"},l={id:t.Ct.firstTimeField,name:"First time field",description:"The first field of type time in a frame",get:c=>(o,u,g)=>o.type===n.PU.time&&o===u.fields.find(v=>v.type===n.PU.time),getOptionsDisplayText:()=>"First time field"};function e(){return[r,l]}},711:(E,f,s)=>{s.d(f,{d:()=>l});var n=s(38075);const t={id:n.Js.equal,name:"Is equal",description:"Match where value for given field is equal to options value.",get:e=>(c,o)=>o.values[c]==e.value,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},r={id:n.Js.notEqual,name:"Is not equal",description:"Match where value for given field is not equal to options value.",get:e=>(c,o)=>o.values[c]!=e.value,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},l=()=>[t,r]},31064:(E,f,s)=>{s.d(f,{_:()=>l});var n=s(38075);const t={id:n.Js.isNull,name:"Is null",description:"Match where value for given field is null.",get:()=>(e,c)=>c.values[e]==null,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},r={id:n.Js.isNotNull,name:"Is not null",description:"Match where value for given field is not null.",get:()=>(e,c)=>c.values[e]!=null,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},l=()=>[t,r]},87496:(E,f,s)=>{s.d(f,{E:()=>o});var n=s(63739),t=s(38075);const r={id:t.Js.greater,name:"Is greater",description:"Match when field value is greater than option.",get:u=>(g,v)=>{const y=v.values[g];return isNaN(y)?!1:y>u.value},getOptionsDisplayText:u=>`Matches all rows where field value is greater than: ${u.value}.`,isApplicable:u=>u.type===n.PU.number,getDefaultOptions:()=>({value:0})},l={id:t.Js.greaterOrEqual,name:"Is greater or equal",description:"Match when field value is greater than or equal to option.",get:u=>(g,v)=>{const y=v.values[g];return isNaN(y)?!1:y>=u.value},getOptionsDisplayText:u=>`Matches all rows where field value is greater than or equal to: ${u.value}.`,isApplicable:u=>u.type===n.PU.number,getDefaultOptions:()=>({value:0})},e={id:t.Js.lower,name:"Is lower",description:"Match when field value is lower than option.",get:u=>(g,v)=>{const y=v.values[g];return isNaN(y)?!1:y<u.value},getOptionsDisplayText:u=>`Matches all rows where field value is lower than: ${u.value}.`,isApplicable:u=>u.type===n.PU.number,getDefaultOptions:()=>({value:0})},c={id:t.Js.lowerOrEqual,name:"Is lower or equal",description:"Match when field value is lower or equal than option.",get:u=>(g,v)=>{const y=v.values[g];return isNaN(y)?!1:y<=u.value},getOptionsDisplayText:u=>`Matches all rows where field value is lower or equal than: ${u.value}.`,isApplicable:u=>u.type===n.PU.number,getDefaultOptions:()=>({value:0})},o=()=>[r,l,e,c]},41958:(E,f,s)=>{s.d(f,{G:()=>l});var n=s(63739),t=s(38075);const r={id:t.Js.between,name:"Is between",description:"Match when field value is between given option values.",get:e=>(c,o)=>{const u=o.values[c];return isNaN(u)?!1:u>e.from&&u<e.to},getOptionsDisplayText:e=>`Matches all rows where field value is between ${e.from} and ${e.to}.`,isApplicable:e=>e.type===n.PU.number,getDefaultOptions:()=>({from:0,to:100})},l=()=>[r]},57452:(E,f,s)=>{s.d(f,{z:()=>r});var n=s(38075);const t={id:n.Js.regex,name:"Regex",description:"Match when field value is matching regex.",get:l=>{const e=new RegExp(l.value);return(c,o)=>{const u=o.values[c];return e.test(u)}},getOptionsDisplayText:l=>`Matches all rows where field value is matching regex: ${l.value}`,isApplicable:()=>!0,getDefaultOptions:()=>({value:".*"})},r=()=>[t]},84324:(E,f,s)=>{s.d(f,{m:()=>e});var n=s(63739),t=s(38075);const r={id:t.Js.substring,name:"Contains substring",description:"Match where value for given field is a substring to options value.",get:c=>(o,u)=>{const g=u.values[o];return g&&c.value&&typeof g=="string"&&g.toLowerCase().includes(c.value.toLowerCase())||c.value===""},getOptionsDisplayText:()=>"Matches all rows where field is similar to the value.",isApplicable:c=>c.type===n.PU.string,getDefaultOptions:()=>({value:""})},l={id:t.Js.notSubstring,name:"Does not contain substring",description:"Match where value for given field is not a substring to options value.",get:c=>(o,u)=>{const g=u.values[o];return typeof g=="string"&&c.value&&g&&c.value!==""&&!g.toLowerCase().includes(c.value.toLowerCase())},getOptionsDisplayText:()=>"Matches all rows where field is not similar to the value.",isApplicable:c=>c.type===n.PU.string,getDefaultOptions:()=>({value:""})},e=()=>[r,l]},66564:(E,f,s)=>{s.d(f,{F:()=>n});var n=(t=>(t.append="append",t.reduce="reduce",t.order="order",t.organize="organize",t.rename="rename",t.calculateField="calculateField",t.seriesToColumns="seriesToColumns",t.seriesToRows="seriesToRows",t.merge="merge",t.concatenate="concatenate",t.labelsToFields="labelsToFields",t.filterFields="filterFields",t.filterFieldsByName="filterFieldsByName",t.filterFrames="filterFrames",t.filterByRefId="filterByRefId",t.renameByRegex="renameByRegex",t.filterByValue="filterByValue",t.noop="noop",t.ensureColumns="ensureColumns",t.groupBy="groupBy",t.sortBy="sortBy",t.histogram="histogram",t.configFromData="configFromData",t.rowsToFields="rowsToFields",t.prepareTimeSeries="prepareTimeSeries",t.convertFieldType="convertFieldType",t.fieldLookup="fieldLookup",t.heatmap="heatmap",t.spatial="spatial",t.joinByField="joinByField",t.joinByLabels="joinByLabels",t.extractFields="extractFields",t.groupingToMatrix="groupingToMatrix",t.limit="limit",t.partitionByValues="partitionByValues",t.timeSeriesTable="timeSeriesTable",t.transpose="transpose",t.formatTime="formatTime",t.formatString="formatString",t.regression="regression",t.groupToNestedTable="groupToNestedTable",t))(n||{})},52733:(E,f,s)=>{s.d(f,{j:()=>n});function n(t,r){const l=/\{\{\s*(.+?)\s*\}\}/g;return t.replace(l,(e,c)=>r[c]?r[c]:c)}},64121:(E,f,s)=>{s.d(f,{u:()=>n});function n(t){const r=t||{};if(!r.message){if(typeof t=="string")return{message:t};let l="Query error";r.message?l=r.message:r.data&&r.data.message&&r.data?.message!=="Query data error"?l=r.data.message:r?.data?.message==="Query data error"&&r?.data?.error||r.data&&r.data.error?l=r.data.error:r.status&&(l=`Query error: ${r.status} ${r.statusText}`),r.message=l}return r}},75112:(E,f,s)=>{s.d(f,{w:()=>M});var n=s(35392),t=s(1005),r=s(96222),l=s(49426),e=s(17162),c=s(59765),o=s(88483),u=s(39741),g=s(81160),v=s(8392),y=s(64121),F=s(25324);const L=w=>a=>new o.c(i=>{let d=[],m=!0;const _=()=>{i.next(d),d=[]},T=w.subscribe({next:C=>{m=C,m&&d.length&&_()}}),A=a.subscribe({next(C){m?d.length?_():i.next([C]):d.push(C)},error(C){i.error(C)},complete(){i.complete()}});return()=>{A.unsubscribe(),T.unsubscribe()}});var N=(w=>(w[w.Error=0]="Error",w[w.NewValuesSameSchema=1]="NewValuesSameSchema",w[w.ChangedSchema=2]="ChangedSchema",w))(N||{});const R=w=>({values:w.reduce((a,{values:i})=>{for(let d=0;d<i.length;d++){a[d]||(a[d]=[]);for(let m=0;m<i[d].length;m++)a[d].push(i[d][m])}return a},[]),type:1}),U=(w,a)=>w.filter(i=>i.type===a);class K{constructor(a){this.deps=a,this.stream=new u.m(1),this.shutdown=()=>{this.stream.complete(),this.liveEventsSubscription.unsubscribe(),this.deps.onShutdown()},this.shutdownIfNoSubscribers=()=>{this.stream.observed||this.shutdown()},this.onError=i=>{console.log("LiveQuery [error]",{err:i},this.deps.channelId),this.stream.next({type:0,error:(0,y.u)(i)}),this.shutdown()},this.onComplete=()=>{console.log("LiveQuery [complete]",this.deps.channelId),this.shutdown()},this.onNext=i=>{if((0,e.Z7)(i)){this.process(i.message);return}const d=(0,e.ew)(i);if(d&&i.error){const m=(0,y.u)(i.error);this.stream.next({type:0,error:{...m,message:`Streaming channel error: ${m.message}`}})}d&&(i.state===e.ZF.Connected||i.state===e.ZF.Pending)&&i.message&&this.process(i.message)},this.process=i=>{this.frameBuffer.push(i).schemaChanged?this.stream.next({type:2}):this.stream.next({type:1,values:this.frameBuffer.getValuesFromLastPacket()})},this.resizeBuffer=i=>{i&&this.frameBuffer.needsResizing(i)&&this.frameBuffer.resize(i)},this.prepareInternalStreamForNewSubscription=i=>{!this.frameBuffer.hasAtLeastOnePacket()&&i.frame&&this.process(i.frame)},this.clearShutdownTimeout=()=>{this.shutdownTimeoutId&&(clearTimeout(this.shutdownTimeoutId),this.shutdownTimeoutId=void 0)},this.get=(i,d)=>{this.clearShutdownTimeout();const m=(0,c.m8)(i.buffer);this.resizeBuffer(m),this.prepareInternalStreamForNewSubscription(i);const _=i?.buffer?.action===c.Kh.Replace,T=i.filter?.fields,C=T?.length?({name:b})=>T.includes(b):void 0;let $;const V=(b,B)=>($=C?this.frameBuffer.getMatchingFieldIndexes(C):void 0,_?B?{key:d,state:v.Gu.Error,data:[{type:F._w.FullFrame,frame:this.frameBuffer.serialize(C,m,{maxLength:0})}],error:B}:b.length?{key:d,state:v.Gu.Streaming,data:[{type:F._w.FullFrame,frame:this.frameBuffer.serialize(C,m,{maxLength:this.frameBuffer.packetInfo.length})}],error:B}:(console.warn(`expected to find at least one non error message ${b.map(({type:x})=>x)}`),{key:d,state:v.Gu.Streaming,data:[{type:F._w.FullFrame,frame:this.frameBuffer.serialize(C,m,{maxLength:0})}],error:B}):{key:d,state:B?v.Gu.Error:v.Gu.Streaming,data:[{type:F._w.FullFrame,frame:this.frameBuffer.serialize(C,m)}],error:B}),D=b=>{const B=b.length?b[b.length-1]:void 0,x=_&&B?B.values:R(b).values,W=$?x.filter((Z,z)=>$?.includes(z)):x;return{key:d,state:v.Gu.Streaming,data:[{type:F._w.NewValuesSameSchema,values:W}]}};let j=!0;const J=this.stream.pipe(L(this.deps.subscriberReadiness),(0,g.T)((b,B)=>{const x=U(b,0),W=x.length?x[x.length-1].error:void 0;if(j)return j=!1,V(b,W);if(x.length)return V(b,W);if(b.some(I=>I.type===2))return V(b,void 0);const z=U(b,1);return z.length!==b.length&&console.warn(`unsupported message type ${b.map(({type:I})=>I)}`),D(z)}));return new o.c(b=>{const B=J.subscribe({next:x=>{b.next(x)},error:x=>{b.error(x)},complete:()=>{b.complete()}});return()=>{B.unsubscribe(),this.stream.observed||(this.clearShutdownTimeout(),this.shutdownTimeoutId=setTimeout(this.shutdownIfNoSubscribers,this.deps.shutdownDelayInMs))}})},this.frameBuffer=c.k9.empty(a.defaultStreamingFrameOptions),this.liveEventsSubscription=a.liveEventsObservable.subscribe({error:this.onError,complete:this.onComplete,next:this.onNext})}}var h=s(13752);class p{constructor(a,i){this.opened=Date.now(),this.stream=new h.B,this.disconnectIfNoListeners=()=>{this.stream.observers.length===0&&this.disconnect()},this.id=a,this.addr=i,this.currentStatus={type:e.o4.Status,id:a,timestamp:this.opened,state:e.ZF.Pending},(0,e.aj)(i)||(this.currentStatus.state=e.ZF.Invalid,this.currentStatus.error="invalid channel address")}initalize(){if(this.initalized)throw new Error("Channel already initalized: "+this.id);this.initalized=!0,this.subscription.on("publication",a=>{try{a.data&&(a.data.schema&&(this.lastMessageWithSchema=a.data),this.stream.next({type:e.o4.Message,message:a.data})),this.currentStatus.error&&(this.currentStatus.timestamp=Date.now(),delete this.currentStatus.error,this.sendStatus())}catch(i){console.log("publish error",this.addr,i),this.currentStatus.error=i,this.currentStatus.timestamp=Date.now(),this.sendStatus()}}).on("error",a=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.error=a.error.message,this.sendStatus()}).on("subscribed",a=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.state=e.ZF.Connected,delete this.currentStatus.error,a.data?.schema&&(this.lastMessageWithSchema=a.data),this.sendStatus(a.data)}).on("unsubscribed",()=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.state=e.ZF.Disconnected,this.sendStatus()}).on("subscribing",()=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.state=e.ZF.Connecting,this.sendStatus()}).on("join",a=>{this.stream.next({type:e.o4.Join,user:a.info.user})}).on("leave",a=>{this.stream.next({type:e.o4.Leave,user:a.info.user})})}sendStatus(a){const i={...this.currentStatus};a&&(i.message=a),this.stream.next(i)}getStream(){return new o.c(a=>{const i={...this.currentStatus};this.lastMessageWithSchema?.schema&&(i.message={schema:this.lastMessageWithSchema?.schema}),a.next({...this.currentStatus,message:this.lastMessageWithSchema});const d=this.stream.subscribe(a);return()=>{d.unsubscribe(),this.stream.observers.length===0&&setTimeout(this.disconnectIfNoListeners,250)}})}async getPresence(){return this.subscription?this.subscription.presence().then(a=>({users:Object.keys(a.clients)})):Promise.reject("not subscribed")}disconnect(){this.currentStatus.state=e.ZF.Shutdown,this.currentStatus.timestamp=Date.now(),this.subscription&&(this.subscription.unsubscribe(),this.subscription.removeAllListeners(),this.subscription=void 0),this.stream.complete(),this.stream.next({...this.currentStatus}),this.stream.complete(),this.shutdownCallback&&this.shutdownCallback()}shutdownWithError(a){this.currentStatus.error=a,this.sendStatus(),this.disconnect()}}function S(w,a,i){return{id:a,opened:Date.now(),addr:i,getStream:()=>of({type:LiveChannelEventType.Status,id:a,timestamp:Date.now(),state:LiveChannelConnectionState.Invalid,error:w}),disconnect:()=>{}}}const P={maxLength:100,maxDelta:1/0,action:c.Kh.Append},O=5e3;class M{constructor(a){this.deps=a,this.open=new Map,this.liveDataStreamByChannelId={},this.onConnect=m=>{this.connectionState.next(!0)},this.onDisconnect=m=>{this.connectionState.next(!1)},this.onServerSideMessage=m=>{console.log("Publication from server-side channel",m)},this.getConnectionState=()=>this.connectionState.asObservable(),this.getStream=m=>this.getChannel(m).getStream(),this.createSubscriptionKey=m=>m.key??`xstr/${Q++}`,this.getLiveDataStream=m=>{const _=(0,e.Qp)(m.addr),T=this.liveDataStreamByChannelId[_];if(T)return T;const A=this.getChannel(m.addr);return this.liveDataStreamByChannelId[_]=new K({channelId:_,onShutdown:()=>{delete this.liveDataStreamByChannelId[_]},liveEventsObservable:A.getStream(),subscriberReadiness:this.dataStreamSubscriberReadiness,defaultStreamingFrameOptions:P,shutdownDelayInMs:O}),this.liveDataStreamByChannelId[_]},this.getDataStream=m=>{const _=this.createSubscriptionKey(m);return this.getLiveDataStream(m).get(m,_)},this.getQueryData=async m=>(this.centrifuge.state!==n.Uw.Connected&&await this.connectionBlocker,this.centrifuge.rpc("grafana.query",m.body)),this.getPresence=m=>this.getChannel(m).getPresence(),this.dataStreamSubscriberReadiness=a.dataStreamSubscriberReadiness.pipe((0,t.u)(),(0,r.Z)(!0));let i=`${a.appUrl.replace(/^http/,"ws")}/api/live/ws`;const d=a.grafanaAuthToken;d!==null&&d!==""&&(i+="?auth_token="+d),this.centrifuge=new n.Ft(i,{timeout:3e4}),a.liveEnabled&&a.orgRole!==""&&this.centrifuge.connect(),this.connectionState=new l.t(this.centrifuge.state===n.Uw.Connected),this.connectionBlocker=new Promise(m=>{if(this.centrifuge.state===n.Uw.Connected)return m();const _=()=>{m(),this.centrifuge.removeListener("connected",_)};this.centrifuge.addListener("connected",_)}),this.centrifuge.on("connected",this.onConnect),this.centrifuge.on("connecting",this.onDisconnect),this.centrifuge.on("disconnected",this.onDisconnect),this.centrifuge.on("publication",this.onServerSideMessage)}getChannel(a){const i=`${this.deps.orgId}/${a.scope}/${a.namespace}/${a.path}`;let d=this.open.get(i);return d!=null||(d=new p(i,a),d.currentStatus.state===e.ZF.Invalid)||(d.shutdownCallback=()=>{this.open.delete(i),this.centrifuge.removeSubscription(this.centrifuge.getSubscription(i))},this.open.set(i,d),this.initChannel(d).catch(m=>{d&&(d.currentStatus.state=e.ZF.Invalid,d.shutdownWithError(m)),this.open.delete(i)})),d}async initChannel(a){this.centrifuge.state!==n.Uw.Connected&&await this.connectionBlocker;const i=this.centrifuge.newSubscription(a.id,{data:a.addr.data});a.subscription=i,a.initalize(),i.subscribe()}}let Q=0},7805:(E,f,s)=>{var n=s(14590),t=s(75508);const r={canHandle(l){return!!(l&&l instanceof t.vU)},serialize(l){const e=n.BX(l),{port1:c,port2:o}=new MessageChannel;return n.p(e,c),[o,[o]]},deserialize(l){return l.start(),n.LV(l)}};n.J3.set("SubscriberHandler",r)}}]);

//# sourceMappingURL=2041.8a651cec6828c201bd88.js.map