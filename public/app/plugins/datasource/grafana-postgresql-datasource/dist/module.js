/*! For license information please see module.js.LICENSE.txt */
define(["@grafana/data","react","@emotion/css","@grafana/ui","rxjs","rxjs/operators","@grafana/runtime","lodash","moment","redux","react-redux"],((e,t,r,n,o,i,a,u,l,s,c)=>(()=>{var f,d,p={3523:e=>{var t=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,r,n;try{t=Map}catch(e){t=function(){}}try{r=Set}catch(e){r=function(){}}try{n=Promise}catch(e){n=function(){}}function o(i,u,l,s,c){"object"==typeof u&&(l=u.depth,s=u.prototype,c=u.includeNonEnumerable,u=u.circular);var f=[],d=[],p="undefined"!=typeof Buffer;return void 0===u&&(u=!0),void 0===l&&(l=1/0),function i(l,v){if(null===l)return null;if(0===v)return l;var g,h;if("object"!=typeof l)return l;if(e(l,t))g=new t;else if(e(l,r))g=new r;else if(e(l,n))g=new n((function(e,t){l.then((function(t){e(i(t,v-1))}),(function(e){t(i(e,v-1))}))}));else if(o.__isArray(l))g=[];else if(o.__isRegExp(l))g=new RegExp(l.source,a(l)),l.lastIndex&&(g.lastIndex=l.lastIndex);else if(o.__isDate(l))g=new Date(l.getTime());else{if(p&&Buffer.isBuffer(l))return g=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(g),g;e(l,Error)?g=Object.create(l):void 0===s?(h=Object.getPrototypeOf(l),g=Object.create(h)):(g=Object.create(s),h=s)}if(u){var y=f.indexOf(l);if(-1!=y)return d[y];f.push(l),d.push(g)}for(var m in e(l,t)&&l.forEach((function(e,t){var r=i(t,v-1),n=i(e,v-1);g.set(r,n)})),e(l,r)&&l.forEach((function(e){var t=i(e,v-1);g.add(t)})),l){var O;h&&(O=Object.getOwnPropertyDescriptor(h,m)),O&&null==O.set||(g[m]=i(l[m],v-1))}if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(l);for(m=0;m<E.length;m++){var b=E[m];(!(S=Object.getOwnPropertyDescriptor(l,b))||S.enumerable||c)&&(g[b]=i(l[b],v-1),S.enumerable||Object.defineProperty(g,b,{enumerable:!1}))}}if(c){var _=Object.getOwnPropertyNames(l);for(m=0;m<_.length;m++){var S,T=_[m];(S=Object.getOwnPropertyDescriptor(l,T))&&S.enumerable||(g[T]=i(l[T],v-1),Object.defineProperty(g,T,{enumerable:!1}))}}return g}(i,l)}function i(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return o.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},o.__objToStr=i,o.__isDate=function(e){return"object"==typeof e&&"[object Date]"===i(e)},o.__isArray=function(e){return"object"==typeof e&&"[object Array]"===i(e)},o.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===i(e)},o.__getRegExpFlags=a,o}();e.exports&&(e.exports=t)},1510:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!=o--;){var a=i[o];if(!("_owner"===a&&t.$$typeof||e(t[a],r[a])))return!1}return!0}return t!=t&&r!=r}},5948:(e,t,r)=>{var n=r(2062)(r(9965),"DataView");e.exports=n},4845:(e,t,r)=>{var n=r(5504),o=r(5270),i=r(4769),a=r(2637),u=r(1077);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=u,e.exports=l},1999:(e,t,r)=>{var n=r(7718),o=r(4272),i=r(5107),a=r(1055),u=r(4647);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=u,e.exports=l},5455:(e,t,r)=>{var n=r(2062)(r(9965),"Map");e.exports=n},1549:(e,t,r)=>{var n=r(6400),o=r(7014),i=r(1793),a=r(6429),u=r(821);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=u,e.exports=l},6420:(e,t,r)=>{var n=r(2062)(r(9965),"Promise");e.exports=n},2833:(e,t,r)=>{var n=r(2062)(r(9965),"Set");e.exports=n},8283:(e,t,r)=>{var n=r(1549),o=r(228),i=r(3683);function a(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},8545:(e,t,r)=>{var n=r(1999),o=r(5052),i=r(4250),a=r(4773),u=r(6921),l=r(5745);function s(e){var t=this.__data__=new n(e);this.size=t.size}s.prototype.clear=o,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=u,s.prototype.set=l,e.exports=s},2609:(e,t,r)=>{var n=r(9965).Symbol;e.exports=n},3604:(e,t,r)=>{var n=r(9965).Uint8Array;e.exports=n},8143:(e,t,r)=>{var n=r(2062)(r(9965),"WeakMap");e.exports=n},1929:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},6433:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},9386:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}},6791:(e,t,r)=>{var n=r(2784),o=r(5196),i=r(4913),a=r(4264),u=r(6665),l=r(5087),s=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),c=!r&&o(e),f=!r&&!c&&a(e),d=!r&&!c&&!f&&l(e),p=r||c||f||d,v=p?n(e.length,String):[],g=v.length;for(var h in e)!t&&!s.call(e,h)||p&&("length"==h||f&&("offset"==h||"parent"==h)||d&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||u(h,g))||v.push(h);return v}},1428:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}},8256:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},9272:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},237:(e,t,r)=>{var n=r(2464),o=r(6424);e.exports=function(e,t,r){(void 0!==r&&!o(e[t],r)||void 0===r&&!(t in e))&&n(e,t,r)}},8131:(e,t,r)=>{var n=r(2464),o=r(6424),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var a=e[t];i.call(e,t)&&o(a,r)&&(void 0!==r||t in e)||n(e,t,r)}},3481:(e,t,r)=>{var n=r(6424);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},4861:(e,t,r)=>{var n=r(4735),o=r(3790);e.exports=function(e,t){return e&&n(t,o(t),e)}},7838:(e,t,r)=>{var n=r(4735),o=r(5961);e.exports=function(e,t){return e&&n(t,o(t),e)}},2464:(e,t,r)=>{var n=r(9611);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},5725:e=>{e.exports=function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}},6575:(e,t,r)=>{var n=r(8545),o=r(6433),i=r(8131),a=r(4861),u=r(7838),l=r(8986),s=r(1231),c=r(1711),f=r(1476),d=r(130),p=r(869),v=r(6053),g=r(509),h=r(1343),y=r(1225),m=r(4913),O=r(4264),E=r(146),b=r(7453),_=r(8696),S=r(3790),T=r(5961),R="[object Arguments]",C="[object Function]",P="[object Object]",j={};j[R]=j["[object Array]"]=j["[object ArrayBuffer]"]=j["[object DataView]"]=j["[object Boolean]"]=j["[object Date]"]=j["[object Float32Array]"]=j["[object Float64Array]"]=j["[object Int8Array]"]=j["[object Int16Array]"]=j["[object Int32Array]"]=j["[object Map]"]=j["[object Number]"]=j[P]=j["[object RegExp]"]=j["[object Set]"]=j["[object String]"]=j["[object Symbol]"]=j["[object Uint8Array]"]=j["[object Uint8ClampedArray]"]=j["[object Uint16Array]"]=j["[object Uint32Array]"]=!0,j["[object Error]"]=j[C]=j["[object WeakMap]"]=!1,e.exports=function e(t,r,L,w,I,N){var A,x=1&r,F=2&r,D=4&r;if(L&&(A=I?L(t,w,I,N):L(t)),void 0!==A)return A;if(!b(t))return t;var k=m(t);if(k){if(A=g(t),!x)return s(t,A)}else{var M=v(t),V=M==C||"[object GeneratorFunction]"==M;if(O(t))return l(t,x);if(M==P||M==R||V&&!I){if(A=F||V?{}:y(t),!x)return F?f(t,u(A,t)):c(t,a(A,t))}else{if(!j[M])return I?t:{};A=h(t,M,x)}}N||(N=new n);var U=N.get(t);if(U)return U;N.set(t,A),_(t)?t.forEach((function(n){A.add(e(n,r,L,n,t,N))})):E(t)&&t.forEach((function(n,o){A.set(o,e(n,r,L,o,t,N))}));var q=k?void 0:(D?F?p:d:F?T:S)(t);return o(q||t,(function(n,o){q&&(n=t[o=n]),i(A,o,e(n,r,L,o,t,N))})),A}},3088:(e,t,r)=>{var n=r(7453),o=Object.create,i=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=i},3323:e=>{e.exports=function(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},1360:(e,t,r)=>{var n=r(8256),o=r(5043);e.exports=function e(t,r,i,a,u){var l=-1,s=t.length;for(i||(i=o),u||(u=[]);++l<s;){var c=t[l];r>0&&i(c)?r>1?e(c,r-1,i,a,u):n(u,c):a||(u[u.length]=c)}return u}},6057:(e,t,r)=>{var n=r(5845)();e.exports=n},5473:(e,t,r)=>{var n=r(6057),o=r(3790);e.exports=function(e,t){return e&&n(e,t,o)}},2718:(e,t,r)=>{var n=r(2361),o=r(8197);e.exports=function(e,t){for(var r=0,i=(t=n(t,e)).length;null!=e&&r<i;)e=e[o(t[r++])];return r&&r==i?e:void 0}},8359:(e,t,r)=>{var n=r(8256),o=r(4913);e.exports=function(e,t,r){var i=t(e);return o(e)?i:n(i,r(e))}},9048:(e,t,r)=>{var n=r(2609),o=r(2899),i=r(7222),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},3613:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},9555:(e,t,r)=>{var n=r(3323),o=r(8967),i=r(5951);e.exports=function(e,t,r){return t==t?i(e,t,r):n(e,o,r)}},3070:(e,t,r)=>{var n=r(9048),o=r(9466);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},590:(e,t,r)=>{var n=r(9132),o=r(9466);e.exports=function e(t,r,i,a,u){return t===r||(null==t||null==r||!o(t)&&!o(r)?t!=t&&r!=r:n(t,r,i,a,e,u))}},9132:(e,t,r)=>{var n=r(8545),o=r(4807),i=r(898),a=r(3409),u=r(6053),l=r(4913),s=r(4264),c=r(5087),f="[object Arguments]",d="[object Array]",p="[object Object]",v=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,g,h,y){var m=l(e),O=l(t),E=m?d:u(e),b=O?d:u(t),_=(E=E==f?p:E)==p,S=(b=b==f?p:b)==p,T=E==b;if(T&&s(e)){if(!s(t))return!1;m=!0,_=!1}if(T&&!_)return y||(y=new n),m||c(e)?o(e,t,r,g,h,y):i(e,t,E,r,g,h,y);if(!(1&r)){var R=_&&v.call(e,"__wrapped__"),C=S&&v.call(t,"__wrapped__");if(R||C){var P=R?e.value():e,j=C?t.value():t;return y||(y=new n),h(P,j,r,g,y)}}return!!T&&(y||(y=new n),a(e,t,r,g,h,y))}},2052:(e,t,r)=>{var n=r(6053),o=r(9466);e.exports=function(e){return o(e)&&"[object Map]"==n(e)}},7799:(e,t,r)=>{var n=r(8545),o=r(590);e.exports=function(e,t,r,i){var a=r.length,u=a,l=!i;if(null==e)return!u;for(e=Object(e);a--;){var s=r[a];if(l&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<u;){var c=(s=r[a])[0],f=e[c],d=s[1];if(l&&s[2]){if(void 0===f&&!(c in e))return!1}else{var p=new n;if(i)var v=i(f,d,c,e,t,p);if(!(void 0===v?o(d,f,3,i,p):v))return!1}}return!0}},8967:e=>{e.exports=function(e){return e!=e}},4363:(e,t,r)=>{var n=r(1866),o=r(3248),i=r(7453),a=r(3761),u=/^\[object .+?Constructor\]$/,l=Function.prototype,s=Object.prototype,c=l.toString,f=s.hasOwnProperty,d=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(n(e)?d:u).test(a(e))}},5206:(e,t,r)=>{var n=r(6053),o=r(9466);e.exports=function(e){return o(e)&&"[object Set]"==n(e)}},9653:(e,t,r)=>{var n=r(9048),o=r(582),i=r(9466),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[n(e)]}},3245:(e,t,r)=>{var n=r(8271),o=r(4458),i=r(912),a=r(4913),u=r(6711);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):n(e):u(e)}},6504:(e,t,r)=>{var n=r(5735),o=r(9458),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},9399:(e,t,r)=>{var n=r(7453),o=r(5735),i=r(2693),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=o(e),r=[];for(var u in e)("constructor"!=u||!t&&a.call(e,u))&&r.push(u);return r}},8271:(e,t,r)=>{var n=r(7799),o=r(520),i=r(7405);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},4458:(e,t,r)=>{var n=r(590),o=r(5612),i=r(4055),a=r(6394),u=r(2308),l=r(7405),s=r(8197);e.exports=function(e,t){return a(e)&&u(t)?l(s(e),t):function(r){var a=o(r,e);return void 0===a&&a===t?i(r,e):n(t,a,3)}}},9058:(e,t,r)=>{var n=r(8545),o=r(237),i=r(6057),a=r(8120),u=r(7453),l=r(5961),s=r(4302);e.exports=function e(t,r,c,f,d){t!==r&&i(r,(function(i,l){if(d||(d=new n),u(i))a(t,r,l,c,e,f,d);else{var p=f?f(s(t,l),i,l+"",t,r,d):void 0;void 0===p&&(p=i),o(t,l,p)}}),l)}},8120:(e,t,r)=>{var n=r(237),o=r(8986),i=r(7961),a=r(1231),u=r(1225),l=r(5196),s=r(4913),c=r(7965),f=r(4264),d=r(1866),p=r(7453),v=r(5219),g=r(5087),h=r(4302),y=r(5148);e.exports=function(e,t,r,m,O,E,b){var _=h(e,r),S=h(t,r),T=b.get(S);if(T)n(e,r,T);else{var R=E?E(_,S,r+"",e,t,b):void 0,C=void 0===R;if(C){var P=s(S),j=!P&&f(S),L=!P&&!j&&g(S);R=S,P||j||L?s(_)?R=_:c(_)?R=a(_):j?(C=!1,R=o(S,!0)):L?(C=!1,R=i(S,!0)):R=[]:v(S)||l(S)?(R=_,l(_)?R=y(_):p(_)&&!d(_)||(R=u(S))):C=!1}C&&(b.set(S,R),O(R,S,m,E,b),b.delete(S)),n(e,r,R)}}},1:(e,t,r)=>{var n=r(9916),o=r(4055);e.exports=function(e,t){return n(e,t,(function(t,r){return o(e,r)}))}},9916:(e,t,r)=>{var n=r(2718),o=r(3746),i=r(2361);e.exports=function(e,t,r){for(var a=-1,u=t.length,l={};++a<u;){var s=t[a],c=n(e,s);r(c,s)&&o(l,i(s,e),c)}return l}},645:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},5319:(e,t,r)=>{var n=r(2718);e.exports=function(e){return function(t){return n(t,e)}}},9383:e=>{var t=Math.ceil,r=Math.max;e.exports=function(e,n,o,i){for(var a=-1,u=r(t((n-e)/(o||1)),0),l=Array(u);u--;)l[i?u:++a]=e,e+=o;return l}},3840:e=>{var t=Math.floor;e.exports=function(e,r){var n="";if(!e||r<1||r>9007199254740991)return n;do{r%2&&(n+=e),(r=t(r/2))&&(e+=e)}while(r);return n}},1110:(e,t,r)=>{var n=r(912),o=r(709),i=r(7281);e.exports=function(e,t){return i(o(e,t,n),e+"")}},3746:(e,t,r)=>{var n=r(8131),o=r(2361),i=r(6665),a=r(7453),u=r(8197);e.exports=function(e,t,r,l){if(!a(e))return e;for(var s=-1,c=(t=o(t,e)).length,f=c-1,d=e;null!=d&&++s<c;){var p=u(t[s]),v=r;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(s!=f){var g=d[p];void 0===(v=l?l(g,p,d):void 0)&&(v=a(g)?g:i(t[s+1])?[]:{})}n(d,p,v),d=d[p]}return e}},4450:(e,t,r)=>{var n=r(6534),o=r(9611),i=r(912),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i;e.exports=a},312:e=>{e.exports=function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}},2784:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},9764:(e,t,r)=>{var n=r(2609),o=r(1428),i=r(4913),a=r(7386),u=n?n.prototype:void 0,l=u?u.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return l?l.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},7248:(e,t,r)=>{var n=r(1272),o=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(o,""):e}},277:e=>{e.exports=function(e){return function(t){return e(t)}}},6744:(e,t,r)=>{var n=r(2361),o=r(8906),i=r(2473),a=r(8197);e.exports=function(e,t){return t=n(t,e),null==(e=i(e,t))||delete e[a(o(t))]}},1282:(e,t,r)=>{var n=r(1428);e.exports=function(e,t){return n(t,(function(t){return e[t]}))}},1459:e=>{e.exports=function(e,t){return e.has(t)}},2361:(e,t,r)=>{var n=r(4913),o=r(6394),i=r(266),a=r(3158);e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:i(a(e))}},7749:(e,t,r)=>{var n=r(3604);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},8986:(e,t,r)=>{e=r.nmd(e);var n=r(9965),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?n.Buffer:void 0,u=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=u?u(r):new e.constructor(r);return e.copy(n),n}},3081:(e,t,r)=>{var n=r(7749);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},6945:e=>{var t=/\w*$/;e.exports=function(e){var r=new e.constructor(e.source,t.exec(e));return r.lastIndex=e.lastIndex,r}},6952:(e,t,r)=>{var n=r(2609),o=n?n.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},7961:(e,t,r)=>{var n=r(7749);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},1231:e=>{e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},4735:(e,t,r)=>{var n=r(8131),o=r(2464);e.exports=function(e,t,r,i){var a=!r;r||(r={});for(var u=-1,l=t.length;++u<l;){var s=t[u],c=i?i(r[s],e[s],s,r,e):void 0;void 0===c&&(c=e[s]),a?o(r,s,c):n(r,s,c)}return r}},1711:(e,t,r)=>{var n=r(4735),o=r(6600);e.exports=function(e,t){return n(e,o(e),t)}},1476:(e,t,r)=>{var n=r(4735),o=r(8455);e.exports=function(e,t){return n(e,o(e),t)}},2489:(e,t,r)=>{var n=r(9965)["__core-js_shared__"];e.exports=n},9511:(e,t,r)=>{var n=r(1110),o=r(3632);e.exports=function(e){return n((function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,u=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,u&&o(r[0],r[1],u)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var l=r[n];l&&e(t,l,n,a)}return t}))}},5845:e=>{e.exports=function(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),u=a.length;u--;){var l=a[e?u:++o];if(!1===r(i[l],l,i))break}return t}}},8580:(e,t,r)=>{var n=r(9383),o=r(3632),i=r(1144);e.exports=function(e){return function(t,r,a){return a&&"number"!=typeof a&&o(t,r,a)&&(r=a=void 0),t=i(t),void 0===r?(r=t,t=0):r=i(r),a=void 0===a?t<r?1:-1:i(a),n(t,r,a,e)}}},2050:(e,t,r)=>{var n=r(5219);e.exports=function(e){return n(e)?void 0:e}},9611:(e,t,r)=>{var n=r(2062),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},4807:(e,t,r)=>{var n=r(8283),o=r(9272),i=r(1459);e.exports=function(e,t,r,a,u,l){var s=1&r,c=e.length,f=t.length;if(c!=f&&!(s&&f>c))return!1;var d=l.get(e),p=l.get(t);if(d&&p)return d==t&&p==e;var v=-1,g=!0,h=2&r?new n:void 0;for(l.set(e,t),l.set(t,e);++v<c;){var y=e[v],m=t[v];if(a)var O=s?a(m,y,v,t,e,l):a(y,m,v,e,t,l);if(void 0!==O){if(O)continue;g=!1;break}if(h){if(!o(t,(function(e,t){if(!i(h,t)&&(y===e||u(y,e,r,a,l)))return h.push(t)}))){g=!1;break}}else if(y!==m&&!u(y,m,r,a,l)){g=!1;break}}return l.delete(e),l.delete(t),g}},898:(e,t,r)=>{var n=r(2609),o=r(3604),i=r(6424),a=r(4807),u=r(9885),l=r(6295),s=n?n.prototype:void 0,c=s?s.valueOf:void 0;e.exports=function(e,t,r,n,s,f,d){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=u;case"[object Set]":var v=1&n;if(p||(p=l),e.size!=t.size&&!v)return!1;var g=d.get(e);if(g)return g==t;n|=2,d.set(e,t);var h=a(p(e),p(t),n,s,f,d);return d.delete(e),h;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},3409:(e,t,r)=>{var n=r(130),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,i,a,u){var l=1&r,s=n(e),c=s.length;if(c!=n(t).length&&!l)return!1;for(var f=c;f--;){var d=s[f];if(!(l?d in t:o.call(t,d)))return!1}var p=u.get(e),v=u.get(t);if(p&&v)return p==t&&v==e;var g=!0;u.set(e,t),u.set(t,e);for(var h=l;++f<c;){var y=e[d=s[f]],m=t[d];if(i)var O=l?i(m,y,d,t,e,u):i(y,m,d,e,t,u);if(!(void 0===O?y===m||a(y,m,r,i,u):O)){g=!1;break}h||(h="constructor"==d)}if(g&&!h){var E=e.constructor,b=t.constructor;E==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof E&&E instanceof E&&"function"==typeof b&&b instanceof b||(g=!1)}return u.delete(e),u.delete(t),g}},8496:(e,t,r)=>{var n=r(9234),o=r(709),i=r(7281);e.exports=function(e){return i(o(e,void 0,n),e+"")}},6392:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},130:(e,t,r)=>{var n=r(8359),o=r(6600),i=r(3790);e.exports=function(e){return n(e,i,o)}},869:(e,t,r)=>{var n=r(8359),o=r(8455),i=r(5961);e.exports=function(e){return n(e,i,o)}},3707:(e,t,r)=>{var n=r(9178);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},520:(e,t,r)=>{var n=r(2308),o=r(3790);e.exports=function(e){for(var t=o(e),r=t.length;r--;){var i=t[r],a=e[i];t[r]=[i,a,n(a)]}return t}},2062:(e,t,r)=>{var n=r(4363),o=r(5240);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},6607:(e,t,r)=>{var n=r(8303)(Object.getPrototypeOf,Object);e.exports=n},2899:(e,t,r)=>{var n=r(2609),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,u),r=e[u];try{e[u]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[u]=r:delete e[u]),o}},6600:(e,t,r)=>{var n=r(9386),o=r(8721),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(e){return null==e?[]:(e=Object(e),n(a(e),(function(t){return i.call(e,t)})))}:o;e.exports=u},8455:(e,t,r)=>{var n=r(8256),o=r(6607),i=r(6600),a=r(8721),u=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,i(e)),e=o(e);return t}:a;e.exports=u},6053:(e,t,r)=>{var n=r(5948),o=r(5455),i=r(6420),a=r(2833),u=r(8143),l=r(9048),s=r(3761),c="[object Map]",f="[object Promise]",d="[object Set]",p="[object WeakMap]",v="[object DataView]",g=s(n),h=s(o),y=s(i),m=s(a),O=s(u),E=l;(n&&E(new n(new ArrayBuffer(1)))!=v||o&&E(new o)!=c||i&&E(i.resolve())!=f||a&&E(new a)!=d||u&&E(new u)!=p)&&(E=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?s(r):"";if(n)switch(n){case g:return v;case h:return c;case y:return f;case m:return d;case O:return p}return t}),e.exports=E},5240:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},1518:(e,t,r)=>{var n=r(2361),o=r(5196),i=r(4913),a=r(6665),u=r(582),l=r(8197);e.exports=function(e,t,r){for(var s=-1,c=(t=n(t,e)).length,f=!1;++s<c;){var d=l(t[s]);if(!(f=null!=e&&r(e,d)))break;e=e[d]}return f||++s!=c?f:!!(c=null==e?0:e.length)&&u(c)&&a(d,c)&&(i(e)||o(e))}},5504:(e,t,r)=>{var n=r(8034);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},5270:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},4769:(e,t,r)=>{var n=r(8034),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},2637:(e,t,r)=>{var n=r(8034),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},1077:(e,t,r)=>{var n=r(8034);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},509:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var r=e.length,n=new e.constructor(r);return r&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},1343:(e,t,r)=>{var n=r(7749),o=r(3081),i=r(6945),a=r(6952),u=r(7961);e.exports=function(e,t,r){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return o(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(e,r);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return i(e);case"[object Symbol]":return a(e)}}},1225:(e,t,r)=>{var n=r(3088),o=r(6607),i=r(5735);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:n(o(e))}},5043:(e,t,r)=>{var n=r(2609),o=r(5196),i=r(4913),a=n?n.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(a&&e&&e[a])}},6665:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},3632:(e,t,r)=>{var n=r(6424),o=r(7134),i=r(6665),a=r(7453);e.exports=function(e,t,r){if(!a(r))return!1;var u=typeof t;return!!("number"==u?o(r)&&i(t,r.length):"string"==u&&t in r)&&n(r[t],e)}},6394:(e,t,r)=>{var n=r(4913),o=r(7386),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},9178:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},3248:(e,t,r)=>{var n,o=r(2489),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!i&&i in e}},5735:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},2308:(e,t,r)=>{var n=r(7453);e.exports=function(e){return e==e&&!n(e)}},7718:e=>{e.exports=function(){this.__data__=[],this.size=0}},4272:(e,t,r)=>{var n=r(3481),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():o.call(t,r,1),--this.size,0))}},5107:(e,t,r)=>{var n=r(3481);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},1055:(e,t,r)=>{var n=r(3481);e.exports=function(e){return n(this.__data__,e)>-1}},4647:(e,t,r)=>{var n=r(3481);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},6400:(e,t,r)=>{var n=r(4845),o=r(1999),i=r(5455);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},7014:(e,t,r)=>{var n=r(3707);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},1793:(e,t,r)=>{var n=r(3707);e.exports=function(e){return n(this,e).get(e)}},6429:(e,t,r)=>{var n=r(3707);e.exports=function(e){return n(this,e).has(e)}},821:(e,t,r)=>{var n=r(3707);e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},9885:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},7405:e=>{e.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},2848:(e,t,r)=>{var n=r(3272);e.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},8034:(e,t,r)=>{var n=r(2062)(Object,"create");e.exports=n},9458:(e,t,r)=>{var n=r(8303)(Object.keys,Object);e.exports=n},2693:e=>{e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},1977:(e,t,r)=>{e=r.nmd(e);var n=r(6392),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o&&n.process,u=function(){try{return i&&i.require&&i.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=u},7222:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},8303:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},709:(e,t,r)=>{var n=r(1929),o=Math.max;e.exports=function(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,u=o(i.length-t,0),l=Array(u);++a<u;)l[a]=i[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=i[a];return s[t]=r(l),n(e,this,s)}}},2473:(e,t,r)=>{var n=r(2718),o=r(312);e.exports=function(e,t){return t.length<2?e:n(e,o(t,0,-1))}},9965:(e,t,r)=>{var n=r(6392),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},4302:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},228:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},3683:e=>{e.exports=function(e){return this.__data__.has(e)}},6295:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},7281:(e,t,r)=>{var n=r(4450),o=r(435)(n);e.exports=o},435:e=>{var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var o=t(),i=16-(o-n);if(n=o,i>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},5052:(e,t,r)=>{var n=r(1999);e.exports=function(){this.__data__=new n,this.size=0}},4250:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},4773:e=>{e.exports=function(e){return this.__data__.get(e)}},6921:e=>{e.exports=function(e){return this.__data__.has(e)}},5745:(e,t,r)=>{var n=r(1999),o=r(5455),i=r(1549);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(a)}return r.set(e,t),this.size=r.size,this}},5951:e=>{e.exports=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}},266:(e,t,r)=>{var n=r(2848),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,r,n,o){t.push(n?o.replace(i,"$1"):r||e)})),t}));e.exports=a},8197:(e,t,r)=>{var n=r(7386);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},3761:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},1272:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},6534:e=>{e.exports=function(e){return function(){return e}}},6424:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},8472:(e,t,r)=>{var n=r(3158),o=/[\\^$.*+?()[\]{}|]/g,i=RegExp(o.source);e.exports=function(e){return(e=n(e))&&i.test(e)?e.replace(o,"\\$&"):e}},9234:(e,t,r)=>{var n=r(1360);e.exports=function(e){return null!=e&&e.length?n(e,1):[]}},5612:(e,t,r)=>{var n=r(2718);e.exports=function(e,t,r){var o=null==e?void 0:n(e,t);return void 0===o?r:o}},4055:(e,t,r)=>{var n=r(3613),o=r(1518);e.exports=function(e,t){return null!=e&&o(e,t,n)}},912:e=>{e.exports=function(e){return e}},1283:(e,t,r)=>{var n=r(9555),o=r(7134),i=r(8951),a=r(5729),u=r(1624),l=Math.max;e.exports=function(e,t,r,s){e=o(e)?e:u(e),r=r&&!s?a(r):0;var c=e.length;return r<0&&(r=l(c+r,0)),i(e)?r<=c&&e.indexOf(t,r)>-1:!!c&&n(e,t,r)>-1}},5196:(e,t,r)=>{var n=r(3070),o=r(9466),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!u.call(e,"callee")};e.exports=l},4913:e=>{var t=Array.isArray;e.exports=t},7134:(e,t,r)=>{var n=r(1866),o=r(582);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},7965:(e,t,r)=>{var n=r(7134),o=r(9466);e.exports=function(e){return o(e)&&n(e)}},4264:(e,t,r)=>{e=r.nmd(e);var n=r(9965),o=r(9375),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,u=a&&a.exports===i?n.Buffer:void 0,l=(u?u.isBuffer:void 0)||o;e.exports=l},7969:(e,t,r)=>{var n=r(6504),o=r(6053),i=r(5196),a=r(4913),u=r(7134),l=r(4264),s=r(5735),c=r(5087),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(u(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||c(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(s(e))return!n(e).length;for(var r in e)if(f.call(e,r))return!1;return!0}},1866:(e,t,r)=>{var n=r(9048),o=r(7453);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},582:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},146:(e,t,r)=>{var n=r(2052),o=r(277),i=r(1977),a=i&&i.isMap,u=a?o(a):n;e.exports=u},7453:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},9466:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},5219:(e,t,r)=>{var n=r(9048),o=r(6607),i=r(9466),a=Function.prototype,u=Object.prototype,l=a.toString,s=u.hasOwnProperty,c=l.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var r=s.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==c}},8696:(e,t,r)=>{var n=r(5206),o=r(277),i=r(1977),a=i&&i.isSet,u=a?o(a):n;e.exports=u},8951:(e,t,r)=>{var n=r(9048),o=r(4913),i=r(9466);e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&"[object String]"==n(e)}},7386:(e,t,r)=>{var n=r(9048),o=r(9466);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},5087:(e,t,r)=>{var n=r(9653),o=r(277),i=r(1977),a=i&&i.isTypedArray,u=a?o(a):n;e.exports=u},3790:(e,t,r)=>{var n=r(6791),o=r(6504),i=r(7134);e.exports=function(e){return i(e)?n(e):o(e)}},5961:(e,t,r)=>{var n=r(6791),o=r(9399),i=r(7134);e.exports=function(e){return i(e)?n(e,!0):o(e)}},8906:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},1612:(e,t,r)=>{var n=r(2464),o=r(5473),i=r(3245);e.exports=function(e,t){var r={};return t=i(t,3),o(e,(function(e,o,i){n(r,o,t(e,o,i))})),r}},3272:(e,t,r)=>{var n=r(1549);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(o.Cache||n),r}o.Cache=n,e.exports=o},4308:(e,t,r)=>{var n=r(9058),o=r(9511)((function(e,t,r){n(e,t,r)}));e.exports=o},2815:(e,t,r)=>{var n=r(9058),o=r(9511)((function(e,t,r,o){n(e,t,r,o)}));e.exports=o},7027:(e,t,r)=>{var n=r(1428),o=r(6575),i=r(6744),a=r(2361),u=r(4735),l=r(2050),s=r(8496),c=r(869),f=s((function(e,t){var r={};if(null==e)return r;var s=!1;t=n(t,(function(t){return t=a(t,e),s||(s=t.length>1),t})),u(e,c(e),r),s&&(r=o(r,7,l));for(var f=t.length;f--;)i(r,t[f]);return r}));e.exports=f},8831:(e,t,r)=>{var n=r(1),o=r(8496)((function(e,t){return null==e?{}:n(e,t)}));e.exports=o},350:(e,t,r)=>{var n=r(1428),o=r(3245),i=r(9916),a=r(869);e.exports=function(e,t){if(null==e)return{};var r=n(a(e),(function(e){return[e]}));return t=o(t),i(e,r,(function(e,r){return t(e,r[0])}))}},6711:(e,t,r)=>{var n=r(645),o=r(5319),i=r(6394),a=r(8197);e.exports=function(e){return i(e)?n(a(e)):o(e)}},2285:(e,t,r)=>{var n=r(8580)();e.exports=n},9901:(e,t,r)=>{var n=r(3840),o=r(3632),i=r(5729),a=r(3158);e.exports=function(e,t,r){return t=(r?o(e,t,r):void 0===t)?1:i(t),n(a(e),t)}},3547:(e,t,r)=>{var n=r(5725),o=r(9764),i=r(5729),a=r(3158);e.exports=function(e,t,r){return e=a(e),r=null==r?0:n(i(r),0,e.length),t=o(t),e.slice(r,r+t.length)==t}},8721:e=>{e.exports=function(){return[]}},9375:e=>{e.exports=function(){return!1}},1144:(e,t,r)=>{var n=r(3662),o=1/0;e.exports=function(e){return e?(e=n(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},5729:(e,t,r)=>{var n=r(1144);e.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},3662:(e,t,r)=>{var n=r(7248),o=r(7453),i=r(7386),a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=u.test(e);return r||l.test(e)?s(e.slice(2),r?2:8):a.test(e)?NaN:+e}},5148:(e,t,r)=>{var n=r(4735),o=r(5961);e.exports=function(e){return n(e,o(e))}},3158:(e,t,r)=>{var n=r(9764);e.exports=function(e){return null==e?"":n(e)}},1624:(e,t,r)=>{var n=r(1282),o=r(3790);e.exports=function(e){return null==e?[]:n(e,o(e))}},4790:(e,t,r)=>{"use strict";var n=r(4621);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,i,a){if(a!==n){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r}},7028:(e,t,r)=>{e.exports=r(4790)()},4621:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4303:(e,t,r)=>{"use strict";var n=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.setDragStart=t.setDragProgress=t.setDragEnd=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=a?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(o,u,l):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}(r(4084));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}t.setDragProgress=function(e,t){return{type:o.SET_DRAG_PROGRESS,mousePos:e,dragging:t}},t.setDragStart=function(e,t,r){return{type:o.SET_DRAG_START,dragStart:e,dragging:t,mousePos:r}},t.setDragEnd=function(){return{type:o.SET_DRAG_END}}},6930:(e,t,r)=>{"use strict";var n=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.setNot=t.setLock=t.setConjunction=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(o,u,l):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}(r(4084)),i=r(3585);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}t.setConjunction=function(e,t,r){return{type:o.SET_CONJUNCTION,path:(0,i.toImmutableList)(t),conjunction:r}},t.setNot=function(e,t,r){return{type:o.SET_NOT,path:(0,i.toImmutableList)(t),not:r}},t.setLock=function(e,t,r){return{type:o.SET_LOCK,path:(0,i.toImmutableList)(t),lock:r}}},1005:(e,t,r)=>{"use strict";var n=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.tree=t.rule=t.group=t.drag=void 0;var o=s(r(1429));t.tree=o;var i=s(r(6930));t.group=i;var a=s(r(1255));t.rule=a;var u=s(r(4303));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}t.drag=u},1255:(e,t,r)=>{"use strict";var n=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.setValueSrc=t.setValue=t.setOperatorOption=t.setOperator=t.setField=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(o,u,l):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}(r(4084)),i=r(3585);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}t.setField=function(e,t,r){return{type:o.SET_FIELD,path:(0,i.toImmutableList)(t),field:r,config:e}},t.setOperator=function(e,t,r){return{type:o.SET_OPERATOR,path:(0,i.toImmutableList)(t),operator:r,config:e}},t.setValue=function(e,t,r,n,a,u,l){return{type:o.SET_VALUE,path:(0,i.toImmutableList)(t),delta:r,value:n,valueType:a,asyncListValues:u,config:e,__isInternal:l}},t.setValueSrc=function(e,t,r,n){return{type:o.SET_VALUE_SRC,path:(0,i.toImmutableList)(t),delta:r,srcKey:n,config:e}},t.setOperatorOption=function(e,t,r,n){return{type:o.SET_OPERATOR_OPTION,path:(0,i.toImmutableList)(t),name:r,value:n,config:e}}},1429:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.setTree=t.removeRule=t.removeGroup=t.moveItem=t.addRule=t.addGroup=t.addDefaultCaseGroup=t.addCaseGroup=void 0;var i=n(r(2676)),a=r(3585),u=r(781),l=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(4084));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}n(r(9612)),t.setTree=function(e,t){return{type:l.SET_TREE,tree:t,config:e}},t.addRule=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rule",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:l.ADD_RULE,ruleType:n,children:o,path:(0,a.toImmutableList)(t),id:(0,i.default)(),properties:(0,u.defaultRuleProperties)(e).merge(r||{}),config:e}},t.removeRule=function(e,t){return{type:l.REMOVE_RULE,path:(0,a.toImmutableList)(t),config:e}},t.addDefaultCaseGroup=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:l.ADD_CASE_GROUP,path:(0,a.toImmutableList)(t),children:n,id:(0,i.default)(),properties:(0,u.defaultGroupProperties)(e).merge(r||{}),config:e,meta:{isDefaultCase:!0}}},t.addCaseGroup=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:l.ADD_CASE_GROUP,path:(0,a.toImmutableList)(t),children:n,id:(0,i.default)(),properties:(0,u.defaultGroupProperties)(e).merge(r||{}),config:e}},t.addGroup=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:l.ADD_GROUP,path:(0,a.toImmutableList)(t),children:n,id:(0,i.default)(),properties:(0,u.defaultGroupProperties)(e).merge(r||{}),config:e}},t.removeGroup=function(e,t){return{type:l.REMOVE_GROUP,path:(0,a.toImmutableList)(t),config:e}},t.moveItem=function(e,t,r,n){return{type:l.MOVE_ITEM,fromPath:(0,a.toImmutableList)(t),toPath:(0,a.toImmutableList)(r),placement:n,config:e}}},8441:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a,u=n(r(945)),l=n(r(5849)),s=n(r(9281)),c=n(r(4066)),f=n(r(2030)),d=E(r(5959)),p=n(r(7028)),v=E(r(9612)),g=r(7217),h=n(r(3628)),y=r(8178),m=(n(r(2676)),r(9043));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}var b=(0,h.default)((a=function(e){(0,s.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(t);if(r){var o=(0,f.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,c.default)(this,e)});function o(e){var t;return(0,u.default)(this,o),(t=n.call(this,e))._updPath(e),t}return(0,l.default)(o,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=(0,m.pureShouldComponentUpdate)(this)(e,t);if(n){var o=[];for(var i in e)e[i]!==r[i]&&"__isInternalValueChange"!=i&&o.push(i);o.length||(n=!1),1==o.length&&"tree"==o[0]&&e.__isInternalValueChange&&(n=!1)}return n}},{key:"_updPath",value:function(e){var t=e.tree.get("id");this.path=v.default.List.of(t)}},{key:"render",value:function(){var e=this.props.tree,t=e.get("type"),r="switch_group"==t,n=r?null:(0,y.getTotalReordableNodesCountInTree)(e),o=r?null:(0,y.getTotalRulesCountInTree)(e),i=e.get("id");return d.default.createElement(g.Item,{key:i,id:i,path:this.path,type:t,properties:e.get("properties")||new v.Map,config:this.props.config,actions:this.props.actions,children1:e.get("children1")||new v.Map,reordableNodesCnt:n,totalRulesCnt:o,parentReordableNodesCnt:0,onDragStart:this.props.onDragStart})}}]),o}(d.Component),a.propTypes={tree:p.default.any.isRequired,config:p.default.object.isRequired,actions:p.default.object.isRequired,onDragStart:p.default.func},i=a))||i;t.default=b},5774:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(7487)),a=n(r(945)),u=n(r(5849)),l=n(r(4749)),s=n(r(9281)),c=n(r(4066)),f=n(r(2030)),d=E(r(5959)),p=r(200),v=n(r(3671)),g=n(r(7028)),h=E(r(1005)),y=r(3585),m=r(9043);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=function(e){(0,s.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(t);if(r){var o=(0,f.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,c.default)(this,e)});function o(e){var t;return(0,a.default)(this,o),(t=n.call(this,e)).shouldComponentUpdate=(0,m.liteShouldComponentUpdate)((0,l.default)(t),{tree:function(e){return e!==t.oldValidatedTree||t.oldValidatedTree!==t.validatedTree}}),(0,m.useOnPropsChanged)((0,l.default)(t)),t._updateActions(e),t.validatedTree=e.getMemoizedTree(e.config,e.tree),t.oldValidatedTree=t.validatedTree,t}return(0,u.default)(o,[{key:"_updateActions",value:function(e){var t=e.config,r=e.dispatch;this.actions=(0,m.bindActionCreators)(_(_(_({},h.tree),h.group),h.rule),t,r)}},{key:"onPropsChanged",value:function(e){var t=e.onChange,r=this.props.config,n=e.tree,o=(this.props.tree,e.config);this.oldValidatedTree=this.validatedTree,this.validatedTree=n,r!==o&&(this._updateActions(e),this.validatedTree=e.getMemoizedTree(o,n,r)),!(0,y.immutableEqual)(this.validatedTree,this.oldValidatedTree)&&t&&t(this.validatedTree,o,e.__lastAction)}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.renderBuilder,n=e.dispatch,o=e.__isInternalValueChange;return r({tree:this.validatedTree,actions:this.actions,config:t,dispatch:n,__isInternalValueChange:o})}}]),o}(d.Component);S.propTypes={config:g.default.object.isRequired,onChange:g.default.func,renderBuilder:g.default.func,tree:g.default.any};var T=(0,p.connect)((function(e){return{tree:e.tree,__isInternalValueChange:e.__isInternalValueChange,__lastAction:e.__lastAction}}),null,null,{context:v.default})(S);T.displayName="ConnectedQuery";var R=T;t.default=R},4783:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(945)),a=n(r(5849)),u=n(r(4749)),l=n(r(9281)),s=n(r(4066)),c=n(r(2030)),f=R(r(5959)),d=n(r(7028)),p=n(r(4538)),v=n(r(3671)),g=r(7694),h=r(200),y=R(r(1005)),m=r(7100),O=r(3585),E=r(781),b=r(8756),_=r(9043),S=n(r(5774));function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(T=function(e){return e?r:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=T(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}var C=function(e){(0,l.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.default)(t);if(r){var o=(0,c.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,s.default)(this,e)});function o(e,t){var r;(0,i.default)(this,o),(r=n.call(this,e,t)).shouldComponentUpdate=(0,_.liteShouldComponentUpdate)((0,u.default)(r),{value:function(e,t,r){return!1}}),(0,_.useOnPropsChanged)((0,u.default)(r)),r.getMemoizedConfig=(0,m.createConfigMemo)(),r.getMemoizedTree=(0,b.createValidationMemo)();var a=r.getMemoizedConfig(e),l=e.value,s=r.getMemoizedTree(a,l),c=(0,p.default)(a,s,r.getMemoizedTree),f=(0,g.createStore)(c);return r.state={store:f,config:a},r}return(0,a.default)(o,[{key:"onPropsChanged",value:function(e){var t=this,r=this.state.config,n=this.getMemoizedConfig(e),o=r!==n,i=this.state.store.getState().tree,a=!(0,O.immutableEqual)(e.value,this.props.value)&&!(0,O.immutableEqual)(e.value,i),u=a?e.value||(0,E.defaultRoot)(e):i;if(o&&this.setState({config:n}),a||o){var l=this.getMemoizedTree(n,u,r);return Promise.resolve().then((function(){t.state.store.dispatch(y.tree.setTree(n,l))}))}}},{key:"render",value:function(){var e=this.props,t=e.renderBuilder,r=e.get_children,n=e.onChange,o=e.settings,i=this.state,a=i.config,u=i.store,l=o.renderProvider;return f.default.createElement(l,{config:a},f.default.createElement(h.Provider,{store:u,context:v.default},f.default.createElement(S.default,{config:a,getMemoizedTree:this.getMemoizedTree,onChange:n,renderBuilder:t||r})))}}]),o}(f.Component);t.default=C,C.propTypes={conjunctions:d.default.object.isRequired,fields:d.default.object.isRequired,types:d.default.object.isRequired,operators:d.default.object.isRequired,widgets:d.default.object.isRequired,settings:d.default.object.isRequired,onChange:d.default.func,renderBuilder:d.default.func,value:d.default.any}},1516:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(9252)),a=n(r(9473)),u=n(r(945)),l=n(r(5849)),s=n(r(9281)),c=n(r(4066)),f=n(r(2030)),d=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),p=n(r(7028)),v=r(3628),g=["isDraggingTempo","isDraggingMe","dragging"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var y=r(2584);t.default=function(e){return function(t){var r;return(r=function(r){(0,s.default)(h,r);var n,o,p=(n=h,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,f.default)(n);if(o){var r=(0,f.default)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.default)(this,e)});function h(e){var t;return(0,u.default)(this,h),(t=p.call(this,e)).handleDraggerMouseDown=function(e){var r=t.props.id,n=t.wrapper.current;t.props.onDragStart&&t.props.onDragStart(r,n,e)},t.wrapper=d.default.createRef(),t}return(0,l.default)(h,[{key:"render",value:function(){var r=this.props,n=r.isDraggingTempo,o=r.isDraggingMe,u=r.dragging,l=(0,a.default)(r,g),s=l.isTrueLocked,c={};o&&n&&(v._isReorderingTree||(c={top:u.y,left:u.x,width:u.w}));var f=y(e,"group-or-rule",o&&n?"qb-draggable":null,o&&!n?"qb-placeholder":null,s?"locked":null);return d.default.createElement("div",{className:f,style:c,ref:this.wrapper,"data-id":this.props.id},d.default.createElement(t,(0,i.default)({handleDraggerMouseDown:this.handleDraggerMouseDown,isDraggingMe:o,isDraggingTempo:n},l)))}}]),h}(d.PureComponent)).propTypes={isDraggingTempo:p.default.bool,isDraggingMe:p.default.bool,onDragStart:p.default.func,dragging:p.default.object,isLocked:p.default.bool,isTrueLocked:p.default.bool},r}}},7909:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(945)),a=n(r(5849)),u=n(r(4749)),l=n(r(9281)),s=n(r(4066)),c=n(r(2030)),f=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),d=n(r(7028)),p=n(r(1612)),v=n(r(3671)),g=r(9043),h=r(200),y=r(781);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}t.default=function(e){var t=(0,h.connect)((function(e){return{dragging:e.dragging}}),null,null,{context:v.default})(function(e){var t;return t=function(t){(0,l.default)(d,t);var r,n,o=(r=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.default)(r);if(n){var o=(0,c.default)(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return(0,s.default)(this,e)});function d(e){var t;return(0,i.default)(this,d),(t=o.call(this,e))._selectedConjunction=function(e){return(e=e||t.props).conjunction||(0,y.defaultGroupConjunction)(e.config,e.field)},t.setConjunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setConjunction(t.props.path,e)},t.setNot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setNot(t.props.path,e)},t.setLock=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setLock(t.props.path,e)},t.dummyFn=function(){},t.removeSelf=function(){t.props.actions.removeGroup(t.props.path)},t.addGroup=function(){t.props.actions.addGroup(t.props.path)},t.addCaseGroup=function(){t.props.actions.addCaseGroup(t.props.path)},t.addDefaultCaseGroup=function(){t.props.actions.addDefaultCaseGroup(t.props.path)},t.addRule=function(){t.props.actions.addRule(t.props.path)},t.setField=function(e){t.props.actions.setField(t.props.path,e)},t.setOperator=function(e){t.props.actions.setOperator(t.props.path,e)},t.setValue=function(e,r,n){t.props.actions.setValue(t.props.path,e,r,n)},(0,g.useOnPropsChanged)((0,u.default)(t)),t.selectedConjunction=t._selectedConjunction(e),t.conjunctionOptions=t._getConjunctionOptions(e),t.dummyFn.isDummyFn=!0,t}return(0,a.default)(d,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=(0,g.pureShouldComponentUpdate)(this)(e,t);if(o&&n==t&&r!=e){var i=(e.dragging.id||r.dragging.id)==e.id,a=[];for(var u in e){var l=e[u]!=r[u];"dragging"!=u||i||(l=!1),l&&a.push(u)}a.length||(o=!1)}return o}},{key:"onPropsChanged",value:function(e){var t=e.config,r=(e.id,e.conjunction),n=this.props.config,o=this.props.conjunction;n==t&&o==r||(this.selectedConjunction=this._selectedConjunction(e),this.conjunctionOptions=this._getConjunctionOptions(e))}},{key:"_getConjunctionOptions",value:function(e){var t=this;return(0,p.default)(e.config.conjunctions,(function(r,n){return{id:"conjunction-".concat(e.id,"-").concat(n),name:"conjunction[".concat(e.id,"]"),key:n,label:r.label,checked:n===t._selectedConjunction(e)}}))}},{key:"render",value:function(){var t=this.props.dragging.id==this.props.id,r=this.props.path.size,n=this.props.config.settings.maxNesting,o=!t&&this.props.isDraggingTempo,i=void 0===n||r<n,a=1==r;return f.default.createElement("div",{className:"group-or-rule-container group-container","data-id":this.props.id},[t?f.default.createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,isRoot:a,allowFurtherNesting:i,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:this.dummyFn,setNot:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,addGroup:this.dummyFn,addCaseGroup:this.dummyFn,addDefaultCaseGroup:this.dummyFn,addRule:this.dummyFn,setField:this.dummyFn,setOperator:this.dummyFn,setValue:this.dummyFn,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,f.default.createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:t,isDraggingTempo:o,onDragStart:this.props.onDragStart,isRoot:a,allowFurtherNesting:i,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:o?this.dummyFn:this.setConjunction,setNot:o?this.dummyFn:this.setNot,setLock:o?this.dummyFn:this.setLock,removeSelf:o?this.dummyFn:this.removeSelf,addGroup:o?this.dummyFn:this.addGroup,addCaseGroup:o?this.dummyFn:this.addCaseGroup,addDefaultCaseGroup:o?this.dummyFn:this.addDefaultCaseGroup,addRule:o?this.dummyFn:this.addRule,setField:o?this.dummyFn:this.setField,setOperator:o?this.dummyFn:this.setOperator,setValue:o?this.dummyFn:this.setValue,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),d}(f.Component),t.propTypes={config:d.default.object.isRequired,actions:d.default.object.isRequired,path:d.default.any.isRequired,id:d.default.string.isRequired,groupId:d.default.string,not:d.default.bool,conjunction:d.default.string,children1:d.default.any,onDragStart:d.default.func,reordableNodesCnt:d.default.number,field:d.default.string,parentField:d.default.string,isLocked:d.default.bool,isTrueLocked:d.default.bool,dragging:d.default.object,isDraggingTempo:d.default.bool},t}(e));return t.displayName="ConnectedGroupContainer",t}},7498:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(945)),a=n(r(5849)),u=n(r(9281)),l=n(r(4066)),s=n(r(2030)),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),f=n(r(7028)),d=n(r(3671)),p=r(7100),v=r(9043),g=r(200);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var y=r(2584);t.default=function(e){var t=(0,g.connect)((function(e){return{dragging:e.dragging}}),null,null,{context:d.default})(function(e){var t;return t=function(t){(0,u.default)(f,t);var r,n,o=(r=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,s.default)(r);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return(0,l.default)(this,e)});function f(e){var t;return(0,i.default)(this,f),(t=o.call(this,e)).dummyFn=function(){},t.removeSelf=function(){t.props.actions.removeRule(t.props.path)},t.setLock=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setLock(t.props.path,e)},t.setField=function(e){t.props.actions.setField(t.props.path,e)},t.setOperator=function(e){t.props.actions.setOperator(t.props.path,e)},t.setOperatorOption=function(e,r){t.props.actions.setOperatorOption(t.props.path,e,r)},t.setValue=function(e,r,n,o,i){t.props.actions.setValue(t.props.path,e,r,n,o,i)},t.setValueSrc=function(e,r){t.props.actions.setValueSrc(t.props.path,e,r)},t.dummyFn.isDummyFn=!0,t}return(0,a.default)(f,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=(0,v.pureShouldComponentUpdate)(this)(e,t);if(o&&n==t&&r!=e){var i=(e.dragging.id||r.dragging.id)==e.id,a=[];for(var u in e){var l=e[u]!=r[u];"dragging"!=u||i||(l=!1),l&&a.push(u)}a.length||(o=!1)}return o}},{key:"render",value:function(){var t=this.props.dragging.id==this.props.id,r=(0,p.getFieldConfig)(this.props.config,this.props.field),n=this.props.config.settings.showErrorMessage,o=(r&&r.type,!t&&this.props.isDraggingTempo),i=this.props.valueError,a=null!=(i&&i.toArray().filter((function(e){return!!e})).shift()||null)&&n;return c.default.createElement("div",{className:y("group-or-rule-container","rule-container",a?"rule-with-error":null),"data-id":this.props.id},[t?c.default.createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,setField:this.dummyFn,setOperator:this.dummyFn,setOperatorOption:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,c.default.createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:t,isDraggingTempo:o,onDragStart:this.props.onDragStart,setLock:o?this.dummyFn:this.setLock,removeSelf:o?this.dummyFn:this.removeSelf,setField:o?this.dummyFn:this.setField,setOperator:o?this.dummyFn:this.setOperator,setOperatorOption:o?this.dummyFn:this.setOperatorOption,setValue:o?this.dummyFn:this.setValue,setValueSrc:o?this.dummyFn:this.setValueSrc,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),f}(c.Component),t.propTypes={id:f.default.string.isRequired,groupId:f.default.string,config:f.default.object.isRequired,path:f.default.any.isRequired,operator:f.default.string,field:f.default.string,actions:f.default.object.isRequired,onDragStart:f.default.func,value:f.default.any,valueSrc:f.default.any,asyncListValues:f.default.array,valueError:f.default.any,operatorOptions:f.default.object,reordableNodesCnt:f.default.number,parentField:f.default.string,isLocked:f.default.bool,isTrueLocked:f.default.bool,dragging:f.default.object,isDraggingTempo:f.default.bool},t}(e));return t.displayName="ConnectedRuleContainer",t}},3628:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t._isReorderingTree=void 0;var i=n(r(9252)),a=n(r(2409)),u=n(r(945)),l=n(r(5849)),s=n(r(4749)),c=n(r(9281)),f=n(r(4066)),d=n(r(2030)),p=T(r(5959)),v=r(200),g=r(8178),h=r(3585),y=n(r(3671)),m=T(r(4084)),O=n(r(3523)),E=n(r(7028)),b=T(r(1005)),_=r(9043);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}function T(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}var R=!1;t._isReorderingTree=R,t.default=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(0,v.connect)((function(e){return{dragging:e.dragging,dragStart:e.dragStart,mousePos:e.mousePos}}),{setDragStart:b.drag.setDragStart,setDragProgress:b.drag.setDragProgress,setDragEnd:b.drag.setDragEnd},null,{context:y.default})(function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r=function(r){(0,c.default)(E,r);var o,v,y=(o=E,v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,d.default)(o);if(v){var r=(0,d.default)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,f.default)(this,e)});function E(e){var t;return(0,u.default)(this,E),(t=y.call(this,e))._getEventTarget=function(e,t){return e&&e.__mocked_window||document.body||window},t.onDragStart=function(e,r,n){var o=r.closest(".query-builder");void 0===t._isUsingLegacyReactDomRender&&(t._isUsingLegacyReactDomRender=(0,_.isUsingLegacyReactDomRender)(o)),document.body.classList.add("qb-dragging"),o.classList.add("qb-dragging");var i,a=o.closest(".query-builder-container")||o,u=(a=t._getScrollParent(a)||document.body).scrollTop,l=(t._getDraggableNodeEl(o),t._getPlaceholderNodeEl(o),o.querySelectorAll(".group--children")),s=l.length?l[0]:null;s&&(i=window.getComputedStyle(s,null).getPropertyValue("padding-left"),i=parseInt(i));var c={id:e,x:r.offsetLeft,y:r.offsetTop,w:r.offsetWidth,h:r.offsetHeight,itemInfo:t.tree.items[e],paddingLeft:i},f={id:e,x:r.offsetLeft,y:r.offsetTop,scrollTop:u,clientX:n.clientX,clientY:n.clientY,itemInfo:(0,O.default)(t.tree.items[e]),treeEl:o,treeElContainer:a},d={clientX:n.clientX,clientY:n.clientY},p=t._getEventTarget(n,f);t.eventTarget=p,p.addEventListener("mousemove",t.onDrag),p.addEventListener("mouseup",t.onDragEnd),t.props.setDragStart(f,c,d)},t.onDrag=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=Object.assign({},t.props.dragging),i=t.props.dragStart,a=o.paddingLeft,u=i.treeElContainer.scrollTop;if(o.itemInfo=t.tree.items[o.id],o.itemInfo){var l={clientX:e.clientX,clientY:e.clientY},s={clientX:i.clientX,clientY:i.clientY};if(e.__mock_dom){var c=i.treeEl,f=t._getDraggableNodeEl(c),d=t._getPlaceholderNodeEl(c);e.__mock_dom({treeEl:c,dragEl:f,plhEl:d})}if(!i.plX){var p=i.treeEl,v=t._getPlaceholderNodeEl(p);v&&(i.plX=v.getBoundingClientRect().left+window.scrollX,i.plY=v.getBoundingClientRect().top+window.scrollY)}var g=i.x,h=i.y,y=i.clientX,m=i.clientY,O=i.scrollTop,E={x:g+(e.clientX-y),y:h+(e.clientY-m)+(u-O)};o.x=E.x,o.y=E.y,o.paddingLeft=a,o.mousePos=l,o.startMousePos=s,t.props.setDragProgress(l,o),r&&t.handleDrag(o,e,n)||e.preventDefault&&e.preventDefault()}},t.onDragEnd=function(){var e=t.props.dragStart.treeEl;t.props.setDragEnd(),e.classList.remove("qb-dragging"),document.body.classList.remove("qb-dragging"),t._cacheEls={};var r=t.eventTarget||t._getEventTarget();r.removeEventListener("mousemove",t.onDrag),r.removeEventListener("mouseup",t.onDragEnd)},(0,_.useOnPropsChanged)((0,s.default)(t)),t.onPropsChanged(e),t}return(0,l.default)(E,[{key:"onPropsChanged",value:function(e){this.tree=(0,g.getFlatTree)(e.tree)}},{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=(0,_.pureShouldComponentUpdate)(this)(e,t);if(o&&n==t&&r!=e){var i=[];for(var a in e)e[a]!=r[a]&&"dragging"!=a&&"mousePos"!=a&&i.push(a);i.length||(o=!1)}return o}},{key:"componentDidUpdate",value:function(e,r){var n=this.props.dragging,o=this.props.dragStart;if(t._isReorderingTree=R=!1,o&&o.id&&(n.itemInfo=this.tree.items[n.id],n.itemInfo&&(n.itemInfo.index!=o.itemInfo.index||n.itemInfo.parent!=o.itemInfo.parent))){var i=o.treeEl,a=o.treeElContainer,u=this._getPlaceholderNodeEl(i,!0);if(u){var l=u.getBoundingClientRect().left+window.scrollX,s=u.getBoundingClientRect().top+window.scrollY,c=o.plX,f=o.plY,d=a.scrollTop;o.plX=l,o.plY=s,o.itemInfo=(0,O.default)(n.itemInfo),o.y=u.offsetTop,o.x=u.offsetLeft,o.clientY+=s-f,o.clientX+=l-c,a!=document.body&&(o.scrollTop=d),this.onDrag(this.props.mousePos,!1)}}}},{key:"_getNodeElById",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t)return null;this._cacheEls||(this._cacheEls={});var n=this._cacheEls[t];return n&&document.contains(n)&&!r||(n=e.querySelector('.group-or-rule-container[data-id="'+t+'"]'),this._cacheEls[t]=n),n}},{key:"_getDraggableNodeEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._cacheEls||(this._cacheEls={});var r=this._cacheEls.draggable;if(r&&document.contains(r)&&!t)return r;var n=e.getElementsByClassName("qb-draggable");return r=n.length?n[0]:null,this._cacheEls.draggable=r,r}},{key:"_getPlaceholderNodeEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._cacheEls||(this._cacheEls={});var r=this._cacheEls.placeholder;if(r&&document.contains(r)&&!t)return r;var n=e.getElementsByClassName("qb-placeholder");return r=n.length?n[0]:null,this._cacheEls.placeholder=r,r}},{key:"_isScrollable",value:function(e){var t=window.getComputedStyle(e)["overflow-y"];return("scroll"===t||"auto"===t)&&e.scrollHeight>e.offsetHeight}},{key:"_getScrollParent",value:function(e){return null==e?null:e===document.body||this._isScrollable(e)?e:this._getScrollParent(e.parentNode)}},{key:"handleDrag",value:function(e,t,r){var n,o,i,u,l=this,s=e.itemInfo,c=e.paddingLeft,f=null,d=this.props.dragStart.treeEl,p=e.id,v=this._getDraggableNodeEl(d),g=this._getPlaceholderNodeEl(d);if(v&&g){if(n=v.getBoundingClientRect(),!(o=g.getBoundingClientRect()).width)return;var y={hrz:0,vrt:0};n.top<o.top?y.vrt=-1:n.bottom>o.bottom&&(y.vrt=1),n.left>o.left?y.hrz=1:n.left<o.left&&(y.hrz=-1);var O,E={x:(u=d.getBoundingClientRect()).left+(u.right-u.left)/2,y:y.vrt>=0?n.bottom:n.top};if(t.__mocked_hov_container)O=t.__mocked_hov_container;else{var b=document.elementFromPoint(E.x,E.y-1);if(!(O=b?b.closest(".group-or-rule-container"):null)&&b&&b.classList.contains("query-builder-container")){var _,S=null==b||null===(_=b.firstChild)||void 0===_?void 0:_.firstChild;S&&S.classList.contains("group-or-rule-container")&&(O=S)}}if(O){var T=O.classList.contains("group-container"),R=O.getAttribute("data-id"),C=O,P=!1,j=!1;if(C){var L=(i=C.getBoundingClientRect()).bottom-i.top,w=this.tree.items[R],I=null,N=null,A=null,x=null;if(0==y.vrt)A=s,(N=g)&&(I=N.getBoundingClientRect());else if(T){if(y.vrt>0){var F=O.getElementsByClassName("group--header"),D=F.length?F[0]:null;if(D){var k=D.getBoundingClientRect(),M=k.bottom-k.top;n.bottom-k.top>3*M/4&&w.top>e.itemInfo.top&&(A=w,I=k,N=D,j=!0)}}else y.vrt<0&&w.lev>=s.lev&&i.bottom-n.top>=2&&w.top<e.itemInfo.top&&(A=w,I=i,N=C,P=!0);(y.vrt<0?i.bottom-n.top>L-5:n.bottom-i.top>L-5)&&(j||P||(A=w,I=i,N=C),x=w)}else(y.vrt<0?i.bottom-n.top>L/2:n.bottom-i.top>L/2)&&(A=w,I=i,N=C);var V=A&&A.id==p;if(I){var U=n.left-u.left,q=(I.left,u.left,Math.max(0,Math.round(U/c))),W=[],G=[];if(V);else{if(T&&(P?W.push([m.PLACEMENT_APPEND,A,A.lev+1]):j&&W.push([m.PLACEMENT_PREPEND,A,A.lev+1]),x)){var B=0==x.lev,K="case_group"==x.type&&"case_group"!=s.type,z=x.prev&&this.tree.items[x.prev].caseId,H=x.next&&this.tree.items[x.next].caseId;s.caseId==z&&(z=null),s.caseId==H&&(H=null);var Y=z&&this.tree.items[z],$=H&&this.tree.items[H];y.vrt>0?B?G.push([m.PLACEMENT_APPEND,x,x.lev+1]):K&&$?G.push([m.PLACEMENT_PREPEND,$,$.lev+1]):G.push([m.PLACEMENT_AFTER,x,x.lev]):y.vrt<0&&(B?G.push([m.PLACEMENT_PREPEND,x,x.lev+1]):K&&Y?G.push([m.PLACEMENT_APPEND,Y,Y.lev+1]):G.push([m.PLACEMENT_BEFORE,x,x.lev]))}P||j||(y.vrt<0?W.push([m.PLACEMENT_BEFORE,A,A.lev]):y.vrt>0&&W.push([m.PLACEMENT_AFTER,A,A.lev]))}var J=function(e){var t=e[1],r=s.caseId?l.tree.items[s.caseId]:null,n=t.caseId?l.tree.items[t.caseId]:null;return[].concat((0,a.default)(e),[r,n])};W=W.map(J),G=G.map(J);var X=null,Q=(W=W.filter((function(e){var t=e[0],r=e[1];if((t==m.PLACEMENT_BEFORE||t==m.PLACEMENT_AFTER)&&null==r.parent)return!1;if(r.collapsed&&(t==m.PLACEMENT_APPEND||t==m.PLACEMENT_PREPEND))return!1;var n=r.id==s.id;if(!n)for(var o=r;o.parent;)if((o=l.tree.items[o.parent]).id==s.id){n=!0;break}return!n})).map((function(e){var t=e[0],r=e[1],n=(e[2],e[3],e[4],null);return(n=t==m.PLACEMENT_APPEND||t==m.PLACEMENT_PREPEND?r:l.tree.items[r.parent])&&null==n.parent&&(n=null),e[5]=n,e}))).filter((function(e){return l.canMove(s,e[1],e[0],e[3],e[4],e[5],r)}));0==Q.length&&G.length>0&&(Q=G.filter((function(e){return l.canMove(s,e[1],e[0],e[3],e[4],e[5],r)})));var Z=Q.map((function(e){return e[2]})),ee=s.lev,te=Z.concat(ee),re=null;-1!=te.indexOf(q)?re=q:q>Math.max.apply(Math,(0,a.default)(te))?re=Math.max.apply(Math,(0,a.default)(te)):q<Math.min.apply(Math,(0,a.default)(te))&&(re=Math.min.apply(Math,(0,a.default)(te))),X=Q.find((function(e){return e[2]==re})),V||X||!Q.length||(X=Q[0]),f=X}}}else h.logger.log("out of tree bounds!")}return!!f&&(this.move(s,f[1],f[0],f[3]),!0)}},{key:"canMove",value:function(e,t,r,n,o,i,a){if(!e||!t)return!1;if(e.id===t.id)return!1;var u=this.props.config.settings,l=u.canRegroup,s=u.canRegroupCases,c=u.maxNesting,f=u.maxNumberOfRules,d=u.canLeaveEmptyCase,p=i?i.lev+1:t.lev,v=r==m.PLACEMENT_BEFORE||r==m.PLACEMENT_AFTER,g=r==m.PLACEMENT_PREPEND||r==m.PLACEMENT_APPEND,h=v&&1==t.lev||g&&0==t.lev,y=e.parent!=t.parent,O=g||y,E="case_group"==e.type&&!h||"rule_group"==e.parentType||"rule_group"==t.type||"rule_group"==t.parentType||"case_group"!=e.type&&"case_group"==t.type&&v||"case_group"!=e.type&&"switch_group"==t.type||!s&&e.caseId!=t.caseId,b=t.isLocked||e.isLocked||i&&i.isLocked;if(c&&p>c)return!1;if(O&&(!l||E||b))return!1;if("case_group"!=e.type&&e.caseId!=t.caseId){var _=!!n&&2==n._height,S=o?o.leafsCount+1:0;if(f&&S>f)return!1;if(_&&!d)return!1}if("case_group"==e.type&&(e.isDefaultCase||t.isDefaultCase||"switch_group"==t.type&&r==m.PLACEMENT_APPEND))return!1;var T=!0;return a&&(T=a(e.node.toJS(),t.node.toJS(),r,i?i.node.toJS():null)),T}},{key:"move",value:function(e,r,n,o){this._isUsingLegacyReactDomRender||(t._isReorderingTree=R=!0),this.props.actions.moveItem(e.path,r.path,n)}},{key:"render",value:function(){return p.default.createElement(e,(0,i.default)({},this.props,{onDragStart:this.onDragStart}))}}]),E}(p.Component),r.propTypes={tree:E.default.any.isRequired,actions:E.default.object.isRequired},r}(e,r));return n.displayName="ConnectedSortableContainer",n}},4500:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,a,u=n(r(7487)),l=n(r(945)),s=n(r(5849)),c=n(r(4749)),f=n(r(6681)),d=n(r(9281)),p=n(r(4066)),v=n(r(2030)),g=n(r(5959)),h=n(r(7028)),y=n(r(7909)),m=n(r(1516)),O=r(7067),E=r(1868),b=r(9043),_=r(6871),S=n(r(7553));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=r(2584),P=(o=(0,m.default)("group case_group"),(0,y.default)(i=o(i=(0,_.ConfirmFn)(((a=function(e){(0,d.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,v.default)(t);if(r){var o=(0,v.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,p.default)(this,e)});function o(e){var t;return(0,l.default)(this,o),(t=n.call(this,e)).childrenClassName=function(){return"case_group--children"},t.renderFooterWrapper=function(){return null},(0,b.useOnPropsChanged)((0,c.default)(t)),t.onPropsChanged(e),t}return(0,s.default)(o,[{key:"onPropsChanged",value:function(e){}},{key:"isDefaultCase",value:function(){return null==this.props.children1}},{key:"reordableNodesCnt",value:function(){return this.props.parentReordableNodesCnt}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(e){return this.props.totalRulesCnt}},{key:"showDragIcon",value:function(){return!this.isDefaultCase()&&(0,f.default)((0,v.default)(o.prototype),"showDragIcon",this).call(this)}},{key:"renderHeaderWrapper",value:function(){return g.default.createElement("div",{key:"group-header",className:C("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",!this.showConjs()||this.isOneChild()&&!this.showNot()?"hide--conjs":"with--conjs")},this.renderHeaderLeft(),this.renderHeaderCenter(),this.renderActions())}},{key:"renderChildrenWrapper",value:function(){return this.isDefaultCase()?null:g.default.createElement("div",{className:"case_group--body"},this.renderCondition(),this.renderValue())}},{key:"renderHeaderLeft",value:function(){return this.isDefaultCase()?this.props.config.settings.defaultCaseLabel||"":g.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderCondition",value:function(){return this.isDefaultCase()?null:(0,f.default)((0,v.default)(o.prototype),"renderChildrenWrapper",this).call(this)}},{key:"renderHeaderCenter",value:function(){return this.isDefaultCase()?this.renderValue():null}},{key:"canAddGroup",value:function(){return!this.isDefaultCase()&&(0,f.default)((0,v.default)(o.prototype),"canAddGroup",this).call(this)}},{key:"canAddRule",value:function(){return!this.isDefaultCase()&&(0,f.default)((0,v.default)(o.prototype),"canAddRule",this).call(this)}},{key:"renderValue",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=e.value,o=e.setValue,i=e.id,a=t.settings.immutableValuesMode,u=g.default.createElement(S.default,{key:"values",isCaseValue:!0,field:"!case_value",operator:null,value:n,valueSrc:"value",valueError:null,config:t,setValue:a?_.dummyFn:o,setValueSrc:_.dummyFn,readonly:a||r,id:i,groupId:null});return g.default.createElement(_.Col,{className:"case_group--value"},u)}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addGroup,n=e.addRule,o=e.isLocked,i=e.isTrueLocked,a=e.id;return g.default.createElement(E.GroupActions,{config:t,addGroup:r,addRule:n,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:i,id:a})}},{key:"isEmptyCurrentGroup",value:function(){var e=this.props.value,t=e&&e.size?e.get(0):null,r=null!=t&&(!Array.isArray(t)||t.length>0);return(0,f.default)((0,v.default)(o.prototype),"isEmptyCurrentGroup",this).call(this)&&!r}}]),o}(O.BasicGroup)).propTypes=R(R({},O.BasicGroup.propTypes),{},{parentReordableNodesCnt:h.default.number,value:h.default.any,setValue:h.default.func}),i=a))||i)||i)||i);t.default=P},7067:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BasicGroup=void 0;var i=n(r(9252)),a=n(r(7487)),u=n(r(945)),l=n(r(5849)),s=n(r(4749)),c=n(r(9281)),f=n(r(4066)),d=n(r(2030)),p=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),v=n(r(7028)),g=n(r(3547)),h=n(r(7909)),y=n(r(1516)),m=r(7217),O=r(1868),E=r(6871);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=r(2584),R=function(e){(0,c.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.default)(t);if(r){var o=(0,d.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,f.default)(this,e)});function o(e){var t;return(0,u.default)(this,o),(t=n.call(this,e)).childrenClassName=function(){return""},t.renderBeforeActions=function(){var e=t.props.config.settings.renderBeforeActions;return null==e?null:"function"==typeof e?p.default.createElement(e,t.props):e},t.renderAfterActions=function(){var e=t.props.config.settings.renderAfterActions;return null==e?null:"function"==typeof e?p.default.createElement(e,t.props):e},t.removeSelf=t.removeSelf.bind((0,s.default)(t)),t.setLock=t.setLock.bind((0,s.default)(t)),t.renderItem=t.renderItem.bind((0,s.default)(t)),t}return(0,l.default)(o,[{key:"isGroupTopPosition",value:function(){return(0,g.default)(this.props.config.settings.groupActionsPosition||"topRight","top")}},{key:"setLock",value:function(e){this.props.setLock(e)}},{key:"removeSelf",value:function(){var e=this,t=this.props.confirmFn,r=this.props.config.settings,n=r.renderConfirm,o=r.removeGroupConfirmOptions,i=function(){e.props.removeSelf()};o&&!this.isEmptyCurrentGroup()?n(S(S({},o),{},{onOk:i,onCancel:null,confirmFn:t})):i()}},{key:"isEmptyCurrentGroup",value:function(){var e=this.props.children1;return!e||0==e.size||1==e.size&&this.isEmpty(e.first())}},{key:"isEmpty",value:function(e){return"group"==e.get("type")||"rule_group"==e.get("type")?this.isEmptyGroup(e):this.isEmptyRule(e)}},{key:"isEmptyGroup",value:function(e){var t=e.get("children1");return!t||0==t.size||1==t.size&&this.isEmpty(t.first())}},{key:"isEmptyRule",value:function(e){var t=e.get("properties");return!(null!==t.get("field")&&null!==t.get("operator")&&t.get("value").filter((function(e){return void 0!==e})).size>0)}},{key:"render",value:function(){return p.default.createElement(p.default.Fragment,null,this.renderHeaderWrapper(),this.renderChildrenWrapper(),this.renderFooterWrapper())}},{key:"showNot",value:function(){return this.props.config.settings.showNot}},{key:"showConjs",value:function(){var e=this.props,t=e.conjunctionOptions;return e.children1,e.config,Object.keys(t).length>1||this.showNot()}},{key:"isOneChild",value:function(){var e=this.props.children1;return!e||e.size<2}},{key:"renderChildrenWrapper",value:function(){return this.props.children1&&p.default.createElement("div",{key:"group-children",className:T("group--children",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isOneChild()?"one--child":"",this.childrenClassName())},this.renderChildren())}},{key:"renderHeaderWrapper",value:function(){var e=this.isGroupTopPosition();return p.default.createElement("div",{key:"group-header",className:T("group--header",this.isOneChild()?"one--child":"")},this.renderHeader(),e&&this.renderBeforeActions(),e&&this.renderActions(),e&&this.renderAfterActions())}},{key:"renderFooterWrapper",value:function(){return!this.isGroupTopPosition()&&p.default.createElement("div",{key:"group-footer",className:"group--footer"},this.renderBeforeActions(),this.renderActions(),this.renderAfterActions())}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.addGroup,o=e.isLocked,i=e.isTrueLocked,a=e.id;return p.default.createElement(O.GroupActions,{config:t,addRule:r,addGroup:n,canAddGroup:this.canAddGroup(),canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:i,id:a})}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var e=this.props.config.settings.maxNumberOfRules,t=this.props.totalRulesCnt;return!e||t<e}},{key:"canDeleteGroup",value:function(){return!this.props.isRoot}},{key:"renderChildren",value:function(){var e=this.props.children1;return e?e.map(this.renderItem).toList():null}},{key:"renderItem",value:function(e){var t=this.props,r=t.config,n=t.actions,o=t.onDragStart,a=t.isLocked,u="group"==e.get("type")&&null!=e.getIn(["properties","field"])?"rule_group":e.get("type");return p.default.createElement(m.Item,(0,i.default)({},this.extraPropsForItem(e),{key:e.get("id"),id:e.get("id"),groupId:t.id,path:e.get("path"),type:u,properties:e.get("properties"),config:r,actions:n,children1:e.get("children1"),reordableNodesCnt:this.reordableNodesCntForItem(e),totalRulesCnt:this.totalRulesCntForItem(e),parentReordableNodesCnt:this.reordableNodesCnt(),onDragStart:o,isDraggingTempo:this.props.isDraggingTempo,isParentLocked:a}))}},{key:"extraPropsForItem",value:function(e){return{}}},{key:"reordableNodesCnt",value:function(){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(e){return this.props.totalRulesCnt}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.reordableNodesCnt()}},{key:"showDragIcon",value:function(){var e=this.props,t=e.config,r=e.isRoot,n=e.isLocked,o=this.reordableNodesCnt();return t.settings.canReorder&&!r&&o>1&&!n}},{key:"renderDrag",value:function(){var e=this.props.handleDraggerMouseDown;return this.showDragIcon()&&p.default.createElement("span",{key:"group-drag-icon",className:"qb-drag-handler group--drag-handler",onMouseDown:e},p.default.createElement(E.DragIcon,null)," ")}},{key:"conjunctionOptions",value:function(){return this.props.conjunctionOptions}},{key:"renderConjs",value:function(){var e=this.props,t=e.config,r=e.children1,n=e.id,o=e.selectedConjunction,i=e.setConjunction,a=e.not,u=e.setNot,l=e.isLocked,s=t.settings,c=s.immutableGroupsMode,f=s.renderConjs,d=(s.showNot,s.notLabel),v=this.conjunctionOptions();if(!this.showConjs())return null;if(!r||!r.size)return null;var g={disabled:this.isOneChild(),readonly:c||l,selectedConjunction:o,setConjunction:c?E.dummyFn:i,conjunctionOptions:v,config:t,not:a||!1,id:n,setNot:c?E.dummyFn:u,notLabel:d,showNot:this.showNot(),isLocked:l};return p.default.createElement(f,g)}},{key:"renderHeader",value:function(){return p.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}}]),o}(p.PureComponent);t.BasicGroup=R,R.propTypes={reordableNodesCnt:v.default.number,conjunctionOptions:v.default.object.isRequired,allowFurtherNesting:v.default.bool.isRequired,isRoot:v.default.bool.isRequired,not:v.default.bool,selectedConjunction:v.default.string,config:v.default.object.isRequired,id:v.default.string.isRequired,groupId:v.default.string,path:v.default.any,children1:v.default.any,isDraggingMe:v.default.bool,isDraggingTempo:v.default.bool,isLocked:v.default.bool,isTrueLocked:v.default.bool,handleDraggerMouseDown:v.default.func,onDragStart:v.default.func,addRule:v.default.func.isRequired,addGroup:v.default.func.isRequired,removeSelf:v.default.func.isRequired,setConjunction:v.default.func.isRequired,setNot:v.default.func.isRequired,setLock:v.default.func.isRequired,actions:v.default.object.isRequired};var C=(0,h.default)((0,y.default)("group")((0,E.ConfirmFn)(R)));t.default=C},1868:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupActions=void 0;var i=n(r(945)),a=n(r(5849)),u=n(r(9281)),l=n(r(4066)),s=n(r(2030)),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var d={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},p=function(e){(0,u.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,s.default)(t);if(r){var o=(0,s.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,l.default)(this,e)});function o(){return(0,i.default)(this,o),n.apply(this,arguments)}return(0,a.default)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.addGroup,o=e.removeSelf,i=e.setLock,a=e.isLocked,u=e.isTrueLocked,l=e.id,s=e.canAddGroup,f=e.canAddRule,p=e.canDeleteGroup,v=t.settings,g=v.immutableGroupsMode,h=v.addRuleLabel,y=v.addGroupLabel,m=v.delGroupLabel,O=v.groupActionsPosition,E=v.renderButton,b=v.renderSwitch,_=v.renderButtonGroup,S=v.lockLabel,T=v.lockedLabel,R=v.showLock,C=v.canDeleteLocked,P=d[O||"topRight"],j=R&&!(a&&!u)&&c.default.createElement(b,{type:"lock",id:l,value:a,setValue:i,label:S,checkedLabel:T,config:t}),L=!g&&f&&!a&&c.default.createElement(E,{type:"addRule",onClick:r,label:h,readonly:a,config:t}),w=!g&&s&&!a&&c.default.createElement(E,{type:"addGroup",onClick:n,label:y,readonly:a,config:t}),I=!g&&p&&(!a||a&&C)&&c.default.createElement(E,{type:"delGroup",onClick:o,label:m,config:t});return c.default.createElement("div",{className:"group--actions ".concat(P)},c.default.createElement(_,{config:t},j,L,w,I))}}]),o}(c.PureComponent);t.GroupActions=p},7217:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.Item=void 0;var i=n(r(9473)),a=n(r(945)),u=n(r(5849)),l=n(r(9281)),s=n(r(4066)),c=n(r(2030)),f=n(r(9252)),d=n(r(7487)),p=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),v=n(r(7028)),g=n(r(1608)),h=n(r(7067)),y=n(r(8106)),m=n(r(7650)),O=n(r(6975)),E=n(r(4500)),b=["type"];function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=function(e){var t=e.properties.toObject(),r=T({},t);return e.isParentLocked&&(r.isLocked=!0),t.isLocked&&(r.isTrueLocked=!0),r},C={rule:function(e){return p.default.createElement(g.default,(0,f.default)({},R(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,config:e.config,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},group:function(e){return p.default.createElement(h.default,(0,f.default)({},R(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))},rule_group:function(e){return p.default.createElement(y.default,(0,f.default)({},R(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},rule_group_ext:function(e){return p.default.createElement(m.default,(0,f.default)({},R(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},switch_group:function(e){return p.default.createElement(O.default,(0,f.default)({},R(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))},case_group:function(e){return p.default.createElement(E.default,(0,f.default)({},R(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))}},P=function(e){(0,l.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.default)(t);if(r){var o=(0,c.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,s.default)(this,e)});function o(){return(0,a.default)(this,o),n.apply(this,arguments)}return(0,u.default)(o,[{key:"render",value:function(){var e=this.props,t=e.type,r=(0,i.default)(e,b),n="array"==r.properties.get("mode")?"_ext":"",o=r.config.settings.renderItem,a=C[t+n];return o?o(T(T({},r),{},{type:t,itemComponent:a})):a?a(r):null}}]),o}(p.PureComponent);t.Item=P,P.propTypes={config:v.default.object.isRequired,id:v.default.string.isRequired,groupId:v.default.string,type:v.default.oneOf(["rule","group","rule_group","switch_group","case_group"]).isRequired,path:v.default.any.isRequired,properties:v.default.any.isRequired,children1:v.default.any,actions:v.default.object.isRequired,reordableNodesCnt:v.default.number,onDragStart:v.default.func,parentField:v.default.string,isDraggingTempo:v.default.bool,isParentLocked:v.default.bool}},1608:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a,u,l=n(r(7487)),s=n(r(945)),c=n(r(5849)),f=n(r(4749)),d=n(r(9281)),p=n(r(4066)),v=n(r(2030)),g=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),h=n(r(7028)),y=n(r(7498)),m=n(r(1516)),O=n(r(9390)),E=n(r(346)),b=n(r(7553)),_=n(r(9995)),S=r(7100),T=r(1820),R=r(9043),C=r(6871);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=r(2584),I=(i=(0,m.default)("rule"),(0,y.default)(a=i(a=(0,C.ConfirmFn)(((u=function(e){(0,d.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,v.default)(t);if(r){var o=(0,v.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,p.default)(this,e)});function o(e){var t;return(0,s.default)(this,o),t=n.call(this,e),(0,R.useOnPropsChanged)((0,f.default)(t)),t.removeSelf=t.removeSelf.bind((0,f.default)(t)),t.setLock=t.setLock.bind((0,f.default)(t)),t.onPropsChanged(e),t}return(0,c.default)(o,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["selectedField","selectedOperator","config","reordableNodesCnt","isLocked"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.selectedField,r=e.selectedOperator,n=e.config,o=e.reordableNodesCnt,i=e.isLocked,a=(0,T.getFieldPathLabels)(t,n),u=(0,S.getFieldConfig)(n,t),l=u&&"!struct"==u.type,s=t&&r&&!l,c=(0,S.getOperatorConfig)(n,r,t),f=c&&null!=c.options,d=(0,S.getFieldWidgetConfig)(n,t,r)||{},p=d.hideOperator;return{selectedFieldPartsLabels:a,selectedFieldWidgetConfig:d,showDragIcon:n.settings.canReorder&&o>1&&!i,showOperator:t&&!p,showOperatorLabel:t&&p&&d.operatorInlineLabel,showWidget:s,showOperatorOptions:s&&f}}},{key:"setLock",value:function(e){this.props.setLock(e)}},{key:"removeSelf",value:function(){var e=this,t=this.props.confirmFn,r=this.props.config.settings,n=r.renderConfirm,o=r.removeRuleConfirmOptions,i=function(){e.props.removeSelf()};o&&!this.isEmptyCurrentRule()?n(L(L({},o),{},{onOk:i,onCancel:null,confirmFn:t})):i()}},{key:"isEmptyCurrentRule",value:function(){return!(null!==this.props.selectedField&&null!==this.props.selectedOperator&&this.props.value.filter((function(e){return void 0!==e})).size>0)}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=t.settings.immutableFieldsMode;return g.default.createElement(E.default,{key:"field",classname:"rule--field",config:t,selectedField:this.props.selectedField,setField:n?C.dummyFn:this.props.setField,parentField:this.props.parentField,readonly:n||r,id:this.props.id,groupId:this.props.groupId})}},{key:"renderOperator",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=this.meta,o=n.selectedFieldPartsLabels,i=n.selectedFieldWidgetConfig,a=n.showOperator,u=n.showOperatorLabel,l=t.settings.immutableOpsMode;return g.default.createElement(O.default,{key:"operator",config:t,selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,setOperator:l?C.dummyFn:this.props.setOperator,selectedFieldPartsLabels:o,showOperator:a,showOperatorLabel:u,selectedFieldWidgetConfig:i,readonly:l||r,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var e=this.props,t=e.config,r=e.valueError,n=e.isLocked,o=this.meta.showWidget,i=t.settings.immutableValuesMode;if(!o)return null;var a=g.default.createElement(b.default,{key:"values",field:this.props.selectedField,parentField:this.props.parentField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:this.props.valueSrc,asyncListValues:this.props.asyncListValues,valueError:r,config:t,setValue:i?C.dummyFn:this.props.setValue,setValueSrc:i?C.dummyFn:this.props.setValueSrc,readonly:i||n,id:this.props.id,groupId:this.props.groupId});return g.default.createElement(C.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},a)}},{key:"renderOperatorOptions",value:function(){var e=this.props.config,t=this.meta.showOperatorOptions,r=e.settings,n=r.immutableOpsMode,o=r.immutableValuesMode;if(!t)return null;var i=g.default.createElement(_.default,{key:"operatorOptions",selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,operatorOptions:this.props.operatorOptions,setOperatorOption:n?C.dummyFn:this.props.setOperatorOption,config:e,readonly:o});return g.default.createElement(C.Col,{key:"op-options-for-"+this.props.selectedOperator,className:"rule--operator-options"},i)}},{key:"renderBeforeWidget",value:function(){var e=this.props.config.settings.renderBeforeWidget;return e&&g.default.createElement(C.Col,{key:"before-widget-for-"+this.props.selectedOperator,className:"rule--before-widget"},"function"==typeof e?e(this.props):e)}},{key:"renderAfterWidget",value:function(){var e=this.props.config.settings.renderAfterWidget;return e&&g.default.createElement(C.Col,{key:"after-widget-for-"+this.props.selectedOperator,className:"rule--after-widget"},"function"==typeof e?e(this.props):e)}},{key:"renderError",value:function(){var e=this.props,t=e.config,r=e.valueError,n=t.settings,o=n.renderRuleError,i=n.showErrorMessage,a=r&&r.toArray().filter((function(e){return!!e})).shift()||null;return i&&a&&g.default.createElement("div",{className:"rule--error"},o?o({error:a}):a)}},{key:"renderDrag",value:function(){return this.meta.showDragIcon&&g.default.createElement("span",{key:"rule-drag-icon",className:"qb-drag-handler rule--drag-handler",onMouseDown:this.props.handleDraggerMouseDown},g.default.createElement(C.DragIcon,null)," ")}},{key:"renderDel",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=t.settings,o=n.deleteLabel,i=n.immutableGroupsMode,a=n.renderButton,u=n.canDeleteLocked;return!i&&(!r||r&&u)&&g.default.createElement(a,{type:"delRule",onClick:this.removeSelf,label:o,config:t})}},{key:"renderLock",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=e.isTrueLocked,o=e.id,i=t.settings,a=i.lockLabel,u=i.lockedLabel,l=i.showLock,s=i.renderSwitch;return l&&!(r&&!n)&&g.default.createElement(s,{type:"lock",id:o,value:r,setValue:this.setLock,label:a,checkedLabel:u,hideLabel:!0,config:t})}},{key:"render",value:function(){var e=this.meta,t=e.showOperatorOptions,r=e.selectedFieldWidgetConfig,n=this.props,o=n.valueSrc,i=n.value,a=n.config,u="value"==o.first()&&!t&&1==i.size&&r.fullWidth,l=a.settings.renderButtonGroup,s=[this.renderField(),this.renderOperator(),this.renderBeforeWidget(),this.renderWidget(),this.renderAfterWidget(),this.renderOperatorOptions()],c=g.default.createElement("div",{key:"rule-body",className:w("rule--body",u&&"can--shrink--value")},s),f=this.renderError(),d=this.renderDrag(),p=this.renderLock(),v=this.renderDel();return g.default.createElement(g.default.Fragment,null,d,g.default.createElement("div",{className:"rule--body--wrapper"},c,f),g.default.createElement("div",{className:"rule--header"},g.default.createElement(l,{config:a},p,v)))}}]),o}(g.PureComponent)).propTypes={id:h.default.string.isRequired,groupId:h.default.string,selectedField:h.default.string,selectedOperator:h.default.string,operatorOptions:h.default.object,config:h.default.object.isRequired,value:h.default.any,valueSrc:h.default.any,asyncListValues:h.default.array,isDraggingMe:h.default.bool,isDraggingTempo:h.default.bool,parentField:h.default.string,valueError:h.default.any,isLocked:h.default.bool,isTrueLocked:h.default.bool,handleDraggerMouseDown:h.default.func,setField:h.default.func,setOperator:h.default.func,setOperatorOption:h.default.func,setLock:h.default.func,removeSelf:h.default.func,setValue:h.default.func,setValueSrc:h.default.func,reordableNodesCnt:h.default.number},a=u))||a)||a)||a);t.default=I},8106:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,a,u=n(r(7487)),l=n(r(945)),s=n(r(5849)),c=n(r(4749)),f=n(r(6681)),d=n(r(9281)),p=n(r(4066)),v=n(r(2030)),g=n(r(5959)),h=n(r(7028)),y=n(r(7909)),m=n(r(1516)),O=r(7067),E=r(7370),b=n(r(346)),_=r(9043),S=r(6871);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=(o=(0,m.default)("group rule_group"),(0,y.default)(i=o(i=(0,S.ConfirmFn)(((a=function(e){(0,d.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,v.default)(t);if(r){var o=(0,v.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,p.default)(this,e)});function o(e){var t;return(0,l.default)(this,o),(t=n.call(this,e)).childrenClassName=function(){return"rule_group--children"},t.renderHeaderWrapper=function(){return null},t.renderFooterWrapper=function(){return null},t.renderConjs=function(){return null},t.canAddGroup=function(){return!1},t.canAddRule=function(){return!0},t.canDeleteGroup=function(){return!1},(0,_.useOnPropsChanged)((0,c.default)(t)),t.onPropsChanged(e),t}return(0,s.default)(o,[{key:"onPropsChanged",value:function(e){}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.props.children1.size}},{key:"renderChildrenWrapper",value:function(){return g.default.createElement(g.default.Fragment,null,this.renderDrag(),this.renderField(),this.renderActions(),(0,f.default)((0,v.default)(o.prototype),"renderChildrenWrapper",this).call(this))}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.setField,o=e.parentField,i=e.id,a=e.groupId,u=e.isLocked,l=t.settings.immutableFieldsMode;return g.default.createElement(b.default,{key:"field",classname:"group--field",config:t,selectedField:r,setField:n,parentField:o,readonly:l||u,id:i,groupId:a})}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.isLocked,o=e.isTrueLocked,i=e.id;return g.default.createElement(E.RuleGroupActions,{config:t,addRule:r,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:n,isTrueLocked:o,id:i})}},{key:"extraPropsForItem",value:function(e){return{parentField:this.props.selectedField}}}]),o}(O.BasicGroup)).propTypes=R(R({},O.BasicGroup.propTypes),{},{selectedField:h.default.string,parentField:h.default.string,setField:h.default.func}),i=a))||i)||i)||i);t.default=C},7370:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.RuleGroupActions=void 0;var i=n(r(945)),a=n(r(5849)),u=n(r(9281)),l=n(r(4066)),s=n(r(2030)),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var d=function(e){(0,u.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,s.default)(t);if(r){var o=(0,s.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,l.default)(this,e)});function o(){return(0,i.default)(this,o),n.apply(this,arguments)}return(0,a.default)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.canAddRule,o=e.canDeleteGroup,i=e.removeSelf,a=e.setLock,u=e.isLocked,l=e.isTrueLocked,s=e.id,f=t.settings,d=f.immutableGroupsMode,p=f.addRuleLabel,v=f.delGroupLabel,g=f.renderButton,h=f.renderSwitch,y=f.renderButtonGroup,m=f.lockLabel,O=f.lockedLabel,E=f.showLock,b=f.canDeleteLocked,_=E&&!(u&&!l)&&c.default.createElement(h,{type:"lock",id:s,value:u,setValue:a,label:m,checkedLabel:O,hideLabel:!0,config:t}),S=!d&&n&&!u&&c.default.createElement(g,{type:"addRuleGroup",onClick:r,label:p,readonly:u,config:t}),T=!d&&o&&(!u||u&&b)&&c.default.createElement(g,{type:"delRuleGroup",onClick:i,label:v,config:t});return c.default.createElement("div",{className:"group--actions"},c.default.createElement(y,{config:t},_,S,T))}}]),o}(c.PureComponent);t.RuleGroupActions=d},7650:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,a,u=n(r(7487)),l=n(r(945)),s=n(r(5849)),c=n(r(4749)),f=n(r(6681)),d=n(r(9281)),p=n(r(4066)),v=n(r(2030)),g=n(r(5959)),h=n(r(7028)),y=n(r(7909)),m=n(r(1516)),O=r(7067),E=r(2151),b=n(r(346)),_=n(r(9390)),S=r(9043),T=r(6871),R=r(7100),C=n(r(7553));function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=r(2584),I=(o=(0,m.default)("group rule_group_ext"),(0,y.default)(i=o(i=(0,T.ConfirmFn)(((a=function(e){(0,d.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,v.default)(t);if(r){var o=(0,v.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,p.default)(this,e)});function o(e){var t;return(0,l.default)(this,o),(t=n.call(this,e)).childrenClassName=function(){return"rule_group_ext--children"},t.renderFooterWrapper=function(){return null},t.canAddGroup=function(){return!1},t.canAddRule=function(){return!0},t.canDeleteGroup=function(){return!0},(0,S.useOnPropsChanged)((0,c.default)(t)),t.onPropsChanged(e),t}return(0,s.default)(o,[{key:"onPropsChanged",value:function(e){}},{key:"renderHeaderWrapper",value:function(){return g.default.createElement("div",{key:"group-header",className:w("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",!this.showConjs()||this.isOneChild()&&!this.showNot()?"hide--conjs":"with--conjs")},this.renderHeader(),this.renderGroupField(),this.renderActions())}},{key:"renderHeader",value:function(){return g.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderGroupField",value:function(){return g.default.createElement("div",{className:"group--field--count--rule"},this.renderField(),this.renderOperator(),this.renderWidget())}},{key:"showNot",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=(e.selectedOperator,(0,R.getFieldConfig)(t,r)||{});return null!=n.showNot?n.showNot:t.settings.showNot}},{key:"conjunctionOptions",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=(e.selectedOperator,(0,R.getFieldConfig)(t,r)||{}),i=(0,f.default)((0,v.default)(o.prototype),"conjunctionOptions",this).call(this);if(n.conjunctions){var a,u={},l=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(n.conjunctions);try{for(l.s();!(a=l.n()).done;){var s=a.value;u[s]=i[s]}}catch(e){l.e(e)}finally{l.f()}i=u}return i}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.setField,o=e.parentField,i=e.id,a=e.groupId,u=e.isLocked,l=t.settings.immutableFieldsMode;return g.default.createElement(b.default,{key:"field",classname:"rule--field",config:t,selectedField:r,setField:n,parentField:o,readonly:l||u,id:i,groupId:a})}},{key:"renderOperator",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedOperator,o=e.setField,i=e.setOperator,a=e.isLocked,u=t.settings.immutableFieldsMode,l=(0,R.getFieldWidgetConfig)(t,r,n)||{},s=l.hideOperator,c=r&&s&&l.operatorInlineLabel,f=r&&!s;return g.default.createElement(_.default,{key:"operator",classname:"group--operator",config:t,selectedField:r,selectedOperator:n,setField:o,setOperator:i,selectedFieldPartsLabels:["group"],showOperator:f,showOperatorLabel:c,selectedFieldWidgetConfig:l,readonly:u||a,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedOperator,o=e.isLocked,i=t.settings.immutableValuesMode;if(!r||!n)return null;var a=g.default.createElement(C.default,{key:"values",isForRuleGruop:!0,field:this.props.selectedField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:"value",valueError:null,config:t,setValue:i?T.dummyFn:this.props.setValue,setValueSrc:T.dummyFn,readonly:i||o,id:this.props.id,groupId:this.props.groupId});return g.default.createElement(T.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},a)}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.isLocked,o=e.isTrueLocked,i=e.id;return g.default.createElement(E.RuleGroupExtActions,{config:t,addRule:r,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:n,isTrueLocked:o,id:i})}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.props.children1.size}},{key:"extraPropsForItem",value:function(e){return{parentField:this.props.selectedField}}}]),o}(O.BasicGroup)).propTypes=j(j({},O.BasicGroup.propTypes),{},{selectedField:h.default.string,selectedOperator:h.default.string,value:h.default.any,parentField:h.default.string,setField:h.default.func,setOperator:h.default.func,setValue:h.default.func}),i=a))||i)||i)||i);t.default=I},2151:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.RuleGroupExtActions=void 0;var i=n(r(945)),a=n(r(5849)),u=n(r(9281)),l=n(r(4066)),s=n(r(2030)),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var d=function(e){(0,u.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,s.default)(t);if(r){var o=(0,s.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,l.default)(this,e)});function o(){return(0,i.default)(this,o),n.apply(this,arguments)}return(0,a.default)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.canAddRule,o=e.canDeleteGroup,i=e.removeSelf,a=e.setLock,u=e.isLocked,l=e.isTrueLocked,s=e.id,f=t.settings,d=f.immutableGroupsMode,p=f.addSubRuleLabel,v=f.delGroupLabel,g=f.renderButton,h=f.renderSwitch,y=f.renderButtonGroup,m=f.lockLabel,O=f.lockedLabel,E=f.showLock,b=f.canDeleteLocked,_=E&&!(u&&!l)&&c.default.createElement(h,{type:"lock",id:s,value:u,setValue:a,label:m,checkedLabel:O,config:t}),S=!d&&n&&!u&&c.default.createElement(g,{type:"addRuleGroupExt",onClick:r,label:p,readonly:u,config:t}),T=!d&&o&&(!u||u&&b)&&c.default.createElement(g,{type:"delRuleGroup",onClick:i,label:v,config:t});return c.default.createElement("div",{className:"group--actions group--actions--tr"},c.default.createElement(y,{config:t},_,S,T))}}]),o}(c.PureComponent);t.RuleGroupExtActions=d},6975:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,a,u=n(r(7487)),l=n(r(945)),s=n(r(5849)),c=n(r(4749)),f=n(r(9281)),d=n(r(4066)),p=n(r(2030)),v=n(r(5959)),g=(n(r(7028)),n(r(7909))),h=n(r(1516)),y=r(7067),m=r(7040),O=r(9043),E=r(6871),b=r(8178);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var S=r(2584),T=(o=(0,h.default)("group switch_group"),(0,g.default)(i=o(i=(0,E.ConfirmFn)(((a=function(e){(0,f.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.default)(t);if(r){var o=(0,p.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,d.default)(this,e)});function o(e){var t;return(0,l.default)(this,o),(t=n.call(this,e)).childrenClassName=function(){return"switch_group--children"},t.renderFooterWrapper=function(){return null},t.hasDefaultCase=function(){return t.props.children1.size&&t.props.children1.filter((function(e){return null==e.get("children1")})).size>0},(0,O.useOnPropsChanged)((0,c.default)(t)),t.onPropsChanged(e),t}return(0,s.default)(o,[{key:"onPropsChanged",value:function(e){}},{key:"canAddGroup",value:function(){var e=this.props.config.settings.maxNumberOfCases,t=this.props.children1.size;return!e||t<e}},{key:"canAddRule",value:function(){return!1}},{key:"reordableNodesCnt",value:function(){var e=this.props.children1.size;return this.hasDefaultCase()&&e--,e}},{key:"totalRulesCntForItem",value:function(e){return(0,b.getTotalRulesCountInTree)(e)}},{key:"reordableNodesCntForItem",value:function(e){if(this.props.isLocked)return 0;var t=this.props.config.settings,r=t.canLeaveEmptyCase,n=t.canRegroupCases,o=this.props.children1.size;this.hasDefaultCase()&&o--;var i=(0,b.getTotalReordableNodesCountInTree)(e);return 1==i&&n&&r&&o>1&&(i=111),i}},{key:"renderHeaderWrapper",value:function(){return v.default.createElement("div",{key:"group-header",className:S("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",!this.showConjs()||this.isOneChild()&&!this.showNot()?"hide--conjs":"with--conjs")},this.renderHeader(),this.renderActions())}},{key:"renderHeader",value:function(){return v.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderConjs",value:function(){var e=this.props.config.settings.renderSwitchPrefix;return e?e():null}},{key:"showNot",value:function(){return!1}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addCaseGroup,n=e.addDefaultCaseGroup,o=e.isLocked,i=e.isTrueLocked,a=e.id;return v.default.createElement(m.SwitchGroupActions,{config:t,addCaseGroup:r,addDefaultCaseGroup:n,canAddDefault:!this.hasDefaultCase(),canAddGroup:this.canAddGroup(),setLock:this.setLock,isLocked:o,isTrueLocked:i,id:a})}}]),o}(y.BasicGroup)).propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},y.BasicGroup.propTypes),i=a))||i)||i)||i);t.default=T},7040:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchGroupActions=void 0;var i=n(r(945)),a=n(r(5849)),u=n(r(9281)),l=n(r(4066)),s=n(r(2030)),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var d={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},p=function(e){(0,u.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,s.default)(t);if(r){var o=(0,s.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,l.default)(this,e)});function o(){return(0,i.default)(this,o),n.apply(this,arguments)}return(0,a.default)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addCaseGroup,n=e.addDefaultCaseGroup,o=e.setLock,i=e.isLocked,a=e.isTrueLocked,u=e.id,l=e.canAddGroup,s=e.canAddDefault,f=t.settings,p=f.immutableGroupsMode,v=f.addCaseLabel,g=f.addDefaultCaseLabel,h=f.groupActionsPosition,y=f.renderButton,m=f.renderSwitch,O=f.renderButtonGroup,E=f.lockLabel,b=f.lockedLabel,_=f.showLock,S=d[h||"topRight"],T=_&&!(i&&!a)&&c.default.createElement(m,{type:"lock",id:u,value:i,setValue:o,label:E,checkedLabel:b,config:t}),R=!p&&l&&!i&&c.default.createElement(y,{type:"addCaseGroup",onClick:r,label:v,readonly:i,config:t}),C=!p&&s&&!i&&c.default.createElement(y,{type:"addDefaultCaseGroup",onClick:n,label:g,readonly:i,config:t});return c.default.createElement("div",{className:"group--actions ".concat(S)},c.default.createElement(O,{config:t},T,R,C))}}]),o}(c.PureComponent);t.SwitchGroupActions=p},7905:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(9252)),a=n(r(945)),u=n(r(5849)),l=n(r(9281)),s=n(r(4066)),c=n(r(2030)),f=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),d=n(r(7028)),p=n(r(2285));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}var g=function(e){(0,l.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.default)(t);if(r){var o=(0,c.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,s.default)(this,e)});function o(){var e;(0,a.default)(this,o);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).handleChange=function(t){e.props.setOption("proximity",parseInt(t))},e}return(0,u.default)(o,[{key:"render",value:function(){var e=this.props,t=e.defaults,r=e.options,n=e.config,o=e.optionLabel,a=e.optionPlaceholder,u=e.customProps,l=e.minProximity,s=e.maxProximity,c=e.optionTextBefore,d=e.readonly,v=n.settings,g=n.widgets,h=t?t.proximity:void 0,y=v.showLabels,m=r.get("proximity",h),O=(0,p.default)(l,s+1).map((function(e){return{title:e,value:e}})),E=g.select.factory;return f.default.createElement("div",{className:"operator--PROXIMITY"},f.default.createElement("div",{className:"operator--options"},y&&f.default.createElement("label",{className:"rule--label"},o),!y&&c&&f.default.createElement("div",{className:"operator--options--sep"},f.default.createElement("span",null,c)),f.default.createElement(E,(0,i.default)({config:n,value:m,listValues:O,setValue:this.handleChange,readonly:d,placeholder:a},u))),f.default.createElement("div",{className:"operator--widgets"},this.props.children))}}]),o}(f.PureComponent);t.default=g,g.propTypes={config:d.default.object.isRequired,setOption:d.default.func.isRequired,options:d.default.any.isRequired,minProximity:d.default.number,maxProximity:d.default.number,optionPlaceholder:d.default.string,optionTextBefore:d.default.string,optionLabel:d.default.string,customProps:d.default.object,readonly:d.default.bool},g.defaultProps={customProps:{},minProximity:2,maxProximity:10,optionPlaceholder:"Select words between",optionLabel:"Words between",optionTextBefore:null}},7788:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ProximityOperator",{enumerable:!0,get:function(){return o.default}});var o=n(r(7905))},9865:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(7487)),a=n(r(945)),u=n(r(5849)),l=n(r(4749)),s=n(r(9281)),c=n(r(4066)),f=n(r(2030)),d=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),p=n(r(7028)),v=r(7100),g=r(1820),h=r(3585),y=r(9043),m=n(r(8906)),O=n(r(3790));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var _=function(e){(0,s.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(t);if(r){var o=(0,f.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,c.default)(this,e)});function o(e){var t;return(0,a.default)(this,o),t=n.call(this,e),(0,y.useOnPropsChanged)((0,l.default)(t)),t.onPropsChanged(e),t}return(0,u.default)(o,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["selectedField","config","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.selectedField,r=e.config,n=e.parentField,o=t,i=r.settings,a=i.maxLabelsLength,u=i.fieldSeparatorDisplay,l=i.fieldPlaceholder,s=i.fieldSeparator,c=!!t,f=c?null:(0,h.truncateString)(l,a),d=c?(0,v.getFieldConfig)(r,o):null,p=d||{},y=(0,g.getFieldPath)(o,r),m=(0,g.getFieldPath)(o,r,!0),O=this.getFieldLabel(d,o,r),E=(0,g.getFieldPathLabels)(o,r),b=E?E.join(u):null;(b==O||n)&&(b=null);var _=p.label2,S="string"==typeof n?n.split(s):n,T=n?(0,v.getFieldConfig)(r,n):null,R=n?T&&T.subfields:r.fields;return{placeholder:f,items:this.buildOptions(S,r,R,S),parentField:n,selectedKey:o,selectedKeys:y,selectedPath:m,selectedLabel:O,selectedOpts:p,selectedAltLabel:_,selectedFullLabel:b}}},{key:"getFieldLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.fieldSeparator,o=r.settings.maxLabelsLength,i=Array.isArray(t)?t:t.split(n),a=e&&e.label||(0,m.default)(i);return(0,h.truncateString)(a,o)}},{key:"buildOptions",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!r)return null;var a=t.settings,u=a.fieldSeparator,l=a.fieldSeparatorDisplay,s=o?o.join(u)+u:"";return(0,O.default)(r).map((function(a){var u=r[a],c=n.getFieldLabel(u,a,t),f=(0,g.getFieldPathLabels)(s+a,t).join(l);(f==c||e)&&(f=null);var d=u.label2,p=u.tooltip,v=(o||[]).concat(a),h=u.disabled;if(!u.hideForSelect)return"!struct"==u.type?{disabled:h,key:a,path:s+a,label:c,fullLabel:f,altLabel:d,tooltip:p,items:n.buildOptions(e,t,u.subfields,v,c)}:{disabled:h,key:a,path:s+a,label:c,fullLabel:f,altLabel:d,tooltip:p,grouplabel:i}})).filter((function(e){return!!e}))}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setField,o=e.readonly,a=e.id,u=e.groupId,l=t.settings.renderField,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:a,groupId:u,config:t,customProps:r,readonly:o,setField:n},this.meta);return l(s)}}]),o}(d.PureComponent);t.default=_,_.propTypes={id:p.default.string,groupId:p.default.string,config:p.default.object.isRequired,selectedField:p.default.string,parentField:p.default.string,customProps:p.default.object,readonly:p.default.bool,setField:p.default.func.isRequired}},346:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(945)),a=n(r(5849)),u=n(r(9281)),l=n(r(4066)),s=n(r(2030)),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),f=n(r(9865)),d=r(6871);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var v=function(e){(0,u.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,s.default)(t);if(r){var o=(0,s.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,l.default)(this,e)});function o(){return(0,i.default)(this,o),n.apply(this,arguments)}return(0,a.default)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.setField,o=e.parentField,i=e.classname,a=e.readonly,u=e.id,l=e.groupId;return c.default.createElement(d.Col,{className:i},t.settings.showLabels&&c.default.createElement("label",{className:"rule--label"},t.settings.fieldLabel),c.default.createElement(f.default,{config:t,selectedField:r,parentField:o,setField:n,customProps:t.settings.customFieldSelectProps,readonly:a,id:u,groupId:l}))}}]),o}(c.PureComponent);t.default=v},2027:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(7487)),a=n(r(7033)),u=n(r(945)),l=n(r(5849)),s=n(r(4749)),c=n(r(9281)),f=n(r(4066)),d=n(r(2030)),p=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),v=n(r(7028)),g=r(7100),h=r(1820),y=r(3585),m=r(9043),O=n(r(8906)),E=n(r(3790)),b=n(r(3523));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var T=function(e){(0,c.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.default)(t);if(r){var o=(0,d.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,f.default)(this,e)});function o(e){var t;return(0,u.default)(this,o),t=n.call(this,e),(0,m.useOnPropsChanged)((0,s.default)(t)),t.onPropsChanged(e),t}return(0,l.default)(o,[{key:"onPropsChanged",value:function(e){var t=this.props,r=!this.items||["config","field","operator","isFuncArg"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0;(!this.meta||["config","field","value"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e)),r&&(this.items=this.getItems(e))}},{key:"getItems",value:function(e){var t=e.config,r=e.field,n=e.operator,o=e.parentFuncs,i=e.fieldDefinition,a=e.isFuncArg,u=t.settings.canUseFuncForField,l=this.filterFuncs(t,t.funcs,r,n,u,o,a,i);return this.buildOptions(t,l)}},{key:"getMeta",value:function(e){var t=e.config,r=e.field,n=e.value,o=t.settings,i=o.funcPlaceholder,a=o.fieldSeparatorDisplay,u=n,l=!!n,s=(0,g.getFieldConfig)(t,r).widgets.field,c=(s&&s.widgetProps,l?null:i),f=l?(0,g.getFuncConfig)(t,u):null,d=f||{},p=(0,h.getFieldPath)(u,t),v=(0,h.getFieldPath)(u,t,!0),y=this.getFuncLabel(f,u,t),m=(0,h.getFuncPathLabels)(u,t),O=m?m.join(a):null;return O==y&&(O=null),{placeholder:c,selectedKey:u,selectedKeys:p,selectedPath:v,selectedLabel:y,selectedOpts:d,selectedFullLabel:O}}},{key:"filterFuncs",value:function(e,t,r,n,o,i,u,l){t=(0,b.default)(t);var s,c=e.settings.fieldSeparator,f=(0,g.getFieldConfig)(e,r),d=f,p=(0,h.getWidgetForFieldOp)(e,r,n,"value");if(u&&l)d=l,s=l.type;else if(p){var v=e.widgets[p].type;s=v}else s=f.type;return function t(u,l){for(var p in u){var v=u[p].subfields,h=(l||[]).concat(p),y=h.join(c),m=(0,g.getFuncConfig)(e,y);if("!struct"==m.type)0==t(v,h)&&delete u[p];else{var O=m.returnType==s;d.funcs&&(O=O&&d.funcs.includes(y)),o&&(O=O&&o(r,f,y,m,n)),!m.allowSelfNesting&&i&&i.map((function(e){var t=(0,a.default)(e,2),r=t[0];return t[1],r})).includes(y)&&(O=!1),O||delete u[p]}}return(0,E.default)(u).length}(t,[]),t}},{key:"buildOptions",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!t)return null;var i=e.settings,a=i.fieldSeparator,u=i.fieldSeparatorDisplay,l=n?n.join(a)+a:"";return(0,E.default)(t).map((function(i){var a=t[i],s=r.getFuncLabel(a,i,e),c=(0,h.getFuncPathLabels)(i,e).join(u);c==s&&(c=null);var f=a.tooltip,d=(n||[]).concat(i);return"!struct"==a.type?{key:i,path:l+i,label:s,fullLabel:c,tooltip:f,items:r.buildOptions(e,a.subfields,d,s)}:{key:i,path:l+i,label:s,fullLabel:c,tooltip:f,grouplabel:o}}))}},{key:"getFuncLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.fieldSeparator,o=r.settings.maxLabelsLength,i=Array.isArray(t)?t:t.split(n),a=e.label||(0,O.default)(i);return(0,y.truncateString)(a,o)}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setValue,o=e.readonly,a=e.id,u=e.groupId,l=t.settings.renderFunc,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({config:t,customProps:r,readonly:o,setField:n,items:this.items,id:a,groupId:u},this.meta);return l(s)}}]),o}(p.PureComponent);t.default=T,T.propTypes={id:v.default.string,groupId:v.default.string,config:v.default.object.isRequired,field:v.default.string.isRequired,operator:v.default.string,customProps:v.default.object,value:v.default.string,setValue:v.default.func.isRequired,readonly:v.default.bool,parentFuncs:v.default.array,fieldDefinition:v.default.object,isFuncArg:v.default.bool}},4887:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(9252)),a=n(r(2409)),u=n(r(945)),l=n(r(5849)),s=n(r(4749)),c=n(r(9281)),f=n(r(4066)),d=n(r(2030)),p=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),v=n(r(7028)),g=n(r(2027)),h=r(7100),y=n(r(7553)),m=r(6871),O=r(180),E=r(9043);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var S=function(e){(0,c.default)(r,e);var t=_(r);function r(e){var n;return(0,u.default)(this,r),(n=t.call(this,e)).setFunc=function(e){n.props.setValue((0,O.setFunc)(n.props.value,e,n.props.config))},n.setArgValue=function(e,t){var r=n.props.config,o=n.meta.funcDefinition.args[e];n.props.setValue((0,O.setArgValue)(n.props.value,e,t,o,r))},n.setArgValueSrc=function(e,t){var r=n.props.config,o=n.meta.funcDefinition.args[e];n.props.setValue((0,O.setArgValueSrc)(n.props.value,e,t,o,r))},n.renderFuncSelect=function(){var e=n.props,t=e.config,r=e.field,o=e.operator,i=e.customProps,a=e.value,u=e.readonly,l=e.parentFuncs,s=e.id,c=e.groupId,f=e.isFuncArg,d=e.fieldDefinition,v={value:a?a.get("func"):null,setValue:n.setFunc,config:t,field:r,operator:o,customProps:i,readonly:u,parentFuncs:l,isFuncArg:f,fieldDefinition:d,id:s,groupId:c},h=t.settings,y=h.showLabels,O=h.funcLabel,E=y?p.default.createElement("label",{className:"rule--label"},O):null;return p.default.createElement(m.Col,{key:"func",className:"rule--func"},E,p.default.createElement(g.default,v))},n.renderArgLabel=function(e,t){var r=t.valueSources,o=t.type,i=t.showPrefix,a=t.label,u=n.props.config,l=r&&1==r.length&&"const"==r[0];return u.settings.showLabels||"boolean"!=o&&!l||!i?null:p.default.createElement(m.Col,{className:"rule--func--arg-label"},a||e)},n.renderArgLabelSep=function(e,t){var r=t.valueSources,o=t.type,i=t.showPrefix,a=n.props.config,u=r&&1==r.length&&"const"==r[0];return a.settings.showLabels||"boolean"!=o&&!u||!i?null:p.default.createElement(m.Col,{className:"rule--func--arg-label-sep"},":")},n.renderArgVal=function(e,t,r){var o=n.props,i=o.config,a=o.field,u=(o.operator,o.value),l=o.readonly,s=o.parentFuncs,c=o.id,f=o.groupId,d=u?u.getIn(["args",t]):null,v=d?d.get("value"):void 0,g=1==r.valueSources.length?r.valueSources[0]:void 0,h={config:i,fieldFunc:e,fieldArg:t,leftField:a,operator:null,value:v,valueSrc:d?d.get("valueSrc")||g||"value":g,setValue:n.setArgValue,setValueSrc:n.setArgValueSrc,funcKey:e,argKey:t,argDefinition:r,readonly:l,parentFuncs:s,id:c,groupId:f};return p.default.createElement(m.Col,{className:"rule--func--arg-value"},p.default.createElement(T,h))},n.renderArgSep=function(e,t,r,n){var o=n.renderSeps;return r?p.default.createElement(m.Col,{className:"rule--func--arg-sep"},o?o[r-1]:", "):null},n.renderBracketBefore=function(e){var t=e.renderBrackets;return p.default.createElement(m.Col,{key:"before_args",className:"rule--func--bracket-before"},t?t[0]:"(")},n.renderBracketAfter=function(e){var t=e.renderBrackets;return p.default.createElement(m.Col,{key:"after_args",className:"rule--func--bracket-after"},t?t[1]:")")},n.renderFuncArgs=function(){var e=n.meta,t=e.funcDefinition,r=e.funcKey;if(!r)return null;var o=t.args;return o?p.default.createElement(p.default.Fragment,null,n.renderBracketBefore(t),p.default.createElement(m.Col,{key:"args",className:"rule--func--args"},Object.keys(o).map((function(e,i){return p.default.createElement(m.Col,{key:"arg-".concat(e,"-").concat(i),className:"rule--func--arg"},n.renderArgSep(e,o[e],i,t),n.renderArgLabel(e,o[e]),n.renderArgLabelSep(e,o[e]),n.renderArgVal(r,e,o[e]))}))),n.renderBracketAfter(t)):null},(0,E.useOnPropsChanged)((0,s.default)(n)),n.onPropsChanged(e),n}return(0,l.default)(r,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","field","operator","value"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.config,r=(e.field,e.operator,e.value),n=r?r.get("func"):null;return{funcDefinition:n?(0,h.getFuncConfig)(t,n):null,funcKey:n}}},{key:"render",value:function(){return p.default.createElement(m.Col,{className:"rule--func--wrapper"},this.renderFuncSelect(),this.renderFuncArgs())}}]),r}(p.PureComponent);t.default=S,S.propTypes={id:v.default.string,groupId:v.default.string,config:v.default.object.isRequired,field:v.default.string.isRequired,operator:v.default.string,customProps:v.default.object,value:v.default.object,setValue:v.default.func.isRequired,readonly:v.default.bool,parentFuncs:v.default.array,fieldDefinition:v.default.object,isFuncArg:v.default.bool};var T=function(e){(0,c.default)(r,e);var t=_(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).setValue=function(t,r,n){var o=e.props;(0,o.setValue)(o.argKey,r)},e.setValueSrc=function(t,r,n){var o=e.props;(0,o.setValueSrc)(o.argKey,r)},e}return(0,l.default)(r,[{key:"render",value:function(){var e=this.props,t=e.funcKey,r=e.argKey,n=e.parentFuncs;return p.default.createElement(y.default,(0,i.default)({},this.props,{setValue:this.setValue,setValueSrc:this.setValueSrc,isFuncArg:!0,parentFuncs:[].concat((0,a.default)(n||[]),[[t,r]])}))}}]),r}(p.PureComponent);T.propTypes={funcKey:v.default.string.isRequired,argKey:v.default.string.isRequired,setValue:v.default.func.isRequired,setValueSrc:v.default.func.isRequired,readonly:v.default.bool,parentFuncs:v.default.array,id:v.default.string,groupId:v.default.string}},5877:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(7487)),a=n(r(945)),u=n(r(5849)),l=n(r(4749)),s=n(r(9281)),c=n(r(4066)),f=n(r(2030)),d=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),p=n(r(7028)),v=r(7100),g=n(r(3790)),h=n(r(350)),y=n(r(1612)),m=r(9043);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var b=function(e){(0,s.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(t);if(r){var o=(0,f.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,c.default)(this,e)});function o(e){var t;return(0,a.default)(this,o),t=n.call(this,e),(0,m.useOnPropsChanged)((0,l.default)(t)),t.onPropsChanged(e),t}return(0,u.default)(o,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","selectedField","selectedOperator"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.config,r=e.selectedField,n=e.selectedOperator,o=(0,v.getFieldConfig)(t,r),i=null==o?void 0:o.operators,a=(0,y.default)((0,h.default)(t.operators,(function(e,t){return-1!==(null==i?void 0:i.indexOf(t))})),(function(e,n){return(0,v.getOperatorConfig)(t,n,r)})),u=this.buildOptions(t,a,i),l=!!n,s=(l?a[n]:null)||{},c=l?[n]:null;return{placeholder:this.props.config.settings.operatorPlaceholder,items:u,selectedKey:n,selectedKeys:c,selectedPath:c,selectedLabel:s.label,selectedOpts:s,fieldConfig:o}}},{key:"buildOptions",value:function(e,t,r){return t&&r?(0,g.default)(t).sort((function(e,t){return r.indexOf(e)-r.indexOf(t)})).map((function(e){return{key:e,path:e,label:t[e].label}})):null}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setOperator,o=e.readonly,a=e.id,u=e.groupId,l=t.settings.renderOperator,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:a,groupId:u,config:t,customProps:r,readonly:o,setField:n},this.meta);return s.items?l(s):null}}]),o}(d.PureComponent);t.default=b,b.propTypes={id:p.default.string,groupId:p.default.string,config:p.default.object.isRequired,selectedField:p.default.string,selectedOperator:p.default.string,readonly:p.default.bool,setOperator:p.default.func.isRequired}},9995:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(9473)),a=n(r(945)),u=n(r(5849)),l=n(r(9281)),s=n(r(4066)),c=n(r(2030)),f=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),d=n(r(7028)),p=r(7100),v=["factory"];function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}var h=function(e){(0,l.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.default)(t);if(r){var o=(0,c.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,s.default)(this,e)});function o(){return(0,a.default)(this,o),n.apply(this,arguments)}return(0,u.default)(o,[{key:"render",value:function(){if(!this.props.selectedOperator)return null;var e=(0,p.getOperatorConfig)(this.props.config,this.props.selectedOperator,this.props.selectedField);if(void 0===e.options)return null;var t=e.options,r=t.factory,n=(0,i.default)(t,v),o=r(Object.assign({},n,{config:this.props.config,field:this.props.selectedField,operator:this.props.selectedOperator,options:this.props.operatorOptions,setOption:this.props.setOperatorOption,readonly:this.props.readonly})),a=this.props.selectedOperator;return f.default.createElement("div",{className:"rule--operator rule--operator--".concat(a.toUpperCase())},o)}}]),o}(f.PureComponent);t.default=h,h.propTypes={config:d.default.object.isRequired,operatorOptions:d.default.any.isRequired,selectedField:d.default.string.isRequired,selectedOperator:d.default.string.isRequired,readonly:d.default.bool,setOperatorOption:d.default.func.isRequired}},9390:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(945)),a=n(r(5849)),u=n(r(9281)),l=n(r(4066)),s=n(r(2030)),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),f=n(r(5877)),d=r(6871);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var v=function(e){(0,u.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,s.default)(t);if(r){var o=(0,s.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,l.default)(this,e)});function o(){return(0,i.default)(this,o),n.apply(this,arguments)}return(0,a.default)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedOperator,o=e.setOperator,i=e.selectedFieldPartsLabels,a=e.showOperator,u=e.showOperatorLabel,l=e.selectedFieldWidgetConfig,s=e.readonly,p=e.id,v=e.groupId;return[a&&c.default.createElement(d.Col,{key:"operators-for-"+(i||[]).join("_"),className:"rule--operator"},t.settings.showLabels&&c.default.createElement("label",{className:"rule--label"},t.settings.operatorLabel),c.default.createElement(f.default,{key:"operator",config:t,selectedField:r,selectedOperator:n,setOperator:o,readonly:s,id:p,groupId:v})),u&&c.default.createElement(d.Col,{key:"operators-for-"+(i||[]).join("_"),className:"rule--operator"},c.default.createElement("div",{className:"rule--operator"},t.settings.showLabels?c.default.createElement("label",{className:"rule--label"}," "):null,c.default.createElement("span",null,l.operatorInlineLabel)))]}}]),o}(c.PureComponent);t.default=v},4934:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(7487)),a=n(r(945)),u=n(r(5849)),l=n(r(4749)),s=n(r(9281)),c=n(r(4066)),f=n(r(2030)),d=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),p=n(r(7028)),v=r(7100),g=r(1820),h=r(3585),y=r(9043),m=n(r(8906)),O=n(r(3790)),E=n(r(3523));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var S=function(e){(0,s.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(t);if(r){var o=(0,f.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,c.default)(this,e)});function o(e){var t;return(0,a.default)(this,o),t=n.call(this,e),(0,y.useOnPropsChanged)((0,l.default)(t)),t.onPropsChanged(e),t}return(0,u.default)(o,[{key:"onPropsChanged",value:function(e){var t=this.props,r=!this.items||["config","field","operator","isFuncArg","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0,n=!this.meta||["config","field","operator","value","placeholder","isFuncArg","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0;r&&(this.items=this.getItems(e)),n&&(this.meta=this.getMeta(e))}},{key:"getItems",value:function(e){var t=e.config,r=e.field,n=e.operator,o=e.parentField,i=e.isFuncArg,a=e.fieldDefinition,u=t.settings.canCompareFieldWithField,l=t.settings.fieldSeparator,s="string"==typeof o?o.split(l):o,c=o?(0,v.getFieldConfig)(t,o):null,f=o?c&&c.subfields:t.fields,d=this.filterFields(t,f,r,o,s,n,u,i,a);return this.buildOptions(s,t,d,s)}},{key:"getMeta",value:function(e){var t=e.config,r=e.field,n=(e.operator,e.value),o=e.placeholder,i=e.isFuncArg,a=e.parentField,u=t.settings,l=u.fieldPlaceholder,s=u.fieldSeparatorDisplay,c=n,f=!!n,d=(0,v.getFieldConfig)(t,r).widgets.field,p=d&&d.widgetProps||{},h=f?null:i&&o||p.valuePlaceholder||l,y=f?(0,v.getFieldConfig)(t,c):null,m=y||{},O=(0,g.getFieldPath)(c,t),E=(0,g.getFieldPath)(c,t,!0),b=this.getFieldLabel(y,c,t),_=(0,g.getFieldPathLabels)(c,t),S=_?_.join(s):null;return(S==b||a)&&(S=null),{placeholder:h,selectedKey:c,selectedKeys:O,selectedPath:E,selectedLabel:b,selectedOpts:m,selectedAltLabel:m.label2,selectedFullLabel:S}}},{key:"filterFields",value:function(e,t,r,n,o,i,a,u,l){t=(0,E.default)(t);var s,c=e.settings.fieldSeparator,f=(0,v.getFieldConfig)(e,r),d=(0,g.getWidgetForFieldOp)(e,r,i,"value");if(u&&l)s=l.type;else if(d){var p=e.widgets[d].type;s=p}else s=f.type;return function t(n,o){for(var l in n){var d=n[l].subfields,p=(o||[]).concat(l),g=p.join(c),h=(0,v.getFieldConfig)(e,g);if(h)if("!struct"==h.type||"!group"==h.type)0==t(d,p)&&delete n[l];else{var y=h.type==s&&(!!u||g!=r),m=a||e.settings.canCompareFieldWithField;m&&(y=y&&m(r,f,g,h,i)),y||delete n[l]}else delete n[l]}return(0,O.default)(n).length}(t,o||[]),t}},{key:"buildOptions",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!r)return null;var a=t.settings,u=a.fieldSeparator,l=a.fieldSeparatorDisplay,s=o?o.join(u)+u:"";return(0,O.default)(r).map((function(a){var u=r[a],c=n.getFieldLabel(u,a,t),f=(0,g.getFieldPathLabels)(a,t).join(l);(f==c||e)&&(f=null);var d=u.label2,p=u.tooltip,v=(o||[]).concat(a);if(!u.hideForCompare)return"!struct"==u.type||"!group"==u.type?{key:a,path:s+a,label:c,fullLabel:f,altLabel:d,tooltip:p,items:n.buildOptions(e,t,u.subfields,v,c)}:{key:a,path:s+a,label:c,fullLabel:f,altLabel:d,tooltip:p,grouplabel:i}})).filter((function(e){return!!e}))}},{key:"getFieldLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.fieldSeparator,o=r.settings.maxLabelsLength,i=Array.isArray(t)?t:t.split(n),a=e.label||(0,m.default)(i);return(0,h.truncateString)(a,o)}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setValue,o=e.readonly,a=e.id,u=e.groupId,l=t.settings.renderField,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({config:t,customProps:r,setField:n,readonly:o,items:this.items,id:a,groupId:u},this.meta);return l(s)}}]),o}(d.PureComponent);t.default=S,S.propTypes={id:p.default.string,groupId:p.default.string,setValue:p.default.func.isRequired,config:p.default.object.isRequired,field:p.default.string.isRequired,value:p.default.string,operator:p.default.string,customProps:p.default.object,readonly:p.default.bool,parentField:p.default.string,fieldDefinition:p.default.object,isFuncArg:p.default.bool}},7553:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(9252)),a=n(r(945)),u=n(r(5849)),l=n(r(4749)),s=n(r(9281)),c=n(r(4066)),f=n(r(2030)),d=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(5959)),p=n(r(7028)),v=n(r(2285)),g=r(7100),h=r(1820),y=r(3585),m=r(9043),O=n(r(8831)),E=n(r(9612)),b=n(r(727)),_=r(6871);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}var T={cardinality:1},R=function(e){(0,s.default)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(t);if(r){var o=(0,f.default)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,c.default)(this,e)});function o(e){var t;return(0,a.default)(this,o),(t=n.call(this,e))._setValue=function(e,r,n,o,i,a){if(e&&Array.isArray(o)){var u=[t.props.value.get(0),t.props.value.get(1)];u[0]!=o[0]&&t.props.setValue(0,o[0],n,i,a),u[1]!=o[1]&&t.props.setValue(1,o[1],n,i,a)}else t.props.setValue(r,o,n,i,a)},t._onChangeValueSrc=function(e,r){t.props.setValueSrc(e,r)},t.renderWidget=function(e,t,r){var n=r.config,o=r.isFuncArg,a=r.leftField,u=r.operator,l=r.value,s=r.valueError,c=r.readonly,f=r.parentField,p=r.parentFuncs,v=r.id,g=r.groupId,h=n.settings,y=t.widgets,m=t.iValues,E=t.aField,_=o?m:l,S=o?a:E,T=y[e],R=T.valueSrc,C=T.valueLabel,P=h.showLabels?d.default.createElement("label",{className:"rule--label"},C.label):null;return d.default.createElement("div",{key:"widget-"+S+"-"+e,className:"widget--widget"},"func"==R?null:P,d.default.createElement(b.default,(0,i.default)({id:v,groupId:g,valueSrc:R,delta:e,value:_,valueError:s,isFuncArg:o},(0,O.default)(t,["isSpecialRange","fieldDefinition","asyncListValues"]),(0,O.default)(y[e],["widget","widgetDefinition","widgetValueLabel","valueLabels","textSeparators","setValueHandler"]),{config:n,field:S,parentField:f,parentFuncs:p,operator:u,readonly:c})))},t.renderValueSources=function(e,t,r){var n=r.config,o=r.isFuncArg,i=r.leftField,a=r.operator,u=r.readonly,l=n.settings,s=t.valueSources,c=t.widgets,f=t.aField,p=o?i:f,v=c[e],g=v.valueSrc,h=v.setValueSrcHandler,y=l.valueSourcesInfo,m=l.renderValueSources,O=s.map((function(e){return[e,{label:y[e].label}]})),E=l.showLabels?d.default.createElement("label",{className:"rule--label"}," "):null;return s.length>1&&!u&&d.default.createElement("div",{key:"valuesrc-"+p+"-"+e,className:"widget--valuesrc"},E,d.default.createElement(m,{key:"valuesrc-"+e,delta:e,valueSources:O,valueSrc:g,config:n,field:p,operator:a,setValueSrc:h,readonly:u,title:l.valueSourcesPopupTitle}))},t.renderSep=function(e,t,r){var n=r.config,o=t.widgets,i=n.settings,a=o[e].sepText,u=i.showLabels?d.default.createElement("label",{className:"rule--label"}," "):null;return a&&d.default.createElement("div",{key:"widget-separators-"+e,className:"widget--sep"},u,d.default.createElement("span",null,a))},t.renderWidgetDelta=function(e){return[t.renderSep(e,t.meta,t.props),t.renderValueSources(e,t.meta,t.props),t.renderWidget(e,t.meta,t.props)]},(0,m.useOnPropsChanged)((0,l.default)(t)),t.onPropsChanged(e),t}return(0,u.default)(o,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","field","fieldFunc","fieldArg","leftField","operator","valueSrc","isFuncArg","asyncListValues"].map((function(r){return e[r]!==t[r]||"isFuncArg"==r&&e.isFuncArg&&e.value!==t.value})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=this,r=e.config,n=e.field,o=e.fieldFunc,i=e.fieldArg,a=e.operator,u=e.valueSrc,l=e.value,s=e.isForRuleGruop,c=e.isCaseValue,f=e.isFuncArg,d=e.leftField,p=e.asyncListValues,m=f?{func:o,arg:i}:n,O=u,b=l;(f||s||c)&&(O=E.default.List([u]),b=E.default.List([l]));var _=(0,g.getFieldConfig)(r,m),S=(0,h.getWidgetForFieldOp)(r,m,a),R=((0,h.getWidgetsForFieldOp)(r,m,a),f?T:(0,g.getOperatorConfig)(r,a,m));if((null==_||null==R)&&!c)return null;var C=null==R?void 0:R.isSpecialRange,P=C&&("field"==O.get(0)||"field"==O.get(1)),j=C&&!P,L=j?1:(0,y.defaultValue)(null==R?void 0:R.cardinality,1);if(0===L)return null;var w=(0,h.getValueSourcesForFieldOp)(r,m,a,_,f?d:null),I=(0,v.default)(0,L).map((function(e){var n,o=O.get(e)||null,i=(0,h.getWidgetForFieldOp)(r,m,a,o),u=(0,g.getFieldWidgetConfig)(r,m,a,i,o);P&&(i=u.singleWidget,u=(0,g.getFieldWidgetConfig)(r,m,a,i,o));var l=null===(n=u)||void 0===n?void 0:n.type,s=(0,h.getValueLabel)(r,m,a,e,o,j),c=(0,h.getValueLabel)(r,m,a,e,null,j),f=null!=R&&R.textSeparators?null==R?void 0:R.textSeparators[e]:null,d=t._onChangeValueSrc.bind(t,e),p=null,v=null;return C&&(p={placeholder:[(p=[(0,h.getValueLabel)(r,m,a,0),(0,h.getValueLabel)(r,m,a,1)])[0].placeholder,p[1].placeholder],label:[p[0].label,p[1].label]},v=null==R?void 0:R.textSeparators),{valueSrc:o,valueLabel:s,widget:i,sepText:f,setValueSrcHandler:d,widgetDefinition:u,widgetValueLabel:c,valueLabels:p,textSeparators:v,setValueHandler:t._setValue.bind(t,C,e,l)}}));return{defaultWidget:S,fieldDefinition:_,operatorDefinition:R,isSpecialRange:j,cardinality:L,valueSources:w,widgets:I,iValues:b,aField:m,asyncListValues:p}}},{key:"render",value:function(){if(!this.meta)return null;var e=this.meta,t=e.defaultWidget,r=e.cardinality;if(!t)return null;var n=t;return d.default.createElement(_.Col,{className:"rule--widget rule--widget--".concat(n.toUpperCase()),key:"widget-col-"+n},(0,v.default)(0,r).map(this.renderWidgetDelta))}}]),o}(d.PureComponent);t.default=R,R.propTypes={config:p.default.object.isRequired,value:p.default.any,valueSrc:p.default.any,valueError:p.default.any,field:p.default.string,operator:p.default.string,readonly:p.default.bool,asyncListValues:p.default.array,id:p.default.string,groupId:p.default.string,setValue:p.default.func,setValueSrc:p.default.func,isFuncArg:p.default.bool,fieldFunc:p.default.string,fieldArg:p.default.string,leftField:p.default.string,isForRuleGruop:p.default.bool,parentField:p.default.string,parentFuncs:p.default.array,isCaseValue:p.default.bool}},727:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(9473)),i=(n(r(5959)),r(3585)),a=["factory"];t.default=function(e){var t=e.delta,r=e.isFuncArg,n=(e.valueSrc,e.value),u=e.valueError,l=e.asyncListValues,s=e.isSpecialRange,c=e.fieldDefinition,f=(e.widget,e.widgetDefinition),d=e.widgetValueLabel,p=e.valueLabels,v=e.textSeparators,g=e.setValueHandler,h=e.config,y=e.field,m=e.operator,O=e.readonly,E=e.parentField,b=e.parentFuncs,_=e.id,S=e.groupId,T=f.factory,R=(0,o.default)(f,a),C=r&&c.valueSources&&1==c.valueSources.length&&"const"==c.valueSources[0],P=c.defaultValue;if(!T)return"?";var j=s?[n.get(0),n.get(1)]:n?n.get(t):void 0,L=u&&(s?[u.get(0),u.get(1)]:u.get(t))||null;s&&void 0===j[0]&&void 0===j[1]&&(j=void 0);var w=(c||{}).fieldSettings,I=Object.assign({},R,w,{config:h,field:y,parentField:E,parentFuncs:b,fieldDefinition:c,operator:m,delta:t,isSpecialRange:s,isFuncArg:r,value:j,valueError:L,label:d.label,placeholder:d.placeholder,placeholders:p?p.placeholder:null,textSeparators:v,setValue:g,readonly:O,asyncListValues:l,id:_,groupId:S});return C&&P?"boolean"==typeof P?P?I.labelYes||"YES":I.labelNo||"NO":w.listValues?Array.isArray(P)?P.map((function(e){return(0,i.getTitleInListValues)(w.listValues,e)||e})).join(", "):(0,i.getTitleInListValues)(w.listValues,P)||P:""+P:T(I)}},6871:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.dummyFn=t.DragIcon=t.ConfirmFn=t.Col=void 0;var o=n(r(9252)),i=n(r(9473)),a=n(r(5959)),u=["children"];t.Col=function(e){var t=e.children,r=(0,i.default)(e,u);return a.default.createElement("div",r,t)},t.dummyFn=function(){},t.DragIcon=function(){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"gray",width:"18px",height:"18px"},a.default.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),a.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))},t.ConfirmFn=function(e){return function(t){var r=t.config.settings.useConfirm,n=r?r():null;return a.default.createElement(e,(0,o.default)({},t,{confirmFn:n}))}}},7596:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0});var o={ValueFieldWidget:!0,FuncWidget:!0};Object.defineProperty(t,"FuncWidget",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ValueFieldWidget",{enumerable:!0,get:function(){return i.default}});var i=n(r(4934)),a=n(r(4887)),u=r(4708);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}))},4505:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(5959));t.default=function(e){var t=e.type,r=e.label,n=e.onClick,i=e.readonly,a=(e.config,r||{addRuleGroup:"+",addRuleGroupExt:"+",delGroup:"x",delRuleGroup:"x",delRule:"x"}[t]);return o.default.createElement("button",{onClick:n,type:"button",disabled:i},a)}},1130:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(5959));t.default=function(e){var t=e.children;return e.config,o.default.createElement(o.default.Fragment,null,t)}},6106:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(5959));t.default=function(e){var t,r=e.id,n=e.not,i=e.setNot,a=e.conjunctionOptions,u=e.setConjunction,l=e.disabled,s=e.readonly,c=e.config,f=e.showNot,d=e.notLabel,p=Object.keys(a).length,v=l,g=c.settings.forceShowConj||p>1&&!v,h=function(e){return u(e.target.value)};return[f&&(t="not",[o.default.createElement("input",{key:r+t,type:"checkbox",id:r+t,checked:n,disabled:s,onChange:function(e){return i(e.target.checked)}}),o.default.createElement("label",{key:r+t+"label",htmlFor:r+t},d||"NOT")]),g&&Object.keys(a).map((function(e){var t=a[e],r=t.id,n=t.name,i=t.label,c=t.checked,f=u.isDummyFn?"__dummy":"";return!s&&!l||c?[o.default.createElement("input",{key:r+f,type:"radio",id:r+f,name:n+f,checked:c,disabled:s||l,value:e,onChange:h}),o.default.createElement("label",{key:r+f+"label",htmlFor:r+f},i)]:null}))]}},9413:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(5959));t.default=function(e){var t=e.items,r=e.setField,n=e.selectedKey,i=e.readonly,a=null!=n;return o.default.createElement("select",{onChange:function(e){return r(e.target.value)},value:a?n:"",disabled:i},!a&&o.default.createElement("option",{disabled:!0,value:""}),function e(t){return t.map((function(t){var r=t.items,n=t.path,i=t.label,a=t.disabled;return r?o.default.createElement("optgroup",{disabled:a,key:n,label:i},e(r)):o.default.createElement("option",{disabled:a,key:n,value:n},i)}))}(t))}},6169:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(5959));t.default=function(e){var t=e.value,r=e.setValue,n=e.label,i=e.id,a=(e.config,e.type);return[o.default.createElement("input",{key:i+a,type:"checkbox",id:i+a,checked:!!t,onChange:function(e){return r(e.target.checked)}}),o.default.createElement("label",{key:i+a+"label",htmlFor:i+a},n)]}},8336:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(7033)),i=n(r(5959));t.default=function(e){e.config;var t=e.valueSources,r=e.valueSrc,n=(e.title,e.setValueSrc),a=e.readonly;return i.default.createElement("select",{onChange:function(e){return n(e.target.value)},value:r,disabled:a},function(e){return e.map((function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1];return i.default.createElement("option",{key:r,value:r},n.label)}))}(t))}},4585:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){var t=e.onOk,r=(e.okText,e.cancelText,e.title);confirm(r)&&t()}},4708:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"VanillaBooleanWidget",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"VanillaButton",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"VanillaButtonGroup",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"VanillaConjs",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"VanillaDateTimeWidget",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"VanillaDateWidget",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"VanillaFieldSelect",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"VanillaMultiSelectWidget",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"VanillaNumberWidget",{enumerable:!0,get:function(){return d.default}}),t.VanillaProvider=void 0,Object.defineProperty(t,"VanillaSelectWidget",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"VanillaSliderWidget",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"VanillaSwitch",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"VanillaTextAreaWidget",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"VanillaTextWidget",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"VanillaTimeWidget",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"VanillaValueSources",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"vanillaConfirm",{enumerable:!0,get:function(){return E.default}}),n(r(5959));var o=n(r(7957)),i=n(r(4642)),a=n(r(2119)),u=n(r(1233)),l=n(r(5592)),s=n(r(1092)),c=n(r(88)),f=n(r(6405)),d=n(r(9412)),p=n(r(9644)),v=n(r(9413)),g=n(r(6106)),h=n(r(4505)),y=n(r(1130)),m=n(r(8336)),O=n(r(6169)),E=n(r(4585));t.VanillaProvider=function(e){return e.config,e.children}},7957:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(9252)),i=n(r(5959)),a=n(r(2676));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.labelYes),u=e.labelNo,l=e.readonly,s=e.customProps,c=void 0===s?{}:s,f=c.radioYes||{},d=c.radioNo||{},p=function(e){return r("true"==e.target.value)},v=(0,a.default)(),g=(0,a.default)();return i.default.createElement(i.default.Fragment,null,i.default.createElement("input",(0,o.default)({key:v,type:"radio",id:v,value:!0,checked:!!t,disabled:l,onChange:p},f)),i.default.createElement("label",{style:{display:"inline"},key:v+"label",htmlFor:v},n),i.default.createElement("input",(0,o.default)({key:g,type:"radio",id:g,value:!1,checked:!t,disabled:l,onChange:p},d)),i.default.createElement("label",{style:{display:"inline"},key:g+"label",htmlFor:g},u))}},1233:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(9252)),i=n(r(5959));n(r(2468)),t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat,e.readonly),a=e.customProps;return i.default.createElement("input",(0,o.default)({type:"date",value:t||"",disabled:n,onChange:function(e){var t=e.target.value;""==t&&(t=void 0),r(t)}},a))}},1092:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(9252)),i=n(r(5959)),a=n(r(2468));t.default=function(e){var t,r=e.value,n=e.setValue,u=(e.config,e.valueFormat),l=(e.use12Hours,e.readonly),s=e.customProps;return t=r?(0,a.default)(r).format("YYYY-MM-DDTHH:mm"):"",i.default.createElement("input",(0,o.default)({type:"datetime-local",value:t,disabled:l,onChange:function(e){var t=e.target.value;t=""==t?void 0:(0,a.default)(new Date(t)).format(u),n(t)}},s))}},88:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(9252)),i=n(r(5959)),a=r(3585),u=n(r(7027));t.default=function(e){var t=e.listValues,r=e.value,n=e.setValue,l=(e.allowCustomValues,e.readonly),s=e.customProps;return i.default.createElement("select",(0,o.default)({multiple:!0,onChange:function(e){return n(function(e){for(var t=[],r=e.options,n=0;n<r.length;n++){var o=r[n];o.selected&&t.push(o.value)}return t.length||(t=void 0),t}(e.target))},value:r,disabled:l},(0,u.default)(s,["showSearch","input","showCheckboxes"])),(0,a.mapListValues)(t,(function(e){var t=e.title,r=e.value;return i.default.createElement("option",{key:r,value:r},t)})))}},9412:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(9252)),i=n(r(5959));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),a=e.min,u=e.max,l=e.step,s=e.placeholder,c=e.customProps,f=null==t?"":t;return i.default.createElement("input",(0,o.default)({type:"number",value:f,placeholder:s,disabled:n,min:a,max:u,step:l,onChange:function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)}},c))}},6405:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(9252)),i=n(r(5959)),a=r(3585),u=n(r(7027));t.default=function(e){var t=e.listValues,r=e.value,n=e.setValue,l=(e.allowCustomValues,e.readonly),s=e.customProps,c=null!=r;return i.default.createElement("select",(0,o.default)({onChange:function(e){return n(e.target.value)},value:c?r:"",disabled:l},(0,u.default)(s,["showSearch","input"])),!c&&i.default.createElement("option",{disabled:!0,value:""}),(0,a.mapListValues)(t,(function(e){var t=e.title,r=e.value;return i.default.createElement("option",{key:r,value:r},t)})))}},9644:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(9252)),i=n(r(5959));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),a=e.min,u=e.max,l=e.step,s=e.placeholder,c=e.customProps,f=void 0===c?{}:c,d=f.input||{},p=f.slider||f,v=function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)},g=null==t?"":t;return[i.default.createElement("input",(0,o.default)({key:"number",type:"number",value:g,placeholder:s,disabled:n,min:a,max:u,step:l,onChange:v},d)),i.default.createElement("input",(0,o.default)({key:"range",type:"range",value:g,disabled:n,min:a,max:u,step:l,onChange:v},p))]}},4642:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(9252)),i=n(r(5959));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),a=e.placeholder,u=e.maxLength,l=e.customProps,s=t||"";return i.default.createElement("input",(0,o.default)({type:"text",value:s,placeholder:a,disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)},maxLength:u},l))}},2119:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(9252)),i=n(r(5959));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),a=e.placeholder,u=e.maxLength,l=(e.maxRows,e.fullWidth),s=e.customProps,c=t||"";return i.default.createElement("textarea",(0,o.default)({value:c,placeholder:a,disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)},maxLength:u,style:{width:l?"100%":void 0}},s))}},5592:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(9252)),i=n(r(5959));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat,e.use12Hours,e.readonly),a=e.customProps;return i.default.createElement("input",(0,o.default)({type:"time",value:t||"",disabled:n,onChange:function(e){var t=e.target.value;""==t&&(t=void 0),r(t)}},a))}},4366:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyForDisplay=t.mongoFormatOp2=t.mongoFormatOp1=t.default=void 0;var i=n(r(7487)),a=n(r(5959)),u=v(r(7596)),l=v(r(7788)),s=r(3725),c=r(3585),f=n(r(2468)),d=r(8137);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=u.VanillaBooleanWidget,m=u.VanillaTextWidget,O=u.VanillaTextAreaWidget,E=u.VanillaDateWidget,b=u.VanillaTimeWidget,_=u.VanillaDateTimeWidget,S=u.VanillaMultiSelectWidget,T=u.VanillaSelectWidget,R=u.VanillaNumberWidget,C=u.VanillaSliderWidget,P=u.ValueFieldWidget,j=u.FuncWidget,L=l.ProximityOperator,w=function(e,t,r,n,o,a,u,l,s,c,f,d){var p="string"!=typeof n||n.startsWith("$")?n:"$"+n,v=t(a,d);if(void 0!==v)return r?u||e&&"$eq"!=e?u?{$not:(0,i.default)({},e,[p,v])}:(0,i.default)({},n,{$not:(0,i.default)({},e,v)}):(0,i.default)({},n,{$ne:v}):u||e&&"$eq"!=e?u?(0,i.default)({},e,[p,v]):(0,i.default)({},n,(0,i.default)({},e,v)):(0,i.default)({},n,v)};t.mongoFormatOp1=w;var I=function(e,t,r,n,o,a,u,l,s,c,f){var d,p,v="string"!=typeof r||r.startsWith("$")?r:"$"+r;return t?a?{$not:{$and:[(0,i.default)({},e[0],[v,o[0]]),(0,i.default)({},e[1],[v,o[1]])]}}:(0,i.default)({},r,{$not:(d={},(0,i.default)(d,e[0],o[0]),(0,i.default)(d,e[1],o[1]),d)}):a?{$and:[(0,i.default)({},e[0],[v,o[0]]),(0,i.default)({},e[1],[v,o[1]])]}:(0,i.default)({},r,(p={},(0,i.default)(p,e[0],o[0]),(0,i.default)(p,e[1],o[1]),p))};t.mongoFormatOp2=I;var N={equal:{label:"==",labelForFormat:"==",sqlOp:"=",spelOp:"==",spelOps:["==","eq"],reversedOp:"not_equal",formatOp:function(e,t,r,n,o,i,a,u,l){var s=u?"=":i.label;return"boolean"==o&&u?"No"==r?"NOT ".concat(e):"".concat(e):"".concat(e," ").concat(s," ").concat(r)},mongoFormatOp:w.bind(null,"$eq",(function(e){return e}),!1),jsonLogic:"==",elasticSearchQueryType:"term"},not_equal:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",spelOp:"!=",spelOps:["!=","ne"],reversedOp:"equal",formatOp:function(e,t,r,n,o,i,a,u,l){return"boolean"==o&&u?"No"==r?"".concat(e):"NOT ".concat(e):"".concat(e," ").concat(i.label," ").concat(r)},mongoFormatOp:w.bind(null,"$ne",(function(e){return e}),!1),jsonLogic:"!="},less:{label:"<",labelForFormat:"<",sqlOp:"<",spelOp:"<",spelOps:["<","lt"],reversedOp:"greater_or_equal",mongoFormatOp:w.bind(null,"$lt",(function(e){return e}),!1),jsonLogic:"<",elasticSearchQueryType:"range"},less_or_equal:{label:"<=",labelForFormat:"<=",sqlOp:"<=",spelOp:"<=",spelOps:["<=","le"],reversedOp:"greater",mongoFormatOp:w.bind(null,"$lte",(function(e){return e}),!1),jsonLogic:"<=",elasticSearchQueryType:"range"},greater:{label:">",labelForFormat:">",sqlOp:">",spelOp:">",spelOps:[">","gt"],reversedOp:"less_or_equal",mongoFormatOp:w.bind(null,"$gt",(function(e){return e}),!1),jsonLogic:">",elasticSearchQueryType:"range"},greater_or_equal:{label:">=",labelForFormat:">=",sqlOp:">=",spelOp:">=",spelOps:[">=","ge"],reversedOp:"less",mongoFormatOp:w.bind(null,"$gte",(function(e){return e}),!1),jsonLogic:">=",elasticSearchQueryType:"range"},like:{label:"Contains",labelForFormat:"Contains",reversedOp:"not_like",sqlOp:"LIKE",spelOp:".contains",spelOps:["matches",".contains"],mongoFormatOp:w.bind(null,"$regex",(function(e){return"string"==typeof e?(0,c.escapeRegExp)(e):void 0}),!1),jsonLogic:"in",_jsonLogicIsRevArgs:!0,valueSources:["value"],elasticSearchQueryType:"regexp"},not_like:{isNotOp:!0,label:"Not contains",reversedOp:"like",labelForFormat:"Not Contains",sqlOp:"NOT LIKE",mongoFormatOp:w.bind(null,"$regex",(function(e){return"string"==typeof e?(0,c.escapeRegExp)(e):void 0}),!0),valueSources:["value"]},starts_with:{label:"Starts with",labelForFormat:"Starts with",sqlOp:"LIKE",spelOp:".startsWith",spelOps:["matches",".startsWith"],mongoFormatOp:w.bind(null,"$regex",(function(e){return"string"==typeof e?"^"+(0,c.escapeRegExp)(e):void 0}),!1),jsonLogic:void 0,valueSources:["value"]},ends_with:{label:"Ends with",labelForFormat:"Ends with",sqlOp:"LIKE",spelOp:".endsWith",spelOps:["matches",".endsWith"],mongoFormatOp:w.bind(null,"$regex",(function(e){return"string"==typeof e?(0,c.escapeRegExp)(e)+"$":void 0}),!1),jsonLogic:void 0,valueSources:["value"]},between:{label:"Between",labelForFormat:"BETWEEN",sqlOp:"BETWEEN",cardinality:2,formatOp:function(e,t,r,n,o,i,a,u){var l=r.first(),s=r.get(1);return u?"".concat(e," BETWEEN ").concat(l," AND ").concat(s):"".concat(e," >= ").concat(l," && ").concat(e," <= ").concat(s)},spelFormatOp:function(e,t,r,n,o,i,a,u){var l=r[0],s=r[1];return"".concat(e," >= ").concat(l," && ").concat(e," <= ").concat(s)},mongoFormatOp:I.bind(null,["$gte","$lte"],!1),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"not_between",jsonLogic:"<=",validateValues:function(e){return null!=e[0]&&null!=e[1]?e[0]<=e[1]?null:"Invalid range":null},elasticSearchQueryType:function(e){return"time"===e?"filter":"range"}},not_between:{isNotOp:!0,label:"Not between",labelForFormat:"NOT BETWEEN",sqlOp:"NOT BETWEEN",cardinality:2,formatOp:function(e,t,r,n,o,i,a,u){var l=r.first(),s=r.get(1);return u?"".concat(e," NOT BETWEEN ").concat(l," AND ").concat(s):"(".concat(e," < ").concat(l," || ").concat(e," > ").concat(s,")")},spelFormatOp:function(e,t,r,n,o,i,a,u){var l=r[0],s=r[1];return"(".concat(e," < ").concat(l," || ").concat(e," > ").concat(s,")")},mongoFormatOp:I.bind(null,["$gte","$lte"],!0),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"between",validateValues:function(e){return null!=e[0]&&null!=e[1]?e[0]<=e[1]?null:"Invalid range":null}},is_empty:{label:"Is empty",labelForFormat:"IS EMPTY",cardinality:0,reversedOp:"is_not_empty",formatOp:function(e,t,r,n,o,i,a,u){return u?"".concat(e," IS EMPTY"):"!".concat(e)},sqlFormatOp:function(e,t,r,n,o,i,a,u){var l=(0,s.sqlEmptyValue)(u);return"COALESCE(".concat(e,", ").concat(l,") = ").concat(l)},spelFormatOp:function(e,t,r,n,o,i,a,u){return"".concat(e," <= ''")},mongoFormatOp:w.bind(null,"$in",(function(e,t){return[(0,s.mongoEmptyValue)(t),null]}),!1),jsonLogic:"!"},is_not_empty:{isNotOp:!0,label:"Is not empty",labelForFormat:"IS NOT EMPTY",cardinality:0,reversedOp:"is_empty",formatOp:function(e,t,r,n,o,i,a,u){return u?"".concat(e," IS NOT EMPTY"):"!!".concat(e)},sqlFormatOp:function(e,t,r,n,o,i,a,u){var l=(0,s.sqlEmptyValue)(u);return"COALESCE(".concat(e,", ").concat(l,") <> ").concat(l)},spelFormatOp:function(e,t,r,n,o,i,a,u){return"".concat(e," > ''")},mongoFormatOp:w.bind(null,"$nin",(function(e,t){return[(0,s.mongoEmptyValue)(t),null]}),!1),jsonLogic:"!!",elasticSearchQueryType:"exists"},is_null:{label:"Is null",labelForFormat:"IS NULL",sqlOp:"IS NULL",cardinality:0,reversedOp:"is_not_null",formatOp:function(e,t,r,n,o,i,a,u){return u?"".concat(e," IS NULL"):"!".concat(e)},spelFormatOp:function(e,t,r,n,o,i,a,u){return"".concat(e," == null")},mongoFormatOp:w.bind(null,"$eq",(function(e){return null}),!1),jsonLogic:"=="},is_not_null:{label:"Is not null",labelForFormat:"IS NOT NULL",sqlOp:"IS NOT NULL",cardinality:0,reversedOp:"is_null",formatOp:function(e,t,r,n,o,i,a,u){return u?"".concat(e," IS NOT NULL"):"!!".concat(e)},spelFormatOp:function(e,t,r,n,o,i,a,u){return"".concat(e," != null")},mongoFormatOp:w.bind(null,"$ne",(function(e){return null}),!1),jsonLogic:"!=",elasticSearchQueryType:"exists"},select_equals:{label:"==",labelForFormat:"==",sqlOp:"=",formatOp:function(e,t,r,n,o,i,a,u){var l=u?"=":"==";return"".concat(e," ").concat(l," ").concat(r)},spelOp:"==",spelOps:["==","eq"],mongoFormatOp:w.bind(null,"$eq",(function(e){return e}),!1),reversedOp:"select_not_equals",jsonLogic:"==",elasticSearchQueryType:"term"},select_not_equals:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,t,r,n,o,i,a,u){return"".concat(e," != ").concat(r)},spelOp:"!=",spelOps:["!=","ne"],mongoFormatOp:w.bind(null,"$ne",(function(e){return e}),!1),reversedOp:"select_equals",jsonLogic:"!="},select_any_in:{label:"Any in",labelForFormat:"IN",sqlOp:"IN",formatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," IN (").concat(r.join(", "),")"):"".concat(e," IN (").concat(r,")")},sqlFormatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," IN (").concat(r.join(", "),")"):void 0},spelOp:"$contains",mongoFormatOp:w.bind(null,"$in",(function(e){return e}),!1),reversedOp:"select_not_any_in",jsonLogic:"in",elasticSearchQueryType:"term"},select_not_any_in:{isNotOp:!0,label:"Not in",labelForFormat:"NOT IN",sqlOp:"NOT IN",formatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," NOT IN (").concat(r.join(", "),")"):"".concat(e," NOT IN (").concat(r,")")},sqlFormatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," NOT IN (").concat(r.join(", "),")"):void 0},mongoFormatOp:w.bind(null,"$nin",(function(e){return e}),!1),reversedOp:"select_any_in"},multiselect_contains:{label:"Contains",labelForFormat:"CONTAINS",formatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," CONTAINS [").concat(r.join(", "),"]"):"".concat(e," CONTAINS ").concat(r)},reversedOp:"multiselect_not_contains",jsonLogic2:"some-in",jsonLogic:function(e,t,r){return{some:[e,{in:[{var:""},r]}]}},spelOp:"CollectionUtils.containsAny()",elasticSearchQueryType:"term",mongoFormatOp:w.bind(null,"$in",(function(e){return e}),!1)},multiselect_not_contains:{isNotOp:!0,label:"Not contains",labelForFormat:"NOT CONTAINS",formatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," NOT CONTAINS [").concat(r.join(", "),"]"):"".concat(e," NOT CONTAINS ").concat(r)},reversedOp:"multiselect_contains"},multiselect_equals:{label:"Equals",labelForFormat:"==",sqlOp:"=",formatOp:function(e,t,r,n,o,i,a,u){var l=u?"=":"==";return"value"==n?"".concat(e," ").concat(l," [").concat(r.join(", "),"]"):"".concat(e," ").concat(l," ").concat(r)},sqlFormatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," = '").concat(r.map((function(e){return s.SqlString.trim(e)})).join(","),"'"):void 0},spelOp:".equals",mongoFormatOp:w.bind(null,"$eq",(function(e){return e}),!1),reversedOp:"multiselect_not_equals",jsonLogic2:"all-in",jsonLogic:function(e,t,r){return{all:[e,{in:[{var:""},r]}]}},elasticSearchQueryType:"term"},multiselect_not_equals:{isNotOp:!0,label:"Not equals",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," != [").concat(r.join(", "),"]"):"".concat(e," != ").concat(r)},sqlFormatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," != '").concat(r.map((function(e){return s.SqlString.trim(e)})).join(","),"'"):void 0},mongoFormatOp:w.bind(null,"$ne",(function(e){return e}),!1),reversedOp:"multiselect_equals"},proximity:{label:"Proximity search",cardinality:2,valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],formatOp:function(e,t,r,n,o,i,a,u){var l=r.first(),s=r.get(1),c=a.get("proximity");return"".concat(e," ").concat(l," NEAR/").concat(c," ").concat(s)},sqlFormatOp:function(e,t,r,n,o,i,a,u){var l=r.first(),c=r.get(1),f=s.SqlString.trim(l),d=s.SqlString.trim(c),p=a.get("proximity");return"CONTAINS(".concat(e,", 'NEAR((").concat(f,", ").concat(d,"), ").concat(p,")')")},mongoFormatOp:void 0,jsonLogic:void 0,options:{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",factory:function(e){return a.default.createElement(L,e)},minProximity:2,maxProximity:10,defaults:{proximity:2}}},some:{label:"Some",labelForFormat:"SOME",cardinality:0,jsonLogic:"some",spelFormatOp:function(e){return"".concat(e," > 0")},mongoFormatOp:w.bind(null,"$gt",(function(e){return 0}),!1)},all:{label:"All",labelForFormat:"ALL",cardinality:0,jsonLogic:"all",spelFormatOp:function(e,t,r){return"".concat(e," == ").concat(r)},mongoFormatOp:w.bind(null,"$eq",(function(e){return e}),!1)},none:{label:"None",labelForFormat:"NONE",cardinality:0,jsonLogic:"none",spelFormatOp:function(e){return"".concat(e," == 0")},mongoFormatOp:w.bind(null,"$eq",(function(e){return 0}),!1)}},A=function(e){return null==e?"NULL":e.toString()};t.stringifyForDisplay=A;var x={conjunctions:{AND:{label:"And",mongoConj:"$and",jsonLogicConj:"and",sqlConj:"AND",spelConj:"and",spelConjs:["and","&&"],reversedConj:"OR",formatConj:function(e,t,r,n){return e.size>1?(r?"NOT ":"")+"("+e.join(" "+(n?"AND":"&&")+" ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},sqlFormatConj:function(e,t,r){return e.size>1?(r?"NOT ":"")+"("+e.join(" AND ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},spelFormatConj:function(e,t,r,n){return r&&(n=!1),e.size>1?(r?"!":"")+(n?"":"(")+e.join(" && ")+(n?"":")"):(r?"!(":"")+e.first()+(r?")":"")}},OR:{label:"Or",mongoConj:"$or",jsonLogicConj:"or",sqlConj:"OR",spelConj:"or",spelConjs:["or","||"],reversedConj:"AND",formatConj:function(e,t,r,n){return e.size>1?(r?"NOT ":"")+"("+e.join(" "+(n?"OR":"||")+" ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},sqlFormatConj:function(e,t,r){return e.size>1?(r?"NOT ":"")+"("+e.join(" OR ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},spelFormatConj:function(e,t,r,n){return r&&(n=!1),e.size>1?(r?"!":"")+(n?"":"(")+e.join(" || ")+(n?"":")"):(r?"!(":"")+e.first()+(r?")":"")}}},operators:N,widgets:{text:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"String",valuePlaceholder:"Enter string",factory:function(e){return a.default.createElement(m,e)},formatValue:function(e,t,r,n){return n?A(e):JSON.stringify(e)},spelFormatValue:function(e,t,r,n,o){var i;return"matches"==o.spelOp&&"regex"!=n?(i="starts_with"==n?"(?s)^".concat((0,c.escapeRegExp)(e),".*"):"(?s).*".concat((0,c.escapeRegExp)(e),"ends_with"==n?"$":".*"),(0,s.spelEscape)(i)):(0,s.spelEscape)(e)},sqlFormatValue:function(e,t,r,n,o){return"LIKE"==o.sqlOp||"NOT LIKE"==o.sqlOp?s.SqlString.escapeLike(e,"starts_with"!=n,"ends_with"!=n):s.SqlString.escape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},textarea:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"Text",valuePlaceholder:"Enter text",factory:function(e){return a.default.createElement(O,e)},formatValue:function(e,t,r,n){return n?A(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return"LIKE"==o.sqlOp||"NOT LIKE"==o.sqlOp?s.SqlString.escapeLike(e,"starts_with"!=n,"ends_with"!=n):s.SqlString.escape(e)},spelFormatValue:function(e){return(0,s.spelEscape)(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e},fullWidth:!0},number:{type:"number",jsType:"number",valueSrc:"value",factory:function(e){return a.default.createElement(R,e)},valueLabel:"Number",valuePlaceholder:"Enter number",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(e,t,r,n){return n?A(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return s.SqlString.escape(e)},spelFormatValue:function(e,t,r){var n=r.step&&!Number.isInteger(r.step);return(0,s.spelEscape)(e,n)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},slider:{type:"number",jsType:"number",valueSrc:"value",factory:function(e){return a.default.createElement(C,e)},valueLabel:"Number",valuePlaceholder:"Enter number or move slider",formatValue:function(e,t,r,n){return n?A(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return s.SqlString.escape(e)},spelFormatValue:function(e){return(0,s.spelEscape)(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},select:{type:"select",jsType:"string",valueSrc:"value",factory:function(e){return a.default.createElement(T,e)},valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(e,t,r,n){var o=(0,c.getTitleInListValues)(t.fieldSettings.listValues||t.asyncListValues,e);return n?A(o):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return s.SqlString.escape(e)},spelFormatValue:function(e){return(0,s.spelEscape)(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},multiselect:{type:"multiselect",jsType:"array",valueSrc:"value",factory:function(e){return a.default.createElement(S,e)},valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(e,t,r,n){var o=e.map((function(e){return(0,c.getTitleInListValues)(t.fieldSettings.listValues||t.asyncListValues,e)}));return n?o.map(A):e.map(JSON.stringify)},sqlFormatValue:function(e,t,r,n,o){return e.map((function(e){return s.SqlString.escape(e)}))},spelFormatValue:function(e,t,r,n,o){var i=o.spelOp&&"$"==o.spelOp[0],a=(0,s.spelEscape)(e);return i&&(a=(0,s.spelFixList)(a)),a},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},date:{type:"date",jsType:"string",valueSrc:"value",factory:function(e){return a.default.createElement(E,e)},dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD",useKeyboard:!0,valueLabel:"Date",valuePlaceholder:"Enter date",valueLabels:[{label:"Date from",placeholder:"Enter date from"},{label:"Date to",placeholder:"Enter date to"}],formatValue:function(e,t,r,n){var o=(0,f.default)(e,r.valueFormat);return n?o.format(r.dateFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=(0,f.default)(e,r.valueFormat);return s.SqlString.escape(i.format("YYYY-MM-DD"))},spelFormatValue:function(e,t,r,n,o){var i=(0,f.default)(e,r.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd').parse('".concat(i.format("YYYY-MM-DD"),"')")},jsonLogic:function(e,t,r){return(0,f.default)(e,r.valueFormat).toDate()},toJS:function(e,t){var r=(0,f.default)(e,t.valueFormat);return r.isValid()?r.toDate():void 0},mongoFormatValue:function(e,t,r){var n=(0,f.default)(e,r.valueFormat);return n.isValid()?n.toDate():void 0}},time:{type:"time",jsType:"string",valueSrc:"value",factory:function(e){return a.default.createElement(b,e)},timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Time",valuePlaceholder:"Enter time",valueLabels:[{label:"Time from",placeholder:"Enter time from"},{label:"Time to",placeholder:"Enter time to"}],formatValue:function(e,t,r,n){var o=(0,f.default)(e,r.valueFormat);return n?o.format(r.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=(0,f.default)(e,r.valueFormat);return s.SqlString.escape(i.format("HH:mm:ss"))},spelFormatValue:function(e,t,r,n,o){var i=(0,f.default)(e,r.valueFormat);return"T(java.time.LocalTime).parse('".concat(i.format("HH:mm:ss"),"')")},jsonLogic:function(e,t,r){var n=(0,f.default)(e,r.valueFormat);return 60*n.get("hour")*60+60*n.get("minute")+n.get("second")},toJS:function(e,t){var r=(0,f.default)(e,t.valueFormat);return r.isValid()?60*r.get("hour")*60+60*r.get("minute")+r.get("second"):void 0},mongoFormatValue:function(e,t,r){var n=(0,f.default)(e,r.valueFormat);return 60*n.get("hour")*60+60*n.get("minute")+n.get("second")},elasticSearchFormatValue:function(e,t,r,n){return{script:{script:{source:"doc[".concat(n,"][0].getHour() >== params.min && doc[").concat(n,"][0].getHour() <== params.max"),params:{min:t[0],max:t[1]}}}}}},datetime:{type:"datetime",jsType:"string",valueSrc:"value",factory:function(e){return a.default.createElement(_,e)},timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Datetime",valuePlaceholder:"Enter datetime",valueLabels:[{label:"Datetime from",placeholder:"Enter datetime from"},{label:"Datetime to",placeholder:"Enter datetime to"}],formatValue:function(e,t,r,n){var o=(0,f.default)(e,r.valueFormat);return n?o.format(r.dateFormat+" "+r.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=(0,f.default)(e,r.valueFormat);return s.SqlString.escape(i.toDate())},spelFormatValue:function(e,t,r,n,o){var i=(0,f.default)(e,r.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd HH:mm:ss').parse('".concat(i.format("YYYY-MM-DD HH:mm:ss"),"')")},jsonLogic:function(e,t,r){return(0,f.default)(e,r.valueFormat).toDate()},toJS:function(e,t){var r=(0,f.default)(e,t.valueFormat);return r.isValid()?r.toDate():void 0},mongoFormatValue:function(e,t,r){var n=(0,f.default)(e,r.valueFormat);return n.isValid()?n.toDate():void 0}},boolean:{type:"boolean",jsType:"boolean",valueSrc:"value",factory:function(e){return a.default.createElement(y,e)},labelYes:"Yes",labelNo:"No",formatValue:function(e,t,r,n){return n?e?"Yes":"No":JSON.stringify(!!e)},sqlFormatValue:function(e,t,r,n,o){return s.SqlString.escape(e)},spelFormatValue:function(e,t,r,n,o){return(0,s.spelEscape)(e)},defaultValue:!1,toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},field:{valueSrc:"field",factory:function(e){return a.default.createElement(P,e)},formatValue:function(e,t,r,n,o,i,a){return n&&a.label||e},sqlFormatValue:function(e,t,r,n,o,i){return e},spelFormatValue:function(e,t,r,n,o){return e},valueLabel:"Field to compare",valuePlaceholder:"Select field to compare",customProps:{showSearch:!0}},func:{valueSrc:"func",factory:function(e){return a.default.createElement(j,e)},valueLabel:"Function",valuePlaceholder:"Select function",customProps:{}},case_value:{valueSrc:"value",type:"case_value",spelFormatValue:function(e){return(0,s.spelEscape)(""===e?null:e)},spelImportValue:function(e){return[e.value,[]]},factory:function(e){var t=e.value,r=e.setValue;return a.default.createElement("input",{type:"text",value:t||"",onChange:function(e){return r(e.target.value)}})}}},types:{text:{defaultOperator:"equal",mainWidget:"text",widgets:{text:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","proximity","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},textarea:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},field:{operators:["equal","not_equal","proximity"]}}},number:{defaultOperator:"equal",mainWidget:"number",widgets:{number:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]},slider:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_null","is_not_null"]}}},date:{defaultOperator:"equal",widgets:{date:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},time:{defaultOperator:"equal",widgets:{time:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},datetime:{defaultOperator:"equal",widgets:{datetime:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},select:{mainWidget:"select",defaultOperator:"select_equals",widgets:{select:{operators:["select_equals","select_not_equals","is_null","is_not_null"],widgetProps:{customProps:{showSearch:!0}}},multiselect:{operators:["select_any_in","select_not_any_in","is_null","is_not_null"]}}},multiselect:{defaultOperator:"multiselect_equals",widgets:{multiselect:{operators:["multiselect_contains","multiselect_not_contains","multiselect_equals","multiselect_not_equals","is_null","is_not_null"]}}},boolean:{defaultOperator:"equal",widgets:{boolean:{operators:["equal","not_equal","is_null","is_not_null"],widgetProps:{}},field:{operators:["equal","not_equal"]}}},"!group":{defaultOperator:"some",mainWidget:"number",widgets:{number:{widgetProps:{min:0},operators:["some","all","none","equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between"],opProps:{equal:{label:"Count =="},not_equal:{label:"Count !="},less:{label:"Count <"},less_or_equal:{label:"Count <="},greater:{label:"Count >"},greater_or_equal:{label:"Count >="},between:{label:"Count between"},not_between:{label:"Count not between"}}}}},case_value:{mainWidget:"case_value",widgets:{case_value:{}}}},settings:h(h({},d.settings),{},{formatField:function(e,t,r,n,o,i){return i?r:e},formatSpelField:function(e,t,r,n,o,i){var a=n.map((function(e,t){var r=e.key,n=e.parent;return 0==t?"[map]"==n?"#this[".concat((0,s.spelEscape)(r),"]"):r:"map"==n||"[map]"==n?"[".concat((0,s.spelEscape)(r),"]"):".".concat(r)})).join("");return o.isSpelVariable&&(a="#"+a),a},sqlFormatReverse:function(e){if(null!=e)return"NOT("+e+")"},spelFormatReverse:function(e){if(null!=e)return"!("+e+")"},formatReverse:function(e,t,r,n,o,i){if(null!=e)return i?"NOT ("+e+")":"!("+e+")"},formatAggr:function(e,t,r,n,o,i,a,u,l,s){var c=a.labelForFormat,f=a.cardinality;if(0==f){var d=e?" HAVE ".concat(e):"";return"".concat(c," OF ").concat(t).concat(d)}if(null==f||1==f){var p=e?" WHERE ".concat(e):"";return"COUNT OF ".concat(t).concat(p," ").concat(c," ").concat(n)}if(2==f){var v=e?" WHERE ".concat(e):"",g=n.first(),h=n.get(1);return"COUNT OF ".concat(t).concat(v," ").concat(c," ").concat(g," AND ").concat(h)}},canCompareFieldWithField:function(e,t,r,n){return!0},valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}},customFieldSelectProps:{showSearch:!0},defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5})};t.default=x},8137:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.settings=void 0;var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(n,a,l):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(7596)),a=n(r(5959));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=i.VanillaFieldSelect,s=i.VanillaConjs,c=i.VanillaButton,f=i.VanillaButtonGroup,d=i.VanillaProvider,p=i.VanillaValueSources,v=i.vanillaConfirm,g=i.VanillaSwitch,h={formatField:function(e,t,r,n,o,i){return i?r:e},renderField:function(e){return a.default.createElement(l,e)},renderOperator:function(e){return a.default.createElement(l,e)},renderFunc:function(e){return a.default.createElement(l,e)},renderConjs:function(e){return a.default.createElement(s,e)},renderSwitch:function(e){return a.default.createElement(g,e)},renderButton:function(e){return a.default.createElement(c,e)},renderButtonGroup:function(e){return a.default.createElement(f,e)},renderProvider:function(e){return a.default.createElement(d,e)},renderValueSources:function(e){return a.default.createElement(p,e)},renderConfirm:v,renderSwitchPrefix:function(){return a.default.createElement(a.default.Fragment,null,"Conditions")},valueSourcesInfo:{value:{}},fieldSeparator:".",fieldSeparatorDisplay:".",renderSize:"small",maxLabelsLength:100,canReorder:!0,canRegroup:!0,showLock:!1,canDeleteLocked:!1,showNot:!0,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,forceShowConj:!1,canShortMongoQuery:!0,removeEmptyGroupsOnLoad:!0,removeIncompleteRulesOnLoad:!0,removeInvalidMultiSelectValuesOnLoad:!0,groupActionsPosition:"topRight",setOpOnChangeField:["keep","default"],groupOperators:["some","all","none"],convertableWidgets:{number:["slider","rangeslider"],slider:["number","rangeslider"],rangeslider:["number","slider"],text:["textarea"],textarea:["text"]},locale:{moment:"en"},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:null,addGroupLabel:"Add group",addCaseLabel:"Add condition",addDefaultCaseLabel:"Add default condition",defaultCaseLabel:"Default:",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",delGroupLabel:"",notLabel:"Not",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:null,removeGroupConfirmOptions:null,defaultGroupConjunction:"AND",jsonLogic:{groupVarKey:"var",altVarKey:"var",lockedOp:"locked"}};t.settings=h},6715:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.UPPER=t.RELATIVE_DATETIME=t.NOW=t.LOWER=t.LINEAR_REGRESSION=void 0;var o=n(r(2468)),i={label:"Now",returnType:"datetime",jsonLogic:"now",jsonLogicCustomOps:{now:function(){return new Date}},spelFunc:"new java.util.Date()",sqlFormatFunc:function(){return"NOW()"},mongoFormatFunc:function(){return new Date},formatFunc:function(){return"NOW"}};t.NOW=i;var a={label:"Relative",returnType:"datetime",renderBrackets:["",""],renderSeps:["","",""],jsonLogic:function(e){var t=e.date,r=e.op;return{date_add:[t,e.val*("minus"==r?-1:1),e.dim]}},jsonLogicImport:function(e){var t=e.date_add[0],r=Math.abs(e.date_add[1]);return[t,e.date_add[1]>=0?"plus":"minus",r,e.date_add[2]]},jsonLogicCustomOps:{date_add:function(e,t,r){return(0,o.default)(e).add(t,r).toDate()}},sqlFormatFunc:function(e){var t=e.date,r=e.op,n=e.val,o=e.dim;return"DATE_ADD(".concat(t,", INTERVAL ").concat(parseInt(n)*("minus"==r?-1:1)," ").concat(o.replace(/^'|'$/g,""),")")},mongoFormatFunc:null,formatFunc:function(e){var t=e.date,r=e.op,n=e.val,o=e.dim;return n?"".concat(t," ").concat("minus"==r?"-":"+"," ").concat(n," ").concat(o):t},args:{date:{label:"Date",type:"datetime",defaultValue:{func:"NOW",args:[]},valueSources:["func","field"]},op:{label:"Op",type:"select",defaultValue:"plus",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{plus:"+",minus:"-"}}},val:{label:"Value",type:"number",fieldSettings:{min:0},defaultValue:0,valueSources:["value"]},dim:{label:"Dimension",type:"select",defaultValue:"day",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{day:"day",week:"week",month:"month",year:"year"}}}}};t.RELATIVE_DATETIME=a,t.LOWER={label:"Lowercase",mongoFunc:"$toLower",jsonLogic:"toLowerCase",spelFunc:".toLowerCase",jsonLogicCustomOps:{toLowerCase:function(e){return e.toLowerCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}},t.UPPER={label:"Uppercase",mongoFunc:"$toUpper",jsonLogic:"toUpperCase",spelFunc:".toUpperCase",jsonLogicCustomOps:{toUpperCase:function(e){return e.toUpperCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}},t.LINEAR_REGRESSION={label:"Linear regression",returnType:"number",formatFunc:function(e,t){var r=e.coef,n=e.bias,o=e.val;return"(".concat(r," * ").concat(o," + ").concat(n,")")},sqlFormatFunc:function(e){var t=e.coef,r=e.bias,n=e.val;return"(".concat(t," * ").concat(n," + ").concat(r,")")},spelFormatFunc:function(e){var t=e.coef,r=e.bias,n=e.val;return"(".concat(t," * ").concat(n," + ").concat(r,")")},mongoFormatFunc:function(e){var t=e.coef,r=e.bias;return{$sum:[{$multiply:[t,e.val]},r]}},jsonLogic:function(e){var t=e.coef,r=e.bias;return{"+":[{"*":[t,e.val]},r]}},jsonLogicImport:function(e){return[e["+"][0]["*"][0],e["+"][0]["*"][1],e["+"][1]]},renderBrackets:["",""],renderSeps:[" * "," + "],args:{coef:{label:"Coef",type:"number",defaultValue:1,valueSources:["value"]},val:{label:"Value",type:"number",valueSources:["value","field"]},bias:{label:"Bias",type:"number",defaultValue:0,valueSources:["value"]}}}},4084:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_VALUE_SRC=t.SET_VALUE=t.SET_TREE=t.SET_OPERATOR_OPTION=t.SET_OPERATOR=t.SET_NOT=t.SET_LOCK=t.SET_FIELD=t.SET_DRAG_START=t.SET_DRAG_PROGRESS=t.SET_DRAG_END=t.SET_CONJUNCTION=t.REMOVE_RULE=t.REMOVE_GROUP=t.PLACEMENT_PREPEND=t.PLACEMENT_BEFORE=t.PLACEMENT_APPEND=t.PLACEMENT_AFTER=t.MOVE_ITEM=t.ADD_RULE=t.ADD_GROUP=t.ADD_CASE_GROUP=void 0,t.ADD_GROUP="ADD_GROUP",t.ADD_CASE_GROUP="ADD_CASE_GROUP",t.REMOVE_GROUP="REMOVE_GROUP",t.SET_CONJUNCTION="SET_CONJUNCTION",t.SET_NOT="SET_NOT",t.ADD_RULE="ADD_RULE",t.REMOVE_RULE="REMOVE_RULE",t.SET_FIELD="SET_FIELD",t.SET_OPERATOR="SET_OPERATOR",t.SET_VALUE="SET_VALUE",t.SET_VALUE_SRC="SET_VALUE_SRC",t.SET_OPERATOR_OPTION="SET_OPERATOR_OPTION",t.SET_LOCK="SET_LOCK",t.SET_TREE="SET_TREE",t.MOVE_ITEM="MOVE_ITEM",t.PLACEMENT_AFTER="after",t.PLACEMENT_BEFORE="before",t.PLACEMENT_APPEND="append",t.PLACEMENT_PREPEND="prepend",t.SET_DRAG_PROGRESS="SET_DRAG_PROGRESS",t.SET_DRAG_START="SET_DRAG_START",t.SET_DRAG_END="SET_DRAG_END"},4703:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.elasticSearchFormat=function e(t,r){if(t){var n=t.get("type"),i=t.get("properties")||new Map;if("rule"===n&&i.get("field")){var u,l,c=i.get("operator"),f=i.get("field"),d=i.get("value").toJS(),p=(null===(u=i.get("valueType"))||void 0===u||u.get(0),null===(l=i.get("valueSrc"))||void 0===l?void 0:l.get(0));if("func"===p)return;return d&&Array.isArray(d[0])?d[0].map((function(e){return s(f,[e],c,r,p)})):s(f,d,c,r,p)}if("group"===n||"rule_group"===n){var v=i.get("not"),g=i.get("conjunction");return g||(g=(0,a.defaultConjunction)(r)),function(e,t,r,n,i){if(e&&e.size){var a=e.valueSeq().toArray(),u=function(e,t){switch(e){case"AND":return t?"must_not":"must";case"OR":return t?"should_not":"should";case"NOT":return t?"must":"must_not";default:return}}(t,r),l=a.map((function(e){return n(e,i)})).filter((function(e){return void 0!==e}));if(l.length){var s=l.flat(1/0);return{bool:(0,o.default)({},u,s)}}}}(t.get("children1"),g,v,e,r)}}};var o=n(r(7487)),i=r(1820),a=r(781);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r,n,a){if(e&&r&&null!=t){var u=r,s=n.operators[u];if(s){var c=s.elasticSearchQueryType,f=!1;!c&&s.reversedOp&&(f=!0,u=s.reversedOp,c=(s=n.operators[u]).elasticSearchQueryType);var d=(0,i.getWidgetForFieldOp)(n,e,u,a),p=n.widgets[d];if(p){var v,g,h=p.elasticSearchFormatValue;if(v="function"==typeof c?c(d):c)return g="function"==typeof h?h(v,t,u,e,n):function(e,t,r,n,i){var a=n;switch(e){case"filter":return{script:i.operators[r].elasticSearchScript(n,t)};case"exists":return{field:n};case"match":return(0,o.default)({},a,t[0]);case"term":return(0,o.default)({},n,t[0]);case"geo_bounding_box":return(0,o.default)({},n,function(e){if(null==e)return null;var t=e.split(",").map(Number);return{top_left:{lat:t[0],lon:t[1]},bottom_right:{lat:t[2],lon:t[3]}}}(t[0]));case"range":return(0,o.default)({},n,function(e,t){if(e.length>1)return{gte:"".concat(e[0]),lte:"".concat(e[1])};var r=e[0];switch(t){case"on_date":case"not_on_date":case"equal":case"select_equals":case"not_equal":return{gte:"".concat(r,"||/d"),lte:"".concat(r,"||+1d")};case"less_or_equal":return{lte:"".concat(r)};case"greater_or_equal":return{gte:"".concat(r)};case"less":return{lt:"".concat(r)};case"greater":return{gt:"".concat(r)};default:return}}(t,r));case"wildcard":return(0,o.default)({},n,function(e){return{value:"*"+e+"*"}}(t[0]));case"regexp":return(0,o.default)({},n,function(e){return{value:e}}(t[0]));default:return}}(v,t,u,e,n),f?{bool:{must_not:(0,o.default)({},v,l({},g))}}:(0,o.default)({},v,l({},g))}}}}},980:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8230);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(4232);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(8190);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a=r(3936);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var u=r(6944);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=r(4389);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var s=r(4703);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}))},4232:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.jsonLogicFormat=void 0;var o=n(r(2409)),i=n(r(7487)),a=r(3585),u=r(7100),l=r(1820),s=r(781),c=r(180),f=r(9612),d=n(r(7027)),p=n(r(8831));function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.jsonLogicFormat=function(e,t){var r,n={usedFields:[],errors:[]},o=y(e,t,n,!0),i=n.errors,a=n.usedFields,l=t.settings.fieldSeparator,s={},c=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(a);try{for(c.s();!(r=c.n()).done;)for(var f=r.value,d=((0,u.getFieldConfig)(t,f),f.split(l)),p=s,v=0;v<d.length;v++){var g=d[v],m=(0,u.getFieldConfig)(t,d.slice(0,v+1))||{};v!=d.length-1?"!group"==m.type&&"struct"!=m.mode?(p[g]||(p[g]=[{}]),p=p[g][0]):(p[g]||(p[g]={}),p=p[g]):p[g]||(p[g]=null)}}catch(e){c.e(e)}finally{c.f()}return{errors:i,logic:o,data:s}};var y=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e){var a,u=e.get("type"),l=(e.get("properties")||new f.Map).get("isLocked"),s=t.settings.jsonLogic.lockedOp;return"group"===u||"rule_group"===u?a=m(e,t,r,n,o):"rule"===u&&(a=O(e,t,r,o)),l&&a&&s&&(a=(0,i.default)({},s,a)),a}},m=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=e.get("type"),l=e.get("properties")||new f.Map,c=l.get("mode"),d=e.get("children1"),p=l.get("field");if(d){var v=l.get("conjunction");v||(v=(0,s.defaultConjunction)(t));var g=t.conjunctions[v].jsonLogicConj||v.toLowerCase(),h=l.get("not");if("and"==g||"or"==g){var m="rule_group"===a&&!n,O=m&&"struct"!=c?p:o,b=l.get("operator"),_=b&&(0,u.getOperatorConfig)(t,b,p)||null,R=E(t,l,r,b,o),C=m&&(!b||0==_.cardinality),P=d.map((function(e){return y(e,t,r,!1,O)})).filter((function(e){return void 0!==e}));if(m&&"struct"!=c&&!C){if(null==R)return}else if(!P.size)return;var j={};if(1!=P.size||n?j[g]=P.toList().toJS():j=P.first(),h&&(j={"!":j}),m&&"struct"!=c){var L=S(r,t,p,o);if(C){var w=b||"some";j=(0,i.default)({},w,[L,j])}else{var I=P.size?{filter:[L,j]}:L;j=T(t,l,{reduce:[I,{"+":[1,{var:"accumulator"}]},0]},R,b)}}return j}r.errors.push("Conjunction ".concat(g," is not supported"))}},O=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("properties")||new f.Map,i=o.get("field"),a=o.get("operator"),l=o.get("operatorOptions");if((l=l?l.toJS():null)&&!Object.keys(l).length&&(l=null),null!=i&&null!=a){var s=(0,u.getFieldConfig)(t,i)||{},c=(0,u.getOperatorConfig)(t,a,i)||{},d=c.reversedOp,p=(0,u.getOperatorConfig)(t,d,i)||{},v=!1;if(c.jsonLogic||p.jsonLogic){if(!c.jsonLogic&&p.jsonLogic){v=!0;var g=[d,a];a=g[0],d=g[1];var h=[p,c];c=h[0],p=h[1]}var y=E(t,o,r,a,n);if(void 0!==y){var m=S(r,t,i,n);return T(t,o,m,y,a,l,s,v)}}else r.errors.push("Operator ".concat(a," is not supported"))}},E=function(e,t,r,n,o){var i=t.get("field"),s=t.get("valueSrc"),f=t.get("valueType"),p=(0,u.getFieldConfig)(e,i)||{},v=(0,u.getOperatorConfig)(e,n,i)||{},g=(0,a.defaultValue)(v.cardinality,1),h=t.get("value"),y=t.get("asyncListValues");if(null!=h){var m=[],O=[],E=r.usedFields,_=h.map((function(t,a){var g=s?s.get(a):null,h=f?f.get(a):null,E=(0,c.completeValue)(t,g,e),_=(0,l.getWidgetForFieldOp)(e,i,n,g),S=(0,d.default)((0,u.getFieldWidgetConfig)(e,i,n,_,g),["factory"]),T=b(r,e,E,g,h,S,p,n,v,o,y);return void 0!==T&&(m.push(g),O.push(h)),T})),S=_.filter((function(e){return void 0===e})).size>0;if(!(_.size<g||S))return g>1?_.toArray():1==g?_.first():null;r.usedFields=E}},b=function(e,t,r,n,o,i,a,u,l){var s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=arguments.length>10?arguments[10]:void 0;if(void 0!==r){var f;if("field"==n)f=S(e,t,r,s);else if("func"==n)f=_(e,t,r,s);else if("function"==typeof i.jsonLogic){var v=i.jsonLogic,h=[r,g(g({},(0,p.default)(a,["fieldSettings","listValues"])),{},{asyncListValues:c}),(0,d.default)(i,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];u&&(h.push(u),h.push(l)),f=v.apply(void 0,h)}else f=r;return f}},_=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=r.get("func"),a=r.get("args"),l=(0,u.getFuncConfig)(t,o);if(l.jsonLogic){var s={};for(var c in l.args){var f=l.args[c],d=(0,u.getFieldConfig)(t,f),p=a?a.get(c):void 0,v=p?p.get("value"):void 0,g=p?p.get("valueSrc"):void 0,h=b(e,t,v,g,f.type,d,f,null,null,n);if(null!=v&&void 0===h)return void e.errors.push("Can't format value of arg ".concat(c," for func ").concat(o));void 0!==h&&(s[c]=h)}var y,m=Object.values(s);if("function"==typeof l.jsonLogic){var O=[s];y=l.jsonLogic.apply(void 0,O)}else{var E=l.jsonLogic||o;if(l.jsonLogicIsMethod){var _=m[0],S=m.slice(1);y=S.length?{method:[_,E,S]}:{method:[_,E]}}else y=(0,i.default)({},E,m)}return y}e.errors.push("Func ".concat(o," is not supported"))},S=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.settings,l=a.fieldSeparator,s=a.jsonLogic;if(r){Array.isArray(r)&&(r=r.join(l));var c=(0,u.getFieldConfig)(t,r)||{},f=r;if(c.fieldName&&(f=c.fieldName),o){var d=(0,u.getFieldConfig)(t,o)||{},p=o;d.fieldName&&(p=d.fieldName),0==f.indexOf(p+l)?f=f.slice((p+l).length):e.errors.push("Can't cut group ".concat(p," from field ").concat(f))}var v=c.jsonLogicVar||("!group"==c.type?s.groupVarKey:"var");n=(0,i.default)({},v,f),-1==e.usedFields.indexOf(r)&&e.usedFields.push(r)}return n},T=function(e,t,r,n,l){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,f=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=t.get("field"),v=(0,u.getOperatorConfig)(e,l,p)||{},g="function"==typeof v.jsonLogic?v.jsonLogic:function(e,t,r,n){var u=e,l=(0,a.defaultValue)(t.cardinality,1),s=(0,a.defaultValue)(t._jsonLogicIsRevArgs,!1);"string"==typeof t.jsonLogic&&(u=t.jsonLogic);var c=["<","<=",">",">="],f=["==","!="];return function(e,t,a,d,p){return 0==l&&f.includes(u)?(0,i.default)({},u,[r,null]):0==l?(0,i.default)({},u,r):1==l&&s?(0,i.default)({},u,[n,r]):1==l?(0,i.default)({},u,[r,n]):2==l&&c.includes(u)?(0,i.default)({},u,[n[0],r,n[1]]):(0,i.default)({},u,[r].concat((0,o.default)(n)))}}(l,v,r,n),h=[r,l,n,(0,d.default)(v,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),s,c],y=g.apply(void 0,h);return f&&(y={"!":y}),y}},8190:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.mongodbFormat=t._mongodbFormat=void 0;var o=n(r(7033)),i=n(r(7487)),a=n(r(2409)),u=n(r(5992)),l=r(3585),s=r(7100),c=r(1820),f=r(781),d=r(180),p=n(r(7027)),v=n(r(8831)),g=r(9612),h=r(8137);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(e){return"object"==(0,u.default)(e)&&null!==e&&!Array.isArray(e)};t.mongodbFormat=function(e,t){return E(e,t,!1)};var E=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=b([],e,t,n);return r?[o,n.errors]:(n.errors.length&&console.warn("Errors while exporting to MongoDb:",n.errors),o)};t._mongodbFormat=E;var b=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;if(t){var l=t.get("type");return"group"===l||"rule_group"===l?_(e,t,r,n,o,i,a,u):"rule"===l?S(e,t,r,n,o,i,a,u):void 0}},_=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=t.get("type"),l=t.get("properties")||new g.Map,c=t.get("children1"),d=r.settings.canShortMongoQuery;if(c){var p=e.filter((function(e){return"rule_group"==e.get("type")})).length>0,v=e.filter((function(e){return"rule_group"==e.get("type")})).map((function(e){return e.get("properties").get("field")})).slice(-1).pop(),h=p&&v,y="rule_group"===u?l.get("field"):null,m=R(y,r,n,h),E=((0,s.getFieldConfig)(r,y)||{}).mode,_=y&&"array"==E,S=o?!l.get("not"):l.get("not"),T=c.map((function(o){return b([].concat((0,a.default)(e),[t]),o,r,n,S,!0,"array"==E?function(e){return"$$el.".concat(e)}:void 0)})).filter((function(e){return void 0!==e}));if(_||T.size){var C=l.get("conjunction");C||(C=(0,f.defaultConjunction)(r));var P=r.conjunctions[C],j=P.reversedConj;S&&j&&(C=j,P=r.conjunctions[C]);var L,w=P.mongoConj;if(1==T.size)L=T.first();else if(T.size>1){var I=T.toList().toJS();d&&"$and"==w&&(L=I.reduce((function(e,t){if(e){for(var r in t){if("$"==r[0]){e=void 0;break}if(null==e[r])e[r]=t[r];else{var n=e[r],o=t[r];if(O(n)||(n={$eq:n}),O(o)||(o={$eq:o}),Object.keys(n)[0]==Object.keys(o)[0]){e=void 0;break}e[r]=Object.assign({},n,o)}}return e}}),{})),L||(L=(0,i.default)({},w,I))}if(y)if("array"==E){var N={$size:m},A=L?{$size:{$filter:{input:"$"+m,as:"el",cond:L}}}:N;L={$expr:L=b(e,t.set("type","rule"),r,n,!1,!1,(function(e){return A}),N)}}else L=(0,i.default)({},m,{$elemMatch:L});return L}}},S=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,v=t.get("properties")||new g.Map,h=e.filter((function(e){return"rule_group"==e.get("type")})).length>0,y=e.filter((function(e){return"rule_group"==e.get("type")})).map((function(e){return e.get("properties").get("field")})).slice(-1).pop(),m=h&&y,O=v.get("operator"),E=v.get("operatorOptions"),b=v.get("field"),_=v.get("value"),S=v.get("valueSrc"),C=v.get("valueType"),P=v.get("asyncListValues");if(null!=b&&null!=O&&void 0!==_){var j=(0,s.getFieldConfig)(r,b)||{},L=(0,s.getOperatorConfig)(r,O,b)||{},w=L.reversedOp,I=(0,s.getOperatorConfig)(r,w,b)||{},N=(0,l.defaultValue)(L.cardinality,1),A=i;if(A&&w){var x=[w,O];O=x[0],w=x[1];var F=[I,L];L=F[0],I=F[1],A=!1}var D=R(b,r,n,m),k=[],M=[],V=!1,U=_.map((function(e,t){var i=S?S.get(t):null,a=C?C.get(t):null,u=(0,d.completeValue)(e,i,r),l=(0,c.getWidgetForFieldOp)(r,b,O,i),f=(0,p.default)((0,s.getFieldWidgetConfig)(r,b,O,l,i),["factory"]),v=T(n,r,u,i,a,f,j,m,O,L,P),g=(0,o.default)(v,2),h=g[0],y=g[1];return void 0!==h&&(V=V||y,k.push(i),M.push(a)),h}));u&&(V=!0);var q=V&&a,W=U.filter((function(e){return void 0===e})).size>0;if(!(U.size<N||W)){var G=N>1?U.toArray():1==N?U.first():null,B=L.mongoFormatOp;if(B){var K=[u?u(D):D,O,void 0!==f&&null==G?f:G,V,k.length>1?k:k[0],M.length>1?M:M[0],(0,p.default)(L,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),E,j],z=B.apply(void 0,K);return q&&(z={$expr:z}),A&&(z={$not:z}),z}n.errors.push("Operator ".concat(O," is not supported"))}}},T=function(e,t,r,n,i,a,u,l,s,c,f){if(void 0===r)return[void 0,!1];var d,g=!1;if("field"==n){var h=C(e,t,r,l),y=(0,o.default)(h,2);d=y[0],g=y[1]}else if("func"==n){var O=P(e,t,r,l),E=(0,o.default)(O,2);d=E[0],g=E[1]}else if("function"==typeof a.mongoFormatValue){var b=a.mongoFormatValue,_=[r,m(m({},(0,v.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:f}),(0,p.default)(a,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];s&&(_.push(s),_.push(c)),d=b.apply(void 0,_)}else d=r;return[d,g]},R=function(e,t,r,n){if(e){var o=(0,s.getFieldConfig)(t,e)||{},i=t.settings.fieldSeparator,a=(Array.isArray(e)||e.split(i),Array.isArray(e)?e.join(i):e);if(o.fieldName&&(a=o.fieldName),n){var u=(0,s.getFieldConfig)(t,n)||{},l=n;u.fieldName&&(l=u.fieldName),0==a.indexOf(l+".")?a=a.slice((l+".").length):r.errors.push("Can't cut group ".concat(l," from field ").concat(a))}return a}},C=function(e,t,r,n){var o,i=t.settings.fieldSeparator;if(r){var a=(0,s.getFieldConfig)(t,r)||{},u=Array.isArray(r)?r:r.split(i),l=((0,c.getFieldPath)(r,t),(0,c.getFieldPathLabels)(r,t)),f=l?l.join(i):null;o="$"+(t.settings.formatField||h.settings.formatField)(R(r,t,e,n),u,f,a,t,!1)}return[o,!0]},P=function(e,t,r,n){var a,u=r.get("func"),l=r.get("args"),f=(0,s.getFuncConfig)(t,u),d=f.mongoFunc||u,v=f.mongoArgsAsObject,g={},h=0,y=void 0;for(var m in f.args){var O=f.args[m],E=(0,s.getFieldConfig)(t,O),b=l?l.get(m):void 0,_=b?b.get("value"):void 0,S=b?b.get("valueSrc"):void 0,R=b?b.get("asyncListValues"):void 0,C=(0,c.getWidgetForFieldOp)(t,E,null,S),P=(0,p.default)((0,s.getFieldWidgetConfig)(t,E,null,C,S),["factory"]),j=T(e,t,_,S,O.type,P,E,n,null,null,R),L=(0,o.default)(j,2),w=L[0];if(L[1],null!=_&&void 0===w)return e.errors.push("Can't format value of arg ".concat(m," for func ").concat(u)),[void 0,!1];h++,void 0!==w&&(g[m]=w,y=w)}if("function"==typeof f.mongoFormatFunc){var I=[g];a=f.mongoFormatFunc.apply(void 0,I)}else{if(null===f.mongoFormatFunc)return e.errors.push("Functon ".concat(d," is not supported")),[void 0,!1];a=v?(0,i.default)({},d,g):1==h&&void 0!==y?(0,i.default)({},d,y):(0,i.default)({},d,Object.values(g))}return[a,!0]}},8230:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.queryBuilderFormat=void 0;var o=n(r(7487)),i=r(3585),a=r(7100),u=r(781),l=r(1820),s=(r(180),r(9612));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.queryBuilderFormat=function(e,t){var r={usedFields:[]},n=d(e,t,r);if(n)return f(f({},n),r)};var d=function(e,t,r){if(e){var n=e.get("type"),o=e.get("children1");return("group"===n||"rule_group"===n)&&o&&o.size?p(e,t,r):"rule"===n?v(e,t,r):void 0}},p=function(e,t,r){var n=e.get("properties")||new s.Map,o=e.get("children1"),i=e.get("id"),a=o.map((function(e){return d(e,t,r)})).filter((function(e){return void 0!==e}));if(a.size){var l=n.get("conjunction");l||(l=(0,u.defaultConjunction)(t));var c=n.get("not");return{id:i,rules:a.toList(),condition:l.toUpperCase(),not:c}}},v=function(e,t,r){var n=e.get("properties")||new s.Map,o=e.get("id"),u=n.get("operator"),c=n.get("operatorOptions"),f=n.get("field"),d=n.get("value"),p=n.get("valueSrc"),v=n.get("valueType"),g=d.filter((function(e){return void 0===e})).size>0;if(null!=f&&null!=u&&!g){var h=(0,a.getFieldConfig)(t,f)||{},y=(0,a.getOperatorConfig)(t,u,f)||{},m=h.type||"undefined",O=(0,i.defaultValue)(y.cardinality,1),E=t.types[h.type]||{},b=(0,l.formatFieldName)(f,t,r);if(!(d.size<O)){-1==r.usedFields.indexOf(f)&&r.usedFields.push(f),d=d.toArray(),p=p.toArray(),v=v.toArray();for(var _=[],S=0;S<d.length;S++){var T={type:v[S],value:d[S]};if(_.push(T),"field"==p[S]){var R=d[S];-1==r.usedFields.indexOf(R)&&r.usedFields.push(R)}}var C=c?c.toJS():null;C&&!Object.keys(C).length&&(C=null);var P={id:o,fieldName:b,type:m,input:E.mainWidget,operator:u};return C&&(P.operatorOptions=C),P.values=_,P}}}},4389:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.queryString=void 0;var o=n(r(7487)),i=n(r(7033)),a=n(r(2409)),u=r(7100),l=r(1820),s=n(r(7027)),c=n(r(8831)),f=r(3585),d=r(781),p=r(8137),v=r(180),g=r(9612);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.queryString=function(e,t){var r={errors:[]},n=m(e,t,r,arguments.length>2&&void 0!==arguments[2]&&arguments[2],null);return r.errors.length&&console.warn("Errors while exporting to string:",r.errors),n};var m=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e){var i=e.get("type");return e.get("children1"),"group"===i||"rule_group"===i?O(e,t,r,n,o):"rule"===i?E(e,t,r,n,o):void 0}},O=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=e.get("type"),u=e.get("properties")||new g.Map,l=u.get("mode"),s=e.get("children1");if(s){var c="rule_group"===i,f=c&&"array"==l?u.get("field"):null,p=c&&"array"==l,v=u.get("not"),h=s.map((function(e){return m(e,t,r,n,f)})).filter((function(e){return void 0!==e}));if(p||h.size){var y=u.get("conjunction");y||(y=(0,d.defaultConjunction)(t));var O,b=t.conjunctions[y],_=h.size?b.formatConj(h,y,v,n):null;if(f){var S=E(e,t,r,n,o,!0);if(S){var T,R=S.pop(),C=[_].concat((0,a.default)(S));O=(T=t.settings).formatAggr.apply(T,(0,a.default)(C)),R&&(O=t.settings.formatReverse(O,null,null,null,null,n))}}else O=_;return O}}},E=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=e.get("properties")||new g.Map,d=c.get("field"),p=c.get("operator"),h=c.get("operatorOptions");if(null!=d&&null!=p){var y=(0,u.getFieldConfig)(t,d)||{},m=(0,u.getOperatorConfig)(t,p,d)||{},O=m.reversedOp,E=(0,u.getOperatorConfig)(t,O,d)||{},S=!1,T=m.formatOp;if(!T&&O&&(T=E.formatOp)){S=!0;var R=[O,p];p=R[0],O=R[1];var C=[E,m];m=C[0],E=C[1]}if(T||(T=function(e,t){var r,n=t.labelForFormat||e,o=(0,f.defaultValue)(t.cardinality,1);return 0==o?r=function(e,t,r,o,i,a,u,l){return"".concat(e," ").concat(n)}:1==o?r=function(e,t,r,o,i,a,u,l){return"".concat(e," ").concat(n," ").concat(r)}:2==o&&(r=function(e,t,r,o,i,a,u,l){var s=r.first(),c=r.get(1);return"".concat(e," ").concat(n," ").concat(s," AND ").concat(c)}),r}(p,m)),T){var P=_(t,r,d,n,o),j=function(e,t,r,n,o,i){var a,c=t.get("field"),d=t.get("valueSrc"),p=t.get("valueType"),g=(0,u.getFieldConfig)(e,c)||{},h=n||t.get("operator"),y=(0,u.getOperatorConfig)(e,h,c)||{},m=(0,f.defaultValue)(y.cardinality,1),O=t.get("value"),E=t.get("asyncListValues"),_=[],S=[];if(null!=O){var T=O.map((function(t,n){var a=d?d.get(n):null,f=p?p.get(n):null,m=(0,v.completeValue)(t,a,e),O=(0,l.getWidgetForFieldOp)(e,c,h,a),T=(0,s.default)((0,u.getFieldWidgetConfig)(e,c,h,O,a),["factory"]),R=b(e,r,m,a,f,T,g,h,y,o,i,E);return void 0!==R&&(_.push(a),S.push(f)),R}));T.filter((function(e){return void 0===e})).size>0||T.size<m||(a=1==m?T.first():T)}return[a,_.length>1?_:_[0],S.length>1?S:S[0]]}(t,c,r,p,n,o),L=(0,i.default)(j,3),w=L[0],I=L[1],N=L[2];if(void 0!==w){var A=[P,p,w,I,N,(0,s.default)(m,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),h,n,y,S];if(a)return A;var x=T.apply(void 0,A);return S&&(x=t.settings.formatReverse(x,p,O,m,E,n)),x}}}},b=function(e,t,r,n,o,i,a,l,f,d){var p=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,v=arguments.length>11?arguments[11]:void 0;if(void 0!==r){var g;if("field"==n)g=_(e,t,r,d,p);else if("func"==n)g=S(e,t,r,d,p);else if("function"==typeof i.formatValue){var h=i.formatValue,m=[r,y(y({},(0,c.default)(a,["fieldSettings","listValues"])),{},{asyncListValues:v}),(0,s.default)(i,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"]),d];if(l&&(m.push(l),m.push(f)),"field"==n){var O=(0,u.getFieldConfig)(e,r)||{};m.push(O)}g=h.apply(void 0,m)}else g=r;return g}},_=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=e.settings,s=a.fieldSeparator,c=a.fieldSeparatorDisplay,f=null;if(r){var d=(0,u.getFieldConfig)(e,r)||{},v=Array.isArray(r)?r:r.split(s),g=((0,l.getFieldPath)(r,e),(0,l.getFieldPathLabels)(r,e,i?o:null)),h=g?g.join(c):null,y=d.label2||h;f=(e.settings.formatField||p.settings.formatField)((0,l.formatFieldName)(r,e,t,i?o:null),v,y,d,e,n)}return f},S=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=r.get("func"),l=r.get("args"),s=(0,u.getFuncConfig)(e,a),c=n&&s.label||a,f={},d={};for(var p in s.args){var v=s.args[p],g=(0,u.getFieldConfig)(e,v),h=l?l.get(p):void 0,y=h?h.get("value"):void 0,m=h?h.get("valueSrc"):void 0,O=h?h.get("asyncListValues"):void 0,E=b(e,t,y,m,v.type,g,v,null,null,n,o,O),_=n&&v.label||p;void 0!==E&&(f[p]=E,d[_]=E)}var S=null;if("function"==typeof s.formatFunc){var T=s.formatFunc,R=[f,n];S=T.apply(void 0,R)}else{var C=Object.entries(d).map((function(e){var t=(0,i.default)(e,2),r=t[0],o=t[1];return n?"".concat(r,": ").concat(o):"".concat(o)})).join(", ");S="".concat(c,"(").concat(C,")")}return S}},6944:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.spelFormat=t._spelFormat=void 0;var o=n(r(7747)),i=n(r(7487)),a=n(r(7033)),u=r(7100),l=r(1820),s=n(r(7027)),c=n(r(8831)),f=r(3585),d=r(781),p=(r(8137),r(180)),v=r(9612),g=r(3725);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.spelFormat=function(e,t){return m(e,t,!1)};var m=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=O(e,t,n,null);return r?[o,n.errors]:(n.errors.length&&console.warn("Errors while exporting to SpEL:",n.errors),o)};t._spelFormat=m;var O=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e){var o=e.get("type");return"group"===o||"rule_group"===o?_(e,t,r,n):"rule"===o?R(e,t,r,n):"switch_group"==o?b(e,t,r,n):"case_group"==o?E(e,t,r,n):void 0}},E=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("type");if("case_group"==o){var i=e.get("properties")||new v.Map,u=C(t,i,r,null,n,"!case_value"),l=(0,a.default)(u,3),s=l[0];return l[1],l[2],[_(e,t,r,n),s]}r.errors.push("Unexpected child of type ".concat(o," inside switch"))},b=function(e,t,r){e.get("properties")||new v.Map;var n=e.get("children1");if(n){var o=n.map((function(e){return E(e,t,r,null)})).filter((function(e){return void 0!==e})).toArray();if(o.length){if(1==o.length&&!o[0][0])return o[0][1];for(var i=[],u=0;u<o.length;u++)u==o.length-1||o[u][0]?(i.push(o[u]),u==o.length-1&&o[u][0]&&i.push([void 0,null])):r.errors.push("No condition for case ".concat(u));for(var l="",s="",c=0;c<i.length;c++){var f=(0,a.default)(i[c],2),d=f[0],p=f[1];null==p&&(p="null"),null==d&&(d="true"),c!=i.length-1?(l+="(".concat(d," ? ").concat(p," : "),s+=")"):l+="".concat(p)}return l+s}}},_=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("type"),i=e.get("properties")||new v.Map,l=i.get("mode"),s=e.get("children1"),c=i.get("field");if(s){var f=i.get("conjunction");f||(f=(0,d.defaultConjunction)(t));var p=t.conjunctions[f],g=i.get("not"),h="rule_group"===o,y=h&&"struct"!=l,m=y?c:n,E=((0,u.getFieldConfig)(t,m)||{}).isSpelArray,b=i.get("operator");b||l&&"some"!=l||(b="some");var _=T(t,b,c),R=_!=b,P=b&&(0,u.getOperatorConfig)(t,_,c)||null,L=h&&(!_||0==P.cardinality),w=C(t,i,r,_,n,null),I=(0,a.default)(w,3),N=I[0],A=I[1],x=I[2],F=s.map((function(e){return O(e,t,r,m)})).filter((function(e){return void 0!==e}));if(y&&!L){if(null==N)return}else if(!F.size)return;var D,k=h,M=F.size?p.spelFormatConj(F,f,g,k):null;if(y){var V=j(r,t,c,n),U=E?".length":".size()",q="".concat(V).concat(U),W=M?"".concat(V,".?[").concat(M,"]").concat(U):q;D=S(r,t,i,W,L?q:N,_,A,x,R)}else D=M;return D}},S=function(e,t,r,n,o,i,a,l){var c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],d=r.get("field"),p=(0,u.getOperatorConfig)(t,i,d)||{},v=(0,u.getFieldConfig)(t,d)||{},g=r.get("operatorOptions"),h=p.spelFormatOp||function(e,t){var r=t.spelOp;if(r){var n,o="$"==r[0],i="."==r[0]||o,a="()"==r.substring(r.length-2),u=i?r.slice(1):a?r.substring(0,r.length-2):r,l=(0,f.defaultValue)(t.cardinality,1);return 0==l?n=function(e,t,r,n,o,a,l,s){return i?"".concat(e,".").concat(u,"()"):"".concat(e," ").concat(u)}:1==l&&(n=function(e,t,r,n,l,s,c,f){return o?"".concat(r,".").concat(u,"(").concat(e,")"):a?"".concat(u,"(").concat(e,", ").concat(r,")"):i?"".concat(e,".").concat(u,"(").concat(r,")"):"".concat(e," ").concat(u," ").concat(r)}),n}}(0,p);if(h){var y,m=[n,i,o,a,l,(0,s.default)(p,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),g,v];return y=h.apply(void 0,m),c&&(y=t.settings.spelFormatReverse(y)),void 0===y&&e.errors.push("Operator ".concat(i," is not supported for value source ").concat(a)),y}e.errors.push("Operator ".concat(i," is not supported"))},T=function(e,t,r){if(t){var n=(0,u.getOperatorConfig)(e,t,r)||{},o=n.reversedOp,i=(0,u.getOperatorConfig)(e,o,r)||{},a=n.spelOp||n.spelFormatOp,l=i.spelOp||i.spelFormatOp;if(a||l){if(!a&&l){var s=[o,t];t=s[0],o=s[1];var c=[i,n];n=c[0],i=c[1]}return t}}},R=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("properties")||new v.Map,i=o.get("field"),u=o.get("operator");if(null!=i&&null!=u){var l=T(t,u,i);if(l){var s=l!=u,c=C(t,o,r,l,n,null),f=(0,a.default)(c,3),d=f[0],p=f[1],g=f[2];if(void 0!==d){var h=j(r,t,i,n);return S(r,t,o,h,d,l,p,g,s)}}else r.errors.push("Operator ".concat(u," is not supported"))}},C=function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=t.get("field"),c=t.get("valueSrc"),d=t.get("valueType");("!case_value"==i||d&&"case_value"==d.get(0))&&(a="!case_value");var v,g=(0,u.getFieldConfig)(e,a)||{},h=(0,u.getOperatorConfig)(e,n,a)||{},y=(0,f.defaultValue)(h.cardinality,1),m=t.get("value"),O=t.get("asyncListValues"),E=[],b=[];if(null!=m){var _=m.map((function(t,i){var f=c?c.get(i):null,v=d?d.get(i):null,y=(0,p.completeValue)(t,f,e),m=(0,l.getWidgetForFieldOp)(e,a,n,f),_=(0,s.default)((0,u.getFieldWidgetConfig)(e,a,n,m,f),["factory"]),S=P(r,e,y,f,v,_,g,n,h,o,O);return void 0!==S&&(E.push(f),b.push(v)),S})),S=_.filter((function(e){return void 0===e})).size>0;_.size<y||S||(v=y>1?_.toArray():1==y?_.first():null)}return[v,E.length>1?E:E[0],b.length>1?b:b[0]]},P=function(e,t,r,n,o,i,a,l,f){var d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,p=arguments.length>10?arguments[10]:void 0;if(void 0!==r){var v;if("field"==n)v=j(e,t,r,d);else if("func"==n)v=L(e,t,r,d);else if("function"==typeof i.spelFormatValue){var h=i.spelFormatValue,m=[r,y(y({},(0,c.default)(a,["fieldSettings","listValues"])),{},{asyncListValues:p}),(0,s.default)(i,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(l&&(m.push(l),m.push(f)),"field"==n){var O=(0,u.getFieldConfig)(t,r)||{};m.push(O)}v=h.apply(void 0,m)}else v=(0,g.spelEscape)(r);return v}},j=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r){var o=t.settings.fieldSeparator,i=(0,u.getFieldConfig)(t,r)||{},s=Array.isArray(r)?r:r.split(o),c=((0,l.getFieldPath)(r,t,n),(0,l.getFieldPartsConfigs)(r,t,n)),f=t.settings.formatSpelField,d=(0,l.formatFieldName)(r,t,e);if(n){var p=(0,u.getFieldConfig)(t,n)||{},v=n;p.fieldName&&(v=p.fieldName),0==d.indexOf(v+o)?d=d.slice((v+o).length):e.errors.push("Can't cut group ".concat(v," from field ").concat(d))}return f(d,n,s,c.map((function(e){var t,r=(0,a.default)(e,3),n=r[0],o=r[1],i=r[2];return i&&(t="!struct"==i.type||"!group"==i.type&&"struct"==i.mode?o.isSpelMap?"map":"class":"!group"==i.type?o.isSpelItemMap?"[map]":"[class]":"class"),{key:n,parent:t,isSpelVariable:null==o?void 0:o.isSpelVariable}})),i,t)}},L=function(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=r.get("func"),s=r.get("args"),c=(0,u.getFuncConfig)(t,l),f=c.spelFunc||l,d={};for(var p in c.args){var v=c.args[p],g=(0,u.getFieldConfig)(t,v),h=s?s.get(p):void 0,y=h?h.get("value"):void 0,m=h?h.get("valueSrc"):void 0,O=h?h.get("asyncListValues"):void 0,E=P(e,t,y,m,v.type,g,v,null,null,i,O);if(null!=y&&void 0===E)return void e.errors.push("Can't format value of arg ".concat(p," for func ").concat(l));void 0!==E&&(d[p]=E)}if("function"==typeof c.spelFormatFunc){var b=[d];n=c.spelFormatFunc.apply(void 0,b)}else{var _=Object.entries(d).map((function(e){var t=(0,a.default)(e,2);return t[0],t[1]}));if("."==f[0]&&_.length){var S=(0,o.default)(_),T=S[0],R=S.slice(1);n="".concat(T).concat(f,"(").concat(R.join(", "),")")}else n="".concat(f,"(").concat(_.join(", "),")")}return n}},3936:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.sqlFormat=t._sqlFormat=void 0;var o=n(r(7033)),i=n(r(7487)),a=r(7100),u=r(1820),l=n(r(7027)),s=n(r(8831)),c=r(3585),f=r(781),d=r(8137),p=r(180),v=r(9612),g=r(3725);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.sqlFormat=function(e,t){return m(e,t,!1)};var m=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=O(e,t,n);return r?[o,n.errors]:(n.errors.length&&console.warn("Errors while exporting to SQL:",n.errors),o)};t._sqlFormat=m;var O=function(e,t,r){if(e){var n=e.get("type"),o=e.get("children1");return("group"===n||"rule_group"===n)&&o&&o.size?E(e,t,r):"rule"===n?b(e,t,r):void 0}},E=function(e,t,r){var n=e.get("type"),o=e.get("properties")||new v.Map,i=e.get("children1"),u="rule_group"===n?o.get("field"):null;"array"==((0,a.getFieldConfig)(t,u)||{}).mode&&r.errors.push("Aggregation is not supported for ".concat(u));var l=o.get("not"),s=i.map((function(e){return O(e,t,r)})).filter((function(e){return void 0!==e}));if(s.size){var c=o.get("conjunction");return c||(c=(0,f.defaultConjunction)(t)),t.conjunctions[c].sqlFormatConj(s,c,l)}},b=function(e,t,r){var n=e.get("properties")||new v.Map,o=n.get("field"),i=n.get("operator"),s=n.get("operatorOptions"),f=n.get("valueSrc"),d=n.get("valueType"),g=n.get("value"),h=n.get("asyncListValues");if(null!=o&&null!=i){var y=(0,a.getFieldConfig)(t,o)||{},m=(0,a.getOperatorConfig)(t,i,o)||{},O=m.reversedOp,E=(0,a.getOperatorConfig)(t,O,o)||{},b=(0,c.defaultValue)(m.cardinality,1),T=!1,R=m.sqlOp||m.sqlFormatOp,C=E.sqlOp||E.sqlFormatOp;if(R||C){if(!C&&C){T=!0;var P=[O,i];i=P[0],O=P[1];var j=[E,m];m=j[0],E=j[1]}var L=[],w=[],I=g.map((function(e,n){var s=f?f.get(n):null,c=d?d.get(n):null,v=(0,p.completeValue)(e,s,t),g=(0,u.getWidgetForFieldOp)(t,o,i,s),O=(0,l.default)((0,a.getFieldWidgetConfig)(t,o,i,g,s),["factory"]),E=_(r,t,v,s,c,O,y,i,m,h);return void 0!==E&&(L.push(s),w.push(c)),E}));if(!(I.filter((function(e){return void 0===e})).size>0||I.size<b)){var N=1==b?I.first():I,A=m.sqlFormatOp||function(e,t){var r,n=t.sqlOp||e,o=(0,c.defaultValue)(t.cardinality,1);return 0==o?r=function(e,t,r,o,i,a,u,l){return"".concat(e," ").concat(n)}:1==o?r=function(e,t,r,o,i,a,u,l){return"".concat(e," ").concat(n," ").concat(r)}:2==o&&(r=function(e,t,r,o,i,a,u,l){var s=r.first(),c=r.get(1);return"".concat(e," ").concat(n," ").concat(s," AND ").concat(c)}),r}(i,m);if(A){var x,F=[S(r,t,o),i,N,L.length>1?L:L[0],w.length>1?w:w[0],(0,l.default)(m,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),s,y];if(x=A.apply(void 0,F),T&&(x=t.settings.sqlFormatReverse(x)),void 0!==x)return x;r.errors.push("Operator ".concat(i," is not supported for value source ").concat(L.join(", ")))}else r.errors.push("Operator ".concat(i," is not supported"))}}else r.errors.push("Operator ".concat(i," is not supported"))}},_=function(e,t,r,n,o,i,u,c,f,d){if(void 0!==r){var p;if("field"==n)p=S(e,t,r);else if("func"==n)p=T(e,t,r);else if("function"==typeof i.sqlFormatValue){var v=i.sqlFormatValue,h=[r,y(y({},(0,s.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:d}),(0,l.default)(i,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(c&&(h.push(c),h.push(f)),"field"==n){var m=(0,a.getFieldConfig)(t,r)||{};h.push(m)}p=v.apply(void 0,h)}else p=Array.isArray(r)?r.map((function(e){return g.SqlString.escape(e)})):g.SqlString.escape(r);return p}},S=function(e,t,r){if(r){var n=t.settings.fieldSeparator,o=(0,a.getFieldConfig)(t,r)||{},i=Array.isArray(r)?r:r.split(n),l=((0,u.getFieldPath)(r,t),(0,u.getFieldPathLabels)(r,t)),s=l?l.join(n):null;return(t.settings.formatField||d.settings.formatField)((0,u.formatFieldName)(r,t,e),i,s,o,t)}},T=function(e,t,r){var n,i=r.get("func"),u=r.get("args"),l=(0,a.getFuncConfig)(t,i),s=l.sqlFunc||i,c={};for(var f in l.args){var d=l.args[f],p=(0,a.getFieldConfig)(t,d),v=u?u.get(f):void 0,g=v?v.get("value"):void 0,h=v?v.get("valueSrc"):void 0,y=v?v.get("asyncListValues"):void 0,m=_(e,t,g,h,d.type,p,d,null,null,y);if(null!=g&&void 0===m)return void e.errors.push("Can't format value of arg ".concat(f," for func ").concat(i));void 0!==m&&(c[f]=m)}if("function"==typeof l.sqlFormatFunc){var O=[c];n=l.sqlFormatFunc.apply(void 0,O)}else{var E=Object.entries(c).map((function(e){var t=(0,o.default)(e,2);return t[0],t[1]})).join(", ");n="".concat(s,"(").concat(E,")")}return n}},1071:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2883);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(6523);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(7985);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},6523:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.loadFromJsonLogic=t._loadFromJsonLogic=void 0;var o=n(r(2409)),i=n(r(7747)),a=n(r(7487)),u=n(r(7033)),l=n(r(2676)),s=r(3585),c=r(7100),f=r(1820),d=r(2883),p=r(781),v=n(r(2468));function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e){return Array.from(new Set(e))};t.loadFromJsonLogic=function(e,t){return m(e,t,!1)};var m=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=(0,c.extendConfig)(t),i=O(o),a=e?E(e,i,o,"rule",n):void 0;a&&"group"!=a.type&&(a=C(a,o));var u=a?(0,d.loadTree)(a):void 0;return r?[u,n.errors]:(n.errors.length&&console.warn("Errors while importing from JsonLogic:",n.errors),u)};t._loadFromJsonLogic=m;var O=function(e){var t={};for(var r in e.operators){var n=e.operators[r];if("string"==typeof n.jsonLogic){var o=(n._jsonLogicIsRevArgs?"#":"")+n.jsonLogic+"/"+(0,s.defaultValue)(n.cardinality,1);t[o]||(t[o]=[]),t[o].push(r)}else if("string"==typeof n.jsonLogic2){var i=n.jsonLogic2+"/"+(0,s.defaultValue)(n.cardinality,1);t[i]||(t[i]=[]),t[i].push(r)}}var a={};for(var u in e.conjunctions)a[e.conjunctions[u].jsonLogicConj||u.toLowerCase()]=u;var l={};for(var c in e.funcs){var f=e.funcs[c],d=void 0;f.jsonLogicIsMethod?d="#"+f.jsonLogic:"string"==typeof f.jsonLogic&&(d=f.jsonLogic),d&&(l[d]||(l[d]=[]),l[d].push(c))}var p=e.settings.jsonLogic;return{operators:t,conjunctions:a,funcs:l,varKeys:["var",p.groupVarKey,p.altVarKey]}},E=function e(t,r,n,o,i){var a,u,l,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],f=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;(0,s.isJsonLogic)(t)&&(u=t[a=Object.keys(t)[0]],Array.isArray(u)||(u=[u]));var v=i.errors.length,g=n.settings.jsonLogic.lockedOp,h="!"==a&&1==u.length&&u[0]&&(0,s.isJsonLogic)(u[0])&&r.varKeys.includes(Object.keys(u[0])[0]),y="!"==a&&!h,m=g&&a==g;m?l=e(u[0],r,n,o,i,c,f,d,p,!0):y?l=e(u[0],r,n,o,i,!c,f,d,p):"val"==o?l=_(a,u,r,n,c,i,p)||S(a,u,r,n,c,f,i,p)||b(t,f,d,n,i):"rule"==o&&(l=T(a,u,r,n,c,i,p,!1)||j(a,u,r,n,c,i,p));var O=i.errors.length;return"!"!=a&&void 0===l&&O==v&&i.errors.push("Can't parse logic ".concat(JSON.stringify(t))),m&&(l.properties.isLocked=!0),l},b=function(e,t,r,n,o){if(void 0!==e){var i=n.widgets[r||t.mainWidget];if(i){if(!(0,s.isJsonLogic)(e)){if(t&&"time"==t.type&&"number"==typeof e){var a=Math.floor(e/60/60)%24,u=Math.floor(e/60)%60,l=e%60,c=i.valueFormat;if(c){var f=new Date(e);f.setMilliseconds(0),f.setHours(a),f.setMinutes(u),f.setSeconds(l),e=(0,v.default)(f).format(c)}else e="".concat(a,":").concat(u,":").concat(l)}if(t&&["date","datetime"].includes(t.type)&&e&&!(e instanceof Date))try{var d=new Date(e);d instanceof Date&&d.toISOString()===e&&(e=d)}catch(t){o.errors.push("Can't convert value ".concat(e," as Date")),e=void 0}if(e instanceof Date&&t){var p=i.valueFormat;p&&(e=(0,v.default)(e).format(p))}var g;return e&&t.fieldSettings&&t.fieldSettings.asyncFetch&&(g=Array.isArray(e)?e:[e]),{valueSrc:"value",value:e,valueType:i.type,asyncListValues:g}}o.errors.push("Unexpected logic in value: ".concat(JSON.stringify(e)))}else o.errors.push("No widget for type ".concat(t.type))}},_=function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=n.settings.fieldSeparator;if(r.varKeys.includes(e)&&"string"==typeof t[0]){var l=t[0];a&&(l=[a,l].join(u)),l=(0,c.normalizeField)(n,l);var s=(0,c.getFieldConfig)(n,l);return s?{valueSrc:"field",value:l,valueType:s.type}:void i.errors.push("No config for field ".concat(l))}},S=function(e,t,r,n,l,s,c){var f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(e){var d,p,v,g="method"==e;if(g){var y,m,O=(0,i.default)(t);y=O[0],d=O[1],m=O.slice(2),p=[y].concat((0,o.default)(m))}else d=e,p=t;var b=(g?"#":"")+d,_=(r.funcs[b]||[]).filter((function(e){return!s||n.funcs[e].returnType==s.type}));if(_.length)v=_[0];else for(var S=(0,a.default)({},e,t),T=0,R=Object.entries(n.funcs||{});T<R.length;T++){var C=(0,u.default)(R[T],2),P=C[0],j=C[1];if(j.jsonLogicImport&&j.returnType==s.type){var L=void 0;try{L=j.jsonLogicImport(S)}catch(e){}L&&(v=P,p=L)}}if(v&&v){var w=n.funcs[v],I=Object.keys(w.args||{}),N=p.reduce((function(e,t,o){var i=I[o],u=w.args[i],l=E(t,r,n,"val",c,!1,u,null,f);if(void 0!==l||void 0!==(l=u.defaultValue))return h(h({},e),{},(0,a.default)({},i,l));c.errors.push("No value for arg ".concat(i," of func ").concat(v))}),{});return{valueSrc:"func",value:{func:v,args:N},valueType:w.returnType}}}},T=function(e,t,r,n,i,f){var d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,p=r.conjunctions[e],v=n.settings.fieldSeparator,g=d?(0,c.getFieldConfig)(n,d):null;if(null==g||g.type,p){var m=t.map((function(e){return E(e,r,n,"rule",f,!1,null,null,d)})).filter((function(e){return void 0!==e})).reduce((function(e,t){return h(h({},e),{},(0,a.default)({},t.id,t))}),{}),O=Object.values(m).map((function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.field})).filter((function(e){return e&&e.includes(v)})),b=Object.fromEntries(y(O).map((function(e){var t=e.split(v),r=Object.fromEntries(t.slice(0,-1).map((function(e,t,r){return[].concat((0,o.default)(r.slice(0,t)),[e])})).map((function(e){return[e.join(v),(0,c.getFieldConfig)(n,e)]})).filter((function(e){var t=(0,u.default)(e,2);return t[0],"!group"==t[1].type})));return[e,Object.keys(r)]}))),_=(Object.values(m).map((function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.field})).map((function(e){return b[e]})).filter((function(e){return e&&e.length})),y(Object.values(b).flat())),S=(R(_),{conjunction:p,not:i}),T=(0,l.default)(),C={},P={};return Object.entries(m).map((function(e){var t=(0,u.default)(e,2),r=t[0],i=t[1];if("group"==i.type||"rule_group"==i.type)C[r]=i;else{var a,f=null==i||null===(a=i.properties)||void 0===a?void 0:a.field,g=b[f],h=null==g?void 0:g.at(-1);if(h){var y=C,m=d?d.split(v):[];(0,s.shallowEqual)(m,h.split(v).slice(0,m.length))||(m=[]),h.split(v).slice(m.length).map((function(e,t,r){return[].concat((0,o.default)(m),(0,o.default)(r.slice(0,t)),[e]).join(v)})).map((function(e){return(0,c.normalizeField)(n,e)})).map((function(e){return{f:e,fc:(0,c.getFieldConfig)(n,e)||{}}})).filter((function(e){return"!struct"!=e.fc.type})).map((function(e,t){var r=e.f,n=e.fc,o=P[r];o||(o=(0,l.default)(),P[r]=o,y[o]={type:"rule_group",id:o,children1:{},properties:{conjunction:p,not:!1,field:r,mode:n.mode}}),y=y[o].children1})),y[r]=i}else C[r]=i}})),{type:"group",id:T,children1:C,properties:S}}},R=function(e){for(var t=(0,o.default)(e).sort((function(e,t){return e.length-t.length})),r=0;r<t.length;r++)for(var n=r+1;n<t.length;n++)0==t[n].indexOf(t[r])&&(t.splice(n,1),n--);return t},C=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"group",id:(0,l.default)(),children1:(0,a.default)({},e.id,e),properties:{conjunction:(0,p.defaultConjunction)(t),not:r}}},P=function(e,t,r,n,o,a,l,f){var d=!(("all"==e||"some"==e)&&(0,s.isJsonLogic)(r[1])&&"in"==Object.keys(r[1])[0])&&a.settings.groupOperators.includes(e),p=d?0:t-1;(d||["==","!="].includes(e)&&1==p&&null===r[1])&&(p=0);var v=e+"/"+p,g=a.settings.fieldSeparator,h=o.operators[(f?"#":"")+v];if(h){var y,m=[];if(["<","<=",">",">="].includes(e)&&3==t)y=r[1],m=[r[0],r[2]];else if(f)y=r[1],m=[r[0]];else{var O=(0,i.default)(r);y=O[0],m=O.slice(1)}if((0,s.isJsonLogic)(y)){var E,b,_=Object.keys(y)[0],S=Object.values(y)[0];if(o.varKeys.includes(_)&&"string"==typeof S&&(E=S),d&&(b=m[0],m=[]),"reduce"==_&&Array.isArray(S)&&3==S.length){var T=S,R=(0,u.default)(T,3),C=R[0],P=R[1],j=R[2];if((0,s.isJsonLogic)(C)&&0==j&&(0,s.isJsonLogic)(P)&&Array.isArray(P["+"])&&1==P["+"][0]&&(0,s.isJsonLogic)(P["+"][1])&&"accumulator"==P["+"][1].var)if(_=Object.keys(C)[0],S=Object.values(C)[0],"filter"==_){var L=S,w=(0,u.default)(L,2),I=w[0],N=w[1];(0,s.isJsonLogic)(I)&&(_=Object.keys(I)[0],S=Object.values(I)[0],o.varKeys.includes(_)&&"string"==typeof S&&(E=S,b=N))}else o.varKeys.includes(_)&&"string"==typeof S&&(E=S)}if(E){n&&(E=[n,E].join(g)),E=(0,c.normalizeField)(a,E);var A=(0,c.getFieldConfig)(a,E);if(A){var x=h[0];if(h.length>1&&A&&A.operators){if(h=h.filter((function(e){return A.operators.includes(e)})),0==h.length)return void l.push("No corresponding ops for field ".concat(E));x=h[0]}return{field:E,fieldConfig:A,opKey:x,args:m,having:b}}l.push("No config for field ".concat(E))}else l.push("Unknown field ".concat(JSON.stringify(y)))}else l.push("Incorrect operands for ".concat(e,": ").concat(JSON.stringify(r)))}},j=function e(t,r,n,o,i,u){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(t){var d=r.length;if(("all"==t||"some"==t)&&(0,s.isJsonLogic)(r[1])){var v=Object.keys(r[1])[0];"in"==v&&(r=[r[0],r[1][v][1]],t=t+"-"+v)}var g=function(e,t,r,n,o,i,a){var u=[],l=P(e,t,r,n,o,i,u,!1)||P(e,t,r,n,o,i,u,!0);if(l)return l;a.errors.push(u.join("; ")||"Unknown op ".concat(e,"/").concat(t))}(t,d,r,c,n,o,u);if(g){var h,y,m=g.field,O=g.fieldConfig,b=g.opKey,_=g.args,S=g.having,R=o.operators[b],j=(void 0!==O.showNot?O.showNot:o.settings.showNot,!0);if("!group"==O.type&&S){y=S[h=Object.keys(S)[0]],Array.isArray(y)||(y=[y]);var L="!"==h&&1==y.length&&y[0]&&(0,s.isJsonLogic)(y[0])&&n.varKeys.includes(Object.keys(y[0])[0]);"!"!=h||L||(i=!i,y=(S=S["!"])[h=Object.keys(S)[0]],Array.isArray(y)||(y=[y]))}i&&R.reversedOp&&(i=!1,b=R.reversedOp,R=o.operators[b]);var w=(0,f.getWidgetForFieldOp)(o,m,b),I=_.map((function(e){return E(e,n,o,"val",u,!1,O,w,c)}));if(!I.filter((function(e){return void 0===e})).length){var N;if("!group"==O.type&&S){if(void 0!==n.conjunctions[h])N=T(h,y,n,o,i,u,m,!0),i=!1;else{var A,x=e(h,y,n,o,i&&j,u,m);!i||null!=x&&null!==(A=x.properties)&&void 0!==A&&A.not||(i=!1),N=function(e,t,r,n,o){if(e)return{type:"rule_group",id:(0,l.default)(),children1:(0,a.default)({},e.id,e),properties:{conjunction:o||(0,p.defaultGroupConjunction)(n,r),not:!1,field:t}}}(x,m,O,o,n.conjunctions.and)}if(!N)return;N.type="rule_group",i&&Object.assign(N.properties,{not:i}),Object.assign(N.properties,{field:m,mode:O.mode,operator:b}),"array"==O.mode&&Object.assign(N.properties,{value:I.map((function(e){return e.value})),valueSrc:I.map((function(e){return e.valueSrc})),valueType:I.map((function(e){return e.valueType}))})}else if("!group"!=O.type||S){var F=I.map((function(e){return e.asyncListValues})).filter((function(e){return null!=e})),D=F.length?F[0]:void 0;N={type:"rule",id:(0,l.default)(),properties:{field:m,operator:b,value:I.map((function(e){return e.value})),valueSrc:I.map((function(e){return e.valueSrc})),valueType:I.map((function(e){return e.valueType})),asyncListValues:D}},i&&(N=C(N,o,i))}else N={type:"rule_group",id:(0,l.default)(),children1:{},properties:{conjunction:(0,p.defaultGroupConjunction)(o,O),not:i,mode:O.mode,field:m,operator:b}},"array"==O.mode&&Object.assign(N.properties,{value:I.map((function(e){return e.value})),valueSrc:I.map((function(e){return e.valueSrc})),valueType:I.map((function(e){return e.valueType}))});return N}}}}},7985:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.loadFromSpel=t._loadFromSpel=void 0;var o=n(r(7033)),i=n(r(5992)),a=n(r(7487)),u=n(r(2409)),l=r(138),s=n(r(2676)),c=r(7100),f=r(1820),d=r(2883),p=r(781),v=r(3585),g=n(r(2468));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.loadFromSpel=function(e,t){return m(e,t,!0)};var m=function(e,t){var r,n,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={errors:[]},a=(0,c.extendConfig)(t),u=b(a),s=void 0;try{r=l.SpelExpressionEvaluator.compile(e)._compiledExpression}catch(e){i.errors.push(e)}r&&(v.logger.debug("compiledExpression:",r),n=O(r,i),v.logger.debug("convertedObj:",n,i),(s=R(n,u,a,i))&&"group"!=s.type&&"switch_group"!=s.type&&(s=w(s,a,n.not)),v.logger.debug("jsTree:",s));var f=s?(0,d.loadTree)(s):void 0;return o?[f,i.errors]:(i.errors.length&&console.warn("Errors while importing from SpEL:",i.errors),f)};t._loadFromSpel=m;var O=function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.getType(),l=t.getChildren().map((function(n){return e(n,r,t)}));if("op-or"!=a&&"op-and"!=a||(l=l.reduce((function(e,t){var r=t.type!=a||t.not?[t]:t.children;return[].concat((0,u.default)(e),(0,u.default)(r))}),[])),"op-not"==a)return 1!=l.length&&r.errors.push("Operator NOT should have 1 child, but got ".concat(l.length,"}")),y(y({},l[0]),{},{not:!l[0].not});if("compound"==a){var s=(l=l.filter((function(e){return!("selection"==e.type&&1==e.children.length&&"boolean"==e.children[0].type&&1==e.children[0].val)}))).find((function(e){return"selection"==e.type}));s&&1!=s.children.length&&r.errors.push("Selection should have 1 child, but got ".concat(s.children.length));var c=s?s.children[0]:null,f=l[l.length-1],d="method"==f.type&&"size"==f.val.methodName||"!func"==f.type&&"size"==f.methodName,p="property"==f.type&&"length"==f.val,g=l.filter((function(e){return e!==s&&e!==f}));if(d||p)return{type:"!aggr",filter:c,source:{type:"compound",children:g}};if(l=(l=l.filter((function(e){var t="variable"==e.type&&"this"==e.val,r="variable"==e.type&&"root"==e.val;return!(t||r)}))).map((function(e){return"indexer"==e.type&&1==e.children.length?{type:"indexer",val:e.children[0].val,itype:e.children[0].type}:e})),"method"==f.type)return{type:"!func",obj:l.filter((function(e){return e!==f})),methodName:f.val.methodName,args:f.val.args};if("!func"==f.type){var h=l.filter((function(e){return e!==f}));return y(y({},f),{},{obj:h})}}try{t.getRaw?n=t.getRaw():0==t.getValue.length&&(n=t.getValue())}catch(e){v.logger.error("[spel2js] Error in getValue()",e)}if("ternary"==a&&(n=E(l)),"object"===(0,i.default)(n)&&null!==n&&(n.methodName||n.functionName)&&(n.args=n.args.map((function(n){return e(n,r,t)}))),"list"==a&&(n=n.map((function(n){return e(n,r,t)})),!o&&1==n.length))return n[0];if("constructorref"==a){var m=l.find((function(e){return"qualifiedidentifier"==e.type})),O=null==m?void 0:m.val;return O?{type:"!new",cls:O,args:l.filter((function(e){return"qualifiedidentifier"!=e.type}))}:void r.errors.push("Can't find qualifiedidentifier in constructorref children: ".concat(JSON.stringify(l)))}if("typeref"==a){var b=l.find((function(e){return"qualifiedidentifier"==e.type})),_=null==b?void 0:b.val;return _?(l.filter((function(e){return"qualifiedidentifier"!=e.type})),{type:"!type",cls:_}):void r.errors.push("Can't find qualifiedidentifier in typeref children: ".concat(JSON.stringify(l)))}if("function"==a||"method"==a){var S=n,T=S.functionName,R=S.methodName,C=S.args;return{type:"!func",methodName:T||R,isVar:"function"==a,args:C}}return{type:a,children:l,val:n}},E=function(e){var t=[];return function e(r){var n=(0,o.default)(r,3),i=n[0],a=n[1],u=n[2];t.push([i,a]),"ternary"==(null==u?void 0:u.type)?e(u.children):t.push([void 0,u])}(e),t},b=function(e){var t={},r=function(r){var n=e.operators[r];if(n.spelOps)n.spelOps.forEach((function(e){var n=e;t[n]||(t[n]=[]),t[n].push(r)}));else if(n.spelOp){var o=n.spelOp;t[o]||(t[o]=[]),t[o].push(r)}else v.logger.log("[spel] No spelOp for operator ".concat(r))};for(var n in e.operators)r(n);var o={};for(var i in e.conjunctions)o[e.conjunctions[i].spelConj||i.toLowerCase()]=i;var a={};for(var u in e.funcs){var l=e.funcs[u],s=void 0;"string"==typeof l.spelFunc&&(s=l.spelFunc),s&&(a[s]||(a[s]=[]),a[s].push(u))}return{operators:t,conjunctions:o,funcs:a}},_=function(e,t){var r=!1,n=e.map((function(e){if("variable"==e.type||"property"==e.type||"indexer"==e.type&&"string"==e.itype)return e.val;r=!0,t.errors.push("Unexpected item in compound: ".concat(JSON.stringify(e)))}));return r?void 0:n},S=function e(t,r,n,o,i){if(null!=t){var l=n.settings.fieldSeparator,s={number:"number",string:"text",boolean:"boolean",null:"null"},f=null!=i&&i._groupField?[null==i?void 0:i._groupField]:[];if("compound"==t.type){var d,p,v=_(t.children,o);if(!v)return;var h=[].concat(f,(0,u.default)(v));return{valueSrc:"field",isVariable:"variable"==(null===(d=t.children)||void 0===d||null===(p=d[0])||void 0===p?void 0:p.type),value:h.join(l)}}if("variable"==t.type||"property"==t.type){var m=[].concat(f,[t.val]);return{valueSrc:"field",isVariable:"variable"==t.type,value:m.join(l)}}if(s[t.type]){var O=t.val,E=s[t.type];return null!=i&&i.isUnary&&(O=-O),{valueSrc:"value",valueType:E,value:O}}if("list"==t.type){var b,S=t.val.map((function(i){return e(i,r,n,o,t)}));return S.length&&(null===(b=S[0])||void 0===b||b.valueType),{valueSrc:"value",valueType:"multiselect",value:S.map((function(e){return null==e?void 0:e.value}))}}if("!func"==t.type){var R,C=t.obj,P=t.methodName,L=t.args,w=(t.isVar,R={},(0,a.default)(R,".contains","like"),(0,a.default)(R,".startsWith","starts_with"),(0,a.default)(R,".endsWith","ends_with"),(0,a.default)(R,"$contains","select_any_in"),(0,a.default)(R,".equals","multiselect_equals"),(0,a.default)(R,"CollectionUtils.containsAny()","multiselect_contains"),R),I=L.map((function(a){return e(a,r,n,o,y(y({},t),{},{_groupField:null==i?void 0:i._groupField}))}));if("contains"==P&&C&&"list"==C[0].type){var N=C.map((function(i){return e(i,r,n,o,t)}));if(1!=I.length||"field"!=I[0].valueSrc)return void o.errors.push("Expected arg to method ".concat(P," to be field but got: ").concat(JSON.stringify(I)));var A=I[0].value;if(1!=N.length||"multiselect"!=N[0].valueType)return void o.errors.push("Expected object of method ".concat(P," to be inline list but got: ").concat(JSON.stringify(N)));var x=w["$"+P],F=N[0];return T(n,o,A,x,[F])}if(C&&"property"==C[0].type&&w[C[0].val+"."+P+"()"]){var D=w[C[0].val+"."+P+"()"],k=I[0].value,M=I.slice(1);return T(n,o,k,D,M)}if(w["."+P]){var V=w["."+P],U=_(C,o);if(U&&1==I.length){var q=[].concat(f,(0,u.default)(U)).join(l);return T(n,o,q,V,I)}}else{if("parse"==P&&C&&"!new"==C[0].type&&"SimpleDateFormat"==C[0].cls.at(-1)){var W=C[0].args.map((function(a){return e(a,r,n,o,y(y({},t),{},{_groupField:null==i?void 0:i._groupField}))}));if(1!=W.length||"text"!=W[0].valueType)return void o.errors.push("Expected args of ".concat(C[0].cls.join("."),".").concat(P," to be 1 string but got: ").concat(JSON.stringify(W)));if(1!=I.length||"text"!=I[0].valueType)return void o.errors.push("Expected args of ".concat(C[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(I)));var G=W[0].value,B=I[0].value,K=G.includes(" ")?"datetime":"date",z=K,H=(0,c.getFieldConfig)(n,null),Y=n.widgets[z||(null==H?void 0:H.mainWidget)].valueFormat,$=(0,g.default)(B,g.default.ISO_8601);return{valueSrc:"value",valueType:K,value:$.isValid()?$.format(Y):void 0}}if("parse"==P&&C&&"!type"==C[0].type&&"LocalTime"==C[0].cls.at(-1)){if(1!=I.length||"text"!=I[0].valueType)return void o.errors.push("Expected args of ".concat(C[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(I)));var J=I[0].value,X="time",Q=X,Z=(0,c.getFieldConfig)(n,null),ee=n.widgets[Q||(null==Z?void 0:Z.mainWidget)].valueFormat,te=(0,g.default)(J,"HH:mm:ss");return{valueSrc:"value",valueType:X,value:te.isValid()?te.format(ee):void 0}}o.errors.push("Unsupported method ".concat(P))}}else{if("op-plus"==t.type&&"ternary"==(null==i?void 0:i.type))return j(t,r,n,o);o.errors.push("Can't convert arg of type ".concat(t.type))}}},T=function(e,t,r,n,o){if(!o.filter((function(e){return void 0===e})).length){var i=(0,c.getFieldConfig)(e,r);if(i){var a=(0,f.getWidgetForFieldOp)(e,r,n),u=e.widgets[a||i.mainWidget],l=o.map((function(e){return e.asyncListValues})).filter((function(e){return null!=e})),d=l.length?l[0]:void 0;return{type:"rule",id:(0,s.default)(),properties:{field:r,operator:n,value:o.map((function(e){return e.value})),valueSrc:o.map((function(e){return e.valueSrc})),valueType:o.map((function(e){return"value"==e.valueSrc&&((null==u?void 0:u.type)||(null==i?void 0:i.type))||e.valueType})),asyncListValues:d}}}t.errors.push("No config for field ".concat(r))}},R=function e(t,r,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(t){var u;if(0==t.type.indexOf("op-")){var l=t.type.slice(3);if(("minus"==l||"plus"==l)&&1==t.children.length)return t.isUnary=!0,e(t.children[0],r,n,i,t);var d="and"==l&&2==t.children.length&&"op-ge"==t.children[0].type&&"op-le"==t.children[1].type,p="or"==l&&2==t.children.length&&"op-lt"==t.children[0].type&&"op-gt"==t.children[1].type;if(d||p){var g=(0,o.default)(t.children[0].children,2),h=g[0],m=g[1],O=(0,o.default)(t.children[1].children,2),E=O[0],b=O[1],_="number"==m.type&&"number"==b.type,R=function(e,t,r,n,i,a){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(e.type==t.type){if("!aggr"==e.type){var l=[e.source,t.source].map((function(e){return S(e,n,i,a,y(y({},r),{},{_groupField:null==u?void 0:u._groupField}))})),s=(0,o.default)(l,2),c=s[0],f=s[1];return c.value==f.value}var d=[e,t].map((function(e){return S(e,n,i,a,y(y({},r),{},{_groupField:null==u?void 0:u._groupField}))})),p=(0,o.default)(d,2),v=p[0],g=p[1];return v.value==g.value}return!1}(h,E,t,r,n,i,a);if(_&&R)return m.val,b.val,e({type:"op-between",children:[h,m,b]},r,n,i,a)}var j,L=r.operators[l];"eq"==l&&"null"==t.children[1].type?j="is_null":"ne"==l&&"null"==t.children[1].type?j="is_not_null":"le"==l&&"string"==t.children[1].type&&""==t.children[1].val?(j="is_empty",L=["is_empty"]):"gt"==l&&"string"==t.children[1].type&&""==t.children[1].val?(j="is_not_empty",L=["is_not_empty"]):"between"==l&&(j="between",L=["between"]);var I=function(){return t.children.map((function(o){return e(o,r,n,i,y(y({},t),{},{_groupField:null==a?void 0:a._groupField}))}))};if("and"==l||"or"==l){var N={};I().forEach((function(e){if(e){var t=(0,s.default)();e.id=t,null!=e.type?N[t]=e:i.errors.push("Bad item in AND/OR: ".concat(JSON.stringify(e)))}})),u={type:"group",id:(0,s.default)(),children1:N,properties:{conjunction:r.conjunctions[l],not:t.not}}}else if(L){var A=I(),x=A[0],F=A.slice(1);if(j=L[0],x)if(x.groupFieldValue){"field"!=x.groupFieldValue.valueSrc&&i.errors.push("Expected group field ".concat(JSON.stringify(x)));var D=x.groupFieldValue.value,k=F[0];k&&k.groupFieldValue&&"field"==k.groupFieldValue.valueSrc&&k.groupFieldValue.value==D?(j="all",F=[]):"equal"==j&&"value"==k.valueSrc&&"number"==k.valueType&&0==k.value?(j="none",F=[]):"greater"==j&&"value"==k.valueSrc&&"number"==k.valueType&&0==k.value&&(j="some",F=[]),u=function(e,t,r,n,o){var i=e.groupFilter,a=e.groupFieldValue;if("field"!=a.valueSrc)throw"Bad groupFieldValue: ".concat(JSON.stringify(a));var u=a.value,l=T(n,o,u,t,r);if(l){var f=(0,c.getFieldConfig)(n,u),d=null==f?void 0:f.mode,p=y(y({},i||{}),{},{type:"rule_group",properties:y(y(y({},l.properties),(null==i?void 0:i.properties)||{}),{},{mode:d})});return p.id||(p.id=(0,s.default)()),p}}(x,j,F,n,i)}else{"field"!=x.valueSrc&&i.errors.push("Expected field ".concat(JSON.stringify(x)));var M=x.value;if(L.length>1){v.logger.warn("[spel] Spel operator ".concat(l," can be mapped to ").concat(L));var V=L.map((function(e){return{op:e,widget:(0,f.getWidgetForFieldOp)(n,M,e)}}));"eq"!=l&&"ne"!=l||(j=V.find((function(e){e.op;var t=e.widget;return t&&"field"!=t})).op)}u=T(n,i,M,j,F)}}else a||(u=C(t,r,n,i)),u||i.errors.push("Can't convert op ".concat(l))}else if("!aggr"==t.type){var U,q=e(t.source,r,n,i,y(y({},t),{},{_groupField:null==a?void 0:a._groupField})),W=e(t.filter,r,n,i,y(y({},t),{},{_groupField:null==q?void 0:q.value}));"rule"==(null===(U=W)||void 0===U?void 0:U.type)&&(W=w(W,n)),u={groupFilter:W,groupFieldValue:q},a||(u=void 0,i.errors.push("Unexpected !aggr in root"))}else if("ternary"==t.type){var G={};t.val.forEach((function(e){var a=(0,o.default)(e,2),u=a[0],l=a[1],s=P(u,l,r,n,i,t);s&&(G[s.id]=s)})),u={type:"switch_group",id:(0,s.default)(),children1:G,properties:{}}}else if((u=S(t,r,n,i,a))&&!u.type&&!a){var B=C(t,r,n,i);B?u=B:(u=void 0,i.errors.push("Can't convert rule of type ".concat(t.type,", it looks like var/literal")))}return u}},C=function(e,t,r,n){var o={},i=P(null,e,t,r,n);return i&&(o[i.id]=i),{type:"switch_group",id:(0,s.default)(),children1:o,properties:{}}},P=function(e,t,r,n,o){var i,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=L(n,o,r,t,a);return e?(i=R(e,r,n,o,a))&&i.type?("group"!=i.type&&(i=w(i,n)),i.type="case_group"):(o.errors.push("Unexpected case: ".concat(JSON.stringify(i))),i=void 0):i={id:(0,s.default)(),type:"case_group",properties:{}},i&&(i.properties=y(y({},i.properties),u)),i},j=function(e,t,r,n){var o=[];return function i(a){a.map((function(a){if("op-plus"==a.type)i(a.children);else{var u=S(a,t,r,n,e);u?o.push(u):n.errors.push("Can't convert ".concat(a.type," in concatenation"))}}))}(e.children),{valueSrc:"value",valueType:"case_value",value:o}},L=function(e,t,r,n){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u={};i="op-plus"==(null==n?void 0:n.type)?j(n,r,e,t):S(n,r,e,t,a);var l=e.widgets.case_value,s=null==l?void 0:l.spelImportValue;if(s){var c=s(i),f=(0,o.default)(c,2),d=f[0];f[1].map((function(e){return t.errors.push(e)})),d&&(u={value:[d],valueSrc:["value"],valueType:["case_value"]})}else t.errors.push("No fucntion to import case value");return u},w=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"group",id:(0,s.default)(),children1:(0,a.default)({},e.id,e),properties:{conjunction:(0,p.defaultConjunction)(t),not:r||!1}}}},2883:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.isImmutableTree=t.getTree=t.checkTree=void 0,Object.defineProperty(t,"isJsonLogic",{enumerable:!0,get:function(){return c.isJsonLogic}}),t.loadTree=t.isValidTree=t.isTree=void 0;var i=n(r(5992)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(9612)),u=r(8756),l=r(7100),s=r(8178),c=r(3585);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}t.getTree=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var n=e;return n=n.toJS(),t&&(n=(0,s.getLightTree)(n,r)),n}},t.loadTree=function(e){if(d(e))return e;if(p(e))return v(e);if("string"==typeof e&&e.startsWith('["~#iM"'))throw"You are trying to load query in obsolete serialization format (Immutable string) which is not supported in versions starting from 2.1.17";if("string"==typeof e)return v(JSON.parse(e));throw"Can't load tree!"},t.checkTree=function(e,t){if(e){var r=(0,l.extendConfig)(t);return(0,u.validateTree)(e,null,r,r)}},t.isValidTree=function(e){return 0==(0,s.getTreeBadFields)(e).length};var d=function(e){return a.Map.isMap(e)};t.isImmutableTree=d;var p=function(e){return"object"==(0,i.default)(e)&&("group"==e.type||"switch_group"==e.type)};function v(e){return(0,a.fromJS)(e,(function(e,t){var r;if("properties"==e){r=t.toOrderedMap();for(var n=0;n<2;n++){var o;null===(null===(o=r.get("value"))||void 0===o?void 0:o.get(n))&&(r=r.setIn(["value",n],void 0))}}else if("value"==e&&t.get(0)&&void 0!==t.get(0).toJS){var i=t.get(0).toJS();r=i.func?t.toOrderedMap():a.default.List.of(i)}else r="asyncListValues"==e?t.toJS():"children1"==e&&a.default.Iterable.isIndexed(t)?new a.default.OrderedMap(t.map((function(e){return[e.get("id"),e]}))):a.default.Iterable.isIndexed(t)?t.toList():t.toOrderedMap();return r}))}t.isTree=p},429:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992),i=n(r(7487)),a=(n(r(4783)),n(r(8441)),c(r(980))),u=c(r(1071));c(r(7596)),c(r(7788));var l=c(r(6175));c(r(6715));n(r(4366));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}d(d(d({},l),a),u)},3671:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(5959)).default.createContext();t.default=o},4538:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(7033)),a=n(r(7487)),u=n(r(9612)),l=r(8178),s=r(781),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(4084)),f=n(r(2676)),d=r(7100),p=r(1820),v=r(3585),g=r(8756),h=n(r(7027)),y=n(r(1612));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function O(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},d=i.settings.shouldCreateEmptyGroup,p=t.push(n),v=!d,g=!(null==c||!c.isDefaultCase),h=e;return(e=R(e,t,r,n,(0,s.defaultGroupProperties)(i).merge(o||{}),i,a))!==h&&(a||g||(e=e.setIn((0,l.expandTreePath)(p,"children1"),new u.default.OrderedMap),v&&(e=R(e,p,"rule",(0,f.default)(),(0,s.defaultRuleProperties)(i),i))),e=(0,l.fixPathsInTree)(e)),e},T=function e(t,r,n){n&&Array.isArray(n)&&(r.children1=new u.default.OrderedMap(n.reduce((function(r,n){var o=(0,f.default)(),i=_(_({},n),{},{properties:(0,s.defaultItemProperties)(t,n).merge(n.properties||{}),id:o});return e(t,i,i.children1),_(_({},r),{},(0,a.default)({},o,new u.default.Map(i)))}),{})))},R=function(e,t,r,n,o,i){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if("switch_group"==r)throw new Error("Can't add switch_group programmatically");var c,f,d=i.settings,p=d.maxNumberOfCases,v=d.maxNumberOfRules,g=d.maxNesting,h="switch_group"==e.get("type"),y=e.getIn((0,l.expandTreePath)(t)),m=h?e.getIn((0,l.expandTreePath)(t.take(2))):null,O=(0,l.expandTreePath)(t,"children1"),E=e.getIn(O),b=!!E&&E.size,_=b?E.size:null;"case_group"==r?(c=_,f=p):"group"==r?(c=t.size,f=g):"rule_group"==(null==y?void 0:y.get("type"))||(c=h?(0,l.getTotalRulesCountInTree)(m):(0,l.getTotalRulesCountInTree)(e),f=v);var S=!f||!c||c<f,R={type:r,id:n,properties:o};T(i,R,s);var C="case_group"==r&&b&&null==E.last().get("children1");if(S){var P=new u.default.OrderedMap((0,a.default)({},n,new u.default.Map(R)));if(b)if(C){var j,L=E.last(),w=new u.default.OrderedMap((j={},(0,a.default)(j,n,new u.default.Map(R)),(0,a.default)(j,L.get("id"),L),j));e=(e=e.deleteIn((0,l.expandTreePath)(O,"children1",L.get("id")))).mergeIn(O,w)}else e=e.mergeIn(O,P);else e=e.setIn(O,P);e=(0,l.fixPathsInTree)(e)}return e},C=function(e,t){return e=e.deleteIn((0,l.expandTreePath)(t)),(0,l.fixPathsInTree)(e)},P={dragging:{id:null,x:null,y:null,w:null,h:null},mousePos:{},dragStart:{id:null}};t.default=function(e,t,r){var n=(0,s.defaultRoot)(e),o=_({tree:t||n},P);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,n=arguments.length>1?arguments[1]:void 0,m={},E=function(e,t){var r=[c.SET_TREE,c.SET_DRAG_START,c.SET_DRAG_PROGRESS,c.SET_DRAG_END],n=(0,y.default)((0,h.default)(e,["config","asyncListValues","__isInternal"]),v.applyToJS),o=e.path&&function(e,t){return e.getIn((0,l.expandTreePath)(t,"properties","field"))||null}(t.tree,e.path)||e.field;return o&&(n.affectedField=o),(r.includes(e.type)||0==e.type.indexOf("@@redux"))&&(n=null),n}(n,t);switch(n.type){case c.SET_TREE:var b=r(n.config,n.tree);m.tree=b;break;case c.ADD_CASE_GROUP:m.tree=S(t.tree,n.path,"case_group",n.id,n.properties,n.config,n.children,n.meta);break;case c.ADD_GROUP:m.tree=S(t.tree,n.path,"group",n.id,n.properties,n.config,n.children,n.meta);break;case c.REMOVE_GROUP:m.tree=function(e,t,r){e=C(e,t);var n=r.settings.canLeaveEmptyGroup,o=t.slice(0,-1);return!(0,l.hasChildren)(e,o)&&!n&&(e=(0,l.fixEmptyGroupsInTree)(e),(0,l.isEmptyTree)(e)&&!n&&(e=R(e,new u.default.List,"rule",(0,f.default)(),(0,s.defaultRuleProperties)(r),r))),(0,l.fixPathsInTree)(e)}(t.tree,n.path,n.config);break;case c.ADD_RULE:m.tree=R(t.tree,n.path,n.ruleType,n.id,n.properties,n.config,n.children);break;case c.REMOVE_RULE:m.tree=function(e,t,r){e=C(e,t);var n=r.settings.canLeaveEmptyGroup,o=t.pop(),i=e.getIn((0,l.expandTreePath)(o)),a=i.getIn(["properties","field"]),c=i.getIn(["properties","operator"]),p=(i.getIn(["properties","value",0]),a?(0,d.getFieldConfig)(r,a):null),v=c?(0,d.getOperatorConfig)(r,c,a):null,g=a&&c&&0!=v.cardinality,h="rule_group"==i.get("type"),y=!(0,l.hasChildren)(e,o),m=h?g&&p.initialEmptyWhere:n;return y&&!m&&(h&&(e=e.deleteIn((0,l.expandTreePath)(o))),e=(0,l.fixEmptyGroupsInTree)(e),(0,l.isEmptyTree)(e)&&!n&&(e=R(e,new u.default.List,"rule",(0,f.default)(),(0,s.defaultRuleProperties)(r),r))),(0,l.fixPathsInTree)(e)}(t.tree,n.path,n.config);break;case c.SET_CONJUNCTION:m.tree=function(e,t,r){return e.setIn((0,l.expandTreePath)(t,"properties","conjunction"),r)}(t.tree,n.path,n.conjunction);break;case c.SET_NOT:m.tree=function(e,t,r){return e.setIn((0,l.expandTreePath)(t,"properties","not"),r)}(t.tree,n.path,n.not);break;case c.SET_FIELD:m.tree=function(e,t,r,n){if(!r)return C(e,t);var o=n.settings,i=o.fieldSeparator,a=o.setOpOnChangeField,c=o.showErrorMessage;Array.isArray(r)&&(r=r.join(i));var v=e.getIn((0,l.expandTreePath)(t,"type")),g=e.getIn((0,l.expandTreePath)(t,"properties")),h="rule_group"==v,y=(0,d.getFieldConfig)(n,r),m="!group"==y.type,E=m&&"array"==y.mode,b=h!=m,_=g.get("operator"),S=g.get("operatorOptions"),T=(g.get("field"),g.get("value"),g.get("valueSrc",new u.default.List),g.get("valueType",new u.default.List),y&&-1!==y.operators.indexOf(_)?_:null),P=null,j=(0,p.getOperatorsForField)(n,r);if(j&&1==j.length)P=j[0];else if(j&&j.length>1){var L,w=O(a||[]);try{for(w.s();!(L=w.n()).done;){var I=L.value;if("keep"!=I||b?"default"==I?P=(0,s.defaultOperator)(n,r,!1):"first"==I&&(P=(0,p.getFirstOperator)(n,r)):P=T,P)break}}catch(e){w.e(e)}finally{w.f()}}if(!m&&!y.operators)return console.warn("Type ".concat(y.type," is not supported")),e;if(h&&!m&&(e=(e=(e=e.setIn((0,l.expandTreePath)(t,"type"),"rule")).deleteIn((0,l.expandTreePath)(t,"children1"))).setIn((0,l.expandTreePath)(t,"properties"),new u.default.OrderedMap)),m){e=e.setIn((0,l.expandTreePath)(t,"type"),"rule_group");var N=(0,p.getNewValueForFieldOp)(n,n,g,r,P,"field",!0),A=(N.canReuseValue,N.newValue),x=N.newValueSrc,F=N.newValueType,D=N.operatorCardinality,k=(0,s.defaultGroupProperties)(n,y).merge({field:r,mode:y.mode});return E&&(k=k.merge({operator:P,value:A,valueSrc:x,valueType:F})),e=(e=e.setIn((0,l.expandTreePath)(t,"children1"),new u.default.OrderedMap)).setIn((0,l.expandTreePath)(t,"properties"),k),y.initialEmptyWhere&&1==D||(e=R(e,t,"rule",(0,f.default)(),(0,s.defaultRuleProperties)(n,r),n)),(0,l.fixPathsInTree)(e)}return e.updateIn((0,l.expandTreePath)(t,"properties"),(function(e){return e.withMutations((function(e){var t=(0,p.getNewValueForFieldOp)(n,n,e,r,P,"field",!0),o=t.canReuseValue,i=t.newValue,a=t.newValueSrc,u=t.newValueType,l=t.newValueError;c&&(e=e.set("valueError",l));var f=o?S:(0,s.defaultOperatorOptions)(n,P,r);return e.set("field",r).set("operator",P).set("operatorOptions",f).set("value",i).set("valueSrc",a).set("valueType",u).delete("asyncListValues")}))}))}(t.tree,n.path,n.field,n.config);break;case c.SET_LOCK:m.tree=function(e,t,r){return(0,l.removeIsLockedInTree)(e.setIn((0,l.expandTreePath)(t,"properties","isLocked"),r))}(t.tree,n.path,n.lock);break;case c.SET_OPERATOR:m.tree=function(e,t,r,n){var o=n.settings.showErrorMessage,i=e.getIn((0,l.expandTreePath)(t,"properties")),a=e.getIn((0,l.expandTreePath)(t,"children1")),c=i.get("field"),g="!group"==(0,d.getFieldConfig)(n,c).type,h=(0,d.getOperatorConfig)(n,r,c),y=h?(0,v.defaultValue)(h.cardinality,1):null;return e=e.updateIn((0,l.expandTreePath)(t,"properties"),(function(e){return e.withMutations((function(e){var t=e.get("field"),i=e.get("operatorOptions"),a=(e.get("value",new u.default.List),e.get("valueSrc",new u.default.List),e.get("operator"),(0,p.getNewValueForFieldOp)(n,n,e,t,r,"operator",!0)),l=a.canReuseValue,c=a.newValue,f=a.newValueSrc,d=a.newValueType,v=a.newValueError;o&&(e=e.set("valueError",v));var g=l?i:(0,s.defaultOperatorOptions)(n,r,t);return l||(e=e.delete("asyncListValues")),e.set("operator",r).set("operatorOptions",g).set("value",c).set("valueSrc",f).set("valueType",d)}))})),g&&0==y&&0==a.size&&(e=R(e,t,"rule",(0,f.default)(),(0,s.defaultRuleProperties)(n,c),n)),e}(t.tree,n.path,n.operator,n.config);break;case c.SET_VALUE:var T=function(e,t,r,n,o,a,s,c){var f,h=a.settings,y=h.fieldSeparator,m=h.showErrorMessage,O=e.getIn((0,l.expandTreePath)(t,"properties","valueSrc",r+""))||null;"field"===O&&Array.isArray(n)&&(n=n.join(y));var E=e.getIn((0,l.expandTreePath)(t,"properties","field"))||null,b=e.getIn((0,l.expandTreePath)(t,"properties","operator"))||null,_=(0,d.getOperatorConfig)(a,b,E),S=b?(0,v.defaultValue)(_.cardinality,1):null,T=o||function(e,t,r){var n=null;if(e)if("field"===t){var o=(0,d.getFieldConfig)(r,e);o&&(n=o.type)}else if("func"===t){var i=e.get("func");if(i){var a=(0,d.getFuncConfig)(r,i);a&&(n=a.returnType)}}return n}(n,O,a),R=(0,g.validateValue)(a,E,E,b,n,T,O,s,!1,!1),C=(0,i.default)(R,2),P=C[0],j=C[1],L=!P;if(j!==n&&(n=j),m){var w=(0,p.getWidgetForFieldOp)(a,E,b,O),I=(0,d.getFieldWidgetConfig)(a,E,b,w,O),N=Array.from({length:S},(function(r,n){return e.getIn((0,l.expandTreePath)(t,"properties","valueSrc",n+""))||null}));if(_&&_.validateValues&&N.filter((function(e){return"value"==e||null==e})).length==S){var A=Array.from({length:S},(function(o,i){return i==r?n:e.getIn((0,l.expandTreePath)(t,"properties","value",i+""))||null})),x=I&&I.toJS?A.map((function(e){return I.toJS(e,I)})):A,F=_.validateValues(x);e=e.setIn((0,l.expandTreePath)(t,"properties","valueError",S),F)}}e.getIn((0,l.expandTreePath)(t,"properties","value"))||(e=e.setIn((0,l.expandTreePath)(t,"properties","value"),new u.default.List(new Array(S))).setIn((0,l.expandTreePath)(t,"properties","valueType"),new u.default.List(new Array(S))).setIn((0,l.expandTreePath)(t,"properties","valueError"),new u.default.List(new Array(S))));var D=null==e.getIn((0,l.expandTreePath)(t,"properties","value",r+"")),k=!!e.getIn((0,l.expandTreePath)(t,"properties","valueError",r));return(L||m)&&(e=e.deleteIn((0,l.expandTreePath)(t,"properties","asyncListValues")),void 0===n?e=(e=e.setIn((0,l.expandTreePath)(t,"properties","value",r+""),void 0)).setIn((0,l.expandTreePath)(t,"properties","valueType",r+""),null):(s&&(e=e.setIn((0,l.expandTreePath)(t,"properties","asyncListValues"),s)),e=(e=e.setIn((0,l.expandTreePath)(t,"properties","value",r+""),n)).setIn((0,l.expandTreePath)(t,"properties","valueType",r+""),T),f=c&&!D&&!k)),m&&(e=e.setIn((0,l.expandTreePath)(t,"properties","valueError",r),P)),c&&(L&&k||!L&&!k)&&(e=e.setIn((0,l.expandTreePath)(t,"properties","valueError",r),P),f=!1),{tree:e,isInternalValueChange:f}}(t.tree,n.path,n.delta,n.value,n.valueType,n.config,n.asyncListValues,n.__isInternal),j=T.tree,L=T.isInternalValueChange;m.__isInternalValueChange=L,m.tree=j;break;case c.SET_VALUE_SRC:m.tree=function(e,t,r,n,o){var i=o.settings.showErrorMessage,a=e.getIn((0,l.expandTreePath)(t,"properties","field"))||null,u=e.getIn((0,l.expandTreePath)(t,"properties","operator"))||null;if(e=(e=(e=e.setIn((0,l.expandTreePath)(t,"properties","value",r+""),void 0)).setIn((0,l.expandTreePath)(t,"properties","valueType",r+""),null)).deleteIn((0,l.expandTreePath)(t,"properties","asyncListValues")),i){e=e.setIn((0,l.expandTreePath)(t,"properties","valueError",r),null);var s=(0,d.getOperatorConfig)(o,u,a),c=u?(0,v.defaultValue)(s.cardinality,1):null;s.validateValues&&(e=e.setIn((0,l.expandTreePath)(t,"properties","valueError",c),null))}if(e=void 0===n?e.setIn((0,l.expandTreePath)(t,"properties","valueSrc",r+""),null):e.setIn((0,l.expandTreePath)(t,"properties","valueSrc",r+""),n),n){var f=e.getIn((0,l.expandTreePath)(t,"properties")),g=(0,p.getNewValueForFieldOp)(o,o,f,a,u,"valueSrc",!0),h=g.canReuseValue,y=g.newValue,m=g.newValueSrc,O=g.newValueType;g.newValueError,h||m.get(r)!=n||(e=(e=e.setIn((0,l.expandTreePath)(t,"properties","value",r+""),y.get(r))).setIn((0,l.expandTreePath)(t,"properties","valueType",r+""),O.get(r)))}return e}(t.tree,n.path,n.delta,n.srcKey,n.config);break;case c.SET_OPERATOR_OPTION:m.tree=function(e,t,r,n){return e.setIn((0,l.expandTreePath)(t,"properties","operatorOptions",r),n)}(t.tree,n.path,n.name,n.value);break;case c.MOVE_ITEM:m.tree=function(e,t,r,n){var o=(0,l.getItemByPath)(e,t),s=t.pop(),f=t.size>1?(0,l.getItemByPath)(e,s):null,d=f?f.get("children1"):null,p=(0,l.getItemByPath)(e,r),g=n==c.PLACEMENT_APPEND||n==c.PLACEMENT_PREPEND?r:r.pop(),h=n==c.PLACEMENT_APPEND||n==c.PLACEMENT_PREPEND?p:r.size>1?(0,l.getItemByPath)(e,g):null,y=h?h.get("children1"):null;if(!f||!h||!o)return e;var m=f.get("id")==h.get("id"),E=g.size<s.size&&(0,v.deepEqual)(g.toArray(),s.toArray().slice(0,g.size)),b=g.size>s.size&&(0,v.deepEqual)(s.toArray(),g.toArray().slice(0,s.size)),_=null,S=null;E?_=u.default.List(s.toArray().slice(g.size)):b&&(S=u.default.List(g.toArray().slice(s.size)));var T=y,R=d;return b||(R=R.delete(o.get("id"))),m?T=R:E&&(T=T.updateIn((0,l.expandTreeSubpath)(_,"children1"),(function(e){return R}))),n==c.PLACEMENT_BEFORE||n==c.PLACEMENT_AFTER?T=u.default.OrderedMap().withMutations((function(e){var t,r=O(T.entries());try{for(r.s();!(t=r.n()).done;){var a=(0,i.default)(t.value,2),u=a[0],l=a[1];u==p.get("id")&&n==c.PLACEMENT_BEFORE&&e.set(o.get("id"),o),e.set(u,l),u==p.get("id")&&n==c.PLACEMENT_AFTER&&e.set(o.get("id"),o)}}catch(e){r.e(e)}finally{r.f()}})):n==c.PLACEMENT_APPEND?T=T.merge((0,a.default)({},o.get("id"),o)):n==c.PLACEMENT_PREPEND&&(T=u.default.OrderedMap((0,a.default)({},o.get("id"),o)).merge(T)),b&&(R=(R=R.updateIn((0,l.expandTreeSubpath)(S,"children1"),(function(e){return T}))).delete(o.get("id"))),m||E||(e=e.updateIn((0,l.expandTreePath)(s,"children1"),(function(e){return R}))),b||(e=e.updateIn((0,l.expandTreePath)(g,"children1"),(function(e){return T}))),(0,l.fixPathsInTree)(e)}(t.tree,n.fromPath,n.toPath,n.placement,n.config);break;case c.SET_DRAG_START:m.dragStart=n.dragStart,m.dragging=n.dragging,m.mousePos=n.mousePos;break;case c.SET_DRAG_PROGRESS:m.mousePos=n.mousePos,m.dragging=n.dragging;break;case c.SET_DRAG_END:m.tree=function(e,t){return t.settings.canLeaveEmptyGroup||(e=(0,l.fixEmptyGroupsInTree)(e)),e}(t.tree,e),m=_(_({},m),P)}return E&&(m.__lastAction=E),_(_(_({},t),{__isInternalValueChange:void 0,__lastAction:void 0}),m)}}},1511:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.simulateAsyncFetch=t.mergeListValues=t.listValueToOption=t.getListValue=void 0;var o=n(r(6834)),i=n(r(2409)),a=n(r(1015)),u=r(3585);t.simulateAsyncFetch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return function(){var n=(0,a.default)(o.default.mark((function n(i,a,l){var s,c,f,d,p,v;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=null!=l.pageSize?l.pageSize:t,c=(0,u.listValuesToArray)(e).filter((function(e){var t=e.title;return null==i||-1!=t.toUpperCase().indexOf(i.toUpperCase())})),s&&Math.ceil(c.length/s),f=a||0,s&&Math.ceil(f/s),d=s?c.slice(f,f+s):c,p=s?f+d.length:null,v=!!s&&p<c.length,console.debug("simulateAsyncFetch",{search:i,offset:a,values:d,hasMore:v,filtered:c}),n.next=11,(0,u.sleep)(r);case 11:return n.abrupt("return",{values:d,hasMore:v});case 12:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}()},t.mergeListValues=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return e;var n=e||[],o=t.filter((function(e){return null==n.find((function(t){return t.value==e.value}))}));return r?[].concat((0,i.default)(o),(0,i.default)(n)):[].concat((0,i.default)(n),(0,i.default)(o))},t.listValueToOption=function(e){if(null==e)return null;var t=e.title,r=e.value,n=e.disabled,o=e.groupTitle,i=e.renderTitle,a={title:t,value:r};return n&&(a.disabled=n),o&&(a.groupTitle=o),i&&(a.renderTitle=i),a},t.getListValue=function(e,t){return(0,u.mapListValues)(t,(function(t){return t.value===e?t:null})).filter((function(e){return null!==e})).shift()}},7100:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeField=t.getOperatorConfig=t.getFuncConfig=t.getFuncArgConfig=t.getFieldWidgetConfig=t.getFieldRawConfig=t.getFieldConfig=t.extendConfig=t.createConfigMemo=void 0;var o=n(r(2409)),i=n(r(7487)),a=n(r(5992)),u=n(r(4308)),l=n(r(2676)),s=n(r(2815)),c=r(8137),f=n(r(2468)),d=r(3585),p=r(1820),v=n(r(3523)),g=n(r(8831));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=["conjunctions","fields","types","operators","widgets","settings","funcs"];t.createConfigMemo=function(){var e=new Map,t=0;return function(r){return n=function(e){return(0,g.default)(e,O)}(r),function(t){var r,n=y(e.keys());try{var o=function(){var n=r.value;if(0===O.map((function(e){return n[e]===t[e]})).filter((function(e){return!e})).length)return{v:e.get(n)}};for(n.s();!(r=n.n()).done;){var i=o();if("object"===(0,a.default)(i))return i.v}}catch(e){n.e(e)}finally{n.f()}var u,l=y(e.values());try{var s=function(){var e=u.value;if(0===O.map((function(r){return e[r]===t[r]})).filter((function(e){return!e})).length)return{v:e}};for(l.s();!(u=l.n()).done;){var c=s();if("object"===(0,a.default)(c))return c.v}}catch(e){l.e(e)}finally{l.f()}return null}(n)||function(r){var n=E(r,++t);return e.size+1>2&&e.delete(e.keys()[0]),e.set(r,n),n}(n);var n}};var E=function(e,t){return e.__configId||(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),e.settings=(0,u.default)({},c.settings,e.settings),e._fieldsCntByType={},e._funcsCntByType={},e.types=(0,v.default)(e.types),function(e,t){for(var r in e)b(0,e[r],t)}(e.types,e),e.fields=(0,v.default)(e.fields),e.__fieldNames={},_(e.fields,e),e.funcs=(0,v.default)(e.funcs),S(e.funcs,e),f.default.locale(e.settings.locale.moment),Object.defineProperty(e,"__configId",{enumerable:!1,writable:!1,value:t||(0,l.default)()})),e};function b(e,t,r){var n=null,o=null;for(var i in t.mainWidget=t.mainWidget||Object.keys(t.widgets).filter((function(e){return"field"!=e&&"func"!=e}))[0],t.widgets){var a=t.widgets[i];if(a.operators){var l=a.operators;t.excludeOperators&&(l=l.filter((function(e){return!t.excludeOperators.includes(e)}))),n=(0,d.mergeArraysSmart)(n,l)}a.defaultOperator&&(o=a.defaultOperator),i==t.mainWidget&&(a=(0,u.default)({},{widgetProps:t.mainWidgetProps||{}},a)),t.widgets[i]=a}t.valueSources||(t.valueSources=Object.keys(r.settings.valueSourcesInfo));var s,c=y(t.valueSources);try{for(c.s();!(s=c.n()).done;){var f=s.value;"value"==f||t.widgets[f]||(t.widgets[f]={})}}catch(e){c.e(e)}finally{c.f()}!t.operators&&n&&(t.operators=Array.from(new Set(n))),!t.defaultOperator&&o&&(t.defaultOperator=o)}function _(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(var n in e)T(e[n],t,[].concat((0,o.default)(r),[n])),e[n].subfields&&_(e[n].subfields,t,[].concat((0,o.default)(r),[n]))}function S(e,t){if(e)for(var r in e){var n=e[r];for(var o in n.returnType&&(t._funcsCntByType[n.returnType]||(t._funcsCntByType[n.returnType]=0),t._funcsCntByType[n.returnType]++),n.args)T(n.args[o],t,null,!0);if(n.args){var i,a=!0,u=y(Object.keys(n.args).reverse());try{for(u.s();!(i=u.n()).done;){var l=i.value,s=n.args[l];!a&&s.isOptional&&delete s.isOptional,s.isOptional||(a=!1)}}catch(e){u.e(e)}finally{u.f()}}n.subfields&&S(n.subfields,t)}}function T(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=null,a=null,l=t.types[e.type],s=e.excludeOperators||[];if("!struct"!=e.type&&"!group"!=e.type){e.fieldSettings||(e.fieldSettings={});for(var c=0,f=["listValues","allowCustomValues","validateValue"];c<f.length;c++){var p=f[c];e[p]&&(e.fieldSettings[p]=e[p],delete e[p])}if(e.fieldSettings.listValues&&(e.fieldSettings.listValues=(0,d.normalizeListValues)(e.fieldSettings.listValues,e.type,e.fieldSettings)),!l)return void(e.disabled=!0);n||(t._fieldsCntByType[e.type]||(t._fieldsCntByType[e.type]=0),t._fieldsCntByType[e.type]++),e.widgets||(e.widgets={}),n&&(e._isFuncArg=!0),e.mainWidget=e.mainWidget||l.mainWidget,e.valueSources=e.valueSources||l.valueSources;var v=l.excludeOperators||[];for(var g in l.widgets){var h=e.widgets[g]||{},y=l.widgets[g]||{};n||function(){var t=[].concat((0,o.default)(s),(0,o.default)(v)),r=e.preferWidgets&&("field"==g||e.preferWidgets.includes(g))||t.length>0;if(h.operators){var n=h.operators.filter((function(e){return!t.includes(e)}));i=[].concat((0,o.default)(i||[]),(0,o.default)(n))}else if(r&&y.operators){var u=y.operators.filter((function(e){return!t.includes(e)}));i=[].concat((0,o.default)(i||[]),(0,o.default)(u))}h.defaultOperator&&(a=h.defaultOperator)}(),g==e.mainWidget&&(h=(0,u.default)({},{widgetProps:e.mainWidgetProps||{}},h)),e.widgets[g]=h}n||(!e.operators&&i&&(e.operators=Array.from(new Set(i))),!e.defaultOperator&&a&&(e.defaultOperator=a))}var m=C(t,r);m&&(e.fieldName=m),r&&e.fieldName&&(t.__fieldNames[e.fieldName]=r)}t.extendConfig=E;var R=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fields",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"subfields";if(!t)return null;if("!case_value"==t)return{type:"case_value",mainWidget:"case_value",widgets:{case_value:e.widgets.case_value}};var o=e.settings.fieldSeparator,i=Array.isArray(t)?t:t.split(o),a=e[r];if(!a)return null;for(var u=a,l=null,s=[],c=0;c<i.length;c++){var f=i[c];s.push(f),l=u[s.join(o)],c<i.length-1&&(l&&l[n]?(u=l[n],s=[]):l=null)}return l};t.getFieldRawConfig=R;var C=function(e,t){if(!t)return null;for(var r,n,i=e.settings.fieldSeparator,a=(0,o.default)(t),u=[];void 0!==(r=a.pop())&&a.length>0;)if(u.unshift(r),(n=R(e,a)).fieldName)return[n.fieldName].concat(u).join(i);return null};t.normalizeField=function(e,t){var r=e.settings.fieldSeparator,n=Array.isArray(t)?t.join(r):t;return e.__fieldNames[n]?e.__fieldNames[n].join(r):n};var P=function(e,t){return t&&R(e,t,"funcs","subfields")||null};t.getFuncConfig=P;var j=function(e,t,r){var n=P(e,t);if(!n)return null;var o=n.args&&n.args[r]||null;if(!o)return null;var i=e.types[o.type]||{};return(0,s.default)({},i,o||{},(function(e,t,r,n,o,i){if(Array.isArray(e))return t}))};t.getFuncArgConfig=j;var L=function(e,t){if(!t)return null;if("object"==(0,a.default)(t)&&!t.func&&t.type)return t;if("object"==(0,a.default)(t)&&t.func&&t.arg)return j(e,t.func,t.arg);var r=R(e,t);if(!r)return null;var n=e.types[r.type]||{};return(0,s.default)({},n,r||{},(function(e,t,r,n,o,i){if(Array.isArray(e))return t}))};t.getFieldConfig=L,t.getOperatorConfig=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;var n=e.operators[t];if(r){var o=L(e,r),i=(0,p.getWidgetForFieldOp)(e,r,t),a=e.widgets[i]||{},l=(o&&o.widgets?o.widgets[i]:{})||{},s=(a.opProps||{})[t],c=(l.opProps||{})[t];return(0,u.default)({},n,s,c)}return n},t.getFieldWidgetConfig=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!t)return null;if(!r&&!n&&"const"!=o&&"!case_value"!=t)return null;var i=L(e,t);n||(n=(0,p.getWidgetForFieldOp)(e,t,r,o));var a=e.widgets[n]||{},l=((i&&i.widgets?i.widgets[n]:{})||{}).widgetProps||{},s=("value"==o||!o)&&i&&i.fieldSettings||{};return(0,u.default)({},a,l,s)}},781:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.defaultRuleProperties=t.defaultRule=t.defaultRoot=t.defaultOperatorOptions=t.defaultOperator=t.defaultItemProperties=t.defaultGroupProperties=t.defaultGroupConjunction=t.defaultField=t.defaultConjunction=void 0;var o=n(r(7487)),i=n(r(9612)),a=n(r(2676)),u=r(7100),l=r(1820);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"function"==typeof e.settings.defaultField?e.settings.defaultField(r):e.settings.defaultField||(t?(0,l.getFirstField)(e,r):null)};t.defaultField=f;var d=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=(0,u.getFieldConfig)(e,t),o=n&&n.operators||[],i=n&&n.defaultOperator;return o.includes(i)||(i=null),!i&&r&&(i=(0,l.getFirstOperator)(e,t)),"function"==typeof e.settings.defaultOperator?e.settings.defaultOperator(t,n):i};t.defaultOperator=d;var p=function(e,t,r){var n=t?(0,u.getOperatorConfig)(e,t,r):null;return n&&n.options?new i.default.Map(n.options&&n.options.defaults||{}):null};t.defaultOperatorOptions=p;var v=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=null,u=null,s=e.settings,c=s.setDefaultFieldAndOp,v=s.showErrorMessage;o?(a=null==o||null===(t=o.properties)||void 0===t?void 0:t.field,u=null==o||null===(r=o.properties)||void 0===r?void 0:r.operator):c&&(a=f(e,!0,n),u=d(e,a));var g=new i.default.Map({field:a,operator:u,value:new i.default.List,valueSrc:new i.default.List,operatorOptions:p(e,u,a)});if(v&&(g=g.set("valueError",new i.default.List)),a&&u){var h=(0,l.getNewValueForFieldOp)(e,e,g,a,u,"operator",!1),y=h.newValue,m=h.newValueSrc,O=h.newValueType,E=h.newValueError;g=g.set("value",y).set("valueSrc",m).set("valueType",O),v&&(g=g.set("valueError",E))}return g};t.defaultRuleProperties=v;var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(t=(0,u.getFieldConfig)(e,t))&&t.conjunctions||Object.keys(e.conjunctions);return 1==r.length?r[0]:e.settings.defaultGroupConjunction||e.settings.defaultConjunction||r[0]};t.defaultGroupConjunction=g,t.defaultConjunction=function(e){return e.settings.defaultConjunction||Object.keys(e.conjunctions)[0]};var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new i.default.Map({conjunction:g(e,t),not:!1})};t.defaultGroupProperties=h,t.defaultItemProperties=function(e,t){var r;return t&&"group"==t.type?h(e,null==t||null===(r=t.properties)||void 0===r?void 0:r.field):v(e,null,t)};var y=function(e,t){return(0,o.default)({},e,new i.default.Map({type:"rule",id:e,properties:v(t)}))};t.defaultRule=y,t.defaultRoot=function(e){return new i.default.Map({type:"group",id:(0,a.default)(),children1:new i.default.OrderedMap(c({},y((0,a.default)(),e))),properties:h(e)})}},3725:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.sqlEmptyValue=t.spelImportConcat=t.spelFormatConcat=t.spelFixList=t.spelEscape=t.mongoEmptyValue=t.SqlString=void 0;var o=n(r(5992)),i=r(358);t.SqlString=i,i.trim=function(e){return"'"==e.charAt(0)?e.substring(1,e.length-1):e},i.escapeLike=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=i.escape(e);return"'"+(n=(t?"%":"")+(n=(n=i.trim(n)).replace(/[%_]/g,"\\$&"))+(r?"%":""))+"'"},t.sqlEmptyValue=function(e){var t="''",r=null==e?void 0:e.type;return"date"==r?t="'0000-00-00'":"datetime"==r?t="'0000-00-00 00:00'":"time"==r?t="'00:00'":"number"==r&&(t="0"),t},t.mongoEmptyValue=function(e){var t="";return"number"==(null==e?void 0:e.type)&&(t=0),t};t.spelFixList=function(e){return"".concat(e,".?[true]")};var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e)return"null";switch((0,o.default)(e)){case"boolean":return e?"true":"false";case"number":if(!Number.isFinite(e)||isNaN(e))return;return e+(!Number.isInteger(e)||t?"f":"");case"object":if(Array.isArray(e))return function(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=["int","float"];return e.map((function(e){if(null!=e){if("string"==typeof e)r="String";else{if("number"!=typeof e)throw new Error("spelEscape: Can't use value ".concat(e," in array"));r=Number.isInteger(e)?"int":"float"}if(t){if(t!=r){if(!i.includes(t)||!i.includes(r))throw new Error("spelEscape: Can't use different types in array: found ".concat(t," and ").concat(r));t="float"}}else t=r}})),t||(t="String"),n="float"==t?e.map((function(e){return a(e,!0)})):e.map((function(e){return a(e)})),o?"new ".concat(t,"[]{").concat(n.join(", "),"}"):"{".concat(n.join(", "),"}")}(e,r);throw new Error("spelEscape: Object is not supported");default:return function(e){return"'"+e.replace(/'/g,"''")+"'"}(e)}};t.spelEscape=a,t.spelFormatConcat=function(e){return e&&Array.isArray(e)&&e.length?e.map((function(e){return"const"==e.type?a(e.value):"property"==e.type?""+e.value:"variable"==e.type?"#"+e.value:void 0})).filter((function(e){return null!=e})).join(" + "):"null"},t.spelImportConcat=function(e){if(null==e)return[void 0,[]];var t=[];return[("case_value"==e.valueType?e.value:[e]).map((function(e){return"value"==e.valueSrc?null===e.value?void 0:{type:"const",value:e.value}:"field"==e.valueSrc?{type:e.isVariable?"variable":"property",value:e.value}:void t.push("Unsupported valueSrc ".concat(e.valueSrc," in concatenation"))})).filter((function(e){return null!=e})),t]}},180:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.setFunc=t.setArgValueSrc=t.setArgValue=t.completeValue=t.completeFuncValue=void 0;var o=n(r(5992)),i=r(7100),a=r(1820),u=n(r(9612)),l=function(e){return"object"==(0,o.default)(e)&&null!==e&&!Array.isArray(e)},s=function(e,t,r){return"func"==t?c(e,r):e};t.completeValue=s;var c=function(e,t){return function(e){if(e){var r=e.get("func"),n=r&&(0,i.getFuncConfig)(t,r);if(n){var o=e,u=!1;for(var c in n.args){var d=n.args[c],p=d.valueSources,v=d.isOptional,g=d.defaultValue,h=(0,a.filterValueSourcesForField)(t,p,d),y=o.get("args"),m=1==h.length?h[0]:void 0,O=y?y.get(c):void 0,E=O?O.get("value"):void 0,b=(O?O.get("valueSrc"):void 0)||m;if(void 0!==E){var _=s(E,b,t);if(void 0===_)return;if(_!==E&&(o=o.setIn(["args",c,"value"],_)),u)return}else if(void 0===g||l(g)){if(!v)return;u=!0}else o=(o=o.setIn(["args",c,"value"],f(d))).setIn(["args",c,"valueSrc"],"value")}return o}}}(e)};t.completeFuncValue=c,t.setFunc=function(e,t,r){var n=r.settings.fieldSeparator;e=e||new u.default.Map,Array.isArray(t)&&(t=t.join(n)),e=(e=e.set("func",t)).set("args",new u.default.Map);var o=t&&(0,i.getFuncConfig)(r,t);if(o)for(var s in o.args){var c=o.args[s],d=c.valueSources,p=c.defaultValue,v=(0,a.filterValueSourcesForField)(r,d,c),g=v.length?v[0]:void 0,h=(p?l(p)&&p.func?"func":"value":void 0)||g;void 0!==p&&(e=e.setIn(["args",s,"value"],f(c))),h&&(e=e.setIn(["args",s,"valueSrc"],h))}return e};var f=function(e){var t=e.defaultValue;return l(t)&&!u.default.Map.isMap(t)&&t.func?u.default.fromJS(t,(function(e,t){return u.default.Iterable.isIndexed(t)?t.toList():t.toOrderedMap()})):t};t.setArgValue=function(e,t,r,n,o){if(e&&e.get("func")){e=e.setIn(["args",t,"value"],r);var i=n.valueSources,u=(0,a.filterValueSourcesForField)(o,i,n),l=1==u.length?u[0]:void 0;l&&(e=e.setIn(["args",t,"valueSrc"],l))}return e},t.setArgValueSrc=function(e,t,r,n,o){return e&&e.get("func")&&(e=e.setIn(["args",t],new u.default.Map({valueSrc:r}))),e}},6175:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.TreeUtils=t.ExportUtils=t.DefaultUtils=t.ConfigUtils=void 0,Object.defineProperty(t,"getSwitchValues",{enumerable:!0,get:function(){return c.getSwitchValues}}),Object.defineProperty(t,"simulateAsyncFetch",{enumerable:!0,get:function(){return a.simulateAsyncFetch}}),Object.defineProperty(t,"uuid",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"validateTree",{enumerable:!0,get:function(){return i.validateTree}});var i=r(8756),a=r(1511),u=n(r(2676)),l=p(r(7100));t.ConfigUtils=l;var s=p(r(781));t.DefaultUtils=s;var c=p(r(8178));t.TreeUtils=c;var f=p(r(3725));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}t.ExportUtils=f},9043:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.useOnPropsChanged=t.pureShouldComponentUpdate=t.liteShouldComponentUpdate=t.isUsingLegacyReactDomRender=t.bindActionCreators=void 0;var o=n(r(5959)),i=n(r(1612)),a=r(3585),u=function e(t){if(t){var r,n=(r=t)._reactRootContainer?"root":Object.getOwnPropertyNames(r).filter((function(e){return e.startsWith("__reactContainer")})).length>0?"container":void 0;return void 0!==n?n:e(t.parentNode)}};t.isUsingLegacyReactDomRender=function(e){return"root"===u(e)},t.liteShouldComponentUpdate=function(e,t){return function(r,n){var o=e.props,i=e.state,u=r!=o||n!=i;if(u&&i==n&&o!=r){var l=[];for(var s in r){var c=r[s]!=o[s];c&&("ignore"==t[s]?c=!1:"shallow_deep"==t[s]?c=!(0,a.shallowEqual)(r[s],o[s],!0):"shallow"==t[s]?c=!(0,a.shallowEqual)(r[s],o[s]):"function"==typeof t[s]&&(c=t[s](r[s],o[s],n))),c&&l.push(s)}l.length||(u=!1)}return u}},t.pureShouldComponentUpdate=function(e){return function(t,r){return!(0,a.shallowEqual)(e.props,t)||!(0,a.shallowEqual)(e.state,r)}};var l=function(){var e=o.default.version.split(".").map(parseInt.bind(null,10));return 16==e[0]&&e[1]>=3||e[0]>16};t.useOnPropsChanged=function(e){l?e.UNSAFE_componentWillReceiveProps=function(t){e.onPropsChanged(t)}:e.componentWillReceiveProps=function(t){e.onPropsChanged(t)}},t.bindActionCreators=function(e,t,r){return(0,i.default)(e,(function(e){return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r(e.apply(void 0,[t].concat(o)))}}))}},1820:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.getWidgetsForFieldOp=t.getWidgetForFieldOp=t.getValueSourcesForFieldOp=t.getValueLabel=t.getOperatorsForField=t.getNewValueForFieldOp=t.getFuncPathLabels=t.getFirstOperator=t.getFirstField=t.getFieldPathLabels=t.getFieldPath=t.getFieldPartsConfigs=t.formatFieldName=t.filterValueSourcesForField=void 0;var o=n(r(5992)),i=n(r(2409)),a=n(r(7033)),u=r(7100),l=r(3585),s=n(r(9612)),c=r(8756),f=n(r(8906)),d=["select","multiselect","treeselect","treemultiselect"];t.getNewValueForFieldOp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,f=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],p=arguments.length>7&&void 0!==arguments[7]&&arguments[7];t||(t=e);var v=r.get("field"),g=r.get("operator"),h=r.get("value"),O=r.get("valueSrc",new s.default.List),E=r.get("valueType",new s.default.List),b=r.get("asyncListValues"),_=e.settings,S=_.convertableWidgets,T=_.clearValueOnChangeField,R=_.clearValueOnChangeOp,C=_.showErrorMessage,P=(0,u.getOperatorConfig)(e,o,n),j=o?(0,l.defaultValue)(P.cardinality,1):null,L=(0,u.getFieldConfig)(t,v),w=(0,u.getFieldConfig)(e,n),I=v&&g&&o&&null!=h&&(!i||"field"==i&&!T||"operator"==i&&!R)&&L&&w&&L.type==w.type;I&&d.includes(L.type)&&"field"==i&&(I=!1);for(var N=0;N<j;N++){var A=O.get(N)||null,x=m(t,v,g,A),F=m(e,n,o,A),D="value"==A?x:m(t,v,g,"value"),k="value"==A?F:m(e,n,o,"value");k==D||(S[D]||[]).includes(k)||(I=!1)}g!=o&&[g,o].includes("proximity")&&(I=!1);var M=(0,u.getFieldWidgetConfig)(e,n,o,null,O.first()),V=y(e,n,o),U={},q=Array.from({length:j},(function(){return null}));if(I)for(var W=function(t){var r=h.get(t),u=E.get(t)||null,l=O.get(t)||null,s=null!=V.find((function(e){return e==l}));!s&&t>0&&null==l&&(s=!0);var d=b,v=(0,c.validateValue)(e,n,n,o,r,u,l,d,f,p),g=(0,a.default)(v,2),y=g[0],m=g[1],_=m!==r,S=!s||!!y&&("field"==i||!C&&!_);if(!!y&&C&&!S&&!_&&(q[t]=y),_&&(U[t]=m),S)return I=!1,"break"},G=0;G<j&&"break"!==W(G);G++);var B,K=null,z=null,H=null;if(K=new s.default.List(Array.from({length:j},(function(e,t){var r=void 0;if(I)t<h.size&&(r=h.get(t),void 0!==U[t]&&(r=U[t]));else if(1==j){var n;r=(0,l.getFirstDefined)([null==w?void 0:w.defaultValue,null==w||null===(n=w.fieldSettings)||void 0===n?void 0:n.defaultValue,null==M?void 0:M.defaultValue])}return r}))),z=new s.default.List(Array.from({length:j},(function(e,t){var r=null;return I?t<O.size&&(r=O.get(t)):(1==V.length||V.length>1)&&(r=V[0]),r}))),C){if(P&&P.validateValues&&z.toJS().filter((function(e){return"value"==e||null==e})).length==j){var Y=M&&M.toJS?K.toJS().map((function(e){return M.toJS(e,M)})):K.toJS(),$=P.validateValues(Y);C&&q.push($)}H=new s.default.List(q)}return B=new s.default.List(Array.from({length:j},(function(e,t){var r=null;return I?t<E.size&&(r=E.get(t)):1==j&&M&&void 0!==M.type?r=M.type:1==j&&w&&void 0!==w.type&&(r="!group"==w.type?"number":w.type),r}))),{canReuseValue:I,newValue:K,newValueSrc:z,newValueType:B,newValueError:H,operatorCardinality:j}},t.getFirstField=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.settings.fieldSeparator,n="string"==typeof t?t.split(r):t,o=t?(0,u.getFieldRawConfig)(e,t):e,i=null,a=[];do{var l=o===e?e.fields:o.subfields;if(!l||!Object.keys(l).length){o=i=null;break}i=Object.keys(l)[0],a.push(i),o=l[i]}while("!struct"==o.type||"!group"==o.type);return(n||[]).concat(a).join(r)};var p=function(e,t){var r=(0,u.getFieldConfig)(e,t);return r?r.operators:[]};t.getOperatorsForField=p,t.getFirstOperator=function(e,t){var r=p(e,t);return r?r[0]:null},t.getFieldPath=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;var n=t.settings.fieldSeparator,o=Array.isArray(e)?e:e.split(n);return r?o:o.map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return e.join(n)}))},t.getFuncPathLabels=function(e,t){return v(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,"funcs","subfields")};var v=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fields",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"subfields";if(!e)return null;var a=t.settings.fieldSeparator,l=Array.isArray(e)?e:e.split(a),s=r?Array.isArray(r)?r:r.split(a):[];return l.slice(s.length).map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return[].concat((0,i.default)(s),(0,i.default)(e)).join(a)})).map((function(e){var r=(0,u.getFieldRawConfig)(t,e,n,o);return r&&r.label||r&&(0,f.default)(e.split(a))})).filter((function(e){return null!=e}))};function g(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=[],a=[];if(!t)return{widgets:i,valueSrcs:a};var l="object"==(0,o.default)(t)&&(!!t.func&&!!t.arg||t._isFuncArg),s=(0,u.getFieldConfig)(e,t),c=r?e.operators[r]:null;if(s&&s.widgets){var f=function(o){var u=s.widgets[o],f=e.widgets[o].valueSrc||"value",d=!0;if("field"==o&&(d=d&&h(e,["field"],s).length>0),"func"==o&&(d=d&&h(e,["func"],s).length>0),"value"!=n||u.operators||l||"!case_value"==t||(d=!1),u.operators&&r&&(d=d&&-1!=u.operators.indexOf(r)),n&&n!=f&&"const"!=n&&(d=!1),c&&0==c.cardinality&&"value"!=f&&(d=!1),d){i.push(o);var p=s.valueSources&&-1!=s.valueSources.indexOf(f);c&&c.valueSources&&-1==c.valueSources.indexOf(f)&&(p=!1),p&&!a.find((function(e){return e==f}))&&a.push(f)}};for(var d in s.widgets)f(d)}var p=function(e){var t=0;return s.preferWidgets?s.preferWidgets.includes(e)&&(t+=10-s.preferWidgets.indexOf(e)):e==s.mainWidget&&(t+=100),"field"==e&&(t-=1),"func"==e&&(t-=2),t};return i.sort((function(e,t){return p(t)-p(e)})),{widgets:i,valueSrcs:a}}t.getFieldPathLabels=v,t.getFieldPartsConfigs=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;var n=r&&(0,u.getFieldRawConfig)(t,r)||null,o=t.settings.fieldSeparator,a=Array.isArray(e)?e:e.split(o),l=r?Array.isArray(r)?r:r.split(o):[];return a.slice(l.length).map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return{part:[].concat((0,i.default)(l),(0,i.default)(e)).join(o),key:e[e.length-1]}})).map((function(e){var r=e.part;return{key:e.key,cnf:(0,u.getFieldRawConfig)(t,r)}})).map((function(e,t,r){return[e.key,e.cnf,t>0?r[t-1].cnf:n]}))},t.getValueLabel=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=t&&"object"==(0,o.default)(t)&&!!t.func&&!!t.arg,s=e.settings.showLabels,c=(0,u.getFieldConfig)(e,t),f=(0,u.getFieldWidgetConfig)(e,t,r,null,i)||{},d=(0,u.getOperatorConfig)(e,r,t)||{},p=null;if((a?1:d.cardinality)>1){var v=f.valueLabels||d.valueLabels;v&&(p=v[n]),p&&"object"!=(0,o.default)(p)&&(p={label:p,placeholder:p}),p||(p={label:e.settings.valueLabel+" "+(n+1),placeholder:e.settings.valuePlaceholder+" "+(n+1)})}else{var g=f.valueLabel,h=f.valuePlaceholder;l&&(g||(g=c.label||t.arg),h||s||(h=c.label||t.arg)),p={label:g||e.settings.valueLabel,placeholder:h||e.settings.valuePlaceholder}}return p},t.getWidgetsForFieldOp=function(e,t,r){return g(e,t,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null).widgets};var h=function(e,t,r){return r?t.filter((function(t){var n=!0;if("field"==t&&e._fieldsCntByType){var o=r._isFuncArg?0:1;n=n&&e._fieldsCntByType[r.type]>o}return"func"==t&&(e._funcsCntByType&&(n=n&&!!e._funcsCntByType[r.type]),r.funcs&&(n=n&&r.funcs.length>0)),n})):t};t.filterValueSourcesForField=h;var y=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=g(e,t,r,null).valueSrcs;return h(e,o,n)};t.getValueSourcesForFieldOp=y;var m=function(e,t,r){var n=g(e,t,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null).widgets,o=null;return n.length&&(o=n[0]),o};t.getWidgetForFieldOp=m,t.formatFieldName=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e){var o=(0,u.getFieldConfig)(t,e)||{},a=t.settings.fieldSeparator,l=Array.isArray(e)?e:e.split(a),s=Array.isArray(e)?e.join(a):e;if(o.tableName){var c=(0,i.default)(l);c[0]=o.tableName,s=c.join(a)}if(o.fieldName&&(s=o.fieldName),n){var f=(0,u.getFieldConfig)(t,n)||{},d=n;f.fieldName&&(d=f.fieldName),0==s.indexOf(d+a)?s=s.slice((d+a).length):r.errors.push("Can't cut group ".concat(d," from field ").concat(s))}return s}}},3585:(e,t,r)=>{"use strict";var n=r(1956),o=r(5992);Object.defineProperty(t,"__esModule",{value:!0}),t.applyToJS=function(e){return _(e)?e.toJS():e},t.mapListValues=t.logger=t.listValuesToArray=t.isJsonLogic=t.isImmutable=t.immutableEqual=t.getValueInListValues=t.getTitleInListValues=t.getLogger=t.getItemInListValues=t.getFirstDefined=t.flatizeTreeData=t.escapeRegExp=t.eqSet=t.eqArrSet=t.defaultValue=t.defaultTreeDataMap=t.deepEqual=void 0,t.mergeArraysSmart=function(e,t){return e||(e=[]),t||(t=[]),t.map((function(t){return[t,e.indexOf(t)]})).map((function(e,t,r){var n=(0,i.default)(e,2),o=n[0];if(-1==n[1]){var a=r.slice(t+1),u=r.slice(0,t).reverse().find((function(e){var t=(0,i.default)(e,2);return t[0],-1!=t[1]})),l=a.find((function(e){var t=(0,i.default)(e,2);return t[0],-1!=t[1]}));return l?[o,"before",l[0]]:u?[o,"after",u[0]]:[o,"append",null]}return null})).filter((function(e){return null!==e})).reduce((function(e,t){var r=(0,i.default)(t,3),n=r[0],o=r[1],a=r[2],u=e.indexOf(a);return-1==e.indexOf(n)&&(u>-1?e.splice(u+("after"==o?1:0),0,n):e.splice("append"==o?1/0:0,0,n)),e}),e.slice())},t.shallowEqual=t.removePrefixPath=t.normalizeListValues=void 0,t.sleep=function(e){return new Promise((function(t){setTimeout(t,e)}))},t.toImmutableList=function(e){return _(e)?e:new l.default.List(e)},t.truncateString=void 0;var i=n(r(7033)),a=n(r(2409)),u=n(r(5992)),l=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(9612));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.defaultValue=function(e,t){return void 0===e?t:e},t.truncateString=function(e,t,r){if(!t||e.length<=t)return e;var n=e.substr(0,t-1);return(r?n.substr(0,n.lastIndexOf(" ")):n)+"..."},t.immutableEqual=function(e,t){return e===t||e.equals(t)},t.deepEqual=function(e,t){return e===t||(l.Map.isMap(e)?e.equals(t):JSON.stringify(e)==JSON.stringify(t))};var d=function(e,t){if(e.size!==t.size)return!1;var r,n=c(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(!t.has(o))return!1}}catch(e){n.e(e)}finally{n.f()}return!0};t.eqSet=d,t.eqArrSet=function(e,t){return d(new Set(e),new Set(t))};var p=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t||(Array.isArray(e)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var o=0;o<n;o++)if(!(r?p(e[o],t[o],r):e[o]===t[o]))return!1;return!0}(e,t,r):l.Map.isMap(e)?e.equals(t):"object"==(0,u.default)(e)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),o=Object.keys(t),i=n.length;if(o.length!==i)return!1;for(var a=0;a<i;a++){var u=n[a];if(!(r?p(e[u],t[u],r):e[u]===t[u]))return!1}return!0}(e,t,r):e===t)};t.shallowEqual=p,t.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\/]/g,"\\$&")};var v=function(e){return"object"==(0,u.default)(e)&&null!==e},g=function(e,t){return v(e)?e:{value:e,title:void 0!==t?t:e}},h=function(e){if(!v(e))return e;if(Array.isArray(e))return e.map((function(e){return g(e)}));var t=[];for(var r in e){var n=e[r];t.push(g(r,n))}return t};t.listValuesToArray=h;var y=function(e,t){if(Array.isArray(e)){var r=e.map((function(e){return g(e)}));return r.find((function(e){return e.value===t}))||r.find((function(e){return"".concat(e.value)===t}))}return void 0!==e[t]?g(t,e[t]):void 0};t.getItemInListValues=y,t.getTitleInListValues=function(e,t){if(null==e)return t;var r=y(e,t);return void 0!==r?r.title:t},t.getValueInListValues=function(e,t){if(null==e)return t;var r=y(e,t);return void 0!==r?r.value:t},t.mapListValues=function(e,t){var r=[];if(Array.isArray(e)){var n,o=c(e);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=t(g(i));null!=a&&r.push(a)}}catch(e){o.e(e)}finally{o.f()}}else for(var u in e){var l=t(g(u,e[u]));null!=l&&r.push(l)}return r};var m={id:"value",pId:"parent",rootPId:void 0};t.defaultTreeDataMap=m;var O=function(e){var t,r,n=m,o=function e(o,i,a){if(o.children){1==a&&(o[n.pId]=n.rootPId);var u,l=o.children.length,s=c(o.children);try{for(s.s();!(u=s.n()).done;){var f=u.value;f[n.pId]=o[n.id],t++,i.splice(t,0,f),r++,e(f,i,a+1)}}catch(e){s.e(e)}finally{s.f()}delete o.children,0==l&&(i.splice(t,1),t--,r--)}};if(Array.isArray(e))for(r=e.length,t=0;t<r;t++){var i=e[t];v(i)&&(void 0!==i[n.pId]&&i[n.pId]!=n.rootPId||o(i,e,1))}return e};t.flatizeTreeData=O;var E=function e(t,r){var n=m,o=y(t,r),i=o?o[n.pId]:void 0,u=i?t.find((function(e){return e[n.id]===i})):void 0;return u?[u.value].concat((0,a.default)(e(t,u.value))):[]},b=function(e,t){var r=m,n=y(e,t);return n?e.filter((function(e){return e[r.pId]===n[r.id]})).map((function(e){return e.value})):[]};t.normalizeListValues=function(e,t,r){var n=["treeselect","treemultiselect"].includes(t),o=["multiselect","treemultiselect"].includes(t);return n&&(e=h(e),e=function(e,t,r){var n,o=c(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i.path=E(e,i.value),0!=t.treeSelectOnlyLeafs){var a=b(e,i.value);r||(i.selectable=0==a.length)}}}catch(e){o.e(e)}finally{o.f()}return e}(e=O(e),r,o)),e},t.removePrefixPath=function(e,t){if(!e)return e;for(var r=!0,n=0;n<t.length;n++){var o=t[n];if(void 0===e[n]||o!=e[n]){r=!1;break}}return r?e.slice(t.length):e},t.isJsonLogic=function(e){return"object"===(0,u.default)(e)&&null!==e&&!Array.isArray(e)&&1===Object.keys(e).length};var _=function(e){return"object"===(0,u.default)(e)&&null!==e&&"function"==typeof e.toJS};t.isImmutable=_;var S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(null!=e?e:("undefined"!=typeof process&&process.env,0))?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}};t.getLogger=S,t.getFirstDefined=function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0;r<t.length;r++){var n=t[r];if(void 0!==n){e=n;break}}return e};var T=S();t.logger=T},8178:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.removePathsInTree=t.removeIsLockedInTree=t.isEmptyTree=t.hasChildren=t.getTreeBadFields=t.getTotalRulesCountInTree=t.getTotalReordableNodesCountInTree=t.getSwitchValues=t.getLightTree=t.getItemByPath=t.getFlatTree=t.fixPathsInTree=t.fixEmptyGroupsInTree=t.expandTreeSubpath=t.expandTreePath=void 0;var o=n(r(2409)),i=n(r(7487)),a=n(r(9612)),u=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.interpose("children1").withMutations((function(e){return e.skip(1),e.push.apply(e,r),e}))};t.expandTreePath=u,t.expandTreeSubpath=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.interpose("children1").withMutations((function(e){return e.push.apply(e,r),e}))},t.getItemByPath=function(e,t){var r=new a.default.OrderedMap((0,i.default)({},e.get("id"),e)),n=e;return t.forEach((function(e){n=r.get(e),r=n.get("children1")})),n},t.removePathsInTree=function(e){var t=e;return function e(r,n){var o=n.push(r.get("id"));r.get("path")&&(t=t.removeIn(u(o,"path")));var i=r.get("children1");i&&i.map((function(t,r){e(t,o)}))}(e,new a.default.List),t},t.removeIsLockedInTree=function(e){var t=e;return function e(r,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n.push(r.get("id")),a=r.getIn(["properties","isLocked"]);o&&a&&(t=t.deleteIn(u(i,"properties","isLocked")));var l=r.get("children1");l&&l.map((function(t,r){e(t,i,a||o)}))}(e,new a.default.List),t},t.fixPathsInTree=function(e){var t=e;return function e(r,n,o,i){if(r){var l=r.get("path"),s=r.get("id"),c=s||i,f=n.push(c);l&&l.equals(f)||(t=t.setIn(u(f,"path"),f)),s||(t=t.setIn(u(f,"id"),c));var d=r.get("children1");d&&("Map"==d.constructor.name&&(t=t.setIn(u(f,"children1"),new a.default.OrderedMap(d))),d.map((function(t,r){e(t,f,o+1,r)})))}}(e,new a.default.List,0),t},t.fixEmptyGroupsInTree=function(e){var t=e;return function e(r,n,o,i){if(!r)return!1;var a=r.get("id")||i,l=n.push(a),s=r.get("children1");if(s){var c=s.map((function(t,r){return e(t,l,o+1,r)})).reduce((function(e,t){return e&&t}),!0);if((0==s.size||c)&&o>0)return t=t.deleteIn(u(l)),!0}return!1}(e,new a.default.List,0),t},t.getFlatTree=function(e){var t=[],r={},n=0;!function e(o,i,a,u,l,s,c,f,d){var p=o.get("type"),v=o.get("collapsed"),g=o.get("id"),h=o.get("children1"),y=o.getIn(["properties","isLocked"]),m=h?h.map((function(e,t){return t})):null,O="rule_group"==p,E=!l&&(!h||O),b=t.length,_=n;if(t.push(g),a||(n+=1),c.height=(c.height||0)+1,r[g]={type:p,parent:i.length?i[i.length-1]:null,parentType:f,caseId:"case_group"==p?g:d,isDefaultCase:"case_group"==p&&!h,path:i.concat(g),lev:s,leaf:!h,index:b,id:g,children:m,leafsCount:0,_top:b,_height:T-b,top:a?null:_,height:R,bottom:(a?null:_)+R,collapsed:v,node:o,isLocked:y||u},h){var S={};h.map((function(t,r){e(t,i.concat(g),a||v,u||y,l||O,s+1,S,p,"case_group"==p?g:d)})),v||(c.height=(c.height||0)+(S.height||0))}d&&E&&r[d].leafsCount++;var T=t.length,R=c.height;Object.assign(r[g],{_height:T-b,height:R,bottom:(a?null:_)+R})}(e,[],!1,!1,!1,0,{},null,null);for(var o=0;o<t.length;o++){var i=o>0?t[o-1]:null,a=o<t.length-1?t[o+1]:null,u=r[t[o]];u.prev=i,u.next=a}return{flat:t,items:r}},t.getTotalReordableNodesCountInTree=function(e){if(!e)return-1;var t=0;return function e(r,n,o){var i,a,u;"function"==typeof r.get?(i=r.get("id"),a=r.get("children1"),u=r.get("type")):(i=r.id,a=r.children1,u=r.type),t++,a&&"rule_group"!=u&&a.map((function(t,r){e(t,n.concat(i),o+1)}))}(e,[],0),t-1},t.getTotalRulesCountInTree=function(e){if(!e)return-1;var t=0;return function e(r,n,o){var i,a,u;"function"==typeof r.get?(i=r.get("id"),a=r.get("children1"),u=r.get("type")):(i=r.id,a=r.children1,u=r.type),"rule"==u||"rule_group"==u?t++:a&&a.map((function(t,r){e(t,n.concat(i),o+1)}))}(e,[],0),t},t.getTreeBadFields=function(e){var t=[];return e&&function e(r,n,o){var i=r.get("id"),a=r.get("children1"),u=r.getIn(["properties","valueError"]),l=r.getIn(["properties","field"]);u&&u.size>0&&u.filter((function(e){return null!=e})).size>0&&t.push(l),a&&a.map((function(t,r){e(t,n.concat(i),o+1)}))}(e,[],0),Array.from(new Set(t))},t.getLightTree=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e;return function e(r,n){r.path&&delete r.path,!t&&n&&delete r.id;var o=r.properties;o&&null==o.operatorOptions&&delete o.operatorOptions;var i=r.children1;if(i){for(var a in i)e(i[a],a);t&&(r.children1=Object.values(i))}}(e,null),r},t.getSwitchValues=function(e){var t=[],r=e.get("children1");return r&&r.map((function(e){var r,n=e.getIn(["properties","value"]);n&&1==n.size?(r=n.get(0),Array.isArray(r)&&0==r.length&&(r=null)):r=null,t=[].concat((0,o.default)(t),[r])})),t},t.isEmptyTree=function(e){return!e.get("children1")||0==e.get("children1").size},t.hasChildren=function(e,t){return e.getIn(u(t,"children1")).size>0}},2676:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=0;t.default=function(){var e=((new Date).getTime().toString(16)+"FF").substr(0,11);return"ssssssss-xxxx-4xxx-yxxx-x".replace(/[xys]/g,(function(e){var t="s"===e?Math.floor(16*Math.random()):15&r++;return("x"===e?t:3&t|8).toString(16)}))+e}},8756:(e,t,r)=>{"use strict";var n=r(1956);Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateTree=t.validateAndFixTree=t.createValidationMemo=void 0;var o=n(r(2409)),i=n(r(7033)),a=n(r(5992)),u=r(7100),l=r(1820),s=r(3585),c=r(781),f=r(8178),d=n(r(7027)),p=r(9612);t.createValidationMemo=function(){var e,t,r;return function(n,o,i){return o?n.__configId===r&&((0,s.immutableEqual)(o,e)||(0,s.immutableEqual)(o,t))?t:(r=n.__configId,e=o,t=v(o,null,n,i||n)):null}};var v=function(e,t,r,n){var o=g(e,t,r,n);return(0,f.fixPathsInTree)(o)};t.validateAndFixTree=v;var g=function(e,t,r,n,o,i){return void 0===o&&(o=r.settings.removeEmptyGroupsOnLoad),void 0===i&&(i=r.settings.removeIncompleteRulesOnLoad),h(e,[],null,{},{config:r,oldConfig:n,removeEmptyGroups:o,removeIncompleteRules:i})};function h(e,t,r,n,o){var i=e.get("type"),a=e.get("children1");return("group"===i||"rule_group"===i||"case_group"==i||"switch_group"==i)&&a&&a.size?function(e,t,r,n,o){var i=o.removeEmptyGroups,a=e.get("id"),u=e.get("children1"),l=u;!a&&r&&(a=r,e=e.set("id",a),n.sanitized=!0);var s={};u=u.map((function(e,r){return h(e,t.concat(a),r,s,o)})),i&&(u=u.filter((function(e){return null!=e})));var c=s.sanitized||l.size!=u.size;return!u.size&&i&&t.length&&(c=!0,e=void 0),c&&(n.sanitized=!0),c&&e&&(e=e.set("children1",u)),e}(e,t,r,n,o):"rule"===i?function(e,t,r,n,o){var i=o.removeIncompleteRules,a=o.config,f=o.oldConfig,d=a.settings.showErrorMessage,p=e.get("id"),v=e.get("properties"),g=v.get("field")||null,h=v.get("operator")||null,y=v.get("operatorOptions"),m=v.get("valueSrc"),O=v.get("value"),E=v.get("valueError"),b={field:g,operator:h,operatorOptions:y?y.toJS():{},valueSrc:m?m.toJS():null,value:O?O.toJS():null,valueError:E?E.toJS():null};g&&h&&O&&O.includes(void 0),!p&&r&&(p=r,e=e.set("id",p),n.sanitized=!0);var _=g?(0,u.getFieldConfig)(a,g):null;g&&!_&&(s.logger.warn("No config for field ".concat(g)),g=null),null==g&&(v=["operator","operatorOptions","valueSrc","value"].reduce((function(e,t){return e.delete(t)}),v),h=null),"range_between"!=h&&"range_not_between"!=h||(h="range_between"==h?"between":"not_between",console.info("Fixed operator ".concat(v.get("operator")," to ").concat(h)),v=v.set("operator",h));var S=h?(0,u.getOperatorConfig)(a,h,g):null;h&&!S&&(console.warn("No config for operator ".concat(h)),h=null);var T=g?(0,l.getOperatorsForField)(a,g):[];T?h&&-1==T.indexOf(h)&&("is_empty"==h||"is_not_empty"==h?(h="is_empty"==h?"is_null":"is_not_null",console.info("Fixed operator ".concat(v.get("operator")," to ").concat(h," for ").concat(g)),v=v.set("operator",h)):(console.warn("Operator ".concat(h," is not supported for field ").concat(g)),h=null)):(console.warn("Type of field ".concat(g," is not supported")),h=null),null==h&&(v=(v=(v=v.delete("operatorOptions")).delete("valueSrc")).delete("value")),y=v.get("operatorOptions"),h&&(0,s.defaultValue)(S.cardinality,1),!h||y&&!S.options?(y=null,v=v.delete("operatorOptions")):h&&!y&&S.options&&(y=(0,c.defaultOperatorOptions)(a,h,g),v=v.set("operatorOptions",y)),m=v.get("valueSrc"),O=v.get("value");var R=!d,C=(0,l.getNewValueForFieldOp)(a,f,v,g,h,null,R,!0);O=C.newValue,m=C.newValueSrc,E=C.newValueError,v=(v=v.set("value",O)).set("valueSrc",m),d&&(v=v.set("valueError",E));var P={field:g,operator:h,operatorOptions:y?y.toJS():{},valueSrc:m?m.toJS():null,value:O?O.toJS():null,valueError:E?E.toJS():null},j=!(0,s.deepEqual)(b,P),L=g&&h&&O&&!O.includes(void 0);return j&&(n.sanitized=!0),!L&&i?e=void 0:j&&(e=e.set("properties",v)),e}(e,0,r,n,o):e}t.validateTree=g;var y=function(e,t,r,n,o,a,s,c){var f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=arguments.length>9&&void 0!==arguments[9]&&arguments[9],v=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],g=null,h=o;if(null!=o){if("field"==s){var y=O(t,r,o,s,a,c,e,n,p,f),b=(0,i.default)(y,2);g=b[0],h=b[1]}else if("func"==s){var _=E(t,r,o,s,a,c,e,n,p,f),S=(0,i.default)(_,2);g=S[0],h=S[1]}else if("value"==s||!s){var T=m(t,r,o,s,a,c,e,n,p,f),R=(0,i.default)(T,2);g=R[0],h=R[1]}if(!g){(0,u.getFieldConfig)(e,r);var C=(0,l.getWidgetForFieldOp)(e,r,n,s),P=n?(0,u.getOperatorConfig)(e,n,r):null,j=(0,d.default)((0,u.getFieldWidgetConfig)(e,r,n,C,s),["factory"]),L="field"==s?(0,u.getFieldConfig)(e,o):null,w=j,I=j.validateValue;if("function"==typeof I){var N=[h,w,n,P];"field"==s&&N.push(L);var A=I.apply(void 0,N);"boolean"==typeof A?0==A&&(g="Invalid value"):g=A}}}return v&&g&&console.warn("[RAQB validate]","Field ".concat(r,": ").concat(g)),[g,h]};t.validateValue=y;var m=function(e,t,r,n,c,f,d){var v,g,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,y=arguments.length>8&&void 0!==arguments[8]&&arguments[8],m=arguments.length>9&&void 0!==arguments[9]&&arguments[9];if(t){var O=(0,u.getFieldConfig)(d,t),E=(0,l.getWidgetForFieldOp)(d,t,h,n),b=d.widgets[E],_=b.type,S=b.jsType,T=O.fieldSettings;if(c!=_)return["Value should have type ".concat(_,", but got value of type ").concat(c),r];if(S&&(g=S,function(e){return"object"==(0,a.default)(e)&&null!==e&&Array.isArray(e)?"array":(0,a.default)(e)}(v=r)!=g&&("number"!=g||isNaN(v)))&&!T.listValues)return["Value should have JS type ".concat(S,", but got value of type ").concat((0,a.default)(r)),r];if(T){var R=f||T.listValues;if(R&&!T.allowCustomValues)return function(e,t,r,n,a){var u=p.List.isList(e)?e.toJS():e instanceof Array?(0,o.default)(e):void 0;if(u){var l=u.reduce((function(e,r){var n=(0,i.default)(e,2),a=n[0],u=n[1],l=(0,s.getItemInListValues)(t,r);return null==l?[a,[].concat((0,o.default)(u),[r])]:[[].concat((0,o.default)(a),[l.value]),u]}),[[],[]]),c=(0,i.default)(l,2),f=c[0],d=c[1],v=d.length>1;return[d.length?"".concat(v?"Values":"Value"," ").concat(d.join(", ")," ").concat(v?"are":"is"," not in list of values"):null,(r=void 0!==a?a:r||n)?f:e]}var g=(0,s.getItemInListValues)(t,e);return null==g?["Value ".concat(e," is not in list of values"),e]:[null,e=g.value]}(r,R,m,y,d.settings.removeInvalidMultiSelectValuesOnLoad);if(null!=T.min&&r<T.min)return["Value ".concat(r," < min ").concat(T.min),m?T.min:r];if(null!=T.max&&r>T.max)return["Value ".concat(r," > max ").concat(T.max),m?T.max:r]}}return[null,r]},O=function(e,t,r,n,o,i,l){var s=l.settings.fieldSeparator,c="object"==(0,a.default)(t)&&(null==t?void 0:t._isFuncArg),f=Array.isArray(e)?e.join(s):e,d=Array.isArray(r)?r.join(s):r,p=(0,u.getFieldConfig)(l,r);return p?d!=f||c?o&&o!=p.type?["Field ".concat(r," is of type ").concat(p.type,", but expected ").concat(o),r]:[null,r]:["Can't compare field ".concat(e," with itself"),r]:["Unknown field ".concat(r),r]},E=function(e,t,r,n,o,a,l){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=arguments.length>9&&void 0!==arguments[9]&&arguments[9],d=r;if(r){var p=r.get("func");if(p){var v=(0,u.getFuncConfig)(l,p);if(!v)return["Unknown function ".concat(p),r];if(o&&v.returnType!=o)return["Function ".concat(p," should return value of type ").concat(v.returnType,", but got ").concat(o),r];for(var g in v.args){var h=v.args[g],m=d.get("args"),O=m?m.get(g):void 0,E=(0,u.getFieldConfig)(l,h),b=O?O.get("value"):void 0,_=O?O.get("valueSrc"):void 0;if(void 0!==b){var S=y(l,e,E,s,b,h.type,_,a,f,c,!1),T=(0,i.default)(S,2),R=T[0],C=T[1];if(null!==R){if(!f)return["Invalid value of arg ".concat(g," for func ").concat(p,": ").concat(R),r];d=d.deleteIn(["args",g]),void 0!==h.defaultValue&&(d=(d=d.setIn(["args",g,"value"],h.defaultValue)).setIn(["args",g,"valueSrc"],"value"))}else C!==b&&(d=d.setIn(["args",g,"value"],C))}else if(c&&void 0===h.defaultValue&&!f)return["Value of arg ".concat(g," for func ").concat(p," is required"),r]}}}return[null,d]}},9612:function(e){e.exports=function(){"use strict";var e=Array.prototype.slice;function t(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function r(e){return a(e)?e:G(e)}function n(e){return u(e)?e:B(e)}function o(e){return l(e)?e:K(e)}function i(e){return a(e)&&!s(e)?e:z(e)}function a(e){return!(!e||!e[f])}function u(e){return!(!e||!e[d])}function l(e){return!(!e||!e[p])}function s(e){return u(e)||l(e)}function c(e){return!(!e||!e[v])}t(n,r),t(o,r),t(i,r),r.isIterable=a,r.isKeyed=u,r.isIndexed=l,r.isAssociative=s,r.isOrdered=c,r.Keyed=n,r.Indexed=o,r.Set=i;var f="@@__IMMUTABLE_ITERABLE__@@",d="@@__IMMUTABLE_KEYED__@@",p="@@__IMMUTABLE_INDEXED__@@",v="@@__IMMUTABLE_ORDERED__@@",g="delete",h=32,y=31,m={},O={value:!1},E={value:!1};function b(e){return e.value=!1,e}function _(e){e&&(e.value=!0)}function S(){}function T(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),o=0;o<r;o++)n[o]=e[o+t];return n}function R(e){return void 0===e.size&&(e.size=e.__iterate(P)),e.size}function C(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r}return t<0?R(e)+t:t}function P(){return!0}function j(e,t,r){return(0===e||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function L(e,t){return I(e,t,0)}function w(e,t){return I(e,t,t)}function I(e,t,r){return void 0===e?r:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}var N="function"==typeof Symbol&&Symbol.iterator,A="@@iterator",x=N||A;function F(e){this.next=e}function D(e,t,r,n){var o=0===e?t:1===e?r:[t,r];return n?n.value=o:n={value:o,done:!1},n}function k(){return{value:void 0,done:!0}}function M(e){return!!q(e)}function V(e){return e&&"function"==typeof e.next}function U(e){var t=q(e);return t&&t.call(e)}function q(e){var t=e&&(N&&e[N]||e[A]);if("function"==typeof t)return t}function W(e){return e&&"number"==typeof e.length}function G(e){return null==e?re():a(e)?e.toSeq():function(e){var t=ie(e)||"object"==typeof e&&new Q(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}(e)}function B(e){return null==e?re().toKeyedSeq():a(e)?u(e)?e.toSeq():e.fromEntrySeq():ne(e)}function K(e){return null==e?re():a(e)?u(e)?e.entrySeq():e.toIndexedSeq():oe(e)}function z(e){return(null==e?re():a(e)?u(e)?e.entrySeq():e:oe(e)).toSetSeq()}F.prototype.toString=function(){return"[Iterator]"},F.KEYS=0,F.VALUES=1,F.ENTRIES=2,F.prototype.inspect=F.prototype.toSource=function(){return this.toString()},F.prototype[x]=function(){return this},t(G,r),G.of=function(){return G(arguments)},G.prototype.toSeq=function(){return this},G.prototype.toString=function(){return this.__toString("Seq {","}")},G.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},G.prototype.__iterate=function(e,t){return ae(this,e,t,!0)},G.prototype.__iterator=function(e,t){return ue(this,e,t,!0)},t(B,G),B.prototype.toKeyedSeq=function(){return this},t(K,G),K.of=function(){return K(arguments)},K.prototype.toIndexedSeq=function(){return this},K.prototype.toString=function(){return this.__toString("Seq [","]")},K.prototype.__iterate=function(e,t){return ae(this,e,t,!1)},K.prototype.__iterator=function(e,t){return ue(this,e,t,!1)},t(z,G),z.of=function(){return z(arguments)},z.prototype.toSetSeq=function(){return this},G.isSeq=te,G.Keyed=B,G.Set=z,G.Indexed=K;var H,Y,$,J="@@__IMMUTABLE_SEQ__@@";function X(e){this._array=e,this.size=e.length}function Q(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function Z(e){this._iterable=e,this.size=e.length||e.size}function ee(e){this._iterator=e,this._iteratorCache=[]}function te(e){return!(!e||!e[J])}function re(){return H||(H=new X([]))}function ne(e){var t=Array.isArray(e)?new X(e).fromEntrySeq():V(e)?new ee(e).fromEntrySeq():M(e)?new Z(e).fromEntrySeq():"object"==typeof e?new Q(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function oe(e){var t=ie(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function ie(e){return W(e)?new X(e):V(e)?new ee(e):M(e)?new Z(e):void 0}function ae(e,t,r,n){var o=e._cache;if(o){for(var i=o.length-1,a=0;a<=i;a++){var u=o[r?i-a:a];if(!1===t(u[1],n?u[0]:a,e))return a+1}return a}return e.__iterateUncached(t,r)}function ue(e,t,r,n){var o=e._cache;if(o){var i=o.length-1,a=0;return new F((function(){var e=o[r?i-a:a];return a++>i?{value:void 0,done:!0}:D(t,n?e[0]:a-1,e[1])}))}return e.__iteratorUncached(t,r)}function le(e,t){return t?se(t,e,"",{"":e}):ce(e)}function se(e,t,r,n){return Array.isArray(t)?e.call(n,r,K(t).map((function(r,n){return se(e,r,n,t)}))):fe(t)?e.call(n,r,B(t).map((function(r,n){return se(e,r,n,t)}))):t}function ce(e){return Array.isArray(e)?K(e).map(ce).toList():fe(e)?B(e).map(ce).toMap():e}function fe(e){return e&&(e.constructor===Object||void 0===e.constructor)}function de(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function pe(e,t){if(e===t)return!0;if(!a(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||u(e)!==u(t)||l(e)!==l(t)||c(e)!==c(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!s(e);if(c(e)){var n=e.entries();return t.every((function(e,t){var o=n.next().value;return o&&de(o[1],e)&&(r||de(o[0],t))}))&&n.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{o=!0;var i=e;e=t,t=i}var f=!0,d=t.__iterate((function(t,n){if(r?!e.has(t):o?!de(t,e.get(n,m)):!de(e.get(n,m),t))return f=!1,!1}));return f&&e.size===d}function ve(e,t){if(!(this instanceof ve))return new ve(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(Y)return Y;Y=this}}function ge(e,t){if(!e)throw new Error(t)}function he(e,t,r){if(!(this instanceof he))return new he(e,t,r);if(ge(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),r=void 0===r?1:Math.abs(r),t<e&&(r=-r),this._start=e,this._end=t,this._step=r,this.size=Math.max(0,Math.ceil((t-e)/r-1)+1),0===this.size){if($)return $;$=this}}function ye(){throw TypeError("Abstract")}function me(){}function Oe(){}function Ee(){}G.prototype[J]=!0,t(X,K),X.prototype.get=function(e,t){return this.has(e)?this._array[C(this,e)]:t},X.prototype.__iterate=function(e,t){for(var r=this._array,n=r.length-1,o=0;o<=n;o++)if(!1===e(r[t?n-o:o],o,this))return o+1;return o},X.prototype.__iterator=function(e,t){var r=this._array,n=r.length-1,o=0;return new F((function(){return o>n?{value:void 0,done:!0}:D(e,o,r[t?n-o++:o++])}))},t(Q,B),Q.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},Q.prototype.has=function(e){return this._object.hasOwnProperty(e)},Q.prototype.__iterate=function(e,t){for(var r=this._object,n=this._keys,o=n.length-1,i=0;i<=o;i++){var a=n[t?o-i:i];if(!1===e(r[a],a,this))return i+1}return i},Q.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,o=n.length-1,i=0;return new F((function(){var a=n[t?o-i:i];return i++>o?{value:void 0,done:!0}:D(e,a,r[a])}))},Q.prototype[v]=!0,t(Z,K),Z.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=U(this._iterable),n=0;if(V(r))for(var o;!(o=r.next()).done&&!1!==e(o.value,n++,this););return n},Z.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=U(this._iterable);if(!V(r))return new F(k);var n=0;return new F((function(){var t=r.next();return t.done?t:D(e,n++,t.value)}))},t(ee,K),ee.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var r,n=this._iterator,o=this._iteratorCache,i=0;i<o.length;)if(!1===e(o[i],i++,this))return i;for(;!(r=n.next()).done;){var a=r.value;if(o[i]=a,!1===e(a,i++,this))break}return i},ee.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterator,n=this._iteratorCache,o=0;return new F((function(){if(o>=n.length){var t=r.next();if(t.done)return t;n[o]=t.value}return D(e,o,n[o++])}))},t(ve,K),ve.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},ve.prototype.get=function(e,t){return this.has(e)?this._value:t},ve.prototype.includes=function(e){return de(this._value,e)},ve.prototype.slice=function(e,t){var r=this.size;return j(e,t,r)?this:new ve(this._value,w(t,r)-L(e,r))},ve.prototype.reverse=function(){return this},ve.prototype.indexOf=function(e){return de(this._value,e)?0:-1},ve.prototype.lastIndexOf=function(e){return de(this._value,e)?this.size:-1},ve.prototype.__iterate=function(e,t){for(var r=0;r<this.size;r++)if(!1===e(this._value,r,this))return r+1;return r},ve.prototype.__iterator=function(e,t){var r=this,n=0;return new F((function(){return n<r.size?D(e,n++,r._value):{value:void 0,done:!0}}))},ve.prototype.equals=function(e){return e instanceof ve?de(this._value,e._value):pe(e)},t(he,K),he.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},he.prototype.get=function(e,t){return this.has(e)?this._start+C(this,e)*this._step:t},he.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},he.prototype.slice=function(e,t){return j(e,t,this.size)?this:(e=L(e,this.size),(t=w(t,this.size))<=e?new he(0,0):new he(this.get(e,this._end),this.get(t,this._end),this._step))},he.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},he.prototype.lastIndexOf=function(e){return this.indexOf(e)},he.prototype.__iterate=function(e,t){for(var r=this.size-1,n=this._step,o=t?this._start+r*n:this._start,i=0;i<=r;i++){if(!1===e(o,i,this))return i+1;o+=t?-n:n}return i},he.prototype.__iterator=function(e,t){var r=this.size-1,n=this._step,o=t?this._start+r*n:this._start,i=0;return new F((function(){var a=o;return o+=t?-n:n,i>r?{value:void 0,done:!0}:D(e,i++,a)}))},he.prototype.equals=function(e){return e instanceof he?this._start===e._start&&this._end===e._end&&this._step===e._step:pe(this,e)},t(ye,r),t(me,ye),t(Oe,ye),t(Ee,ye),ye.Keyed=me,ye.Indexed=Oe,ye.Set=Ee;var be="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var r=65535&(e|=0),n=65535&(t|=0);return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0};function _e(e){return e>>>1&1073741824|3221225471&e}function Se(e){if(!1===e||null==e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null==e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){if(e!=e||e===1/0)return 0;var r=0|e;for(r!==e&&(r^=4294967295*e);e>4294967295;)r^=e/=4294967295;return _e(r)}if("string"===t)return e.length>Ie?function(e){var t=xe[e];return void 0===t&&(t=Te(e),Ae===Ne&&(Ae=0,xe={}),Ae++,xe[e]=t),t}(e):Te(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return function(e){var t;if(je&&void 0!==(t=Pe.get(e)))return t;if(void 0!==(t=e[we]))return t;if(!Ce){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[we]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=++Le,1073741824&Le&&(Le=0),je)Pe.set(e,t);else{if(void 0!==Re&&!1===Re(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Ce)Object.defineProperty(e,we,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[we]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[we]=t}}return t}(e);if("function"==typeof e.toString)return Te(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function Te(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return _e(t)}var Re=Object.isExtensible,Ce=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();var Pe,je="function"==typeof WeakMap;je&&(Pe=new WeakMap);var Le=0,we="__immutablehash__";"function"==typeof Symbol&&(we=Symbol(we));var Ie=16,Ne=255,Ae=0,xe={};function Fe(e){ge(e!==1/0,"Cannot perform this action with an infinite size.")}function De(e){return null==e?Je():ke(e)&&!c(e)?e:Je().withMutations((function(t){var r=n(e);Fe(r.size),r.forEach((function(e,r){return t.set(r,e)}))}))}function ke(e){return!(!e||!e[Ve])}t(De,me),De.of=function(){var t=e.call(arguments,0);return Je().withMutations((function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}}))},De.prototype.toString=function(){return this.__toString("Map {","}")},De.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},De.prototype.set=function(e,t){return Xe(this,e,t)},De.prototype.setIn=function(e,t){return this.updateIn(e,m,(function(){return t}))},De.prototype.remove=function(e){return Xe(this,e,m)},De.prototype.deleteIn=function(e){return this.updateIn(e,(function(){return m}))},De.prototype.update=function(e,t,r){return 1===arguments.length?e(this):this.updateIn([e],t,r)},De.prototype.updateIn=function(e,t,r){r||(r=t,t=void 0);var n=it(this,tr(e),t,r);return n===m?void 0:n},De.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Je()},De.prototype.merge=function(){return tt(this,void 0,arguments)},De.prototype.mergeWith=function(t){return tt(this,t,e.call(arguments,1))},De.prototype.mergeIn=function(t){var r=e.call(arguments,1);return this.updateIn(t,Je(),(function(e){return"function"==typeof e.merge?e.merge.apply(e,r):r[r.length-1]}))},De.prototype.mergeDeep=function(){return tt(this,rt,arguments)},De.prototype.mergeDeepWith=function(t){var r=e.call(arguments,1);return tt(this,nt(t),r)},De.prototype.mergeDeepIn=function(t){var r=e.call(arguments,1);return this.updateIn(t,Je(),(function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,r):r[r.length-1]}))},De.prototype.sort=function(e){return jt(Bt(this,e))},De.prototype.sortBy=function(e,t){return jt(Bt(this,t,e))},De.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},De.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new S)},De.prototype.asImmutable=function(){return this.__ensureOwner()},De.prototype.wasAltered=function(){return this.__altered},De.prototype.__iterator=function(e,t){return new ze(this,e,t)},De.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate((function(t){return n++,e(t[1],t[0],r)}),t),n},De.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?$e(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},De.isMap=ke;var Me,Ve="@@__IMMUTABLE_MAP__@@",Ue=De.prototype;function qe(e,t){this.ownerID=e,this.entries=t}function We(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r}function Ge(e,t,r){this.ownerID=e,this.count=t,this.nodes=r}function Be(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r}function Ke(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r}function ze(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&Ye(e._root)}function He(e,t){return D(e,t[0],t[1])}function Ye(e,t){return{node:e,index:0,__prev:t}}function $e(e,t,r,n){var o=Object.create(Ue);return o.size=e,o._root=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function Je(){return Me||(Me=$e(0))}function Xe(e,t,r){var n,o;if(e._root){var i=b(O),a=b(E);if(n=Qe(e._root,e.__ownerID,0,void 0,t,r,i,a),!a.value)return e;o=e.size+(i.value?r===m?-1:1:0)}else{if(r===m)return e;o=1,n=new qe(e.__ownerID,[[t,r]])}return e.__ownerID?(e.size=o,e._root=n,e.__hash=void 0,e.__altered=!0,e):n?$e(o,n):Je()}function Qe(e,t,r,n,o,i,a,u){return e?e.update(t,r,n,o,i,a,u):i===m?e:(_(u),_(a),new Ke(t,n,[o,i]))}function Ze(e){return e.constructor===Ke||e.constructor===Be}function et(e,t,r,n,o){if(e.keyHash===n)return new Be(t,n,[e.entry,o]);var i,a=(0===r?e.keyHash:e.keyHash>>>r)&y,u=(0===r?n:n>>>r)&y;return new We(t,1<<a|1<<u,a===u?[et(e,t,r+5,n,o)]:(i=new Ke(t,n,o),a<u?[e,i]:[i,e]))}function tt(e,t,r){for(var o=[],i=0;i<r.length;i++){var u=r[i],l=n(u);a(u)||(l=l.map((function(e){return le(e)}))),o.push(l)}return ot(e,t,o)}function rt(e,t,r){return e&&e.mergeDeep&&a(t)?e.mergeDeep(t):de(e,t)?e:t}function nt(e){return function(t,r,n){if(t&&t.mergeDeepWith&&a(r))return t.mergeDeepWith(e,r);var o=e(t,r,n);return de(t,o)?t:o}}function ot(e,t,r){return 0===(r=r.filter((function(e){return 0!==e.size}))).length?e:0!==e.size||e.__ownerID||1!==r.length?e.withMutations((function(e){for(var n=t?function(r,n){e.update(n,m,(function(e){return e===m?r:t(e,r,n)}))}:function(t,r){e.set(r,t)},o=0;o<r.length;o++)r[o].forEach(n)})):e.constructor(r[0])}function it(e,t,r,n){var o=e===m,i=t.next();if(i.done){var a=o?r:e,u=n(a);return u===a?e:u}ge(o||e&&e.set,"invalid keyPath");var l=i.value,s=o?m:e.get(l,m),c=it(s,t,r,n);return c===s?e:c===m?e.remove(l):(o?Je():e).set(l,c)}function at(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,127&(e+=e>>8)+(e>>16)}function ut(e,t,r,n){var o=n?e:T(e);return o[t]=r,o}Ue[Ve]=!0,Ue[g]=Ue.remove,Ue.removeIn=Ue.deleteIn,qe.prototype.get=function(e,t,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(de(r,o[i][0]))return o[i][1];return n},qe.prototype.update=function(e,t,r,n,o,i,a){for(var u=o===m,l=this.entries,s=0,c=l.length;s<c&&!de(n,l[s][0]);s++);var f=s<c;if(f?l[s][1]===o:u)return this;if(_(a),(u||!f)&&_(i),!u||1!==l.length){if(!f&&!u&&l.length>=lt)return function(e,t,r,n){e||(e=new S);for(var o=new Ke(e,Se(r),[r,n]),i=0;i<t.length;i++){var a=t[i];o=o.update(e,0,void 0,a[0],a[1])}return o}(e,l,n,o);var d=e&&e===this.ownerID,p=d?l:T(l);return f?u?s===c-1?p.pop():p[s]=p.pop():p[s]=[n,o]:p.push([n,o]),d?(this.entries=p,this):new qe(e,p)}},We.prototype.get=function(e,t,r,n){void 0===t&&(t=Se(r));var o=1<<((0===e?t:t>>>e)&y),i=this.bitmap;return i&o?this.nodes[at(i&o-1)].get(e+5,t,r,n):n},We.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Se(n));var u=(0===t?r:r>>>t)&y,l=1<<u,s=this.bitmap,c=!!(s&l);if(!c&&o===m)return this;var f=at(s&l-1),d=this.nodes,p=c?d[f]:void 0,v=Qe(p,e,t+5,r,n,o,i,a);if(v===p)return this;if(!c&&v&&d.length>=st)return function(e,t,r,n,o){for(var i=0,a=new Array(h),u=0;0!==r;u++,r>>>=1)a[u]=1&r?t[i++]:void 0;return a[n]=o,new Ge(e,i+1,a)}(e,d,s,u,v);if(c&&!v&&2===d.length&&Ze(d[1^f]))return d[1^f];if(c&&v&&1===d.length&&Ze(v))return v;var g=e&&e===this.ownerID,O=c?v?s:s^l:s|l,E=c?v?ut(d,f,v,g):function(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var o=new Array(n),i=0,a=0;a<n;a++)a===t&&(i=1),o[a]=e[a+i];return o}(d,f,g):function(e,t,r,n){var o=e.length+1;if(n&&t+1===o)return e[t]=r,e;for(var i=new Array(o),a=0,u=0;u<o;u++)u===t?(i[u]=r,a=-1):i[u]=e[u+a];return i}(d,f,v,g);return g?(this.bitmap=O,this.nodes=E,this):new We(e,O,E)},Ge.prototype.get=function(e,t,r,n){void 0===t&&(t=Se(r));var o=(0===e?t:t>>>e)&y,i=this.nodes[o];return i?i.get(e+5,t,r,n):n},Ge.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Se(n));var u=(0===t?r:r>>>t)&y,l=o===m,s=this.nodes,c=s[u];if(l&&!c)return this;var f=Qe(c,e,t+5,r,n,o,i,a);if(f===c)return this;var d=this.count;if(c){if(!f&&--d<ct)return function(e,t,r,n){for(var o=0,i=0,a=new Array(r),u=0,l=1,s=t.length;u<s;u++,l<<=1){var c=t[u];void 0!==c&&u!==n&&(o|=l,a[i++]=c)}return new We(e,o,a)}(e,s,d,u)}else d++;var p=e&&e===this.ownerID,v=ut(s,u,f,p);return p?(this.count=d,this.nodes=v,this):new Ge(e,d,v)},Be.prototype.get=function(e,t,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(de(r,o[i][0]))return o[i][1];return n},Be.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Se(n));var u=o===m;if(r!==this.keyHash)return u?this:(_(a),_(i),et(this,e,t,r,[n,o]));for(var l=this.entries,s=0,c=l.length;s<c&&!de(n,l[s][0]);s++);var f=s<c;if(f?l[s][1]===o:u)return this;if(_(a),(u||!f)&&_(i),u&&2===c)return new Ke(e,this.keyHash,l[1^s]);var d=e&&e===this.ownerID,p=d?l:T(l);return f?u?s===c-1?p.pop():p[s]=p.pop():p[s]=[n,o]:p.push([n,o]),d?(this.entries=p,this):new Be(e,this.keyHash,p)},Ke.prototype.get=function(e,t,r,n){return de(r,this.entry[0])?this.entry[1]:n},Ke.prototype.update=function(e,t,r,n,o,i,a){var u=o===m,l=de(n,this.entry[0]);return(l?o===this.entry[1]:u)?this:(_(a),u?void _(i):l?e&&e===this.ownerID?(this.entry[1]=o,this):new Ke(e,this.keyHash,[n,o]):(_(i),et(this,e,t,Se(n),[n,o])))},qe.prototype.iterate=Be.prototype.iterate=function(e,t){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(!1===e(r[t?o-n:n]))return!1},We.prototype.iterate=Ge.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var i=r[t?o-n:n];if(i&&!1===i.iterate(e,t))return!1}},Ke.prototype.iterate=function(e,t){return e(this.entry)},t(ze,F),ze.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r,n=t.node,o=t.index++;if(n.entry){if(0===o)return He(e,n.entry)}else if(n.entries){if(o<=(r=n.entries.length-1))return He(e,n.entries[this._reverse?r-o:o])}else if(o<=(r=n.nodes.length-1)){var i=n.nodes[this._reverse?r-o:o];if(i){if(i.entry)return He(e,i.entry);t=this._stack=Ye(i,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var lt=8,st=16,ct=8;function ft(e){var t=bt();if(null==e)return t;if(dt(e))return e;var r=o(e),n=r.size;return 0===n?t:(Fe(n),n>0&&n<h?Et(0,n,5,null,new gt(r.toArray())):t.withMutations((function(e){e.setSize(n),r.forEach((function(t,r){return e.set(r,t)}))})))}function dt(e){return!(!e||!e[pt])}t(ft,Oe),ft.of=function(){return this(arguments)},ft.prototype.toString=function(){return this.__toString("List [","]")},ft.prototype.get=function(e,t){if((e=C(this,e))>=0&&e<this.size){var r=Tt(this,e+=this._origin);return r&&r.array[e&y]}return t},ft.prototype.set=function(e,t){return function(e,t,r){if((t=C(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?Rt(e,t).set(0,r):Rt(e,0,t+1).set(t,r)}));t+=e._origin;var n=e._tail,o=e._root,i=b(E);return t>=Pt(e._capacity)?n=_t(n,e.__ownerID,0,t,r,i):o=_t(o,e.__ownerID,e._level,t,r,i),i.value?e.__ownerID?(e._root=o,e._tail=n,e.__hash=void 0,e.__altered=!0,e):Et(e._origin,e._capacity,e._level,o,n):e}(this,e,t)},ft.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},ft.prototype.insert=function(e,t){return this.splice(e,0,t)},ft.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):bt()},ft.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(r){Rt(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])}))},ft.prototype.pop=function(){return Rt(this,0,-1)},ft.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){Rt(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])}))},ft.prototype.shift=function(){return Rt(this,1)},ft.prototype.merge=function(){return Ct(this,void 0,arguments)},ft.prototype.mergeWith=function(t){return Ct(this,t,e.call(arguments,1))},ft.prototype.mergeDeep=function(){return Ct(this,rt,arguments)},ft.prototype.mergeDeepWith=function(t){var r=e.call(arguments,1);return Ct(this,nt(t),r)},ft.prototype.setSize=function(e){return Rt(this,0,e)},ft.prototype.slice=function(e,t){var r=this.size;return j(e,t,r)?this:Rt(this,L(e,r),w(t,r))},ft.prototype.__iterator=function(e,t){var r=0,n=Ot(this,t);return new F((function(){var t=n();return t===mt?{value:void 0,done:!0}:D(e,r++,t)}))},ft.prototype.__iterate=function(e,t){for(var r,n=0,o=Ot(this,t);(r=o())!==mt&&!1!==e(r,n++,this););return n},ft.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Et(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},ft.isList=dt;var pt="@@__IMMUTABLE_LIST__@@",vt=ft.prototype;function gt(e,t){this.array=e,this.ownerID=t}vt[pt]=!0,vt[g]=vt.remove,vt.setIn=Ue.setIn,vt.deleteIn=vt.removeIn=Ue.removeIn,vt.update=Ue.update,vt.updateIn=Ue.updateIn,vt.mergeIn=Ue.mergeIn,vt.mergeDeepIn=Ue.mergeDeepIn,vt.withMutations=Ue.withMutations,vt.asMutable=Ue.asMutable,vt.asImmutable=Ue.asImmutable,vt.wasAltered=Ue.wasAltered,gt.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var n=r>>>t&y;if(n>=this.array.length)return new gt([],e);var o,i=0===n;if(t>0){var a=this.array[n];if((o=a&&a.removeBefore(e,t-5,r))===a&&i)return this}if(i&&!o)return this;var u=St(this,e);if(!i)for(var l=0;l<n;l++)u.array[l]=void 0;return o&&(u.array[n]=o),u},gt.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var n,o=r-1>>>t&y;if(o>=this.array.length)return this;if(t>0){var i=this.array[o];if((n=i&&i.removeAfter(e,t-5,r))===i&&o===this.array.length-1)return this}var a=St(this,e);return a.array.splice(o+1),n&&(a.array[o]=n),a};var ht,yt,mt={};function Ot(e,t){var r=e._origin,n=e._capacity,o=Pt(n),i=e._tail;return a(e._root,e._level,0);function a(e,u,l){return 0===u?function(e,a){var u=a===o?i&&i.array:e&&e.array,l=a>r?0:r-a,s=n-a;return s>h&&(s=h),function(){if(l===s)return mt;var e=t?--s:l++;return u&&u[e]}}(e,l):function(e,o,i){var u,l=e&&e.array,s=i>r?0:r-i>>o,c=1+(n-i>>o);return c>h&&(c=h),function(){for(;;){if(u){var e=u();if(e!==mt)return e;u=null}if(s===c)return mt;var r=t?--c:s++;u=a(l&&l[r],o-5,i+(r<<o))}}}(e,u,l)}}function Et(e,t,r,n,o,i,a){var u=Object.create(vt);return u.size=t-e,u._origin=e,u._capacity=t,u._level=r,u._root=n,u._tail=o,u.__ownerID=i,u.__hash=a,u.__altered=!1,u}function bt(){return ht||(ht=Et(0,0,5))}function _t(e,t,r,n,o,i){var a,u=n>>>r&y,l=e&&u<e.array.length;if(!l&&void 0===o)return e;if(r>0){var s=e&&e.array[u],c=_t(s,t,r-5,n,o,i);return c===s?e:((a=St(e,t)).array[u]=c,a)}return l&&e.array[u]===o?e:(_(i),a=St(e,t),void 0===o&&u===a.array.length-1?a.array.pop():a.array[u]=o,a)}function St(e,t){return t&&e&&t===e.ownerID?e:new gt(e?e.array.slice():[],t)}function Tt(e,t){if(t>=Pt(e._capacity))return e._tail;if(t<1<<e._level+5){for(var r=e._root,n=e._level;r&&n>0;)r=r.array[t>>>n&y],n-=5;return r}}function Rt(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var n=e.__ownerID||new S,o=e._origin,i=e._capacity,a=o+t,u=void 0===r?i:r<0?i+r:o+r;if(a===o&&u===i)return e;if(a>=u)return e.clear();for(var l=e._level,s=e._root,c=0;a+c<0;)s=new gt(s&&s.array.length?[void 0,s]:[],n),c+=1<<(l+=5);c&&(a+=c,o+=c,u+=c,i+=c);for(var f=Pt(i),d=Pt(u);d>=1<<l+5;)s=new gt(s&&s.array.length?[s]:[],n),l+=5;var p=e._tail,v=d<f?Tt(e,u-1):d>f?new gt([],n):p;if(p&&d>f&&a<i&&p.array.length){for(var g=s=St(s,n),h=l;h>5;h-=5){var m=f>>>h&y;g=g.array[m]=St(g.array[m],n)}g.array[f>>>5&y]=p}if(u<i&&(v=v&&v.removeAfter(n,0,u)),a>=d)a-=d,u-=d,l=5,s=null,v=v&&v.removeBefore(n,0,a);else if(a>o||d<f){for(c=0;s;){var O=a>>>l&y;if(O!==d>>>l&y)break;O&&(c+=(1<<l)*O),l-=5,s=s.array[O]}s&&a>o&&(s=s.removeBefore(n,l,a-c)),s&&d<f&&(s=s.removeAfter(n,l,d-c)),c&&(a-=c,u-=c)}return e.__ownerID?(e.size=u-a,e._origin=a,e._capacity=u,e._level=l,e._root=s,e._tail=v,e.__hash=void 0,e.__altered=!0,e):Et(a,u,l,s,v)}function Ct(e,t,r){for(var n=[],i=0,u=0;u<r.length;u++){var l=r[u],s=o(l);s.size>i&&(i=s.size),a(l)||(s=s.map((function(e){return le(e)}))),n.push(s)}return i>e.size&&(e=e.setSize(i)),ot(e,t,n)}function Pt(e){return e<h?0:e-1>>>5<<5}function jt(e){return null==e?It():Lt(e)?e:It().withMutations((function(t){var r=n(e);Fe(r.size),r.forEach((function(e,r){return t.set(r,e)}))}))}function Lt(e){return ke(e)&&c(e)}function wt(e,t,r,n){var o=Object.create(jt.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=r,o.__hash=n,o}function It(){return yt||(yt=wt(Je(),bt()))}function Nt(e,t,r){var n,o,i=e._map,a=e._list,u=i.get(t),l=void 0!==u;if(r===m){if(!l)return e;a.size>=h&&a.size>=2*i.size?(n=(o=a.filter((function(e,t){return void 0!==e&&u!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(n.__ownerID=o.__ownerID=e.__ownerID)):(n=i.remove(t),o=u===a.size-1?a.pop():a.set(u,void 0))}else if(l){if(r===a.get(u)[1])return e;n=i,o=a.set(u,[t,r])}else n=i.set(t,a.size),o=a.set(a.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=o,e.__hash=void 0,e):wt(n,o)}function At(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function xt(e){this._iter=e,this.size=e.size}function Ft(e){this._iter=e,this.size=e.size}function Dt(e){this._iter=e,this.size=e.size}function kt(e){var t=Qt(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Zt,t.__iterateUncached=function(t,r){var n=this;return e.__iterate((function(e,r){return!1!==t(r,e,n)}),r)},t.__iteratorUncached=function(t,r){if(2===t){var n=e.__iterator(t,r);return new F((function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(1===t?0:1,r)},t}function Mt(e,t,r){var n=Qt(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,o){var i=e.get(n,m);return i===m?o:t.call(r,i,n,e)},n.__iterateUncached=function(n,o){var i=this;return e.__iterate((function(e,o,a){return!1!==n(t.call(r,e,o,a),o,i)}),o)},n.__iteratorUncached=function(n,o){var i=e.__iterator(2,o);return new F((function(){var o=i.next();if(o.done)return o;var a=o.value,u=a[0];return D(n,u,t.call(r,a[1],u,e),o)}))},n}function Vt(e,t){var r=Qt(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=kt(e);return t.reverse=function(){return e.flip()},t}),r.get=function(r,n){return e.get(t?r:-1-r,n)},r.has=function(r){return e.has(t?r:-1-r)},r.includes=function(t){return e.includes(t)},r.cacheResult=Zt,r.__iterate=function(t,r){var n=this;return e.__iterate((function(e,r){return t(e,r,n)}),!r)},r.__iterator=function(t,r){return e.__iterator(t,!r)},r}function Ut(e,t,r,n){var o=Qt(e);return n&&(o.has=function(n){var o=e.get(n,m);return o!==m&&!!t.call(r,o,n,e)},o.get=function(n,o){var i=e.get(n,m);return i!==m&&t.call(r,i,n,e)?i:o}),o.__iterateUncached=function(o,i){var a=this,u=0;return e.__iterate((function(e,i,l){if(t.call(r,e,i,l))return u++,o(e,n?i:u-1,a)}),i),u},o.__iteratorUncached=function(o,i){var a=e.__iterator(2,i),u=0;return new F((function(){for(;;){var i=a.next();if(i.done)return i;var l=i.value,s=l[0],c=l[1];if(t.call(r,c,s,e))return D(o,n?s:u++,c,i)}}))},o}function qt(e,t,r,n){var o=e.size;if(void 0!==t&&(t|=0),void 0!==r&&(r===1/0?r=o:r|=0),j(t,r,o))return e;var i=L(t,o),a=w(r,o);if(i!=i||a!=a)return qt(e.toSeq().cacheResult(),t,r,n);var u,l=a-i;l==l&&(u=l<0?0:l);var s=Qt(e);return s.size=0===u?u:e.size&&u||void 0,!n&&te(e)&&u>=0&&(s.get=function(t,r){return(t=C(this,t))>=0&&t<u?e.get(t+i,r):r}),s.__iterateUncached=function(t,r){var o=this;if(0===u)return 0;if(r)return this.cacheResult().__iterate(t,r);var a=0,l=!0,s=0;return e.__iterate((function(e,r){if(!l||!(l=a++<i))return s++,!1!==t(e,n?r:s-1,o)&&s!==u})),s},s.__iteratorUncached=function(t,r){if(0!==u&&r)return this.cacheResult().__iterator(t,r);var o=0!==u&&e.__iterator(t,r),a=0,l=0;return new F((function(){for(;a++<i;)o.next();if(++l>u)return{value:void 0,done:!0};var e=o.next();return n||1===t?e:D(t,l-1,0===t?void 0:e.value[1],e)}))},s}function Wt(e,t,r,n){var o=Qt(e);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var u=!0,l=0;return e.__iterate((function(e,i,s){if(!u||!(u=t.call(r,e,i,s)))return l++,o(e,n?i:l-1,a)})),l},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var u=e.__iterator(2,i),l=!0,s=0;return new F((function(){var e,i,c;do{if((e=u.next()).done)return n||1===o?e:D(o,s++,0===o?void 0:e.value[1],e);var f=e.value;i=f[0],c=f[1],l&&(l=t.call(r,c,i,a))}while(l);return 2===o?e:D(o,i,c,e)}))},o}function Gt(e,t,r){var n=Qt(e);return n.__iterateUncached=function(n,o){var i=0,u=!1;return function e(l,s){var c=this;l.__iterate((function(o,l){return(!t||s<t)&&a(o)?e(o,s+1):!1===n(o,r?l:i++,c)&&(u=!0),!u}),o)}(e,0),i},n.__iteratorUncached=function(n,o){var i=e.__iterator(n,o),u=[],l=0;return new F((function(){for(;i;){var e=i.next();if(!1===e.done){var s=e.value;if(2===n&&(s=s[1]),t&&!(u.length<t)||!a(s))return r?e:D(n,l++,s,e);u.push(i),i=s.__iterator(n,o)}else i=u.pop()}return{value:void 0,done:!0}}))},n}function Bt(e,t,r){t||(t=er);var n=u(e),o=0,i=e.toSeq().map((function(t,n){return[n,t,o++,r?r(t,n,e):t]})).toArray();return i.sort((function(e,r){return t(e[3],r[3])||e[2]-r[2]})).forEach(n?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),n?B(i):l(e)?K(i):z(i)}function Kt(e,t,r){if(t||(t=er),r){var n=e.toSeq().map((function(t,n){return[t,r(t,n,e)]})).reduce((function(e,r){return zt(t,e[1],r[1])?r:e}));return n&&n[0]}return e.reduce((function(e,r){return zt(t,e,r)?r:e}))}function zt(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(null==r||r!=r)||n>0}function Ht(e,t,n){var o=Qt(e);return o.size=new X(n).map((function(e){return e.size})).min(),o.__iterate=function(e,t){for(var r,n=this.__iterator(1,t),o=0;!(r=n.next()).done&&!1!==e(r.value,o++,this););return o},o.__iteratorUncached=function(e,o){var i=n.map((function(e){return e=r(e),U(o?e.reverse():e)})),a=0,u=!1;return new F((function(){var r;return u||(r=i.map((function(e){return e.next()})),u=r.some((function(e){return e.done}))),u?{value:void 0,done:!0}:D(e,a++,t.apply(null,r.map((function(e){return e.value}))))}))},o}function Yt(e,t){return te(e)?t:e.constructor(t)}function $t(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Jt(e){return Fe(e.size),R(e)}function Xt(e){return u(e)?n:l(e)?o:i}function Qt(e){return Object.create((u(e)?B:l(e)?K:z).prototype)}function Zt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):G.prototype.cacheResult.call(this)}function er(e,t){return e>t?1:e<t?-1:0}function tr(e){var t=U(e);if(!t){if(!W(e))throw new TypeError("Expected iterable or array-like: "+e);t=U(r(e))}return t}function rr(e,t){var r,n=function(i){if(i instanceof n)return i;if(!(this instanceof n))return new n(i);if(!r){r=!0;var a=Object.keys(e);(function(e,t){try{t.forEach(ar.bind(void 0,e))}catch(e){}})(o,a),o.size=a.length,o._name=t,o._keys=a,o._defaultValues=e}this._map=De(i)},o=n.prototype=Object.create(nr);return o.constructor=n,n}t(jt,De),jt.of=function(){return this(arguments)},jt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},jt.prototype.get=function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},jt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):It()},jt.prototype.set=function(e,t){return Nt(this,e,t)},jt.prototype.remove=function(e){return Nt(this,e,m)},jt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},jt.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],r)}),t)},jt.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},jt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?wt(t,r,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=r,this)},jt.isOrderedMap=Lt,jt.prototype[v]=!0,jt.prototype[g]=jt.prototype.remove,t(At,B),At.prototype.get=function(e,t){return this._iter.get(e,t)},At.prototype.has=function(e){return this._iter.has(e)},At.prototype.valueSeq=function(){return this._iter.valueSeq()},At.prototype.reverse=function(){var e=this,t=Vt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},At.prototype.map=function(e,t){var r=this,n=Mt(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},At.prototype.__iterate=function(e,t){var r,n=this;return this._iter.__iterate(this._useKeys?function(t,r){return e(t,r,n)}:(r=t?Jt(this):0,function(o){return e(o,t?--r:r++,n)}),t)},At.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var r=this._iter.__iterator(1,t),n=t?Jt(this):0;return new F((function(){var o=r.next();return o.done?o:D(e,t?--n:n++,o.value,o)}))},At.prototype[v]=!0,t(xt,K),xt.prototype.includes=function(e){return this._iter.includes(e)},xt.prototype.__iterate=function(e,t){var r=this,n=0;return this._iter.__iterate((function(t){return e(t,n++,r)}),t)},xt.prototype.__iterator=function(e,t){var r=this._iter.__iterator(1,t),n=0;return new F((function(){var t=r.next();return t.done?t:D(e,n++,t.value,t)}))},t(Ft,z),Ft.prototype.has=function(e){return this._iter.includes(e)},Ft.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){return e(t,t,r)}),t)},Ft.prototype.__iterator=function(e,t){var r=this._iter.__iterator(1,t);return new F((function(){var t=r.next();return t.done?t:D(e,t.value,t.value,t)}))},t(Dt,B),Dt.prototype.entrySeq=function(){return this._iter.toSeq()},Dt.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){if(t){$t(t);var n=a(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}}),t)},Dt.prototype.__iterator=function(e,t){var r=this._iter.__iterator(1,t);return new F((function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){$t(n);var o=a(n);return D(e,o?n.get(0):n[0],o?n.get(1):n[1],t)}}}))},xt.prototype.cacheResult=At.prototype.cacheResult=Ft.prototype.cacheResult=Dt.prototype.cacheResult=Zt,t(rr,me),rr.prototype.toString=function(){return this.__toString(ir(this)+" {","}")},rr.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},rr.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._defaultValues[e];return this._map?this._map.get(e,r):r},rr.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=or(this,Je()))},rr.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+ir(this));if(this._map&&!this._map.has(e)&&t===this._defaultValues[e])return this;var r=this._map&&this._map.set(e,t);return this.__ownerID||r===this._map?this:or(this,r)},rr.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:or(this,t)},rr.prototype.wasAltered=function(){return this._map.wasAltered()},rr.prototype.__iterator=function(e,t){var r=this;return n(this._defaultValues).map((function(e,t){return r.get(t)})).__iterator(e,t)},rr.prototype.__iterate=function(e,t){var r=this;return n(this._defaultValues).map((function(e,t){return r.get(t)})).__iterate(e,t)},rr.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?or(this,t,e):(this.__ownerID=e,this._map=t,this)};var nr=rr.prototype;function or(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._map=t,n.__ownerID=r,n}function ir(e){return e._name||e.constructor.name||"Record"}function ar(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){ge(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function ur(e){return null==e?vr():lr(e)&&!c(e)?e:vr().withMutations((function(t){var r=i(e);Fe(r.size),r.forEach((function(e){return t.add(e)}))}))}function lr(e){return!(!e||!e[cr])}nr[g]=nr.remove,nr.deleteIn=nr.removeIn=Ue.removeIn,nr.merge=Ue.merge,nr.mergeWith=Ue.mergeWith,nr.mergeIn=Ue.mergeIn,nr.mergeDeep=Ue.mergeDeep,nr.mergeDeepWith=Ue.mergeDeepWith,nr.mergeDeepIn=Ue.mergeDeepIn,nr.setIn=Ue.setIn,nr.update=Ue.update,nr.updateIn=Ue.updateIn,nr.withMutations=Ue.withMutations,nr.asMutable=Ue.asMutable,nr.asImmutable=Ue.asImmutable,t(ur,Ee),ur.of=function(){return this(arguments)},ur.fromKeys=function(e){return this(n(e).keySeq())},ur.prototype.toString=function(){return this.__toString("Set {","}")},ur.prototype.has=function(e){return this._map.has(e)},ur.prototype.add=function(e){return dr(this,this._map.set(e,!0))},ur.prototype.remove=function(e){return dr(this,this._map.remove(e))},ur.prototype.clear=function(){return dr(this,this._map.clear())},ur.prototype.union=function(){var t=e.call(arguments,0);return 0===(t=t.filter((function(e){return 0!==e.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(e){for(var r=0;r<t.length;r++)i(t[r]).forEach((function(t){return e.add(t)}))})):this.constructor(t[0])},ur.prototype.intersect=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return i(e)}));var r=this;return this.withMutations((function(e){r.forEach((function(r){t.every((function(e){return e.includes(r)}))||e.remove(r)}))}))},ur.prototype.subtract=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return i(e)}));var r=this;return this.withMutations((function(e){r.forEach((function(r){t.some((function(e){return e.includes(r)}))&&e.remove(r)}))}))},ur.prototype.merge=function(){return this.union.apply(this,arguments)},ur.prototype.mergeWith=function(t){var r=e.call(arguments,1);return this.union.apply(this,r)},ur.prototype.sort=function(e){return gr(Bt(this,e))},ur.prototype.sortBy=function(e,t){return gr(Bt(this,t,e))},ur.prototype.wasAltered=function(){return this._map.wasAltered()},ur.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate((function(t,n){return e(n,n,r)}),t)},ur.prototype.__iterator=function(e,t){return this._map.map((function(e,t){return t})).__iterator(e,t)},ur.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},ur.isSet=lr;var sr,cr="@@__IMMUTABLE_SET__@@",fr=ur.prototype;function dr(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function pr(e,t){var r=Object.create(fr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function vr(){return sr||(sr=pr(Je()))}function gr(e){return null==e?Er():hr(e)?e:Er().withMutations((function(t){var r=i(e);Fe(r.size),r.forEach((function(e){return t.add(e)}))}))}function hr(e){return lr(e)&&c(e)}fr[cr]=!0,fr[g]=fr.remove,fr.mergeDeep=fr.merge,fr.mergeDeepWith=fr.mergeWith,fr.withMutations=Ue.withMutations,fr.asMutable=Ue.asMutable,fr.asImmutable=Ue.asImmutable,fr.__empty=vr,fr.__make=pr,t(gr,ur),gr.of=function(){return this(arguments)},gr.fromKeys=function(e){return this(n(e).keySeq())},gr.prototype.toString=function(){return this.__toString("OrderedSet {","}")},gr.isOrderedSet=hr;var yr,mr=gr.prototype;function Or(e,t){var r=Object.create(mr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function Er(){return yr||(yr=Or(It()))}function br(e){return null==e?Pr():_r(e)?e:Pr().unshiftAll(e)}function _r(e){return!(!e||!e[Tr])}mr[v]=!0,mr.__empty=Er,mr.__make=Or,t(br,Oe),br.of=function(){return this(arguments)},br.prototype.toString=function(){return this.__toString("Stack [","]")},br.prototype.get=function(e,t){var r=this._head;for(e=C(this,e);r&&e--;)r=r.next;return r?r.value:t},br.prototype.peek=function(){return this._head&&this._head.value},br.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,r=arguments.length-1;r>=0;r--)t={value:arguments[r],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Cr(e,t)},br.prototype.pushAll=function(e){if(0===(e=o(e)).size)return this;Fe(e.size);var t=this.size,r=this._head;return e.reverse().forEach((function(e){t++,r={value:e,next:r}})),this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):Cr(t,r)},br.prototype.pop=function(){return this.slice(1)},br.prototype.unshift=function(){return this.push.apply(this,arguments)},br.prototype.unshiftAll=function(e){return this.pushAll(e)},br.prototype.shift=function(){return this.pop.apply(this,arguments)},br.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Pr()},br.prototype.slice=function(e,t){if(j(e,t,this.size))return this;var r=L(e,this.size);if(w(t,this.size)!==this.size)return Oe.prototype.slice.call(this,e,t);for(var n=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=n,this._head=o,this.__hash=void 0,this.__altered=!0,this):Cr(n,o)},br.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Cr(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},br.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var r=0,n=this._head;n&&!1!==e(n.value,r++,this);)n=n.next;return r},br.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var r=0,n=this._head;return new F((function(){if(n){var t=n.value;return n=n.next,D(e,r++,t)}return{value:void 0,done:!0}}))},br.isStack=_r;var Sr,Tr="@@__IMMUTABLE_STACK__@@",Rr=br.prototype;function Cr(e,t,r,n){var o=Object.create(Rr);return o.size=e,o._head=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function Pr(){return Sr||(Sr=Cr(0))}function jr(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}Rr[Tr]=!0,Rr.withMutations=Ue.withMutations,Rr.asMutable=Ue.asMutable,Rr.asImmutable=Ue.asImmutable,Rr.wasAltered=Ue.wasAltered,r.Iterator=F,jr(r,{toArray:function(){Fe(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate((function(t,r){e[r]=t})),e},toIndexedSeq:function(){return new xt(this)},toJS:function(){return this.toSeq().map((function(e){return e&&"function"==typeof e.toJS?e.toJS():e})).__toJS()},toJSON:function(){return this.toSeq().map((function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e})).__toJS()},toKeyedSeq:function(){return new At(this,!0)},toMap:function(){return De(this.toKeyedSeq())},toObject:function(){Fe(this.size);var e={};return this.__iterate((function(t,r){e[r]=t})),e},toOrderedMap:function(){return jt(this.toKeyedSeq())},toOrderedSet:function(){return gr(u(this)?this.valueSeq():this)},toSet:function(){return ur(u(this)?this.valueSeq():this)},toSetSeq:function(){return new Ft(this)},toSeq:function(){return l(this)?this.toIndexedSeq():u(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return br(u(this)?this.valueSeq():this)},toList:function(){return ft(u(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){return Yt(this,function(e,t){var r=u(e),o=[e].concat(t).map((function(e){return a(e)?r&&(e=n(e)):e=r?ne(e):oe(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===o.length)return e;if(1===o.length){var i=o[0];if(i===e||r&&u(i)||l(e)&&l(i))return i}var s=new X(o);return r?s=s.toKeyedSeq():l(e)||(s=s.toSetSeq()),(s=s.flatten(!0)).size=o.reduce((function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}}),0),s}(this,e.call(arguments,0)))},includes:function(e){return this.some((function(t){return de(t,e)}))},entries:function(){return this.__iterator(2)},every:function(e,t){Fe(this.size);var r=!0;return this.__iterate((function(n,o,i){if(!e.call(t,n,o,i))return r=!1,!1})),r},filter:function(e,t){return Yt(this,Ut(this,e,t,!0))},find:function(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},forEach:function(e,t){return Fe(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){Fe(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate((function(n){r?r=!1:t+=e,t+=null!=n?n.toString():""})),t},keys:function(){return this.__iterator(0)},map:function(e,t){return Yt(this,Mt(this,e,t))},reduce:function(e,t,r){var n,o;return Fe(this.size),arguments.length<2?o=!0:n=t,this.__iterate((function(t,i,a){o?(o=!1,n=t):n=e.call(r,n,t,i,a)})),n},reduceRight:function(e,t,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return Yt(this,Vt(this,!0))},slice:function(e,t){return Yt(this,qt(this,e,t,!0))},some:function(e,t){return!this.every(Ar(e),t)},sort:function(e){return Yt(this,Bt(this,e))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return R(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,r){var n=De().asMutable();return e.__iterate((function(o,i){n.update(t.call(r,o,i,e),0,(function(e){return e+1}))})),n.asImmutable()}(this,e,t)},equals:function(e){return pe(this,e)},entrySeq:function(){var e=this;if(e._cache)return new X(e._cache);var t=e.toSeq().map(Nr).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Ar(e),t)},findEntry:function(e,t,r){var n=r;return this.__iterate((function(r,o,i){if(e.call(t,r,o,i))return n=[o,r],!1})),n},findKey:function(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},findLastEntry:function(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(){return this.find(P)},flatMap:function(e,t){return Yt(this,function(e,t,r){var n=Xt(e);return e.toSeq().map((function(o,i){return n(t.call(r,o,i,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return Yt(this,Gt(this,e,!0))},fromEntrySeq:function(){return new Dt(this)},get:function(e,t){return this.find((function(t,r){return de(r,e)}),void 0,t)},getIn:function(e,t){for(var r,n=this,o=tr(e);!(r=o.next()).done;){var i=r.value;if((n=n&&n.get?n.get(i,m):m)===m)return t}return n},groupBy:function(e,t){return function(e,t,r){var n=u(e),o=(c(e)?jt():De()).asMutable();e.__iterate((function(i,a){o.update(t.call(r,i,a,e),(function(e){return(e=e||[]).push(n?[a,i]:i),e}))}));var i=Xt(e);return o.map((function(t){return Yt(e,i(t))}))}(this,e,t)},has:function(e){return this.get(e,m)!==m},hasIn:function(e){return this.getIn(e,m)!==m},isSubset:function(e){return e="function"==typeof e.includes?e:r(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:r(e)).isSubset(this)},keyOf:function(e){return this.findKey((function(t){return de(t,e)}))},keySeq:function(){return this.toSeq().map(Ir).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return Kt(this,e)},maxBy:function(e,t){return Kt(this,t,e)},min:function(e){return Kt(this,e?xr(e):kr)},minBy:function(e,t){return Kt(this,t?xr(t):kr,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return Yt(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return Yt(this,Wt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Ar(e),t)},sortBy:function(e,t){return Yt(this,Bt(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return Yt(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return Yt(this,function(e,t,r){var n=Qt(e);return n.__iterateUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterate(n,o);var a=0;return e.__iterate((function(e,o,u){return t.call(r,e,o,u)&&++a&&n(e,o,i)})),a},n.__iteratorUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterator(n,o);var a=e.__iterator(2,o),u=!0;return new F((function(){if(!u)return{value:void 0,done:!0};var e=a.next();if(e.done)return e;var o=e.value,l=o[0],s=o[1];return t.call(r,s,l,i)?2===n?e:D(n,l,s,e):(u=!1,{value:void 0,done:!0})}))},n}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Ar(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=c(e),r=u(e),n=t?1:0;return function(e,t){return t=be(t,3432918353),t=be(t<<15|t>>>-15,461845907),t=be(t<<13|t>>>-13,5),t=be((t=t+3864292196^e)^t>>>16,2246822507),_e((t=be(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(r?t?function(e,t){n=31*n+Mr(Se(e),Se(t))|0}:function(e,t){n=n+Mr(Se(e),Se(t))|0}:t?function(e){n=31*n+Se(e)|0}:function(e){n=n+Se(e)|0}),n)}(this))}});var Lr=r.prototype;Lr[f]=!0,Lr[x]=Lr.values,Lr.__toJS=Lr.toArray,Lr.__toStringMapper=Fr,Lr.inspect=Lr.toSource=function(){return this.toString()},Lr.chain=Lr.flatMap,Lr.contains=Lr.includes,jr(n,{flip:function(){return Yt(this,kt(this))},mapEntries:function(e,t){var r=this,n=0;return Yt(this,this.toSeq().map((function(o,i){return e.call(t,[i,o],n++,r)})).fromEntrySeq())},mapKeys:function(e,t){var r=this;return Yt(this,this.toSeq().flip().map((function(n,o){return e.call(t,n,o,r)})).flip())}});var wr=n.prototype;function Ir(e,t){return t}function Nr(e,t){return[t,e]}function Ar(e){return function(){return!e.apply(this,arguments)}}function xr(e){return function(){return-e.apply(this,arguments)}}function Fr(e){return"string"==typeof e?JSON.stringify(e):String(e)}function Dr(){return T(arguments)}function kr(e,t){return e<t?1:e>t?-1:0}function Mr(e,t){return e^t+2654435769+(e<<6)+(e>>2)}return wr[d]=!0,wr[x]=Lr.entries,wr.__toJS=Lr.toObject,wr.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+Fr(e)},jr(o,{toKeyedSeq:function(){return new At(this,!1)},filter:function(e,t){return Yt(this,Ut(this,e,t,!1))},findIndex:function(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return Yt(this,Vt(this,!1))},slice:function(e,t){return Yt(this,qt(this,e,t,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(0|t,0),0===r||2===r&&!t)return this;e=L(e,e<0?this.count():this.size);var n=this.slice(0,e);return Yt(this,1===r?n:n.concat(T(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(e){return Yt(this,Gt(this,e,!1))},get:function(e,t){return(e=C(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,r){return r===e}),void 0,t)},has:function(e){return(e=C(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Yt(this,function(e,t){var r=Qt(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var o=this,i=0;return e.__iterate((function(e,n){return(!i||!1!==r(t,i++,o))&&!1!==r(e,i++,o)}),n),i},r.__iteratorUncached=function(r,n){var o,i=e.__iterator(1,n),a=0;return new F((function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?D(r,a++,t):D(r,a++,o.value,o)}))},r}(this,e))},interleave:function(){var e=[this].concat(T(arguments)),t=Ht(this.toSeq(),K.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),Yt(this,r)},keySeq:function(){return he(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(e,t){return Yt(this,Wt(this,e,t,!1))},zip:function(){return Yt(this,Ht(this,Dr,[this].concat(T(arguments))))},zipWith:function(e){var t=T(arguments);return t[0]=this,Yt(this,Ht(this,e,t))}}),o.prototype[p]=!0,o.prototype[v]=!0,jr(i,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=Lr.includes,i.prototype.contains=i.prototype.includes,jr(B,n.prototype),jr(K,o.prototype),jr(z,i.prototype),jr(me,n.prototype),jr(Oe,o.prototype),jr(Ee,i.prototype),{Iterable:r,Seq:G,Collection:ye,Map:De,OrderedMap:jt,List:ft,Stack:br,Set:ur,OrderedSet:gr,Record:rr,Range:he,Repeat:ve,is:de,fromJS:le}}()},8044:(e,t,r)=>{"use strict";var n=r(5959),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,r){var n,i={},s=null,c=null;for(n in void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,n)&&!l.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:o,type:e,key:s,ref:c,props:i,_owner:u.current}}t.Fragment=i,t.jsx=s,t.jsxs=s},9728:(e,t,r)=>{"use strict";e.exports=r(8044)},138:function(e){var t;t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpelNode={create:function(e,t){var r,n={},o=e||"Abstract",i=[],a=null;if(n._type=o,n.getType=function(){return o},n.setType=function(e){o=e},n.getChildren=function(){return i},n.addChild=function(e){if(e){if(!e.setParent)throw{name:"Error",message:"Trying to add a child which is not a node: "+JSON.stringify(e)};e.setParent(n),i.push(e)}},n.getParent=function(){return a},n.setParent=function(e){a=e},n.getContext=function(e){return r||e.activeContext.peek()},n.setContext=function(e){r=e},n.getStartPosition=function(){return t>>16},n.getEndPosition=function(){return 65535&t},n.getValue=function(){throw{name:"MethodNotImplementedException",message:"SpelNode#getValue() must be overridden."}},n.toString=function(){var e="Kind: "+n.getType();e+=", Children: [";for(var t=0,r=n.getChildren().length;t<r;t+=1)e+="{"+n.getChildren()[t]+"}, ";return e+"]"},0===t)throw{name:"Error",message:"Position cannot be 0"};for(var u=arguments.length,l=Array(u>2?u-2:0),s=2;s<u;s++)l[s-2]=arguments[s];return l&&l.forEach((function(e){n.addChild(e)})),n}}},function(e,t,r){"use strict";function n(e){this.elements=e||[]}Object.defineProperty(t,"__esModule",{value:!0}),t.Stack=n,n.prototype.push=function(e){return this.elements.push(e),e},n.prototype.pop=function(){return this.elements.pop()},n.prototype.peek=function(){return this.elements[this.elements.length-1]},n.prototype.empty=function(){return this.elements.length>0},n.prototype.search=function(e){return this.elements.length-this.elements.indexOf(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={LITERAL_INT:1,LITERAL_LONG:2,LITERAL_HEXINT:3,LITERAL_HEXLONG:4,LITERAL_STRING:5,LITERAL_REAL:6,LITERAL_REAL_FLOAT:7,LPAREN:"(",RPAREN:")",COMMA:",",IDENTIFIER:0,COLON:":",HASH:"#",RSQUARE:"]",LSQUARE:"[",LCURLY:"{",RCURLY:"}",DOT:".",PLUS:"+",STAR:"*",MINUS:"-",SELECT_FIRST:"^[",SELECT_LAST:"$[",QMARK:"?",PROJECT:"![",DIV:"/",GE:">=",GT:">",LE:"<=",LT:"<",EQ:"==",NE:"!=",MOD:"%",NOT:"!",ASSIGN:"=",INSTANCEOF:"instanceof",MATCHES:"matches",BETWEEN:"between",SELECT:"?[",POWER:"^",ELVIS:"?:",SAFE_NAVI:"?.",BEAN_REF:"@",SYMBOLIC_OR:"||",SYMBOLIC_AND:"&&",INC:"++",DEC:"--"};function o(e){this.type=e,this.tokenChars=n[e],this._hasPayload="string"!=typeof n[e],"number"==typeof n[e]&&(this._ordinal=n[e])}for(var i in n)n.hasOwnProperty(i)&&(o[i]=new o(i));o.prototype.toString=function(){return this.type+(0!==this.tokenChars.length?"("+this.tokenChars+")":"")},o.prototype.getLength=function(){return this.tokenChars.length},o.prototype.hasPayload=function(){return this._hasPayload},o.prototype.valueOf=function(e){for(var t in n)if(n.hasOwnProperty(t)&&n[t]===e)return o[t]},o.prototype.ordinal=function(){return this._ordinal},t.TokenKind=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardContext=t.SpelExpressionEvaluator=void 0;var n=r(4),o=r(50);t.SpelExpressionEvaluator=n.SpelExpressionEvaluator,t.StandardContext=o.StandardContext},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpelExpressionEvaluator=void 0;var n=r(5),o=r(1),i={compile:function(e){var t=(0,n.SpelExpressionParser)().parse(e);return{eval:function(e,r){return function(e,t,r){var n,i=new o.Stack;return t||(t={}),i.push(t),n={rootContext:t,activeContext:i,locals:r},e.getValue(n)}(t,e,r)},_compiledExpression:t}},eval:function(e,t,r){return i.compile(e).eval(t,r)}};t.SpelExpressionEvaluator=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpelExpressionParser=void 0;var n=r(2),o=r(6),i=r(8),a=r(9),u=r(10),l=r(11),s=r(12),c=r(13),f=r(14),d=r(15),p=r(16),v=r(17),g=r(18),h=r(19),y=r(20),m=r(21),O=r(22),E=r(23),b=r(24),_=r(25),S=r(26),T=r(27),R=r(28),C=r(29),P=r(30),j=r(31),L=r(32),w=r(33),I=r(34),N=r(35),A=r(36),x=r(37),F=r(38),D=r(39),k=r(40),M=r(41),V=r(42),U=r(43),q=r(44),W=r(45),G=r(46),B=r(47),K=r(48),z=r(49);t.SpelExpressionParser=function(){var e,t,r,H,Y=new RegExp("[\\p{L}\\p{N}_$]+"),$=[];function J(){var e=X();if(_e()){var t=Te();if(t.getKind()===n.TokenKind.ASSIGN){null===e&&(e=l.NullLiteral.create(Le(t.startPos-1,t.endPos-1))),Se();var r=X();return g.Assign.create(je(t),e,r)}if(t.getKind()===n.TokenKind.ELVIS){null===e&&(e=l.NullLiteral.create(Le(t.startPos-1,t.endPos-2))),Se();var o=J();return null===o&&(o=l.NullLiteral.create(Le(t.startPos+1,t.endPos+1))),F.Elvis.create(je(t),e,o)}if(t.getKind()===n.TokenKind.QMARK){null===e&&(e=l.NullLiteral.create(Le(t.startPos-1,t.endPos-1))),Se();var i=J();ye(n.TokenKind.COLON);var a=J();return x.Ternary.create(je(t),e,i,a)}}return e}function X(){for(var e=Q();be("or")||me(n.TokenKind.SYMBOLIC_OR);){var t=Se(),r=Q();Ce(t,e,r),e=N.OpOr.create(je(t),e,r)}return e}function Q(){for(var e=Z();be("and")||me(n.TokenKind.SYMBOLIC_AND);){var t=Se(),r=Z();Ce(t,e,r),e=I.OpAnd.create(je(t),e,r)}return e}function Z(){var e=ee(),t=function(){var e=Te();if(null===e)return null;if(e.isNumericRelationalOperator())return e;if(e.isIdentifier()){var t=e.stringValue();if("instanceof"===t.toLowerCase())return e.asInstanceOfToken();if("matches"===t.toLowerCase())return e.asMatchesToken();if("between"===t.toLowerCase())return e.asBetweenToken()}return null}();if(null!==t){var r=Se(),o=ee();Ce(r,e,o);var i=t.kind;if(t.isNumericRelationalOperator()){var a=je(r);return i===n.TokenKind.GT?O.OpGT.create(a,e,o):i===n.TokenKind.LT?b.OpLT.create(a,e,o):i===n.TokenKind.LE?E.OpLE.create(a,e,o):i===n.TokenKind.GE?m.OpGE.create(a,e,o):i===n.TokenKind.EQ?h.OpEQ.create(a,e,o):y.OpNE.create(a,e,o)}return i===n.TokenKind.INSTANCEOF?U.OpInstanceof.create(je(r),e,o):i===n.TokenKind.MATCHES?A.OpMatches.create(je(r),e,o):q.OpBetween.create(je(r),e,o)}return e}function ee(){for(var e=te();Ee(n.TokenKind.PLUS,n.TokenKind.MINUS,n.TokenKind.INC);){var t=Se(),r=te();Pe(t,r),t.getKind()===n.TokenKind.PLUS?e=_.OpPlus.create(je(t),e,r):t.getKind()===n.TokenKind.MINUS&&(e=S.OpMinus.create(je(t),e,r))}return e}function te(){for(var e=re();Ee(n.TokenKind.STAR,n.TokenKind.DIV,n.TokenKind.MOD);){var t=Se(),r=re();Ce(t,e,r),e=t.getKind()===n.TokenKind.STAR?T.OpMultiply.create(je(t),e,r):t.getKind()===n.TokenKind.DIV?R.OpDivide.create(je(t),e,r):C.OpModulus.create(je(t),e,r)}return e}function re(){var e,t=ne();if(me(n.TokenKind.POWER)){e=Se();var r=ne();return Pe(e,r),P.OpPower.create(je(e),t,r)}return null!==t&&Ee(n.TokenKind.INC,n.TokenKind.DEC)?(e=Se()).getKind()===n.TokenKind.INC?j.OpInc.create(je(e),!0,t):L.OpDec.create(je(e),!0,t):t}function ne(){var e,t;return Ee(n.TokenKind.PLUS,n.TokenKind.MINUS,n.TokenKind.NOT)?(e=Se(),t=ne(),e.getKind()===n.TokenKind.NOT?w.OpNot.create(je(e),t):e.getKind()===n.TokenKind.PLUS?_.OpPlus.create(je(e),t):S.OpMinus.create(je(e),t)):Ee(n.TokenKind.INC,n.TokenKind.DEC)?(e=Se(),t=ne(),e.getKind()===n.TokenKind.INC?j.OpInc.create(je(e),!1,t):L.OpDec.create(je(e),!1,t)):function(){var e=[],t=function(){var e=Te();if(null===e)return!1;if(e.getKind()===n.TokenKind.LITERAL_INT||e.getKind()===n.TokenKind.LITERAL_LONG)ge(a.NumberLiteral.create(parseInt(e.stringValue(),10),je(e)));else if(e.getKind()===n.TokenKind.LITERAL_REAL||e.getKind()===n.TokenKind.LITERAL_REAL_FLOAT)ge(a.NumberLiteral.create(parseFloat(e.stringValue()),je(e)));else if(e.getKind()===n.TokenKind.LITERAL_HEXINT||e.getKind()===n.TokenKind.LITERAL_HEXLONG)ge(a.NumberLiteral.create(parseInt(e.stringValue(),16),je(e)));else if(be("true"))ge(i.BooleanLiteral.create(!0,je(e)));else if(be("false"))ge(i.BooleanLiteral.create(!1,je(e)));else{if(e.getKind()!==n.TokenKind.LITERAL_STRING)return!1;ge(u.StringLiteral.create(e.stringValue(),je(e)))}return Se(),!0}()||function(){if(me(n.TokenKind.LPAREN)){Se();var e=J();return ye(n.TokenKind.RPAREN),ge(e),!0}return!1}()||function(){if(me(n.TokenKind.IDENTIFIER)){var e=Te();if("T"!==e.stringValue())return!1;var t=Se();if(me(n.TokenKind.RSQUARE))return ge(f.PropertyReference.create(t.stringValue(),je(t))),!0;ye(n.TokenKind.LPAREN);for(var r=de(),o=0;Oe(n.TokenKind.LSQUARE,!0);)ye(n.TokenKind.RSQUARE),o++;return ye(n.TokenKind.RPAREN),ge(W.TypeReference.create(je(e),r,o)),!0}return!1}()||function(){if(me(n.TokenKind.IDENTIFIER)){var e=Te();return"null"===e.stringValue().toLowerCase()&&(Se(),ge(l.NullLiteral.create(je(e))),!0)}return!1}()||function(){if(be("new")){var e=Se();if(me(n.TokenKind.RSQUARE))return ge(f.PropertyReference.create(e.stringValue(),je(e))),!0;var t=de(),r=[];if(r.push(t),me(n.TokenKind.LSQUARE)){for(var o=[];Oe(n.TokenKind.LSQUARE,!0);)me(n.TokenKind.RSQUARE)?o.push(null):o.push(J()),ye(n.TokenKind.RSQUARE);se()&&r.push(he()),ge(z.ConstructorReference.create(je(e),o,r))}else i=r,me(n.TokenKind.LPAREN)||Re(je(Te()),"MISSING_CONSTRUCTOR_ARGS"),ue(i),ye(n.TokenKind.RPAREN),ge(z.ConstructorReference.create(je(e),r));return!0}var i;return!1}()||ve(!1)||ie()||function(){if(me(n.TokenKind.BEAN_REF)){var e=Se(),t=null,r=null;return me(n.TokenKind.IDENTIFIER)?r=(t=ye(n.TokenKind.IDENTIFIER)).data:me(n.TokenKind.LITERAL_STRING)?r=(r=(t=ye(n.TokenKind.LITERAL_STRING)).stringValue()).substring(1,r.length()-1):Re(e.startPos,"INVALID_BEAN_REFERENCE"),ge(G.BeanReference.create(je(t),r)),!0}return!1}()||le(!1)||fe(!1)||ce()||se()?he():null;for(e.push(t);oe();)e.push(he());return 1===e.length?e[0]:p.CompoundExpression.create(Le(t.getStartPosition(),e[e.length-1].getEndPosition()),e)}()}function oe(){var e,t,r;return null!==(r=Ee(n.TokenKind.DOT,n.TokenKind.SAFE_NAVI)?ve(t=(e=Se()).getKind()===n.TokenKind.SAFE_NAVI)||ie()||le(t)||fe(t)?he():(null===Te()?Re(e.startPos,"OOD"):Re(e.startPos,"UNEXPECTED_DATA_AFTER_DOT",function(e){return e.getKind().hasPayload()?e.stringValue():e.getKind().toString().toLowerCase()}(Te())),null):me(n.TokenKind.LSQUARE)&&ce()?he():null)&&(ge(r),!0)}function ie(){if(!me(n.TokenKind.HASH))return!1;var e=Se(),t=ye(n.TokenKind.IDENTIFIER),r=ae();return null===r?(ge(d.VariableReference.create(t.data,Le(e.startPos,t.endPos))),!0):(ge(s.FunctionReference.create(t.data,Le(e.startPos,t.endPos),r)),!0)}function ae(){if(!me(n.TokenKind.LPAREN))return null;var e=[];return ue(e),ye(n.TokenKind.RPAREN),e}function ue(e){var t,r=Te().startPos;do{Se();var o=Te();null===o&&Re(r,"RUN_OUT_OF_ARGUMENTS"),o.getKind()!==n.TokenKind.RPAREN&&e.push(J()),t=Te()}while(null!==t&&t.kind===n.TokenKind.COMMA);null===t&&Re(r,"RUN_OUT_OF_ARGUMENTS")}function le(e){var t=Te();if(!Oe(n.TokenKind.PROJECT,!0))return!1;var r=J();return ye(n.TokenKind.RSQUARE),ge(V.Projection.create(e,je(t),r)),!0}function se(){var e=Te(),t=[];if(!Oe(n.TokenKind.LCURLY,!0))return!1;var r=null,o=Te();if(Oe(n.TokenKind.RCURLY,!0))r=D.InlineList.create(Le(e.startPos,o.endPos));else if(Oe(n.TokenKind.COLON,!0))o=ye(n.TokenKind.RCURLY),r=k.InlineMap.create(Le(e.startPos,o.endPos));else{var i=J();if(me(n.TokenKind.RCURLY))t.push(i),o=ye(n.TokenKind.RCURLY),r=D.InlineList.create(Le(e.startPos,o.endPos),t);else if(Oe(n.TokenKind.COMMA,!0)){t.push(i);do{t.push(J())}while(Oe(n.TokenKind.COMMA,!0));o=ye(n.TokenKind.RCURLY),r=D.InlineList.create(je(e.startPos,o.endPos),t)}else if(Oe(n.TokenKind.COLON,!0)){var a=[];for(a.push(i),a.push(J());Oe(n.TokenKind.COMMA,!0);)a.push(J()),ye(n.TokenKind.COLON),a.push(J());o=ye(n.TokenKind.RCURLY),r=k.InlineMap.create(Le(e.startPos,o.endPos),a)}else Re(e.startPos,"OOD")}return ge(r),!0}function ce(){var e=Te();if(!Oe(n.TokenKind.LSQUARE,!0))return!1;var t=J();return ye(n.TokenKind.RSQUARE),ge(v.Indexer.create(je(e),t)),!0}function fe(e){var t=Te();if(!function(){if(!_e())return!1;var e=Te();return e.getKind()===n.TokenKind.SELECT||e.getKind()===n.TokenKind.SELECT_FIRST||e.getKind()===n.TokenKind.SELECT_LAST}())return!1;Se();var r=J();return null===r&&Re(je(t),"MISSING_SELECTION_EXPRESSION"),ye(n.TokenKind.RSQUARE),t.getKind()===n.TokenKind.SELECT_FIRST?ge(M.Selection.create(e,M.Selection.FIRST,je(t),r)):t.getKind()===n.TokenKind.SELECT_LAST?ge(M.Selection.create(e,M.Selection.LAST,je(t),r)):ge(M.Selection.create(e,M.Selection.ALL,je(t),r)),!0}function de(){for(var t=[],r=Te();pe(r);)Se(),r.kind!==n.TokenKind.DOT&&t.push(B.Identifier.create(r.stringValue(),je(r))),r=Te();t.length||(null===r&&Re(e.length(),"OOD"),Re(r.startPos,"NOT_EXPECTED_TOKEN","qualified ID",r.getKind().toString().toLowerCase()));var o=Le(t[0].getStartPosition(),t[t.length-1].getEndPosition());return K.QualifiedIdentifier.create(o,t)}function pe(e){if(null===e||e.kind===n.TokenKind.LITERAL_STRING)return!1;if(e.kind===n.TokenKind.DOT||e.kind===n.TokenKind.IDENTIFIER)return!0;var t=e.stringValue();return t&&t.length&&Y.test(t)}function ve(e){if(me(n.TokenKind.IDENTIFIER)){var t=Se(),r=ae();return null===r?(ge(f.PropertyReference.create(e,t.stringValue(),je(t))),!0):(ge(c.MethodReference.create(e,t.stringValue(),je(t),r)),!0)}return!1}function ge(e){$.push(e)}function he(){return $.pop()}function ye(t){var r=Se();return null===r&&Re(e.length,"OOD"),r.getKind()!==t&&Re(r.startPos,"NOT_EXPECTED_TOKEN",t.toString().toLowerCase(),r.getKind().toString().toLowerCase()),r}function me(e){return Oe(e,!1)}function Oe(e,t){if(!_e())return!1;var r=Te();return r.getKind()===e?(t&&H++,!0):e===n.TokenKind.IDENTIFIER&&r.getKind().ordinal()>=n.TokenKind.DIV.ordinal()&&r.getKind().ordinal()<=n.TokenKind.NOT.ordinal()&&null!==r.data}function Ee(){if(!_e())return!1;for(var e=Te(),t=Array.prototype.slice.call(arguments),r=0,n=t.length;r<n;r+=1)if(e.getKind()===t[r])return!0;return!1}function be(e){if(!_e())return!1;var t=Te();return t.getKind()===n.TokenKind.IDENTIFIER&&t.stringValue().toLowerCase()===e.toLowerCase()}function _e(){return H<t.length}function Se(){return H>=r?null:t[H++]}function Te(){return H>=r?null:t[H]}function Re(t,r,n,o){throw n&&(r+="\nExpected: "+n),o&&(r+="\nActual: "+o),{name:"InternalParseException",message:"Error occurred while attempting to parse expression '"+e+"' at position "+t+". Message: "+r}}function Ce(e,t,r){!function(e,t){null===t&&Re(e.startPos,"LEFT_OPERAND_PROBLEM")}(e,t),Pe(e,r)}function Pe(e,t){null===t&&Re(e.startPos,"RIGHT_OPERAND_PROBLEM")}function je(e){return(e.startPos<<16)+e.endPos}function Le(e,t){return(e<<16)+t}return{setConfiguration:function(e){},parse:function(n,i){try{e=n,t=o.Tokenizer.tokenize(n),r=t.length,H=0,$=[];var a=J();return _e()&&Re(Te().startPos,"MORE_INPUT",Se().toString()),a}catch(e){throw e.message}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tokenizer=void 0;var n=r(7),o=r(2),i=["DIV","EQ","GE","GT","LE","LT","MOD","NE","NOT"],a=[];!function(){var e;for(e="0".charCodeAt(0);e<="9".charCodeAt(0);e+=1)a[e]|=3;for(e="A".charCodeAt(0);e<="F".charCodeAt(0);e+=1)a[e]|=2;for(e="a".charCodeAt(0);e<="f".charCodeAt(0);e+=1)a[e]|=2;for(e="A".charCodeAt(0);e<="Z".charCodeAt(0);e+=1)a[e]|=4;for(e="a".charCodeAt(0);e<="z".charCodeAt(0);e+=1)a[e]|=4}(),t.Tokenizer={tokenize:function(e){var t=e,r=e+"\0",u=r.length,l=0,s=[];function c(){for(var e,i=l,a=!1;!a;)if("'"===(e=r[l+=1])&&("'"===r[l+1]?l+=1:a=!0),0===e.charCodeAt(0))throw{name:"SpelParseException",message:"Non-terminating quoted string in expression ("+t+") at position "+l};l+=1,s.push(new n.Token(o.TokenKind.LITERAL_STRING,y(i,l),i,l))}function f(){for(var e,i=l,a=!1;!a;)if('"'===(e=r[l+=1])&&('"'===r[l+1]?l+=1:a=!0),0===e.charCodeAt(0))throw{name:"SpelParseException",message:"Non-terminating double-quoted string in expression ("+t+") at position "+l};l+=1,s.push(new n.Token(o.TokenKind.LITERAL_STRING,y(i,l),i,l))}function d(e){var n,o,i,a=!1,u=l,s=r[l+1];if(!e||"x"!==s&&"X"!==s){do{l+=1}while(T(r[l]));if("."===(s=r[l])){a=!0,n=l;do{l+=1}while(T(r[l]));if(l===n+1)return void v(y(u,l=n),!1,u,l)}if(o=l,b("L","l")){if(a)throw{name:"SpelParseException",message:"Real cannot be long in expression ("+t+") at position "+l};v(y(u,o),!0,u,o),l+=1}else if(function(e){return"e"===e||"E"===e}(r[l])){a=!0,function(e){return"+"===e||"-"===e}(r[l+=1])&&(l+=1);do{l+=1}while(T(r[l]));i=!1,_(r[l])?(i=!0,o=l+=1):S(r[l])&&(o=l+=1),h(y(u,l),i,u,l)}else i=!1,_(s=r[l])?(a=!0,i=!0,o=l+=1):S(s)&&(a=!0,o=l+=1),a?h(y(u,o),i,u,o):v(y(u,o),!1,u,o)}else{l+=1;do{l+=1}while(C(r[l]));b("L","l")?(g(y(u+2,l),!0,u,l),l+=1):g(y(u+2,l),!1,u,l)}}function p(){var e,t,a,u=l;do{l+=1}while(R(a=r[l])||T(a)||"_"===a||"$"===a);e=y(u,l),(l-u==2||l-u==3)&&(t=e.toUpperCase(),i.indexOf(t)>=0)?function(e,t,r){s.push(new n.Token(e,r,t,t+e.getLength()))}(o.TokenKind.valueOf(t),u,e):s.push(new n.Token(o.TokenKind.IDENTIFIER,e.replace("\0",""),u,l))}function v(e,t,r,i){t?s.push(new n.Token(o.TokenKind.LITERAL_LONG,e,r,i)):s.push(new n.Token(o.TokenKind.LITERAL_INT,e,r,i))}function g(e,r,i,a){if(0===e.length)throw r?{name:"SpelParseException",message:"Not a long in expression ("+t+") at position "+l}:{name:"SpelParseException",message:"Not an int in expression ("+t+") at position "+l};r?s.push(new n.Token(o.TokenKind.LITERAL_HEXLONG,e,i,a)):s.push(new n.Token(o.TokenKind.LITERAL_HEXINT,e,i,a))}function h(e,t,r,i){t?s.push(new n.Token(o.TokenKind.LITERAL_REAL_FLOAT,e,r,i)):s.push(new n.Token(o.TokenKind.LITERAL_REAL,e,r,i))}function y(e,t){return r.substring(e,t)}function m(e){return 2===e.tokenChars.length&&r[l]===e.tokenChars[0]&&r[l+1]===e.tokenChars[1]}function O(e){s.push(new n.Token(e,null,l,l+1)),l+=1}function E(e){s.push(new n.Token(e,null,l,l+2)),l+=2}function b(e,t){var n=r[l];return n===e||n===t}function _(e){return"f"===e||"F"===e}function S(e){return"d"===e||"D"===e}function T(e){return!(e.charCodeAt(0)>255||!(1&a[e.charCodeAt(0)]))}function R(e){return!(e.charCodeAt(0)>255||!(4&a[e.charCodeAt(0)]))}function C(e){return!(e.charCodeAt(0)>255||!(2&a[e.charCodeAt(0)]))}return function(){for(var e;l<u;)if(R(e=r[l]))p();else switch(e){case"+":m(o.TokenKind.INC)?E(o.TokenKind.INC):O(o.TokenKind.PLUS);break;case"_":p();break;case"-":m(o.TokenKind.DEC)?E(o.TokenKind.DEC):O(o.TokenKind.MINUS);break;case":":O(o.TokenKind.COLON);break;case".":O(o.TokenKind.DOT);break;case",":O(o.TokenKind.COMMA);break;case"*":O(o.TokenKind.STAR);break;case"/":O(o.TokenKind.DIV);break;case"%":O(o.TokenKind.MOD);break;case"(":O(o.TokenKind.LPAREN);break;case")":O(o.TokenKind.RPAREN);break;case"[":O(o.TokenKind.LSQUARE);break;case"#":O(o.TokenKind.HASH);break;case"]":O(o.TokenKind.RSQUARE);break;case"{":O(o.TokenKind.LCURLY);break;case"}":O(o.TokenKind.RCURLY);break;case"@":O(o.TokenKind.BEAN_REF);break;case"^":m(o.TokenKind.SELECT_FIRST)?E(o.TokenKind.SELECT_FIRST):O(o.TokenKind.POWER);break;case"!":m(o.TokenKind.NE)?E(o.TokenKind.NE):m(o.TokenKind.PROJECT)?E(o.TokenKind.PROJECT):O(o.TokenKind.NOT);break;case"=":m(o.TokenKind.EQ)?E(o.TokenKind.EQ):O(o.TokenKind.ASSIGN);break;case"&":if(!m(o.TokenKind.SYMBOLIC_AND))throw{name:"SpelParseException",message:"Missing character '&' in expression ("+t+") at position "+l};E(o.TokenKind.SYMBOLIC_AND);break;case"|":if(!m(o.TokenKind.SYMBOLIC_OR))throw{name:"SpelParseException",message:"Missing character '|' in expression ("+t+") at position "+l};E(o.TokenKind.SYMBOLIC_OR);break;case"?":m(o.TokenKind.SELECT)?E(o.TokenKind.SELECT):m(o.TokenKind.ELVIS)?E(o.TokenKind.ELVIS):m(o.TokenKind.SAFE_NAVI)?E(o.TokenKind.SAFE_NAVI):O(o.TokenKind.QMARK);break;case"$":m(o.TokenKind.SELECT_LAST)?E(o.TokenKind.SELECT_LAST):p();break;case">":m(o.TokenKind.GE)?E(o.TokenKind.GE):O(o.TokenKind.GT);break;case"<":m(o.TokenKind.LE)?E(o.TokenKind.LE):O(o.TokenKind.LT);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d("0"===e);break;case" ":case"\t":case"\r":case"\n":case"\0":l+=1;break;case"'":c();break;case'"':f();break;case"\\":throw{name:"SpelParseException",message:"Unexpected escape character in expression ("+t+") at position "+l};default:throw{name:"SpelParseException",message:"Cannot handle character '"+e+"' in expression ("+t+") at position "+l}}}(),s}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Token=void 0;var n=r(2);function o(e,t,r,n){this.kind=e,this.startPos=r,this.endPos=n,t&&(this.data=t)}o.prototype.getKind=function(){return this.kind},o.prototype.toString=function(){var e="[";return e+=this.kind.toString(),this.kind.hasPayload()&&(e+=":"+this.data),(e+="]")+"("+this.startPos+","+this.endPos+")"},o.prototype.isIdentifier=function(){return this.kind===n.TokenKind.IDENTIFIER},o.prototype.isNumericRelationalOperator=function(){return this.kind===n.TokenKind.GT||this.kind===n.TokenKind.GE||this.kind===n.TokenKind.LT||this.kind===n.TokenKind.LE||this.kind===n.TokenKind.EQ||this.kind===n.TokenKind.NE},o.prototype.stringValue=function(){return this.data},o.prototype.asInstanceOfToken=function(){return new o(n.TokenKind.INSTANCEOF,this.startPos,this.endPos)},o.prototype.asMatchesToken=function(){return new o(n.TokenKind.MATCHES,this.startPos,this.endPos)},o.prototype.asBetweenToken=function(){return new o(n.TokenKind.BETWEEN,this.startPos,this.endPos)},o.prototype.getStartPosition=function(){return this.startPos},o.prototype.getEndPosition=function(){return this.endPos},t.Token=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BooleanLiteral=void 0;var n=r(0);t.BooleanLiteral={create:function(e,t){var r=n.SpelNode.create("boolean",t);return r.getValue=function(){return e},r.setValue=function(t){return e=t},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NumberLiteral=void 0;var n=r(0);t.NumberLiteral={create:function(e,t){var r=n.SpelNode.create("number",t);return r.getValue=function(){return e},r.setValue=function(t){return e=t},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringLiteral=void 0;var n=r(0);t.StringLiteral={create:function(e,t){var r=n.SpelNode.create("string",t);return e=function(e){return("'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1])&&(e=e.substring(1,e.length-1)),e.replace(/''/g,"'").replace(/""/g,'"')}(e),r.getValue=function(){return e},r.setValue=function(t){return e=t},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NullLiteral=void 0;var n=r(0);t.NullLiteral={create:function(e,t){var r=n.SpelNode.create("null",t);return r.getValue=function(){return null},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionReference=void 0;var n=r(0),o=r(1);t.FunctionReference={create:function(e,t,r){var i=n.SpelNode.create("function",t);return i.getRaw=function(){return{functionName:e,args:r}},i.getValue=function(t){var n=t.locals||{},i=t.rootContext,a=[];if(r.forEach((function(e){var r=t.activeContext;t.activeContext=new o.Stack,t.activeContext.push(t.rootContext),a.push(e.getValue(t)),t.activeContext=r})),n[e])return n[e].apply(i,a);throw{name:"FunctionDoesNotExistException",message:"Function '"+e+"' does not exist."}},i}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MethodReference=void 0;var n=r(0),o=r(1);t.MethodReference={create:function(e,t,r,i){var a=n.SpelNode.create("method",r);return a.getRaw=function(){return{methodName:t,args:i}},a.getValue=function(r){var n,a=r.activeContext.peek(),u=[];if(!a)throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+t+"' for an undefined context."};function l(r){if(null==r){if(e)return null;throw{name:"NullPointerException",message:"Method "+t+" does not exist."}}return r}if(i.forEach((function(e){var t=r.activeContext;r.activeContext=new o.Stack,r.activeContext.push(r.rootContext),u.push(e.getValue(r)),r.activeContext=t})),"get"===t.substr(0,3)&&!a[t])return l(a[t.charAt(3).toLowerCase()+t.substring(4)]);if("set"===t.substr(0,3)&&!a[t])return a[t.charAt(3).toLowerCase()+t.substring(4)]=u[0];if(Array.isArray(a)){if("size"===t)return a.length;if("contains"===t)return a.includes(u[0])}return(n=l(a[t]))?n.apply(a,u):null},a}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyReference=void 0;var n=r(0);t.PropertyReference={create:function(e,t,r){var o=n.SpelNode.create("property",r);return o.getRaw=function(){return t},o.getValue=function(r){var n=r.activeContext.peek();if(!n){if(e)return null;throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+t+"' for an undefined context."}}if(void 0===n[t]||null===n[t]){if(e)return null;if("size"===t&&Array.isArray(n))return n.length;throw{name:"NullPointerException",message:"Property '"+t+"' does not exist."}}return n[t]},o.setValue=function(e,r){var n=r.activeContext.peek();if(!n)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+t+"' for an undefined context."};return n[t]=e},o.getName=function(){return t},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableReference=void 0;var n=r(0);t.VariableReference={create:function(e,t){var r=n.SpelNode.create("variable",t);return r.getRaw=function(){return e},r.getValue=function(t){var r=t.activeContext.peek(),n=t.locals;if(!r)throw{name:"ContextDoesNotExistException",message:"Attempting to look up variable '"+e+"' for an undefined context."};return"this"===e?r:"root"===e?t.rootContext:n[e]},r.setValue=function(t,r){return r.locals[e]=t},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompoundExpression=void 0;var n=r(0);t.CompoundExpression={create:function(e,t){var r=n.SpelNode.create.apply(null,["compound",e].concat(t));function o(e){var t,n=r.getChildren().length;for(t=0;t<n;t+=1)"indexer"===r.getChildren()[t].getType()?e.activeContext.push(e.activeContext.peek()[r.getChildren()[t].getValue(e)]):e.activeContext.push(r.getChildren()[t].getValue(e));return function(){for(t=0;t<n;t+=1)e.activeContext.pop()}}return r.getValue=function(e){var t;if(!e.activeContext.peek())throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};var r=o(e);return t=e.activeContext.peek(),r(),t},r.setValue=function(e,t){var n=o(t),i=r.getChildren().length;return t.activeContext.pop(),e=r.getChildren()[i-1].setValue(e,t),t.activeContext.push(null),n(),e},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Indexer=void 0;var n=r(0),o=r(1);t.Indexer={create:function(e,t){var r=n.SpelNode.create.apply(null,["indexer",e].concat(t));return r.getValue=function(e){var t,n,i=e.activeContext,a=r.getChildren().length;if(e.activeContext=new o.Stack,e.activeContext.push(e.rootContext),!e.activeContext.peek())throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};for(t=0;t<a;t+=1)e.activeContext.push(r.getChildren()[t].getValue(e));for(n=e.activeContext.peek(),t=0;t<a;t+=1)e.activeContext.pop();return e.activeContext=i,n},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Assign=void 0;var n=r(0);t.Assign={create:function(e,t,r){var o=n.SpelNode.create("assign",e,t,r);return o.getValue=function(e){if(!e.activeContext.peek())throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+t.getValue(e)+"' for an undefined context."};return t.setValue(r.getValue(e),e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpEQ=void 0;var n=r(0);t.OpEQ={create:function(e,t,r){var o=n.SpelNode.create("op-eq",e,t,r);return o.getValue=function(e){return t.getValue(e)===r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpNE=void 0;var n=r(0);t.OpNE={create:function(e,t,r){var o=n.SpelNode.create("op-ne",e,t,r);return o.getValue=function(e){return t.getValue(e)!==r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpGE=void 0;var n=r(0);t.OpGE={create:function(e,t,r){var o=n.SpelNode.create("op-ge",e,t,r);return o.getValue=function(e){return t.getValue(e)>=r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpGT=void 0;var n=r(0);t.OpGT={create:function(e,t,r){var o=n.SpelNode.create("op-gt",e,t,r);return o.getValue=function(e){return t.getValue(e)>r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpLE=void 0;var n=r(0);t.OpLE={create:function(e,t,r){var o=n.SpelNode.create("op-le",e,t,r);return o.getValue=function(e){return t.getValue(e)<=r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpLT=void 0;var n=r(0);t.OpLT={create:function(e,t,r){var o=n.SpelNode.create("op-lt",e,t,r);return o.getValue=function(e){return t.getValue(e)<r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpPlus=void 0;var n=r(0);t.OpPlus={create:function(e,t,r){var o=n.SpelNode.create("op-plus",e,t,r);return o.getValue=function(e){return r?t.getValue(e)+r.getValue(e):+t.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpMinus=void 0;var n=r(0);t.OpMinus={create:function(e,t,r){var o=n.SpelNode.create("op-minus",e,t,r);return o.getValue=function(e){return r?t.getValue(e)-r.getValue(e):-t.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpMultiply=void 0;var n=r(0);t.OpMultiply={create:function(e,t,r){var o=n.SpelNode.create("op-multiply",e,t,r);return o.getValue=function(e){var n=t.getValue(e),o=r.getValue(e);if("number"==typeof n&&"number"==typeof o)return n*o;if("string"==typeof n&&"number"==typeof o){for(var i="",a=0;a<o;a+=1)i+=n;return i}return null},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpDivide=void 0;var n=r(0);t.OpDivide={create:function(e,t,r){var o=n.SpelNode.create("op-divide",e,t,r);return o.getValue=function(e){return t.getValue(e)/r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpModulus=void 0;var n=r(0);t.OpModulus={create:function(e,t,r){var o=n.SpelNode.create("op-modulus",e,t,r);return o.getValue=function(e){return t.getValue(e)%r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpPower=void 0;var n=r(0);t.OpPower={create:function(e,t,r){var o=n.SpelNode.create("op-power",e,t,r);return o.getValue=function(e){return Math.pow(t.getValue(e),r.getValue(e))},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpInc=void 0;var n=r(0);t.OpInc={create:function(e,t,r){var o=n.SpelNode.create("op-inc",e,r);return o.getValue=function(e){var n=r.getValue(e);return r.setValue(n+1,e),t?n:n+1},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpDec=void 0;var n=r(0);t.OpDec={create:function(e,t,r){var o=n.SpelNode.create("op-dec",e,r);return o.getValue=function(e){var n=r.getValue(e);return r.setValue(n-1,e),t?n:n-1},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpNot=void 0;var n=r(0);t.OpNot={create:function(e,t){var r=n.SpelNode.create("op-not",e,t);return r.getValue=function(e){return!t.getValue(e)},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpAnd=void 0;var n=r(0);t.OpAnd={create:function(e,t,r){var o=n.SpelNode.create("op-and",e,t,r);return o.getValue=function(e){return!!t.getValue(e)&&!!r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpOr=void 0;var n=r(0);t.OpOr={create:function(e,t,r){var o=n.SpelNode.create("op-or",e,t,r);return o.getValue=function(e){return!!t.getValue(e)||!!r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpMatches=void 0;var n=r(0);t.OpMatches={create:function(e,t,r){var o=n.SpelNode.create("matches",e,t,r);return o.getValue=function(e){var n=t.getValue(e),o=r.getValue(e);try{return!!new RegExp(o).exec(n)}catch(e){throw{name:"EvaluationException",message:e.toString()}}},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ternary=void 0;var n=r(0);t.Ternary={create:function(e,t,r,o){var i=n.SpelNode.create("ternary",e,t,r,o);return i.getValue=function(e){return t.getValue(e)?r.getValue(e):o.getValue(e)},i}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Elvis=void 0;var n=r(0);t.Elvis={create:function(e,t,r){var o=n.SpelNode.create("elvis",e,t,r);return o.getValue=function(e){return null!==t.getValue(e)?t.getValue(e):r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineList=void 0;var n=r(0);t.InlineList={create:function(e,t){var r=n.SpelNode.create("list",e),o=[].concat(t||[]);return r.getRaw=function(){return o},r.getValue=function(e){return o.map((function(t){return t.getValue(e)}))},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineMap=void 0;var n=r(0);t.InlineMap={create:function(e,t){var r=n.SpelNode.create("map",e),o=[].concat(t||[]);return r.getValue=function(e){var t=!0,r=null,n={};return o.forEach((function(o){t?r="property"===o.getType()?o.getName():o.getValue(e):n[r]=o.getValue(e),t=!t})),n},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(0);function i(e,t,r){var n;return r.activeContext.push(e),n=t.getValue(r),r.activeContext.pop(),n}t.Selection={create:function(e,t,r,a){var u=o.SpelNode.create("selection",r,a);return u.getValue=function(e){var r=e.activeContext.peek();if(r){if(Array.isArray(r))return function(e,t,r,n){var o=e.filter((function(e){return i(e,r,n)}));switch(t){case"ALL":return o;case"FIRST":return o[0]||null;case"LAST":return o.length?o[o.length-1]:null}}(r,t,a,e);if("object"===(void 0===r?"undefined":n(r)))return function(e,t,r,n){var o,a,u={},l=[],s={};for(a in e)e.hasOwnProperty(a)&&i(o={key:a,value:e[a]},r,n)&&l.push(o);switch(t){case"ALL":return l.forEach((function(e){u[e.key]=e.value})),u;case"FIRST":return l.length?(s[l[0].key]=l[0].value,s):null;case"LAST":return l.length?(s[l[l.length-1].key]=l[l.length-1].value,s):null}l.forEach((function(e){u[e.key]=e.value}))}(r,t,a,e)}return null},u},FIRST:"FIRST",LAST:"LAST",ALL:"ALL"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Projection=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(0);function i(e,t,r){return e.map((function(e){var n;return r.activeContext.push(e),n=t.getValue(r),r.activeContext.pop(),n}))}t.Projection={create:function(e,t,r){var a=o.SpelNode.create("projection",t,r);return a.getValue=function(e){var t,o=e.activeContext.peek(),a=[];if(Array.isArray(o))return i(o,r,e);if("object"===(void 0===o?"undefined":n(o))){for(t in o)o.hasOwnProperty(t)&&a.push(o[t]);return i(a,r,e)}return null},a}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpInstanceof=void 0;var n=r(0);t.OpInstanceof={create:function(e,t,r){var o=n.SpelNode.create("instanceof",e,t,r);return o.getValue=function(e){throw{name:"MethodNotImplementedException",message:"OpInstanceOf: Not implemented"}},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpBetween=void 0;var n=r(0);t.OpBetween={create:function(e,t,r){var o=n.SpelNode.create("between",e,t,r);return o.getValue=function(e){throw{name:"MethodNotImplementedException",message:"OpBetween: Not implemented"}},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeReference=void 0;var n=r(0);t.TypeReference={create:function(e,t,r){return(t=n.SpelNode.create("typeref",e,t)).getValue=function(e){throw{name:"MethodNotImplementedException",message:"TypeReference: Not implemented"}},t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeanReference=void 0;var n=r(0);t.BeanReference={create:function(e,t){var r=n.SpelNode.create("beanref",e);return r.getValue=function(e){throw{name:"MethodNotImplementedException",message:"BeanReference: Not implemented"}},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Identifier=void 0;var n=r(0);t.Identifier={create:function(e,t){var r=n.SpelNode.create("identifier",t);return r.getRaw=function(){return e},r.getValue=function(e){throw{name:"MethodNotImplementedException",message:"Identifier: Not implemented"}},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QualifiedIdentifier=void 0;var n=r(0);t.QualifiedIdentifier={create:function(e,t){var r=n.SpelNode.create.apply(n.SpelNode,["qualifiedidentifier",e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t)));return r.getRaw=function(){return t.map((function(e){return e.getRaw()}))},r.getValue=function(e){throw{name:"MethodNotImplementedException",message:"QualifiedIdentifier: Not implemented"}},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConstructorReference=void 0;var n=r(0),o=r(1);t.ConstructorReference={create:function(e,t,r){var i,a=void 0!==r;a?i=t.length&&t[0]&&"number"===t[0].getType()?t[0].getValue():null:(r=t,t=void 0);var u,l=(u=r,Array.isArray(u)?u:Array.from(u)),s=(l[0],l.slice(1)),c=n.SpelNode.create.apply(n.SpelNode,["constructorref",e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r)));return c.getRaw=function(){return i},c.getValue=function(e){if(a&&s.length<=1){var t=[];return s.forEach((function(r){var n=e.activeContext;e.activeContext=new o.Stack,e.activeContext.push(e.rootContext),t.push(r.getValue(e)),e.activeContext=n})),1===s.length?t[0]:i?new Array(i):[]}throw{name:"MethodNotImplementedException",message:"ConstructorReference: Not implemented"}},c}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardContext={create:function(e,t){var r={};return r.authentication=e||{},r.principal=t||{},r.hasRole=function(e){var t=!1;return!!e&&!(!r.authentication&&!Array.isArray(r.authentication.authorities))&&(r.authentication.authorities.forEach((function(r){r.authority.toLowerCase()===e.toLowerCase()&&(t=!0)})),t)},r.hasPermission=function(){var e=Array.prototype.slice.call(arguments);if(1===e.length)return r.hasRole(e[0])},r}}}])},e.exports=t()},9157:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(r(1283)),o=l(r(1025)),i=l(r(2520)),a=l(r(9137)),u=l(r(9429));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(e){return e.replace(/[\t ]+$/,"")},f=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfg=t||{},this.indentation=new i.default(this.cfg.indent),this.inlineBlock=new a.default,this.params=new u.default(this.cfg.params),this.tokenizer=r,this.tokenOverride=n,this.previousReservedWord={},this.tokens=[],this.index=0}var t,r;return t=e,r=[{key:"format",value:function(e){return this.tokens=this.tokenizer.tokenize(e),this.getFormattedQueryFromTokens().trim()}},{key:"getFormattedQueryFromTokens",value:function(){var e=this,t="";return this.tokens.forEach((function(r,n){e.index=n,e.tokenOverride&&(r=e.tokenOverride(r,e.previousReservedWord)||r),r.type===o.default.WHITESPACE||(r.type===o.default.LINE_COMMENT?t=e.formatLineComment(r,t):r.type===o.default.BLOCK_COMMENT?t=e.formatBlockComment(r,t):r.type===o.default.RESERVED_TOP_LEVEL?(t=e.formatTopLevelReservedWord(r,t),e.previousReservedWord=r):r.type===o.default.RESERVED_TOP_LEVEL_NO_INDENT?(t=e.formatTopLevelReservedWordNoIndent(r,t),e.previousReservedWord=r):r.type===o.default.RESERVED_NEWLINE?(t=e.formatNewlineReservedWord(r,t),e.previousReservedWord=r):r.type===o.default.RESERVED?(t=e.formatWithSpaces(r,t),e.previousReservedWord=r):t=r.type===o.default.OPEN_PAREN?e.formatOpeningParentheses(r,t):r.type===o.default.CLOSE_PAREN?e.formatClosingParentheses(r,t):r.type===o.default.PLACEHOLDER?e.formatPlaceholder(r,t):","===r.value?e.formatComma(r,t):":"===r.value?e.formatWithSpaceAfter(r,t):"."===r.value?e.formatWithoutSpaces(r,t):";"===r.value?e.formatQuerySeparator(r,t):e.formatWithSpaces(r,t))})),t}},{key:"formatLineComment",value:function(e,t){return this.addNewline(t+e.value)}},{key:"formatBlockComment",value:function(e,t){return this.addNewline(this.addNewline(t)+this.indentComment(e.value))}},{key:"indentComment",value:function(e){return e.replace(/\n[\t ]*/g,"\n"+this.indentation.getIndent()+" ")}},{key:"formatTopLevelReservedWordNoIndent",value:function(e,t){return this.indentation.decreaseTopLevel(),t=this.addNewline(t)+this.equalizeWhitespace(this.formatReservedWord(e.value)),this.addNewline(t)}},{key:"formatTopLevelReservedWord",value:function(e,t){return this.indentation.decreaseTopLevel(),t=this.addNewline(t),this.indentation.increaseTopLevel(),t+=this.equalizeWhitespace(this.formatReservedWord(e.value)),this.addNewline(t)}},{key:"formatNewlineReservedWord",value:function(e,t){return this.addNewline(t)+this.equalizeWhitespace(this.formatReservedWord(e.value))+" "}},{key:"equalizeWhitespace",value:function(e){return e.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/g," ")}},{key:"formatOpeningParentheses",value:function(e,t){var r=[o.default.WHITESPACE,o.default.OPEN_PAREN,o.default.LINE_COMMENT];return(0,n.default)(r,this.previousToken().type)||(t=c(t)),t+=this.cfg.uppercase?e.value.toUpperCase():e.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),t=this.addNewline(t)),t}},{key:"formatClosingParentheses",value:function(e,t){return e.value=this.cfg.uppercase?e.value.toUpperCase():e.value,this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(e,t)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(e,this.addNewline(t)))}},{key:"formatPlaceholder",value:function(e,t){return t+this.params.get(e)+" "}},{key:"formatComma",value:function(e,t){return t=c(t)+e.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?t:this.addNewline(t)}},{key:"formatWithSpaceAfter",value:function(e,t){return c(t)+e.value+" "}},{key:"formatWithoutSpaces",value:function(e,t){return c(t)+e.value}},{key:"formatWithSpaces",value:function(e,t){return t+("reserved"===e.type?this.formatReservedWord(e.value):e.value)+" "}},{key:"formatReservedWord",value:function(e){return this.cfg.uppercase?e.toUpperCase():e}},{key:"formatQuerySeparator",value:function(e,t){return this.indentation.resetIndentation(),c(t)+e.value+"\n".repeat(this.cfg.linesBetweenQueries||1)}},{key:"addNewline",value:function(e){return(e=c(e)).endsWith("\n")||(e+="\n"),e+this.indentation.getIndent()}},{key:"previousToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.tokens[this.index-e]||{}}}],r&&s(t.prototype,r),e}();t.default=f,e.exports=t.default},2520:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(9901)),o=i(r(8906));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u="top-level",l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indent=t||"  ",this.indentTypes=[]}var t,r;return t=e,(r=[{key:"getIndent",value:function(){return(0,n.default)(this.indent,this.indentTypes.length)}},{key:"increaseTopLevel",value:function(){this.indentTypes.push(u)}},{key:"increaseBlockLevel",value:function(){this.indentTypes.push("block-level")}},{key:"decreaseTopLevel",value:function(){(0,o.default)(this.indentTypes)===u&&this.indentTypes.pop()}},{key:"decreaseBlockLevel",value:function(){for(;this.indentTypes.length>0&&this.indentTypes.pop()===u;);}},{key:"resetIndentation",value:function(){this.indentTypes=[]}}])&&a(t.prototype,r),e}();t.default=l,e.exports=t.default},9137:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(1025))&&n.__esModule?n:{default:n};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.level=0}var t,r;return t=e,(r=[{key:"beginIfPossible",value:function(e,t){0===this.level&&this.isInlineBlock(e,t)?this.level=1:this.level>0?this.level++:this.level=0}},{key:"end",value:function(){this.level--}},{key:"isActive",value:function(){return this.level>0}},{key:"isInlineBlock",value:function(e,t){for(var r=0,n=0,i=t;i<e.length;i++){var a=e[i];if((r+=a.value.length)>50)return!1;if(a.type===o.default.OPEN_PAREN)n++;else if(a.type===o.default.CLOSE_PAREN&&0==--n)return!0;if(this.isForbiddenToken(a))return!1}return!1}},{key:"isForbiddenToken",value:function(e){var t=e.type,r=e.value;return t===o.default.RESERVED_TOP_LEVEL||t===o.default.RESERVED_NEWLINE||t===o.default.COMMENT||t===o.default.BLOCK_COMMENT||";"===r}}])&&i(t.prototype,r),e}();t.default=a,e.exports=t.default},9429:(e,t)=>{"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t,this.index=0}var t,n;return t=e,(n=[{key:"get",value:function(e){var t=e.key,r=e.value;return this.params?t?this.params[t]:this.params[this.index++]:r}}])&&r(t.prototype,n),e}();t.default=n,e.exports=t.default},3202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(7969)),o=a(r(8472)),i=a(r(1025));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.WHITESPACE_REGEX=/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)/,this.NUMBER_REGEX=/^((\x2D[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?[0-9]+(\.[0-9]+)?|0x[0-9A-Fa-f]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|\x2D>>|\x2D>|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|:=|(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/,this.BLOCK_COMMENT_REGEX=/^(\/\*(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(t.lineCommentTypes),this.RESERVED_TOP_LEVEL_REGEX=this.createReservedWordRegex(t.reservedTopLevelWords),this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX=this.createReservedWordRegex(t.reservedTopLevelWordsNoIndent),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(t.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(t.reservedWords),this.WORD_REGEX=this.createWordRegex(t.specialWordChars),this.STRING_REGEX=this.createStringRegex(t.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(t.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(t.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(t.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(t.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(t.namedPlaceholderTypes,this.createStringPattern(t.stringTypes))}var t,r;return t=e,r=[{key:"createLineCommentRegex",value:function(e){return new RegExp("^((?:".concat(e.map((function(e){return(0,o.default)(e)})).join("|"),").*?(?:\r\n|\r|\n|$))"),"u")}},{key:"createReservedWordRegex",value:function(e){var t=e.join("|").replace(/ /g,"\\s+");return new RegExp("^(".concat(t,")\\b"),"iu")}},{key:"createWordRegex",value:function(){return new RegExp("^([\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}".concat((arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).join(""),"]+)"),"u")}},{key:"createStringRegex",value:function(e){return new RegExp("^("+this.createStringPattern(e)+")","u")}},{key:"createStringPattern",value:function(e){var t={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return e.map((function(e){return t[e]})).join("|")}},{key:"createParenRegex",value:function(e){var t=this;return new RegExp("^("+e.map((function(e){return t.escapeParen(e)})).join("|")+")","iu")}},{key:"escapeParen",value:function(e){return 1===e.length?(0,o.default)(e):"\\b"+e+"\\b"}},{key:"createPlaceholderRegex",value:function(e,t){if((0,n.default)(e))return!1;var r=e.map(o.default).join("|");return new RegExp("^((?:".concat(r,")(?:").concat(t,"))"),"u")}},{key:"tokenize",value:function(e){if(!e)return[];for(var t,r=[];e.length;)t=this.getNextToken(e,t),e=e.substring(t.value.length),r.push(t);return r}},{key:"getNextToken",value:function(e,t){return this.getWhitespaceToken(e)||this.getCommentToken(e)||this.getStringToken(e)||this.getOpenParenToken(e)||this.getCloseParenToken(e)||this.getPlaceholderToken(e)||this.getNumberToken(e)||this.getReservedWordToken(e,t)||this.getWordToken(e)||this.getOperatorToken(e)}},{key:"getWhitespaceToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.WHITESPACE,regex:this.WHITESPACE_REGEX})}},{key:"getCommentToken",value:function(e){return this.getLineCommentToken(e)||this.getBlockCommentToken(e)}},{key:"getLineCommentToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}},{key:"getBlockCommentToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}},{key:"getStringToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.STRING,regex:this.STRING_REGEX})}},{key:"getOpenParenToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}},{key:"getCloseParenToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}},{key:"getPlaceholderToken",value:function(e){return this.getIdentNamedPlaceholderToken(e)||this.getStringNamedPlaceholderToken(e)||this.getIndexedPlaceholderToken(e)}},{key:"getIdentNamedPlaceholderToken",value:function(e){return this.getPlaceholderTokenWithKey({input:e,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(e){return e.slice(1)}})}},{key:"getStringNamedPlaceholderToken",value:function(e){var t=this;return this.getPlaceholderTokenWithKey({input:e,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(e){return t.getEscapedPlaceholderKey({key:e.slice(2,-1),quoteChar:e.slice(-1)})}})}},{key:"getIndexedPlaceholderToken",value:function(e){return this.getPlaceholderTokenWithKey({input:e,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(e){return e.slice(1)}})}},{key:"getPlaceholderTokenWithKey",value:function(e){var t=e.input,r=e.regex,n=e.parseKey,o=this.getTokenOnFirstMatch({input:t,regex:r,type:i.default.PLACEHOLDER});return o&&(o.key=n(o.value)),o}},{key:"getEscapedPlaceholderKey",value:function(e){var t=e.key,r=e.quoteChar;return t.replace(new RegExp((0,o.default)("\\"+r),"gu"),r)}},{key:"getNumberToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.NUMBER,regex:this.NUMBER_REGEX})}},{key:"getOperatorToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.OPERATOR,regex:this.OPERATOR_REGEX})}},{key:"getReservedWordToken",value:function(e,t){if(!t||!t.value||"."!==t.value)return this.getTopLevelReservedToken(e)||this.getNewlineReservedToken(e)||this.getTopLevelReservedTokenNoIndent(e)||this.getPlainReservedToken(e)}},{key:"getTopLevelReservedToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.RESERVED_TOP_LEVEL,regex:this.RESERVED_TOP_LEVEL_REGEX})}},{key:"getNewlineReservedToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}},{key:"getTopLevelReservedTokenNoIndent",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.RESERVED_TOP_LEVEL_NO_INDENT,regex:this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX})}},{key:"getPlainReservedToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}},{key:"getWordToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.WORD,regex:this.WORD_REGEX})}},{key:"getTokenOnFirstMatch",value:function(e){var t=e.input,r=e.type,n=e.regex,o=t.match(n);if(o)return{type:r,value:o[1]}}}],r&&u(t.prototype,r),e}();t.default=l,e.exports=t.default},1025:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOP_LEVEL:"reserved-top-level",RESERVED_TOP_LEVEL_NO_INDENT:"reserved-top-level-no-indent",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"},e.exports=t.default},4377:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(9157)),o=i(r(3202));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u,l=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],s=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],c=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],f=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfg=t}var t,r;return t=e,(r=[{key:"format",value:function(e){return u||(u=new o.default({reservedWords:l,reservedTopLevelWords:s,reservedNewlineWords:f,reservedTopLevelWordsNoIndent:c,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),new n.default(this.cfg,u).format(e)}}])&&a(t.prototype,r),e}();t.default=d,e.exports=t.default},9445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(9157)),o=i(r(3202));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u,l=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],s=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],c=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],f=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfg=t}var t,r;return t=e,(r=[{key:"format",value:function(e){return u||(u=new o.default({reservedWords:l,reservedTopLevelWords:s,reservedNewlineWords:f,reservedTopLevelWordsNoIndent:c,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),new n.default(this.cfg,u).format(e)}}])&&a(t.prototype,r),e}();t.default=d,e.exports=t.default},7881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(9157)),o=a(r(3202)),i=a(r(1025));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l,s=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BREADTH","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DEPTH","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","END","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SEARCH","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],c=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UPDATE","VALUES","WHERE"],f=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],d=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],p=function(e,t){if(e.type===i.default.RESERVED_TOP_LEVEL&&"SET"===e.value&&"BY"===t.value)return e.type=i.default.RESERVED,e},v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfg=t}var t,r;return t=e,(r=[{key:"format",value:function(e){return l||(l=new o.default({reservedWords:s,reservedTopLevelWords:c,reservedNewlineWords:d,reservedTopLevelWordsNoIndent:f,stringTypes:['""',"N''","''","``"],openParens:["(","CASE","BEGIN"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new n.default(this.cfg,l,p).format(e)}}])&&u(t.prototype,r),e}();t.default=v,e.exports=t.default},1432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(9157)),o=i(r(3202));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u,l=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],s=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],c=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],f=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfg=t}var t,r;return t=e,(r=[{key:"format",value:function(e){return u||(u=new o.default({reservedWords:l,reservedTopLevelWords:s,reservedNewlineWords:f,reservedTopLevelWordsNoIndent:c,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),new n.default(this.cfg,u).format(e)}}])&&a(t.prototype,r),e}();t.default=d,e.exports=t.default},7409:(e,t,r)=>{"use strict";t.Ay=void 0;var n=u(r(4377)),o=u(r(9445)),i=u(r(7881)),a=u(r(1432));function u(e){return e&&e.__esModule?e:{default:e}}var l={format:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.language){case"db2":return new n.default(t).format(e);case"n1ql":return new o.default(t).format(e);case"pl/sql":return new i.default(t).format(e);case"sql":case void 0:return new a.default(t).format(e);default:throw Error("Unsupported SQL dialect: ".concat(t.language))}}};t.Ay=l},358:(e,t,r)=>{e.exports=r(3231)},3231:(e,t)=>{var r=t,n=/`/g,o=/\./g,i=/[\0\b\t\n\r\x1a\"\'\\]/g,a={"\0":"\\0","\b":"\\b","\t":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};function u(e){for(var t,r=i.lastIndex=0,n="";t=i.exec(e);)n+=e.slice(r,t.index)+a[t[0]],r=i.lastIndex;return 0===r?"'"+e+"'":r<e.length?"'"+n+e.slice(r)+"'":"'"+n+"'"}function l(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e}r.escapeId=function(e,t){if(Array.isArray(e)){for(var i="",a=0;a<e.length;a++)i+=(0===a?"":", ")+r.escapeId(e[a],t);return i}return t?"`"+String(e).replace(n,"``")+"`":"`"+String(e).replace(n,"``").replace(o,"`.`")+"`"},r.escape=function(e,t,n){if(null==e)return"NULL";switch(typeof e){case"boolean":return e?"true":"false";case"number":return e+"";case"object":return"[object Date]"===Object.prototype.toString.call(e)?r.dateToString(e,n||"local"):Array.isArray(e)?r.arrayToList(e,n):Buffer.isBuffer(e)?r.bufferToString(e):"function"==typeof e.toSqlString?String(e.toSqlString()):t?u(e.toString()):r.objectToValues(e,n);default:return u(e)}},r.arrayToList=function(e,t){for(var n="",o=0;o<e.length;o++){var i=e[o];Array.isArray(i)?n+=(0===o?"":", ")+"("+r.arrayToList(i,t)+")":n+=(0===o?"":", ")+r.escape(i,!0,t)}return n},r.format=function(e,t,n,o){if(null==t)return e;Array.isArray(t)||(t=[t]);for(var i,a=0,u=/\?+/g,l="",s=0;s<t.length&&(i=u.exec(e));){var c=i[0].length;if(!(c>2)){var f=2===c?r.escapeId(t[s]):r.escape(t[s],n,o);l+=e.slice(a,i.index)+f,a=u.lastIndex,s++}}return 0===a?e:a<e.length?l+e.slice(a):l},r.dateToString=function(e,t){var r,n,o,i,a,s,c,f=new Date(e);if(isNaN(f.getTime()))return"NULL";if("local"===t)r=f.getFullYear(),n=f.getMonth()+1,o=f.getDate(),i=f.getHours(),a=f.getMinutes(),s=f.getSeconds(),c=f.getMilliseconds();else{var d=function(e){if("Z"===e)return 0;var t=e.match(/([\+\-\s])(\d\d):?(\d\d)?/);return!!t&&("-"===t[1]?-1:1)*(parseInt(t[2],10)+(t[3]?parseInt(t[3],10):0)/60)*60}(t);!1!==d&&0!==d&&f.setTime(f.getTime()+6e4*d),r=f.getUTCFullYear(),n=f.getUTCMonth()+1,o=f.getUTCDate(),i=f.getUTCHours(),a=f.getUTCMinutes(),s=f.getUTCSeconds(),c=f.getUTCMilliseconds()}return u(l(r,4)+"-"+l(n,2)+"-"+l(o,2)+" "+l(i,2)+":"+l(a,2)+":"+l(s,2)+"."+l(c,3))},r.bufferToString=function(e){return"X"+u(e.toString("hex"))},r.objectToValues=function(e,t){var n="";for(var o in e){var i=e[o];"function"!=typeof i&&(n+=(0===n.length?"":", ")+r.escapeId(o)+" = "+r.escape(i,!0,t))}return n},r.raw=function(e){if("string"!=typeof e)throw new TypeError("argument sql must be a string");return{toSqlString:function(){return e}}}},9953:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var n=r(8531);const o=()=>!!n.config.featureToggles.sqlDatasourceDatabaseSelection},136:(e,t,r)=>{"use strict";r.d(t,{T:()=>u});var n=r(624),o=r(9453),i=r(3277);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){let t=(null==e?void 0:e.editorMode)||n.lX.Builder;var r;void 0===(null==e?void 0:e.editorMode)&&void 0!==(null==e?void 0:e.rawSql)&&(t=n.lX.Code);const u=(l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}({},e),s=null!=(s={refId:(null==e?void 0:e.refId)||"A",format:void 0!==(null==e?void 0:e.format)?e.format:o.gv.Table,rawSql:(null==e?void 0:e.rawSql)||"",editorMode:t,sql:null!==(r=null==e?void 0:e.sql)&&void 0!==r?r:{columns:[(0,i.JD)()],groupBy:[(0,i.xG)()],limit:50}})?s:{},Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(s)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(s)).forEach((function(e){Object.defineProperty(l,e,Object.getOwnPropertyDescriptor(s,e))})),l);var l,s;return u}},6703:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,_:()=>o});var n=function(e){return e.String="string",e}({}),o=function(e){return e.Property="property",e.Operator="operator",e.Or="or",e.And="and",e.GroupBy="groupBy",e.Function="function",e.FunctionParameter="functionParameter",e}({})},9453:(e,t,r)=>{"use strict";r.d(t,{cO:()=>i,gv:()=>o,zL:()=>a});var n=r(7781),o=function(e){return e.Timeseries="time_series",e.Table="table",e}({});const i=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],a=null!==n.toOption&&void 0!==n.toOption?n.toOption:e=>({label:e,value:e})},3031:(e,t,r)=>{"use strict";r.d(t,{s:()=>o});var n=r(7409);function o(e){return n.Ay.format(e).replace(/(\$ \{ .* \})|(\$ __)|(\$ \w+)/g,(e=>e.replace(/\s/g,"")))}},3277:(e,t,r)=>{"use strict";r.d(t,{JD:()=>s,Kj:()=>l,YW:()=>a,oF:()=>i,oG:()=>c,xG:()=>u});var n=r(7781),o=r(6703);function i(e){return`SELECT ${e.map((e=>{let t="";var r;if(e.name&&e.alias)t+=`${e.name}(${null===(r=e.parameters)||void 0===r?void 0:r.map((e=>`${e.name}`))}) AS ${e.alias}`;else if(e.name){var n;t+=`${e.name}(${null===(n=e.parameters)||void 0===n?void 0:n.map((e=>`${e.name}`))})`}else if(e.alias){var o;t+=`${null===(o=e.parameters)||void 0===o?void 0:o.map((e=>`${e.name}`))} AS ${e.alias}`}else{var i;t+=`${null===(i=e.parameters)||void 0===i?void 0:i.map((e=>`${e.name}`))}`}return t})).join(", ")} `}const a=e=>{if(!e)return!1;const t=e.some((e=>{var t,r;return(null===(t=e.parameters)||void 0===t?void 0:t.length)||(null===(r=e.parameters)||void 0===r?void 0:r.some((e=>e.name)))})),r=e.some((e=>e.name));return t||r};function u(e){return{type:o._.GroupBy,property:{type:o.D.String,name:e}}}function l(e){return{type:o._.Property,property:{type:o.D.String,name:e}}}function s(e){return{type:o._.Function,name:e,parameters:[]}}function c(e){return(null==e?void 0:e.name)?(0,n.toOption)(e.name):null}},6089:e=>{"use strict";e.exports=r},7781:t=>{"use strict";t.exports=e},8531:e=>{"use strict";e.exports=a},2007:e=>{"use strict";e.exports=n},3241:e=>{"use strict";e.exports=u},2468:e=>{"use strict";e.exports=l},5959:e=>{"use strict";e.exports=t},200:e=>{"use strict";e.exports=c},7694:e=>{"use strict";e.exports=s},1269:e=>{"use strict";e.exports=o},3059:e=>{"use strict";e.exports=i},3333:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},1957:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},5975:(e,t,r)=>{var n=r(3333);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4749:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},1015:e=>{function t(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=e.apply(r,n);function u(e){t(a,o,i,u,l,"next",e)}function l(e){t(a,o,i,u,l,"throw",e)}u(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},945:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},5849:(e,t,r)=>{var n=r(6902);function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}e.exports=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},7487:(e,t,r)=>{var n=r(6902);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},9252:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6681:(e,t,r)=>{var n=r(7850);function o(){return e.exports=o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=n(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports,o.apply(null,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},2030:e=>{function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},9281:(e,t,r)=>{var n=r(8562);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},1956:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6217:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8446:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}},e.exports.__esModule=!0,e.exports.default=e.exports},1470:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8451:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},9473:(e,t,r)=>{var n=r(55);e.exports=function(e,t){if(null==e)return{};var r,o,i=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},55:e=>{e.exports=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r},e.exports.__esModule=!0,e.exports.default=e.exports},4066:(e,t,r)=>{var n=r(5992).default,o=r(4749);e.exports=function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8911:(e,t,r)=>{var n=r(5992).default;function o(){"use strict";e.exports=o=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},i=Object.prototype,a=i.hasOwnProperty,u=Object.defineProperty||function(e,t,r){e[t]=r.value},l="function"==typeof Symbol?Symbol:{},s=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",f=l.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var o=t&&t.prototype instanceof E?t:E,i=Object.create(o.prototype),a=new A(n||[]);return u(i,"_invoke",{value:L(e,r,a)}),i}function v(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=p;var g="suspendedStart",h="suspendedYield",y="executing",m="completed",O={};function E(){}function b(){}function _(){}var S={};d(S,s,(function(){return this}));var T=Object.getPrototypeOf,R=T&&T(T(x([])));R&&R!==i&&a.call(R,s)&&(S=R);var C=_.prototype=E.prototype=Object.create(S);function P(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,i,u,l){var s=v(e[o],e,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,u,l)}),(function(e){r("throw",e,u,l)})):t.resolve(f).then((function(e){c.value=e,u(c)}),(function(e){return r("throw",e,u,l)}))}l(s.arg)}var o;u(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}})}function L(e,r,n){var o=g;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var l=w(u,n);if(l){if(l===O)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===g)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=v(e,r,n);if("normal"===s.type){if(o=n.done?m:h,s.arg===O)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function w(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,w(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),O;var i=v(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,O;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,O):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,O)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function x(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(a.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=_,u(C,"constructor",{value:_,configurable:!0}),u(_,"constructor",{value:b,configurable:!0}),b.displayName=d(_,f,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,d(e,f,"GeneratorFunction")),e.prototype=Object.create(C),e},r.awrap=function(e){return{__await:e}},P(j.prototype),d(j.prototype,c,(function(){return this})),r.AsyncIterator=j,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new j(p(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(C),d(C,f,"Generator"),d(C,s,(function(){return this})),d(C,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=x,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,O):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:x(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),O}},r}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},8562:e=>{function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7033:(e,t,r)=>{var n=r(1957),o=r(8446),i=r(4220),a=r(1470);e.exports=function(e,t){return n(e)||o(e,t)||i(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},7850:(e,t,r)=>{var n=r(2030);e.exports=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},7747:(e,t,r)=>{var n=r(1957),o=r(6217),i=r(4220),a=r(1470);e.exports=function(e){return n(e)||o(e)||i(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},2409:(e,t,r)=>{var n=r(5975),o=r(6217),i=r(4220),a=r(8451);e.exports=function(e){return n(e)||o(e)||i(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},9115:(e,t,r)=>{var n=r(5992).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6902:(e,t,r)=>{var n=r(5992).default,o=r(9115);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},5992:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4220:(e,t,r)=>{var n=r(3333);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},6834:(e,t,r)=>{var n=r(8911)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},2584:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=a(e,i(r)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=a(t,r));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},5910:(e,t,r)=>{"use strict";r.d(t,{C:()=>i});var n=r(5959),o=r(2007);r(7781);const i=({children:e,wrap:t=!0,...r})=>{var i,a;return n.createElement(o.Stack,{wrap:t?"wrap":void 0,direction:null!=(i=r.direction)?i:"row",gap:null!=(a=r.gap)?a:2,...r},e)}},624:(e,t,r)=>{"use strict";r.d(t,{lX:()=>o}),r(429);var n=r(7781),o=(r(3241),r(2007),r(5959),r(8531),(e=>(e.Builder="builder",e.Code="code",e))(o||{}));n.toOption},3247:(e,t,r)=>{"use strict";r.d(t,{N:()=>a}),r(2007);var n=r(8056);r(7781);const o="column",i=[{id:"$__timeFilter(dateColumn)",name:"$__timeFilter(dateColumn)",text:"$__timeFilter",args:[o],type:n.hh.Filter,description:"Will be replaced by a time range filter using the specified column name. For example, dateColumn BETWEEN FROM_UNIXTIME(1494410783) AND FROM_UNIXTIME(1494410983)"},{id:"$__timeFrom()",name:"$__timeFrom()",text:"$__timeFrom",args:[],type:n.hh.Filter,description:"Will be replaced by the start of the currently active time selection. For example, FROM_UNIXTIME(1494410783)"},{id:"$__timeTo()",name:"$__timeTo()",text:"$__timeTo",args:[],type:n.hh.Filter,description:"Will be replaced by the end of the currently active time selection. For example, FROM_UNIXTIME(1494410983)"},{id:"$__timeGroup(dateColumn, '5m')",name:"$__timeGroup(dateColumn, '5m')",text:"$__timeGroup",args:[o,"'5m'"],type:n.hh.Value,description:"Will be replaced by an expression usable in GROUP BY clause. For example, *cast(cast(UNIX_TIMESTAMP(dateColumn)/(300) as signed)*300 as signed),*"},{id:"$__table",name:"$__table",text:"$__table",args:[],type:n.hh.Table,description:"Will be replaced by the query table."},{id:"$__column",name:"$__column",text:"$__column",args:[],type:n.hh.Column,description:"Will be replaced by the query column."}];function a(e,t){var r,o,a;const u={triggerCharacters:["."," ","$",",","(","'"]};t&&Array.isArray(t.builtinFunctions)&&(u.supportedFunctions=()=>t.builtinFunctions.map((e=>({id:e,name:e}))));const l=[];return(null==(r=null==t?void 0:t.comparisonOperators)?void 0:r.length)&&l.push(...t.comparisonOperators.map((e=>({id:e.toLocaleLowerCase(),operator:e,type:n.hu.Comparison})))),t.logicalOperators=null!=(o=t.logicalOperators)?o:t.operators,(null==(a=null==t?void 0:t.logicalOperators)?void 0:a.length)&&l.push(...t.logicalOperators.map((e=>({id:e.toLocaleLowerCase(),operator:e,type:n.hu.Logical})))),u.supportedOperators=()=>l,u.supportedMacros=()=>i,u}},8056:(e,t,r)=>{"use strict";r.d(t,{Io:()=>s,X7:()=>a,_E:()=>c,hh:()=>o,hu:()=>n,ks:()=>i,mY:()=>l,ng:()=>u}),r(2007),r(7781);var n=(e=>(e[e.Comparison=0]="Comparison",e[e.Logical=1]="Logical",e))(n||{}),o=(e=>(e[e.Value=0]="Value",e[e.Filter=1]="Filter",e[e.Group=2]="Group",e[e.Column=3]="Column",e[e.Table=4]="Table",e))(o||{}),i=(e=>(e.Parenthesis="delimiter.parenthesis.sql",e.Whitespace="white.sql",e.Keyword="keyword.sql",e.Delimiter="delimiter.sql",e.Operator="operator.sql",e.Identifier="identifier.sql",e.IdentifierQuote="identifier.quote.sql",e.Type="type.sql",e.Function="predefined.sql",e.Number="number.sql",e.String="string.sql",e.Variable="variable.sql",e))(i||{}),a=(e=>(e.Unknown="unknown",e.SelectKeyword="selectKeyword",e.WithKeyword="withKeyword",e.AfterSelectKeyword="afterSelectKeyword",e.AfterSelectArguments="afterSelectArguments",e.AfterSelectFuncFirstArgument="afterSelectFuncFirstArgument",e.SelectAlias="selectAlias",e.AfterFromKeyword="afterFromKeyword",e.AfterTable="afterTable",e.SchemaFuncFirstArgument="schemaFuncFirstArgument",e.SchemaFuncExtraArgument="schemaFuncExtraArgument",e.FromKeyword="fromKeyword",e.AfterFrom="afterFrom",e.WhereKeyword="whereKeyword",e.WhereComparisonOperator="whereComparisonOperator",e.WhereValue="whereValue",e.AfterWhereFunctionArgument="afterWhereFunctionArgument",e.AfterGroupByFunctionArgument="afterGroupByFunctionArgument",e.AfterWhereValue="afterWhereValue",e.AfterGroupByKeywords="afterGroupByKeywords",e.AfterGroupBy="afterGroupBy",e.AfterOrderByKeywords="afterOrderByKeywords",e.AfterOrderByFunction="afterOrderByFunction",e.AfterOrderByDirection="afterOrderByDirection",e.AfterIsOperator="afterIsOperator",e.AfterIsNotOperator="afterIsNotOperator",e.AfterSchema="afterSchema",e))(a||{}),u=(e=>(e.Schemas="schemas",e.Tables="tables",e.Columns="columns",e.SelectKeyword="selectKeyword",e.WithKeyword="withKeyword",e.FunctionsWithArguments="functionsWithArguments",e.FromKeyword="fromKeyword",e.WhereKeyword="whereKeyword",e.GroupByKeywords="groupByKeywords",e.OrderByKeywords="orderByKeywords",e.FunctionsWithoutArguments="functionsWithoutArguments",e.LimitKeyword="limitKeyword",e.SortOrderDirectionKeyword="sortOrderDirectionKeyword",e.ComparisonOperators="comparisonOperators",e.LogicalOperators="logicalOperators",e.SelectMacro="selectMacro",e.TableMacro="tableMacro",e.FilterMacro="filterMacro",e.GroupMacro="groupMacro",e.BoolValues="boolValues",e.NullValue="nullValue",e.NotKeyword="notKeyword",e.TemplateVariables="templateVariables",e.StarWildCard="starWildCard",e))(u||{}),l=(e=>(e.High="a",e.MediumHigh="d",e.Medium="g",e.MediumLow="k",e.Low="q",e))(l||{}),s=(e=>(e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet",e))(s||{}),c=(e=>(e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet",e))(c||{})},6373:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});const n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o;const i=new Uint8Array(16),a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));const u=function(e,t,r){if(n.randomUUID&&!t&&!e)return n.randomUUID();const u=(e=e||{}).random??e.rng?.()??function(){if(!o){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o=crypto.getRandomValues.bind(crypto)}return o(i)}();if(u.length<16)throw new Error("Random bytes length must be >= 16");if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t){if((r=r||0)<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=u[e];return t}return function(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}(u)}}},v={};function g(e){var t=v[e];if(void 0!==t)return t.exports;var r=v[e]={id:e,loaded:!1,exports:{}};return p[e].call(r.exports,r,r.exports,g),r.loaded=!0,r.exports}g.m=p,g.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return g.d(t,{a:t}),t},g.d=(e,t)=>{for(var r in t)g.o(t,r)&&!g.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},g.f={},g.e=e=>Promise.all(Object.keys(g.f).reduce(((t,r)=>(g.f[r](e,t),t)),[])),g.u=e=>(168===e?"sql-query-editor":e)+".js",g.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),g.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),f={},d="grafana-postgresql-datasource:",g.l=(e,t,r,n)=>{if(f[e])f[e].push(t);else{var o,i;if(void 0!==r)for(var a=document.getElementsByTagName("script"),u=0;u<a.length;u++){var l=a[u];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==d+r){o=l;break}}o||(i=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,g.nc&&o.setAttribute("nonce",g.nc),o.setAttribute("data-webpack",d+r),o.src=e),f[e]=[t];var s=(t,r)=>{o.onerror=o.onload=null,clearTimeout(c);var n=f[e];if(delete f[e],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(r))),t)return t(r)},c=setTimeout(s.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=s.bind(null,o.onerror),o.onload=s.bind(null,o.onload),i&&document.head.appendChild(o)}},g.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),g.p="public/plugins/grafana-postgresql-datasource/",(()=>{var e={231:0};g.f.j=(t,r)=>{var n=g.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise(((r,o)=>n=e[t]=[r,o]));r.push(n[2]=o);var i=g.p+g.u(t),a=new Error;g.l(i,(r=>{if(g.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,n[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,o,[i,a,u]=r,l=0;if(i.some((t=>0!==e[t]))){for(n in a)g.o(a,n)&&(g.m[n]=a[n]);u&&u(g)}for(t&&t(r);l<i.length;l++)o=i[l],g.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=globalThis.webpackChunkgrafana_postgresql_datasource=globalThis.webpackChunkgrafana_postgresql_datasource||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var h={};return(()=>{"use strict";g.r(h),g.d(h,{plugin:()=>we});var e=g(7781),t=g(9728),r=g(6089),n=g(2007);function o(e){return{ulPadding:(0,r.css)({margin:e.spacing(1,0),paddingLeft:e.spacing(5)})}}var i=g(9453);const a=[{name:"AVG"},{name:"COUNT"},{name:"MAX"},{name:"MIN"},{name:"SUM"}],u={name:"Interval",required:!0,options:()=>Promise.resolve([{label:"$__interval",value:"$__interval"}])},l={name:"Fill",required:!1,options:()=>Promise.resolve([{label:"0",value:"0"},{label:"NULL",value:"NULL"},{label:"previous",value:"previous"}])},s=e=>[{name:"$__timeGroup",description:"Time grouping function",parameters:[e,u,l]},{name:"$__timeGroupAlias",description:"Time grouping function with time as alias",parameters:[e,u,l]},{name:"$__time",description:"An expression to rename the column to time",parameters:[e]},{name:"$__timeEpoch",parameters:[e]},{name:"$__unixEpochGroup",parameters:[e,u,l]},{name:"$__unixEpochGroupAlias",parameters:[e,u,l]}],c=["$__time","$__timeEpoch","$__timeFilter","$__timeFrom","$__timeTo","$__timeGroup","$__timeGroupAlias","$__unixEpochFilter","$__unixEpochNanoFilter","$__unixEpochNanoFrom","$__unixEpochNanoTo","$__unixEpochGroup","$__unixEpochGroupAlias"];var f=g(1269),d=g(3059),p=g(624),v=g(8531),y=g(3241);class m{transformMetricFindResponse(e){const t=[],r=e.fields.find((e=>"__text"===e.name)),n=e.fields.find((e=>"__value"===e.name));if(r&&n)for(let e=0;e<r.values.length;e++)t.push({text:""+r.values[e],value:""+n.values[e]});else for(const r of e.fields)for(const e of r.values)t.push({text:e});return(0,y.uniqBy)(t,"text")}}var O=g(5959);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){E(e,t,r[t])}))}return e}const _=(0,O.lazy)((()=>Promise.all([g.e(131),g.e(168)]).then(g.bind(g,3452))));function S(e){const r=(0,n.useStyles2)(T);return(0,t.jsx)(O.Suspense,{fallback:(0,t.jsx)(n.LoadingPlaceholder,{text:"Loading editor",className:r.container}),children:(0,t.jsx)(_,b({},e))})}const T=e=>({container:(0,r.css)({marginBottom:"unset",marginLeft:e.spacing(1)})});var R=g(136);function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){C(e,t,r[t])}))}return e}function j(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function L(e){const t="string"==typeof e.rawQuery?e.rawQuery:null;if(!t)return e;var r;const n=(0,R.T)(j(P({refId:"Annotation"},null!==(r=e.target)&&void 0!==r?r:{}),{rawSql:t}));return j(P({},e),{rawQuery:void 0,workspace:void 0,subscription:void 0,queryType:void 0,target:n})}var w=g(9953);function I(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){I(i,n,o,a,u,"next",e)}function u(e){I(i,n,o,a,u,"throw",e)}a(void 0)}))}}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){A(e,t,r[t])}))}return e}function F(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}class D extends v.DataSourceWithBackend{getResponseParser(){return this.responseParser}interpolateVariablesInQueries(e,t){let r=e;return e&&e.length>0&&(r=e.map((e=>F(x({},e),{datasource:this.getRef(),rawSql:this.templateSrv.replace(e.rawSql,t,this.interpolateVariable),rawQuery:!0})))),r}filterQuery(e){return!e.hide}applyTemplateVariables(e,t){return{refId:e.refId,datasource:this.getRef(),rawSql:this.templateSrv.replace(e.rawSql,t,this.interpolateVariable),format:e.format}}query(t){if((0,w.C)()){const e=this.checkForDatabaseIssue(t);if(e){const t=new Error(e);return(0,f.throwError)((()=>t))}}return t.targets.forEach((r=>{var n;t.app!==e.CoreApp.Dashboard&&t.app!==e.CoreApp.PanelViewer&&(0,v.reportInteraction)("grafana_sql_query_executed",{datasource:null===(n=r.datasource)||void 0===n?void 0:n.type,editorMode:r.editorMode,format:r.format,app:t.app})})),super.query(t)}checkForDatabaseIssue(t){if("postgres"===this.type&&!this.preconfiguredDatabase)return"You do not currently have a default database configured for this data source. Postgres requires a default\n             database with which to connect. Please configure one through the Data Sources Configuration page, or if you\n             are using a provisioning file, update that configuration file with a default database.";if(t.app!==e.CoreApp.Explore&&this.preconfiguredDatabase)for(const e of t.targets)if(e.editorMode===p.lX.Builder&&e.dataset!==this.preconfiguredDatabase)return"The configuration for this panel's data source has been modified. The previous database used in this panel's\n                   saved query is no longer available. Please update the query to use the new database option.\n                   Previous query parameters will be preserved until the query is updated."}metricFindQuery(t,r){var n=this;return N((function*(){const o=null==r?void 0:r.range;if(null==o)return[];let a="tempvar";r&&r.variable&&r.variable.name&&(a=r.variable.name);const u=x({},null==r?void 0:r.scopedVars,(0,e.getSearchFilterScopedVar)({query:t,wildcardChar:"%",options:r})),l=n.templateSrv.replace(t,u,n.interpolateVariable),s={refId:a,datasource:n.getRef(),rawSql:l,format:i.gv.Table};let c;try{c=yield n.runMetaQuery(s,o)}catch(e){throw console.error(e),new Error("error when executing the sql query")}return n.getResponseParser().transformMetricFindResponse(c)}))()}runSql(t,r){var n=this;return N((function*(){const o=(0,e.getDefaultTimeRange)(),a=yield n.runMetaQuery({rawSql:t,format:i.gv.Table,refId:null==r?void 0:r.refId},o);return new e.DataFrameView(a)}))()}runMetaQuery(e,t){const r=e.refId||"meta",n=[F(x({},e),{datasource:e.datasource||this.getRef(),refId:r})];return(0,f.lastValueFrom)((0,v.getBackendSrv)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:t.from.valueOf().toString(),to:t.to.valueOf().toString(),queries:n},requestId:r}).pipe((0,d.map)((e=>{var t;return null!==(t=(0,v.toDataQueryResponse)(e,n).data[0])&&void 0!==t?t:{fields:[]}}))))}targetContainsTemplate(e){let t=e.rawSql;return c.forEach((e=>{t=(null==t?void 0:t.replace(e,""))||""})),this.templateSrv.containsTemplate(t)}constructor(e,t=(0,v.getTemplateSrv)()){super(e),A(this,"templateSrv",void 0),A(this,"id",void 0),A(this,"responseParser",void 0),A(this,"name",void 0),A(this,"interval",void 0),A(this,"db",void 0),A(this,"preconfiguredDatabase",void 0),A(this,"interpolateVariable",void 0),this.templateSrv=t,this.interpolateVariable=(e,t)=>"string"==typeof e?t.multi||t.includeAll?this.getQueryModel().quoteLiteral(e):String(e).replace(/'/g,"''"):"number"==typeof e?e:Array.isArray(e)?e.map((e=>this.getQueryModel().quoteLiteral(e))).join(","):e,this.name=e.name,this.responseParser=new m,this.id=e.id;const r=e.jsonData||{};var n;this.interval=r.timeInterval||"1m",this.db=this.getDB(),this.preconfiguredDatabase=null!==(n=r.database)&&void 0!==n?n:"",this.annotations={prepareAnnotation:L,QueryEditor:S}}}var k=g(3031);const M=({children:e,title:t,description:o,isCollapsible:i=!1,isInitiallyOpen:a=!0,kind:u="section",className:l})=>{const{colors:s,typography:c,spacing:f}=(0,n.useTheme2)(),[d,p]=(0,O.useState)(!i||a),v=d?"angle-up":"angle-down",g="sub-section"===u,h=`${d?"Collapse":"Expand"} section ${t}`,y={header:(0,r.css)({display:"flex",justifyContent:"space-between",alignItems:"center"}),title:(0,r.css)({margin:0}),subtitle:(0,r.css)({margin:0,fontWeight:c.fontWeightRegular}),descriptionText:(0,r.css)({marginTop:f(g?.25:.5),marginBottom:0,...c.bodySmall,color:s.text.secondary}),content:(0,r.css)({marginTop:f(2)})};return O.createElement("div",{className:l},O.createElement("div",{className:y.header},"section"===u?O.createElement("h3",{className:y.title},t):O.createElement("h6",{className:y.subtitle},t),i&&O.createElement(n.IconButton,{name:v,onClick:()=>p(!d),type:"button",size:"xl","aria-label":h})),o&&O.createElement("p",{className:y.descriptionText},o),d&&O.createElement("div",{className:y.content},e))},V=({children:e,...t})=>O.createElement(M,{...t,kind:"sub-section"},e);function U({value:e,defaultValue:r,onChange:o,width:i}){const[a,u]=(0,O.useState)(!1);return(0,t.jsx)(n.Input,{type:"number",placeholder:String(r),value:a?"":e,onChange:e=>{var t;if(""===(null===(t=e.currentTarget.value)||void 0===t?void 0:t.trim()))u(!0),o(r);else{u(!1);const t=Number(e.currentTarget.value);Number.isNaN(t)||o(t)}},width:i})}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){q(e,t,r[t])}))}return e}const G=e=>{const{onOptionsChange:r,options:o}=e,i=o.jsonData,a=void 0!==i.maxIdleConnsAuto&&i.maxIdleConnsAuto,u=e=>{const t=(n=W({},o),a=null!=(a={jsonData:W({},i,e)})?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(a)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})),n);var n,a;return r(t)},l=e=>t=>{u({[e]:t})};return(0,t.jsxs)(V,{title:"Connection limits",children:[(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(n.Stack,{gap:.5,children:[(0,t.jsx)("span",{children:"Max open"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsxs)("span",{children:["The maximum number of open connections to the database. If ",(0,t.jsx)("i",{children:"Max idle connections"})," is greater than 0 and the ",(0,t.jsx)("i",{children:"Max open connections"})," is less than ",(0,t.jsx)("i",{children:"Max idle connections"}),", then",(0,t.jsx)("i",{children:"Max idle connections"})," will be reduced to match the ",(0,t.jsx)("i",{children:"Max open connections"})," limit. If set to 0, there is no limit on the number of open connections."]}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(U,{value:i.maxOpenConns,defaultValue:v.config.sqlConnectionLimits.maxOpenConns,onChange:e=>{var t;t=e,u(a&&t?{maxOpenConns:t,maxIdleConns:t}:{maxOpenConns:t})},width:40})}),(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(n.Stack,{gap:.5,children:[(0,t.jsx)("span",{children:"Auto max idle"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsxs)("span",{children:["If enabled, automatically set the number of ",(0,t.jsx)("i",{children:"Maximum idle connections"})," to the same value as",(0,t.jsx)("i",{children:" Max open connections"}),". If the number of maximum open connections is not set it will be set to the default (",v.config.sqlConnectionLimits.maxIdleConns,")."]}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(n.Switch,{value:a,onChange:()=>{let e,t;a?(t=i.maxOpenConns,e=i.maxIdleConns):void 0!==i.maxOpenConns&&(t=i.maxOpenConns,e=i.maxOpenConns),u({maxIdleConnsAuto:!a,maxIdleConns:e,maxOpenConns:t})}})}),(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(n.Stack,{gap:.5,children:[(0,t.jsx)("span",{children:"Max idle"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsxs)("span",{children:["The maximum number of connections in the idle connection pool.If ",(0,t.jsx)("i",{children:"Max open connections"})," is greater than 0 but less than the ",(0,t.jsx)("i",{children:"Max idle connections"}),", then the ",(0,t.jsx)("i",{children:"Max idle connections"})," ","will be reduced to match the ",(0,t.jsx)("i",{children:"Max open connections"})," limit. If set to 0, no idle connections are retained."]}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:a?(0,t.jsx)(n.InlineLabel,{width:40,children:o.jsonData.maxIdleConns}):(0,t.jsx)(U,{value:i.maxIdleConns,defaultValue:v.config.sqlConnectionLimits.maxIdleConns,onChange:e=>{l("maxIdleConns")(e)},width:40})}),(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(n.Stack,{gap:.5,children:[(0,t.jsx)("span",{children:"Max lifetime"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsx)("span",{children:"The maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever."}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(U,{value:i.connMaxLifetime,defaultValue:v.config.sqlConnectionLimits.connMaxLifetime,onChange:e=>{l("connMaxLifetime")(e)},width:40})})]})},B=()=>{const e=(0,n.useStyles2)(K);return(0,t.jsx)("hr",{className:e.horizontalDivider})},K=e=>({horizontalDivider:(0,r.css)({borderTop:`1px solid ${e.colors.border.weak}`,margin:e.spacing(2,0),width:"100%"})}),z=r=>{const{editorProps:o,showCACert:i,showKeyPair:a=!0}=r,{secureJsonFields:u}=o.options;return(0,t.jsxs)(t.Fragment,{children:[a?(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(n.Stack,{gap:.5,children:[(0,t.jsx)("span",{children:"TLS/SSL Client Certificate"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsx)("span",{children:"To authenticate with an TLS/SSL client certificate, provide the client certificate here."}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(n.SecretTextArea,{placeholder:"-----BEGIN CERTIFICATE-----",cols:45,rows:7,isConfigured:u&&u.tlsClientCert,onChange:(0,e.onUpdateDatasourceSecureJsonDataOption)(o,"tlsClientCert"),onReset:()=>{(0,e.updateDatasourcePluginResetOption)(o,"tlsClientCert")}})}):null,i?(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(n.Stack,{gap:.5,children:[(0,t.jsx)("span",{children:"TLS/SSL Root Certificate"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsx)("span",{children:"If the selected TLS/SSL mode requires a server root certificate, provide it here."}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(n.SecretTextArea,{placeholder:"-----BEGIN CERTIFICATE-----",cols:45,rows:7,isConfigured:u&&u.tlsCACert,onChange:(0,e.onUpdateDatasourceSecureJsonDataOption)(o,"tlsCACert"),onReset:()=>{(0,e.updateDatasourcePluginResetOption)(o,"tlsCACert")}})}):null,a?(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(n.Stack,{gap:.5,children:[(0,t.jsx)("span",{children:"TLS/SSL Client Key"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsx)("span",{children:"To authenticate with a client TLS/SSL certificate, provide the key here."}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(n.SecretTextArea,{placeholder:"-----BEGIN RSA PRIVATE KEY-----",cols:45,rows:7,isConfigured:u&&u.tlsClientKey,onChange:(0,e.onUpdateDatasourceSecureJsonDataOption)(o,"tlsClientKey"),onReset:()=>{(0,e.updateDatasourcePluginResetOption)(o,"tlsClientKey")}})}):null]})},H=(0,v.createMonitoringLogger)("features.plugins.sql");function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Y(e,t,r[t])}))}return e}function J(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}var X=g(3277);function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}g(6703);const Z={dialect:"postgres"},ee=({dataSourceName:e,docsLink:t,hasRequiredFields:o=!0,className:i})=>{const a=(0,n.useTheme2)(),u={container:(0,r.css)({p:{margin:0},"p + p":{marginTop:a.spacing(2)}}),text:(0,r.css)({...a.typography.body,color:a.colors.text.secondary,a:(0,r.css)({color:a.colors.text.link,textDecoration:"underline","&:hover":{textDecoration:"none"}})})};return O.createElement("div",{className:(0,r.cx)(u.container,i)},O.createElement("p",{className:u.text},"Before you can use the ",e," data source, you must configure it below or in the config file. For detailed instructions,"," ",O.createElement("a",{href:t,target:"_blank",rel:"noreferrer"},"view the documentation"),"."),o&&O.createElement("p",{className:u.text},O.createElement("i",null,"Fields marked with * are required")))},te=({children:e,...t})=>O.createElement(M,{...t,kind:"section"},e);var re=g(5910),ne=function(e){return e.disable="disable",e.require="require",e.verifyCA="verify-ca",e.verifyFull="verify-full",e}({}),oe=function(e){return e.filePath="file-path",e.fileContent="file-content",e}({});var ie=g(1510);const ae=g.n(ie)(),ue=function(e,t){!function(e,t,r){var n=(0,O.useRef)(void 0);n.current&&r(t,n.current)||(n.current=t),(0,O.useEffect)(e,n.current)}(e,t,ae)};var le=g(6373),se=function(e){return e.CSV="csv",e.Date="date",e.Distributed="distributed",e.DoubleQuote="doublequote",e.Glob="glob",e.HTML="html",e.JSON="json",e.Lucene="lucene",e.PercentEncode="percentencode",e.Pipe="pipe",e.QueryParam="queryparam",e.Raw="raw",e.Regex="regex",e.SQLString="sqlstring",e.SingleQuote="singlequote",e.Text="text",e.UriEncode="uriencode",e}({});function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class fe{interpolate(){var e;return(null===(e=this.templateSrv)||void 0===e?void 0:e.replace(this.target.rawSql,this.scopedVars,se.SQLString))||""}quoteLiteral(e){return"'"+e.replace(/'/g,"''")+"'"}constructor(e,t,r){ce(this,"target",void 0),ce(this,"templateSrv",void 0),ce(this,"scopedVars",void 0),this.target=(0,R.T)(e||{refId:"A"}),this.templateSrv=t,this.scopedVars=r}}var de=g(3247),pe=g(8056);function ve(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function ge(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ve(i,n,o,a,u,"next",e)}function u(e){ve(i,n,o,a,u,"throw",e)}a(void 0)}))}}function he(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ye=({getColumns:e,getTables:t})=>(r,n)=>{return o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){he(e,t,r[t])}))}return e}({},n&&(0,de.N)(r,n)),i=null!=(i={tables:{resolve:ge((function*(){return yield t.current()})),parseName:e=>{if(!e)return{table:""};let t=e,r=t.value;for(;t.next&&t.next.type!==pe.ks.Whitespace;)r+=t.next.value,t=t.next;return{table:r}}},columns:{resolve:function(){var t=ge((function*(t){return yield e.current({table:null==t?void 0:t.table,refId:"A"})}));return function(e){return t.apply(this,arguments)}}()}})?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(i)).forEach((function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})),o;var o,i};function me(){return(me=ge((function*(e,t){const r=yield e.fields(t);return r.length>0?r.map((e=>({name:e.value,type:e.value,description:e.value}))):[]}))).apply(this,arguments)}function Oe(){return(Oe=ge((function*(e){var t;return(yield null===(t=e.lookup)||void 0===t?void 0:t.call(e))||[]}))).apply(this,arguments)}function Ee(e){switch(e){case"boolean":return{raqbFieldType:"boolean",icon:"toggle-off"};case"bit":case"bit varying":case"character":case"character varying":case"text":default:return{raqbFieldType:"text",icon:"text"};case"smallint":case"integer":case"bigint":case"decimal":case"numeric":case"real":case"double precision":case"serial":case"bigserial":case"smallserial":return{raqbFieldType:"number",icon:"calculator-alt"};case"date":return{raqbFieldType:"date",icon:"clock-nine"};case"time":case"time with time zone":case"time without time zone":case"interval":return{raqbFieldType:"time",icon:"clock-nine"};case"timestamp":case"timestamp with time zone":case"timestamp without time zone":return{raqbFieldType:"datetime",icon:"clock-nine"}}}function be({sql:e,table:t}){var r,n,o,i;let a="";return e&&(0,X.YW)(e.columns)?(a+=(0,X.oF)(e.columns),t&&(a+=`FROM ${t} `),e.whereString&&(a+=`WHERE ${e.whereString} `),(null===(n=e.groupBy)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.property.name)&&(a+=`GROUP BY ${e.groupBy.map((e=>e.property.name)).filter((e=>!(0,y.isEmpty)(e))).join(", ")} `),(null===(o=e.orderBy)||void 0===o?void 0:o.property.name)&&(a+=`ORDER BY ${e.orderBy.property.name} `),(null===(i=e.orderBy)||void 0===i?void 0:i.property.name)&&e.orderByDirection&&(a+=`${e.orderByDirection} `),void 0!==e.limit&&e.limit>=0&&(a+=`LIMIT ${e.limit} `),a):a}function _e(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Se(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){_e(i,n,o,a,u,"next",e)}function u(e){_e(i,n,o,a,u,"throw",e)}a(void 0)}))}}function Te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Te(e,t,r[t])}))}return e}class Ce extends D{getQueryModel(e,t,r){return new fe(e,t,r)}getVersion(){var e=this;return Se((function*(){var t;const r=null===(t=(yield e.runSql("SELECT current_setting('server_version_num')::int/100 as version")).fields.version)||void 0===t?void 0:t.values;return r?r[0].toString():""}))()}getTimescaleDBVersion(){var e=this;return Se((function*(){var t;const r=null===(t=(yield e.runSql("SELECT extversion FROM pg_extension WHERE extname = 'timescaledb'")).fields.extversion)||void 0===t?void 0:t.values;if(r)return r[0]}))()}fetchTables(){var e=this;return Se((function*(){var t,r;return null!==(r=null===(t=(yield e.runSql("SELECT\n    CASE WHEN \n          quote_ident(table_schema) IN (\n          SELECT\n            CASE WHEN trim(s[i]) = '\"$user\"' THEN user ELSE trim(s[i]) END\n          FROM\n            generate_series(\n              array_lower(string_to_array(current_setting('search_path'),','),1),\n              array_upper(string_to_array(current_setting('search_path'),','),1)\n            ) as i,\n            string_to_array(current_setting('search_path'),',') s\n          )\n      THEN quote_ident(table_name)\n      ELSE quote_ident(table_schema) || '.' || quote_ident(table_name)\n    END AS \"table\"\n    FROM information_schema.tables\n    WHERE quote_ident(table_schema) NOT IN ('information_schema',\n                             'pg_catalog',\n                             '_timescaledb_cache',\n                             '_timescaledb_catalog',\n                             '_timescaledb_internal',\n                             '_timescaledb_config',\n                             'timescaledb_information',\n                             'timescaledb_experimental')\n    ORDER BY CASE WHEN \n          quote_ident(table_schema) IN (\n          SELECT\n            CASE WHEN trim(s[i]) = '\"$user\"' THEN user ELSE trim(s[i]) END\n          FROM\n            generate_series(\n              array_lower(string_to_array(current_setting('search_path'),','),1),\n              array_upper(string_to_array(current_setting('search_path'),','),1)\n            ) as i,\n            string_to_array(current_setting('search_path'),',') s\n          ) THEN 0 ELSE 1 END, 1",{refId:"tables"})).fields.table)||void 0===t?void 0:t.values.flat())&&void 0!==r?r:[]}))()}getSqlLanguageDefinition(e){if(void 0!==this.sqlLanguageDefinition)return this.sqlLanguageDefinition;const t={getColumns:{current:t=>function(e,t){return me.apply(this,arguments)}(e,t)},getTables:{current:()=>function(e){return Oe.apply(this,arguments)}(e)}};return this.sqlLanguageDefinition={id:"pgsql",completionProvider:ye(t),formatter:k.s},this.sqlLanguageDefinition}fetchFields(e){var t=this;return Se((function*(){const{table:r}=e;if(void 0===r)return[];const n=yield t.runSql(function(e){const t="'"+e.replace(/'/g,"''")+"'";return`SELECT quote_ident(column_name) AS "column", data_type AS "type"\n    FROM information_schema.columns\n    WHERE\n      CASE WHEN array_length(parse_ident(${t}),1) = 2\n        THEN quote_ident(table_schema) = (parse_ident(${t}))[1]\n          AND quote_ident(table_name) = (parse_ident(${t}))[2]\n        ELSE quote_ident(table_name) = ${t}\n          AND \n          quote_ident(table_schema) IN (\n          SELECT\n            CASE WHEN trim(s[i]) = '"$user"' THEN user ELSE trim(s[i]) END\n          FROM\n            generate_series(\n              array_lower(string_to_array(current_setting('search_path'),','),1),\n              array_upper(string_to_array(current_setting('search_path'),','),1)\n            ) as i,\n            string_to_array(current_setting('search_path'),',') s\n          )\n      END`}(r),{refId:`columns-${(0,le.A)()}`}),o=[];for(let e=0;e<n.length;e++){const t=n.fields.column.values[e],r=n.fields.type.values[e];o.push(Re({label:t,value:t,type:r},Ee(r)))}return o}))()}getDB(){if(void 0!==this.db)return this.db;var e=this;return{init:()=>Promise.resolve(!0),datasets:()=>Promise.resolve([]),tables:()=>this.fetchTables(),getEditorLanguageDefinition:()=>this.getSqlLanguageDefinition(this.db),fields:function(){var t=Se((function*(t){return(null==t?void 0:t.table)?e.fetchFields(t):[]}));return function(e){return t.apply(this,arguments)}}(),validateQuery:e=>Promise.resolve({isError:!1,isValid:!0,query:e,error:"",rawSql:e.rawSql}),dsID:()=>this.id,toRawSql:be,functions:()=>this.getFunctions(),lookup:Se((function*(){return(yield e.fetchTables()).map((e=>({name:e,completion:e})))}))}}constructor(e){super(e),Te(this,"sqlLanguageDefinition",void 0),Te(this,"getFunctions",(()=>{const e={name:"Column",required:!0,options:e=>this.fetchFields(e)};return[...s(e),...a.map((t=>{return r=Re({},t),n=null!=(n={parameters:[e]})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r;var r,n}))]}))}}function Pe(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Le=[{label:"9.0",value:900},{label:"9.1",value:901},{label:"9.2",value:902},{label:"9.3",value:903},{label:"9.4",value:904},{label:"9.5",value:905},{label:"9.6",value:906},{label:"10",value:1e3},{label:"11",value:1100},{label:"12",value:1200},{label:"13",value:1300},{label:"14",value:1400},{label:"15",value:1500}],we=new e.DataSourcePlugin(Ce).setQueryEditor((function(e){return(0,t.jsx)(S,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Q(e,t,r[t])}))}return e}({},e),n=null!=(n={queryHeaderProps:Z})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r));var r,n})).setQueryEditorHelp((function(){const e=(0,n.useStyles2)(o);return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"PostgreSQL cheat sheet"}),"Time series:",(0,t.jsxs)("ul",{className:e.ulPadding,children:[(0,t.jsxs)("li",{children:["return column named ",(0,t.jsx)("i",{children:"time"})," (UTC in seconds or timestamp)"]}),(0,t.jsx)("li",{children:"return column(s) with numeric datatype as values"})]}),"Optional:",(0,t.jsxs)("ul",{className:e.ulPadding,children:[(0,t.jsxs)("li",{children:["return column named ",(0,t.jsx)("i",{children:"metric"})," to represent the series name."]}),(0,t.jsx)("li",{children:"If multiple value columns are returned the metric column is used as prefix."}),(0,t.jsx)("li",{children:"If no column named metric is found the column name of the value column is used as series name"})]}),(0,t.jsx)("p",{children:"Resultsets of time series queries need to be sorted by time."}),"Table:",(0,t.jsx)("ul",{className:e.ulPadding,children:(0,t.jsx)("li",{children:"return any set of columns"})}),"Macros:",(0,t.jsxs)("ul",{className:e.ulPadding,children:[(0,t.jsx)("li",{children:'$__time(column) -> column as "time"'}),(0,t.jsx)("li",{children:'$__timeEpoch -> extract(epoch from column) as "time"'}),(0,t.jsx)("li",{children:"$__timeFilter(column) -> column BETWEEN '2017-04-21T05:01:17Z' AND '2017-04-21T05:01:17Z'"}),(0,t.jsx)("li",{children:"$__unixEpochFilter(column) -> column >= 1492750877 AND column <= 1492750877"}),(0,t.jsx)("li",{children:"$__unixEpochNanoFilter(column) -> column >= 1494410783152415214 AND column <= 1494497183142514872"}),(0,t.jsx)("li",{children:"$__timeGroup(column,'5m'[, fillvalue]) -> (extract(epoch from column)/300)::bigint*300 by setting fillvalue grafana will fill in missing values according to the interval fillvalue can be either a literal value, NULL or previous; previous will fill in the previous seen value or NULL if none has been seen yet"}),(0,t.jsx)("li",{children:"$__timeGroupAlias(column,'5m') -> (extract(epoch from column)/300)::bigint*300 AS \"time\""}),(0,t.jsx)("li",{children:"$__unixEpochGroup(column,'5m') -> floor(column/300)*300"}),(0,t.jsx)("li",{children:"$__unixEpochGroupAlias(column,'5m') -> floor(column/300)*300 AS \"time\""})]}),(0,t.jsx)("p",{children:"Example of group by and order by with $__timeGroup:"}),(0,t.jsx)("pre",{children:(0,t.jsxs)("code",{children:["SELECT $__timeGroup(date_time_col, '1h'), sum(value) as value ",(0,t.jsx)("br",{}),"FROM yourtable",(0,t.jsx)("br",{}),"GROUP BY time",(0,t.jsx)("br",{}),"ORDER BY time",(0,t.jsx)("br",{})]})}),"Or build your own conditionals using these macros which just return the values:",(0,t.jsxs)("ul",{className:e.ulPadding,children:[(0,t.jsx)("li",{children:"$__timeFrom() -> '2017-04-21T05:01:17Z'"}),(0,t.jsx)("li",{children:"$__timeTo() -> '2017-04-21T05:01:17Z'"}),(0,t.jsx)("li",{children:"$__unixEpochFrom() -> 1492750877"}),(0,t.jsx)("li",{children:"$__unixEpochTo() -> 1492750877"}),(0,t.jsx)("li",{children:"$__unixEpochNanoFrom() -> 1494410783152415214"}),(0,t.jsx)("li",{children:"$__unixEpochNanoTo() -> 1494497183142514872"})]})]})})).setConfigEditor((r=>{const[o,i]=(0,O.useState)(Le),[a,u]=(0,O.useState)(!0);(function({props:t,setVersionOptions:r}){const[n,o]=(0,O.useState)(!1),{options:i,onOptionsChange:a}=t;ue((()=>{const t=function(){var t,u=(t=function*(){if(n){const t=yield(0,v.getDataSourceSrv)().get(i.name);if(t instanceof Ce){const n=yield t.getVersion(),o=parseInt(n,10);o>=906&&!i.jsonData.timescaledb&&(yield t.getTimescaleDBVersion())&&(0,e.updateDatasourcePluginJsonDataOption)({options:i,onOptionsChange:a},"timescaledb",!0);const u=Math.trunc(o/100),l=o%100;let s=String(u);o<1e3&&(s=String(u)+"."+String(l)),Le.find((e=>e.value===o))||r((e=>[...e,{label:s,value:o}])),void 0!==i.jsonData.postgresVersion&&i.jsonData.postgresVersion===o||(0,e.updateDatasourcePluginJsonDataOption)({options:i,onOptionsChange:a},"postgresVersion",o)}}else{const t=yield(0,v.getBackendSrv)().put(`/api/datasources/${i.id}`,i);o(!0),(0,e.updateDatasourcePluginOption)({options:i,onOptionsChange:a},"version",t.datasource.version)}},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(e){Pe(i,n,o,a,u,"next",e)}function u(e){Pe(i,n,o,a,u,"throw",e)}a(void 0)}))});return function(){return u.apply(this,arguments)}}();(function(e){var t,r;return e.url&&e.jsonData.database&&e.user&&((null===(t=e.secureJsonData)||void 0===t?void 0:t.password)||(null===(r=e.secureJsonFields)||void 0===r?void 0:r.password))&&(e.jsonData.sslmode===ne.disable||e.jsonData.sslCertFile&&e.jsonData.sslKeyFile&&e.jsonData.sslRootCertFile)&&!e.jsonData.postgresVersion&&!e.readOnly})(i)&&t()}),[i,n,r])})({props:r,setVersionOptions:i}),function({onOptionsChange:e,options:t}){(0,O.useEffect)((()=>{const r=t.jsonData;let n=$({},t),o=!1;if(t.database&&(H.logDebug(`Migrating from options.database with value ${t.database} for ${t.name}`),n.database="",n.jsonData=J($({},r),{database:t.database}),o=!0),void 0===r.maxOpenConns&&void 0===r.maxIdleConns&&void 0===r.maxIdleConnsAuto){const{maxOpenConns:e,maxIdleConns:t}=v.config.sqlConnectionLimits;H.logDebug(`Setting default max open connections to ${e} and setting max idle connection to ${t}`),n.jsonData=J($({},n.jsonData),{maxOpenConns:e,maxIdleConns:t,maxIdleConnsAuto:!0}),o=!0}if(void 0===r.connMaxLifetime){const{connMaxLifetime:e}=v.config.sqlConnectionLimits;n.jsonData=J($({},n.jsonData),{connMaxLifetime:e}),o=!0}o&&e(n)}),[e,t])}(r);const{options:l,onOptionsChange:s}=r,c=l.jsonData,f=[{value:ne.disable,label:"disable"},{value:ne.require,label:"require"},{value:ne.verifyCA,label:"verify-ca"},{value:ne.verifyFull,label:"verify-full"}],d=[{value:oe.filePath,label:"File system path"},{value:oe.fileContent,label:"Certificate content"}],p=t=>n=>{(0,e.updateDatasourcePluginJsonDataOption)(r,t,n.value)},g=e=>t=>{s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){je(e,t,r[t])}))}return e}({},l,{[e]:t.currentTarget.value}))},h=40;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee,{dataSourceName:"Postgres",docsLink:"https://grafana.com/docs/grafana/latest/datasources/postgres/",hasRequiredFields:!0}),(0,t.jsx)(B,{}),(0,t.jsxs)(n.Collapse,{collapsible:!0,label:"User Permissions",isOpen:a,onToggle:()=>u((e=>!e)),children:["The database user should only be granted SELECT permissions on the specified database & tables you want to query. ",(0,t.jsx)("br",{}),"Grafana does not validate that queries are safe so queries can contain any SQL statement. For example, statements like ",(0,t.jsx)("code",{children:"DELETE FROM user;"})," and ",(0,t.jsx)("code",{children:"DROP TABLE user;"})," would be executed. ",(0,t.jsx)("br",{}),"To protect against this we ",(0,t.jsx)("strong",{children:"Highly"})," recommend you create a specific PostgreSQL user with restricted permissions. Check out the docs for more information."]}),(0,t.jsx)(B,{}),(0,t.jsxs)(te,{title:"Connection",children:[(0,t.jsx)(n.Field,{label:"Host URL",required:!0,children:(0,t.jsx)(n.Input,{width:h,name:"host",type:"text",value:l.url||"",placeholder:"localhost:5432",onChange:g("url")})}),(0,t.jsx)(n.Field,{label:"Database name",required:!0,children:(0,t.jsx)(n.Input,{width:h,name:"database",value:c.database||"",placeholder:"Database",onChange:(0,e.onUpdateDatasourceJsonDataOption)(r,"database")})})]}),(0,t.jsx)(B,{}),(0,t.jsxs)(te,{title:"Authentication",children:[(0,t.jsx)(n.Field,{label:"Username",required:!0,children:(0,t.jsx)(n.Input,{width:h,value:l.user||"",placeholder:"Username",onChange:g("user")})}),(0,t.jsx)(n.Field,{label:"Password",required:!0,children:(0,t.jsx)(n.SecretInput,{width:h,placeholder:"Password",isConfigured:l.secureJsonFields&&l.secureJsonFields.password,onReset:()=>{(0,e.updateDatasourcePluginResetOption)(r,"password")},onBlur:(0,e.onUpdateDatasourceSecureJsonDataOption)(r,"password")})}),(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(re.C,{gap:.5,children:[(0,t.jsx)("span",{children:"TLS/SSL Mode"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsx)("span",{children:"This option determines whether or with what priority a secure TLS/SSL TCP/IP connection will be negotiated with the server"}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(n.Select,{options:f,value:c.sslmode||ne.require,onChange:p("sslmode"),width:h})}),l.jsonData.sslmode!==ne.disable?(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(re.C,{gap:.5,children:[(0,t.jsx)("span",{children:"TLS/SSL Method"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsxs)("span",{children:["This option determines how TLS/SSL certifications are configured. Selecting"," ",(0,t.jsx)("i",{children:"File system path"})," will allow you to configure certificates by specifying paths to existing certificates on the local file system where Grafana is running. Be sure that the file is readable by the user executing the Grafana process.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"Selecting ",(0,t.jsx)("i",{children:"Certificate content"})," will allow you to configure certificates by specifying its content. The content will be stored encrypted in Grafana's database. When connecting to the database the certificates will be written as files to Grafana's configured data path on the local file system."]}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(n.Select,{options:d,value:c.tlsConfigurationMethod||oe.filePath,onChange:p("tlsConfigurationMethod"),width:h})}):null]}),c.sslmode!==ne.disable?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B,{}),(0,t.jsx)(te,{title:"TLS/SSL Auth Details",children:c.tlsConfigurationMethod===oe.fileContent?(0,t.jsx)(z,{showCACert:c.sslmode===ne.verifyCA||c.sslmode===ne.verifyFull,editorProps:r,labelWidth:h}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(re.C,{gap:.5,children:[(0,t.jsx)("span",{children:"TLS/SSL Root Certificate"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsx)("span",{children:"If the selected TLS/SSL mode requires a server root certificate, provide the path to the file here."}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(n.Input,{value:c.sslRootCertFile||"",onChange:(0,e.onUpdateDatasourceJsonDataOption)(r,"sslRootCertFile"),placeholder:"TLS/SSL root cert file",width:h})}),(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(re.C,{gap:.5,children:[(0,t.jsx)("span",{children:"TLS/SSL Client Certificate"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsx)("span",{children:"To authenticate with an TLS/SSL client certificate, provide the path to the file here. Be sure that the file is readable by the user executing the grafana process."}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(n.Input,{value:c.sslCertFile||"",onChange:(0,e.onUpdateDatasourceJsonDataOption)(r,"sslCertFile"),placeholder:"TLS/SSL client cert file",width:h})}),(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(re.C,{gap:.5,children:[(0,t.jsx)("span",{children:"TLS/SSL Client Key"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsxs)("span",{children:["To authenticate with a client TLS/SSL certificate, provide the path to the corresponding key file here. Be sure that the file is ",(0,t.jsx)("i",{children:"only"})," readable by the user executing the grafana process."]}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(n.Input,{value:c.sslKeyFile||"",onChange:(0,e.onUpdateDatasourceJsonDataOption)(r,"sslKeyFile"),placeholder:"TLS/SSL client key file",width:h})})]})})]}):null,(0,t.jsx)(B,{}),(0,t.jsxs)(te,{title:"Additional settings",isCollapsible:!0,children:[(0,t.jsxs)(V,{title:"PostgreSQL Options",children:[(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(re.C,{gap:.5,children:[(0,t.jsx)("span",{children:"Version"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsx)("span",{children:"This option controls what functions are available in the PostgreSQL query builder"}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(n.Select,{value:c.postgresVersion||903,onChange:p("postgresVersion"),options:o,width:h})}),(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(re.C,{gap:.5,children:[(0,t.jsx)("span",{children:"Min time interval"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsxs)("span",{children:["A lower limit for the auto group by time interval. Recommended to be set to write frequency, for example",(0,t.jsx)("code",{children:"1m"})," if your data is written every minute."]}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(n.Input,{placeholder:"1m",value:c.timeInterval||"",onChange:(0,e.onUpdateDatasourceJsonDataOption)(r,"timeInterval"),width:h})}),(0,t.jsx)(n.Field,{label:(0,t.jsx)(n.Label,{children:(0,t.jsxs)(re.C,{gap:.5,children:[(0,t.jsx)("span",{children:"TimescaleDB"}),(0,t.jsx)(n.Tooltip,{content:(0,t.jsxs)("span",{children:["TimescaleDB is a time-series database built as a PostgreSQL extension. If enabled, Grafana will use",(0,t.jsx)("code",{children:"time_bucket"})," in the ",(0,t.jsx)("code",{children:"$__timeGroup"})," macro and display TimescaleDB specific aggregate functions in the query builder."]}),children:(0,t.jsx)(n.Icon,{name:"info-circle",size:"sm"})})]})}),children:(0,t.jsx)(n.Switch,{value:c.timescaledb||!1,onChange:t=>{(0,e.updateDatasourcePluginJsonDataOption)(r,"timescaledb",t.currentTarget.checked)},width:h})})]}),(0,t.jsx)(G,{options:l,onOptionsChange:s}),v.config.secureSocksDSProxyEnabled&&(0,t.jsx)(n.SecureSocksProxySettings,{options:l,onOptionsChange:s})]})]})}))})(),h})()));
//# sourceMappingURL=module.js.map