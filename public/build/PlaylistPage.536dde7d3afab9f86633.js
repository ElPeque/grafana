"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1168],{70811:(Y,T,s)=>{s.d(T,{A:()=>B});var t=s(74848),o=s(96540),E=s(60484),y=s(22560),M=s(54594),k=s(89963);class B extends o.PureComponent{render(){const{searchQuery:O,linkButton:e,setSearchQuery:j,target:v,placeholder:C="Search by name or type",sortPicker:m}=this.props,g={href:e?.href,disabled:e?.disabled};return v&&(g.target=v),(0,t.jsxs)("div",{className:"page-action-bar",children:[(0,t.jsx)(E.I,{grow:!0,children:(0,t.jsx)(y.Z,{value:O,onChange:j,placeholder:C})}),m&&(0,t.jsx)(k.r,{onChange:m.onChange,value:m.value,getSortOptions:m.getSortOptions}),e&&(0,t.jsx)(M.z9,{...g,children:e.title})]})}}},92703:(Y,T,s)=>{s.r(T),s.d(T,{PlaylistPage:()=>Q,default:()=>rt});var t=s(74848),o=s(96540),E=s(16817),y=s(54594),M=s(59830),k=s(54731),B=s(65164),L=s(54122),O=s(70811),e=s(11817),j=s(61351),v=s(22803),C=s(29675),m=s(71815),g=s(70255),f=s(6210),H=s(43908),I=s(48583),G=s(81196),F=s(93407),R=s(56276),b=s(25356),U=s(44617),P=s(86489),$=s(60641),D=s(81942),J=s(34128),X=s(93604),w=s(25309);const q=({playlistUid:a,onDismiss:n})=>{const[i,r]=(0,o.useState)(!1),[d,u]=(0,o.useState)(!1),h=[{label:(0,e.t)("share-playlist.mode-normal","Normal"),value:!1},{label:(0,e.t)("share-playlist.mode-kiosk","Kiosk"),value:!0}],x={};i&&(x.kiosk=i),d&&(x.autofitpanels=!0);const p=F.kM.renderUrl(`${(0,w.P_)()}/play/${a}`,x);return(0,t.jsx)(b.a,{isOpen:!0,title:(0,e.t)("share-playlist.title","Share playlist"),onDismiss:n,children:(0,t.jsxs)(U.n,{children:[(0,t.jsx)(P.D,{label:(0,e.t)("share-playlist.mode","Mode"),children:(0,t.jsx)($.z,{value:i,options:h,onChange:r})}),(0,t.jsx)(P.D,{children:(0,t.jsx)(D.S,{label:(0,e.t)("share-playlist.checkbox-label","Autofit"),description:(0,e.t)("share-playlist.checkbox-description","Panel heights will be adjusted to fit screen size"),name:"autofix",value:d,onChange:c=>u(c.currentTarget.checked)})}),(0,t.jsx)(P.D,{label:(0,e.t)("share-playlist.link-url-label","Link URL"),children:(0,t.jsx)(J.p,{id:"link-url-input",value:p,readOnly:!0,addonAfter:(0,t.jsx)(X.b,{icon:"copy",variant:"primary",getText:()=>p,onClipboardCopy:()=>{(0,R.rR)("grafana_kiosk_mode",{action:"share_playlist",mode:i})},children:(0,t.jsx)(e.x6,{i18nKey:"share-playlist.copy-link-button",children:"Copy"})})})})]})})},_=({playlist:a,setStartPlaylist:n,setPlaylistToDelete:i})=>(0,t.jsxs)(f.Z,{children:[(0,t.jsxs)(f.Z.Heading,{children:[a.name,(0,t.jsx)(H.$s,{children:({showModal:r,hideModal:d})=>(0,t.jsx)(G._,{tooltip:(0,e.t)("playlist-page.card.tooltip","Share playlist"),icon:"share-alt",iconSize:"lg",onClick:()=>{r(q,{playlistUid:a.uid,onDismiss:d})}})},"button-share")]}),(0,t.jsxs)(f.Z.Actions,{children:[(0,t.jsx)(y.$n,{variant:"secondary",icon:"play",onClick:()=>n(a),children:(0,t.jsx)(e.x6,{i18nKey:"playlist-page.card.start",children:"Start playlist"})}),j.TP.isEditor&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.z9,{variant:"secondary",href:`/playlists/edit/${a.uid}`,icon:"cog",children:(0,t.jsx)(e.x6,{i18nKey:"playlist-page.card.edit",children:"Edit playlist"})},"edit"),(0,t.jsx)(y.$n,{disabled:!1,onClick:()=>i(a),icon:"trash-alt",variant:"destructive",children:(0,t.jsx)(e.x6,{i18nKey:"playlist-page.card.delete",children:"Delete playlist"})})]})]})]}),tt=({rootProps:a})=>{const n=(0,C.of)(st);return(0,t.jsxs)(f.Z,{...a,children:[(0,t.jsx)(f.Z.Heading,{children:(0,t.jsx)(g.A,{width:140})}),(0,t.jsx)(f.Z.Actions,{children:(0,t.jsxs)(I.B,{direction:"row",wrap:"wrap",children:[(0,t.jsx)(g.A,{containerClassName:n.button,width:142,height:32}),j.TP.isEditor&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.A,{containerClassName:n.button,width:135,height:32}),(0,t.jsx)(g.A,{containerClassName:n.button,width:153,height:32})]})]})})]})},A=(0,m.j)(_,tt);function st(a){return{button:(0,v.css)({lineHeight:1})}}const et=({playlists:a,setStartPlaylist:n,setPlaylistToDelete:i})=>{const r=(0,C.of)(V);return(0,t.jsx)("ul",{className:r.list,children:a.map(d=>(0,t.jsx)("li",{className:r.listItem,children:(0,t.jsx)(A,{playlist:d,setStartPlaylist:n,setPlaylistToDelete:i})},d.uid))})},at=({rootProps:a})=>{const n=(0,C.of)(V);return(0,t.jsxs)("div",{"data-testid":"playlist-page-list-skeleton",className:n.list,...a,children:[(0,t.jsx)(A.Skeleton,{}),(0,t.jsx)(A.Skeleton,{}),(0,t.jsx)(A.Skeleton,{})]})},Z=(0,m.j)(et,at);function V(a){return{list:(0,v.css)({display:"grid"}),listItem:(0,v.css)({listStyle:"none"})}}var lt=s(53027),nt=s(32370),it=s(90231);const ot=({playlist:a,onDismiss:n})=>{const[i,r]=(0,o.useState)(!1),[d,u]=(0,o.useState)(!1),[h,x]=(0,o.useState)(!0),[p,c]=(0,o.useState)(!0),[S,K]=(0,o.useState)(!0),N=[{label:"Normal",value:!1},{label:"Kiosk",value:!0}],z=()=>{const l={};i&&(l.kiosk=i),d&&(l.autofitpanels=!0),h||(l["_dash.hideTimePicker"]=!0),p||(l["_dash.hideVariables"]=!0),S||(l["_dash.hideLinks"]=!0),lt.Ny.push(F.kM.renderUrl(`/playlists/play/${a.uid}`,l)),(0,R.rR)("grafana_kiosk_mode",{action:"start_playlist",mode:i})};return(0,t.jsxs)(b.a,{isOpen:!0,icon:"play",title:"Start playlist",onDismiss:n,children:[(0,t.jsxs)(U.n,{children:[(0,t.jsx)(P.D,{label:"Mode",children:(0,t.jsx)($.z,{value:i,options:N,onChange:r})}),(0,t.jsx)(P.D,{children:(0,t.jsx)(D.S,{label:"Autofit",description:"Panel heights will be adjusted to fit screen size",name:"autofix",value:d,onChange:l=>u(l.currentTarget.checked)})}),nt.$.featureToggles.dashboardScene&&(0,t.jsx)(P.D,{label:"Display dashboard controls",description:"Customize dashboard elements visibility",children:(0,t.jsx)(it.a,{marginTop:2,marginBottom:2,children:(0,t.jsxs)(I.B,{direction:"column",alignItems:"start",justifyContent:"left",gap:2,children:[(0,t.jsx)(D.S,{label:"Time and refresh",name:"displayTimePicker",value:h,onChange:l=>x(l.currentTarget.checked)}),(0,t.jsx)(D.S,{label:"Variables",name:"displayVariableControls",value:p,onChange:l=>c(l.currentTarget.checked)}),(0,t.jsx)(D.S,{label:"Dashboard links",name:"displayLinks",value:S,onChange:l=>K(l.currentTarget.checked)})]})})})]}),(0,t.jsx)(b.a.ButtonRow,{children:(0,t.jsxs)(y.$n,{variant:"primary",onClick:z,children:["Start ",a.name]})})]})};var W=s(9344);const Q=()=>{const a=(0,W.NF)(),[n,i]=(0,o.useState)(0),[r,d]=(0,o.useState)(""),u=(0,E.A)(()=>a.getAllPlaylist(),[n]),h=(0,o.useMemo)(()=>(0,W.GM)(u.value??[],r),[r,u]),[x,p]=(0,o.useState)(),[c,S]=(0,o.useState)(),K=h&&h.length>0,N=()=>S(void 0),z=()=>{c&&a.deletePlaylist(c.uid).finally(()=>{i(n+1),S(void 0)})},l=u.loading||h.length>0||r.length>0;return(0,t.jsx)(L.Y,{actions:j.TP.isEditor?(0,t.jsx)(y.z9,{href:"/playlists/new",children:(0,t.jsx)(e.x6,{i18nKey:"playlist-page.create-button.title",children:"New playlist"})}):void 0,navId:"dashboards/playlists",children:(0,t.jsxs)(L.Y.Contents,{children:[l&&(0,t.jsx)(O.A,{searchQuery:r,setSearchQuery:d}),u.loading?(0,t.jsx)(Z.Skeleton,{}):(0,t.jsxs)(t.Fragment,{children:[!K&&r?(0,t.jsx)(M.p,{variant:"not-found",message:(0,e.t)("playlists.empty-state.message","No playlists found")}):(0,t.jsx)(Z,{playlists:h,setStartPlaylist:p,setPlaylistToDelete:S}),!l&&(0,t.jsx)(M.p,{variant:"call-to-action",button:(0,t.jsx)(y.z9,{disabled:!j.TP.isEditor,href:"playlists/new",icon:"plus",size:"lg",children:(0,t.jsx)(e.x6,{i18nKey:"playlist-page.empty.button",children:"Create playlist"})}),message:(0,e.t)("playlist-page.empty.title","There are no playlists created yet"),children:(0,t.jsxs)(e.x6,{i18nKey:"playlist-page.empty.pro-tip",children:["You can use playlists to cycle dashboards on TVs without user control."," ",(0,t.jsx)(k.Y,{external:!0,href:"https://docs.grafana.org/reference/playlist/",children:"Learn more"})]})}),c&&(0,t.jsx)(B.u,{title:c.name,confirmText:(0,e.t)("playlist-page.delete-modal.confirm-text","Delete"),body:(0,e.t)("playlist-page.delete-modal.body","Are you sure you want to delete {{name}} playlist?",{name:c.name}),onConfirm:z,isOpen:!!c,onDismiss:N}),x&&(0,t.jsx)(ot,{playlist:x,onDismiss:()=>p(void 0)})]})]})})},rt=Q}}]);

//# sourceMappingURL=PlaylistPage.536dde7d3afab9f86633.js.map