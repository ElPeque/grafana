"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2770],{57205:(J,D,t)=>{t.d(D,{B:()=>w});var a=t(74848),e=t(22803),x=t(96540),B=t(29675),j=t(96260),R=t(6736),L=t(62931),V=t(61834),S=t(85217),U=t(37813),y=(n=>(n[n.Leading=0]="Leading",n[n.Trailing=1]="Trailing",n))(y||{});const T=({color:n=L.F,colorIndicator:h=S.Ev,position:c=0,lineStyle:i})=>{const p=(0,B.of)(I);return h===S.fX.series?(0,a.jsx)(V.p,{color:n,lineStyle:i,className:c===0?p.leading:p.trailing}):(0,a.jsx)("span",{style:{backgroundColor:n},className:(0,e.cx)(c===0?p.leading:p.trailing,(0,U.L$)(h,p))})},I=n=>({leading:(0,e.css)({marginRight:n.spacing(.5)}),trailing:(0,e.css)({marginLeft:n.spacing(.5)}),value:(0,e.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,e.css)({}),pie_1_4:(0,e.css)({}),pie_2_4:(0,e.css)({}),pie_3_4:(0,e.css)({}),marker_sm:(0,e.css)({width:"4px",height:"4px",borderRadius:n.shape.radius.circle,minWidth:"4px"}),marker_md:(0,e.css)({width:"8px",height:"8px",borderRadius:n.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,e.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.circle,minWidth:"12px"})});var d=(n=>(n.label="label",n.value="value",n))(d||{});const f="Copied to clipboard",b=2*1e3,E=7,w=({label:n,value:h,color:c,colorIndicator:i,colorPlacement:p=S.lJ.first,justify:v="flex-start",isActive:o=!1,marginRight:s="0px",isPinned:r,lineStyle:l,showValueScroll:g})=>{const u=(0,B.of)(m,v,s),M=g?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"wrap",wordBreak:"break-word"},[O,A]=(0,x.useState)(!1),[W,$]=(0,x.useState)(null),[N,H]=(0,x.useState)(!1),K=(0,x.useRef)(null),X=(0,x.useRef)(null);(0,x.useEffect)(()=>{let C;return N&&(C=setTimeout(()=>{H(!1)},b)),()=>{window.clearTimeout(C)}},[N]);const Y=async(C,F)=>{if(!(navigator?.clipboard&&window.isSecureContext)){z(C,F);return}try{await navigator.clipboard.writeText(C),$({[`${F}`]:C}),H(!0)}catch{$(null)}},z=(C,F)=>{const P=document.createElement("textarea");K.current?.appendChild(P),P.value=C,P.focus(),P.select();try{document.execCommand("copy")&&($({[`${F}`]:C}),H(!0))}catch(k){console.error("Unable to copy to clipboard",k)}P.remove()},G=C=>{C.currentTarget.offsetWidth<C.currentTarget.scrollWidth&&A(!0)},Z=()=>A(!1);return n.length*E>window.innerWidth/2&&(n=n.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,a.jsxs)("div",{className:u.contentWrapper,children:[(c||n)&&(0,a.jsxs)("div",{className:u.valueWrapper,children:[c&&p===S.lJ.first&&(0,a.jsx)(T,{color:c,colorIndicator:i,lineStyle:l}),r?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(R.m,{content:n,interactive:!1,show:O,children:(0,a.jsxs)(a.Fragment,{children:[N&&W?.label&&(0,a.jsx)(j.r,{placement:"top",referenceElement:K.current,children:f}),(0,a.jsx)("div",{className:(0,e.cx)(u.label,o&&u.activeSeries,navigator?.clipboard&&u.copy),onMouseEnter:G,onMouseLeave:Z,onClick:()=>Y(n,"label"),ref:K,children:n})]})})}):(0,a.jsx)("div",{className:(0,e.cx)(u.label,o&&u.activeSeries),children:n})]}),(0,a.jsxs)("div",{className:u.valueWrapper,children:[c&&p===S.lJ.leading&&(0,a.jsx)(T,{color:c,colorIndicator:i,position:y.Leading,lineStyle:l}),r?(0,a.jsxs)(a.Fragment,{children:[N&&W?.value&&(0,a.jsx)(j.r,{placement:"top",referenceElement:X.current,children:f}),(0,a.jsx)("div",{className:(0,e.cx)(u.value,o,navigator?.clipboard&&u.copy),style:M,onClick:()=>Y(h?h.toString():"","value"),ref:X,children:h})]}):(0,a.jsx)("div",{className:(0,e.cx)(u.value,o),style:M,children:h}),c&&p===S.lJ.trailing&&(0,a.jsx)(T,{color:c,colorIndicator:i,position:y.Trailing,lineStyle:l})]})]})},m=(n,h,c)=>({contentWrapper:(0,e.css)({display:"flex",alignItems:"start",justifyContent:h,marginRight:c}),label:(0,e.css)({color:n.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:n.spacing(2)}),value:(0,e.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,e.css)({display:"flex",alignItems:"center"}),activeSeries:(0,e.css)({fontWeight:n.typography.fontWeightBold,color:n.colors.text.maxContrast}),copy:(0,e.css)({cursor:"pointer"})})},38333:(J,D,t)=>{t.d(D,{e:()=>T});var a=t(74848),e=t(22803),x=t(23570),B=t(59141),j=t(6562),R=t(7500),L=t(29675),V=t(54731),S=t(99788),U=t(83525);function y(d,f,b,E,w){const m=d.fields,n=b!=null?m[b]:null,h=m.filter(s=>!s.config.custom?.hideFrom?.tooltip),c=h.find(s=>s.name==="traceID")||m[0],i=[];if(h.filter(s=>c===s).length>0&&i.push(c),i.push(...h.filter(s=>c!==s)),i.length===0)return null;const p=[],v=[],o=new Set;for(const s of i){if(w===R.$N.Single&&s!==n)continue;const r=s.values[f],l=s.display?s.display(r):{text:`${r}`,numeric:+r};s.getLinks&&s.getLinks({calculatedValue:l,valueRowIndex:f}).forEach(g=>{const u=`${g.title}/${g.href}`;o.has(u)||(v.push(g),o.add(u))}),p.push({name:(0,x.Ct)(s,d),value:r,valueString:(0,B.cN)(l),highlight:s===n})}return E&&E!==R.xB.None&&p.sort((s,r)=>j.sortValues(E)(s.value,r.value)),{displayValues:p,links:v}}const T=({data:d,rowIndex:f,columnIndex:b,sortOrder:E,mode:w,header:m,padding:n=0})=>{const h=(0,L.of)(I,n);if(!d||f==null)return null;const c=y(d,f,b,E,w);if(c==null)return null;const{displayValues:i,links:p}=c;return m==="Exemplar"?(0,a.jsx)(U.i,{displayValues:i,links:p,header:m}):(0,a.jsxs)("div",{className:h.wrapper,children:[m&&(0,a.jsx)("div",{className:h.header,children:(0,a.jsx)("span",{className:h.title,children:m})}),(0,a.jsx)("table",{className:h.infoWrap,children:(0,a.jsxs)("tbody",{children:[i.map((v,o)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:v.name}),(0,a.jsx)("td",{children:(0,S.A)(v.valueString)})]},`${o}/${f}`)),p.map((v,o)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Link"}),(0,a.jsx)("td",{colSpan:2,children:(0,a.jsx)(V.Y,{href:v.href,external:v.target==="_blank",weight:"medium",inline:!1,children:v.title})})]},o))]})})]})},I=(d,f=0)=>({wrapper:(0,e.css)({padding:`${f}px`,background:d.components.tooltip.background,borderRadius:d.shape.borderRadius(2)}),header:(0,e.css)({background:d.colors.background.secondary,alignItems:"center",alignContent:"center",display:"flex",paddingBottom:d.spacing(1)}),title:(0,e.css)({fontWeight:d.typography.fontWeightMedium,overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1}),infoWrap:(0,e.css)({padding:d.spacing(1),background:"transparent",border:"none",th:{fontWeight:d.typography.fontWeightMedium,padding:d.spacing(.25,2,.25,0)},tr:{borderBottom:`1px solid ${d.colors.border.weak}`,"&:last-child":{borderBottom:"none"}}}),link:(0,e.css)({color:d.colors.text.link})})},46097:(J,D,t)=>{t.r(D),t.d(D,{plugin:()=>v});var a=t(68256),e=t(74848),x=t(96540),B=t(64423),j=t(35383),R=t(52718),L=t(67893),V=t(38333);class S extends x.Component{constructor(){super(...arguments),this.subscription=new B.yU,this.state={}}componentDidMount(){const{eventBus:s}=this.props;this.subscription.add(s.subscribe(j.b_,r=>{this.setState({event:r})})),this.subscription.add(s.subscribe(j.ql,r=>{this.setState({event:r})})),this.subscription.add(s.subscribe(R.kb,r=>{this.setState({event:r})})),this.subscription.add(s.subscribe(R.Tq,r=>{this.setState({event:r})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:s}=this.state;if(!s)return(0,e.jsx)("div",{children:"no events yet"});const{type:r,payload:l,origin:g}=s;return(0,e.jsxs)(L.E,{autoHeightMin:"100%",autoHeightMax:"100%",children:[(0,e.jsxs)("h3",{children:["Origin: ",g?.path]}),(0,e.jsxs)("span",{children:["Type: ",r]}),!!l&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("pre",{children:JSON.stringify(l.point,null,"  ")}),l.data&&(0,e.jsx)(V.e,{data:l.data,rowIndex:l.rowIndex,columnIndex:l.columnIndex})]})]})}}var U=t(54850);let y=100;class T extends x.PureComponent{constructor(s){super(s),this.history=new U.$({capacity:40,append:"head"}),this.eventObserver={next:l=>{const g=l.origin;this.history.add({key:y++,type:l.type,path:g?.path,payload:l.payload}),this.setState({counter:y})}},this.state={counter:y};const r=[];r.push(s.eventBus.getStream(j.b_).subscribe(this.eventObserver)),r.push(s.eventBus.getStream(j.ql).subscribe(this.eventObserver)),r.push(s.eventBus.getStream(j.LO).subscribe(this.eventObserver)),this.subs=r}componentWillUnmount(){for(const s of this.subs)s.unsubscribe()}render(){return(0,e.jsx)(L.E,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.history.map((s,r)=>(0,e.jsxs)("div",{children:[JSON.stringify(s.path)," ",s.type," / X:",JSON.stringify(s.payload.x)," / Y:",JSON.stringify(s.payload.y)]},s.key))})}}var I=t(2049),d=t(91357),f=t(23570),b=t(99764);class E extends x.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(s){const{data:r,options:l}=this.props;if(s.data!==r&&(this.counters.dataChanged++,l.counters?.schemaChanged)){const g=s.data?.series,u=r.series;u&&g&&((0,I.J3)(u,g,I.bW)||this.counters.schemaChanged++)}return!0}render(){const{data:s,options:r}=this.props,l=r.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const g=Date.now(),u=g-this.lastRender;this.lastRender=g;const M=d.AS.get(d.gy.lastNotNull);return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(b.K,{name:"step-backward",title:"reset counters",onClick:this.resetCounters,tooltip:"Step back"}),(0,e.jsxs)("span",{children:[l.render&&(0,e.jsxs)("span",{children:["Render: ",this.counters.render,"\xA0"]}),l.dataChanged&&(0,e.jsxs)("span",{children:["Data: ",this.counters.dataChanged,"\xA0"]}),l.schemaChanged&&(0,e.jsxs)("span",{children:["Schema: ",this.counters.schemaChanged,"\xA0"]}),(0,e.jsxs)("span",{children:["TIME: ",u,"ms"]})]})]}),s.series&&s.series.map((O,A)=>(0,e.jsxs)("div",{children:[(0,e.jsxs)("h4",{children:[(0,f.Ri)(O,A)," (",O.length,")"]}),(0,e.jsxs)("table",{className:"filter-table",children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:"Field"}),(0,e.jsx)("td",{children:"Type"}),(0,e.jsx)("td",{children:"Last"})]})}),(0,e.jsx)("tbody",{children:O.fields.map((W,$)=>{const N=M.reduce(W,!1,!1)[M.id];return(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,f.Ct)(W,O,s.series)}),(0,e.jsx)("td",{children:W.type}),(0,e.jsx)("td",{children:`${N}`})]},`${$}/${W.name}`)})})]})]},`${A}/${O.refId}`))]})}}var w=t(90415),m=t(86489),n=t(34128);function h(o){const s=(0,w.d2)(),r=l=>{s.onInstanceStateChange({name:l.currentTarget.value})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(m.D,{label:"State name",children:(0,e.jsx)(n.p,{value:s.instanceState?.name??"",onChange:r})})})}function c({value:o,context:s,onChange:r,item:l}){return(0,e.jsxs)("div",{children:["Current value: ",s.instanceState?.name," "]})}var i=(o=>(o.Cursor="cursor",o.Events="events",o.Render="render",o.State="State",o.ThrowError="ThrowError",o))(i||{});class p extends x.Component{render(){const{options:s}=this.props;switch(s.mode){case i.Events:return(0,e.jsx)(T,{eventBus:this.props.eventBus});case i.Cursor:return(0,e.jsx)(S,{eventBus:this.props.eventBus});case i.State:return(0,e.jsx)(h,{...this.props});case i.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return(0,e.jsx)(E,{...this.props})}}}const v=new a.m(p).useFieldConfig().setPanelOptions(o=>{o.addSelect({path:"mode",name:"Mode",defaultValue:i.Render,settings:{options:[{label:"Render",value:i.Render},{label:"Events",value:i.Events},{label:"Cursor",value:i.Cursor},{label:"Cursor",value:i.Cursor},{label:"Share state",value:i.State},{label:"Throw error",value:i.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:s})=>s===i.State,editor:c}).addBooleanSwitch({path:"counters.render",name:"Render count",defaultValue:!0,showIf:({mode:s})=>s===i.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data changed count",defaultValue:!0,showIf:({mode:s})=>s===i.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema changed count",defaultValue:!0,showIf:({mode:s})=>s===i.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})})}}]);

//# sourceMappingURL=debugPanel.e2fe2f0ec1838954755c.js.map