"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3124],{69921:(te,mt,t)=>{t.d(mt,{i:()=>et});var R=t(74848),Q=t(22803),X=t(29675);const et=({children:k,className:e})=>{const st=(0,X.of)($);return(0,R.jsx)("div",{className:(0,Q.cx)(st.wrapper,e),children:k})},$=k=>({wrapper:(0,Q.css)({display:"flex",flexDirection:"column",fontSize:k.typography.bodySmall.fontSize})})},89299:(te,mt,t)=>{t.r(mt),t.d(mt,{plugin:()=>we});var R=t(68256),Q=t(62321),X=t(62931),et=t(49448),$=t(21288),k=t(63739),e=t(7500),st=t(97988),Mt=t(59698),Ht=t(95118),Rt=t(30040),jt=t(13678),Ft=t(46824),Ot=t(88376),j=t(74848),a=t(96540),m=t(350),h=t(91371),g=t(73627),f=t(29675),P=t(85832),M=t(87579),y=t(12963),E=t(70561),F=t(2543),I=t(99116),_=t(18752),Tt=t(43987),gt=t(7257),H=t(90825);function b(i,n){return n[0].fields.slice(1).some(r=>!r.config.custom?.hideFrom?.legend)}const St=(0,a.memo)(({data:i,placement:n,calcs:r,displayMode:D,colorField:K,...L})=>{const p=(0,f.$j)(),tt=i[0].fields[0].config,w=tt.color?.mode,T=[];if(w===X.Y.Thresholds){const d={mode:I.O.Absolute,steps:[]},O={mode:I.O.Percentage,steps:[]};for(let lt=1;lt<i[0].fields.length;lt++){const J=i[0].fields[lt];if(J.config.thresholds&&J.config.thresholds.steps.length>1)if(J.config.thresholds.mode===I.O.Absolute)for(const A of J.config.thresholds.steps)(0,F.includes)(d.steps,A)||d.steps.push(A);else for(const A of J.config.thresholds.steps)(0,F.includes)(O.steps,A)||O.steps.push(A)}const G=(0,H.EI)(tt,p,d),dt=(0,H.EI)(tt,p,O);T.push(...G,...dt)}const it=[];for(let d=1;d<i[0].fields.length;d++){const O=i[0].fields[d].config.mappings;if(O)for(const G of O)(0,F.includes)(it,G)||it.push(G)}const ft=(0,H.K1)(it,p),pt=i[0].fields.slice(1).map((d,O)=>{const dt=O+1;if(!d||d.config.custom?.hideFrom?.legend)return;const lt=d.state?.displayName??d.name,J=(0,_.lz)(d,p).color;return{disabled:d.state?.hideFrom?.viz,color:J,label:lt,yAxis:d.config.custom?.axisPlacement===e.vM.Right?2:1,getDisplayValues:()=>(0,gt.UO)(r,d,p),getItemKey:()=>`${lt}-0-${dt}`}}).filter(d=>d!==void 0);return(0,j.jsx)(P.KU.Legend,{placement:n,...L,children:(0,j.jsx)(Tt.t,{placement:n,items:pt,thresholdItems:T,mappingItems:ft,displayMode:D,sortBy:L.sortBy,sortDesc:L.sortDesc,isSortable:!0})})});St.displayName="BarChartLegend";var U=t(36613),q=t(23570),Kt=t(77230),Jt=t(16869),Pt=t(59141),N=t(13076),W=t(5858),Dt=t(16669),Lt=t(16725),ee=t(90168),wt=t(88090),ie=t(87190),At=t(25424),Qt=t(49840);const bt=ee.WC.interval,de=At.ur,pe=At.ur,ye=8,ue=30,xe=.65,Me=.1,Oe=.15,Se=5,Pe=10,Ee=.1;function Te(i,n,r,D,K){const L=(0,h.kD)(i,14),p=n/(L.width+2)*14,tt=r/D,w=Math.min(tt,p);return{fontSize:Math.min(w,K??w),textMetrics:L}}function De(i,n){const{xOri:r,xDir:D,rawValue:K,getColor:L,formatValue:p,formatShortValue:tt,fillOpacity:w=1,showValue:T,xSpacing:it=0,hoverMulti:ft=!1,timeZone:pt="browser"}=i,d=r===e.Lt.Horizontal,O=!i.text?.valueSize,G=i.stacking!==e.gs.None,dt=i.stacking===e.gs.Percent;let{groupWidth:lt,barWidth:J,barRadius:A=0}=i;G&&([lt,J]=[J,lt]);let z;const ut=Array(30).fill(null);let rt;const Y=o=>Array.from(o.data[0].map((l,s)=>s)),nt=it===0?void 0:(o,l)=>{const s=o.bbox.width,x=D*(d?1:-1);let v=l.length,S=v-1,C=0,vt=s/U.A.pxRatio,ct=Math.abs(Math.floor(vt/it));C=v<ct?0:Math.ceil(v/ct);let Gt=l.map((yt,Yt)=>C!==0&&(it>0?Yt:S-Yt)%C>0?null:yt);return x===1?Gt:Gt.reverse()},ht=(o,l,s,x,v)=>{if(i.xTimeAuto){let S=bt.year;return v<g.Zj.second?S=bt.millisecond:v<g.Zj.minute?S=bt.second:v<g.Zj.hour?S=bt.minute:v<g.Zj.day?S=bt.hour:v<g.Zj.month?S=bt.day:v<g.Zj.year?S=bt.month:S=bt.year,l.map(C=>C==null?"":(0,wt.LE)(C,{format:S,timeZone:pt}))}return l.map(S=>d?tt(0,S):p(0,S))},Nt=(o,l,s)=>{l=0,s=Math.max(1,o.data[0].length-1);let x=0;(0,At.mn)(o.data[0].length,lt,de,0,(S,C,vt)=>{x=C+vt/2});let v=s-l;if(x===.5)l-=v;else{let C=(1/(1-x*2)*v-v)/2;l-=C,s+=C}return[l,s]};let ne=(o,l)=>{let s=Array.from({length:l},()=>({offs:Array(o).fill(0),size:Array(o).fill(0)}));return(0,At.mn)(o,lt,de,null,(x,v,S)=>{(0,At.mn)(l,J,pe,null,(C,vt,ct)=>{s[C].offs[x]=v+S*vt,s[C].size[x]=S*ct})}),s},ot=(o,l)=>{let s=Array.from({length:l},()=>({offs:Array(o).fill(0),size:Array(o).fill(0)}));return(0,At.mn)(o,lt,de,null,(x,v,S)=>{(0,At.mn)(l,J,pe,null,(C,vt,ct)=>{s[C].offs[x]=v,s[C].size[x]=S})}),s};const zt=d?Me:Oe,Vt=d?Se:Pe;let Ut=[],B=[],u=1,c,V=i.text?.valueSize??ue,Z=Vt,Wt=1/0,Ct=1/0,$t=L!=null,qt=$t?{fill:{unit:3,values:(o,l)=>B[l].fill},stroke:{unit:3,values:(o,l)=>B[l].stroke}}:{},xt=U.A.paths.bars({radius:dt?0:G?(o,l)=>l===o.data.length-1?[A,0]:[0,0]:A,disp:{x0:{unit:2,values:(o,l)=>Ut[l].offs},size:{unit:2,values:(o,l)=>Ut[l].size},...qt},each:(o,l,s,x,v,S,C)=>{x-=o.bbox.left,v-=o.bbox.top;let vt=o.data[l][s];d?(Wt=Math.min(Wt,vt<0?o.bbox.height-(v+C):v),Ct=S):(Wt=C,Ct=Math.min(Ct,vt<0?x:o.bbox.width-(x+S)));let ct={x,y:v,w:S,h:C,sidx:l,didx:s};if(!G&&i.fullHighlight&&(i.xOri===e.Lt.Horizontal?(ct.y=0,ct.h=o.bbox.height):(ct.x=0,ct.w=o.bbox.width)),z.add(ct),T!==e.yL.Never){const Gt=K(l,s);let yt=1;dt&&ce[l][s]&&(yt=ce[l][s]);const Yt=yt===0?0:Gt/yt,oe=p(l,Yt);if(Z=Math.min(Z,Math.round(zt*(d?S:C))),c[s]===void 0&&(c[s]={}),c[s][l]={text:oe,value:K(l,s),hidden:!1},O){const{fontSize:Xt,textMetrics:It}=Te(c[s][l].text,Ct*(d?xe:1)-(d?0:Z),Wt*(d?1:xe)-(d?Z:0),1);c[s][l].textMetrics=It;let at=Math.round(Math.min(V,ue,Xt));u=at/V*(at/14),V=at}else c[s][l].textMetrics=(0,h.kD)(c[s][l].text,V);let fe=d?0:-Math.round(Ee*V),Et=K(l,s);if(i.negY?.[l]&&Et!=null&&(Et*=-1),Et!=null){const Xt=o.bbox.left+(d?x+S/2:Et<0?x-Z:x+S+Z);let It=o.bbox.top+(d?Et<0?v+C+Z:v-Z:v+C/2-fe);const{textMetrics:at={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=c[s][l];let ae=0,se=0;d?(ae=at.width*u/2,se=Et>0?(at.actualBoundingBoxAscent+at.actualBoundingBoxDescent)*u:0):(se=(at.actualBoundingBoxAscent+at.actualBoundingBoxDescent)*u/2,ae=Et<0?at.width*u:0),It-se<0&&(It=se),c[s][l].x=Xt,c[s][l].y=It,c[s][l].bbox={x:Xt-ae,y:It-se,w:at.width*u,h:(at.actualBoundingBoxAscent+at.actualBoundingBoxDescent)*u}}}}});const kt=o=>{o.root.querySelectorAll(".u-cursor-pt").forEach(l=>{l.style.borderRadius="0",i.fullHighlight&&(l.style.zIndex="-1")})},me={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(o,l)=>{if(l===0){ut.fill(null),rt=null;let s=o.cursor.left*U.A.pxRatio,x=o.cursor.top*U.A.pxRatio;z.get(s,x,1,1,v=>{(0,Qt.ur)(s,x,v.x,v.y,v.x+v.w,v.y+v.h)&&(rt=ut[0]=v,ut[rt.sidx]=rt,ft&&(0,Qt.Tr)(z,void 0,rt.didx).forEach(S=>{ut[S.sidx]=S}))})}return ut[l]?.didx},points:{fill:"rgba(255,255,255,0.4)",bbox:(o,l)=>{let s=ut[l],x=s!=null;return{left:x?s.x/U.A.pxRatio:-10,top:x?s.y/U.A.pxRatio:-10,width:x?s.w/U.A.pxRatio:0,height:x?s.h/U.A.pxRatio:0}}},focus:{prox:1e3,dist:(o,l)=>rt?.sidx===l?0:1/0}},ge=o=>{if(z=z||new Qt.C$(0,0,o.bbox.width,o.bbox.height),z.clear(),o.series.forEach(l=>{l._paths=null}),G?Ut=[null,...ot(o.data[0].length,o.data.length-1)]:Ut=[null,...ne(o.data[0].length,o.data.length-1)],$t){B=[null];for(let l=1;l<o.data.length;l++){let s=o.data[l].map((x,v)=>x!=null?L(l,v,x):null);B.push({fill:w<1?s.map(x=>x!=null?(0,ie.X4)(x,w):null):s,stroke:s})}}c={},V=i.text?.valueSize??ue,Z=Vt,Wt=Ct=1/0},$e=o=>{if(T===e.yL.Never||V<ye)return;o.ctx.save(),o.ctx.fillStyle=n.colors.text.primary,o.ctx.font=`${V}px ${n.typography.fontFamily}`;let l,s;for(const x in c){let v=!0;for(const S in c[x]){const C=c[x][S],{text:vt,x:ct=0,y:Gt=0}=C;let{value:yt}=C;i.negY?.[S]&&yt!=null&&(yt*=-1);let Yt=d?"center":yt!==null&&yt<0?"right":"left",oe=d?yt!==null&&yt<0?"top":"alphabetic":"middle";if(Yt!==l&&(o.ctx.textAlign=l=Yt),oe!==s&&(o.ctx.textBaseline=s=oe),T===e.yL.Always)o.ctx.fillText(vt,ct,Gt);else if(T===e.yL.Auto){let{bbox:fe}=C,Et=!1;if(fe==null)Et=!0,C.hidden=!0;else if(!v)for(const Xt in c[x]){if(Xt===S)continue;const It=c[x][Xt],{bbox:at,hidden:ae}=It;if(!ae&&at&&(0,Qt.HY)(fe,at)){Et=!0,C.hidden=!0;break}}v=!1,!Et&&o.ctx.fillText(vt,ct,Gt)}}}o.ctx.restore()};let ce=null;function ke(o,l){return ce=null,(0,gt.bq)(o[0],l,({totals:s})=>{ce=s})}return{cursor:me,xRange:Nt,xValues:ht,xSplits:Y,hFilter:nt,barsBuilder:xt,init:kt,drawClear:ge,draw:$e,prepData:ke}}const Bt={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:e.wV.Auto,showValue:e.yL.Auto,stacking:e.gs.None,xTickLabelRotation:0,xTickLabelSpacing:0},ve={fillOpacity:80,gradientMode:e.on.None,lineWidth:1};function Ce(i,n,r,D,K,L){if(i.length===0||i.every(T=>T.length===0))return{series:[],_rest:[],warn:"No data in response"};(0,q.Fm)(i),(0,q.j2)(i,n);let p={...i[0]};const tt=p.fields.findIndex(T=>T.type===k.PU.time);tt>=0&&i.length>1&&(p=(0,Kt.Fd)({frames:i,keepDisplayNames:!0})??p);const w=p.fields.find(T=>T.state?.displayName===K||T.name===K)??p.fields.find(T=>T.type===k.PU.string)??p.fields[tt];if(w!=null){const T=[w],it=[],ft=L==null?void 0:p.fields.find(O=>O.state?.displayName===L||O.name===L);p.fields.forEach(O=>{if(O!==w)if(O.type===k.PU.number&&!O.config.custom?.hideFrom?.viz){const G={...O,values:O.values.map(dt=>Number.isFinite(dt)?dt:null),config:{...O.config,custom:{...O.config.custom,stacking:{group:"_",mode:r}}}};T.push(G)}else it.push(O)});let pt=null;T.length===1&&(pt="No numeric fields found"),p.fields=T;const d=[p];return(0,Lt.O2)(d,D,0),{series:d,_rest:it,color:ft,warn:pt}}return{series:[],_rest:[],color:null,warn:"Bar charts requires a string or time field"}}const Le=({series:i,totalSeries:n,color:r,orientation:D,options:K,timeZone:L,theme:p})=>{let{showValue:tt,groupWidth:w,barWidth:T,barRadius:it=0,stacking:ft,text:pt,tooltip:d,xTickLabelRotation:O,xTickLabelMaxLength:G,xTickLabelSpacing:dt=0,legend:lt,fullHighlight:J}=K,A=i[0];const z=new W.e,_t=A.fields.map((B,u)=>ft===e.gs.Percent?(0,Jt.J)({field:{...B,config:{...B.config,unit:"percentunit"}},theme:p}):B.display),ut=(B,u)=>(0,Pt.cN)(_t[B](u)),rt=(B,u)=>re(ut(B,u),G),Y=Be(D);A.fields.length===2&&ft===e.gs.None&&(n===1&&(w=T),T=1);const nt=(B,u)=>A.fields[B].values[u];let ht,Nt=1;if(r!=null){const B=r.display;Nt=(r.config.custom.fillOpacity??100)/100,ht=(u,c)=>B(r.values[c]).color}else A.fields.some(u=>u.config.color?.mode===N.Yb.Thresholds||u.config.mappings?.some(V=>V.type==="value"?Object.values(V.options).some(Z=>Z.color!=null):V.options.result.color!=null))&&(Nt=(A.fields.find(c=>c.type===k.PU.number).config.custom.fillOpacity??100)/100,ht=(c,V)=>{let Z=A.fields[c];return Z.display(Z.values[V]).color});const ne={xOri:Y.xOri,xDir:Y.xDir,groupWidth:w,barWidth:T,barRadius:it,stacking:ft,rawValue:nt,getColor:ht,fillOpacity:Nt,formatValue:ut,formatShortValue:rt,timeZone:L,text:pt,showValue:tt,legend:lt,xSpacing:dt,xTimeAuto:A.fields[0]?.type===k.PU.time&&!A.fields[0].config.unit?.startsWith("time:"),negY:A.fields.map(B=>B.config.custom?.transform===e.NU.NegativeY),fullHighlight:J,hoverMulti:d.mode===e.$N.Multi},ot=De(ne,p);if(z.setCursor(ot.cursor),z.addHook("init",ot.init),z.addHook("drawClear",ot.drawClear),z.addHook("draw",ot.draw),O!==0){let B=50,u=Y.xOri===e.Lt.Horizontal?14:5;z.setPadding(Ae(A,O,G,B,u))}z.setPrepData(ot.prepData),z.addScale({scaleKey:"x",isTime:!1,range:ot.xRange,distribution:e.L4.Ordinal,orientation:Y.xOri,direction:Y.xDir});const zt=A.fields[0]?.config.custom?.axisPlacement!==e.vM.Hidden?Y.xOri===e.Lt.Horizontal?e.vM.Bottom:e.vM.Left:e.vM.Hidden,Vt=A.fields[0]?.config.custom?.axisPlacement!==e.vM.Hidden;z.addAxis({scaleKey:"x",isTime:!1,placement:zt,label:A.fields[0]?.config.custom?.axisLabel,splits:ot.xSplits,filter:Y.xOri===0?ot.hFilter:void 0,values:ot.xValues,timeZone:L,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:Y.xOri===0?O*-1:0,theme:p,show:Vt});for(let B=1;B<A.fields.length;B++){const u=A.fields[B],c={...ve,...u.config.custom},V=u.config.unit||Dt.s,Z=(0,_.Qi)(u),Ct=(0,_.lz)(u,p).color;let $t=c.axisSoftMin,qt=c.axisSoftMax;if($t==null&&u.config.min==null&&($t=0),qt==null&&u.config.max==null&&(qt=0),c.thresholdsStyle&&u.config.thresholds&&(c.thresholdsStyle.mode??e.Ly.Off)!==e.Ly.Off&&z.addThresholds({config:c.thresholdsStyle,thresholds:u.config.thresholds,scaleKey:V,theme:p,hardMin:u.config.min,hardMax:u.config.max,softMin:c.axisSoftMin,softMax:c.axisSoftMax}),z.addSeries({scaleKey:V,pxAlign:!0,lineWidth:c.lineWidth,lineColor:Ct,fillOpacity:c.fillOpacity,theme:p,colorMode:Z,pathBuilder:ot.barsBuilder,show:!c.hideFrom?.viz,gradientMode:c.gradientMode,thresholds:u.config.thresholds,hardMin:u.config.min,hardMax:u.config.max,softMin:c.axisSoftMin,softMax:c.axisSoftMax}),z.addScale({scaleKey:V,min:u.config.min,max:u.config.max,softMin:$t,softMax:qt,centeredZero:c.axisCenteredZero,orientation:Y.yOri,direction:Y.yDir,distribution:c.scaleDistribution?.type,log:c.scaleDistribution?.log,decimals:u.config.decimals}),c.axisPlacement!==e.vM.Hidden){let xt=c.axisPlacement;(!xt||xt===e.vM.Auto)&&(xt=e.vM.Left),Y.xOri===1&&(xt===e.vM.Left&&(xt=e.vM.Bottom),xt===e.vM.Right&&(xt=e.vM.Top));let kt={scaleKey:V,label:c.axisLabel,size:c.axisWidth,placement:xt,formatValue:(me,ge)=>(0,Pt.cN)(u.display(me,ge)),filter:Y.yOri===0?ot.hFilter:void 0,tickLabelRotation:Y.xOri===1?O*-1:0,theme:p,grid:{show:c.axisGridShow},decimals:u.config.decimals};c.axisBorderShow&&(kt.border={show:!0}),c.axisColorMode===e.Y$.Series&&(kt.color=Ct),z.addAxis(kt)}}let Ut=(0,gt.ro)(A);return z.setStackingGroups(Ut),{builder:z,prepData:(B,u)=>(i=B,A=i[0],r=u,z.prepData(i))}};function re(i,n){return i.length>n?i.substring(0,n).concat("..."):i}function Ae(i,n,r,D=0,K=0){const L=i.fields[0].values,p=g.pi,tt=i.fields[0].display,w=d=>tt?tt(L[d]):L[d];let T=0;for(let d=0;d<L.length;d++){let O=(0,h.kD)(re((0,Pt.cN)(w(d)),r),p);T=O.width>T?O.width:T}const it=n>0?Math.cos(n*Math.PI/180)*(0,h.kD)(re((0,Pt.cN)(w(L.length-1)),r),p).width:0,ft=n<0?Math.cos(n*-1*Math.PI/180)*(0,h.kD)(re((0,Pt.cN)(w(0)),r),p).width:0,pt=Math.sin((n>=0?n:n*-1)*Math.PI/180)*T-K;return[Math.round(g.pi*U.A.pxRatio),it,pt,Math.max(0,ft-D)]}function Be(i){return i===e.wV.Vertical?{xOri:e.Lt.Horizontal,xDir:e.ON.Right,yOri:e.Lt.Vertical,yDir:e.ON.Up}:{xOri:e.Lt.Vertical,xDir:e.ON.Down,yOri:e.Lt.Horizontal,yDir:e.ON.Right}}const Re=(0,h.kD)("M",g.pi).width,Fe=Math.PI/180,be=i=>{const{data:n,options:r,fieldConfig:D,width:K,height:L,timeZone:p,id:tt,replaceVariables:w}=i,T=(0,f.$j)(),{barWidth:it,barRadius:ft=0,showValue:pt,groupWidth:d,stacking:O,legend:G,tooltip:dt,text:lt,xTickLabelRotation:J,xTickLabelSpacing:A,fullHighlight:z,xField:_t,colorByField:ut}=r;let{orientation:rt,xTickLabelMaxLength:Y=0}=r;rt=rt===$.wV.Auto?K<L?$.wV.Horizontal:$.wV.Vertical:rt,Y=J===0?1/0:Y||Math.floor(L/2/Math.sin(Math.abs(J*Fe))/Re-3);const nt=(0,a.useMemo)(()=>Ce(n.series,D,O,T,_t,ut),[n.series,D,O,T,_t,ut]),ht=(0,a.useMemo)(()=>nt.series.map(u=>({...u,fields:u.fields.filter((c,V)=>V===0||!c.state?.hideFrom?.viz)})),[nt.series]),Nt=ht[0]?.length??0,ne=ht[0]?.fields.length??0,ot=Math.max(0,(nt.series[0]?.fields.length??0)-1);let{builder:zt,prepData:Vt}=(0,a.useMemo)(()=>Nt===0?{builder:null,prepData:null}:Le({series:ht,totalSeries:ot,color:nt.color,orientation:rt,options:r,timeZone:p,theme:T}),[rt,p,i.data.structureRev,ot,ne,Nt,it,ft,pt,d,O,G,dt,lt?.valueSize,J,A,z,_t,ut,Y]);const Ut=(0,a.useMemo)(()=>Vt==null?[]:Vt(ht,nt.color),[Vt,ht,nt.color]);if(nt.warn!=null||zt==null)return(0,j.jsx)(m.a,{panelId:tt,fieldConfig:D,data:n,message:nt.warn??"",needsNumberField:!0});const B=G.showLegend&&b(zt,nt.series)?(0,j.jsx)(St,{data:nt.series,colorField:nt.color,...G}):null;return(0,j.jsx)(P.KU,{width:i.width,height:i.height,legend:B,children:(u,c)=>(0,j.jsx)(M.Z,{config:zt,data:Ut,width:u,height:c,children:i.options.tooltip.mode!==e.$N.None&&(0,j.jsx)(y.xl,{config:zt,maxWidth:r.tooltip.maxWidth,hoverMode:r.tooltip.mode===e.$N.Single?y.b3.xOne:y.b3.xAll,getDataLinks:(V,Z)=>ht[0].fields[V].getLinks?.({valueRowIndex:Z})??[],render:(V,Z,Wt,Ct,$t,qt,xt,kt)=>(0,j.jsx)(E.k,{series:ht[0],_rest:nt._rest,dataIdxs:Z,seriesIdx:Wt,mode:r.tooltip.mode,sortOrder:r.tooltip.sort,isPinned:Ct,maxHeight:r.tooltip.maxHeight,replaceVariables:w,dataLinks:kt,hideZeros:r.tooltip.hideZeros})})})})};var Ne=t(19550),ze=t(60641),Ve=t(6736),Ue=t(81942);const he=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],We=i=>{let n=i.value??0;const r=n<0;r&&(n*=-1);let D=he[0];for(const p of he)if(D=p,n<=D.value)break;const K=p=>{i.onChange(p*(r?-1:1))},L=()=>{i.onChange(i.value*-1)};return(0,j.jsxs)(Ne.Gy,{children:[(0,j.jsx)(ze.z,{value:D.value,options:he,onChange:K}),n!==0&&(0,j.jsx)(Ve.m,{content:"Require space from the right side",placement:"top",children:(0,j.jsx)("div",{children:(0,j.jsx)(Ue.S,{value:r,onChange:L,label:"RTL"})})})]})};var Ie=t(38075),le=t(91357);const He=(i,n,r)=>{if(n==="graph"){const D=r.angular,K=i.fieldConfig??{defaults:{},overrides:[]};if(D.xaxis?.mode==="series"){const L=i.transformations||[];L.push({id:"reduce",options:{reducers:je(D.xaxis?.values)}},{id:"transpose",options:{}}),i.transformations=L,K.overrides.push({matcher:{id:Ie.Ct.byName,options:"Field"},properties:[{id:"custom.axisPlacement",value:e.vM.Hidden}]}),i.fieldConfig=K,i.options={...i.options,groupWidth:1}}}return{}},je=i=>{const n=[];return i?.forEach(r=>{Object.values(le.gy).includes(r)?n.push(r):r==="current"?n.push(le.gy.lastNotNull):r==="total"?n.push(le.gy.sum):r==="avg"&&n.push(le.gy.mean)}),i?n:[le.gy.sum]};var Zt=t(18550);class Ke{getListWithDefaults(n){return n.getListAppender({name:Zt.m.BarChart,pluginId:"barchart",options:{showValue:e.yL.Never,legend:{calcs:[],displayMode:e.lm.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:r=>{r.options.barWidth=.8}}})}getSuggestionsForData(n){const r=this.getListWithDefaults(n),{dataSummary:D}=n;D.frameCount===1&&(!D.hasNumberField||!D.hasStringField||D.rowCountTotal>50||(r.append({name:Zt.m.BarChart}),D.numberFieldCount>1&&(r.append({name:Zt.m.BarChartStacked,options:{stacking:e.gs.Normal}}),r.append({name:Zt.m.BarChartStackedPercent,options:{stacking:e.gs.Percent}})),r.append({name:Zt.m.BarChartHorizontal,options:{orientation:$.wV.Horizontal}}),D.numberFieldCount>1&&(r.append({name:Zt.m.BarChartHorizontalStacked,options:{stacking:e.gs.Normal,orientation:$.wV.Horizontal}}),r.append({name:Zt.m.BarChartHorizontalStackedPercent,options:{orientation:$.wV.Horizontal,stacking:e.gs.Percent}}))))}}const we=new R.m(be).setPanelChangeHandler(He).useFieldConfig({standardOptions:{[Q.uo.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:X.Y.PaletteClassic}},[Q.uo.Links]:{settings:{showOneClick:!0}},[Q.uo.Actions]:{hideFromDefaults:!1}},useCustomConfig:i=>{const n=ve;i.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:n.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:n.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:st.t.fillGradient[0].value,settings:{options:st.t.fillGradient}}),i.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:e.NU.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:e.NU.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),i.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:e.Ly.Off},settings:{options:st.t.thresholdsDisplayModes},editor:Ot.D,override:Ot.D,process:et.hS,shouldApply:()=>!0}),Mt.rg(i,n),Ht.e(i)}}).setPanelOptions(i=>{i.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:"First string or time field"}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:$.wV.Auto,label:"Auto"},{value:$.wV.Horizontal,label:"Horizontal"},{value:$.wV.Vertical,label:"Vertical"}]},defaultValue:Bt.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Bt.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:n=>n.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Bt.xTickLabelSpacing,editor:We}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:e.yL.Auto,label:"Auto"},{value:e.yL.Always,label:"Always"},{value:e.yL.Never,label:"Never"}]},defaultValue:Bt.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:st.t.stacking},defaultValue:Bt.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Bt.groupWidth,settings:{min:0,max:1,step:.01},showIf:(n,r)=>n.stacking&&n.stacking!==e.gs.None?!1:Ze(r)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Bt.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Bt.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Bt.fullHighlight,showIf:n=>n.stacking===e.gs.None}),i.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),Rt.D(i,!1,!1,Rt.U),jt.H(i),Ft.I(i,!1)}).setSuggestionsSupplier(new Ke);function Ze(i){let n=0;if(i)for(const r of i)for(const D of r.fields)D.type===k.PU.number&&n++;return n}},70561:(te,mt,t)=>{t.d(mt,{k:()=>Ft});var R=t(74848),Q=t(59141),X=t(63739),et=t(7500),$=t(53823),k=t(14411),e=t(33409),st=t(69921),Mt=t(37813),Ht=t(69598),Rt=t(11044),jt=t(16725);const Ft=({series:Ot,_rest:j,dataIdxs:a,seriesIdx:m,mode:h=et.$N.Single,sortOrder:g=et.xB.None,isPinned:f,annotate:P,maxHeight:M,replaceVariables:y=I=>I,dataLinks:E,hideZeros:F})=>{const I=Ot.fields[0],_=(0,Q.cN)(I.display(I.values[a[0]])),Tt=(0,Mt.cp)(Ot.fields,I,a,m,h,g,b=>b.type===X.PU.number||b.type===X.PU.enum,F);j?.forEach(b=>{b.config.custom?.hideFrom?.tooltip||Tt.push({label:b.state?.displayName??b.name,value:(0,Rt.Sc)(b,b.values[a[0]])})});let gt;if(m!=null){const b=Ot.fields[m],St=E.some(U=>U.oneClick===!0);if(f||St){const U=a[m],q=(0,Ht.OG)(Ot,b,y,U);gt=(0,R.jsx)(k.S,{dataLinks:E,actions:q,annotate:P})}}const H=I.config.custom?.hideFrom?.tooltip?null:{label:I.type===X.PU.time?"":I.state?.displayName??I.name,value:_};return(0,R.jsxs)(st.i,{children:[H!=null&&(0,R.jsx)(e.A,{item:H,isPinned:f}),(0,R.jsx)($.o,{items:Tt,isPinned:f,scrollable:(0,jt.T5)({mode:h,maxHeight:M}),maxHeight:M}),gt]})}},16725:(te,mt,t)=>{t.d(mt,{B_:()=>Rt,Fg:()=>Ot,O2:()=>Ft,T5:()=>j});var R=t(63739),Q=t(23570),X=t(59141),et=t(16869),$=t(17177),k=t(66380),e=t(54430),st=t(7500),Mt=t(24415);function Ht(a){let m=new Map;return a.map(g=>({...g,fields:g.fields.map(f=>{if(f.type===R.PU.enum){let P=(0,Mt.M)(f.config,f.type),M=m.get(P);M||(M=[],m.set(P,M));let y=f.values.toArray().slice(),E=f.config.type.enum.text;if(M.length>0)for(let F=0;F<y.length;F++)y[F]+=M.length;return M.push(...E),f.config.type.enum.text=M,{...f,values:y}}return f})}))}function Rt(a,m,h,g){if(!a?.length)return null;(0,Q.Fm)(a);let f=g!=null;g!=null&&g>0&&(a=[{...a[0],fields:[a[0].fields[g],...a[0].fields.filter((E,F)=>F!==g)]}]);for(let E of a)for(let F of E.fields)F.type===R.PU.time&&typeof F.values[0]!="number"&&(F.values=(0,$.s7)(F,{destinationType:R.PU.time}).values);let P=0;t:for(let E of a)for(let F of E.fields)if(F.type===R.PU.enum&&++P>1){a=Ht(a);break t}let M;const y=[];for(let E of a){const F=[];let I=!1,_=!1,Tt=f?E:(0,k.M)({frame:E,refFieldPseudoMin:h?.from.valueOf(),refFieldPseudoMax:h?.to.valueOf()});const gt=(0,e.C)(Tt).fields;for(let H=0;H<(gt?.length||0);H++){const b=gt[H];switch(b.type){case R.PU.time:I=!0,F.push(b);break;case R.PU.number:_=f?H>0:!0,M={...b,values:b.values.map(q=>Number.isFinite(q)||q==null?q:null)},F.push(M);break;case R.PU.enum:_=!0;case R.PU.string:M={...b,values:b.values},F.push(M);break;case R.PU.boolean:_=!0;const St=b.config?.custom??{},U={...b.config,max:1,min:0,custom:St};St.lineInterpolation!==st.dx.StepBefore&&(St.lineInterpolation=st.dx.StepAfter),M={...b,config:U,type:R.PU.number,values:b.values.map(q=>q==null?q:q?1:0)},(0,X.j9)(U.unit)||(U.unit="bool",M.display=(0,et.J)({field:M,theme:m})),F.push(M);break}}(f||I)&&_&&y.push({...E,length:Tt.length,fields:F})}return y.length?(Ft(y,m,0),jt(y,m),y):null}const jt=(a,m)=>{const{palette:h}=m.visualization;for(const g of a)for(const f of g.fields)if(f.type===R.PU.enum){const P=h[f.state?.seriesIndex%h.length],M=m.visualization.getColorByName(P),y=f.config.type.enum;y.color=Array(y.text.length).fill(M),f.display=(0,et.J)({field:f,theme:m})}},Ft=(a,m,h)=>{let g=0;a.forEach(f=>{f.fields.forEach((P,M)=>{M!==h&&(P.type===R.PU.number||P.type===R.PU.boolean||P.type===R.PU.enum)&&(P.state={...P.state,seriesIndex:g++},P.display=(0,et.J)({field:P,theme:m}))})})};function Ot(a,m){return!a||!a.length?[m]:a.map(h=>h?.length?h:m)}const j=a=>a.mode===st.$N.Multi&&a.maxHeight!=null},61733:(te,mt,t)=>{t.d(mt,{Oq:()=>X,QB:()=>$,it:()=>Q,uZ:()=>R});var R=(e=>(e.Circle="circle",e.Square="square",e))(R||{}),Q=(e=>(e.Auto="auto",e.Manual="manual",e))(Q||{}),X=(e=>(e.Lines="lines",e.Points="points",e.PointsAndLines="points+lines",e))(X||{});const et={id:""},$={fillOpacity:50,show:"points"},k={series:[]}},11044:(te,mt,t)=>{t.d(mt,{Sc:()=>Ht,hV:()=>jt,rE:()=>Ot});var R=t(59141),Q=t(38075),X=t(23570),et=t(40462),$=t(63739),k=t(62931),e=t(32370),st=t(7500),Mt=t(61733);function Ht(a,m){return a.display?(0,R.cN)(a.display(m)):`${m}`}function Rt(a){return a.id===Q.jR.byIndex?(m,h)=>h===a.options:()=>!1}function jt(a,m,h,g){(0,X.Fm)(h),(0,X.j2)(h,g);let f=[];m.length===0&&(m=[{}]);const{palette:P,getColorByName:M}=e.$.theme2.visualization;if(m.forEach((y,E)=>{if(a===Mt.it.Manual&&(y.frame?.matcher==null||y.x?.matcher==null||y.y?.matcher==null))return;let F=(0,et.NS)(y.x?.matcher??{id:Q.Ct.byType,options:"number"}),I=(0,et.NS)(y.y?.matcher??{id:Q.Ct.byType,options:"number"}),_=y.color?(0,et.NS)(y.color.matcher):null,Tt=y.size?(0,et.NS)(y.size.matcher):null,gt=y.frame?Rt(y.frame.matcher):null;h.forEach((H,b)=>{if(gt!=null&&!gt(H,b))return;let St=[],U=[],q=H.fields.filter(N=>N.type===$.PU.number),Kt=q.find(N=>F(N,H,h)),Jt=_!=null?q.find(N=>N!==Kt&&_(N,H,h)):void 0,Pt=Tt!=null?q.find(N=>N!==Kt&&N!==Jt&&Tt(N,H,h)):void 0;Kt!=null&&(q.forEach(N=>{if(N!==Kt&&!(a===Mt.it.Auto&&(N===Jt||N===Pt))&&!(a===Mt.it.Manual&&U.length>0)&&I(N,H,h)&&!N.config.custom?.hideFrom?.viz){let W=N,Dt=y.name?.fixed;if(Dt==null){const ee=h.length>1&&(H.name!=null||Object.keys(W.labels??{}).length>0),{displayName:wt,displayNameFromDS:ie}=W.config,At=wt!=null||ie!=null;if(ee&&At){const Qt=W.state.displayName;W.config.displayName=W.config.displayNameFromDS=W.state.displayName=void 0,Dt=(0,X.Ct)(W,H,h),Dt=Dt.replace(W.name,ie??wt),W.config.displayName=wt,W.config.displayNameFromDS=ie,W.state.displayName=Qt}else Dt=(0,X.Ct)(W,H,h)}let Lt={name:{value:Dt},showPoints:W.config.custom.show===Mt.Oq.Lines?st.yL.Never:st.yL.Always,pointShape:W.config.custom.pointShape,pointStrokeWidth:W.config.custom.pointStrokeWidth,fillOpacity:W.config.custom.fillOpacity,showLine:W.config.custom.show!==Mt.Oq.Points,lineWidth:W.config.custom.lineWidth??2,lineStyle:W.config.custom.lineStyle,x:{field:Kt},y:{field:W},color:{},size:{},_rest:St};Jt!=null&&(Lt.color.field=Jt),Pt!=null&&(Lt.size.field=Pt,Lt.size.min=Pt.config.custom.pointSize?.min??5,Lt.size.max=Pt.config.custom.pointSize?.max??100),U.push(Lt)}}),U.length,H.fields.forEach(N=>{U.some(({x:Dt,y:Lt,color:ee,size:wt})=>Dt.field===N||Lt.field===N||ee.field===N||wt.field===N)||St.push(N)}),f.push(...U))})}),f.length!==0){let y=0;f.forEach((E,F)=>{if(E.color.field==null){let I=E.y.field.config.color??{mode:k.Y.PaletteClassic},_="";I.mode===k.Y.PaletteClassic?_=M(P[y++%P.length]):I.mode===k.Y.Fixed&&(_=M(I.fixedColor)),E.color.fixed=_}E.size.field==null&&(E.size.fixed=E.y.field.config.custom.pointSize?.fixed??5)}),Ft(f)}return f}function Ft(a){let m=a.map(f=>f.name.value.split(/\s+/g));const{prefix:h,suffix:g}=j(m);(h<1/0||g<1/0)&&a.forEach((f,P)=>{f.name.value=m[P].slice(h,m[P].length-g).join(" ")})}function Ot(a){let m=a.map(M=>M.split(/\s+/g)),{prefix:h,suffix:g}=j(m),f=m[0];if(f.length===1&&h===1&&g===1)return"";let P=[];return h>0&&P.push(...f.slice(0,h)),g>0&&P.push(...f.slice(-g)),P.join(" ")}function j(a){let m=1/0,h=1/0,g=a[0];for(let f=1;f<a.length;f++)a[f].length<g.length&&(g=a[f]);for(let f=1;f<a.length;f++){let P=a[f];if(P!==g){let M=0;for(let E=0;E<g.length&&P[E]===g[E];E++)M++;M<m&&(m=M);let y=0;for(let E=g.length-1;E>=0&&P[E]===g[E];E--)y++;y<h&&(h=y)}}return{prefix:m,suffix:h}}}}]);

//# sourceMappingURL=barChartPanel.51ffd90ee6a5d55f641c.js.map