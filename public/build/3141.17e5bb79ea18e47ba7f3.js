"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3141],{63141:(ge,U,h)=>{h.d(U,{F:()=>ot});var i=h(74848),v=h(22803),B=h(46942),$=h.n(B),f=h(96540),fe=h(71473),R=h(29675),me=h(20968),J=h(79784);function Q({id:e="triangle",fill:n=q,headHeight:t=10}){return(0,i.jsx)("defs",{children:(0,i.jsx)("marker",{id:e,viewBox:"0 0 10 10",refX:"1",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:t,markerHeight:t,orient:"auto",children:(0,i.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:n})})})}var w=h(79978),k=h(3241);const he="#a00",q="#999",xe=(0,f.memo)(function(n){const{edge:t,onClick:s,onMouseEnter:o,onMouseLeave:r,hovering:d,svgIdNamespace:a}=n,{source:l,target:m,sourceNodeRadius:c,targetNodeRadius:u}=t,g=10+t.thickness*2,x=(0,k.a0)({x1:l.x,y1:l.y,x2:m.x,y2:m.y},c+(0,w.Hj)(c)/2||w.h,u+(0,w.Hj)(u)/2||w.h,g),y=t.color||q,j=t.color||he,p=`triangle-${a}-${t.id}`,C=`triangle-colored-${a}-${t.id}`;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q,{id:p,fill:y,headHeight:g}),(0,i.jsx)(Q,{id:C,fill:j,headHeight:g}),(0,i.jsxs)("g",{onClick:E=>s(E,t),style:{cursor:"pointer"},"aria-label":`Edge from: ${l.id} to: ${m.id}`,children:[(0,i.jsx)("line",{strokeWidth:(d?1:0)+(t.highlighted?1:0)+t.thickness,stroke:t.highlighted?j:y,x1:x.x1,y1:x.y1,x2:x.x2,y2:x.y2,strokeDasharray:t.strokeDasharray,markerEnd:`url(#${t.highlighted?C:p})`}),(0,i.jsx)("line",{stroke:"transparent",x1:x.x1,y1:x.y1,x2:x.x2,y2:x.y2,strokeWidth:20,onMouseEnter:()=>{o(t.id)},onMouseLeave:()=>{r(t.id)}})]})]})}),pe=e=>({mainGroup:(0,v.css)({pointerEvents:"none",fontSize:"8px"}),background:(0,v.css)({fill:e.components.tooltip.background}),text:(0,v.css)({fill:e.components.tooltip.text})}),ve=(0,f.memo)(function(n){const{edge:t}=n,{source:s,target:o,sourceNodeRadius:r,targetNodeRadius:d}=t,a=(0,k.a0)({x1:s.x,y1:s.y,x2:o.x,y2:o.y},r||w.h,d||w.h),l={x:a.x1+(a.x2-a.x1)/2,y:a.y1+(a.y2-a.y1)/2},m=(0,R.of)(pe),c=[t.mainStat,t.secondaryStat].filter(j=>j),u=c.length>1?"30":"15",g=c.length>1?15:7.5;let x=c.length>1?-5:2.5;const y=[];return c.forEach((j,p)=>{y.push((0,i.jsx)("text",{className:m.text,x:l.x,y:l.y+x,textAnchor:"middle",children:j},p)),x+=15}),(0,i.jsxs)("g",{className:m.mainGroup,children:[(0,i.jsx)("rect",{className:m.background,x:l.x-40,y:l.y-g,width:"80",height:u,rx:"5"}),y]})});var _=h(62931),ye=h(7500),Ce=h(43987),Me=h(83333);function je(){return{item:(0,v.css)({label:"LegendItem",flexGrow:0}),legend:(0,v.css)({label:"Legend",pointerEvents:"all"})}}const Le=function(n){const{nodes:t,onSort:s,sort:o,sortable:r}=n,d=(0,R.$j)(),a=(0,R.of)(je),l=be(t,d),m=(0,f.useCallback)(c=>{s({field:c.data.field,ascending:c.data.field===o?.field?!o?.ascending:!1})},[o,s]);return(0,i.jsx)(Ce.t,{className:a.legend,displayMode:ye.lm.List,placement:"bottom",items:l,itemRenderer:c=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Me.M,{item:c,className:a.item,onLabelClick:r?m:void 0}),r&&(o?.field===c.data.field?(0,i.jsx)(J.I,{name:o.ascending?"arrow-up":"arrow-down"}):"")]})})};function be(e,n){if(!e.length)return[];const t=[e[0].mainStat,e[0].secondaryStat].filter(o=>!!o),s=e.find(o=>o.arcSections.length>0);return s&&s.arcSections[0].config?.color?.mode===_.Y.Fixed&&t.push(...new Set(e.map(o=>o.arcSections).flat())),e[0].color&&t.push(e[0].color),t.map(o=>{const r={label:o.config.displayName||o.name,yAxis:0,data:{field:o}};return o.config.color?.mode===_.Y.Fixed&&o.config.color?.fixedColor?r.color=n.visualization.getColorByName(o.config.color?.fixedColor||""):o.config.color?.mode&&(r.gradient=o.config.color?.mode),r.color||r.gradient||(r.color=n.visualization.getColorByName("")),r})}const Se=40,Ie=e=>({mainGroup:(0,v.css)({cursor:"pointer",fontSize:"10px"}),mainCircle:(0,v.css)({fill:e.components.panel.background,stroke:e.colors.border.strong}),text:(0,v.css)({width:"50px",height:"50px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"})}),Ee=(0,f.memo)(function(n){const{marker:t,onClick:s}=n,{node:o}=t,r=(0,R.of)(Ie);return o.x!==void 0&&o.y!==void 0?(0,i.jsxs)("g",{"data-node-id":o.id,className:r.mainGroup,onClick:d=>{s?.(d,t)},"aria-label":`Hidden nodes marker: ${o.id}`,children:[(0,i.jsx)("circle",{className:r.mainCircle,r:Se,cx:o.x,cy:o.y}),(0,i.jsx)("g",{children:(0,i.jsx)("foreignObject",{x:o.x-25,y:o.y-25,width:"50",height:"50",children:(0,i.jsx)("div",{className:r.text,children:(0,i.jsxs)("span",{children:[t.count>100?">100":t.count," nodes"]})})})})]}):null});var Y=h(19550),F=h(54594);function Ne(){return{wrapper:(0,v.css)({label:"wrapper",pointerEvents:"all"})}}function ke(e){const{config:n,onConfigChange:t,onPlus:s,onMinus:o,disableZoomOut:r,disableZoomIn:d}=e,[a,l]=(0,f.useState)(!1),m=!1,c=(0,R.of)(Ne);return(0,i.jsxs)("div",{className:c.wrapper,children:[(0,i.jsxs)(Y.gW,{spacing:"sm",children:[(0,i.jsxs)(Y.Gy,{spacing:"xs",children:[(0,i.jsx)(F.$n,{icon:"plus-circle",onClick:s,size:"md",title:"Zoom in",variant:"secondary",disabled:d}),(0,i.jsx)(F.$n,{icon:"minus-circle",onClick:o,size:"md",title:"Zoom out",variant:"secondary",disabled:r})]}),(0,i.jsxs)(Y.Gy,{spacing:"xs",children:[(0,i.jsx)(F.$n,{icon:"code-branch",onClick:()=>t({...n,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!n.gridLayout}),(0,i.jsx)(F.$n,{icon:"apps",onClick:()=>t({...n,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:n.gridLayout})]})]}),m&&(0,i.jsx)(F.$n,{size:"xs",fill:"text",onClick:()=>l(u=>!u),children:a?"Hide config":"Show config"}),m&&a&&Object.keys(n).filter(u=>u!=="show").map(u=>(0,i.jsxs)("div",{children:[u,(0,i.jsx)("input",{style:{width:50},type:"number",value:n[u],onChange:g=>{t({...n,[u]:parseFloat(g.target.value)})}})]},u))]})}var O=h(2543),He=h(64305),Z=h(13876),Re=h(32370),ee=h(89956);const we=()=>new ee.c(new URL(h.p+h.u(2446),h.b)),Pe=()=>new ee.c(new URL(h.p+h.u(1183),h.b));function ze(e,n,t,s,o){const[r,d]=(0,f.useMemo)(()=>{if(!(e.length&&n.length))return[{},{}];const a=n.reduce((m,c)=>(m[c.source.id]=[...m[c.source.id]??[],c],m[c.target.id]=[...m[c.target.id]??[],c],m),{}),l=e.reduce((m,c)=>(m[c.id]=c,m),{});return[a,l]},[n,e]);return(0,f.useMemo)(()=>e.length<=t?{nodes:e,edges:n}:s.gridLayout?Fe(e,t,o):Ge(e,n,d,r,t,o),[n,r,t,e,d,o,s.gridLayout])}function Ge(e,n,t,s,o,r){let d;r?d=[t[r]]:(d=e.filter(g=>g.incoming===0),d.length||(d=[e[0]]));const{visibleNodes:a,markers:l}=De(o,d,t,s),m=$e(l,a,t,s),c=(0,O.fromPairs)(m.map(g=>[g.node.id,g]));for(const g of m)g.count===1&&(delete c[g.node.id],a[g.node.id]=g.node);const u=n.filter(g=>(a[g.source.id]||c[g.source.id])&&(a[g.target.id]||c[g.target.id]));return{nodes:Object.values(a),edges:u,markers:Object.values(c)}}function Fe(e,n,t){let s=0,o=n,r=[];if(t){const d=e.findIndex(m=>m.id===t),a=Math.floor(n/2);let l=a;s=d-a,s<0&&(l+=Math.abs(s),s=0),o=d+l+1,o>e.length&&(s>0&&(s=Math.max(0,s-(o-e.length))),o=e.length),s>1&&r.push({node:e[s-1],count:s}),e.length-o>1&&r.push({node:e[o],count:e.length-o})}else e.length-n>1&&(r=[{node:e[n],count:e.length-n}]);return{nodes:e.slice(s,o),edges:[],markers:r}}function De(e,n,t,s){const o={};let r=[...n];for(;Object.keys(o).length<e&&r.length>0;){let a=r.shift();if(o[a.id])continue;o[a.id]=a;const m=(s[a.id]||[]).map(c=>{const u=c.source.id===a.id?c.target.id:c.source.id;return t[u]});r=r.concat(m)}const d=(0,O.uniq)(r.filter(a=>!o[a.id]));return{visibleNodes:o,markers:d}}function $e(e,n,t,s){return e.map(o=>{const r={};let d=0,a=[o];for(;a.length>0&&d<=101;){let l=a.shift();if(n[l.id]||r[l.id])continue;r[l.id]||d++,r[l.id]=l;const c=(s[l.id]||[]).map(u=>{const g=u.source.id===l.id?u.target.id:u.source.id;return t[g]});a=a.concat(c)}return{node:o,count:d}})}const V={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function Oe(e,n,t=V,s,o,r,d){const[a,l]=(0,f.useState)([]),[m,c]=(0,f.useState)([]),[u,g]=(0,f.useState)(!1),x=(0,Z.default)(),y=(0,f.useRef)();(0,He.A)(()=>{y.current&&y.current()}),(0,f.useEffect)(()=>{if(e.length===0){l([]),c([]),g(!1);return}if(d){l(e);const M=(0,O.fromPairs)(e.map(L=>[L.id,L]));c(n.map(L=>({...L,source:M[L.source],target:M[L.target]}))),g(!1);return}const b=Re.$.featureToggles.nodeGraphDotLayout&&e.length<=500?"layered":"default";g(!0);const S=We(e,n,b,({nodes:M,edges:L})=>{x()&&(l(M),c(L),g(!1))});return y.current=S,S},[d,e,n,x]);const[j,p]=(0,f.useMemo)(()=>{if(e.length===0)return[[],[]];const b=e.map(M=>({...M})),S=n.map(M=>({...M}));return Te(b,o,t.sort),[b,S]},[t.sort,e,n,o]),{nodes:C,edges:E,markers:P}=ze(t.gridLayout?j:a,t.gridLayout?p:m,s,t,r),H=(0,f.useMemo)(()=>(0,k._d)([...C,...(P||[]).map(b=>b.node)]),[C,P]);return{nodes:C,edges:E,markers:P,bounds:H,hiddenNodesCount:e.length-C.length,loading:u}}function We(e,n,t,s){const o=t==="default"?we():Pe();return o.onmessage=r=>{const d=(0,O.fromPairs)(e.map(a=>[a.id,a]));r.data.nodes=r.data.nodes.map(a=>({...d[a.id],...a})),s(r.data)},o.postMessage({nodes:e.map(r=>({id:r.id,incoming:r.incoming})),edges:n,config:V}),()=>{o.terminate()}}function Te(e,n,t){const d=Math.min(Math.floor((n-120)/140),e.length),a=Math.floor((d-1)*120/2);t&&e.sort((l,m)=>{const c=t.field.values[l.dataFrameRowIndex],u=t.field.values[m.dataFrameRowIndex];return t.ascending?c-u:u-c});for(const[l,m]of e.entries()){const c=Math.floor(l/d),u=l%d;m.x=u*120-a,m.y=-60+c*140}}var Ae=h(36752),Ue=h(41784),Be=h(76795),Ye=h(36529);function Ze(e,n,t,s,o,r){const[d,a]=(0,f.useState)(void 0),l=(0,f.useCallback)((c,u)=>{const[g,x]=s.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],y=[{label:g,onClick:C=>{r(C.id),o({...s,gridLayout:x}),a(void 0)}}],j=n?e(n,u.dataFrameRowIndex):[],p=ne(j,u,y);a(te((0,i.jsx)(Ke,{node:u,nodes:n}),c,a,p))},[s,n,e,a,o,r]);return{onEdgeOpen:(0,f.useCallback)((c,u)=>{if(!t)return;const g=e(t,u.dataFrameRowIndex),x=ne(g,u);a(te((0,i.jsx)(Xe,{edge:u,edges:t}),c,a,x))},[t,e,a]),onNodeOpen:l,MenuComponent:d}}function te(e,n,t,s){return(0,i.jsx)(Ue.t,{renderHeader:()=>e,renderMenuItems:s,onClose:()=>t(void 0),x:n.pageX,y:n.pageY})}function ne(e,n,t){if(!(e.length||t?.length))return;const s=Ve(e);return()=>{let o=s?.map((r,d)=>(0,i.jsx)(Be.r,{label:r.label,children:(r.items||[]).map(oe(n))},`${r.label}${d}`));return t&&(o=[...t.map(oe(n)),...o]),o}}function oe(e){return function(t){return(0,i.jsx)(Ye.D,{url:t.url,label:t.label,ariaLabel:t.ariaLabel,onClick:t.onClick?s=>{s?.ctrlKey||s?.metaKey||s?.shiftKey||(s?.preventDefault(),s?.stopPropagation(),t.onClick?.(e))}:void 0,target:t.target||"_self"},t.label)}}function Ve(e){const n="Open in Explore",t=e.reduce((s,o)=>{let r,d;return o.title.indexOf("/")!==-1?(r=o.title.split("/")[0],d=o.title.split("/")[1],s[r]=s[r]||[],s[r].push({l:o,newTitle:d})):(s[n]=s[n]||[],s[n].push({l:o})),s},{});return Object.keys(t).map(s=>({label:s,ariaLabel:s,items:t[s].map(o=>({label:o.newTitle||o.l.title,ariaLabel:o.newTitle||o.l.title,url:o.l.href,onClick:o.l.onClick,target:o.l.target}))}))}function se({field:e,index:n}){return(0,i.jsx)(W,{label:e.config?.displayName||e.name,value:(0,k.Xq)(e.config,e.values[n]||"")})}function W({label:e,value:n}){const t=(0,R.of)(Je);return(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{className:t.label,children:[e,": "]}),(0,i.jsx)("td",{className:t.value,children:n})]})}function Ke({node:e,nodes:n}){const t=[];if(n){const s=(0,k.AG)(n);for(const o of[s.title,s.subTitle,s.mainStat,s.secondaryStat,...s.details])o&&o.values[e.dataFrameRowIndex]&&t.push((0,i.jsx)(se,{field:o,index:e.dataFrameRowIndex},o.name))}else e.title&&t.push((0,i.jsx)(W,{label:"Title",value:e.title},"title")),e.subTitle&&t.push((0,i.jsx)(W,{label:"Subtitle",value:e.subTitle},"subtitle"));return(0,i.jsx)("table",{style:{width:"100%"},children:(0,i.jsx)("tbody",{children:t})})}function Xe(e){const n=e.edge.dataFrameRowIndex,t=(0,k.tF)(e.edges),s=t.source?.values[n]||"",o=t.target?.values[n]||"",r=[];s&&o&&r.push((0,i.jsx)(W,{label:"Source \u2192 Target",value:`${s} \u2192 ${o}`},"header-row"));for(const d of[t.mainStat,t.secondaryStat,...t.details])d&&d.values[n]&&r.push((0,i.jsx)(se,{field:d,index:n},`field-row-${n}`));return(0,i.jsx)("table",{style:{width:"100%"},children:(0,i.jsx)("tbody",{children:r})})}const Je=e=>({label:(0,v.css)({label:"Label",lineHeight:1.25,color:e.colors.text.disabled,fontSize:e.typography.size.sm,fontWeight:e.typography.fontWeightMedium,paddingRight:e.spacing(1)}),value:(0,v.css)({label:"Value",fontSize:e.typography.size.sm,fontWeight:e.typography.fontWeightMedium,color:e.colors.text.primary})});var ie=h(80292);function Qe(e,n,t){const s=(0,ie.A)(e.gridLayout);let o;if(s===!0&&!e.gridLayout&&t){const r=n.find(d=>d.id===t);r&&(o={x:-r.x,y:-r.y})}return o}function qe(e){const[n,t]=(0,f.useState)(),s=(0,Z.default)();return(0,f.useEffect)(()=>{e&&(t(e),setTimeout(()=>{s()&&t(void 0)},500))},[e,s]),n}function _e({scale:e=1,bounds:n,focus:t}={}){const s=(0,Z.default)(),o=(0,f.useRef)(!1),r=(0,f.useRef)(0),d=(0,f.useRef)(null),a={x:0,y:0},l=(0,f.useMemo)(()=>({right:n?-n.left:1/0,left:n?-n.right:-1/0,bottom:n?-n.top:-1/0,top:n?-n.bottom:1/0}),[n]),m=(0,f.useRef)(a),c=(0,f.useRef)(a),u=(0,f.useRef)(a),[g,x]=(0,f.useState)({isPanning:!1,position:a});(0,f.useEffect)(()=>{const p=M=>{!o.current&&s()&&(o.current=!0,m.current=re(M),c.current={...u.current},x(L=>({...L,isPanning:!0})),P())},C=()=>{o.current&&s()&&(o.current=!1,x(M=>({...M,isPanning:!1})),H())},E=M=>{p(M),b(M)},P=()=>{document.addEventListener("mousemove",b),document.addEventListener("mouseup",C),document.addEventListener("touchmove",b),document.addEventListener("touchend",C)},H=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",C),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",C)},b=M=>{cancelAnimationFrame(r.current);const L=re(M);r.current=requestAnimationFrame(()=>{if(s()&&d.current){let D=L.x-m.current.x,G=L.y-m.current.y;u.current={x:z(c.current.x+D/e,l.left,l.right),y:z(c.current.y+G/e,l.top,l.bottom)},x(X=>({...X,position:{...u.current}}))}})},S=d.current;return S&&(S.addEventListener("mousedown",E),S.addEventListener("touchstart",E)),()=>{S&&(S.removeEventListener("mousedown",E),S.removeEventListener("touchstart",E))}},[e,l,s]);const y=(0,ie.A)(t);(0,f.useEffect)(()=>{if(t&&y?.x!==t.x&&y?.y!==t.y){const p={x:z(t.x,l.left,l.right),y:z(t.y,l.top,l.bottom)};x({position:p,isPanning:!1}),u.current=p,c.current=p}},[t,y,l,u,c]);let j=g.position;return t&&y?.x!==t.x&&y?.y!==t.y&&(j=t),{state:{...g,position:{x:z(j.x,l.left,l.right),y:z(j.y,l.top,l.bottom)}},ref:d}}function z(e,n,t){return Math.min(Math.max(e,n??-1/0),t??1/0)}function re(e){return"changedTouches"in e&&e instanceof TouchEvent?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:e instanceof MouseEvent?{x:e.clientX,y:e.clientY}:{x:0,y:0}}var K=(e=>(e.Cooperative="cooperative",e.Greedy="greedy",e))(K||{});const T={stepUp:e=>e*1.5,stepDown:e=>e/1.5,min:.13,max:2.25,zoomMode:K.Cooperative};function et(e=T){const{min:n,max:t,zoomMode:s}={...T,...e},o=e.stepUp??T.stepUp,r=e.stepDown??T.stepDown,d=(0,f.useRef)(null),[a,l]=(0,f.useState)(1),m=(0,f.useCallback)(()=>{a<(t??1/0)&&l(o(a))},[a,o,t]),c=(0,f.useCallback)(()=>{a>(n??-1/0)&&l(r(a))},[a,r,n]),u=(0,f.useCallback)(function(g){if(g.ctrlKey||g.metaKey||s===K.Greedy){if(g.preventDefault(),l(Math.min(Math.max(n??-1/0,a+Math.min(g.deltaY,2)*-.01),t??1/0)),g.deltaY<0){const x=a+Math.max(g.deltaY,-4)*-.015;l(Math.max(n??-1/0,x))}else if(g.deltaY>0){const x=a+Math.min(g.deltaY,4)*-.015;l(Math.min(t??1/0,x))}}},[n,t,a,s]);return(0,f.useEffect)(()=>{if(!d.current)return;const g=d.current;return g.addEventListener("wheel",u,{passive:!1}),()=>{g&&g.removeEventListener("wheel",u)}},[u]),{onStepUp:m,onStepDown:c,scale:Math.max(Math.min(a,t??1/0),n??-1/0),isMax:a>=(t??1/0),isMin:a<=(n??-1/0),ref:d}}const tt=e=>({wrapper:(0,v.css)({label:"wrapper",height:"100%",width:"100%",overflow:"hidden",position:"relative"}),svg:(0,v.css)({label:"svg",height:"100%",width:"100%",overflow:"visible",fontSize:"10px",cursor:"move"}),svgPanning:(0,v.css)({label:"svgPanning",userSelect:"none"}),noDataMsg:(0,v.css)({height:"100%",width:"100%",display:"grid",placeItems:"center",fontSize:e.typography.h4.fontSize,color:e.colors.text.secondary}),mainGroup:(0,v.css)({label:"mainGroup",willChange:"transform"}),viewControls:(0,v.css)({label:"viewControls",position:"absolute",left:"2px",bottom:"3px",right:0,display:"flex",alignItems:"flex-end",justifyContent:"space-between",pointerEvents:"none"}),legend:(0,v.css)({label:"legend",background:e.colors.background.secondary,boxShadow:e.shadows.z1,paddingBottom:"5px",marginRight:"10px"}),viewControlsWrapper:(0,v.css)({marginLeft:"auto"}),alert:(0,v.css)({label:"alert",padding:"5px 8px",fontSize:"10px",textShadow:"0 1px 0 rgba(0, 0, 0, 0.2)",borderRadius:e.shape.radius.default,alignItems:"center",position:"absolute",top:0,right:0,background:e.colors.warning.main,color:e.colors.warning.contrastText}),loadingWrapper:(0,v.css)({label:"loadingWrapper",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"})}),nt=200;function ot({getLinks:e,dataFrames:n,nodeLimit:t,panelId:s,zoomMode:o}){const r=t||nt,{edges:d,nodes:a}=(0,Ae.d)(n),[l,{width:m,height:c}]=(0,fe.A)(),[u,g]=(0,f.useState)(V),x=a[0],y=d[0],j=s||"nodegraphpanel",p=(0,f.useMemo)(()=>(0,k.BJ)(x,y),[y,x]),{nodeHover:C,setNodeHover:E,clearNodeHover:P,edgeHover:H,setEdgeHover:b,clearEdgeHover:S}=ct(),[M,L]=(0,f.useState)([]);(0,f.useEffect)(()=>{let I=[];C?I=(0,k.Tl)(p.nodes,p.edges,C):H&&(I=(0,k.K0)(p.nodes,p.edges,H)),L(I)},[C,H,p]);const[D,G]=(0,f.useState)(),X=(0,f.useCallback)((I,St)=>G(St.node.id),[G]),{nodes:A,edges:ae,markers:dt,bounds:ut,hiddenNodesCount:le,loading:gt}=Oe(p.nodes,p.edges,u,r,m,D,p.hasFixedPositions),ft=Qe(u,A,D),{panRef:mt,zoomRef:ce,onStepUp:ht,onStepDown:xt,isPanning:pt,position:de,scale:ue,isMaxZoom:vt,isMinZoom:yt}=lt(ut,ft,o),{onEdgeOpen:Ct,onNodeOpen:Mt,MenuComponent:jt}=Ze(e,x,y,u,g,G),N=(0,R.of)(tt),Lt=(0,f.useCallback)(I=>{l(I),ce.current=I},[l,ce]),bt=qe(D);return(0,i.jsxs)("div",{ref:Lt,className:N.wrapper,children:[gt?(0,i.jsxs)("div",{className:N.loadingWrapper,children:["Computing layout\xA0",(0,i.jsx)(me.y,{})]}):null,n.length&&p.nodes.length?(0,i.jsx)("svg",{ref:mt,viewBox:`${-(m/2)} ${-(c/2)} ${m} ${c}`,className:$()(N.svg,pt&&N.svgPanning),children:(0,i.jsxs)("g",{className:N.mainGroup,style:{transform:`scale(${ue}) translate(${Math.floor(de.x)}px, ${Math.floor(de.y)}px)`},children:[!u.gridLayout&&(0,i.jsx)(rt,{edges:ae,nodeHoveringId:C,edgeHoveringId:H,onClick:Ct,onMouseEnter:b,onMouseLeave:S,svgIdNamespace:j}),(0,i.jsx)(st,{nodes:A,onMouseEnter:E,onMouseLeave:P,onClick:Mt,hoveringIds:M||[bt]}),(0,i.jsx)(it,{markers:dt||[],onClick:X}),!u.gridLayout&&(0,i.jsx)(at,{edges:ae,nodeHoveringId:C,edgeHoveringId:H})]})}):(0,i.jsx)("div",{className:N.noDataMsg,children:"No data"}),(0,i.jsxs)("div",{className:N.viewControls,children:[A.length?(0,i.jsx)("div",{className:N.legend,children:(0,i.jsx)(Le,{sortable:u.gridLayout,nodes:A,sort:u.sort,onSort:I=>{g({...u,sort:I})}})}):null,(0,i.jsx)("div",{className:N.viewControlsWrapper,children:(0,i.jsx)(ke,{config:u,onConfigChange:I=>{I.gridLayout!==u.gridLayout&&G(void 0),g(I)},onMinus:xt,onPlus:ht,scale:ue,disableZoomIn:vt,disableZoomOut:yt})})]}),le>0&&(0,i.jsxs)("div",{className:N.alert,"aria-label":"Nodes hidden warning",children:[(0,i.jsx)(J.I,{size:"sm",name:"info-circle"})," ",le," nodes are hidden for performance reasons."]}),jt]})}const st=(0,f.memo)(function(n){return(0,i.jsx)(i.Fragment,{children:n.nodes.map(t=>(0,i.jsx)(w.bP,{node:t,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,onClick:n.onClick,hovering:!n.hoveringIds||n.hoveringIds.length===0?"default":n.hoveringIds?.includes(t.id)?"active":"inactive"},t.id))})}),it=(0,f.memo)(function(n){return(0,i.jsx)(i.Fragment,{children:n.markers.map(t=>(0,i.jsx)(Ee,{marker:t,onClick:n.onClick},"marker-"+t.node.id))})}),rt=(0,f.memo)(function(n){return(0,i.jsx)(i.Fragment,{children:n.edges.map(t=>(0,i.jsx)(xe,{edge:t,hovering:t.source.id===n.nodeHoveringId||t.target.id===n.nodeHoveringId||n.edgeHoveringId===t.id,onClick:n.onClick,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,svgIdNamespace:n.svgIdNamespace},t.id))})}),at=(0,f.memo)(function(n){return(0,i.jsx)(i.Fragment,{children:n.edges.map((t,s)=>{const o=t.source.id===n.nodeHoveringId||t.target.id===n.nodeHoveringId||n.edgeHoveringId===t.id,r=t.mainStat||t.secondaryStat;return o&&r&&(0,i.jsx)(ve,{edge:t},t.id)})})});function lt(e,n,t){const{scale:s,onStepDown:o,onStepUp:r,ref:d,isMax:a,isMin:l}=et({zoomMode:t}),{state:m,ref:c}=_e({scale:s,bounds:e,focus:n}),{position:u,isPanning:g}=m;return{zoomRef:d,panRef:c,position:u,isPanning:g,scale:s,onStepDown:o,onStepUp:r,isMaxZoom:a,isMinZoom:l}}function ct(){const[e,n]=(0,f.useState)(void 0),t=(0,f.useCallback)(()=>n(void 0),[n]),[s,o]=(0,f.useState)(void 0),r=(0,f.useCallback)(()=>o(void 0),[o]);return{nodeHover:e,setNodeHover:n,clearNodeHover:t,edgeHover:s,setEdgeHover:o,clearEdgeHover:r}}},36752:(ge,U,h)=>{h.d(U,{d:()=>B});var i=h(96540),v=h(3241);function B($){return(0,i.useMemo)(()=>(0,v.CP)($),[$])}}}]);

//# sourceMappingURL=3141.17e5bb79ea18e47ba7f3.js.map