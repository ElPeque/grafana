"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7110],{98959:(X,N,n)=>{n.d(N,{r:()=>o});var s=n(74848),e=n(31952);const o=({onChange:D,options:I,label:r})=>(0,s.jsx)(e.i,{icon:"plus",label:r,variant:"secondary",options:I,onChange:D,isFullWidth:!0})},72166:(X,N,n)=>{n.d(N,{R:()=>u});var s=n(74848),e=n(22803),o=n(96540),D=n(29675),I=n(79784),r=n(34128),g=n(64467);const u=({name:i,onChange:P,verifyLayerNameUniqueness:c,overrideStyles:z})=>{const l=(0,D.of)(A),[j,m]=(0,o.useState)(!1),[F,C]=(0,o.useState)(null),B=d=>{m(!0)},y=d=>{if(m(!1),F){C(null);return}i!==d&&P(d)},W=d=>{const S=d.currentTarget.value.trim();if(S.length===0){C("An empty layer name is not allowed");return}if(c&&!c(S)&&S!==i){C("Layer name already exists");return}F&&C(null)},p=d=>{y(d.currentTarget.value.trim())},M=d=>{d.key==="Enter"&&y(d.currentTarget.value)},Q=d=>{d.target.select()};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:l.wrapper,children:[!j&&(0,s.jsxs)("button",{className:l.layerNameWrapper,title:"Edit layer name",onClick:B,"data-testid":"layer-name-div",children:[(0,s.jsx)("span",{className:z?"":l.layerName,children:i}),(0,s.jsx)(I.I,{name:"pen",className:l.layerEditIcon,size:"sm"})]}),j&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.p,{type:"text",defaultValue:i,onBlur:p,autoFocus:!0,onKeyDown:M,onFocus:Q,invalid:F!==null,onChange:W,className:l.layerNameInput,"data-testid":"layer-name-input"}),F&&(0,s.jsx)(g.P,{horizontal:!0,children:F})]})]})})},A=i=>({wrapper:(0,e.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:i.spacing(.5)}),layerNameWrapper:(0,e.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:i.shape.radius.default,alignItems:"center",padding:`0 0 0 ${i.spacing(.5)}`,margin:0,background:"transparent","&:hover":{background:i.colors.action.hover,border:`1px dashed ${i.colors.border.strong}`},"&:focus":{border:`2px solid ${i.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),layerName:(0,e.css)({fontWeight:i.typography.fontWeightMedium,color:i.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:i.spacing(.5)}),layerEditIcon:(0,e.cx)((0,e.css)({marginLeft:i.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),layerNameInput:(0,e.css)({maxWidth:"300px",margin:"-4px 0"})})},144:(X,N,n)=>{n.d(N,{N:()=>A});var s=n(74848),e=n(22803),o=n(96540),D=n(29675),I=n(44826),r=n(57836),g=n(51396);const u={label:"Fixed color",value:"_____fixed_____"},A=P=>{const{value:c,context:z,onChange:l,item:j}=P,m="dark-green",F=(0,D.of)(i),C=c?.field,B=c&&!C&&c?.fixed,y=(0,g.sE)(z.data),W=(0,g.m3)(y,C,u,void 0,j.settings?.baseNameMode),p=(0,o.useCallback)(d=>{if(!d){l(void 0);return}const S=d.value;if(S&&S!==u.value)l({...c,field:S});else{const Y=c?.fixed??m;l({...c,field:void 0,fixed:Y})}},[l,c]),M=(0,o.useCallback)(d=>{l({field:void 0,fixed:d??m})},[l]),Q=B?u:W.find(d=>d.value===C);return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:F.container,children:[(0,s.jsx)(I.l6,{value:Q,options:W,onChange:p,noOptionsMessage:"No fields found",isClearable:j.settings?.isClearable,placeholder:j.settings?.placeholder}),B&&(0,s.jsx)("div",{className:F.picker,children:(0,s.jsx)(r.sk,{color:c?.fixed,onChange:M,enableNamedColors:!0})})]})})},i=P=>({container:(0,e.css)({display:"flex",flexWrap:"nowrap",justifyContent:"flex-end",alignItems:"center"}),picker:(0,e.css)({paddingLeft:P.spacing(1)})})},72830:(X,N,n)=>{n.d(N,{h:()=>z});var s=n(74848),e=n(96540),o=n(7500),D=n(77222),I=n(60484),r=n(60641),g=n(54594),u=n(59748),A=n(66992);const i=[{label:"Fixed",value:o.RU.Fixed,description:"Fixed value"},{label:"Field",value:o.RU.Field,description:"Display field value"}],P={settings:{}},c={settings:{}},z=({value:l,context:j,onChange:m})=>{const C=(0,e.useCallback)(M=>{m({...l,mode:M})},[m,l]),B=(0,e.useCallback)(M=>{m({...l,field:M})},[m,l]),y=(0,e.useCallback)((M="")=>{m({...l,fixed:M})},[m,l]),W=()=>{y("")},p=l?.mode??o.RU.Fixed;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.C,{children:(0,s.jsx)(I.I,{label:"Source",labelWidth:9,grow:!0,children:(0,s.jsx)(r.z,{value:p,options:i,onChange:C,fullWidth:!0})})}),p!==o.RU.Fixed&&(0,s.jsx)(D.C,{children:(0,s.jsx)(I.I,{label:"Field",labelWidth:9,grow:!0,children:(0,s.jsx)(u.O,{context:j,value:l.field??"",onChange:B,item:P})})}),p===o.RU.Fixed&&(0,s.jsx)(D.C,{children:(0,s.jsx)(I.I,{label:"Value",labelWidth:9,grow:!0,children:(0,s.jsx)(A.g,{context:j,value:l?.fixed,onChange:y,item:c,suffix:l?.fixed&&(0,s.jsx)(g.$n,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:W})})})},l?.fixed),p===o.RU.Template&&(0,s.jsx)(D.C,{children:(0,s.jsx)(I.I,{label:"Template",labelWidth:9,grow:!0,children:(0,s.jsx)(A.g,{context:j,value:l?.fixed,onChange:y,item:c})})})]})}},19824:(X,N,n)=>{n.d(N,{NO:()=>s.N,mj:()=>m,AW:()=>q,gm:()=>d,hj:()=>ne.h});var s=n(144),e=n(74848),o=n(96540);const D=({value:t,onChange:a})=>{const[_,f]=useState(t?[{value:t,label:t}]:[]),[h,O]=useState(),U=window.__grafana_public_path__+"img/icons/unicons/",b=E=>{a(E),O(E)};return useEffect(()=>{getBackendSrv().get(`${U}/index.json`).then(E=>{f(E.files.map(K=>({value:K,label:K})))})},[U]),jsx(Select,{options:_,value:h,onChange:E=>{b(E.value)}})},I=null;var r=n(7500),g=n(77222),u=n(60484),A=n(60641),i=n(59748),P=n(73528),c=n(86142),z=n(38390);const l=[{label:"Fixed",value:r.q_.Fixed,description:"Fixed value"},{label:"Field",value:r.q_.Field,description:"Use a string field result"}],j={settings:{}},m=t=>{const{value:a,context:_,onChange:f,item:h}=t,O=9,U=(0,o.useCallback)(R=>{f({...a,mode:R})},[f,a]),b=(0,o.useCallback)((R="")=>{f({...a,field:R})},[f,a]),E=(0,o.useCallback)(R=>{f({...a,fixed:R??""})},[f,a]),K=R=>{R.stopPropagation(),f({mode:r.q_.Fixed,fixed:"",field:""})},V=a?.mode??r.q_.Fixed,L=h.settings?.showSourceRadio??!0,v=h.settings?.resourceType??c.zu.Icon,G=h.settings?.folderName??P.ResourceFolderName.Icon,H=h.settings?.maxFiles;let $="";return v===c.zu.Icon&&(a?.fixed?$=(0,P.getPublicOrAbsoluteUrl)(a.fixed):h.settings?.placeholderValue&&($=(0,P.getPublicOrAbsoluteUrl)(h.settings.placeholderValue))),(0,e.jsxs)(e.Fragment,{children:[L&&(0,e.jsx)(g.C,{children:(0,e.jsx)(u.I,{label:"Source",labelWidth:O,grow:!0,children:(0,e.jsx)(A.z,{value:V,options:l,onChange:U,fullWidth:!0})})}),V!==r.q_.Fixed&&(0,e.jsx)(g.C,{children:(0,e.jsx)(u.I,{label:"Field",labelWidth:O,grow:!0,children:(0,e.jsx)(i.O,{context:_,value:a.field??"",onChange:b,item:j})})}),V===r.q_.Fixed&&(0,e.jsx)(z.n,{onChange:E,onClear:K,value:a?.fixed,src:$,placeholder:h.settings?.placeholderText??"Select a value",name:F(a?.fixed)??"",mediaType:v,folderName:G,size:c.Iy.NORMAL,maxFiles:H}),V===r.q_.Mapping&&(0,e.jsx)(g.C,{children:(0,e.jsx)(u.I,{label:"Mappings",labelWidth:O,grow:!0,children:(0,e.jsx)("div",{children:"TODO mappings editor!"})})})]})};function F(t){if(!t)return;const a=t.lastIndexOf("/");return a>0?t.substring(a+1):t}var C=n(22803),B=n(29675),y=n(44826),W=n(51396),p=n(30602),M=n(509);const Q={label:"Fixed value",value:"_____fixed_____"},d=t=>{const{value:a,context:_,onChange:f,item:h}=t,{settings:O}=h,U=(0,B.of)(S),b=a?.field,E=!b,K=(0,W.sE)(_.data),V=(0,W.m3)(K,b,Q,O?.filteredFieldType),L=(0,o.useMemo)(()=>(0,M.Nn)(O),[O]),v=(0,o.useCallback)(x=>{f((0,M.Ru)(x,L))},[f,L]),G=(0,o.useCallback)(x=>{const k=x.value;k&&k!==Q.value?v({...a,field:k}):v({...a,field:void 0})},[v,a]),H=(0,o.useCallback)(x=>{x!==void 0&&v({...a,min:x})},[v,a]),$=(0,o.useCallback)(x=>{x!==void 0&&v({...a,max:x})},[v,a]),R=(0,o.useCallback)(x=>{x!==void 0&&v({...a,fixed:x})},[v,a]),T=a??{},J=E?Q:V.find(x=>x.value===b);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:(0,e.jsx)(y.l6,{value:J,options:V,onChange:G,noOptionsMessage:"No fields found"})}),(0,e.jsxs)("div",{className:U.range,children:[E&&(0,e.jsx)(g.C,{children:(0,e.jsx)(u.I,{label:"Value",labelWidth:8,grow:!0,children:(0,e.jsx)(p.Q,{value:T.fixed,...L,onChange:R})})}),!E&&!L.hideRange&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(g.C,{children:(0,e.jsx)(u.I,{label:"Min",labelWidth:8,grow:!0,children:(0,e.jsx)(p.Q,{value:T.min,...L,onChange:H})})}),(0,e.jsx)(g.C,{children:(0,e.jsx)(u.I,{label:"Max",labelWidth:8,grow:!0,children:(0,e.jsx)(p.Q,{value:T.max,...L,onChange:$})})})]})]})]})},S=t=>({range:(0,C.css)({paddingTop:t.spacing(1)})});var Y=n(63739);const Z={label:"Fixed value",value:"_____fixed_____"},w=[{label:"Mod",value:r.WQ.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:r.WQ.Clamped,description:"Use field values, clamped to max and min"}],q=({value:t,context:a,onChange:_,item:f})=>{const{settings:h}=f,O=0,U=t?.field,b=!U,E=(0,W.sE)(a.data),K=(0,W.m3)(E,U,Z,Y.PU.number),V=(0,B.of)(ee),L=(0,o.useCallback)(T=>{const J=T.value;if(J&&J!==Z.value)_({...t,field:J});else{const x=t.fixed??O;_({...t,field:void 0,fixed:x})}},[_,t]),v=(0,o.useCallback)(T=>{_({...t,mode:T})},[_,t]),G=(0,o.useCallback)(T=>{_({...t,field:void 0,fixed:T??O})},[_,t]),H=t??{},$=t?.mode??r.WQ.Mod,R=b?Z:K.find(T=>T.value===U);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(g.C,{children:(0,e.jsx)(u.I,{label:"Limit",labelWidth:8,grow:!0,children:(0,e.jsx)(A.z,{value:$,options:w,onChange:v,fullWidth:!0})})}),(0,e.jsx)(y.l6,{value:R,options:K,onChange:L,noOptionsMessage:"No fields found"})]}),(0,e.jsx)("div",{className:V.range,children:b&&(0,e.jsx)(g.C,{children:(0,e.jsx)(u.I,{label:"Value",labelWidth:8,grow:!0,children:(0,e.jsx)(p.Q,{value:H?.fixed??O,onChange:G,max:h?.max,min:h?.min})})})})]})},ee=t=>({range:(0,C.css)({paddingTop:t.spacing(1)})});var ne=n(72830)}}]);

//# sourceMappingURL=7110.6770ba297441d86bcfe6.js.map