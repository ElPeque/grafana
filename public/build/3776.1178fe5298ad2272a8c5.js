"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3776],{60792:(Te,ce,s)=>{s.d(ce,{$Z:()=>t,oY:()=>u,r3:()=>n});var e=s(2049);const t={showLabels:"grafana.explore.logs.showLabels",showTime:"grafana.explore.logs.showTime",wrapLogMessage:"grafana.explore.logs.wrapLogMessage",prettifyLogMessage:"grafana.explore.logs.prettifyLogMessage",logsSortOrder:"grafana.explore.logs.sortOrder",logContextWrapLogMessage:"grafana.explore.logs.logContext.wrapLogMessage"},n="grafana.explore.logs.visualisationType",u=(H,x)=>{if(!H)return!1;for(let D=0;D<H.length;D++)if(!H[D]||!x[D]||!(0,e.ab)(H[D],x[D]))return!1;return!0}},88231:(Te,ce,s)=>{s.d(ce,{Dh:()=>k,K6:()=>F,V7:()=>f,rg:()=>he,u8:()=>R});var e=s(74848),t=s(22803),n=s(96540),u=s(16753),H=s(59577),x=s(32370),D=s(56276),T=s(7500),o=s(54594),C=s(79784),S=s(11817),g=s(33143);const R=({app:v,children:y,loading:_,loadMoreLogs:P,range:se,rows:X,scrollElement:$,sortOrder:i,timeZone:U,topScrollEnabled:Q=!1})=>{const[ve,me]=(0,n.useState)(!1),[Ee,Re]=(0,n.useState)(!1),[Le,Me]=(0,n.useState)(!1),[je,Pe]=(0,n.useState)(!1),Be=(0,n.useRef)(X),Ne=(0,n.useRef)($?.scrollTop||0),Oe=(0,n.useRef)(null),Ie=(0,n.useRef)(0);(0,n.useEffect)(()=>{me(!1),Re(!1)},[se,X,i]),(0,n.useEffect)(()=>{_||(Me(!1),Pe(!1))},[_]),(0,n.useEffect)(()=>{je&&$&&$.scrollTo(0,$.scrollHeight-$.clientHeight)},[je,$]),(0,n.useEffect)(()=>{X!==Be.current&&X.length===Be.current.length&&(Le||je)&&(i===T.uH.Descending&&je?Re(!0):i===T.uH.Ascending&&Le&&me(!0)),Be.current=X},[je,X,i,Le]),(0,n.useEffect)(()=>{if(!$||!P)return;function ae(l){if(!$||!P||!X.length||_||!x.$.featureToggles.logsInfiniteScrolling)return;const a=f(l,Oe.current,Ie,$,Ne.current);Oe.current=l,Ne.current=$.scrollTop,a!==0&&(l.stopImmediatePropagation(),a===-1&&Q?ke():a===1&&r())}function ke(){const l=ye(F(X),se,U,i);if(!l){me(!0);return}me(!1),P?.(l),Me(!0),(0,D.rR)("grafana_logs_infinite_scrolling",{direction:"top",sort_order:i})}function r(){const l=he(F(X),se,U,i);if(!l){Re(!0);return}Re(!1),P?.(l),Pe(!0),(0,D.rR)("grafana_logs_infinite_scrolling",{direction:"bottom",sort_order:i})}return $.addEventListener("scroll",ae),$.addEventListener("wheel",ae),()=>{$.removeEventListener("scroll",ae),$.removeEventListener("wheel",ae)}},[P,_,se,X,$,i,U,Q]);const Se=i===T.uH.Descending&&(0,H.isRelativeTime)(se.raw.to),Fe=i===T.uH.Ascending&&(0,H.isRelativeTime)(se.raw.to),We=(0,n.useCallback)(()=>{(0,D.rR)("grafana_explore_logs_infinite_pagination_clicked",{pageType:"olderLogsButton"});const ae=ye(F(X),se,U,i);if(!ae){me(!0);return}me(!1),P?.(ae),Me(!0),$?.scroll({behavior:"auto",top:0})},[P,se,X,$,i,U]);return(0,e.jsxs)(e.Fragment,{children:[Le&&(0,e.jsx)(g.I,{adjective:i===T.uH.Descending?"newer":"older"}),!Se&&ve&&p,i===T.uH.Ascending&&v===u.Jk.Explore&&P&&(0,e.jsx)(o.$n,{className:j.navButton,variant:"secondary",onClick:We,disabled:_,children:(0,e.jsxs)("div",{className:j.navButtonContent,children:[(0,e.jsx)(C.I,{name:"angle-up",size:"lg"}),(0,e.jsx)(S.x6,{i18nKey:"logs.infinite-scroll.older-logs",children:"Older logs"})]})}),y,!Fe&&Ee&&p,je&&(0,e.jsx)(g.I,{adjective:i===T.uH.Descending?"older":"newer"})]})},j={messageContainer:(0,t.css)({textAlign:"center",padding:.25}),navButton:(0,t.css)({width:"58px",height:"68px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",lineHeight:"1",position:"absolute",top:0,right:-3,zIndex:1}),navButtonContent:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",whiteSpace:"normal"})},p=(0,e.jsx)("div",{className:j.messageContainer,"data-testid":"end-of-range",children:"End of the selected time range."});var k=(v=>(v[v.Top=-1]="Top",v[v.Bottom=1]="Bottom",v[v.NoScroll=0]="NoScroll",v))(k||{});function f(v,y,_,P,se){if(P.scrollHeight<=P.clientHeight)return 0;const X=v instanceof WheelEvent?v.deltaY:P.scrollTop-se;if(X===0)return 0;const $=X<0?-1:1;return($===-1?P.scrollTop:P.scrollHeight-P.scrollTop-P.clientHeight)>1||y&&w(v,y,_)?0:$}function w(v,y,_){const P=v.timeStamp-y.timeStamp;return P>500?(_.current=0,!1):(_.current++,P<100?_.current>=180?(_.current=0,!1):!0:P<400&&_.current>=25?(_.current=0,!1):!0)}function F(v){const y=v[0].timeEpochMs,_=v[v.length-1].timeEpochMs;return _<y?{from:_,to:y}:{from:y,to:_}}function K(v,y){return{from:y.from.valueOf(),to:v.from}}function Z(v,y,_){return y=ue(y,_),{from:v.to,to:y.to.valueOf()}}const J=1e3;function ye(v,y,_,P){return P===T.uH.Descending?(y=ue(y,_),y.to.valueOf()-v.to>J?Z(v,y,_):void 0):Math.abs(y.from.valueOf()-v.from)>J?K(v,y):void 0}function he(v,y,_,P){return P===T.uH.Descending?Math.abs(y.from.valueOf()-v.from)>J?K(v,y):void 0:(y=ue(y,_),y.to.valueOf()-v.to>J?Z(v,y,_):void 0)}function ue(v,y){return(0,H.isRelativeTimeRange)(v.raw)?(0,H.convertRawToRange)(v.raw,y):v}},33143:(Te,ce,s)=>{s.d(ce,{I:()=>u});var e=s(74848),t=s(22803),n=s(20968);const u=({adjective:x="newer"})=>{const D=`Loading ${x} logs...`;return(0,e.jsx)("div",{className:H,children:(0,e.jsxs)("div",{children:[D," ",(0,e.jsx)(n.y,{inline:!0})]})})},H=(0,t.css)({display:"flex",justifyContent:"center"})},24664:(Te,ce,s)=>{s.d(ce,{I:()=>T,b:()=>o});var e=s(74848),t=s(22803),n=s(41811),u=s(56276),H=s(99764),x=s(58134);const D=(0,n.default)(C=>({buttonRow:(0,t.css)({display:"flex",flexDirection:"row",gap:C.spacing(.5),marginLeft:C.spacing(.5)})})),T="___LOG_LINE_BODY___",o=C=>{const S=()=>{const{onClickShowField:K,row:Z}=C;K&&K(T),(0,u.rR)("grafana_explore_logs_log_details_show_body_clicked",{datasourceType:Z.datasourceType,logRowUid:Z.uid,type:"enable",app:C.app})},g=()=>{const{onClickHideField:K,row:Z}=C;K&&K(T),(0,u.rR)("grafana_explore_logs_log_details_show_body_clicked",{datasourceType:Z.datasourceType,logRowUid:Z.uid,type:"disable",app:C.app})},{theme:R,displayedFields:j,disableActions:p,row:k}=C,f=D(R),w=(0,x.D)(R),F=j!=null&&j.includes(T)?(0,e.jsx)(H.K,{variant:"primary",tooltip:"Hide log line",name:"eye",onClick:g}):(0,e.jsx)(H.K,{tooltip:"Show log line",name:"eye",onClick:S});return(0,e.jsxs)("tr",{className:w.logDetailsValue,children:[(0,e.jsx)("td",{className:w.logsDetailsIcon,children:(0,e.jsx)("div",{className:f.buttonRow,children:!p&&j&&F})}),(0,e.jsx)("td",{className:w.logDetailsLabel,colSpan:100,children:k.entry})]})}},28445:(Te,ce,s)=>{s.d(ce,{A:()=>o,h:()=>T});var e=s(74848),t=s(22803),n=s(96540),u=s(29675),H=s(6736),x=s(24664);const D=["detected_level","level","lvl","filename"],T=(0,n.memo)(({labels:g,emptyMessage:R,addTooltip:j=!0})=>{const p=(0,u.of)(S),k=(0,n.useMemo)(()=>Object.keys(g).filter(f=>!f.startsWith("_")&&!D.includes(f)&&g[f]).map(f=>`${f}=${g[f]}`),[g]);return k.length===0&&R?(0,e.jsx)("span",{className:(0,t.cx)([p.logsLabels]),children:(0,e.jsx)("span",{className:(0,t.cx)([p.logsLabel]),children:R})}):(0,e.jsx)("span",{className:(0,t.cx)([p.logsLabels]),children:k.map(f=>j?(0,e.jsx)(H.m,{content:f,placement:"top",children:(0,e.jsx)(C,{styles:p,children:f})},f):(0,e.jsx)(C,{styles:p,tooltip:f,children:f},f))})});T.displayName="LogLabels";const o=(0,n.memo)(({labels:g})=>{const R=(0,u.of)(S);return(0,e.jsx)("span",{className:(0,t.cx)([R.logsLabels]),children:g.map(j=>(0,e.jsx)(C,{styles:R,tooltip:j,children:j===x.I?"log line":j},j))})});o.displayName="LogLabelsList";const C=(0,n.forwardRef)(({styles:g,tooltip:R,children:j},p)=>(0,e.jsx)("span",{className:(0,t.cx)([g.logsLabel]),ref:p,children:(0,e.jsx)("span",{className:(0,t.cx)([g.logsLabelValue]),title:R,children:j})}));C.displayName="LogLabel";const S=g=>({logsLabels:(0,t.css)({display:"flex",flexWrap:"wrap",fontSize:g.typography.size.xs}),logsLabel:(0,t.css)({label:"logs-label",display:"flex",padding:g.spacing(0,.25),backgroundColor:g.colors.background.secondary,borderRadius:g.shape.radius.default,margin:g.spacing(.125,.5,0,0),textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}),logsLabelValue:(0,t.css)({label:"logs-label__value",display:"inline-block",maxWidth:g.spacing(25),textOverflow:"ellipsis",overflow:"hidden"})})},71490:(Te,ce,s)=>{s.d(ce,{$:()=>C});var e=s(74848),t=s(88838),n=s(96540),u=s(23257),H=s.n(u),x=s(37535),D=s(29675);function T(S,g){return g.split(/;\s*/).reduce((R,j)=>{if(j==="color:rgba(0,0,0,0.5)")return{color:S.colors.text.secondary};const p=j.match(/([^:\s]+)\s*:\s*(.+)/);if(p&&p[1]&&p[2]){const k=p[1].replace(/-([a-z])/g,(f,w)=>w.toUpperCase());R[k]=p[2]}return R},{})}class o extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(g,R){return g.value===R.prevValue?null:{chunks:t.Ay.parse(g.value).spans.map(p=>p.css?{style:T(g.theme,p.css),text:p.text}:{text:p.text}),prevValue:g.value}}render(){const{chunks:g}=this.state;return g.map((R,j)=>{const p=this.props.highlight?.searchWords?(0,e.jsx)(H(),{textToHighlight:R.text,searchWords:this.props.highlight.searchWords,findChunks:x.Oq,highlightClassName:this.props.highlight.highlightClassName},j):R.text;return R.style?(0,e.jsx)("span",{style:R.style,"data-testid":"ansiLogLine",children:p},j):p})}}const C=(0,D.cV)(o);C.displayName="LogMessageAnsi"},66495:(Te,ce,s)=>{s.d(ce,{Q:()=>o});var e=s(74848),t=s(96540),n=s(93407),u=s(2567),H=s(55801),x=s(99764),D=s(93604),T=s(88023);const o=(0,t.memo)(({logText:S,onOpenContext:g,onPermalinkClick:R,onPinLine:j,onUnpinLine:p,pinLineButtonTooltipTitle:k,pinned:f,row:w,showContextToggle:F,styles:K,mouseIsOver:Z,onBlur:J,getRowContextQuery:ye,addonBefore:he,addonAfter:ue})=>{const v=(0,t.useMemo)(()=>F?F(w):!1,[w,F]),y=(0,t.useCallback)(i=>{i.stopPropagation()},[]),_=(0,t.useCallback)(async i=>{if(i.stopPropagation(),ye&&(i.nativeEvent.ctrlKey||i.nativeEvent.metaKey||i.nativeEvent.shiftKey)){const U=window.open("about:blank"),Q=await ye(w,void 0,!1);if(Q&&U){const ve=n.kM.renderUrl(u.I.assureBaseUrl(`${(0,T.zj)().appSubUrl}explore`),{left:JSON.stringify({datasource:Q.datasource,queries:[Q],range:(0,H.E2)()})});U.location=ve;return}U?.close()}g(w)},[g,ye,w]),P=(0,t.useCallback)(i=>{!i.currentTarget.contains(i.relatedTarget)&&J&&J()},[J]),se=(0,t.useCallback)(()=>S,[S]),X=(0,t.useMemo)(()=>he?C(he,w):null,[he,w]),$=(0,t.useMemo)(()=>ue?C(ue,w):null,[ue,w]);return(0,e.jsxs)("span",{className:`log-row-menu ${K.rowMenu}`,onClick:y,onBlur:P,children:[f&&!Z&&(0,e.jsx)(x.K,{className:K.unPinButton,size:"md",name:"gf-pin",onClick:()=>p&&p(w),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),Z&&(0,e.jsxs)(e.Fragment,{children:[X,v&&(0,e.jsx)(x.K,{size:"md",name:"gf-show-context",onClick:_,tooltip:"Show context",tooltipPlacement:"top","aria-label":"Show context",tabIndex:0}),(0,e.jsx)(D.b,{className:K.copyLogButton,icon:"copy",variant:"secondary",fill:"text",size:"md",getText:se,tooltip:"Copy to clipboard",tooltipPlacement:"top",tabIndex:0}),f&&p&&(0,e.jsx)(x.K,{className:K.unPinButton,size:"md",name:"gf-pin",onClick:()=>p&&p(w),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),!f&&j&&(0,e.jsx)(x.K,{className:K.unPinButton,size:"md",name:"gf-pin",onClick:()=>j&&j(w),tooltip:k??"Pin line",tooltipPlacement:"top","aria-label":"Pin line",tabIndex:0}),R&&w.rowId!==void 0&&w.uid&&(0,e.jsx)(x.K,{tooltip:"Copy shortlink","aria-label":"Copy shortlink",tooltipPlacement:"top",size:"md",name:"share-alt",onClick:()=>R(w),tabIndex:0}),$]})]})});function C(S,g){return S.map((R,j)=>{if((0,t.isValidElement)(R)){const p=R.props.onClick;return p?(0,t.cloneElement)(R,{onClick:k=>{p(k,g)},key:j}):R}return R})}o.displayName="LogRowMenuCell"},96877:(Te,ce,s)=>{s.d(ce,{S:()=>S,a:()=>k});var e=s(74848),t=s(22803),n=s(96540),u=s(23257),H=s.n(u),x=s(37535),D=s(29675),T=s(11817),o=s(71490),C=s(66495);const S=1e5,g=({hasAnsi:f,entry:w,highlights:F,styles:K})=>{const Z=(0,n.useMemo)(()=>w.length-S,[w]),J=F&&F.length>0&&F[0]&&F[0].length>0&&Z<=0,ye=F??[],[he,ue]=(0,n.useState)(Z<0),v=(0,n.useMemo)(()=>he?w:w.substring(0,S),[w,he]);if(f){const y=J?{searchWords:ye,highlightClassName:K.logsRowMatchHighLight}:void 0;return(0,e.jsx)(o.$,{value:v,highlight:y})}else if(J)return(0,e.jsx)(H(),{textToHighlight:v,searchWords:ye,findChunks:x.Oq,highlightClassName:K.logsRowMatchHighLight});return(0,e.jsxs)(e.Fragment,{children:[v,!he&&(0,e.jsx)(R,{showFull:he,toggle:ue,diff:Z})]})},R=({toggle:f,diff:w})=>{const F=j((0,D.$j)()),K=Z=>{Z.stopPropagation(),f(!0)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(T.x6,{i18nKey:"logs.log-row-message.ellipsis",children:"\u2026 "}),(0,e.jsxs)("span",{className:F.showMore,onClick:K,children:[w," ",(0,e.jsx)(T.x6,{i18nKey:"logs.log-row-message.more",children:"more"})]})]})},j=f=>({showMore:(0,t.css)({display:"inline-flex",fontWeight:f.typography.fontWeightMedium,fontSize:f.typography.size.sm,fontFamily:f.typography.fontFamily,height:f.spacing(3),padding:f.spacing(.25,1),color:f.colors.secondary.text,border:`1px solid ${f.colors.border.strong}`,"&:hover":{background:f.colors.secondary.transparent,borderColor:f.colors.emphasize(f.colors.border.strong,.25),color:f.colors.secondary.text}})}),p=(f,w,F,K)=>{if(w)try{return JSON.stringify(JSON.parse(f),void 0,2)}catch{}return!F&&!K&&(f=f.replace(/(\r\n|\n|\r)/g,"")),f},k=(0,n.memo)(f=>{const{row:w,wrapLogMessage:F,prettifyLogMessage:K,showContextToggle:Z,styles:J,onOpenContext:ye,onPermalinkClick:he,onUnpinLine:ue,onPinLine:v,pinLineButtonTooltipTitle:y,pinned:_,mouseIsOver:P,onBlur:se,getRowContextQuery:X,expanded:$,logRowMenuIconsBefore:i,logRowMenuIconsAfter:U}=f,{hasAnsi:Q,raw:ve}=w,me=(0,n.useMemo)(()=>p(ve,K,F,!!$),[ve,K,F,$]),Ee=P||_;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("td",{className:J.logsRowMessage,children:(0,e.jsx)("div",{className:F?J.positionRelative:J.horizontalScroll,children:(0,e.jsx)("div",{className:`${J.logLine} ${J.positionRelative}`,children:(0,e.jsx)(g,{hasAnsi:Q,entry:me,highlights:w.searchWords,styles:J})})})}),(0,e.jsx)("td",{className:`log-row-menu-cell ${J.logRowMenuCell}`,children:Ee&&(0,e.jsx)(C.Q,{logText:me,row:w,showContextToggle:Z,getRowContextQuery:X,onOpenContext:ye,onPermalinkClick:he,onPinLine:v,onUnpinLine:ue,pinLineButtonTooltipTitle:y,pinned:_,styles:J,mouseIsOver:P,onBlur:se,addonBefore:i,addonAfter:U})})]})});k.displayName="LogRowMessage"},10069:(Te,ce,s)=>{s.d(ce,{k:()=>ke});var e=s(74848),t=s(22803),n=s(96540),u=s(7500),H=s(32370),x=s(29675),D=s(65164),T=s(79784),o=s(11817),C=s(56276),S=s(19224),g=s(48224);const R=({x:r,y:l,onClickFilterString:a,onClickFilterOutString:c,selection:d,row:E,close:m,...z})=>{const de=(0,n.useRef)(null),ee=(0,x.of)(p);(0,n.useEffect)(()=>{function V(O){O.key==="Escape"&&m()}return document.addEventListener("keyup",V),()=>{document.removeEventListener("keyup",V)}},[m]);const G=(0,n.useCallback)(()=>{j("popover_menu_disabled",d.length,E.datasourceType),z.onDisable()},[z,E.datasourceType,d.length]);return a||c?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:ee.menu,style:{top:l,left:r},children:(0,e.jsxs)(S.W,{ref:de,children:[(0,e.jsx)(S.W.Item,{label:(0,o.t)("logs.popover-menu.copy","Copy selection"),onClick:()=>{(0,g.Dk)(d,de),m(),j("copy",d.length,E.datasourceType)}}),a&&(0,e.jsx)(S.W.Item,{label:(0,o.t)("logs.popover-menu.line-contains","Add as line contains filter"),onClick:()=>{a(d,E.dataFrame.refId),m(),j("line_contains",d.length,E.datasourceType)}}),c&&(0,e.jsx)(S.W.Item,{label:(0,o.t)("logs.popover-menu.line-contains-not","Add as line does not contain filter"),onClick:()=>{c(d,E.dataFrame.refId),m(),j("line_does_not_contain",d.length,E.datasourceType)}}),(0,e.jsx)(S.W.Divider,{}),(0,e.jsx)(S.W.Item,{label:(0,o.t)("logs.popover-menu.disable-menu","Disable menu"),onClick:G})]})})}):null};function j(r,l,a){(0,C.rR)("grafana_explore_logs_popover_menu",{action:r,selectionLength:l,datasourceType:a||"unknown"})}const p=r=>({menu:(0,t.css)({position:"fixed",zIndex:r.zIndex.modal})});class k{constructor(){this.seen=new Set,this.count=0}getKey(l){this.count+=1;const a=`k_${l}`;return this.seen.has(a)?`i_${this.count}`:(this.seen.add(a),a)}}var f=s(2543),w=s(88090),F=s(6736),K=s(47370),Z=s(24664),J=s(41811),ye=s(16753),he=s(93604),ue=s(99764),v=s(21891),y=s(55909),_=s(90617);const P=r=>({logsStatsRow:(0,t.css)({label:"logs-stats-row",margin:`${parseInt(r.spacing(2),10)/1.75}px 0`}),logsStatsRowActive:(0,t.css)({label:"logs-stats-row--active",color:r.colors.primary.text,position:"relative"}),logsStatsRowLabel:(0,t.css)({label:"logs-stats-row__label",display:"flex",marginBottom:"1px"}),logsStatsRowValue:(0,t.css)({label:"logs-stats-row__value",flex:1,textOverflow:"ellipsis",overflow:"hidden"}),logsStatsRowCount:(0,t.css)({label:"logs-stats-row__count",textAlign:"right",marginLeft:r.spacing(.75)}),logsStatsRowPercent:(0,t.css)({label:"logs-stats-row__percent",textAlign:"right",marginLeft:r.spacing(.75),width:r.spacing(4.5)}),logsStatsRowBar:(0,t.css)({label:"logs-stats-row__bar",height:r.spacing(.5),overflow:"hidden",background:r.colors.text.disabled}),logsStatsRowInnerBar:(0,t.css)({label:"logs-stats-row__innerbar",height:r.spacing(.5),overflow:"hidden",background:r.colors.primary.main})}),se=({active:r,count:l,proportion:a,value:c})=>{const d=(0,x.of)(P),E=`${Math.round(a*100)}%`,m={width:E},z=r?(0,t.cx)([d.logsStatsRow,d.logsStatsRowActive]):(0,t.cx)([d.logsStatsRow]);return(0,e.jsxs)("div",{className:z,children:[(0,e.jsxs)("div",{className:(0,t.cx)([d.logsStatsRowLabel]),children:[(0,e.jsx)("div",{className:(0,t.cx)([d.logsStatsRowValue]),title:c,children:c}),(0,e.jsx)("div",{className:(0,t.cx)([d.logsStatsRowCount]),children:l}),(0,e.jsx)("div",{className:(0,t.cx)([d.logsStatsRowPercent]),children:E})]}),(0,e.jsx)("div",{className:(0,t.cx)([d.logsStatsRowBar]),children:(0,e.jsx)("div",{className:(0,t.cx)([d.logsStatsRowInnerBar]),style:m})})]})};se.displayName="LogLabelStatsRow";const X=5,$=(0,_.N)(r=>({logsStats:(0,t.css)({label:"logs-stats",background:"inherit",color:r.colors.text.primary,wordBreak:"break-all",width:"fit-content",maxWidth:"100%"}),logsStatsHeader:(0,t.css)({label:"logs-stats__header",borderBottom:`1px solid ${r.colors.border.medium}`,display:"flex"}),logsStatsTitle:(0,t.css)({label:"logs-stats__title",fontWeight:r.typography.fontWeightMedium,paddingRight:r.spacing(2),display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1}),logsStatsClose:(0,t.css)({label:"logs-stats__close",cursor:"pointer"}),logsStatsBody:(0,t.css)({label:"logs-stats__body",padding:"5px 0px"})}));class i extends n.PureComponent{render(){const{label:l,rowCount:a,stats:c,value:d,theme:E,isLabel:m}=this.props,z=$(E),de=c.slice(0,X);let ee=de.find(L=>L.value===d),G=c.slice(X);const q=!ee;q&&(ee=G.find(L=>L.value===d),G=G.filter(L=>L.value!==d));const V=G.reduce((L,M)=>L+M.count,0),ie=de.reduce((L,M)=>L+M.count,0)+V,pe=V/ie;return(0,e.jsxs)("div",{className:z.logsStats,"data-testid":"logLabelStats",children:[(0,e.jsx)("div",{className:z.logsStatsHeader,children:(0,e.jsxs)("div",{className:z.logsStatsTitle,children:[l,": ",ie," of ",a," rows have that ",m?"label":"field"]})}),(0,e.jsxs)("div",{className:z.logsStatsBody,children:[de.map(L=>(0,e.jsx)(se,{...L,active:L.value===d},L.value)),q&&ee&&(0,e.jsx)(se,{...ee,active:!0},ee.value),V>0&&(0,e.jsx)(se,{count:V,value:"Other",proportion:pe},"__OTHERS__")]})]})}}const U=(0,x.cV)(i);U.displayName="LogLabelStats";var Q=s(58134);const ve=(0,J.default)(r=>({labelType:(0,t.css)({border:`solid 1px ${r.colors.text.secondary}`,color:r.colors.text.secondary,borderRadius:r.shape.radius.circle,fontSize:r.spacing(1),lineHeight:r.spacing(1.25),height:r.spacing(1.5),width:r.spacing(1.5),display:"flex",justifyContent:"center",verticalAlign:"middle",marginLeft:r.spacing(1)}),wordBreakAll:(0,t.css)({label:"wordBreakAll",wordBreak:"break-all"}),copyButton:(0,t.css)({"& > button":{color:r.colors.text.secondary,padding:0,justifyContent:"center",borderRadius:r.shape.radius.circle,height:r.spacing(r.components.height.sm),width:r.spacing(r.components.height.sm),svg:{margin:0},"span > div":{top:"-5px","& button":{color:r.colors.success.main}}}}),adjoiningLinkButton:(0,t.css)({marginLeft:r.spacing(1)}),wrapLine:(0,t.css)({label:"wrapLine",whiteSpace:"pre-wrap"}),logDetailsStats:(0,t.css)({padding:`0 ${r.spacing(1)}`}),logDetailsValue:(0,t.css)({display:"flex",alignItems:"center",lineHeight:"22px",".log-details-value-copy":{visibility:"hidden"},"&:hover":{".log-details-value-copy":{visibility:"visible"}}}),buttonRow:(0,t.css)({display:"flex",flexDirection:"row",gap:r.spacing(.5),marginLeft:r.spacing(.5)})}));class me extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:l,parsedKeys:a,row:c}=this.props;l&&l(a[0]),(0,C.rR)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:c.datasourceType,logRowUid:c.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:l,parsedKeys:a,row:c}=this.props;l&&l(a[0]),(0,C.rR)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:c.datasourceType,logRowUid:c.uid,type:"disable"})},this.isFilterLabelActive=async()=>{const{isFilterLabelActive:l,parsedKeys:a,parsedValues:c,row:d}=this.props;return l?await l(a[0],c[0],d.dataFrame?.refId):!1},this.filterLabel=()=>{const{onClickFilterLabel:l,parsedKeys:a,parsedValues:c,row:d}=this.props;l&&l(a[0],c[0],(0,y.f8)(d)||void 0),(0,C.rR)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:d.datasourceType,filterType:"include",logRowUid:d.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:l,parsedKeys:a,parsedValues:c,row:d}=this.props;l&&l(a[0],c[0],(0,y.f8)(d)||void 0),(0,C.rR)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:d.datasourceType,filterType:"exclude",logRowUid:d.uid})},this.updateStats=()=>{const{getStats:l}=this.props,a=l(),c=a?a.reduce((d,E)=>d+E.count,0):0;(!(0,f.isEqual)(this.state.fieldStats,a)||c!==this.state.fieldCount)&&this.setState({fieldStats:a,fieldCount:c})},this.showStats=()=>{const{isLabel:l,row:a,app:c}=this.props,{showFieldsStats:d}=this.state;d||this.updateStats(),this.toggleFieldsStats(),(0,C.rR)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:a.datasourceType,fieldType:l?"label":"detectedField",type:d?"close":"open",logRowUid:a.uid,app:c})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(l=>({showFieldsStats:!l.showFieldsStats}))}generateClipboardButton(l){const{theme:a}=this.props,c=ve(a);return(0,e.jsx)("div",{className:`log-details-value-copy ${c.copyButton}`,children:(0,e.jsx)(he.b,{getText:()=>l,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"})})}generateMultiVal(l,a){return(0,e.jsx)("table",{children:(0,e.jsx)("tbody",{children:l?.map((c,d)=>(0,e.jsx)("tr",{children:(0,e.jsxs)("td",{children:[c,a&&c!==""&&this.generateClipboardButton(c)]})},`${c}-${d}`))})})}render(){const{theme:l,parsedKeys:a,parsedValues:c,isLabel:d,links:E,displayedFields:m,wrapLogMessage:z,onClickFilterLabel:de,onClickFilterOutLabel:ee,disableActions:G,row:q,app:V,onPinLine:O,pinLineButtonTooltipTitle:ie}=this.props,{showFieldsStats:pe,fieldStats:L,fieldCount:M}=this.state,te=ve(l),oe=(0,Q.D)(l),ge=a==null?!1:a.length===1,fe=c==null?!1:c.length===1,h=!G&&de&&ee,I=V===ye.Jk.Explore&&q.dataFrame?.refId?` in query ${q.dataFrame?.refId}`:"",A=ge?(0,g.dO)(a[0],q):null,N=!fe&&c!=null&&!c.every(b=>b===""),ne=m&&a!=null&&m.includes(a[0])?(0,e.jsx)(ue.K,{variant:"primary",tooltip:"Hide this field",name:"eye",onClick:this.hideField}):(0,e.jsx)(ue.K,{tooltip:"Show this field instead of the message",name:"eye",onClick:this.showField});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("tr",{className:oe.logDetailsValue,children:[(0,e.jsx)("td",{className:oe.logsDetailsIcon,children:(0,e.jsxs)("div",{className:te.buttonRow,children:[h&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Re,{name:"search-plus",onClick:this.filterLabel,isActive:()=>this.isFilterLabelActive(),tooltipSuffix:I}),(0,e.jsx)(ue.K,{name:"search-minus",tooltip:`Filter out value${I}`,onClick:this.filterOutLabel})]}),!G&&m&&ne,!G&&(0,e.jsx)(ue.K,{variant:pe?"primary":"secondary",name:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",disabled:!ge,onClick:this.showStats})]})}),(0,e.jsx)("td",{children:A&&(0,e.jsx)(Ee,{type:A,styles:te})}),(0,e.jsx)("td",{className:oe.logDetailsLabel,children:ge?a[0]:this.generateMultiVal(a)}),(0,e.jsx)("td",{className:(0,t.cx)(te.wordBreakAll,z&&te.wrapLine),children:(0,e.jsxs)("div",{className:te.logDetailsValue,children:[fe?c[0]:this.generateMultiVal(c,!0),fe&&this.generateClipboardButton(c[0]),(0,e.jsx)("div",{className:(0,t.cx)((fe||N)&&te.adjoiningLinkButton),children:E?.map((b,le)=>{if(b.onClick&&O){const be=b.onClick;b.onClick=(B,xe)=>{O(q,!1),be(B,xe)}}return(0,e.jsx)("span",{children:(0,e.jsx)(v.R,{buttonProps:{tooltip:typeof ie=="object"&&b.onClick?ie:void 0},link:b})},`${b.title}-${le}`)})})]})})]}),pe&&ge&&fe&&(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{colSpan:2,children:(0,e.jsx)(ue.K,{variant:pe?"primary":"secondary",name:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats})}),(0,e.jsx)("td",{colSpan:2,children:(0,e.jsx)("div",{className:te.logDetailsStats,children:(0,e.jsx)(U,{stats:L,label:a[0],value:c[0],rowCount:M,isLabel:d})})})]})]})}}function Ee({type:r,styles:l}){return(0,e.jsx)(F.m,{content:r,children:(0,e.jsx)("div",{className:l.labelType,children:(0,e.jsx)("span",{children:r.substring(0,1)})})})}const Re=({isActive:r,tooltipSuffix:l,...a})=>{const[c,d]=(0,n.useState)(!1),E=c?"Remove filter":"Filter for value";return(0,n.useEffect)(()=>{r().then(d)},[r]),(0,e.jsx)(ue.K,{...a,variant:c?"primary":void 0,tooltip:E+l})},Le=(0,x.cV)(me);Le.displayName="LogDetailsRow";var Me=s(14455);class je extends n.PureComponent{render(){const{app:l,row:a,theme:c,hasError:d,onClickFilterOutLabel:E,onClickFilterLabel:m,getRows:z,showDuplicates:de,className:ee,onClickShowField:G,onClickHideField:q,displayedFields:V,getFieldLinks:O,wrapLogMessage:ie,onPinLine:pe,styles:L,pinLineButtonTooltipTitle:M}=this.props,te=(0,Q.L)(c,a.logLevel),oe=a.labels?a.labels:{},ge=Object.keys(oe).length>0,fe=(0,Me.jE)(a,O);let h=fe.filter(B=>B.links?.length);const I=h.filter(B=>B.fieldIndex!==a.entryFieldIndex).sort(),A=h.filter(B=>B.fieldIndex===a.entryFieldIndex).sort(),N=(0,Me.qE)(A),ne=I&&I.length>0||N&&N.length>0,b=a.dataFrame.meta?.type===K.m.LogLines?[]:fe.filter(B=>B.links?.length===0&&B.fieldIndex!==a.entryFieldIndex).sort(),le=b&&b.length>0,be=d?"":`${te.logsRowLevelColor} ${L.logsRowLevel} ${L.logsRowLevelDetails}`;return(0,e.jsxs)("tr",{className:(0,t.cx)(ee,L.logDetails),children:[de&&(0,e.jsx)("td",{}),(0,e.jsx)("td",{className:be,"aria-label":"Log level"}),(0,e.jsx)("td",{colSpan:4,children:(0,e.jsx)("div",{className:L.logDetailsContainer,children:(0,e.jsx)("table",{className:L.logDetailsTable,children:(0,e.jsxs)("tbody",{children:[V&&V.length>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:100,className:L.logDetailsHeading,"aria-label":"Fields",children:(0,e.jsx)(o.x6,{i18nKey:"logs.log-details.log-line",children:"Log line"})})}),(0,e.jsx)(Z.b,{onClickShowField:G,onClickHideField:q,row:a,app:l,displayedFields:V,disableActions:!1,theme:c})]}),(ge||le)&&(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:100,className:L.logDetailsHeading,"aria-label":"Fields",children:(0,e.jsx)(o.x6,{i18nKey:"logs.log-details.fields",children:"Fields"})})}),Object.keys(oe).sort().map((B,xe)=>{const re=oe[B];return(0,e.jsx)(Le,{parsedKeys:[B],parsedValues:[re],isLabel:!0,getStats:()=>(0,g.Tj)(z(),B),onClickFilterOutLabel:E,onClickFilterLabel:m,onClickShowField:G,onClickHideField:q,row:a,app:l,wrapLogMessage:ie,displayedFields:V,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive},`${B}=${re}-${xe}`)}),b.map((B,xe)=>{const{keys:re,values:W,fieldIndex:we}=B;return(0,e.jsx)(Le,{parsedKeys:re,parsedValues:W,onClickShowField:G,onClickHideField:q,onClickFilterOutLabel:E,onClickFilterLabel:m,getStats:()=>(0,g.s2)(a.dataFrame.fields[we].values),displayedFields:V,wrapLogMessage:ie,row:a,app:l,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive},`${re[0]}=${W[0]}-${xe}`)}),ne&&(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:100,className:L.logDetailsHeading,"aria-label":"Data Links",children:(0,e.jsx)(o.x6,{i18nKey:"logs.log-details.links",children:"Links"})})}),I.map((B,xe)=>{const{keys:re,values:W,links:we,fieldIndex:De}=B;return(0,e.jsx)(Le,{parsedKeys:re,parsedValues:W,links:we,onClickShowField:G,onClickHideField:q,onPinLine:pe,pinLineButtonTooltipTitle:M,getStats:()=>(0,g.s2)(a.dataFrame.fields[De].values),displayedFields:V,wrapLogMessage:ie,row:a,app:l,disableActions:!1},`${re[0]}=${W[0]}-${xe}`)}),N?.map((B,xe)=>{const{keys:re,values:W,links:we,fieldIndex:De}=B;return(0,e.jsx)(Le,{parsedKeys:re,parsedValues:W,links:we,onClickShowField:G,onClickHideField:q,onPinLine:pe,pinLineButtonTooltipTitle:M,getStats:()=>(0,g.s2)(a.dataFrame.fields[De].values),displayedFields:V,wrapLogMessage:ie,row:a,app:l,disableActions:!0},`${re[0]}=${W[0]}-${xe}`)}),!le&&!ge&&!ne&&(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:100,"aria-label":"No details",children:(0,e.jsx)(o.x6,{i18nKey:"logs.log-details.no-details",children:"No details available"})})})]})})})})]})}}const Pe=(0,x.cV)(je);Pe.displayName="LogDetails";var Be=s(28445),Ne=s(96877),Oe=s(66495);const Ie=(0,n.memo)(r=>{const{row:l,detectedFields:a,getFieldLinks:c,wrapLogMessage:d,styles:E,mouseIsOver:m,pinned:z,logRowMenuIconsBefore:de,logRowMenuIconsAfter:ee,preview:G,...q}=r,V=d?"":Se.noWrap,O=(0,n.useMemo)(()=>(0,Me.jE)(l,c),[c,l]),ie=(0,n.useMemo)(()=>{let L="";for(let M=0;M<a.length;M++){const te=a[M];te===Z.I&&(L+=` ${l.entry}`);const oe=O.find(ge=>ge.keys[0]===te);oe!=null&&(L+=` ${te}=${oe.values}`),l.labels[te]!=null&&l.labels[te]!=null&&(L+=` ${te}=${l.labels[te]}`)}return L.trimStart()},[a,O,l.entry,l.labels]),pe=m||z;return G?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("td",{children:(0,e.jsx)("div",{children:ie})}),(0,e.jsx)("td",{})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("td",{className:E.logsRowMessage,children:(0,e.jsx)("div",{className:V,children:ie})}),(0,e.jsx)("td",{className:`log-row-menu-cell ${E.logRowMenuCell}`,children:pe&&(0,e.jsx)(Oe.Q,{logText:ie,row:l,styles:E,pinned:z,mouseIsOver:m,addonBefore:de,addonAfter:ee,...q})})]})}),Se={noWrap:(0,t.css)({whiteSpace:"nowrap"})};Ie.displayName="LogRowMessageDisplayedFields";const Fe=({getRows:r,onClickFilterLabel:l,onClickFilterOutLabel:a,onClickShowField:c,onClickHideField:d,enableLogDetails:E,row:m,showDuplicates:z,showContextToggle:de,showLabels:ee,showTime:G,displayedFields:q,wrapLogMessage:V,prettifyLogMessage:O,getFieldLinks:ie,forceEscape:pe,app:L,styles:M,getRowContextQuery:te,pinned:oe,logRowMenuIconsBefore:ge,logRowMenuIconsAfter:fe,timeZone:h,permalinkedRowId:I,scrollIntoView:A,handleTextSelection:N,onLogRowHover:ne,...b})=>{const[le,be]=(0,n.useState)(!1),[B,xe]=(0,n.useState)(!1),[re,W]=(0,n.useState)(!1),[we,De]=(0,n.useState)(!1),Ke=(0,n.useRef)(null),He=(0,x.$j)(),Y=(0,n.useMemo)(()=>(0,w.LE)(m.timeEpochMs,{timeZone:h,defaultWithMS:!0}),[m.timeEpochMs,h]),_e=(0,n.useMemo)(()=>(0,Q.L)(He,m.logLevel),[m.logLevel,He]),Ce=(0,n.useMemo)(()=>m.hasUnescapedContent&&pe?{...m,entry:(0,g.Hw)(m.entry),raw:(0,g.Hw)(m.raw)}:m,[pe,m]),$e=(0,g.Ei)(m),Ae=$e!==void 0,ze=(0,g.qR)(m),Ve=ze!==void 0;(0,n.useEffect)(()=>{if(I!==m.uid){De(!1);return}if(!we){De(!0);return}Ke.current&&A&&(A(Ke.current),(0,C.rR)("grafana_explore_logs_permalink_opened",{datasourceType:m.datasourceType??"unknown",logRowUid:m.uid}),De(!0))},[we,I,m.datasourceType,m.uid,A]);const Ye=(0,n.useCallback)((0,f.debounce)(()=>{be(!1)},3e3),[]),Ze=(0,n.useCallback)(Ue=>{be(!0),b.onOpenContext(Ue,Ye)},[Ye,b]),Xe=(0,n.useCallback)(Ue=>{N?.(Ue,m)||E&&xe(qe=>!qe)},[E,N,m]),Je=(0,n.useCallback)(()=>{W(!0),ne&&ne(m)},[ne,m]),Qe=(0,n.useCallback)(Ue=>{N&&document.getSelection()?.toString()&&Ue.buttons>0&&W(!1)},[N]),Ge=(0,n.useCallback)(()=>{W(!1)},[]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("tr",{ref:Ke,className:`${M.logsRow} ${Ae?M.errorLogRow:""} ${le||we||oe?M.highlightBackground:""}`,onClick:Xe,onMouseEnter:Je,onMouseLeave:Ge,onMouseMove:Qe,onFocus:Je,children:[z&&(0,e.jsx)("td",{className:M.logsRowDuplicates,children:Ce.duplicates&&Ce.duplicates>0?`${Ce.duplicates+1}x`:null}),(0,e.jsxs)("td",{className:Ae||Ve?M.logsRowWithError:`${_e.logsRowLevelColor} ${M.logsRowLevel}`,children:[Ae&&(0,e.jsx)(F.m,{content:`Error: ${$e}`,placement:"right",theme:"error",children:(0,e.jsx)(T.I,{className:M.logIconError,name:"exclamation-triangle",size:"xs"})}),Ve&&(0,e.jsx)(F.m,{content:`${ze}`,placement:"right",theme:"info",children:(0,e.jsx)(T.I,{className:M.logIconInfo,name:"info-circle",size:"xs"})})]}),(0,e.jsx)("td",{title:E?B?"Hide log details":"See log details":"",className:E?M.logsRowToggleDetails:"",children:E&&(0,e.jsx)("button",{"aria-label":(0,o.t)("logs.log-row-message.see-details","See log details"),className:M.detailsToggle,"aria-expanded":B,children:(0,e.jsx)(T.I,{className:M.topVerticalAlign,name:B?"angle-down":"angle-right"})})}),G&&(0,e.jsx)("td",{className:M.logsRowLocalTime,children:Y}),ee&&Ce.uniqueLabels&&(0,e.jsx)("td",{className:M.logsRowLabels,children:(0,e.jsx)(Be.h,{labels:Ce.uniqueLabels,addTooltip:!1})}),q&&q.length>0?(0,e.jsx)(Ie,{row:Ce,showContextToggle:de,detectedFields:q,getFieldLinks:ie,wrapLogMessage:V,onOpenContext:Ze,onPermalinkClick:b.onPermalinkClick,styles:M,onPinLine:b.onPinLine,onUnpinLine:b.onUnpinLine,pinned:oe,mouseIsOver:re,onBlur:Ge,logRowMenuIconsBefore:ge,logRowMenuIconsAfter:fe}):(0,e.jsx)(Ne.a,{row:Ce,showContextToggle:de,getRowContextQuery:te,wrapLogMessage:V,prettifyLogMessage:O,onOpenContext:Ze,onPermalinkClick:b.onPermalinkClick,app:L,styles:M,onPinLine:b.onPinLine,onUnpinLine:b.onUnpinLine,pinLineButtonTooltipTitle:b.pinLineButtonTooltipTitle,pinned:oe,mouseIsOver:re,onBlur:Ge,expanded:B,logRowMenuIconsBefore:ge,logRowMenuIconsAfter:fe})]}),B&&(0,e.jsx)(Pe,{onPinLine:b.onPinLine,className:`${M.logsRow} ${Ae?M.errorLogRow:""} ${we&&!B?M.highlightBackground:""}`,showDuplicates:z,getFieldLinks:ie,onClickFilterLabel:l,onClickFilterOutLabel:a,onClickShowField:c,onClickHideField:d,getRows:r,row:Ce,wrapLogMessage:V,hasError:Ae,displayedFields:q,app:L,styles:M,isFilterLabelActive:b.isFilterLabelActive,pinLineButtonTooltipTitle:b.pinLineButtonTooltipTitle})]})},We=()=>{},ae=({row:r,showDuplicates:l,showLabels:a,showTime:c,displayedFields:d,...E})=>(0,e.jsxs)("tr",{children:[l&&(0,e.jsx)("td",{}),(0,e.jsx)("td",{}),(0,e.jsx)("td",{}),c&&(0,e.jsx)("td",{children:r.timeEpochMs}),a&&r.uniqueLabels&&(0,e.jsx)("td",{}),d&&d.length>0?(0,e.jsx)(Ie,{...E,row:r,detectedFields:d,mouseIsOver:!1,onBlur:We,onOpenContext:We,preview:!0}):(0,e.jsx)("td",{children:r.entry}),(0,e.jsx)("td",{})]}),ke=(0,n.memo)(({deduplicatedRows:r,logRows:l=[],dedupStrategy:a,logsSortOrder:c,previewLimit:d,pinnedLogs:E,onOpenContext:m,onClickFilterOutString:z,onClickFilterString:de,scrollElement:ee,renderPreview:G=!1,enableLogDetails:q,permalinkedRowId:V,...O})=>{const[ie,pe]=(0,n.useState)(G&&!V?Math.max(2*Math.ceil(window.innerHeight/20),Math.ceil(l.length/3)):1/0),[L,M]=(0,n.useState)({selection:"",selectedRow:null,popoverMenuCoordinates:{x:0,y:0}}),[te,oe]=(0,n.useState)(!1),ge=(0,n.useRef)(null),fe=(0,x.$j)(),h=(0,Q.D)(fe),I=r||l,A=(0,n.useMemo)(()=>I.reduce((Y,_e)=>_e.duplicates?Y+_e.duplicates:Y,0),[I]),N=a!==u.fY.none&&A>0,ne=(0,n.useMemo)(()=>c?(0,g.oR)(I,c):I,[I,c]),b=(0,n.useMemo)(()=>()=>ne,[ne]),le=(0,n.useRef)(null),be=new k;(0,n.useEffect)(()=>()=>{le.current&&(document.removeEventListener("click",le.current),document.removeEventListener("contextmenu",le.current))},[]),(0,n.useEffect)(()=>{if(!ee)return;function Y(){pe(1/0),ee?.removeEventListener("scroll",Y),ee?.removeEventListener("wheel",Y)}ee.addEventListener("scroll",Y),ee.addEventListener("wheel",Y)},[l.length,ee]);const B=(0,n.useCallback)((Y,_e)=>{m&&m(Y,_e)},[m]),xe=(0,n.useCallback)(()=>!H.$.featureToggles.logRowsPopoverMenu||(0,g.Vu)()?!1:!!(z||de),[z,de]),re=(0,n.useCallback)(()=>{le.current&&(document.removeEventListener("click",le.current),document.removeEventListener("contextmenu",le.current),le.current=null),M({selection:"",popoverMenuCoordinates:{x:0,y:0},selectedRow:null})},[]),W=(0,n.useCallback)(Y=>{if((0,g.a8)(Y.target)&&!ge.current?.contains(Y.target)){re();return}document.getSelection()?.toString()||re()},[re]),we=(0,n.useCallback)((Y,_e)=>{const Ce=document.getSelection()?.toString();if(!Ce)return!1;if(Y.altKey&&(0,g.Ck)(),xe()===!1)return!!Ce;if(!ge.current)return!1;const $e=270,Ae=105,ze=Y.clientX+$e>window.innerWidth?window.innerWidth-$e:Y.clientX,Ve=Y.clientY+Ae>window.innerHeight?window.innerHeight-Ae:Y.clientY;return M({selection:Ce,popoverMenuCoordinates:{x:ze,y:Ve},selectedRow:_e}),le.current=W,document.addEventListener("click",W),document.addEventListener("contextmenu",W),!0},[W,xe]),De=(0,n.useCallback)(()=>{oe(!0)},[]),Ke=(0,n.useCallback)(()=>{oe(!1)},[]),He=(0,n.useCallback)(()=>{(0,g.PO)(),oe(!1)},[]);return(0,e.jsxs)("div",{className:h.logRows,ref:ge,children:[L.selection&&L.selectedRow&&(0,e.jsx)(R,{close:re,row:L.selectedRow,selection:L.selection,...L.popoverMenuCoordinates,onClickFilterString:de,onClickFilterOutString:z,onDisable:De}),te&&(0,e.jsx)(D.u,{isOpen:!0,title:(0,o.t)("logs.log-rows.disable-popover.title","Disable menu"),body:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(o.x6,{i18nKey:"logs.log-rows.disable-popover.message",children:"You are about to disable the logs filter menu. To re-enable it, select text in a log line while holding the alt key."}),(0,e.jsxs)("div",{className:h.shortcut,children:[(0,e.jsx)(T.I,{name:"keyboard"}),(0,e.jsx)(o.x6,{i18nKey:"logs.log-rows.disable-popover-message.shortcut",children:"alt+select to enable again"})]})]}),confirmText:(0,o.t)("logs.log-rows.disable-popover.confirm","Confirm"),icon:"exclamation-triangle",onConfirm:He,onDismiss:Ke}),(0,e.jsx)("table",{className:(0,t.cx)(h.logsRowsTable,O.overflowingContent?"":h.logsRowsTableContain),children:(0,e.jsx)("tbody",{children:ne.map((Y,_e)=>_e<ie?(0,e.jsx)(Fe,{getRows:b,row:Y,showDuplicates:N,logsSortOrder:c,onOpenContext:B,styles:h,onPermalinkClick:O.onPermalinkClick,scrollIntoView:O.scrollIntoView,permalinkedRowId:V,onPinLine:O.onPinLine,onUnpinLine:O.onUnpinLine,pinLineButtonTooltipTitle:O.pinLineButtonTooltipTitle,pinned:O.pinnedRowId===Y.uid||E?.some(Ce=>Ce===Y.rowId),isFilterLabelActive:O.isFilterLabelActive,handleTextSelection:we,enableLogDetails:q,...O},be.getKey(Y.uid)):(0,e.jsx)(ae,{enableLogDetails:!1,getRows:b,onOpenContext:B,styles:h,showDuplicates:N,...O,row:Y},`preview_${be.getKey(Y.uid)}`))})})]})})},58134:(Te,ce,s)=>{s.d(ce,{D:()=>T,L:()=>D});var e=s(22803),t=s(41811),n=s(84140),u=s(18163),H=s(87190),x=s(94963);const D=(o,C)=>{let S=o.isLight?o.v1.palette.gray5:o.v1.palette.gray2;switch(C){case u.$b.crit:case u.$b.critical:S="#705da0";break;case u.$b.error:case u.$b.err:S="#e24d42";break;case u.$b.warning:case u.$b.warn:S=o.colors.warning.main;break;case u.$b.info:S="#7eb26d";break;case u.$b.debug:S="#1f78c1";break;case u.$b.trace:S="#6ed0e0";break}return{logsRowLevelColor:(0,e.css)({"&::after":{backgroundColor:S}})}},T=(0,t.default)(o=>{const C=x.hoverColor(o.colors.background.secondary,o),S=(0,n.A)(o.components.dashboard.background).setAlpha(.7).toRgbString();return{logsRowLevel:(0,e.css)({label:"logs-row__level",maxWidth:o.spacing(1.25),cursor:"default","&::after":{content:"''",display:"block",position:"absolute",top:"1px",bottom:"1px",width:"3px",left:o.spacing(.5)}}),logsRowWithError:(0,e.css)({maxWidth:`${o.spacing(1.5)}`}),logsRowMatchHighLight:(0,e.css)({label:"logs-row__match-highlight",background:"inherit",padding:"inherit",color:o.components.textHighlight.text,backgroundColor:o.components.textHighlight.background}),logRows:(0,e.css)({position:"relative"}),shortcut:(0,e.css)({display:"inline-flex",alignItems:"center",gap:o.spacing(1),color:o.colors.text.secondary,opacity:.7,fontSize:o.typography.bodySmall.fontSize,marginTop:o.spacing(1)}),logsRowsTable:(0,e.css)({label:"logs-rows",fontFamily:o.typography.fontFamilyMonospace,fontSize:o.typography.bodySmall.fontSize,width:"100%",position:"relative"}),logsRowsTableContain:(0,e.css)({contain:"strict"}),highlightBackground:(0,e.css)({backgroundColor:(0,n.A)(o.colors.info.transparent).setAlpha(.25).toString()}),logsRow:(0,e.css)({label:"logs-row",width:"100%",cursor:"pointer",verticalAlign:"top","&:focus-within":{outline:`2px solid ${o.colors.primary.border}`,outlineOffset:"-2px"},"&:hover":{".log-row-menu":{zIndex:1},background:C},"td:not(.log-row-menu-cell):last-child":{width:"100%"},"> td:not(.log-row-menu-cell)":{position:"relative",paddingRight:o.spacing(1),borderTop:"1px solid transparent",borderBottom:"1px solid transparent",height:"100%"}}),logsRowDuplicates:(0,e.css)({label:"logs-row__duplicates",textAlign:"right",width:"4em",cursor:"default"}),logIconError:(0,e.css)({color:o.colors.warning.main,position:"relative",top:"-2px"}),logIconInfo:(0,e.css)({color:o.colors.info.main,position:"relative",top:"-2px"}),logsRowToggleDetails:(0,e.css)({label:"logs-row-toggle-details__level",fontSize:"9px",maxWidth:"15px"}),logsRowLocalTime:(0,e.css)({label:"logs-row__localtime",whiteSpace:"nowrap"}),logsRowLabels:(0,e.css)({label:"logs-row__labels",whiteSpace:"nowrap",maxWidth:"22em","> span":{marginTop:"0.75px"}}),logsRowMessage:(0,e.css)({label:"logs-row__message",whiteSpace:"pre-wrap",wordBreak:"break-all",overflowWrap:"anywhere",width:"100%",textAlign:"left"}),copyLogButton:(0,e.css)({padding:o.spacing(0,0,0,.5),height:o.spacing(3),width:o.spacing(3.25),lineHeight:o.spacing(2.5),overflow:"hidden","&:hover":{backgroundColor:H.MV.alpha(o.colors.text.primary,.12)}}),logDetailsContainer:(0,e.css)({label:"logs-row-details-table",border:`1px solid ${o.colors.border.medium}`,padding:o.spacing(0,1,1),borderRadius:o.shape.radius.default,margin:o.spacing(2.5,1,2.5,2),cursor:"default"}),logDetailsTable:(0,e.css)({label:"logs-row-details-table",lineHeight:"18px",width:"100%","td:last-child":{width:"100%"}}),logsDetailsIcon:(0,e.css)({label:"logs-row-details__icon",position:"relative",color:o.v1.palette.gray3,paddingTop:"1px",paddingBottom:"1px",paddingRight:o.spacing(.75)}),logDetailsLabel:(0,e.css)({label:"logs-row-details__label",maxWidth:"30em",minMidth:"20em",padding:o.spacing(0,1),overflowWrap:"break-word"}),logDetailsHeading:(0,e.css)({label:"logs-row-details__heading",fontWeight:o.typography.fontWeightBold,padding:o.spacing(1,0,.5)}),logDetailsValue:(0,e.css)({label:"logs-row-details__row",position:"relative",verticalAlign:"middle",cursor:"default","&:hover":{backgroundColor:C}}),detailsToggle:(0,e.css)({appearance:"none",background:"none",border:"none",padding:0,maxHeight:"19px","&:focus-visible":{boxShadow:"none"},"&:focus":{outline:0},"&:after":{content:'""',inset:0,position:"absolute"}}),topVerticalAlign:(0,e.css)({label:"topVerticalAlign",marginTop:o.spacing(-.9),marginLeft:o.spacing(-.25)}),detailsOpen:(0,e.css)({"&:hover":{backgroundColor:x.hoverColor(o.colors.background.primary,o)}}),errorLogRow:(0,e.css)({label:"erroredLogRow",color:o.colors.text.secondary}),positionRelative:(0,e.css)({label:"positionRelative",position:"relative"}),rowWithContext:(0,e.css)({label:"rowWithContext",zIndex:1,outline:`9999px solid ${S}`,display:"inherit"}),horizontalScroll:(0,e.css)({label:"horizontalScroll",whiteSpace:"pre"}),contextNewline:(0,e.css)({display:"block",marginLeft:"0px"}),rowMenu:(0,e.css)({label:"rowMenu",display:"flex",flexWrap:"nowrap",flexDirection:"row",alignContent:"flex-end",justifyContent:"space-evenly",alignItems:"center",position:"absolute",top:0,bottom:"auto",background:o.colors.background.primary,boxShadow:o.shadows.z3,padding:o.spacing(.5,1,.5,1),zIndex:100,gap:o.spacing(.5),"& > button":{margin:0}}),logRowMenuCell:(0,e.css)({position:"sticky",zIndex:o.zIndex.dropdown,marginTop:o.spacing(-.125),right:0,"& > span":{transform:"translateX(-100%)"}}),logLine:(0,e.css)({fontFamily:o.typography.fontFamilyMonospace,fontSize:o.typography.bodySmall.fontSize,letterSpacing:o.typography.bodySmall.letterSpacing,textAlign:"left",padding:0,userSelect:"text"}),logsRowLevelDetails:(0,e.css)({label:"logs-row__level_details","&::after":{top:"-3px"}}),logDetails:(0,e.css)({label:"logDetailsDefaultCursor",cursor:"default","&:hover":{backgroundColor:o.colors.background.primary}}),visibleRowMenu:(0,e.css)({label:"visibleRowMenu",aspectRatio:"1/1",zIndex:90}),linkButton:(0,e.css)({label:"linkButton","> button":{paddingTop:o.spacing(.5)}}),hidden:(0,e.css)({label:"hidden",visibility:"hidden"}),unPinButton:(0,e.css)({height:o.spacing(3),lineHeight:o.spacing(2.5)})}})},59878:(Te,ce,s)=>{s.d(ce,{V:()=>$});var e=s(74848),t=s(22803),n=s(2543),u=s(96540),H=s(16817),x=s(8392),D=s(7500),T=s(18163),o=s(3202),C=s(56276),S=s(32370),g=s(29675),R=s(25356),j=s(54594),p=s(82856),k=s(60792),f=s(67078),w=s(61491),F=s(55909),K=s(48224),Z=s(33143),J=s(10069),ye=s(29010);function he(i){return{buttons:(0,t.css)({display:"flex",gap:i.spacing(1)})}}const ue=i=>{const U=(0,g.of)(he),{wrapLines:Q,onChangeWrapLines:ve,onScrollCenterClick:me}=i,Ee=(0,u.useCallback)(Re=>{const Le=Re.currentTarget.checked;(0,C.rR)("grafana_explore_logs_log_context_toggle_lines_clicked",{state:Le}),ve(Le)},[ve]);return(0,e.jsxs)("div",{className:U.buttons,children:[(0,e.jsx)(ye.K,{showLabel:!0,value:Q,onChange:Ee,label:"Wrap lines"}),(0,e.jsx)(j.$n,{variant:"secondary",onClick:me,children:"Center matched line"})]})},v=i=>({modal:(0,t.css)({width:"85vw",[i.breakpoints.down("md")]:{width:"100%"},top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),sticky:(0,t.css)({position:"sticky",zIndex:1,top:"-1px",bottom:"-1px"}),entry:(0,t.css)({"& > td":{padding:i.spacing(1,0,1,0)},background:i.colors.emphasize(i.colors.background.secondary),"& > table":{marginBottom:0},"& .log-row-menu":{marginTop:"-6px"}}),datasourceUi:(0,t.css)({paddingBottom:i.spacing(1.25),display:"flex",alignItems:"center"}),logRowGroups:(0,t.css)({overflow:"auto",maxHeight:"75%",alignSelf:"stretch",display:"inline-block",border:`1px solid ${i.colors.border.weak}`,borderRadius:i.shape.radius.default,"& > table":{minWidth:"100%"}}),flexColumn:(0,t.css)({display:"flex",flexDirection:"column",padding:i.spacing(0,3,3,3)}),flexRow:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center","& > div:last-child":{marginLeft:"auto"}}),noMarginBottom:(0,t.css)({"& > table":{marginBottom:0}}),hidden:(0,t.css)({display:"none"}),paddingTop:(0,t.css)({paddingTop:i.spacing(1)}),paddingBottom:(0,t.css)({paddingBottom:i.spacing(1)}),link:(0,t.css)({color:i.colors.text.secondary,fontSize:i.typography.bodySmall.fontSize,":hover":{color:i.colors.text.link}}),loadingCell:(0,t.css)({position:"sticky",left:"50%",display:"inline-block",transform:"translateX(-50%)"})}),y=()=>({above:{loadingState:x.Gu.NotStarted,rows:[]},below:{loadingState:x.Gu.NotStarted,rows:[]}}),_=(i,U)=>i==="above"&&U===D.uH.Descending||i==="below"&&U===D.uH.Ascending?T.ZF.Forward:T.ZF.Backward,P=(i,U)=>({...i,dataFrame:{...i.dataFrame,refId:`context_${U.above}_${U.below}`}}),se=(i,U)=>i.some(Q=>Q.entry===U.entry&&Q.timeEpochNs===U.timeEpochNs),X=100,$=({row:i,open:U,logsSortOrder:Q,timeZone:ve,getLogRowContextUi:me,getRowContextQuery:Ee,onClose:Re,getRowContext:Le})=>{const Me=(0,u.useRef)(null),je=(0,u.useRef)(null),Pe=(0,u.useRef)(null),Be=(0,u.useRef)(null),Ne=(0,u.useRef)(null),Oe=(0,u.useRef)(null),Ie=(0,u.useRef)(null),Se=(0,u.useRef)({above:0,below:0}),Fe=(0,w.useDispatch)(),We=(0,g.$j)(),ae=v(We),[ke,r]=(0,u.useState)(!0),[l,a]=(0,u.useState)(y()),c=(h,I)=>{a(A=>{const N={...A};return N[h]=I(A[h]),N})},d=(0,u.useRef)(1),[E,m]=(0,u.useState)(null),[z,de]=(0,u.useState)(p.A.getBool(k.$Z.logContextWrapLogMessage,p.A.getBool(k.$Z.wrapLogMessage,!0))),ee=(0,u.useCallback)(()=>{const{below:h,above:I}=l,A=(0,K.oR)([...h.rows,i,...I.rows],D.uH.Ascending),N=A[0].timeEpochMs;let ne=A[A.length-1].timeEpochMs;N===ne&&(ne+=1);const b=(0,o.KQ)(N),le=(0,o.KQ)(ne);return{from:b,to:le,raw:{from:b,to:le}}},[l,i]),G=(0,u.useCallback)(async()=>{const h=Ee?await Ee(i):null;m(h)},[i,Ee]),q=async()=>{await G(),a(y()),Se.current={above:0,below:0},d.current+=1},V=async(h,I)=>{Se.current[h]+=1;const A=I.at(h==="above"?0:-1);if(A==null)throw new Error("should never happen. the array always contains at least 1 item (the middle row)");(0,C.rR)("grafana_explore_logs_log_context_load_more_called",{datasourceType:A.datasourceType,above:Se.current.above,below:Se.current.below});const N=_(h,Q),ne=await Le(P(A,Se.current),{limit:X,direction:N}),b=(0,F.HT)(ne.data).rows;return Q===D.uH.Ascending&&b.reverse(),b.filter(be=>!se(I,be))};(0,u.useEffect)(()=>{U&&G()},[G,U]);const[O,ie]=(0,u.useState)([]),pe=h=>{O.indexOf(h)===-1&&ie([...O,h])},L=h=>{const I=O.indexOf(h);I>-1&&(O.splice(I,1),ie([...O]))},M=async h=>{const{below:I,above:A}=l;if(l[h].loadingState===x.Gu.Loading)return;c(h,b=>({...b,loadingState:x.Gu.Loading}));const ne=d.current;try{const b=[...A.rows,i,...I.rows],le=(await V(h,b)).map(W=>!W.searchWords||!W.searchWords?.length?{...W,searchWords:i.searchWords}:W),[be,B]=(0,n.partition)(le,W=>W.timeEpochNs>i.timeEpochNs),xe=Q===D.uH.Ascending?B:be,re=Q===D.uH.Ascending?be:B;ne===d.current&&a(W=>{const we=xe.length>0?(0,K.oR)([...xe,...W.above.rows],Q):W.above.rows,De=re.length>0?(0,K.oR)([...W.below.rows,...re],Q):W.below.rows;return{above:{rows:we,loadingState:h==="above"?le.length===0?x.Gu.Done:x.Gu.NotStarted:W.above.loadingState},below:{rows:De,loadingState:h==="below"?le.length===0?x.Gu.Done:x.Gu.NotStarted:W.below.loadingState}}})}catch{c(h,b=>({rows:b.rows,loadingState:x.Gu.Error}))}},te=async(h,I)=>{for(const A of h){if(!A.isIntersecting)continue;const N=A.target;N===Oe.current?M("above"):N===Ie.current&&M("below")}};(0,u.useEffect)(()=>{const h=Me.current,I=Oe.current,A=Ie.current;if(h==null)return;const N=new IntersectionObserver(te,{root:h});return I!=null&&N.observe(I),A!=null&&N.observe(A),()=>{N.disconnect()}});const oe=(0,u.useCallback)(()=>{Pe.current?.scrollIntoView({block:"center"}),je.current?.scrollIntoView({block:"center"})},[Pe,je]);(0,u.useLayoutEffect)(()=>{const h=Me.current;if(h==null)return;const I=Ne.current,A=h.clientHeight;if(Ne.current=A,I!==A){oe();return}if(Se.current.above<=1&&Se.current.below<=1){oe();return}const N=Be.current,ne=h.scrollHeight;if(Be.current=ne,N!=null){const b=h.scrollTop+(ne-N);h.scrollTop=b}},[l.above.rows,oe]),(0,H.A)(G,[Ee,i]);const ge=l.above.loadingState,fe=l.below.loadingState;return(0,e.jsxs)(R.a,{isOpen:U,title:"Log context",contentClassName:ae.flexColumn,className:ae.modal,onDismiss:Re,children:[S.$.featureToggles.logsContextDatasourceUi&&me&&(0,e.jsx)("div",{className:ae.datasourceUi,children:me(i,q)}),(0,e.jsx)("div",{className:(0,t.cx)(ae.flexRow,ae.paddingBottom),children:(0,e.jsx)("div",{children:(0,e.jsx)(ue,{wrapLines:z,onChangeWrapLines:de,onScrollCenterClick:oe})})}),(0,e.jsx)("div",{ref:Me,className:ae.logRowGroups,children:(0,e.jsx)("table",{children:(0,e.jsxs)("tbody",{children:[(0,e.jsx)("tr",{children:(0,e.jsxs)("td",{className:ae.loadingCell,children:[ge!==x.Gu.Done&&ge!==x.Gu.Error&&(0,e.jsx)("div",{ref:Oe,children:(0,e.jsx)(Z.I,{adjective:"newer"})}),ge===x.Gu.Error&&(0,e.jsx)("div",{children:"Error loading log more logs."}),ge===x.Gu.Done&&(0,e.jsx)("div",{children:"No more logs available."})]})}),(0,e.jsx)("tr",{children:(0,e.jsx)("td",{className:ae.noMarginBottom,children:(0,e.jsx)(J.k,{logRows:l.above.rows,dedupStrategy:D.fY.none,showLabels:p.A.getBool(k.$Z.showLabels,!1),showTime:p.A.getBool(k.$Z.showTime,!0),wrapLogMessage:z,prettifyLogMessage:p.A.getBool(k.$Z.prettifyLogMessage,!1),enableLogDetails:!0,timeZone:ve,displayedFields:O,onClickShowField:pe,onClickHideField:L,scrollElement:null})})}),(0,e.jsx)("tr",{ref:Pe}),(0,e.jsx)("tr",{ref:je,className:(0,t.cx)(ae.entry,ke?ae.sticky:null),"data-testid":"entry-row",children:(0,e.jsx)("td",{className:ae.noMarginBottom,children:(0,e.jsx)(J.k,{logRows:[i],dedupStrategy:D.fY.none,showLabels:p.A.getBool(k.$Z.showLabels,!1),showTime:p.A.getBool(k.$Z.showTime,!0),wrapLogMessage:z,prettifyLogMessage:p.A.getBool(k.$Z.prettifyLogMessage,!1),enableLogDetails:!0,timeZone:ve,displayedFields:O,onClickShowField:pe,onClickHideField:L,onUnpinLine:()=>r(!1),onPinLine:()=>r(!0),pinnedRowId:ke?i.uid:void 0,overflowingContent:!0,scrollElement:null})})}),(0,e.jsx)("tr",{children:(0,e.jsx)("td",{children:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(J.k,{logRows:l.below.rows,dedupStrategy:D.fY.none,showLabels:p.A.getBool(k.$Z.showLabels,!1),showTime:p.A.getBool(k.$Z.showTime,!0),wrapLogMessage:z,prettifyLogMessage:p.A.getBool(k.$Z.prettifyLogMessage,!1),enableLogDetails:!0,timeZone:ve,displayedFields:O,onClickShowField:pe,onClickHideField:L,scrollElement:null})})})}),(0,e.jsx)("tr",{children:(0,e.jsxs)("td",{className:ae.loadingCell,children:[fe!==x.Gu.Done&&fe!==x.Gu.Error&&(0,e.jsx)("div",{ref:Ie,children:(0,e.jsx)(Z.I,{adjective:"older"})}),fe===x.Gu.Error&&(0,e.jsx)("div",{children:"Error loading log more logs."}),fe===x.Gu.Done&&(0,e.jsx)("div",{children:"No more logs available."})]})})]})})}),(0,e.jsx)(R.a.ButtonRow,{children:E?.datasource?.uid&&(0,e.jsx)(j.$n,{variant:"secondary",onClick:async()=>{let h=i.uid;i.dataFrame.refId&&(h=i.uid.replace(i.dataFrame.refId,E.refId)),Fe((0,f.ve)({queries:[E],range:ee(),datasourceUid:E.datasource.uid,panelsState:{logs:{id:h}}})),Re(),(0,C.rR)("grafana_explore_logs_log_context_open_split_view_clicked",{datasourceType:i.datasourceType,logRowUid:i.uid})},children:"Open in split view"})})]})}}}]);

//# sourceMappingURL=3776.1178fe5298ad2272a8c5.js.map