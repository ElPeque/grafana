"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5594],{69921:(Ae,ne,l)=>{l.d(ne,{i:()=>c});var R=l(74848),B=l(22803),Y=l(29675);const c=({children:w,className:T})=>{const L=(0,Y.of)(G);return(0,R.jsx)("div",{className:(0,B.cx)(L.wrapper,T),children:w})},G=w=>({wrapper:(0,B.css)({display:"flex",flexDirection:"column",fontSize:w.typography.bodySmall.fontSize})})},72166:(Ae,ne,l)=>{l.d(ne,{R:()=>L});var R=l(74848),B=l(22803),Y=l(96540),c=l(29675),G=l(79784),w=l(34128),T=l(64467);const L=({name:W,onChange:ae,verifyLayerNameUniqueness:me,overrideStyles:Me})=>{const ue=(0,c.of)(_),[ie,P]=(0,Y.useState)(!1),[S,v]=(0,Y.useState)(null),r=$=>{P(!0)},M=$=>{if(P(!1),S){v(null);return}W!==$&&ae($)},U=$=>{const le=$.currentTarget.value.trim();if(le.length===0){v("An empty layer name is not allowed");return}if(me&&!me(le)&&le!==W){v("Layer name already exists");return}S&&v(null)},Q=$=>{M($.currentTarget.value.trim())},E=$=>{$.key==="Enter"&&M($.currentTarget.value)},F=$=>{$.target.select()};return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)("div",{className:ue.wrapper,children:[!ie&&(0,R.jsxs)("button",{className:ue.layerNameWrapper,title:"Edit layer name",onClick:r,"data-testid":"layer-name-div",children:[(0,R.jsx)("span",{className:Me?"":ue.layerName,children:W}),(0,R.jsx)(G.I,{name:"pen",className:ue.layerEditIcon,size:"sm"})]}),ie&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(w.p,{type:"text",defaultValue:W,onBlur:Q,autoFocus:!0,onKeyDown:E,onFocus:F,invalid:S!==null,onChange:U,className:ue.layerNameInput,"data-testid":"layer-name-input"}),S&&(0,R.jsx)(T.P,{horizontal:!0,children:S})]})]})})},_=W=>({wrapper:(0,B.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:W.spacing(.5)}),layerNameWrapper:(0,B.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:W.shape.radius.default,alignItems:"center",padding:`0 0 0 ${W.spacing(.5)}`,margin:0,background:"transparent","&:hover":{background:W.colors.action.hover,border:`1px dashed ${W.colors.border.strong}`},"&:focus":{border:`2px solid ${W.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),layerName:(0,B.css)({fontWeight:W.typography.fontWeightMedium,color:W.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:W.spacing(.5)}),layerEditIcon:(0,B.cx)((0,B.css)({marginLeft:W.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),layerNameInput:(0,B.css)({maxWidth:"300px",margin:"-4px 0"})})},84151:(Ae,ne,l)=>{l.r(ne),l.d(ne,{plugin:()=>pt});var R=l(68256),B=l(30040),Y=l(13678),c=l(74848),G=l(22803),w=l(96540),T=l(84596),L=l(38075),_=l(49448),W=l(23570),ae=l(63739),me=l(29675),Me=l(54594),ue=l(99764),ie=l(86489),P=l(44826),S=l(59748),v=l(72166),r=l(61733);const M=({value:e,onChange:d,context:o})=>{const y=(0,me.of)(U),N=o.options?.mapping,h=(0,T.A)(N),x=h!=null&&N!==h,g={frame:{matcher:{id:L.jR.byIndex,options:0}}},[n,f]=(0,w.useState)(0);(x||e==null)&&(e=[{...g}],d([...e]),n>0&&f(0));const O=()=>{e=e.concat({...g}),f(e.length-1),d([...e])},D=t=>{e=e.filter((i,s)=>s!==t),f(0),d([...e])},u=e[n],V=`${N}${n}`,a=N===r.it.Manual?_.X4.ExcludeBaseNames:o.data.length===1?_.X4.IncludeAll:_.X4.OnlyBaseNames;return o.data.forEach((t,i)=>{t.fields.forEach((s,A)=>{s.state={...s.state,origin:{frameIndex:i,fieldIndex:A}}})}),(0,c.jsxs)(c.Fragment,{children:[N===r.it.Manual&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Me.$n,{icon:"plus",size:"sm",variant:"secondary",onClick:O,className:y.marginBot,children:"Add series"}),(0,c.jsx)("div",{className:y.marginBot,children:e.map((t,i)=>(0,c.jsxs)("div",{className:i===n?`${y.row} ${y.sel}`:y.row,onClick:()=>f(i),role:"button","aria-label":`Select series ${i+1}`,tabIndex:0,onKeyPress:s=>{s.key==="Enter"&&f(i)},children:[(0,c.jsx)(v.R,{name:t.name?.fixed??`Series ${i+1}`,onChange:s=>{t.name={fixed:s===""||s===`Series ${i+1}`?void 0:s},d([...e])}}),(0,c.jsx)(ue.K,{name:"trash-alt",title:"remove",className:(0,G.cx)(y.actionIcon),onClick:()=>D(i),tooltip:"Delete series"})]},`series/${i}`))})]}),n>=0&&u!=null&&(0,c.jsxs)(w.Fragment,{children:[(0,c.jsx)(ie.D,{label:"Frame",children:(0,c.jsx)(P.l6,{placeholder:N===r.it.Auto?"All frames":"Select frame",isClearable:!0,options:o.data.map((t,i)=>({value:i,label:`${(0,W.Ri)(t,i)} (index: ${i}, rows: ${t.length})`})),value:u.frame?.matcher.options,onChange:t=>{t==null?delete u.frame:u.frame={matcher:{id:L.jR.byIndex,options:Number(t.value)}},d([...e])}})}),(0,c.jsx)(ie.D,{label:"X field",children:(0,c.jsx)(S.O,{value:u.x?.matcher.options,context:o,onChange:t=>{t==null?delete u.x:u.x={matcher:{id:L.Ct.byName,options:t}},d([...e])},item:{id:"x",name:"x",settings:{filter:t=>(N===r.it.Auto||t.state?.origin?.frameIndex===u.frame?.matcher.options)&&t.type===ae.PU.number&&!t.config.custom?.hideFrom?.viz,baseNameMode:a,placeholderText:N===r.it.Auto?"First number field in each frame":void 0}}})}),(0,c.jsx)(ie.D,{label:"Y field",children:(0,c.jsx)(S.O,{value:u.y?.matcher?.options,context:o,onChange:t=>{t==null?delete u.y:u.y={matcher:{id:L.Ct.byName,options:t}},d([...e])},item:{id:"y",name:"y",settings:{filter:t=>(N===r.it.Auto||t.state?.origin?.frameIndex===u.frame?.matcher.options)&&t.type===ae.PU.number&&!t.config.custom?.hideFrom?.viz,baseNameMode:a,placeholderText:N===r.it.Auto?"Remaining number fields in each frame":void 0}}})}),(0,c.jsx)(ie.D,{label:"Size field",children:(0,c.jsx)(S.O,{value:u.size?.matcher?.options,context:o,onChange:t=>{t==null?delete u.size:u.size={matcher:{id:L.Ct.byName,options:t}},d([...e])},item:{id:"size",name:"size",settings:{filter:t=>t.name!==u.x?.matcher.options&&(N===r.it.Auto||t.state?.origin?.frameIndex===u.frame?.matcher.options)&&t.type===ae.PU.number&&!t.config.custom?.hideFrom?.viz,baseNameMode:a,placeholderText:""}}})}),(0,c.jsx)(ie.D,{label:"Color field",children:(0,c.jsx)(S.O,{value:u.color?.matcher?.options,context:o,onChange:t=>{t==null?delete u.color:u.color={matcher:{id:L.Ct.byName,options:t}},d([...e])},item:{id:"color",name:"color",settings:{filter:t=>t.name!==u.x?.matcher.options&&(N===r.it.Auto||t.state?.origin?.frameIndex===u.frame?.matcher.options)&&t.type===ae.PU.number&&!t.config.custom?.hideFrom?.viz,baseNameMode:a,placeholderText:""}}})})]},V)]})},U=e=>({marginBot:(0,G.css)({marginBottom:"20px"}),row:(0,G.css)({padding:`${e.spacing(.5,1)}`,borderRadius:`${e.shape.radius.default}`,background:`${e.colors.background.secondary}`,minHeight:`${e.spacing(4)}`,display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"3px",cursor:"pointer",border:`1px solid ${e.components.input.borderColor}`,"&:hover":{border:`1px solid ${e.components.input.borderHover}`}}),sel:(0,G.css)({border:`1px solid ${e.colors.primary.border}`,"&:hover":{border:`1px solid ${e.colors.primary.border}`}}),actionIcon:(0,G.css)({color:`${e.colors.text.secondary}`,"&:hover":{color:`${e.colors.text}`}})});var Q=l(62931),E=l(87190),F=l(32370),$=l(85832),le=l(43987),he=l(87579),K=l(7500),Pe=l(12963),ee=l(7257),De=l(69598),Le=l(53823),pe=l(14411),ve=l(33409),xe=l(69921),ye=l(85217),J=l(11044);function C(e,d){return e!==d&&e.includes(" ")&&(e=e.replace(d,"").trim()),e}const I=({dataIdxs:e,seriesIdx:d,data:o,xySeries:y,dismiss:N,isPinned:h,replaceVariables:x,dataLinks:g})=>{const n=e.find(p=>p!==null),f=y[d-1],O=f.x.field,D=f.y.field,u=f.size.field,V=f.color.field;let a=f.name.value,t=f.color.fixed;const i={label:a,value:"",color:(0,E.X4)(t??"#fff",.5),colorIndicator:ye.fX.marker_md},s=[{label:C(O.state?.displayName??O.name,a),value:(0,J.Sc)(O,O.values[n])},{label:C(D.state?.displayName??D.name,a),value:(0,J.Sc)(D,D.values[n])}];u!=null&&u!==D&&s.push({label:C(u.state?.displayName??u.name,a),value:(0,J.Sc)(u,u.values[n])}),V!=null&&V!==D&&s.push({label:C(V.state?.displayName??V.name,a),value:(0,J.Sc)(V,V.values[n])}),f._rest.forEach(p=>{s.push({label:C(p.state?.displayName??p.name,a),value:(0,J.Sc)(p,p.values[n])})});let A;if(d!=null){const p=g?.some(m=>m.oneClick===!0);if(h||p){const m=o.find(k=>k.fields.includes(D)),b=(0,De.OG)(m,D,x,n);A=(0,c.jsx)(pe.S,{dataLinks:g,actions:b})}}return(0,c.jsxs)(xe.i,{children:[(0,c.jsx)(ve.A,{item:i,isPinned:h}),(0,c.jsx)(Le.o,{items:s,isPinned:h}),A]})};var se=l(84140),te=l(36613),Se=l(59141),H=l(65329),Ne=l(99116),We=l(18752),Be=l(13076),tt=l(5858),Xe=l(49840),it=l(49349);const lt=(e,d)=>{if(e.length===0)return{builder:null,prepData:()=>[]};let o,y;function N(a){return(i,s,A,p)=>(te.A.orient(i,s,(m,b,k,X,Z,z,re,j,de,$e,Ce,xt,Ye,Ge,Dt)=>{const ze=te.A.pxRatio,ce=e[s-1];let Ve=i.data[s],Ue=ce.showLine,gt=ce.showPoints===K.yL.Always,ge=ce.pointStrokeWidth??0;i.ctx.save(),i.ctx.rect(i.bbox.left,i.bbox.top,i.bbox.width,i.bbox.height),i.ctx.clip();let Ie=ce.fillOpacity/100;i.ctx.fillStyle=(0,E.X4)(m.fill(),Ie),i.ctx.strokeStyle=(0,E.X4)(m.stroke(),1),i.ctx.lineWidth=ge;let vt=2*Math.PI,Qe=X.key,Je=Z.key;const ke=ce.y.field.config.custom.pointSize,Ke=ce.color.field!=null;let Fe=(ke.max??ke.fixed)*ze,yt=i.posToVal(-Fe/2,Qe),St=i.posToVal(i.bbox.width/ze+Fe/2,Qe),Et=i.posToVal(i.bbox.height/ze+Fe/2,Je),Ct=i.posToVal(-Fe/2,Je),Ot=a.disp.size.values(i,s),qe=u[s-1].values,Mt=u[s-1].index,Pt=u[s-1].hasAlpha,Nt=ce.pointShape===r.uZ.Square,_e=Ue?new Path2D:null,Te=-1;for(let q=0;q<Ve[0].length;q++){let we=Ve[0][q],He=Ve[1][q];if(we>=yt&&we<=St&&He>=Et&&He<=Ct){let oe=Math.round(Ot[q]*ze),je=z(we,X,$e,j),Re=re(He,Z,Ce,de);if(Ue&&_e.lineTo(je,Re),gt){if(Ke&&qe[q]!==Te){Te=qe[q];let Oe=Te===-1?Q.F:Mt[Te];i.ctx.fillStyle=Pt?Oe:(0,E.X4)(Oe,Ie),i.ctx.strokeStyle=(0,E.X4)(Oe,1)}if(Nt){let Oe=Math.round(je-oe/2),et=Math.round(Re-oe/2);(Ke||Ie>0)&&i.ctx.fillRect(Oe,et,oe,oe),ge>0&&i.ctx.strokeRect(Oe,et,oe,oe)}else i.ctx.beginPath(),i.ctx.arc(je,Re,oe/2,0,vt),(Ke||Ie>0)&&i.ctx.fill(),ge>0&&i.ctx.stroke();a.each(i,s,q,je-oe/2-ge/2,Re-oe/2-ge/2,oe+ge,oe+ge)}}}if(Ue){i.ctx.strokeStyle=ce.color.fixed,i.ctx.lineWidth=ce.lineWidth*ze;const{lineStyle:q}=ce;q&&q.fill!=="solid"&&(q.fill==="dot"&&(i.ctx.lineCap="round"),i.ctx.setLineDash(q.dash??[10,10])),i.ctx.stroke(_e)}i.ctx.restore()}),null)}let h=N({disp:{size:{values:(a,t)=>a.data[t][2]},color:{values:(a,t)=>a.data[t][3]}},each:(a,t,i,s,A,p,m)=>{s-=a.bbox.left,A-=a.bbox.top,o.add({x:s,y:A,w:p,h:m,sidx:t,didx:i})}});const x=new tt.e;x.setCursor({drag:{setScale:!0},dataIdx:(a,t)=>{if(t===1){const i=te.A.pxRatio;y=null;let s=1/0,A=a.cursor.left*i,p=a.cursor.top*i;o.get(A,p,1,1,m=>{if((0,Xe.ur)(A,p,m.x,m.y,m.x+m.w,m.y+m.h)){let b=m.x+m.w/2,k=m.y+m.h/2,X=b-A,Z=k-p,z=Math.sqrt(X**2+Z**2);z<=m.w/2&&z<=s&&(s=z,y=m)}})}return y&&t===y.sidx?y.didx:null},points:{size:(a,t)=>y&&t===y.sidx?y.w/te.A.pxRatio:0,fill:(a,t)=>"rgba(255,255,255,0.4)"}}),x.addHook("init",(a,t)=>{a.over.style.overflow="hidden"}),x.addHook("drawClear",a=>{o=o||new Xe.C$(0,0,a.bbox.width,a.bbox.height),o.clear(),a.series.forEach((t,i)=>{i>0&&(t._paths=null)})}),x.setMode(2);let g=e[0].x.field,n=g.config,f=n.custom,O=f?.scaleDistribution;x.addScale({scaleKey:"x",isTime:!1,orientation:K.Lt.Horizontal,direction:K.ON.Right,distribution:O?.type,log:O?.log,linearThreshold:O?.linearThreshold,min:n.min,max:n.max,softMin:f?.axisSoftMin,softMax:f?.axisSoftMax,centeredZero:f?.axisCenteredZero,decimals:n.decimals});let D=f.axisLabel;if(D==null||D===""){let a=e.map(i=>i.x.field.state?.displayName??""),t=e.length===1?g.state?.displayName??g.name:new Set(a).size===1?a[0]:(0,J.rE)(a);t!==""&&(D=t)}x.addAxis({scaleKey:"x",placement:f?.axisPlacement!==K.vM.Hidden?K.vM.Bottom:K.vM.Hidden,show:f?.axisPlacement!==K.vM.Hidden,grid:{show:f?.axisGridShow},border:{show:f?.axisBorderShow},theme:d,label:D,formatValue:(a,t)=>(0,Se.cN)(g.display(a,t))}),e.forEach((a,t)=>{let i=a.y.field;const s=a.color.fixed,A=a.color.fixed;let p=i.config.unit??"y",m=i.config,b=m.custom,k=b?.scaleDistribution;x.addScale({scaleKey:p,orientation:K.Lt.Vertical,direction:K.ON.Up,distribution:k?.type,log:k?.log,linearThreshold:k?.linearThreshold,min:m.min,max:m.max,softMin:b?.axisSoftMin,softMax:b?.axisSoftMax,centeredZero:b?.axisCenteredZero,decimals:m.decimals});let X=b.axisLabel;if(X==null||X===""){let Z=e.map(re=>re.y.field.state?.displayName??""),z=e.length===1?i.state?.displayName??i.name:new Set(Z).size===1?Z[0]:(0,J.rE)(Z);z!==""&&(X=z)}x.addAxis({scaleKey:p,theme:d,placement:b?.axisPlacement===K.vM.Auto?K.vM.Left:b?.axisPlacement,show:b?.axisPlacement!==K.vM.Hidden,grid:{show:b?.axisGridShow},border:{show:b?.axisBorderShow},size:b?.axisWidth,label:X,formatValue:(Z,z)=>(0,Se.cN)(i.display(Z,z))}),x.addSeries({facets:[{scale:"x",auto:!0},{scale:p,auto:!0}],pathBuilder:h,theme:d,scaleKey:"",lineColor:(0,E.X4)(s??"#ffff",1),fillColor:(0,E.X4)(A??"#ffff",.5),show:!i.state?.hideFrom?.viz})});const u=e.map(a=>{const t={index:[],getAll:()=>[],getOne:()=>-1,values:[],hasAlpha:!1},i=a.color.field;return i!=null&&(Object.assign(t,nt(i,d)),t.hasAlpha=t.index.some(s=>!s.endsWith("ff"))),t});function V(a){const{size:t,color:i}=ot(a);return a.forEach((s,A)=>{u[A].values=u[A].getAll(s.color.field?.values??[],i.min,i.max)}),[null,...a.map((s,A)=>{let p=s.x.field.values.length,m;if(s.size.field!=null){let{min:b,max:k}=s.size,X=b**2,z=k**2-X,re=s.size.field.values,j=t.min,$e=t.max-j;m=Array(p);for(let Ce=0;Ce<re.length;Ce++){let Ye=(re[Ce]-j)/$e,Ge=X+Ye*z;m[Ce]=Ge**.5}}else m=Array(p).fill(s.size.fixed);return[s.x.field.values,s.y.field.values,m,Array(p).fill(s.color.fixed)]})]}return{builder:x,prepData:V}},ot=e=>{const d={size:{min:1/0,max:-1/0},color:{min:1/0,max:-1/0}};return e.forEach(o=>{[o.size,o.color].forEach((y,N)=>{if(y.field!=null){let h=N===0?d.size:d.color;const x=y.field.values;for(let g=0;g<x.length;g++){const n=x[g];n!=null&&(n<h.min&&(h.min=n),n>h.max&&(h.max=n))}}})}),d};function be(e,d){return(0,se.A)(d.visualization.getColorByName(e)).toHex8String()}function nt(e,d){let o=[],y=()=>[],N=()=>-1,h="";if(e.config.mappings?.length??!1){let x=e.config.mappings;for(let g=0;g<x.length;g++){let n=x[g];if(n.type===H.d.ValueToText)for(let f in n.options){let{color:O}=n.options[f];if(O!=null){let D=e.type===ae.PU.string?JSON.stringify(f):Number(f);h+=`v === ${D} ? ${o.length} : `,o.push(be(O,d))}}else if(n.options.result.color!=null){let{color:f}=n.options.result;if(n.type===H.d.RangeToText){let O=[];n.options.from!=null&&O.push(`v >= ${Number(n.options.from)}`),n.options.to!=null&&O.push(`v <= ${Number(n.options.to)}`),O.length>0&&(h+=`${O.join(" && ")} ? ${o.length} : `,o.push(be(f,d)))}else if(n.type===H.d.SpecialValue){let O=n.options.match;O===H.W.NaN?h+="isNaN(v)":O===H.W.NullAndNaN?h+="v == null || isNaN(v)":h+=`v ${O===H.W.True?"=== true":O===H.W.False?"=== false":O===H.W.Null?"== null":O===H.W.Empty?'=== ""':"== null"}`,h+=` ? ${o.length} : `,o.push(be(f,d))}else n.type,H.d.RegexToText}}h+="-1"}else if(e.config.color?.mode===Be.Yb.Thresholds){if(e.config.thresholds?.mode===Ne.O.Absolute){let x=e.config.thresholds.steps,g=x.length-1;for(let n=g;n>0;n--)h+=`v >= ${x[n].value} ? ${n} : `;h+="0",o=x.map(n=>be(n.color,d))}}else if(e.config.color?.mode?.startsWith("continuous")){let x=(0,We.Qi)(e).getCalculator(e,d);o=Array(32);for(let g=0;g<o.length;g++){let n=g/(o.length-1);o[g]=be(x(n,n),d)}y=(g,n,f)=>(0,it.O4)(g,o,n,f)}return h!==""&&(N=new Function("v",`return ${h};`),y=new Function("vals",`
      let idxs = Array(vals.length);

      for (let i = 0; i < vals.length; i++) {
        let v = vals[i];
        idxs[i] = ${h};
      }

      return idxs;
    `)),{index:o,getOne:N,getAll:y}}const at=e=>{const d=(0,me.of)(st),o=(0,me.$j)();let{mapping:y,series:N}=e.options,h=(0,w.useMemo)(()=>(0,J.hV)(y,N,e.data.series,e.fieldConfig),[y,N,e.data.series,e.fieldConfig]),{builder:x,prepData:g}=(0,w.useMemo)(()=>lt(h,F.$.theme2),[y,N,e.data.structureRev,e.fieldConfig,e.options.tooltip]),n=(0,w.useMemo)(()=>g(h),[h]),f=x==null||n.length===0?"Err":"";const O=()=>{if(!e.options.legend.showLegend)return null;const D=[];h.forEach((s,A)=>{let p=s.y.field;p.config.custom.hideFrom?.legend||D.push({yAxis:1,label:s.name.value,color:(0,E.X4)(s.color.fixed??Q.F,1),getItemKey:()=>`${A}-${s.name.value}`,fieldName:p.state?.displayName??p.name,disabled:p.state?.hideFrom?.viz??!1,getDisplayValues:()=>(0,ee.UO)(e.options.legend.calcs,p,o)})});const{placement:u,displayMode:V,width:a,sortBy:t,sortDesc:i}=e.options.legend;return(0,c.jsx)($.KU.Legend,{placement:u,width:a,children:(0,c.jsx)(le.t,{className:d.legend,placement:u,items:D,displayMode:V,sortBy:t,sortDesc:i,isSortable:!0})})};return f?(0,c.jsx)("div",{className:"panel-empty",children:(0,c.jsx)("p",{children:f})}):(0,c.jsx)($.KU,{width:e.width,height:e.height,legend:O(),children:(D,u)=>(0,c.jsx)(he.Z,{config:x,data:n,width:D,height:u,children:e.options.tooltip.mode!==K.$N.None&&(0,c.jsx)(Pe.xl,{config:x,hoverMode:Pe.b3.xyOne,getDataLinks:(V,a)=>{const t=h[V-1];return(0,De.u6)(t.y.field,a)},render:(V,a,t,i,s,A,p,m)=>(0,c.jsx)(I,{data:e.data.series,dataIdxs:a,xySeries:h,dismiss:s,isPinned:i,seriesIdx:t,replaceVariables:e.replaceVariables,dataLinks:m}),maxWidth:e.options.tooltip.maxWidth})})})},st=()=>({legend:(0,G.css)({div:{justifyContent:"flex-start"}})});var fe=l(62321),rt=l(59698),dt=l(95118),Ze=l(63286);const ct=5;function ut(e){return{standardOptions:{[fe.uo.Min]:{hideFromDefaults:!0},[fe.uo.Max]:{hideFromDefaults:!0},[fe.uo.Unit]:{hideFromDefaults:!0},[fe.uo.Decimals]:{hideFromDefaults:!0},[fe.uo.NoValue]:{hideFromDefaults:!0},[fe.uo.DisplayName]:{hideFromDefaults:!0},[fe.uo.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Q.Y.PaletteClassic}},[fe.uo.Links]:{settings:{showOneClick:!0}},[fe.uo.Actions]:{hideFromDefaults:!1}},useCustomConfig:d=>{d.addRadio({path:"show",name:"Show",defaultValue:e.show,settings:{options:[{label:"Points",value:r.Oq.Points},{label:"Lines",value:r.Oq.Lines},{label:"Both",value:r.Oq.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:e.pointSize?.fixed??ct,settings:{min:1,max:100,step:1},showIf:o=>o.show!==r.Oq.Lines}).addNumberInput({path:"pointSize.min",name:"Min point size",showIf:o=>o.show!==r.Oq.Lines}).addNumberInput({path:"pointSize.max",name:"Max point size",showIf:o=>o.show!==r.Oq.Lines}).addRadio({path:"pointShape",name:"Point shape",defaultValue:r.uZ.Circle,settings:{options:[{value:r.uZ.Circle,label:"Circle"},{value:r.uZ.Square,label:"Square"}]},showIf:o=>o.show!==r.Oq.Lines}).addSliderInput({path:"pointStrokeWidth",name:"Point stroke width",defaultValue:1,settings:{min:0,max:10},showIf:o=>o.show!==r.Oq.Lines}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:50,settings:{min:0,max:100,step:1},showIf:o=>o.show!==r.Oq.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:o=>o.show!==r.Oq.Points,editor:Ze.F,override:Ze.F,process:_.hS,shouldApply:o=>o.type===ae.PU.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:e.lineWidth,settings:{min:0,max:10,step:1},showIf:o=>o.show!==r.Oq.Points}),rt.rg(d,e),dt.e(d)}}}var Ee=(e=>(e.Auto="auto",e.Manual="manual",e))(Ee||{}),ft=(e=>(e.Lines="lines",e.Points="points",e.PointsAndLines="points+lines",e))(ft||{});const bt={exclude:[]},zt={label:K.yL.Auto,show:"points"},At={series:[]},mt=e=>{const d=e?.pluginVersion??"";return d===""||parseFloat(d)<11.1?ht(e):e.options};function ht(e){const{dims:d,seriesMapping:o,series:y,...N}=e.options,{exclude:h=[],frame:x,x:g}=d??{},n=e.fieldConfig.defaults.custom;let f=y;o===Ee.Auto&&(f=[{x:void 0,y:void 0}]);let O=0;const D=f.map(({x:V,y:a,pointColor:t,pointSize:i,frame:s})=>{const{fixed:A,field:p}=t??{},{fixed:m,field:b,min:k,max:X}=i??{};let Z,z;return V==null&&g==null?Z={id:L.Ct.byType,options:"number"}:Z={id:L.Ct.byName,options:V??g},a==null?z={id:L.Ct.byType,options:"number"}:z={id:L.Ct.byName,options:a},p==null&&A&&n.pointColor?.fixed!==A&&(e.fieldConfig.overrides.some(j=>j.matcher.id===z.id&&j.matcher.options===z.options&&j.properties.some(de=>de.id==="color"))||e.fieldConfig.overrides.push({matcher:z,properties:[{id:"color",value:{mode:"fixed",fixedColor:A}}]})),b==null&&m&&n.pointSize?.fixed!==m&&(e.fieldConfig.overrides.some(j=>j.matcher.id===z.id&&j.matcher.options===z.options&&j.properties.some(de=>de.id==="custom.pointSize.fixed"))||e.fieldConfig.overrides.push({matcher:z,properties:[{id:"custom.pointSize.fixed",value:m}]})),b!=null&&(k&&n.pointSize?.min!==k&&(e.fieldConfig.overrides.some(j=>j.matcher.id===z.id&&j.matcher.options===z.options&&j.properties.some(de=>de.id==="custom.pointSize.min"))||e.fieldConfig.overrides.push({matcher:{id:L.Ct.byName,options:b},properties:[{id:"custom.pointSize.min",value:k}]})),X&&n.pointSize?.max!==X&&(e.fieldConfig.overrides.some(j=>j.matcher.id===z.id&&j.matcher.options===z.options&&j.properties.some(de=>de.id==="custom.pointSize.max"))||e.fieldConfig.overrides.push({matcher:{id:L.Ct.byName,options:b},properties:[{id:"custom.pointSize.max",value:X}]}))),{frame:{matcher:{id:L.jR.byIndex,options:s??(o===Ee.Manual?O++:x??0)}},x:{matcher:Z},y:{matcher:z,...h.length&&{exclude:{id:L.Ct.byNames,options:h}}},...p&&{color:{matcher:{id:L.Ct.byName,options:p}}},...b&&{size:{matcher:{id:L.Ct.byName,options:b}}}}});return{...N,mapping:o===Ee.Auto?Ee.Auto:Ee.Manual,series:D}}const pt=new R.m(at).setMigrationHandler(mt).useFieldConfig(ut(r.QB)).setPanelOptions(e=>{e.addRadio({path:"mapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"series",path:"series",name:"",editor:M,defaultValue:[{}]}),B.D(e,!0),Y.H(e)})},61733:(Ae,ne,l)=>{l.d(ne,{Oq:()=>Y,QB:()=>G,it:()=>B,uZ:()=>R});var R=(T=>(T.Circle="circle",T.Square="square",T))(R||{}),B=(T=>(T.Auto="auto",T.Manual="manual",T))(B||{}),Y=(T=>(T.Lines="lines",T.Points="points",T.PointsAndLines="points+lines",T))(Y||{});const c={id:""},G={fillOpacity:50,show:"points"},w={series:[]}},11044:(Ae,ne,l)=>{l.d(ne,{Sc:()=>W,hV:()=>me,rE:()=>ue});var R=l(59141),B=l(38075),Y=l(23570),c=l(40462),G=l(63739),w=l(62931),T=l(32370),L=l(7500),_=l(61733);function W(P,S){return P.display?(0,R.cN)(P.display(S)):`${S}`}function ae(P){return P.id===B.jR.byIndex?(S,v)=>v===P.options:()=>!1}function me(P,S,v,r){(0,Y.Fm)(v),(0,Y.j2)(v,r);let M=[];S.length===0&&(S=[{}]);const{palette:U,getColorByName:Q}=T.$.theme2.visualization;if(S.forEach((E,F)=>{if(P===_.it.Manual&&(E.frame?.matcher==null||E.x?.matcher==null||E.y?.matcher==null))return;let $=(0,c.NS)(E.x?.matcher??{id:B.Ct.byType,options:"number"}),le=(0,c.NS)(E.y?.matcher??{id:B.Ct.byType,options:"number"}),he=E.color?(0,c.NS)(E.color.matcher):null,K=E.size?(0,c.NS)(E.size.matcher):null,Pe=E.frame?ae(E.frame.matcher):null;v.forEach((ee,De)=>{if(Pe!=null&&!Pe(ee,De))return;let Le=[],pe=[],ve=ee.fields.filter(C=>C.type===G.PU.number),xe=ve.find(C=>$(C,ee,v)),ye=he!=null?ve.find(C=>C!==xe&&he(C,ee,v)):void 0,J=K!=null?ve.find(C=>C!==xe&&C!==ye&&K(C,ee,v)):void 0;xe!=null&&(ve.forEach(C=>{if(C!==xe&&!(P===_.it.Auto&&(C===ye||C===J))&&!(P===_.it.Manual&&pe.length>0)&&le(C,ee,v)&&!C.config.custom?.hideFrom?.viz){let I=C,se=E.name?.fixed;if(se==null){const Se=v.length>1&&(ee.name!=null||Object.keys(I.labels??{}).length>0),{displayName:H,displayNameFromDS:Ne}=I.config,We=H!=null||Ne!=null;if(Se&&We){const Be=I.state.displayName;I.config.displayName=I.config.displayNameFromDS=I.state.displayName=void 0,se=(0,Y.Ct)(I,ee,v),se=se.replace(I.name,Ne??H),I.config.displayName=H,I.config.displayNameFromDS=Ne,I.state.displayName=Be}else se=(0,Y.Ct)(I,ee,v)}let te={name:{value:se},showPoints:I.config.custom.show===_.Oq.Lines?L.yL.Never:L.yL.Always,pointShape:I.config.custom.pointShape,pointStrokeWidth:I.config.custom.pointStrokeWidth,fillOpacity:I.config.custom.fillOpacity,showLine:I.config.custom.show!==_.Oq.Points,lineWidth:I.config.custom.lineWidth??2,lineStyle:I.config.custom.lineStyle,x:{field:xe},y:{field:I},color:{},size:{},_rest:Le};ye!=null&&(te.color.field=ye),J!=null&&(te.size.field=J,te.size.min=J.config.custom.pointSize?.min??5,te.size.max=J.config.custom.pointSize?.max??100),pe.push(te)}}),pe.length,ee.fields.forEach(C=>{pe.some(({x:se,y:te,color:Se,size:H})=>se.field===C||te.field===C||Se.field===C||H.field===C)||Le.push(C)}),M.push(...pe))})}),M.length!==0){let E=0;M.forEach((F,$)=>{if(F.color.field==null){let le=F.y.field.config.color??{mode:w.Y.PaletteClassic},he="";le.mode===w.Y.PaletteClassic?he=Q(U[E++%U.length]):le.mode===w.Y.Fixed&&(he=Q(le.fixedColor)),F.color.fixed=he}F.size.field==null&&(F.size.fixed=F.y.field.config.custom.pointSize?.fixed??5)}),Me(M)}return M}function Me(P){let S=P.map(M=>M.name.value.split(/\s+/g));const{prefix:v,suffix:r}=ie(S);(v<1/0||r<1/0)&&P.forEach((M,U)=>{M.name.value=S[U].slice(v,S[U].length-r).join(" ")})}function ue(P){let S=P.map(Q=>Q.split(/\s+/g)),{prefix:v,suffix:r}=ie(S),M=S[0];if(M.length===1&&v===1&&r===1)return"";let U=[];return v>0&&U.push(...M.slice(0,v)),r>0&&U.push(...M.slice(-r)),U.join(" ")}function ie(P){let S=1/0,v=1/0,r=P[0];for(let M=1;M<P.length;M++)P[M].length<r.length&&(r=P[M]);for(let M=1;M<P.length;M++){let U=P[M];if(U!==r){let Q=0;for(let F=0;F<r.length&&U[F]===r[F];F++)Q++;Q<S&&(S=Q);let E=0;for(let F=r.length-1;F>=0&&U[F]===r[F];F--)E++;E<v&&(v=E)}}return{prefix:S,suffix:v}}}}]);

//# sourceMappingURL=xychart.7b24943f42055b6a1e75.js.map