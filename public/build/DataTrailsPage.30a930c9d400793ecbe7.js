"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4785],{52402:(n9,B,o)=>{o.r(B),o.d(B,{DataTrailsPage:()=>z,default:()=>a9});var e=o(74848),n=o(22803),g=o(96540),k=o(54148),N=o(80426),C=o(32370),Z=o(53027),h=o(61034),p=o(29675),b=o(54122),T=o(81635),H=o(91536),E=o(55522),O=o(48583),K=o(90231),V=o(54731),w=o(54594),W=o(79784),M=o(45565),m=o(11817),I=o(99764),Y=o(88090),v=o(6210),d=o(4935),j=o(92986),u=o(56498);const A=(t,r,s)=>t.length+2+r.length>s?r.substring(0,s-t.length-5)+"...":r;function F(t){const{onSelect:r,onDelete:s,bookmark:i}=t,a=(0,p.of)(P),c=(0,g.useMemo)(()=>{let l=t.trail||i&&(0,d._r)().getTrailForBookmark(i);if(!l)return null;const R=h.jh.lookupVariable(j.Ao,l);if(!(R instanceof h.H9))return null;const o9=i?.createdAt||l.state.createdAt;return{filters:R.state.filters,metric:l.state.metric,createdAt:o9}},[t.trail,i]);if(!c)return null;const{filters:x,metric:f,createdAt:L}=c;return(0,e.jsxs)("article",{children:[(0,e.jsxs)(v.Z,{onClick:r,className:a.card,children:[(0,e.jsx)(v.Z.Heading,{children:(0,e.jsx)("div",{className:a.metricValue,children:A("",(0,u.aO)(f),39)})}),(0,e.jsx)(v.Z.Meta,{className:a.meta,children:x.map(l=>(0,e.jsxs)("span",{children:[(0,e.jsxs)("div",{className:a.secondaryFont,children:[l.key,": "]}),(0,e.jsx)("div",{className:a.primaryFont,children:A(l.key,l.value,44)})]},l.key))}),(0,e.jsx)("div",{className:a.deleteButton,children:s&&(0,e.jsx)(v.Z.SecondaryActions,{children:(0,e.jsx)(I.K,{name:"trash-alt",className:a.secondary,tooltip:"Remove bookmark",onClick:s,"data-testid":"deleteButton"},"delete")})})]}),(0,e.jsxs)("div",{className:a.date,children:[(0,e.jsx)("div",{className:a.secondaryFont,children:(0,e.jsx)(m.x6,{i18nKey:"trails.card.date-created",children:"Date created: "})}),(0,e.jsx)("div",{className:a.primaryFont,children:L&&(0,Y.LE)(L,{format:"YYYY-MM-DD"})})]})]})}function P(t){return{metricValue:(0,n.css)({display:"inline",color:t.colors.text.primary,fontWeight:500,wordBreak:"break-all"}),card:(0,n.css)({position:"relative",width:"318px",padding:`12px ${t.spacing(2)} ${t.spacing(1)} ${t.spacing(2)}`,height:"110px",alignItems:"start",marginBottom:0,borderTop:`1px solid ${t.colors.border.weak}`,borderRight:`1px solid ${t.colors.border.weak}`,borderLeft:`1px solid ${t.colors.border.weak}`,borderBottom:"none",borderRadius:"2px 2px 0 0"}),secondary:(0,n.css)({color:t.colors.text.secondary,fontSize:"12px"}),date:(0,n.css)({border:`1px solid ${t.colors.border.weak}`,borderRadius:"0 0 2px 2px",padding:`${t.spacing(1)} ${t.spacing(2)}`,backgroundColor:t.colors.background.primary}),meta:(0,n.css)({flexWrap:"wrap",overflow:"hidden",textOverflow:"ellipsis",maxHeight:"36px",margin:0,gridArea:"Meta",color:t.colors.text.secondary,whiteSpace:"nowrap"}),primaryFont:(0,n.css)({display:"inline",color:t.colors.text.primary,fontSize:"12px",fontWeight:"500",letterSpacing:"0.018px"}),secondaryFont:(0,n.css)({display:"inline",color:t.colors.text.secondary,fontSize:"12px",fontWeight:"400",lineHeight:"18px",letterSpacing:"0.018px"}),deleteButton:(0,n.css)({position:"absolute",bottom:t.spacing(1),right:t.spacing(1)})}}function U({onSelect:t,onDelete:r}){const[s,i]=(0,g.useState)(()=>{const c=localStorage.getItem("toggleBookmark");return c?JSON.parse(c):!1}),a=(0,p.of)(G);return(0,g.useEffect)(()=>{localStorage.setItem("toggleBookmark",JSON.stringify(s))},[s]),(0,d._r)().bookmarks.length===0?null:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:a.horizontalLine}),(0,e.jsxs)("div",{className:(0,n.css)(a.gap20,a.bookmarkHeader,a.bottomGap24),children:[(0,e.jsx)("div",{className:a.header,style:{marginRight:"8px"},children:(0,e.jsx)(m.x6,{i18nKey:"trails.bookmarks.or-view-bookmarks",children:"Or view bookmarks"})}),(0,e.jsx)(I.K,{name:s?"angle-up":"angle-down",size:"xl","aria-label":"bookmarkCarrot",variant:"secondary",onClick:()=>i(!s)})]}),s&&(0,e.jsx)("div",{className:a.trailList,children:(0,d._r)().bookmarks.map((c,x)=>(0,e.jsx)(F,{bookmark:c,onSelect:()=>t(x),onDelete:()=>r(x)},(0,d.yn)(c)))})]})}function G(t){return{trailList:(0,n.css)({display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:`${t.spacing(4)}`,alignItems:"stretch",justifyItems:"center"}),gap20:(0,n.css)({marginTop:t.spacing(3)}),bottomGap24:(0,n.css)({marginBottom:t.spacing(3)}),bookmarkHeader:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center"}),header:(0,n.css)({color:t.colors.text.primary,textAlign:"center",fontSize:"18px",lineHeight:"22px",letterSpacing:"0.045px"}),horizontalLine:(0,n.css)({width:"400px",height:"1px",background:t.colors.border.weak,margin:"0 auto",marginTop:"32px"})}}function Q({onSelect:t}){const r=(0,p.of)(J),s=(0,d._r)().recent,i=(0,p.$j)(),[a,c]=(0,g.useState)(!1),x=()=>{c(!a)};return s.length===0?null:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:r.recentExplorationHeader,children:(0,e.jsx)("div",{className:r.header,children:(0,e.jsx)(m.x6,{i18nKey:"trails.recent-metrics.or-view-a-recent-exploration",children:"Or view a recent exploration"})})}),(0,e.jsx)("div",{className:(0,n.css)(r.trailList,r.bottomGap24),children:(0,d._r)().recent.slice(0,a?s.length:3).map((f,L)=>{const l=f.resolve();return(0,e.jsx)(F,{trail:l,onSelect:()=>t(l)},(l.state.key||"")+L)})}),s.length>3&&(0,e.jsx)(w.$n,{variant:"secondary",size:"sm",onClick:x,fill:i.isLight?"outline":"solid",children:a?"Show less":"Show more"})]})}function J(t){return{recentExplorationHeader:(0,n.css)({marginTop:t.spacing(6),marginBottom:t.spacing(3)}),header:(0,n.css)({color:t.colors.text.primary,textAlign:"center",fontSize:"18px",fontWeight:"400",letterSpacing:"0.045px"}),trailList:(0,n.css)({display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:`${t.spacing(4)}`,alignItems:"stretch",justifyItems:"center"}),bottomGap24:(0,n.css)({marginBottom:t.spacing(3)})}}const X=()=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"73",height:"72",viewBox:"0 0 73 72",fill:"none",children:(0,e.jsx)("path",{d:"M65.3 8.09993C65.3 7.49993 64.7 7.19993 64.1 6.89993C52.7 3.89993 40.4 7.79993 32.9 16.7999L29 21.2999L20.9 19.1999C17.6 17.9999 14.3 19.4999 12.8 22.4999L6.49999 33.5999C6.49999 33.5999 6.49999 33.8999 6.19999 33.8999C5.89999 34.7999 6.49999 35.3999 7.39999 35.6999L17.6 37.7999C16.7 40.4999 15.8 43.1999 15.5 45.8999C15.5 46.4999 15.5 46.7999 15.8 47.0999L24.8 55.7999C25.1 56.0999 25.4 56.0999 26 56.0999C28.7 55.7999 31.7 55.1999 34.4 54.2999L36.5 64.1999C36.5 64.7999 37.4 65.3999 38 65.3999C38.3 65.3999 38.6 65.3999 38.6 65.0999L49.7 58.7999C52.4 57.2999 53.6 53.9999 53 50.9999L50.9 42.2999L55.1 38.3999C64.4 31.4999 68.3 19.4999 65.3 8.09993ZM10.1 33.2999L15.2 23.9999C16.1 22.1999 17.9 21.5999 19.7 22.1999L26.6 23.9999L23.6 27.5999C21.8 29.9999 20 32.3999 18.8 35.0999L10.1 33.2999ZM48.5 56.9999L39.2 62.3999L37.4 53.6999C40.1 52.4999 42.5 50.6999 44.9 48.8999L48.8 45.2999L50.6 52.1999C50.6 53.9999 50 56.0999 48.5 56.9999ZM53.3 36.8999L42.8 46.4999C38.3 50.3999 32.6 52.7999 26.6 53.3999L18.8 45.5999C19.7 39.5999 22.1 33.8999 26 29.3999L30.8 23.9999L31.1 23.6999L35.3 18.8999C41.9 11.0999 52.7 7.49993 62.6 9.59993C64.7 19.7999 61.4 30.2999 53.3 36.8999ZM49.7 16.7999C46.4 16.7999 44 19.4999 44 22.4999C44 25.4999 46.7 28.1999 49.7 28.1999C53 28.1999 55.4 25.4999 55.4 22.4999C55.4 19.4999 53 16.7999 49.7 16.7999ZM49.7 25.4999C48.2 25.4999 47 24.2999 47 22.7999C47 21.2999 48.2 20.0999 49.7 20.0999C51.2 20.0999 52.4 21.2999 52.4 22.7999C52.4 24.2999 51.2 25.4999 49.7 25.4999Z",fill:"#24292E",fillOpacity:"0.75"})}),q=()=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"73",height:"72",viewBox:"0 0 73 72",fill:"none",children:(0,e.jsx)("path",{d:"M65.3 8.09993C65.3 7.49993 64.7 7.19993 64.1 6.89993C52.7 3.89993 40.4 7.79993 32.9 16.7999L29 21.2999L20.9 19.1999C17.6 17.9999 14.3 19.4999 12.8 22.4999L6.49999 33.5999C6.49999 33.5999 6.49999 33.8999 6.19999 33.8999C5.89999 34.7999 6.49999 35.3999 7.39999 35.6999L17.6 37.7999C16.7 40.4999 15.8 43.1999 15.5 45.8999C15.5 46.4999 15.5 46.7999 15.8 47.0999L24.8 55.7999C25.1 56.0999 25.4 56.0999 26 56.0999C28.7 55.7999 31.7 55.1999 34.4 54.2999L36.5 64.1999C36.5 64.7999 37.4 65.3999 38 65.3999C38.3 65.3999 38.6 65.3999 38.6 65.0999L49.7 58.7999C52.4 57.2999 53.6 53.9999 53 50.9999L50.9 42.2999L55.1 38.3999C64.4 31.4999 68.3 19.4999 65.3 8.09993ZM10.1 33.2999L15.2 23.9999C16.1 22.1999 17.9 21.5999 19.7 22.1999L26.6 23.9999L23.6 27.5999C21.8 29.9999 20 32.3999 18.8 35.0999L10.1 33.2999ZM48.5 56.9999L39.2 62.3999L37.4 53.6999C40.1 52.4999 42.5 50.6999 44.9 48.8999L48.8 45.2999L50.6 52.1999C50.6 53.9999 50 56.0999 48.5 56.9999ZM53.3 36.8999L42.8 46.4999C38.3 50.3999 32.6 52.7999 26.6 53.3999L18.8 45.5999C19.7 39.5999 22.1 33.8999 26 29.3999L30.8 23.9999L31.1 23.6999L35.3 18.8999C41.9 11.0999 52.7 7.49993 62.6 9.59993C64.7 19.7999 61.4 30.2999 53.3 36.8999ZM49.7 16.7999C46.4 16.7999 44 19.4999 44 22.4999C44 25.4999 46.7 28.1999 49.7 28.1999C53 28.1999 55.4 25.4999 55.4 22.4999C55.4 19.4999 53 16.7999 49.7 16.7999ZM49.7 25.4999C48.2 25.4999 47 24.2999 47 22.7999C47 21.2999 48.2 20.0999 49.7 20.0999C51.2 20.0999 52.4 21.2999 52.4 22.7999C52.4 24.2999 51.2 25.4999 49.7 25.4999Z",fill:"#CCCCDC",fillOpacity:"0.65"})});var y=o(73750);class _ extends h.Bs{constructor(r){super(r),this.onNewMetricsTrail=()=>{const s=S(this),i=(0,u.ef)((0,u.hR)(),!0);(0,y.z)("exploration_started",{cause:"new_clicked"}),s.goToUrlForTrail(i)},this.onSelectRecentTrail=s=>{const i=S(this);(0,y.z)("exploration_started",{cause:"recent_clicked"}),(0,d._r)().setRecentTrail(s),i.goToUrlForTrail(s)},this.onSelectBookmark=s=>{const i=S(this);(0,y.z)("exploration_started",{cause:"bookmark_clicked"});const a=(0,d._r)().getTrailForBookmarkIndex(s);(0,d._r)().setRecentTrail(a),i.goToUrlForTrail(a)}}static{this.Component=({model:r})=>{const[s,i]=(0,g.useState)(Date.now()),a=(0,p.of)(e9),c=(0,p.$j)(),x=f=>{(0,d._r)().removeBookmark(f),(0,y.z)("bookmark_changed",{action:"deleted"}),i(Date.now())};return(0,e.jsxs)("article",{className:a.container,children:[(0,e.jsx)("section",{className:a.homepageBox,children:(0,e.jsxs)(O.B,{direction:"column",alignItems:"center",children:[(0,e.jsx)("div",{children:c.isDark?(0,e.jsx)(q,{}):(0,e.jsx)(X,{})}),(0,e.jsx)(M.E,{element:"h1",textAlignment:"center",weight:"medium",children:(0,e.jsx)(m.x6,{i18nKey:"trails.home.start-your-metrics-exploration",children:"Start your metrics exploration!"})}),(0,e.jsx)(K.a,{children:(0,e.jsxs)(M.E,{element:"p",textAlignment:"center",color:"secondary",children:[(0,e.jsx)(m.x6,{i18nKey:"trails.home.subtitle",children:"Explore your Prometheus-compatible metrics without writing a query."}),(0,e.jsx)(V.Y,{href:"https://grafana.com/docs/grafana/latest/explore/explore-metrics/",external:!0,style:{marginLeft:"8px"},children:(0,e.jsx)(m.x6,{i18nKey:"trails.home.learn-more",children:"Learn more"})})]})}),(0,e.jsx)("div",{className:a.gap24,children:(0,e.jsxs)(w.$n,{size:"lg",variant:"primary",onClick:r.onNewMetricsTrail,children:[(0,e.jsx)("div",{className:a.startButton,children:(0,e.jsx)(m.x6,{i18nKey:"trails.home.lets-start",children:"Let's start!"})}),(0,e.jsx)(W.I,{name:"arrow-right",size:"lg",style:{marginLeft:"8px"}})]})})]})}),(0,e.jsx)(Q,{onSelect:r.onSelectRecentTrail}),(0,e.jsx)(U,{onSelect:r.onSelectBookmark,onDelete:x})]})}}}function S(t){return h.jh.getAncestor(t,$)}function e9(t){return{container:(0,n.css)({display:"flex",alignItems:"center",marginTop:"84px",flexDirection:"column",height:"100%",boxSizing:"border-box"}),homepageBox:(0,n.css)({backgroundColor:t.colors.background.secondary,width:"904px",padding:"80px 32px",boxSizing:"border-box",flexShrink:0}),startButton:(0,n.css)({fontWeight:t.typography.fontWeightLight}),gap24:(0,n.css)({marginTop:t.spacing(2)})}}class $ extends h.Bs{constructor(r){super(r),this._scopesFacade=(0,T.DF)(this)}enrichDataRequest(){return C.$.featureToggles.promQLScope?{scopes:this._scopesFacade?.value}:{}}enrichFiltersRequest(){return C.$.featureToggles.promQLScope?{scopes:this._scopesFacade?.value}:{}}goToUrlForTrail(r){Z.Ny.push((0,u.xi)(r)),this.setState({trail:r})}static{this.Component=({model:r})=>{const{trail:s,home:i}=r.useState();return(0,e.jsxs)(k.BV,{children:[(0,e.jsx)(k.qh,{path:"/",element:(0,e.jsx)(b.Y,{navId:"explore/metrics",layout:N.k.Standard,renderTitle:()=>null,subTitle:"",children:(0,e.jsx)(i.Component,{model:i})})}),(0,e.jsx)(k.qh,{path:j.km.replace(j.QX,""),element:(0,e.jsx)(t9,{trail:s})})]})}}}function t9({trail:t}){const r=(0,p.of)(r9),[s,i]=(0,g.useState)(!1),{metric:a}=t.useState();return(0,g.useEffect)(()=>{s||(t.state.metric!==void 0&&(0,d._r)().setRecentTrail(t),i(!0))},[t,s]),s?(0,e.jsx)(h.$L,{scene:t,children:(0,e.jsxs)(b.Y,{navId:"explore/metrics",pageNav:{text:(0,u.aO)(a)},layout:N.k.Custom,children:[C.$.featureToggles.enableScopesInMetricsExplore&&(0,e.jsx)(H.H,{actions:(0,e.jsx)("div",{className:r.topNavContainer,children:(0,e.jsx)(T.Dh,{})})}),(0,e.jsx)(t.Component,{model:t})]})}):null}let D;function s9(){if(!D){const t=C.$.featureToggles.enableScopesInMetricsExplore?[new T.mN({handler:r=>{const s=r.parent&&"trail"in r.parent.state?r.parent.state.trail:void 0;s instanceof E.b&&(s.publishEvent(new j.H0),s.checkDataSourceForOTelResources())}})]:void 0;D=new $({trail:(0,u.ef)(),home:new _({}),$behaviors:t})}return D}const r9=()=>({topNavContainer:(0,n.css)({width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyItems:"flex-start"})});function z(){const t=s9();return(0,e.jsx)(t.Component,{model:t})}const a9=z}}]);

//# sourceMappingURL=DataTrailsPage.30a930c9d400793ecbe7.js.map