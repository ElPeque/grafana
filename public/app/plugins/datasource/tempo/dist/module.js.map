{"version":3,"file":"module.js","mappings":"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","sources":["webpack://tempo/webpack/runtime/load script","webpack://tempo/../../../../../node_modules/react-use/lib/useAsync.js","webpack://tempo/../../../../../node_modules/react-use/lib/useAsyncFn.js","webpack://tempo/../../../../../node_modules/react-use/lib/useMountedState.js","webpack://tempo/../../../../../node_modules/react/cjs/react-jsx-runtime.production.min.js","webpack://tempo/../../../../../node_modules/react/jsx-runtime.js","webpack://tempo/../../../../../node_modules/semver/classes/comparator.js","webpack://tempo/../../../../../node_modules/semver/classes/range.js","webpack://tempo/../../../../../node_modules/semver/classes/semver.js","webpack://tempo/../../../../../node_modules/semver/functions/clean.js","webpack://tempo/../../../../../node_modules/semver/functions/cmp.js","webpack://tempo/../../../../../node_modules/semver/functions/coerce.js","webpack://tempo/../../../../../node_modules/semver/functions/compare-build.js","webpack://tempo/../../../../../node_modules/semver/functions/compare-loose.js","webpack://tempo/../../../../../node_modules/semver/functions/compare.js","webpack://tempo/../../../../../node_modules/semver/functions/diff.js","webpack://tempo/../../../../../node_modules/semver/functions/eq.js","webpack://tempo/../../../../../node_modules/semver/functions/gt.js","webpack://tempo/../../../../../node_modules/semver/functions/gte.js","webpack://tempo/../../../../../node_modules/semver/functions/inc.js","webpack://tempo/../../../../../node_modules/semver/functions/lt.js","webpack://tempo/../../../../../node_modules/semver/functions/lte.js","webpack://tempo/../../../../../node_modules/semver/functions/major.js","webpack://tempo/../../../../../node_modules/semver/functions/minor.js","webpack://tempo/../../../../../node_modules/semver/functions/neq.js","webpack://tempo/../../../../../node_modules/semver/functions/parse.js","webpack://tempo/../../../../../node_modules/semver/functions/patch.js","webpack://tempo/../../../../../node_modules/semver/functions/prerelease.js","webpack://tempo/../../../../../node_modules/semver/functions/rcompare.js","webpack://tempo/../../../../../node_modules/semver/functions/rsort.js","webpack://tempo/../../../../../node_modules/semver/functions/satisfies.js","webpack://tempo/../../../../../node_modules/semver/functions/sort.js","webpack://tempo/../../../../../node_modules/semver/functions/valid.js","webpack://tempo/../../../../../node_modules/semver/index.js","webpack://tempo/../../../../../node_modules/semver/internal/constants.js","webpack://tempo/../../../../../node_modules/semver/internal/debug.js","webpack://tempo/../../../../../node_modules/semver/internal/identifiers.js","webpack://tempo/../../../../../node_modules/semver/internal/lrucache.js","webpack://tempo/../../../../../node_modules/semver/internal/parse-options.js","webpack://tempo/../../../../../node_modules/semver/internal/re.js","webpack://tempo/../../../../../node_modules/semver/ranges/gtr.js","webpack://tempo/../../../../../node_modules/semver/ranges/intersects.js","webpack://tempo/../../../../../node_modules/semver/ranges/ltr.js","webpack://tempo/../../../../../node_modules/semver/ranges/max-satisfying.js","webpack://tempo/../../../../../node_modules/semver/ranges/min-satisfying.js","webpack://tempo/../../../../../node_modules/semver/ranges/min-version.js","webpack://tempo/../../../../../node_modules/semver/ranges/outside.js","webpack://tempo/../../../../../node_modules/semver/ranges/simplify.js","webpack://tempo/../../../../../node_modules/semver/ranges/subset.js","webpack://tempo/../../../../../node_modules/semver/ranges/to-comparators.js","webpack://tempo/../../../../../node_modules/semver/ranges/valid.js","webpack://tempo/../../../../../packages/grafana-o11y-ds-frontend/src/TemporaryAlert.tsx","webpack://tempo/../../../../../packages/grafana-schema/src/common/common.gen.ts","webpack://tempo/./SearchTraceQLEditor/SearchField.tsx","webpack://tempo/./SearchTraceQLEditor/TagsInput.tsx","webpack://tempo/./SearchTraceQLEditor/utils.ts","webpack://tempo/./dataquery.gen.ts","webpack://tempo/./VariableQueryEditor.tsx","webpack://tempo/./graphTransform.ts","webpack://tempo/./metricsSummary.ts","webpack://tempo/../../../../../node_modules/@opentelemetry/semantic-conventions/build/esm/internal/utils.js","webpack://tempo/../../../../../node_modules/@opentelemetry/semantic-conventions/build/esm/resource/SemanticResourceAttributes.js","webpack://tempo/../../../../../packages/grafana-o11y-ds-frontend/src/createNodeGraphFrames.ts","webpack://tempo/./resultTransformer.ts","webpack://tempo/../../../../../packages/grafana-o11y-ds-frontend/src/combineResponses.ts","webpack://tempo/./streaming.ts","webpack://tempo/./variables.ts","webpack://tempo/./datasource.ts","webpack://tempo/./language_provider.ts","webpack://tempo/./traceql/traceql.ts","webpack://tempo/./utils.ts","webpack://tempo/external amd \"@emotion/css\"","webpack://tempo/external amd \"@grafana/data\"","webpack://tempo/external amd \"@grafana/runtime\"","webpack://tempo/external amd \"@grafana/ui\"","webpack://tempo/external amd \"lodash\"","webpack://tempo/external amd \"prismjs\"","webpack://tempo/external amd \"react\"","webpack://tempo/external amd \"rxjs\"","webpack://tempo/external amd \"rxjs/operators\"","webpack://tempo/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/AccessoryButton.js","webpack://tempo/../../../../../node_modules/tslib/tslib.es6.mjs","webpack://tempo/../../../../../node_modules/uuid/dist/esm-browser/native.js","webpack://tempo/../../../../../node_modules/uuid/dist/esm-browser/rng.js","webpack://tempo/../../../../../node_modules/uuid/dist/esm-browser/stringify.js","webpack://tempo/../../../../../node_modules/uuid/dist/esm-browser/v4.js","webpack://tempo/webpack/bootstrap","webpack://tempo/webpack/runtime/amd options","webpack://tempo/webpack/runtime/compat get default export","webpack://tempo/webpack/runtime/define property getters","webpack://tempo/webpack/runtime/ensure chunk","webpack://tempo/webpack/runtime/get javascript chunk filename","webpack://tempo/webpack/runtime/global","webpack://tempo/webpack/runtime/hasOwnProperty shorthand","webpack://tempo/webpack/runtime/make namespace object","webpack://tempo/webpack/runtime/publicPath","webpack://tempo/webpack/runtime/jsonp chunk loading","webpack://tempo/webpack/runtime/nonce","webpack://tempo/./tracking.ts","webpack://tempo/./module.tsx"],"sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"tempo:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar react_1 = require(\"react\");\nvar useAsyncFn_1 = tslib_1.__importDefault(require(\"./useAsyncFn\"));\nfunction useAsync(fn, deps) {\n    if (deps === void 0) { deps = []; }\n    var _a = useAsyncFn_1.default(fn, deps, {\n        loading: true,\n    }), state = _a[0], callback = _a[1];\n    react_1.useEffect(function () {\n        callback();\n    }, [callback]);\n    return state;\n}\nexports.default = useAsync;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar react_1 = require(\"react\");\nvar useMountedState_1 = tslib_1.__importDefault(require(\"./useMountedState\"));\nfunction useAsyncFn(fn, deps, initialState) {\n    if (deps === void 0) { deps = []; }\n    if (initialState === void 0) { initialState = { loading: false }; }\n    var lastCallId = react_1.useRef(0);\n    var isMounted = useMountedState_1.default();\n    var _a = react_1.useState(initialState), state = _a[0], set = _a[1];\n    var callback = react_1.useCallback(function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var callId = ++lastCallId.current;\n        if (!state.loading) {\n            set(function (prevState) { return (tslib_1.__assign(tslib_1.__assign({}, prevState), { loading: true })); });\n        }\n        return fn.apply(void 0, args).then(function (value) {\n            isMounted() && callId === lastCallId.current && set({ value: value, loading: false });\n            return value;\n        }, function (error) {\n            isMounted() && callId === lastCallId.current && set({ error: error, loading: false });\n            return error;\n        });\n    }, deps);\n    return [state, callback];\n}\nexports.default = useAsyncFn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nfunction useMountedState() {\n    var mountedRef = react_1.useRef(false);\n    var get = react_1.useCallback(function () { return mountedRef.current; }, []);\n    react_1.useEffect(function () {\n        mountedRef.current = true;\n        return function () {\n            mountedRef.current = false;\n        };\n    }, []);\n    return get;\n}\nexports.default = useMountedState;\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","const SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n        version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    if (release.startsWith('pre')) {\n      if (!identifier && identifierBase === false) {\n        throw new Error('invalid increment argument: identifier is empty')\n      }\n      // Avoid an invalid semver results\n      if (identifier) {\n        const match = `-${identifier}`.match(this.options.loose ? re[t.PRERELEASELOOSE] : re[t.PRERELEASE])\n        if (!match || match[1] !== identifier) {\n          throw new Error(`invalid identifier: ${identifier}`)\n        }\n      }\n    }\n\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'release':\n        if (this.prerelease.length === 0) {\n          throw new Error(`version ${this.raw} is not a prerelease`)\n        }\n        this.prerelease.length = 0\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","const parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n","const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","const SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL]\n    let next\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2]\n  const minor = match[3] || '0'\n  const patch = match[4] || '0'\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : ''\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : ''\n\n  return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n}\nmodule.exports = coerce\n","const SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n","const compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","const parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // If the main part has no difference\n    if (lowVersion.compareMain(highVersion) === 0) {\n      if (lowVersion.minor && !lowVersion.patch) {\n        return 'minor'\n      }\n      return 'patch'\n    }\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n","const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","const SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n","const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","const SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n","const SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n","const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","const SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n","const SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n","const parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n","const compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n","const compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n","const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","const compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n","const parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n","// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","class LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n","// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","const {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n","const Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n","const outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n","const SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n","// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n","const Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n","const Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n","const Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n","import { css } from '@emotion/css';\nimport { useEffect, useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Alert, AlertVariant, useTheme2 } from '@grafana/ui';\n\nenum AlertTimeout {\n  Error = 7000,\n  Info = 3000,\n  Success = 3000,\n  Warning = 5000,\n}\n\nconst getStyle = (theme: GrafanaTheme2) => {\n  return css({\n    position: 'absolute',\n    zIndex: theme.zIndex.portal,\n    top: 0,\n    right: 10,\n  });\n};\n\nconst timeoutMap = {\n  ['error']: AlertTimeout.Error,\n  ['info']: AlertTimeout.Info,\n  ['success']: AlertTimeout.Success,\n  ['warning']: AlertTimeout.Warning,\n};\n\ntype AlertProps = {\n  // Severity of the alert. Controls the style of the alert (e.g., background color)\n  severity: AlertVariant;\n  // Displayed message. If set to empty string, the alert is not displayed\n  text: string;\n};\n\nexport const TemporaryAlert = (props: AlertProps) => {\n  const style = getStyle(useTheme2());\n  const [visible, setVisible] = useState(false);\n  const [timer, setTimer] = useState<NodeJS.Timeout>();\n\n  useEffect(() => {\n    return () => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n    };\n  }, [timer]);\n\n  useEffect(() => {\n    if (props.text !== '') {\n      setVisible(true);\n\n      const timer = setTimeout(() => {\n        setVisible(false);\n      }, timeoutMap[props.severity]);\n      setTimer(timer);\n    }\n  }, [props.severity, props.text]);\n\n  return (\n    <>\n      {visible && (\n        <Alert\n          className={style}\n          elevated={true}\n          onRemove={() => setVisible(false)}\n          severity={props.severity}\n          title={props.text}\n        />\n      )}\n    </>\n  );\n};\n","// Code generated - EDITING IS FUTILE. DO NOT EDIT.\n//\n// Generated by:\n//     kinds/gen.go\n// Using jennies:\n//     CommonSchemaJenny\n//\n// Run 'make gen-cue' from repository root to regenerate.\n\n\n/**\n * A topic is attached to DataFrame metadata in query results.\n * This specifies where the data should be used.\n */\nexport enum DataTopic {\n  AlertStates = 'alertStates',\n  Annotations = 'annotations',\n  Series = 'series',\n}\n\n/**\n * TODO docs\n */\nexport interface DataSourceJsonData {\n  alertmanagerUid?: string;\n  authType?: string;\n  defaultRegion?: string;\n  manageAlerts?: boolean;\n  profile?: string;\n}\n\n/**\n * These are the common properties available to all queries in all datasources.\n * Specific implementations will *extend* this interface, adding the required\n * properties for the given context.\n */\nexport interface DataQuery {\n  /**\n   * For mixed data sources the selected datasource is on the query level.\n   * For non mixed scenarios this is undefined.\n   * TODO find a better way to do this ^ that's friendly to schema\n   * TODO this shouldn't be unknown but DataSourceRef | null\n   */\n  datasource?: unknown;\n  /**\n   * If hide is set to true, Grafana will filter out the response(s) associated with this query before returning it to the panel.\n   */\n  hide?: boolean;\n  /**\n   * Specify the query flavor\n   * TODO make this required and give it a default\n   */\n  queryType?: string;\n  /**\n   * A unique identifier for the query within the list of targets.\n   * In server side expressions, the refId is used as a variable name to identify results.\n   * By default, the UI will assign A->Z; however setting meaningful names may be useful.\n   */\n  refId: string;\n}\n\nexport interface BaseDimensionConfig {\n  /**\n   * fixed: T -- will be added by each element\n   */\n  field?: string;\n}\n\nexport enum ScaleDimensionMode {\n  Linear = 'linear',\n  Quad = 'quad',\n}\n\nexport interface ScaleDimensionConfig extends BaseDimensionConfig {\n  fixed?: number;\n  max: number;\n  min: number;\n  mode?: ScaleDimensionMode; // | *\"linear\"\n}\n\nexport interface ColorDimensionConfig extends BaseDimensionConfig {\n  fixed?: string; // color value\n}\n\nexport enum ScalarDimensionMode {\n  Clamped = 'clamped',\n  Mod = 'mod',\n}\n\nexport interface ScalarDimensionConfig extends BaseDimensionConfig {\n  fixed?: number;\n  max: number;\n  min: number;\n  mode?: ScalarDimensionMode;\n}\n\nexport enum TextDimensionMode {\n  Field = 'field',\n  Fixed = 'fixed',\n  Template = 'template',\n}\n\nexport interface TextDimensionConfig extends BaseDimensionConfig {\n  fixed?: string;\n  mode: TextDimensionMode;\n}\n\nexport enum ResourceDimensionMode {\n  Field = 'field',\n  Fixed = 'fixed',\n  Mapping = 'mapping',\n}\n\nexport interface MapLayerOptions {\n  /**\n   * Custom options depending on the type\n   */\n  config?: unknown;\n  /**\n   * Defines a frame MatcherConfig that may filter data for the given layer\n   */\n  filterData?: unknown;\n  /**\n   * Common method to define geometry fields\n   */\n  location?: FrameGeometrySource;\n  /**\n   * configured unique display name\n   */\n  name: string;\n  /**\n   * Common properties:\n   * https://openlayers.org/en/latest/apidoc/module-ol_layer_Base-BaseLayer.html\n   * Layer opacity (0-1)\n   */\n  opacity?: number;\n  /**\n   * Check tooltip (defaults to true)\n   */\n  tooltip?: boolean;\n  type: string;\n}\n\nexport enum FrameGeometrySourceMode {\n  Auto = 'auto',\n  Coords = 'coords',\n  Geohash = 'geohash',\n  Lookup = 'lookup',\n}\n\nexport enum HeatmapCalculationMode {\n  Count = 'count',\n  Size = 'size',\n}\n\nexport enum HeatmapCellLayout {\n  auto = 'auto',\n  ge = 'ge',\n  le = 'le',\n  unknown = 'unknown',\n}\n\nexport interface HeatmapCalculationBucketConfig {\n  /**\n   * Sets the bucket calculation mode\n   */\n  mode?: HeatmapCalculationMode;\n  /**\n   * Controls the scale of the buckets\n   */\n  scale?: ScaleDistributionConfig;\n  /**\n   * The number of buckets to use for the axis in the heatmap\n   */\n  value?: string;\n}\n\nexport enum LogsSortOrder {\n  Ascending = 'Ascending',\n  Descending = 'Descending',\n}\n\n/**\n * TODO docs\n */\nexport enum AxisPlacement {\n  Auto = 'auto',\n  Bottom = 'bottom',\n  Hidden = 'hidden',\n  Left = 'left',\n  Right = 'right',\n  Top = 'top',\n}\n\n/**\n * TODO docs\n */\nexport enum AxisColorMode {\n  Series = 'series',\n  Text = 'text',\n}\n\n/**\n * TODO docs\n */\nexport enum VisibilityMode {\n  Always = 'always',\n  Auto = 'auto',\n  Never = 'never',\n}\n\n/**\n * TODO docs\n */\nexport enum GraphDrawStyle {\n  Bars = 'bars',\n  Line = 'line',\n  Points = 'points',\n}\n\n/**\n * TODO docs\n */\nexport enum GraphTransform {\n  Constant = 'constant',\n  NegativeY = 'negative-Y',\n}\n\n/**\n * TODO docs\n */\nexport enum LineInterpolation {\n  Linear = 'linear',\n  Smooth = 'smooth',\n  StepAfter = 'stepAfter',\n  StepBefore = 'stepBefore',\n}\n\n/**\n * TODO docs\n */\nexport enum ScaleDistribution {\n  Linear = 'linear',\n  Log = 'log',\n  Ordinal = 'ordinal',\n  Symlog = 'symlog',\n}\n\n/**\n * TODO docs\n */\nexport enum GraphGradientMode {\n  Hue = 'hue',\n  None = 'none',\n  Opacity = 'opacity',\n  Scheme = 'scheme',\n}\n\n/**\n * TODO docs\n */\nexport enum StackingMode {\n  None = 'none',\n  Normal = 'normal',\n  Percent = 'percent',\n}\n\n/**\n * TODO docs\n */\nexport enum BarAlignment {\n  After = 1,\n  Before = -1,\n  Center = 0,\n}\n\n/**\n * TODO docs\n */\nexport enum ScaleOrientation {\n  Horizontal = 0,\n  Vertical = 1,\n}\n\n/**\n * TODO docs\n */\nexport enum ScaleDirection {\n  Down = -1,\n  Left = -1,\n  Right = 1,\n  Up = 1,\n}\n\n/**\n * TODO docs\n */\nexport interface LineStyle {\n  dash?: Array<number>;\n  fill?: ('solid' | 'dash' | 'dot' | 'square');\n}\n\nexport const defaultLineStyle: Partial<LineStyle> = {\n  dash: [],\n};\n\n/**\n * TODO docs\n */\nexport interface LineConfig {\n  lineColor?: string;\n  lineInterpolation?: LineInterpolation;\n  lineStyle?: LineStyle;\n  lineWidth?: number;\n  /**\n   * Indicate if null values should be treated as gaps or connected.\n   * When the value is a number, it represents the maximum delta in the\n   * X axis that should be considered connected.  For timeseries, this is milliseconds\n   */\n  spanNulls?: (boolean | number);\n}\n\n/**\n * TODO docs\n */\nexport interface BarConfig {\n  barAlignment?: BarAlignment;\n  barMaxWidth?: number;\n  barWidthFactor?: number;\n}\n\n/**\n * TODO docs\n */\nexport interface FillConfig {\n  fillBelowTo?: string;\n  fillColor?: string;\n  fillOpacity?: number;\n}\n\n/**\n * TODO docs\n */\nexport interface PointsConfig {\n  pointColor?: string;\n  pointSize?: number;\n  pointSymbol?: string;\n  showPoints?: VisibilityMode;\n}\n\n/**\n * TODO docs\n */\nexport interface ScaleDistributionConfig {\n  linearThreshold?: number;\n  log?: number;\n  type: ScaleDistribution;\n}\n\n/**\n * TODO docs\n */\nexport interface AxisConfig {\n  axisBorderShow?: boolean;\n  axisCenteredZero?: boolean;\n  axisColorMode?: AxisColorMode;\n  axisGridShow?: boolean;\n  axisLabel?: string;\n  axisPlacement?: AxisPlacement;\n  axisSoftMax?: number;\n  axisSoftMin?: number;\n  axisWidth?: number;\n  scaleDistribution?: ScaleDistributionConfig;\n}\n\n/**\n * TODO docs\n */\nexport interface HideSeriesConfig {\n  legend: boolean;\n  tooltip: boolean;\n  viz: boolean;\n}\n\n/**\n * TODO docs\n */\nexport interface StackingConfig {\n  group?: string;\n  mode?: StackingMode;\n}\n\n/**\n * TODO docs\n */\nexport interface StackableFieldConfig {\n  stacking?: StackingConfig;\n}\n\n/**\n * TODO docs\n */\nexport interface HideableFieldConfig {\n  hideFrom?: HideSeriesConfig;\n}\n\n/**\n * TODO docs\n */\nexport enum GraphThresholdsStyleMode {\n  Area = 'area',\n  Dashed = 'dashed',\n  DashedAndArea = 'dashed+area',\n  Line = 'line',\n  LineAndArea = 'line+area',\n  Off = 'off',\n  Series = 'series',\n}\n\n/**\n * TODO docs\n */\nexport interface GraphThresholdsStyleConfig {\n  mode: GraphThresholdsStyleMode;\n}\n\n/**\n * TODO docs\n */\nexport type LegendPlacement = ('bottom' | 'right');\n\n/**\n * TODO docs\n * Note: \"hidden\" needs to remain as an option for plugins compatibility\n */\nexport enum LegendDisplayMode {\n  Hidden = 'hidden',\n  List = 'list',\n  Table = 'table',\n}\n\n/**\n * TODO docs\n */\nexport interface SingleStatBaseOptions extends OptionsWithTextFormatting {\n  orientation: VizOrientation;\n  reduceOptions: ReduceDataOptions;\n}\n\n/**\n * TODO docs\n */\nexport interface ReduceDataOptions {\n  /**\n   * When !values, pick one value for the whole field\n   */\n  calcs: Array<string>;\n  /**\n   * Which fields to show.  By default this is only numeric fields\n   */\n  fields?: string;\n  /**\n   * if showing all values limit\n   */\n  limit?: number;\n  /**\n   * If true show each row value\n   */\n  values?: boolean;\n}\n\nexport const defaultReduceDataOptions: Partial<ReduceDataOptions> = {\n  calcs: [],\n};\n\n/**\n * TODO docs\n */\nexport enum VizOrientation {\n  Auto = 'auto',\n  Horizontal = 'horizontal',\n  Vertical = 'vertical',\n}\n\n/**\n * TODO docs\n */\nexport interface OptionsWithTooltip {\n  tooltip: VizTooltipOptions;\n}\n\n/**\n * TODO docs\n */\nexport interface OptionsWithLegend {\n  legend: VizLegendOptions;\n}\n\n/**\n * TODO docs\n */\nexport interface OptionsWithTimezones {\n  timezone?: Array<TimeZone>;\n}\n\nexport const defaultOptionsWithTimezones: Partial<OptionsWithTimezones> = {\n  timezone: [],\n};\n\n/**\n * TODO docs\n */\nexport interface OptionsWithTextFormatting {\n  text?: VizTextDisplayOptions;\n}\n\n/**\n * TODO docs\n */\nexport enum BigValueColorMode {\n  Background = 'background',\n  BackgroundSolid = 'background_solid',\n  None = 'none',\n  Value = 'value',\n}\n\n/**\n * TODO docs\n */\nexport enum BigValueGraphMode {\n  Area = 'area',\n  Line = 'line',\n  None = 'none',\n}\n\n/**\n * TODO docs\n */\nexport enum BigValueJustifyMode {\n  Auto = 'auto',\n  Center = 'center',\n}\n\n/**\n * TODO docs\n */\nexport enum BigValueTextMode {\n  Auto = 'auto',\n  Name = 'name',\n  None = 'none',\n  Value = 'value',\n  ValueAndName = 'value_and_name',\n}\n\n/**\n * TODO docs\n */\nexport enum PercentChangeColorMode {\n  Inverted = 'inverted',\n  SameAsValue = 'same_as_value',\n  Standard = 'standard',\n}\n\n/**\n * TODO -- should not be table specific!\n * TODO docs\n */\nexport type FieldTextAlignment = ('auto' | 'left' | 'right' | 'center');\n\n/**\n * Controls the value alignment in the TimelineChart component\n */\nexport type TimelineValueAlignment = ('center' | 'left' | 'right');\n\n/**\n * TODO docs\n */\nexport interface VizTextDisplayOptions {\n  /**\n   * Explicit percent text size\n   */\n  percentSize?: number;\n  /**\n   * Explicit title text size\n   */\n  titleSize?: number;\n  /**\n   * Explicit value text size\n   */\n  valueSize?: number;\n}\n\n/**\n * TODO docs\n */\nexport enum TooltipDisplayMode {\n  Multi = 'multi',\n  None = 'none',\n  Single = 'single',\n}\n\n/**\n * TODO docs\n */\nexport enum SortOrder {\n  Ascending = 'asc',\n  Descending = 'desc',\n  None = 'none',\n}\n\n/**\n * TODO docs\n */\nexport interface GraphFieldConfig extends LineConfig, FillConfig, PointsConfig, AxisConfig, BarConfig, StackableFieldConfig, HideableFieldConfig {\n  drawStyle?: GraphDrawStyle;\n  gradientMode?: GraphGradientMode;\n  insertNulls?: (boolean | number);\n  thresholdsStyle?: GraphThresholdsStyleConfig;\n  transform?: GraphTransform;\n}\n\n/**\n * TODO docs\n */\nexport interface VizLegendOptions {\n  asTable?: boolean;\n  calcs: Array<string>;\n  displayMode: LegendDisplayMode;\n  isVisible?: boolean;\n  placement: LegendPlacement;\n  showLegend: boolean;\n  sortBy?: string;\n  sortDesc?: boolean;\n  width?: number;\n}\n\nexport const defaultVizLegendOptions: Partial<VizLegendOptions> = {\n  calcs: [],\n};\n\n/**\n * Enum expressing the possible display modes\n * for the bar gauge component of Grafana UI\n */\nexport enum BarGaugeDisplayMode {\n  Basic = 'basic',\n  Gradient = 'gradient',\n  Lcd = 'lcd',\n}\n\n/**\n * Allows for the table cell gauge display type to set the gauge mode.\n */\nexport enum BarGaugeValueMode {\n  Color = 'color',\n  Hidden = 'hidden',\n  Text = 'text',\n}\n\n/**\n * Allows for the bar gauge name to be placed explicitly\n */\nexport enum BarGaugeNamePlacement {\n  Auto = 'auto',\n  Hidden = 'hidden',\n  Left = 'left',\n  Top = 'top',\n}\n\n/**\n * Allows for the bar gauge size to be set explicitly\n */\nexport enum BarGaugeSizing {\n  Auto = 'auto',\n  Manual = 'manual',\n}\n\n/**\n * TODO docs\n */\nexport interface VizTooltipOptions {\n  hideZeros?: boolean;\n  maxHeight?: number;\n  maxWidth?: number;\n  mode: TooltipDisplayMode;\n  sort: SortOrder;\n}\n\nexport interface Labels {}\n\n/**\n * Internally, this is the \"type\" of cell that's being displayed\n * in the table such as colored text, JSON, gauge, etc.\n * The color-background-solid, gradient-gauge, and lcd-gauge\n * modes are deprecated in favor of new cell subOptions\n */\nexport enum TableCellDisplayMode {\n  Actions = 'actions',\n  Auto = 'auto',\n  BasicGauge = 'basic',\n  ColorBackground = 'color-background',\n  ColorBackgroundSolid = 'color-background-solid',\n  ColorText = 'color-text',\n  Custom = 'custom',\n  DataLinks = 'data-links',\n  Gauge = 'gauge',\n  GradientGauge = 'gradient-gauge',\n  Image = 'image',\n  JSONView = 'json-view',\n  LcdGauge = 'lcd-gauge',\n  Sparkline = 'sparkline',\n}\n\n/**\n * Display mode to the \"Colored Background\" display\n * mode for table cells. Either displays a solid color (basic mode)\n * or a gradient.\n */\nexport enum TableCellBackgroundDisplayMode {\n  Basic = 'basic',\n  Gradient = 'gradient',\n}\n\n/**\n * Sort by field state\n */\nexport interface TableSortByFieldState {\n  /**\n   * Flag used to indicate descending sort order\n   */\n  desc?: boolean;\n  /**\n   * Sets the display name of the field to sort by\n   */\n  displayName: string;\n}\n\n/**\n * Footer options\n */\nexport interface TableFooterOptions {\n  countRows?: boolean;\n  enablePagination?: boolean;\n  fields?: Array<string>;\n  reducer: Array<string>; // actually 1 value\n  show: boolean;\n}\n\nexport const defaultTableFooterOptions: Partial<TableFooterOptions> = {\n  fields: [],\n  reducer: [],\n};\n\n/**\n * Auto mode table cell options\n */\nexport interface TableAutoCellOptions {\n  type: TableCellDisplayMode.Auto;\n  wrapText?: boolean;\n}\n\n/**\n * Colored text cell options\n */\nexport interface TableColorTextCellOptions {\n  type: TableCellDisplayMode.ColorText;\n  wrapText?: boolean;\n}\n\n/**\n * Json view cell options\n */\nexport interface TableJsonViewCellOptions {\n  type: TableCellDisplayMode.JSONView;\n}\n\n/**\n * Json view cell options\n */\nexport interface TableImageCellOptions {\n  alt?: string;\n  title?: string;\n  type: TableCellDisplayMode.Image;\n}\n\n/**\n * Show data links in the cell\n */\nexport interface TableDataLinksCellOptions {\n  type: TableCellDisplayMode.DataLinks;\n}\n\n/**\n * Show actions in the cell\n */\nexport interface TableActionsCellOptions {\n  type: TableCellDisplayMode.Actions;\n}\n\n/**\n * Gauge cell options\n */\nexport interface TableBarGaugeCellOptions {\n  mode?: BarGaugeDisplayMode;\n  type: TableCellDisplayMode.Gauge;\n  valueDisplayMode?: BarGaugeValueMode;\n}\n\n/**\n * Sparkline cell options\n */\nexport interface TableSparklineCellOptions extends GraphFieldConfig {\n  hideValue?: boolean;\n  type: TableCellDisplayMode.Sparkline;\n}\n\n/**\n * Colored background cell options\n */\nexport interface TableColoredBackgroundCellOptions {\n  applyToRow?: boolean;\n  mode?: TableCellBackgroundDisplayMode;\n  type: TableCellDisplayMode.ColorBackground;\n  wrapText?: boolean;\n}\n\n/**\n * Height of a table cell\n */\nexport enum TableCellHeight {\n  Auto = 'auto',\n  Lg = 'lg',\n  Md = 'md',\n  Sm = 'sm',\n}\n\n/**\n * Table cell options. Each cell has a display mode\n * and other potential options for that display.\n */\nexport type TableCellOptions = (TableAutoCellOptions | TableSparklineCellOptions | TableBarGaugeCellOptions | TableColoredBackgroundCellOptions | TableColorTextCellOptions | TableImageCellOptions | TableDataLinksCellOptions | TableActionsCellOptions | TableJsonViewCellOptions);\n\n/**\n * Use UTC/GMT timezone\n */\nexport type TimeZoneUtc = 'utc';\n\n/**\n * Use the timezone defined by end user web browser\n */\nexport type TimeZoneBrowser = 'browser';\n\n/**\n * Optional formats for the template variable replace functions\n * See also https://grafana.com/docs/grafana/latest/dashboards/variables/variable-syntax/#advanced-variable-format-options\n */\nexport enum VariableFormatID {\n  CSV = 'csv',\n  Date = 'date',\n  Distributed = 'distributed',\n  DoubleQuote = 'doublequote',\n  Glob = 'glob',\n  HTML = 'html',\n  JSON = 'json',\n  Lucene = 'lucene',\n  PercentEncode = 'percentencode',\n  Pipe = 'pipe',\n  QueryParam = 'queryparam',\n  Raw = 'raw',\n  Regex = 'regex',\n  SQLString = 'sqlstring',\n  SingleQuote = 'singlequote',\n  Text = 'text',\n  UriEncode = 'uriencode',\n}\n\nexport interface DataSourceRef {\n  /**\n   *  Datasource API version\n   */\n  apiVersion?: string;\n  /**\n   * The plugin type-id\n   */\n  type?: string;\n  /**\n   * Specific datasource instance\n   */\n  uid?: string;\n}\n\n/**\n * Links to a resource (image/svg path)\n */\nexport interface ResourceDimensionConfig extends BaseDimensionConfig {\n  fixed?: string;\n  mode: ResourceDimensionMode;\n}\n\nexport interface FrameGeometrySource {\n  /**\n   * Path to Gazetteer\n   */\n  gazetteer?: string;\n  /**\n   * Field mappings\n   */\n  geohash?: string;\n  latitude?: string;\n  longitude?: string;\n  lookup?: string;\n  mode: FrameGeometrySourceMode;\n  wkt?: string;\n}\n\nexport interface HeatmapCalculationOptions {\n  /**\n   * The number of buckets to use for the xAxis in the heatmap\n   */\n  xBuckets?: HeatmapCalculationBucketConfig;\n  /**\n   * The number of buckets to use for the yAxis in the heatmap\n   */\n  yBuckets?: HeatmapCalculationBucketConfig;\n}\n\nexport enum LogsDedupStrategy {\n  exact = 'exact',\n  none = 'none',\n  numbers = 'numbers',\n  signature = 'signature',\n}\n\n/**\n * Compare two values\n */\nexport enum ComparisonOperation {\n  EQ = 'eq',\n  GT = 'gt',\n  GTE = 'gte',\n  LT = 'lt',\n  LTE = 'lte',\n  NEQ = 'neq',\n}\n\n/**\n * Field options for each field within a table (e.g 10, \"The String\", 64.20, etc.)\n * Generally defines alignment, filtering capabilties, display options, etc.\n */\nexport interface TableFieldOptions {\n  align: FieldTextAlignment;\n  cellOptions: TableCellOptions;\n  /**\n   * This field is deprecated in favor of using cellOptions\n   */\n  displayMode?: TableCellDisplayMode;\n  filterable?: boolean;\n  hidden?: boolean; // ?? default is missing or false ??\n  /**\n   * Hides any header for a column, useful for columns that show some static content or buttons.\n   */\n  hideHeader?: boolean;\n  inspect: boolean;\n  minWidth?: number;\n  width?: number;\n}\n\nexport const defaultTableFieldOptions: Partial<TableFieldOptions> = {\n  align: 'auto',\n  inspect: false,\n};\n\n/**\n * A specific timezone from https://en.wikipedia.org/wiki/Tz_database\n */\nexport type TimeZone = (TimeZoneUtc | TimeZoneBrowser | string);\n\nexport const defaultTimeZone: TimeZone = 'browser';\n","import { css } from '@emotion/css';\nimport { uniq } from 'lodash';\nimport { useState, useMemo } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\n\nimport { SelectableValue } from '@grafana/data';\nimport { TemporaryAlert } from '@grafana/o11y-ds-frontend';\nimport { FetchError, getTemplateSrv, isFetchError } from '@grafana/runtime';\nimport { Select, HorizontalGroup, useStyles2, InputActionMeta } from '@grafana/ui';\n\nimport { TraceqlFilter, TraceqlSearchScope } from '../dataquery.gen';\nimport { TempoDatasource } from '../datasource';\nimport { OPTIONS_LIMIT } from '../language_provider';\nimport { operators as allOperators, stringOperators, numberOperators, keywordOperators } from '../traceql/traceql';\n\nimport { filterScopedTag, operatorSelectableValue } from './utils';\n\ninterface Props {\n  filter: TraceqlFilter;\n  datasource: TempoDatasource;\n  updateFilter: (f: TraceqlFilter) => void;\n  deleteFilter?: (f: TraceqlFilter) => void;\n  setError: (error: FetchError | null) => void;\n  isTagsLoading?: boolean;\n  tags: string[];\n  hideScope?: boolean;\n  hideTag?: boolean;\n  hideValue?: boolean;\n  query: string;\n  isMulti?: boolean;\n  allowCustomValue?: boolean;\n  addVariablesToOptions?: boolean;\n}\nconst SearchField = ({\n  filter,\n  datasource,\n  updateFilter,\n  isTagsLoading,\n  tags,\n  setError,\n  hideScope,\n  hideTag,\n  hideValue,\n  query,\n  addVariablesToOptions,\n  isMulti = true,\n  allowCustomValue = true,\n}: Props) => {\n  const styles = useStyles2(getStyles);\n  const [alertText, setAlertText] = useState<string>();\n  const scopedTag = useMemo(\n    () => filterScopedTag(filter, datasource.languageProvider),\n    [datasource.languageProvider, filter]\n  );\n  const [tagQuery, setTagQuery] = useState<string>('');\n  const [tagValuesQuery, setTagValuesQuery] = useState<string>('');\n\n  const updateOptions = async () => {\n    try {\n      const result = filter.tag ? await datasource.languageProvider.getOptionsV2(scopedTag, query) : [];\n      setAlertText(undefined);\n      setError(null);\n      return result;\n    } catch (error) {\n      // Display message if Tempo is connected but search 404's\n      if (isFetchError(error) && error?.status === 404) {\n        setError(error);\n      } else if (error instanceof Error) {\n        setAlertText(`Error: ${error.message}`);\n      }\n    }\n    return [];\n  };\n\n  const { loading: isLoadingValues, value: options } = useAsync(updateOptions, [\n    scopedTag,\n    datasource.languageProvider,\n    setError,\n    query,\n  ]);\n\n  // Add selected option if it doesn't exist in the current list of options\n  if (filter.value && !Array.isArray(filter.value) && options && !options.find((o) => o.value === filter.value)) {\n    options.push({ label: filter.value.toString(), value: filter.value.toString(), type: filter.valueType });\n  }\n\n  const scopeOptions = Object.values(TraceqlSearchScope)\n    .filter((s) => {\n      // only add scope if it has tags\n      return datasource.languageProvider.getTags(s).length > 0;\n    })\n    .map((t) => ({ label: t, value: t }));\n\n  // If all values have type string or int/float use a focused list of operators instead of all operators\n  const optionsOfFirstType = options?.filter((o) => o.type === options[0]?.type);\n  const uniqueOptionType = options?.length === optionsOfFirstType?.length ? options?.[0]?.type : undefined;\n  let operatorList = allOperators;\n  switch (uniqueOptionType) {\n    case 'keyword':\n      operatorList = keywordOperators;\n      break;\n    case 'string':\n      operatorList = stringOperators;\n      break;\n    case 'int':\n    case 'float':\n      operatorList = numberOperators;\n  }\n  const operatorOptions = operatorList.map(operatorSelectableValue);\n\n  const formatTagOptions = (tags: string[], filterTag: string | undefined) => {\n    return (filterTag !== undefined ? uniq([filterTag, ...tags]) : tags).map((t) => ({ label: t, value: t }));\n  };\n\n  const tagOptions = useMemo(() => {\n    if (tagQuery.length === 0) {\n      return formatTagOptions(tags.slice(0, OPTIONS_LIMIT), filter.tag);\n    }\n\n    const queryLowerCase = tagQuery.toLowerCase();\n    const filterdOptions = tags.filter((tag) => tag.toLowerCase().includes(queryLowerCase)).slice(0, OPTIONS_LIMIT);\n    return formatTagOptions(filterdOptions, filter.tag);\n  }, [filter.tag, tagQuery, tags]);\n\n  const tagValueOptions = useMemo(() => {\n    if (!options) {\n      return;\n    }\n\n    if (tagValuesQuery.length === 0) {\n      return options.slice(0, OPTIONS_LIMIT);\n    }\n\n    const queryLowerCase = tagValuesQuery.toLowerCase();\n    return options\n      .filter((tag) => {\n        if (tag.value && tag.value.length > 0) {\n          return tag.value.toLowerCase().includes(queryLowerCase);\n        }\n        return false;\n      })\n      .slice(0, OPTIONS_LIMIT);\n  }, [tagValuesQuery, options]);\n\n  return (\n    <>\n      <HorizontalGroup spacing={'none'} width={'auto'}>\n        {!hideScope && (\n          <Select\n            className={styles.dropdown}\n            inputId={`${filter.id}-scope`}\n            options={addVariablesToOptions ? withTemplateVariableOptions(scopeOptions) : scopeOptions}\n            value={filter.scope}\n            onChange={(v) => updateFilter({ ...filter, scope: v?.value, tag: undefined, value: [] })}\n            placeholder=\"Select scope\"\n            aria-label={`select ${filter.id} scope`}\n          />\n        )}\n        {!hideTag && (\n          <Select\n            className={styles.dropdown}\n            inputId={`${filter.id}-tag`}\n            isLoading={isTagsLoading}\n            // Add the current tag to the list if it doesn't exist in the tags prop, otherwise the field will be empty even though the state has a value\n            options={addVariablesToOptions ? withTemplateVariableOptions(tagOptions) : tagOptions}\n            onInputChange={(value: string, { action }: InputActionMeta) => {\n              if (action === 'input-change') {\n                setTagQuery(value);\n              }\n            }}\n            onCloseMenu={() => setTagQuery('')}\n            onChange={(v) => updateFilter({ ...filter, tag: v?.value, value: [] })}\n            value={filter.tag}\n            key={filter.tag}\n            placeholder=\"Select tag\"\n            isClearable\n            aria-label={`select ${filter.id} tag`}\n            allowCustomValue\n            virtualized\n          />\n        )}\n        <Select\n          className={styles.dropdown}\n          inputId={`${filter.id}-operator`}\n          options={addVariablesToOptions ? withTemplateVariableOptions(operatorOptions) : operatorOptions}\n          value={filter.operator}\n          onChange={(v) => updateFilter({ ...filter, operator: v?.value })}\n          isClearable={false}\n          aria-label={`select ${filter.id} operator`}\n          allowCustomValue={true}\n          width={8}\n        />\n        {!hideValue && (\n          <Select\n            /**\n             * Trace cardinality means we need to use the virtualized variant of the Select component.\n             * For example the number of span names being returned can easily reach 10s of thousands,\n             * which is enough to cause a user's web browser to seize up\n             */\n            virtualized\n            className={styles.dropdown}\n            inputId={`${filter.id}-value`}\n            isLoading={isLoadingValues}\n            options={addVariablesToOptions ? withTemplateVariableOptions(tagValueOptions) : tagValueOptions}\n            value={filter.value}\n            onInputChange={(value: string, { action }: InputActionMeta) => {\n              if (action === 'input-change') {\n                setTagValuesQuery(value);\n              }\n            }}\n            onCloseMenu={() => setTagValuesQuery('')}\n            onChange={(val) => {\n              if (Array.isArray(val)) {\n                updateFilter({\n                  ...filter,\n                  value: val.map((v) => v.value),\n                  valueType: val[0]?.type || uniqueOptionType,\n                });\n              } else {\n                updateFilter({ ...filter, value: val?.value, valueType: val?.type || uniqueOptionType });\n              }\n            }}\n            placeholder=\"Select value\"\n            isClearable={true}\n            aria-label={`select ${filter.id} value`}\n            allowCustomValue={allowCustomValue}\n            isMulti={isMulti}\n            allowCreateWhileLoading\n          />\n        )}\n      </HorizontalGroup>\n      {alertText && <TemporaryAlert severity=\"error\" text={alertText} />}\n    </>\n  );\n};\n\nexport default SearchField;\n\n/**\n * Add to a list of options the current template variables.\n *\n * @param options a list of options\n * @returns the list of given options plus the template variables\n */\nexport const withTemplateVariableOptions = (options: SelectableValue[] | undefined) => {\n  const templateVariables = getTemplateSrv().getVariables();\n  return [...(options || []), ...templateVariables.map((v) => ({ label: `$${v.name}`, value: `$${v.name}` }))];\n};\n\nconst getStyles = () => ({\n  dropdown: css({\n    boxShadow: 'none',\n  }),\n});\n","import { css } from '@emotion/css';\nimport { useCallback, useEffect } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { AccessoryButton } from '@grafana/plugin-ui';\nimport { FetchError } from '@grafana/runtime';\nimport { useStyles2 } from '@grafana/ui';\n\nimport { TraceqlFilter, TraceqlSearchScope } from '../dataquery.gen';\nimport { TempoDatasource } from '../datasource';\n\nimport SearchField from './SearchField';\nimport { getFilteredTags } from './utils';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  vertical: css({\n    display: 'flex',\n    flexDirection: 'column',\n    gap: theme.spacing(0.25),\n  }),\n  horizontal: css({\n    display: 'flex',\n    flexDirection: 'row',\n    gap: theme.spacing(1),\n  }),\n  addTag: css({\n    marginLeft: theme.spacing(1),\n  }),\n});\n\ninterface Props {\n  updateFilter: (f: TraceqlFilter) => void;\n  deleteFilter: (f: TraceqlFilter) => void;\n  generateQueryWithoutFilter: (f?: TraceqlFilter) => string;\n  filters: TraceqlFilter[];\n  datasource: TempoDatasource;\n  setError: (error: FetchError | null) => void;\n  staticTags: Array<string | undefined>;\n  isTagsLoading: boolean;\n  hideValues?: boolean;\n  requireTagAndValue?: boolean;\n  addVariablesToOptions?: boolean;\n}\nconst TagsInput = ({\n  updateFilter,\n  deleteFilter,\n  filters,\n  datasource,\n  setError,\n  staticTags,\n  isTagsLoading,\n  hideValues,\n  requireTagAndValue,\n  generateQueryWithoutFilter,\n  addVariablesToOptions,\n}: Props) => {\n  const styles = useStyles2(getStyles);\n  const handleOnAdd = useCallback(\n    () => updateFilter({ id: generateId(), operator: '=', scope: TraceqlSearchScope.Span }),\n    [updateFilter]\n  );\n\n  useEffect(() => {\n    if (!filters?.length) {\n      handleOnAdd();\n    }\n  }, [filters, handleOnAdd]);\n\n  const getTags = (f: TraceqlFilter) => {\n    const tags = datasource.languageProvider.getTags(f.scope);\n    return getFilteredTags(tags, staticTags);\n  };\n\n  const validInput = (f: TraceqlFilter) => {\n    // If value is removed from the filter, it can be set as an empty array\n    return requireTagAndValue ? f.tag && f.value && f.value.length > 0 : f.tag;\n  };\n\n  return (\n    <div className={styles.vertical}>\n      {filters?.map((f, i) => (\n        <div className={styles.horizontal} key={f.id}>\n          <SearchField\n            filter={f}\n            datasource={datasource}\n            setError={setError}\n            updateFilter={updateFilter}\n            tags={getTags(f)}\n            isTagsLoading={isTagsLoading}\n            hideValue={hideValues}\n            query={generateQueryWithoutFilter(f)}\n            addVariablesToOptions={addVariablesToOptions}\n          />\n          {(validInput(f) || filters.length > 1) && (\n            <AccessoryButton\n              aria-label={`Remove tag with ID ${f.id}`}\n              variant={'secondary'}\n              icon={'times'}\n              onClick={() => deleteFilter?.(f)}\n              tooltip={'Remove tag'}\n            />\n          )}\n          {validInput(f) && i === filters.length - 1 && (\n            <span className={styles.addTag}>\n              <AccessoryButton\n                aria-label=\"Add tag\"\n                variant={'secondary'}\n                icon={'plus'}\n                onClick={handleOnAdd}\n                tooltip={'Add tag'}\n              />\n            </span>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default TagsInput;\n\nexport const generateId = () => uuidv4().slice(0, 8);\n","import { startCase, uniq } from 'lodash';\n\nimport { AdHocVariableFilter, ScopedVars, SelectableValue } from '@grafana/data';\nimport { getTemplateSrv } from '@grafana/runtime';\nimport { VariableFormatID } from '@grafana/schema';\n\nimport { TraceqlFilter, TraceqlSearchScope } from '../dataquery.gen';\nimport { getEscapedSpanNames } from '../datasource';\nimport TempoLanguageProvider from '../language_provider';\nimport { Scope } from '../types';\n\nexport const interpolateFilters = (filters: TraceqlFilter[], scopedVars?: ScopedVars) => {\n  const interpolatedFilters = filters.map((filter) => {\n    const updatedFilter = {\n      ...filter,\n      tag: getTemplateSrv().replace(filter.tag ?? '', scopedVars ?? {}),\n    };\n\n    if (filter.value) {\n      updatedFilter.value =\n        typeof filter.value === 'string'\n          ? getTemplateSrv().replace(filter.value ?? '', scopedVars ?? {}, VariableFormatID.Pipe)\n          : filter.value.map((v) => getTemplateSrv().replace(v ?? '', scopedVars ?? {}, VariableFormatID.Pipe));\n    }\n\n    return updatedFilter;\n  });\n\n  return interpolatedFilters;\n};\n\nconst isRegExpOperator = (operator: string) => operator === '=~' || operator === '!~';\n\nconst escapeValues = (values: string[]) => getEscapedSpanNames(values);\n\nexport const valueHelper = (f: TraceqlFilter) => {\n  const value = Array.isArray(f.value) && isRegExpOperator(f.operator!) ? escapeValues(f.value) : f.value;\n\n  if (Array.isArray(value) && value.length > 1) {\n    return `\"${value.join('|')}\"`;\n  }\n  if (f.valueType === 'string') {\n    return `\"${value}\"`;\n  }\n  return value;\n};\n\nexport const scopeHelper = (f: TraceqlFilter, lp: TempoLanguageProvider) => {\n  // Intrinsic fields don't have a scope\n  if (lp.getIntrinsics().find((t) => t === f.tag)) {\n    return '';\n  }\n  return (\n    (f.scope === TraceqlSearchScope.Event ||\n    f.scope === TraceqlSearchScope.Instrumentation ||\n    f.scope === TraceqlSearchScope.Link ||\n    f.scope === TraceqlSearchScope.Resource ||\n    f.scope === TraceqlSearchScope.Span\n      ? f.scope?.toLowerCase()\n      : '') + '.'\n  );\n};\n\nexport const tagHelper = (f: TraceqlFilter, filters: TraceqlFilter[]) => {\n  if (f.tag === 'duration') {\n    const durationType = filters.find((f) => f.id === 'duration-type');\n    if (durationType) {\n      return durationType.value === 'trace' ? 'traceDuration' : 'duration';\n    }\n    return f.tag;\n  }\n  return f.tag;\n};\n\nexport const filterToQuerySection = (f: TraceqlFilter, filters: TraceqlFilter[], lp: TempoLanguageProvider) => {\n  if (Array.isArray(f.value) && f.value.length > 1 && !isRegExpOperator(f.operator!)) {\n    return `(${f.value.map((v) => `${scopeHelper(f, lp)}${tagHelper(f, filters)}${f.operator}${valueHelper({ ...f, value: v })}`).join(' || ')})`;\n  }\n\n  return `${scopeHelper(f, lp)}${tagHelper(f, filters)}${f.operator}${valueHelper(f)}`;\n};\n\nexport const generateQueryFromAdHocFilters = (filters: AdHocVariableFilter[], lp: TempoLanguageProvider) => {\n  return `{${filters\n    .filter((f) => f.key && f.operator && f.value)\n    .map((f) => `${f.key}${f.operator}${adHocValueHelper(f, lp)}`)\n    .join(' && ')}}`;\n};\n\nconst adHocValueHelper = (f: AdHocVariableFilter, lp: TempoLanguageProvider) => {\n  if (lp.getIntrinsics().find((t) => t === f.key)) {\n    return f.value;\n  }\n  if (parseInt(f.value, 10).toString() === f.value) {\n    return f.value;\n  }\n  return `\"${f.value}\"`;\n};\n\nexport const getTagWithoutScope = (tag: string) => {\n  return tag.replace(/^(event|instrumentation|link|resource|span)\\./, '');\n};\n\nexport const filterScopedTag = (f: TraceqlFilter, lp: TempoLanguageProvider) => {\n  return scopeHelper(f, lp) + f.tag;\n};\n\nexport const filterTitle = (f: TraceqlFilter, lp: TempoLanguageProvider) => {\n  // Special case for the intrinsic \"name\" since a label called \"Name\" isn't explicit\n  if (f.tag === 'name') {\n    return 'Span Name';\n  }\n  // Special case for the resource service name\n  if (f.tag === 'service.name' && f.scope === TraceqlSearchScope.Resource) {\n    return 'Service Name';\n  }\n  return startCase(filterScopedTag(f, lp));\n};\n\nexport const getFilteredTags = (tags: string[], staticTags: Array<string | undefined>) => {\n  return [...tags].filter((t) => !staticTags.includes(t));\n};\n\nexport const getUnscopedTags = (scopes: Scope[]) => {\n  return uniq(\n    scopes\n      .map((scope: Scope) =>\n        scope.name && scope.name !== TraceqlSearchScope.Intrinsic && scope.tags ? scope.tags : []\n      )\n      .flat()\n  );\n};\n\nexport const getIntrinsicTags = (scopes: Scope[]) => {\n  return uniq(\n    scopes\n      .map((scope: Scope) =>\n        scope.name && scope.name === TraceqlSearchScope.Intrinsic && scope.tags ? scope.tags : []\n      )\n      .flat()\n  );\n};\n\nexport const getAllTags = (scopes: Scope[]) => {\n  return uniq(scopes.map((scope: Scope) => (scope.tags ? scope.tags : [])).flat());\n};\n\nexport const getTagsByScope = (scopes: Scope[], scope: TraceqlSearchScope | string) => {\n  return uniq(scopes.map((s: Scope) => (s.name && s.name === scope && s.tags ? s.tags : [])).flat());\n};\n\nexport function replaceAt<T>(array: T[], index: number, value: T) {\n  const ret = array.slice(0);\n  ret[index] = value;\n  return ret;\n}\n\nexport const operatorSelectableValue = (op: string) => {\n  const result: SelectableValue = { label: op, value: op };\n  switch (op) {\n    case '=':\n      result.description = 'Equals';\n      break;\n    case '!=':\n      result.description = 'Not equals';\n      break;\n    case '>':\n      result.description = 'Greater';\n      break;\n    case '>=':\n      result.description = 'Greater or Equal';\n      break;\n    case '<':\n      result.description = 'Less';\n      break;\n    case '<=':\n      result.description = 'Less or Equal';\n      break;\n    case '=~':\n      result.description = 'Matches regex';\n      break;\n    case '!~':\n      result.description = 'Does not match regex';\n      break;\n  }\n  return result;\n};\n","// Code generated - EDITING IS FUTILE. DO NOT EDIT.\n//\n// Generated by:\n//     public/app/plugins/gen.go\n// Using jennies:\n//     TSTypesJenny\n//     PluginTsTypesJenny\n//\n// Run 'make gen-cue' from repository root to regenerate.\n\nimport * as common from '@grafana/schema';\n\nexport interface TempoQuery extends common.DataQuery {\n  /**\n   * For metric queries, how many exemplars to request, 0 means no exemplars\n   */\n  exemplars?: number;\n  filters: Array<TraceqlFilter>;\n  /**\n   * Filters that are used to query the metrics summary\n   */\n  groupBy?: Array<TraceqlFilter>;\n  /**\n   * Defines the maximum number of traces that are returned from Tempo\n   */\n  limit?: number;\n  /**\n   * @deprecated Define the maximum duration to select traces. Use duration format, for example: 1.2s, 100ms\n   */\n  maxDuration?: string;\n  /**\n   * For metric queries, whether to run instant or range queries\n   */\n  metricsQueryType?: MetricsQueryType;\n  /**\n   * @deprecated Define the minimum duration to select traces. Use duration format, for example: 1.2s, 100ms\n   */\n  minDuration?: string;\n  /**\n   * TraceQL query or trace ID\n   */\n  query?: string;\n  /**\n   * @deprecated Logfmt query to filter traces by their tags. Example: http.status_code=200 error=true\n   */\n  search?: string;\n  /**\n   * Use service.namespace in addition to service.name to uniquely identify a service.\n   */\n  serviceMapIncludeNamespace?: boolean;\n  /**\n   * Filters to be included in a PromQL query to select data for the service graph. Example: {client=\"app\",service=\"app\"}. Providing multiple values will produce union of results for each filter, using PromQL OR operator internally.\n   */\n  serviceMapQuery?: (string | Array<string>);\n  /**\n   * @deprecated Query traces by service name\n   */\n  serviceName?: string;\n  /**\n   * @deprecated Query traces by span name\n   */\n  spanName?: string;\n  /**\n   * Defines the maximum number of spans per spanset that are returned from Tempo\n   */\n  spss?: number;\n  /**\n   * For metric queries, the step size to use\n   */\n  step?: string;\n  /**\n   * The type of the table that is used to display the search results\n   */\n  tableType?: SearchTableType;\n}\n\nexport const defaultTempoQuery: Partial<TempoQuery> = {\n  filters: [],\n  groupBy: [],\n};\n\nexport type TempoQueryType = ('traceql' | 'traceqlSearch' | 'serviceMap' | 'upload' | 'nativeSearch' | 'traceId' | 'clear');\n\nexport enum MetricsQueryType {\n  Instant = 'instant',\n  Range = 'range',\n}\n\n/**\n * The state of the TraceQL streaming search query\n */\nexport enum SearchStreamingState {\n  Done = 'done',\n  Error = 'error',\n  Pending = 'pending',\n  Streaming = 'streaming',\n}\n\n/**\n * The type of the table that is used to display the search results\n */\nexport enum SearchTableType {\n  Raw = 'raw',\n  Spans = 'spans',\n  Traces = 'traces',\n}\n\n/**\n * static fields are pre-set in the UI, dynamic fields are added by the user\n */\nexport enum TraceqlSearchScope {\n  Event = 'event',\n  Instrumentation = 'instrumentation',\n  Intrinsic = 'intrinsic',\n  Link = 'link',\n  Resource = 'resource',\n  Span = 'span',\n  Unscoped = 'unscoped',\n}\n\nexport interface TraceqlFilter {\n  /**\n   * Uniquely identify the filter, will not be used in the query generation\n   */\n  id: string;\n  /**\n   * The operator that connects the tag to the value, for example: =, >, !=, =~\n   */\n  operator?: string;\n  /**\n   * The scope of the filter, can either be unscoped/all scopes, resource or span\n   */\n  scope?: TraceqlSearchScope;\n  /**\n   * The tag for the search filter, for example: .http.status_code, .service.name, status\n   */\n  tag?: string;\n  /**\n   * The value for the search filter\n   */\n  value?: (string | Array<string>);\n  /**\n   * The type of the value, used for example to check whether we need to wrap the value in quotes when generating the query\n   */\n  valueType?: string;\n}\n\nexport interface TempoDataQuery {}\n","import { useEffect, useMemo, useState } from 'react';\n\nimport { DataQuery, SelectableValue } from '@grafana/data';\nimport { InlineField, InlineFieldRow, InputActionMeta, Select } from '@grafana/ui';\n\nimport { TempoDatasource } from './datasource';\nimport { OPTIONS_LIMIT } from './language_provider';\n\nexport enum TempoVariableQueryType {\n  LabelNames,\n  LabelValues,\n}\n\nexport interface TempoVariableQuery extends DataQuery {\n  type: TempoVariableQueryType;\n  label?: string;\n  stream?: string;\n}\n\nconst variableOptions = [\n  { label: 'Label names', value: TempoVariableQueryType.LabelNames },\n  { label: 'Label values', value: TempoVariableQueryType.LabelValues },\n];\n\nconst refId = 'TempoDatasourceVariableQueryEditor-VariableQuery';\n\nexport type TempoVariableQueryEditorProps = {\n  onChange: (value: TempoVariableQuery) => void;\n  query: TempoVariableQuery;\n  datasource: TempoDatasource;\n};\n\nexport const TempoVariableQueryEditor = ({ onChange, query, datasource }: TempoVariableQueryEditorProps) => {\n  const [label, setLabel] = useState(query.label || '');\n  const [type, setType] = useState<number | undefined>(query.type);\n  const [labelOptions, setLabelOptions] = useState<Array<SelectableValue<string>>>([]);\n  const [labelQuery, setLabelQuery] = useState<string>('');\n\n  useEffect(() => {\n    if (type === TempoVariableQueryType.LabelValues) {\n      datasource.labelNamesQuery().then((labelNames: Array<{ text: string }>) => {\n        setLabelOptions(labelNames.map(({ text }) => ({ label: text, value: text })));\n      });\n    }\n  }, [datasource, query, type]);\n\n  const options = useMemo(() => {\n    if (labelQuery.length === 0) {\n      return labelOptions.slice(0, OPTIONS_LIMIT);\n    }\n\n    const queryLowerCase = labelQuery.toLowerCase();\n    return labelOptions\n      .filter((tag) => {\n        if (tag.value && tag.value.length > 0) {\n          return tag.value.toLowerCase().includes(queryLowerCase);\n        }\n        return false;\n      })\n      .slice(0, OPTIONS_LIMIT);\n  }, [labelQuery, labelOptions]);\n\n  const onQueryTypeChange = (newType: SelectableValue<TempoVariableQueryType>) => {\n    setType(newType.value);\n    if (newType.value !== undefined) {\n      onChange({\n        type: newType.value,\n        label,\n        refId,\n      });\n    }\n  };\n\n  const onLabelChange = (newLabel: SelectableValue<string>) => {\n    const newLabelValue = newLabel.value || '';\n    setLabel(newLabelValue);\n    if (type !== undefined) {\n      onChange({\n        type,\n        label: newLabelValue,\n        refId,\n      });\n    }\n  };\n\n  const handleBlur = () => {\n    if (type !== undefined) {\n      onChange({ type, label, refId });\n    }\n  };\n\n  return (\n    <>\n      <InlineFieldRow>\n        <InlineField label=\"Query type\" labelWidth={20}>\n          <Select\n            aria-label=\"Query type\"\n            onChange={onQueryTypeChange}\n            onBlur={handleBlur}\n            value={type}\n            options={variableOptions}\n            width={32}\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      {type === TempoVariableQueryType.LabelValues && (\n        <InlineFieldRow>\n          <InlineField label=\"Label\" labelWidth={20}>\n            <Select\n              aria-label=\"Label\"\n              onChange={onLabelChange}\n              onBlur={handleBlur}\n              onInputChange={(value: string, { action }: InputActionMeta) => {\n                if (action === 'input-change') {\n                  setLabelQuery(value);\n                }\n              }}\n              onCloseMenu={() => setLabelQuery('')}\n              value={{ label, value: label }}\n              options={options}\n              width={32}\n              allowCustomValue\n              virtualized\n            />\n          </InlineField>\n        </InlineFieldRow>\n      )}\n    </>\n  );\n};\n","import {\n  DataFrame,\n  DataFrameView,\n  DataQueryResponse,\n  FieldColorModeId,\n  FieldDTO,\n  MutableDataFrame,\n  NodeGraphDataFrameFieldNames as Fields,\n  TimeRange,\n  FieldType,\n  toDataFrame,\n} from '@grafana/data';\n\nexport const secondsMetric = 'traces_service_graph_request_server_seconds_sum';\nexport const totalsMetric = 'traces_service_graph_request_total';\nexport const failedMetric = 'traces_service_graph_request_failed_total';\nexport const histogramMetric = 'traces_service_graph_request_server_seconds_bucket';\n\nexport const rateMetric = {\n  expr: 'sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name)',\n  topk: 5,\n  params: [],\n};\nexport const errorRateMetric = {\n  expr: 'sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name)',\n  topk: 5,\n  params: ['status_code=\"STATUS_CODE_ERROR\"'],\n};\nexport const durationMetric = {\n  expr: 'histogram_quantile(.9, sum(rate(traces_spanmetrics_latency_bucket{}[$__range])) by (le))',\n  params: [],\n};\nexport const defaultTableFilter = 'span_kind=\"SPAN_KIND_SERVER\"';\n\nexport const serviceMapMetrics = [\n  secondsMetric,\n  totalsMetric,\n  failedMetric,\n  histogramMetric,\n  // These are used for debugging the tempo collection so probably not useful for service map right now.\n  // 'traces_service_graph_unpaired_spans_total',\n  // 'traces_service_graph_untagged_spans_total',\n];\n\n/**\n * Map response from multiple prometheus metrics into a node graph data frames with nodes and edges.\n * @param responses\n * @param range\n */\nexport function mapPromMetricsToServiceMap(\n  responses: DataQueryResponse[],\n  range: TimeRange\n): { nodes: DataFrame; edges: DataFrame } {\n  const frames = getMetricFrames(responses);\n\n  // First just collect data from the metrics into a map with nodes and edges as keys\n  const nodesMap: Record<string, NodeObject> = {};\n  const edgesMap: Record<string, EdgeObject> = {};\n  // At this moment we don't have any error/success or other counts so we just use these 2\n  collectMetricData(frames[totalsMetric], 'total', totalsMetric, nodesMap, edgesMap);\n  collectMetricData(frames[secondsMetric], 'seconds', secondsMetric, nodesMap, edgesMap);\n  collectMetricData(frames[failedMetric], 'failed', failedMetric, nodesMap, edgesMap);\n\n  collectIsInstrumented(frames[`${totalsMetric}_labels`], nodesMap);\n  collectIsInstrumented(frames[`${secondsMetric}_labels`], nodesMap);\n  collectIsInstrumented(frames[`${failedMetric}_labels`], nodesMap);\n\n  return convertToDataFrames(nodesMap, edgesMap, range);\n}\n\nfunction createServiceMapDataFrames() {\n  function createDF(name: string, fields: FieldDTO[]) {\n    return new MutableDataFrame({ name, fields, meta: { preferredVisualisationType: 'nodeGraph' } });\n  }\n\n  const nodes = createDF('Nodes', [\n    { name: Fields.id, type: FieldType.string, values: [] },\n    { name: Fields.title, type: FieldType.string, config: { displayName: 'Service name' }, values: [] },\n    { name: Fields.subTitle, type: FieldType.string, config: { displayName: 'Service namespace' }, values: [] },\n    {\n      name: Fields.mainStat,\n      type: FieldType.number,\n      config: { unit: 'ms/r', displayName: 'Average response time' },\n      values: [],\n    },\n    {\n      name: Fields.secondaryStat,\n      type: FieldType.number,\n      config: { unit: 'r/sec', displayName: 'Requests per second' },\n      values: [],\n    },\n    {\n      name: Fields.arc + 'success',\n      type: FieldType.number,\n      config: { displayName: 'Success', color: { fixedColor: 'green', mode: FieldColorModeId.Fixed } },\n      values: [],\n    },\n    {\n      name: Fields.arc + 'failed',\n      type: FieldType.number,\n      config: { displayName: 'Failed', color: { fixedColor: 'red', mode: FieldColorModeId.Fixed } },\n      values: [],\n    },\n    {\n      name: Fields.isInstrumented,\n      type: FieldType.boolean,\n      values: [],\n    },\n  ]);\n  const edges = createDF('Edges', [\n    { name: Fields.id, type: FieldType.string, values: [] },\n    { name: Fields.source, type: FieldType.string, values: [] },\n    { name: AdditionalEdgeFields.sourceName, type: FieldType.string, values: [] },\n    { name: AdditionalEdgeFields.sourceNamespace, type: FieldType.string, values: [] },\n    { name: Fields.target, type: FieldType.string, values: [] },\n    { name: AdditionalEdgeFields.targetName, type: FieldType.string, values: [] },\n    { name: AdditionalEdgeFields.targetNamespace, type: FieldType.string, values: [] },\n    {\n      name: Fields.mainStat,\n      type: FieldType.number,\n      config: { unit: 'ms/r', displayName: 'Average response time' },\n      values: [],\n    },\n    {\n      name: Fields.secondaryStat,\n      type: FieldType.number,\n      config: { unit: 'r/sec', displayName: 'Requests per second' },\n      values: [],\n    },\n  ]);\n\n  return [nodes, edges];\n}\n\n/**\n * Group frames from response based on ref id which is set the same as the metric name so we know which metric is where\n * and also put it into DataFrameView so it's easier to work with.\n * @param responses\n */\nfunction getMetricFrames(responses: DataQueryResponse[]): Record<string, DataFrameView> {\n  return (responses[0]?.data || []).reduce<Record<string, DataFrameView>>((acc, frameDTO) => {\n    const frame = toDataFrame(frameDTO);\n    acc[frame.refId ?? 'A'] = new DataFrameView(frame);\n    return acc;\n  }, {});\n}\n\ntype ServiceMapStatistics = {\n  total?: number;\n  seconds?: number;\n  failed?: number;\n};\n\ntype NodeObject = ServiceMapStatistics & {\n  name: string;\n  namespace?: string;\n  isInstrumented?: boolean;\n};\n\ntype EdgeObject = ServiceMapStatistics & {\n  source: string;\n  sourceName: string;\n  sourceNamespace: string;\n  target: string;\n  targetName: string;\n  targetNamespace: string;\n};\n\n// These fields are not necessary for rendering, so not available from the Fields enum\n// Will be used for linking when namespace is present\nenum AdditionalEdgeFields {\n  sourceName = 'sourceName',\n  sourceNamespace = 'sourceNamespace',\n  targetName = 'targetName',\n  targetNamespace = 'targetNamespace',\n}\n\n/**\n * Collect data from a metric into a map of nodes and edges. The metric data is modeled as counts of metric per edge\n * which is a pair of client-server nodes. This means we convert each row of the metric 1-1 to edges and than we assign\n * the metric also to server. We count the stats for server only as we show requests/transactions that particular node\n * processed not those which it generated and other stats like average transaction time then stem from that.\n * @param frame\n * @param stat\n * @param metric\n * @param nodesMap\n * @param edgesMap\n */\nfunction collectMetricData(\n  frame: DataFrameView | undefined,\n  stat: keyof ServiceMapStatistics,\n  metric: string,\n  nodesMap: Record<string, NodeObject>,\n  edgesMap: Record<string, EdgeObject>\n) {\n  if (!frame) {\n    return;\n  }\n\n  // The name of the value column is in this format\n  // Improvement: figure out if it can be changed\n  const valueName = `Value #${metric}`;\n\n  for (let i = 0; i < frame.length; i++) {\n    const row = frame.get(i);\n    const serverId = row.server_service_namespace ? `${row.server_service_namespace}/${row.server}` : row.server;\n    const clientId = row.client_service_namespace ? `${row.client_service_namespace}/${row.client}` : row.client;\n\n    const edgeId = `${clientId}_${serverId}`;\n\n    if (!edgesMap[edgeId]) {\n      // Create edge as it does not exist yet\n      edgesMap[edgeId] = {\n        target: serverId,\n        targetName: row.server,\n        targetNamespace: row.server_service_namespace,\n        source: clientId,\n        sourceName: row.client,\n        sourceNamespace: row.client_service_namespace,\n        [stat]: row[valueName],\n      };\n    } else {\n      // Add stat to edge\n      // We are adding the values if exists but that should not happen in general as there should be single row for\n      // an edge.\n      edgesMap[edgeId][stat] = (edgesMap[edgeId][stat] || 0) + row[valueName];\n    }\n\n    if (!nodesMap[serverId]) {\n      // Create node for server\n      nodesMap[serverId] = {\n        name: row.server,\n        namespace: row.server_service_namespace,\n        [stat]: row[valueName],\n      };\n    } else {\n      // Add stat to server node. Sum up values if there are multiple edges targeting this server node.\n      nodesMap[serverId][stat] = (nodesMap[serverId][stat] || 0) + row[valueName];\n    }\n\n    if (!nodesMap[clientId]) {\n      // Create the client node but don't add the stat as edge stats are attributed to the server node. This means for\n      // example that the number of requests in a node show how many requests it handled not how many it generated.\n      nodesMap[clientId] = {\n        name: row.client,\n        namespace: row.client_service_namespace,\n        [stat]: 0,\n      };\n    }\n  }\n}\n\nfunction collectIsInstrumented(frame: DataFrameView | undefined, nodesMap: Record<string, NodeObject>) {\n  if (!frame) {\n    return;\n  }\n\n  for (let i = 0; i < frame.length; i++) {\n    const row = frame.get(i);\n    const serverId = row.server_service_namespace ? `${row.server_service_namespace}/${row.server}` : row.server;\n\n    if (nodesMap[serverId] && nodesMap[serverId].isInstrumented !== true) {\n      nodesMap[serverId].isInstrumented = row.connection_type === '' || row.connection_type === 'messaging_system';\n    }\n  }\n}\n\nfunction convertToDataFrames(\n  nodesMap: Record<string, NodeObject>,\n  edgesMap: Record<string, EdgeObject>,\n  range: TimeRange\n): { nodes: DataFrame; edges: DataFrame } {\n  const [nodes, edges] = createServiceMapDataFrames();\n  for (const nodeId of Object.keys(nodesMap)) {\n    const node = nodesMap[nodeId];\n    nodes.add({\n      [Fields.id]: nodeId,\n      [Fields.title]: node.name,\n      [Fields.subTitle]: node.namespace,\n      // NaN will not be shown in the node graph. This happens for a root client node which did not process\n      // any requests itself.\n      [Fields.mainStat]: node.total ? (node.seconds! / node.total) * 1000 : Number.NaN, // Average response time\n      [Fields.secondaryStat]: node.total ? Math.round(node.total * 100) / 100 : Number.NaN, // Request per second (to 2 decimals)\n      [Fields.arc + 'success']: node.total ? (node.total - Math.min(node.failed || 0, node.total)) / node.total : 1,\n      [Fields.arc + 'failed']: node.total ? Math.min(node.failed || 0, node.total) / node.total : 0,\n      [Fields.isInstrumented]: node.isInstrumented ?? true,\n    });\n  }\n  for (const edgeId of Object.keys(edgesMap)) {\n    const edge = edgesMap[edgeId];\n    edges.add({\n      [Fields.id]: edgeId,\n      [Fields.source]: edge.source,\n      [AdditionalEdgeFields.sourceName]: edge.sourceName,\n      [AdditionalEdgeFields.sourceNamespace]: edge.sourceNamespace,\n      [Fields.target]: edge.target,\n      [AdditionalEdgeFields.targetName]: edge.targetName,\n      [AdditionalEdgeFields.targetNamespace]: edge.targetNamespace,\n      [Fields.mainStat]: edge.total ? (edge.seconds! / edge.total) * 1000 : Number.NaN, // Average response time\n      [Fields.secondaryStat]: edge.total ? Math.round(edge.total * 100) / 100 : Number.NaN, // Request per second (to 2 decimals)\n    });\n  }\n\n  return { nodes, edges };\n}\n","import {\n  createDataFrame,\n  DataSourceInstanceSettings,\n  FieldDTO,\n  FieldType,\n  MutableDataFrame,\n  sortDataFrame,\n} from '@grafana/data';\n\nexport type MetricsSummary = {\n  spanCount: string;\n  errorSpanCount?: string;\n  p50: string;\n  p90: string;\n  p95: string;\n  p99: string;\n  series: Series[];\n};\n\ntype Series = {\n  key: string;\n  value: {\n    type: number;\n    n?: number;\n    f?: number;\n    s?: string;\n    b?: string;\n    d?: string;\n    status?: number;\n    kind?: number;\n  };\n};\n\ntype MetricsData = {\n  spanCount: number;\n  errorPercentage: number | string;\n  p50: number;\n  p90: number;\n  p95: number;\n  p99: number;\n  [key: string]: string | number;\n};\n\nexport function createTableFrameFromMetricsSummaryQuery(\n  data: MetricsSummary[],\n  targetQuery: string,\n  instanceSettings: DataSourceInstanceSettings\n) {\n  let frame;\n\n  if (!data.length) {\n    return emptyResponse;\n  }\n\n  const dynamicMetrics: Record<string, FieldDTO> = {};\n  data.forEach((res: MetricsSummary) => {\n    const configQuery = getConfigQuery(res.series, targetQuery);\n    res.series.forEach((series: Series) => {\n      dynamicMetrics[series.key] = {\n        name: `${series.key}`,\n        type: FieldType.string,\n        config: getConfig(series, configQuery, instanceSettings),\n        values: [],\n      };\n    });\n  });\n\n  frame = createDataFrame({\n    name: 'Metrics Summary',\n    refId: 'metrics-summary',\n    fields: [\n      ...Object.values(dynamicMetrics).sort((a, b) => a.name.localeCompare(b.name)),\n      {\n        name: 'spanCount',\n        type: FieldType.number,\n        config: { displayNameFromDS: 'Span count', custom: { width: 150 } },\n      },\n      {\n        name: 'errorPercentage',\n        type: FieldType.number,\n        config: { displayNameFromDS: 'Error', unit: 'percent', custom: { width: 150 } },\n      },\n      getPercentileRow('p50'),\n      getPercentileRow('p90'),\n      getPercentileRow('p95'),\n      getPercentileRow('p99'),\n    ],\n    meta: {\n      preferredVisualisationType: 'table',\n    },\n  });\n\n  const metricsData = data.map(transformToMetricsData);\n  frame.length = metricsData.length;\n  for (const trace of metricsData) {\n    for (const field of frame.fields) {\n      field.values.push(trace[field.name]);\n    }\n  }\n  frame = sortDataFrame(frame, 0);\n\n  return [frame];\n}\n\nexport const transformToMetricsData = (data: MetricsSummary) => {\n  const errorPercentage = data.errorSpanCount\n    ? (getNumberForMetric(data.errorSpanCount) / getNumberForMetric(data.spanCount)) * 100\n    : '0%';\n\n  const metricsData: MetricsData = {\n    spanCount: getNumberForMetric(data.spanCount),\n    errorPercentage,\n    p50: getNumberForMetric(data.p50),\n    p90: getNumberForMetric(data.p90),\n    p95: getNumberForMetric(data.p95),\n    p99: getNumberForMetric(data.p99),\n  };\n\n  data.series.forEach((series: Series) => {\n    metricsData[`${series.key}`] = getMetricValue(series) || '';\n  });\n\n  return metricsData;\n};\n\nexport const getConfigQuery = (series: Series[], targetQuery: string) => {\n  const queryParts = series.map((x: Series) => {\n    const isNumber = x.value.type === 3 || x.value.type === 4;\n    const isIntrinsic = x.value.type === 8 || x.value.type === 9;\n    const surround = isNumber || isIntrinsic ? '' : '\"';\n    return `${x.key}=${surround}` + '${__data.fields[\"' + x.key + '\"]}' + `${surround}`;\n  });\n\n  let configQuery = '';\n  const closingBracketIndex = targetQuery.indexOf('}');\n\n  if (closingBracketIndex !== -1) {\n    const queryAfterClosingBracket = targetQuery.substring(closingBracketIndex + 1);\n    configQuery = targetQuery.substring(0, closingBracketIndex);\n    if (queryParts.length > 0) {\n      configQuery += targetQuery.replace(/\\s/g, '').includes('{}') ? '' : ' && ';\n      configQuery += `${queryParts.join(' && ')}`;\n      configQuery += `}`;\n    }\n    configQuery += `${queryAfterClosingBracket}`;\n  } else {\n    configQuery = `{${queryParts.join(' && ')}} | ${targetQuery}`;\n  }\n\n  return configQuery;\n};\n\nconst getConfig = (series: Series, query: string, instanceSettings: DataSourceInstanceSettings) => {\n  const commonConfig = {\n    displayNameFromDS: series.key,\n    noValue: '<no value>',\n    links: [\n      {\n        title: 'Query in explore',\n        url: '',\n        internal: {\n          datasourceUid: instanceSettings.uid,\n          datasourceName: instanceSettings.name,\n          query: {\n            query,\n            queryType: 'traceql',\n          },\n        },\n      },\n    ],\n  };\n\n  if (series.value.type === 7) {\n    return {\n      ...commonConfig,\n      unit: 'ns',\n    };\n  }\n  return { ...commonConfig };\n};\n\nconst NO_VALUE = '';\n\nconst getMetricValue = (series: Series) => {\n  if (!series.value.type) {\n    return NO_VALUE;\n  }\n\n  switch (series.value.type) {\n    case 3:\n      return series.value.n;\n    case 4:\n      return series.value.f;\n    case 5:\n      return series.value.s;\n    case 6:\n      return series.value.b;\n    case 7:\n      return series.value.d;\n    case 8:\n      return getSpanStatusCode(series.value.status);\n    case 9:\n      return getSpanKind(series.value.kind);\n    default:\n      return NO_VALUE;\n  }\n};\n\n// Values set according to Tempo enum: https://github.com/grafana/tempo/blob/main/pkg/traceql/enum_statics.go\nconst getSpanStatusCode = (statusCode: number | undefined) => {\n  if (!statusCode) {\n    return NO_VALUE;\n  }\n\n  switch (statusCode) {\n    case 0:\n      return 'error';\n    case 1:\n      return 'ok';\n    default:\n      return 'unset';\n  }\n};\n\n// Values set according to Tempo enum: https://github.com/grafana/tempo/blob/main/pkg/traceql/enum_statics.go\nconst getSpanKind = (kind: number | undefined) => {\n  if (!kind) {\n    return NO_VALUE;\n  }\n\n  switch (kind) {\n    case 1:\n      return 'internal';\n    case 2:\n      return 'client';\n    case 3:\n      return 'server';\n    case 4:\n      return 'producer';\n    case 5:\n      return 'consumer';\n    default:\n      return 'unspecified';\n  }\n};\n\nconst getPercentileRow = (name: string) => {\n  return {\n    name: name,\n    type: FieldType.number,\n    config: {\n      displayNameFromDS: name,\n      unit: 'ns',\n      custom: {\n        width: 150,\n      },\n    },\n  };\n};\n\nconst getNumberForMetric = (metric: string) => {\n  const number = parseInt(metric, 10);\n  return isNaN(number) ? 0 : number;\n};\n\nexport const emptyResponse = new MutableDataFrame({\n  name: 'Metrics Summary',\n  refId: 'metrics-summary',\n  fields: [],\n  meta: {\n    preferredVisualisationType: 'table',\n  },\n});\n","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Creates a const map from the given values\n * @param values - An array of values to be used as keys and values in the map.\n * @returns A populated version of the map with the values and keys derived from the values.\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function createConstMap(values) {\n    // eslint-disable-next-line prefer-const, @typescript-eslint/no-explicit-any\n    var res = {};\n    var len = values.length;\n    for (var lp = 0; lp < len; lp++) {\n        var val = values[lp];\n        if (val) {\n            res[String(val).toUpperCase().replace(/[-.]/g, '_')] = val;\n        }\n    }\n    return res;\n}\n//# sourceMappingURL=utils.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createConstMap } from '../internal/utils';\n//----------------------------------------------------------------------------------------------------------\n// DO NOT EDIT, this is an Auto-generated file from scripts/semconv/templates//templates/SemanticAttributes.ts.j2\n//----------------------------------------------------------------------------------------------------------\n//----------------------------------------------------------------------------------------------------------\n// Constant values for SemanticResourceAttributes\n//----------------------------------------------------------------------------------------------------------\n// Temporary local constants to assign to the individual exports and the namespaced version\n// Required to avoid the namespace exports using the unminifiable export names for some package types\nvar TMP_CLOUD_PROVIDER = 'cloud.provider';\nvar TMP_CLOUD_ACCOUNT_ID = 'cloud.account.id';\nvar TMP_CLOUD_REGION = 'cloud.region';\nvar TMP_CLOUD_AVAILABILITY_ZONE = 'cloud.availability_zone';\nvar TMP_CLOUD_PLATFORM = 'cloud.platform';\nvar TMP_AWS_ECS_CONTAINER_ARN = 'aws.ecs.container.arn';\nvar TMP_AWS_ECS_CLUSTER_ARN = 'aws.ecs.cluster.arn';\nvar TMP_AWS_ECS_LAUNCHTYPE = 'aws.ecs.launchtype';\nvar TMP_AWS_ECS_TASK_ARN = 'aws.ecs.task.arn';\nvar TMP_AWS_ECS_TASK_FAMILY = 'aws.ecs.task.family';\nvar TMP_AWS_ECS_TASK_REVISION = 'aws.ecs.task.revision';\nvar TMP_AWS_EKS_CLUSTER_ARN = 'aws.eks.cluster.arn';\nvar TMP_AWS_LOG_GROUP_NAMES = 'aws.log.group.names';\nvar TMP_AWS_LOG_GROUP_ARNS = 'aws.log.group.arns';\nvar TMP_AWS_LOG_STREAM_NAMES = 'aws.log.stream.names';\nvar TMP_AWS_LOG_STREAM_ARNS = 'aws.log.stream.arns';\nvar TMP_CONTAINER_NAME = 'container.name';\nvar TMP_CONTAINER_ID = 'container.id';\nvar TMP_CONTAINER_RUNTIME = 'container.runtime';\nvar TMP_CONTAINER_IMAGE_NAME = 'container.image.name';\nvar TMP_CONTAINER_IMAGE_TAG = 'container.image.tag';\nvar TMP_DEPLOYMENT_ENVIRONMENT = 'deployment.environment';\nvar TMP_DEVICE_ID = 'device.id';\nvar TMP_DEVICE_MODEL_IDENTIFIER = 'device.model.identifier';\nvar TMP_DEVICE_MODEL_NAME = 'device.model.name';\nvar TMP_FAAS_NAME = 'faas.name';\nvar TMP_FAAS_ID = 'faas.id';\nvar TMP_FAAS_VERSION = 'faas.version';\nvar TMP_FAAS_INSTANCE = 'faas.instance';\nvar TMP_FAAS_MAX_MEMORY = 'faas.max_memory';\nvar TMP_HOST_ID = 'host.id';\nvar TMP_HOST_NAME = 'host.name';\nvar TMP_HOST_TYPE = 'host.type';\nvar TMP_HOST_ARCH = 'host.arch';\nvar TMP_HOST_IMAGE_NAME = 'host.image.name';\nvar TMP_HOST_IMAGE_ID = 'host.image.id';\nvar TMP_HOST_IMAGE_VERSION = 'host.image.version';\nvar TMP_K8S_CLUSTER_NAME = 'k8s.cluster.name';\nvar TMP_K8S_NODE_NAME = 'k8s.node.name';\nvar TMP_K8S_NODE_UID = 'k8s.node.uid';\nvar TMP_K8S_NAMESPACE_NAME = 'k8s.namespace.name';\nvar TMP_K8S_POD_UID = 'k8s.pod.uid';\nvar TMP_K8S_POD_NAME = 'k8s.pod.name';\nvar TMP_K8S_CONTAINER_NAME = 'k8s.container.name';\nvar TMP_K8S_REPLICASET_UID = 'k8s.replicaset.uid';\nvar TMP_K8S_REPLICASET_NAME = 'k8s.replicaset.name';\nvar TMP_K8S_DEPLOYMENT_UID = 'k8s.deployment.uid';\nvar TMP_K8S_DEPLOYMENT_NAME = 'k8s.deployment.name';\nvar TMP_K8S_STATEFULSET_UID = 'k8s.statefulset.uid';\nvar TMP_K8S_STATEFULSET_NAME = 'k8s.statefulset.name';\nvar TMP_K8S_DAEMONSET_UID = 'k8s.daemonset.uid';\nvar TMP_K8S_DAEMONSET_NAME = 'k8s.daemonset.name';\nvar TMP_K8S_JOB_UID = 'k8s.job.uid';\nvar TMP_K8S_JOB_NAME = 'k8s.job.name';\nvar TMP_K8S_CRONJOB_UID = 'k8s.cronjob.uid';\nvar TMP_K8S_CRONJOB_NAME = 'k8s.cronjob.name';\nvar TMP_OS_TYPE = 'os.type';\nvar TMP_OS_DESCRIPTION = 'os.description';\nvar TMP_OS_NAME = 'os.name';\nvar TMP_OS_VERSION = 'os.version';\nvar TMP_PROCESS_PID = 'process.pid';\nvar TMP_PROCESS_EXECUTABLE_NAME = 'process.executable.name';\nvar TMP_PROCESS_EXECUTABLE_PATH = 'process.executable.path';\nvar TMP_PROCESS_COMMAND = 'process.command';\nvar TMP_PROCESS_COMMAND_LINE = 'process.command_line';\nvar TMP_PROCESS_COMMAND_ARGS = 'process.command_args';\nvar TMP_PROCESS_OWNER = 'process.owner';\nvar TMP_PROCESS_RUNTIME_NAME = 'process.runtime.name';\nvar TMP_PROCESS_RUNTIME_VERSION = 'process.runtime.version';\nvar TMP_PROCESS_RUNTIME_DESCRIPTION = 'process.runtime.description';\nvar TMP_SERVICE_NAME = 'service.name';\nvar TMP_SERVICE_NAMESPACE = 'service.namespace';\nvar TMP_SERVICE_INSTANCE_ID = 'service.instance.id';\nvar TMP_SERVICE_VERSION = 'service.version';\nvar TMP_TELEMETRY_SDK_NAME = 'telemetry.sdk.name';\nvar TMP_TELEMETRY_SDK_LANGUAGE = 'telemetry.sdk.language';\nvar TMP_TELEMETRY_SDK_VERSION = 'telemetry.sdk.version';\nvar TMP_TELEMETRY_AUTO_VERSION = 'telemetry.auto.version';\nvar TMP_WEBENGINE_NAME = 'webengine.name';\nvar TMP_WEBENGINE_VERSION = 'webengine.version';\nvar TMP_WEBENGINE_DESCRIPTION = 'webengine.description';\n/**\n * Name of the cloud provider.\n *\n * @deprecated Use ATTR_CLOUD_PROVIDER in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_CLOUD_PROVIDER = TMP_CLOUD_PROVIDER;\n/**\n * The cloud account ID the resource is assigned to.\n *\n * @deprecated Use ATTR_CLOUD_ACCOUNT_ID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_CLOUD_ACCOUNT_ID = TMP_CLOUD_ACCOUNT_ID;\n/**\n * The geographical region the resource is running. Refer to your provider&#39;s docs to see the available regions, for example [Alibaba Cloud regions](https://www.alibabacloud.com/help/doc-detail/40654.htm), [AWS regions](https://aws.amazon.com/about-aws/global-infrastructure/regions_az/), [Azure regions](https://azure.microsoft.com/en-us/global-infrastructure/geographies/), or [Google Cloud regions](https://cloud.google.com/about/locations).\n *\n * @deprecated Use ATTR_CLOUD_REGION in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_CLOUD_REGION = TMP_CLOUD_REGION;\n/**\n * Cloud regions often have multiple, isolated locations known as zones to increase availability. Availability zone represents the zone where the resource is running.\n *\n * Note: Availability zones are called &#34;zones&#34; on Alibaba Cloud and Google Cloud.\n *\n * @deprecated Use ATTR_CLOUD_AVAILABILITY_ZONE in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_CLOUD_AVAILABILITY_ZONE = TMP_CLOUD_AVAILABILITY_ZONE;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use ATTR_CLOUD_PLATFORM in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_CLOUD_PLATFORM = TMP_CLOUD_PLATFORM;\n/**\n * The Amazon Resource Name (ARN) of an [ECS container instance](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ECS_instances.html).\n *\n * @deprecated Use ATTR_AWS_ECS_CONTAINER_ARN in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_AWS_ECS_CONTAINER_ARN = TMP_AWS_ECS_CONTAINER_ARN;\n/**\n * The ARN of an [ECS cluster](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/clusters.html).\n *\n * @deprecated Use ATTR_AWS_ECS_CLUSTER_ARN in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_AWS_ECS_CLUSTER_ARN = TMP_AWS_ECS_CLUSTER_ARN;\n/**\n * The [launch type](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/launch_types.html) for an ECS task.\n *\n * @deprecated Use ATTR_AWS_ECS_LAUNCHTYPE in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_AWS_ECS_LAUNCHTYPE = TMP_AWS_ECS_LAUNCHTYPE;\n/**\n * The ARN of an [ECS task definition](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definitions.html).\n *\n * @deprecated Use ATTR_AWS_ECS_TASK_ARN in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_AWS_ECS_TASK_ARN = TMP_AWS_ECS_TASK_ARN;\n/**\n * The task definition family this task definition is a member of.\n *\n * @deprecated Use ATTR_AWS_ECS_TASK_FAMILY in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_AWS_ECS_TASK_FAMILY = TMP_AWS_ECS_TASK_FAMILY;\n/**\n * The revision for this task definition.\n *\n * @deprecated Use ATTR_AWS_ECS_TASK_REVISION in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_AWS_ECS_TASK_REVISION = TMP_AWS_ECS_TASK_REVISION;\n/**\n * The ARN of an EKS cluster.\n *\n * @deprecated Use ATTR_AWS_EKS_CLUSTER_ARN in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_AWS_EKS_CLUSTER_ARN = TMP_AWS_EKS_CLUSTER_ARN;\n/**\n * The name(s) of the AWS log group(s) an application is writing to.\n *\n * Note: Multiple log groups must be supported for cases like multi-container applications, where a single application has sidecar containers, and each write to their own log group.\n *\n * @deprecated Use ATTR_AWS_LOG_GROUP_NAMES in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_AWS_LOG_GROUP_NAMES = TMP_AWS_LOG_GROUP_NAMES;\n/**\n * The Amazon Resource Name(s) (ARN) of the AWS log group(s).\n *\n * Note: See the [log group ARN format documentation](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/iam-access-control-overview-cwl.html#CWL_ARN_Format).\n *\n * @deprecated Use ATTR_AWS_LOG_GROUP_ARNS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_AWS_LOG_GROUP_ARNS = TMP_AWS_LOG_GROUP_ARNS;\n/**\n * The name(s) of the AWS log stream(s) an application is writing to.\n *\n * @deprecated Use ATTR_AWS_LOG_STREAM_NAMES in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_AWS_LOG_STREAM_NAMES = TMP_AWS_LOG_STREAM_NAMES;\n/**\n * The ARN(s) of the AWS log stream(s).\n *\n * Note: See the [log stream ARN format documentation](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/iam-access-control-overview-cwl.html#CWL_ARN_Format). One log group can contain several log streams, so these ARNs necessarily identify both a log group and a log stream.\n *\n * @deprecated Use ATTR_AWS_LOG_STREAM_ARNS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_AWS_LOG_STREAM_ARNS = TMP_AWS_LOG_STREAM_ARNS;\n/**\n * Container name.\n *\n * @deprecated Use ATTR_CONTAINER_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_CONTAINER_NAME = TMP_CONTAINER_NAME;\n/**\n * Container ID. Usually a UUID, as for example used to [identify Docker containers](https://docs.docker.com/engine/reference/run/#container-identification). The UUID might be abbreviated.\n *\n * @deprecated Use ATTR_CONTAINER_ID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_CONTAINER_ID = TMP_CONTAINER_ID;\n/**\n * The container runtime managing this container.\n *\n * @deprecated Use ATTR_CONTAINER_RUNTIME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_CONTAINER_RUNTIME = TMP_CONTAINER_RUNTIME;\n/**\n * Name of the image the container was built on.\n *\n * @deprecated Use ATTR_CONTAINER_IMAGE_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_CONTAINER_IMAGE_NAME = TMP_CONTAINER_IMAGE_NAME;\n/**\n * Container image tag.\n *\n * @deprecated Use ATTR_CONTAINER_IMAGE_TAGS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_CONTAINER_IMAGE_TAG = TMP_CONTAINER_IMAGE_TAG;\n/**\n * Name of the [deployment environment](https://en.wikipedia.org/wiki/Deployment_environment) (aka deployment tier).\n *\n * @deprecated Use ATTR_DEPLOYMENT_ENVIRONMENT in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_DEPLOYMENT_ENVIRONMENT = TMP_DEPLOYMENT_ENVIRONMENT;\n/**\n * A unique identifier representing the device.\n *\n * Note: The device identifier MUST only be defined using the values outlined below. This value is not an advertising identifier and MUST NOT be used as such. On iOS (Swift or Objective-C), this value MUST be equal to the [vendor identifier](https://developer.apple.com/documentation/uikit/uidevice/1620059-identifierforvendor). On Android (Java or Kotlin), this value MUST be equal to the Firebase Installation ID or a globally unique UUID which is persisted across sessions in your application. More information can be found [here](https://developer.android.com/training/articles/user-data-ids) on best practices and exact implementation details. Caution should be taken when storing personal data or anything which can identify a user. GDPR and data protection laws may apply, ensure you do your own due diligence.\n *\n * @deprecated Use ATTR_DEVICE_ID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_DEVICE_ID = TMP_DEVICE_ID;\n/**\n * The model identifier for the device.\n *\n * Note: It&#39;s recommended this value represents a machine readable version of the model identifier rather than the market or consumer-friendly name of the device.\n *\n * @deprecated Use ATTR_DEVICE_MODEL_IDENTIFIER in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_DEVICE_MODEL_IDENTIFIER = TMP_DEVICE_MODEL_IDENTIFIER;\n/**\n * The marketing name for the device model.\n *\n * Note: It&#39;s recommended this value represents a human readable version of the device model rather than a machine readable alternative.\n *\n * @deprecated Use ATTR_DEVICE_MODEL_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_DEVICE_MODEL_NAME = TMP_DEVICE_MODEL_NAME;\n/**\n * The name of the single function that this runtime instance executes.\n *\n * Note: This is the name of the function as configured/deployed on the FaaS platform and is usually different from the name of the callback function (which may be stored in the [`code.namespace`/`code.function`](../../trace/semantic_conventions/span-general.md#source-code-attributes) span attributes).\n *\n * @deprecated Use ATTR_FAAS_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_FAAS_NAME = TMP_FAAS_NAME;\n/**\n* The unique ID of the single function that this runtime instance executes.\n*\n* Note: Depending on the cloud provider, use:\n\n* **AWS Lambda:** The function [ARN](https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html).\nTake care not to use the &#34;invoked ARN&#34; directly but replace any\n[alias suffix](https://docs.aws.amazon.com/lambda/latest/dg/configuration-aliases.html) with the resolved function version, as the same runtime instance may be invokable with multiple\ndifferent aliases.\n* **GCP:** The [URI of the resource](https://cloud.google.com/iam/docs/full-resource-names)\n* **Azure:** The [Fully Qualified Resource ID](https://docs.microsoft.com/en-us/rest/api/resources/resources/get-by-id).\n\nOn some providers, it may not be possible to determine the full ID at startup,\nwhich is why this field cannot be made required. For example, on AWS the account ID\npart of the ARN is not available without calling another AWS API\nwhich may be deemed too slow for a short-running lambda function.\nAs an alternative, consider setting `faas.id` as a span attribute instead.\n*\n* @deprecated Use ATTR_CLOUD_RESOURCE_ID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n*/\nexport var SEMRESATTRS_FAAS_ID = TMP_FAAS_ID;\n/**\n* The immutable version of the function being executed.\n*\n* Note: Depending on the cloud provider and platform, use:\n\n* **AWS Lambda:** The [function version](https://docs.aws.amazon.com/lambda/latest/dg/configuration-versions.html)\n  (an integer represented as a decimal string).\n* **Google Cloud Run:** The [revision](https://cloud.google.com/run/docs/managing/revisions)\n  (i.e., the function name plus the revision suffix).\n* **Google Cloud Functions:** The value of the\n  [`K_REVISION` environment variable](https://cloud.google.com/functions/docs/env-var#runtime_environment_variables_set_automatically).\n* **Azure Functions:** Not applicable. Do not set this attribute.\n*\n* @deprecated Use ATTR_FAAS_VERSION in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n*/\nexport var SEMRESATTRS_FAAS_VERSION = TMP_FAAS_VERSION;\n/**\n * The execution environment ID as a string, that will be potentially reused for other invocations to the same function/function version.\n *\n * Note: * **AWS Lambda:** Use the (full) log stream name.\n *\n * @deprecated Use ATTR_FAAS_INSTANCE in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_FAAS_INSTANCE = TMP_FAAS_INSTANCE;\n/**\n * The amount of memory available to the serverless function in MiB.\n *\n * Note: It&#39;s recommended to set this attribute since e.g. too little memory can easily stop a Java AWS Lambda function from working correctly. On AWS Lambda, the environment variable `AWS_LAMBDA_FUNCTION_MEMORY_SIZE` provides this information.\n *\n * @deprecated Use ATTR_FAAS_MAX_MEMORY in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_FAAS_MAX_MEMORY = TMP_FAAS_MAX_MEMORY;\n/**\n * Unique host ID. For Cloud, this must be the instance_id assigned by the cloud provider.\n *\n * @deprecated Use ATTR_HOST_ID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_HOST_ID = TMP_HOST_ID;\n/**\n * Name of the host. On Unix systems, it may contain what the hostname command returns, or the fully qualified hostname, or another name specified by the user.\n *\n * @deprecated Use ATTR_HOST_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_HOST_NAME = TMP_HOST_NAME;\n/**\n * Type of host. For Cloud, this must be the machine type.\n *\n * @deprecated Use ATTR_HOST_TYPE in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_HOST_TYPE = TMP_HOST_TYPE;\n/**\n * The CPU architecture the host system is running on.\n *\n * @deprecated Use ATTR_HOST_ARCH in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_HOST_ARCH = TMP_HOST_ARCH;\n/**\n * Name of the VM image or OS install the host was instantiated from.\n *\n * @deprecated Use ATTR_HOST_IMAGE_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_HOST_IMAGE_NAME = TMP_HOST_IMAGE_NAME;\n/**\n * VM image ID. For Cloud, this value is from the provider.\n *\n * @deprecated Use ATTR_HOST_IMAGE_ID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_HOST_IMAGE_ID = TMP_HOST_IMAGE_ID;\n/**\n * The version string of the VM image as defined in [Version Attributes](README.md#version-attributes).\n *\n * @deprecated Use ATTR_HOST_IMAGE_VERSION in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_HOST_IMAGE_VERSION = TMP_HOST_IMAGE_VERSION;\n/**\n * The name of the cluster.\n *\n * @deprecated Use ATTR_K8S_CLUSTER_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_CLUSTER_NAME = TMP_K8S_CLUSTER_NAME;\n/**\n * The name of the Node.\n *\n * @deprecated Use ATTR_K8S_NODE_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_NODE_NAME = TMP_K8S_NODE_NAME;\n/**\n * The UID of the Node.\n *\n * @deprecated Use ATTR_K8S_NODE_UID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_NODE_UID = TMP_K8S_NODE_UID;\n/**\n * The name of the namespace that the pod is running in.\n *\n * @deprecated Use ATTR_K8S_NAMESPACE_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_NAMESPACE_NAME = TMP_K8S_NAMESPACE_NAME;\n/**\n * The UID of the Pod.\n *\n * @deprecated Use ATTR_K8S_POD_UID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_POD_UID = TMP_K8S_POD_UID;\n/**\n * The name of the Pod.\n *\n * @deprecated Use ATTR_K8S_POD_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_POD_NAME = TMP_K8S_POD_NAME;\n/**\n * The name of the Container in a Pod template.\n *\n * @deprecated Use ATTR_K8S_CONTAINER_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_CONTAINER_NAME = TMP_K8S_CONTAINER_NAME;\n/**\n * The UID of the ReplicaSet.\n *\n * @deprecated Use ATTR_K8S_REPLICASET_UID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_REPLICASET_UID = TMP_K8S_REPLICASET_UID;\n/**\n * The name of the ReplicaSet.\n *\n * @deprecated Use ATTR_K8S_REPLICASET_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_REPLICASET_NAME = TMP_K8S_REPLICASET_NAME;\n/**\n * The UID of the Deployment.\n *\n * @deprecated Use ATTR_K8S_DEPLOYMENT_UID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_DEPLOYMENT_UID = TMP_K8S_DEPLOYMENT_UID;\n/**\n * The name of the Deployment.\n *\n * @deprecated Use ATTR_K8S_DEPLOYMENT_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_DEPLOYMENT_NAME = TMP_K8S_DEPLOYMENT_NAME;\n/**\n * The UID of the StatefulSet.\n *\n * @deprecated Use ATTR_K8S_STATEFULSET_UID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_STATEFULSET_UID = TMP_K8S_STATEFULSET_UID;\n/**\n * The name of the StatefulSet.\n *\n * @deprecated Use ATTR_K8S_STATEFULSET_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_STATEFULSET_NAME = TMP_K8S_STATEFULSET_NAME;\n/**\n * The UID of the DaemonSet.\n *\n * @deprecated Use ATTR_K8S_DAEMONSET_UID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_DAEMONSET_UID = TMP_K8S_DAEMONSET_UID;\n/**\n * The name of the DaemonSet.\n *\n * @deprecated Use ATTR_K8S_DAEMONSET_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_DAEMONSET_NAME = TMP_K8S_DAEMONSET_NAME;\n/**\n * The UID of the Job.\n *\n * @deprecated Use ATTR_K8S_JOB_UID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_JOB_UID = TMP_K8S_JOB_UID;\n/**\n * The name of the Job.\n *\n * @deprecated Use ATTR_K8S_JOB_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_JOB_NAME = TMP_K8S_JOB_NAME;\n/**\n * The UID of the CronJob.\n *\n * @deprecated Use ATTR_K8S_CRONJOB_UID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_CRONJOB_UID = TMP_K8S_CRONJOB_UID;\n/**\n * The name of the CronJob.\n *\n * @deprecated Use ATTR_K8S_CRONJOB_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_K8S_CRONJOB_NAME = TMP_K8S_CRONJOB_NAME;\n/**\n * The operating system type.\n *\n * @deprecated Use ATTR_OS_TYPE in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_OS_TYPE = TMP_OS_TYPE;\n/**\n * Human readable (not intended to be parsed) OS version information, like e.g. reported by `ver` or `lsb_release -a` commands.\n *\n * @deprecated Use ATTR_OS_DESCRIPTION in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_OS_DESCRIPTION = TMP_OS_DESCRIPTION;\n/**\n * Human readable operating system name.\n *\n * @deprecated Use ATTR_OS_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_OS_NAME = TMP_OS_NAME;\n/**\n * The version string of the operating system as defined in [Version Attributes](../../resource/semantic_conventions/README.md#version-attributes).\n *\n * @deprecated Use ATTR_OS_VERSION in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_OS_VERSION = TMP_OS_VERSION;\n/**\n * Process identifier (PID).\n *\n * @deprecated Use ATTR_PROCESS_PID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_PROCESS_PID = TMP_PROCESS_PID;\n/**\n * The name of the process executable. On Linux based systems, can be set to the `Name` in `proc/[pid]/status`. On Windows, can be set to the base name of `GetProcessImageFileNameW`.\n *\n * @deprecated Use ATTR_PROCESS_EXECUTABLE_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_PROCESS_EXECUTABLE_NAME = TMP_PROCESS_EXECUTABLE_NAME;\n/**\n * The full path to the process executable. On Linux based systems, can be set to the target of `proc/[pid]/exe`. On Windows, can be set to the result of `GetProcessImageFileNameW`.\n *\n * @deprecated Use ATTR_PROCESS_EXECUTABLE_PATH in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_PROCESS_EXECUTABLE_PATH = TMP_PROCESS_EXECUTABLE_PATH;\n/**\n * The command used to launch the process (i.e. the command name). On Linux based systems, can be set to the zeroth string in `proc/[pid]/cmdline`. On Windows, can be set to the first parameter extracted from `GetCommandLineW`.\n *\n * @deprecated Use ATTR_PROCESS_COMMAND in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_PROCESS_COMMAND = TMP_PROCESS_COMMAND;\n/**\n * The full command used to launch the process as a single string representing the full command. On Windows, can be set to the result of `GetCommandLineW`. Do not set this if you have to assemble it just for monitoring; use `process.command_args` instead.\n *\n * @deprecated Use ATTR_PROCESS_COMMAND_LINE in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_PROCESS_COMMAND_LINE = TMP_PROCESS_COMMAND_LINE;\n/**\n * All the command arguments (including the command/executable itself) as received by the process. On Linux-based systems (and some other Unixoid systems supporting procfs), can be set according to the list of null-delimited strings extracted from `proc/[pid]/cmdline`. For libc-based executables, this would be the full argv vector passed to `main`.\n *\n * @deprecated Use ATTR_PROCESS_COMMAND_ARGS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_PROCESS_COMMAND_ARGS = TMP_PROCESS_COMMAND_ARGS;\n/**\n * The username of the user that owns the process.\n *\n * @deprecated Use ATTR_PROCESS_OWNER in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_PROCESS_OWNER = TMP_PROCESS_OWNER;\n/**\n * The name of the runtime of this process. For compiled native binaries, this SHOULD be the name of the compiler.\n *\n * @deprecated Use ATTR_PROCESS_RUNTIME_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_PROCESS_RUNTIME_NAME = TMP_PROCESS_RUNTIME_NAME;\n/**\n * The version of the runtime of this process, as returned by the runtime without modification.\n *\n * @deprecated Use ATTR_PROCESS_RUNTIME_VERSION in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_PROCESS_RUNTIME_VERSION = TMP_PROCESS_RUNTIME_VERSION;\n/**\n * An additional description about the runtime of the process, for example a specific vendor customization of the runtime environment.\n *\n * @deprecated Use ATTR_PROCESS_RUNTIME_DESCRIPTION in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_PROCESS_RUNTIME_DESCRIPTION = TMP_PROCESS_RUNTIME_DESCRIPTION;\n/**\n * Logical name of the service.\n *\n * Note: MUST be the same for all instances of horizontally scaled services. If the value was not specified, SDKs MUST fallback to `unknown_service:` concatenated with [`process.executable.name`](process.md#process), e.g. `unknown_service:bash`. If `process.executable.name` is not available, the value MUST be set to `unknown_service`.\n *\n * @deprecated Use ATTR_SERVICE_NAME.\n */\nexport var SEMRESATTRS_SERVICE_NAME = TMP_SERVICE_NAME;\n/**\n * A namespace for `service.name`.\n *\n * Note: A string value having a meaning that helps to distinguish a group of services, for example the team name that owns a group of services. `service.name` is expected to be unique within the same namespace. If `service.namespace` is not specified in the Resource then `service.name` is expected to be unique for all services that have no explicit namespace defined (so the empty/unspecified namespace is simply one more valid namespace). Zero-length namespace string is assumed equal to unspecified namespace.\n *\n * @deprecated Use ATTR_SERVICE_NAMESPACE in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_SERVICE_NAMESPACE = TMP_SERVICE_NAMESPACE;\n/**\n * The string ID of the service instance.\n *\n * Note: MUST be unique for each instance of the same `service.namespace,service.name` pair (in other words `service.namespace,service.name,service.instance.id` triplet MUST be globally unique). The ID helps to distinguish instances of the same service that exist at the same time (e.g. instances of a horizontally scaled service). It is preferable for the ID to be persistent and stay the same for the lifetime of the service instance, however it is acceptable that the ID is ephemeral and changes during important lifetime events for the service (e.g. service restarts). If the service has no inherent unique ID that can be used as the value of this attribute it is recommended to generate a random Version 1 or Version 4 RFC 4122 UUID (services aiming for reproducible UUIDs may also use Version 5, see RFC 4122 for more recommendations).\n *\n * @deprecated Use ATTR_SERVICE_INSTANCE_ID in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_SERVICE_INSTANCE_ID = TMP_SERVICE_INSTANCE_ID;\n/**\n * The version string of the service API or implementation.\n *\n * @deprecated Use ATTR_SERVICE_VERSION.\n */\nexport var SEMRESATTRS_SERVICE_VERSION = TMP_SERVICE_VERSION;\n/**\n * The name of the telemetry SDK as defined above.\n *\n * @deprecated Use ATTR_TELEMETRY_SDK_NAME.\n */\nexport var SEMRESATTRS_TELEMETRY_SDK_NAME = TMP_TELEMETRY_SDK_NAME;\n/**\n * The language of the telemetry SDK.\n *\n * @deprecated Use ATTR_TELEMETRY_SDK_LANGUAGE.\n */\nexport var SEMRESATTRS_TELEMETRY_SDK_LANGUAGE = TMP_TELEMETRY_SDK_LANGUAGE;\n/**\n * The version string of the telemetry SDK.\n *\n * @deprecated Use ATTR_TELEMETRY_SDK_VERSION.\n */\nexport var SEMRESATTRS_TELEMETRY_SDK_VERSION = TMP_TELEMETRY_SDK_VERSION;\n/**\n * The version string of the auto instrumentation agent, if used.\n *\n * @deprecated Use ATTR_TELEMETRY_DISTRO_VERSION in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_TELEMETRY_AUTO_VERSION = TMP_TELEMETRY_AUTO_VERSION;\n/**\n * The name of the web engine.\n *\n * @deprecated Use ATTR_WEBENGINE_NAME in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_WEBENGINE_NAME = TMP_WEBENGINE_NAME;\n/**\n * The version of the web engine.\n *\n * @deprecated Use ATTR_WEBENGINE_VERSION in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_WEBENGINE_VERSION = TMP_WEBENGINE_VERSION;\n/**\n * Additional description of the web engine (e.g. detailed version and edition information).\n *\n * @deprecated Use ATTR_WEBENGINE_DESCRIPTION in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var SEMRESATTRS_WEBENGINE_DESCRIPTION = TMP_WEBENGINE_DESCRIPTION;\n/**\n * Create exported Value Map for SemanticResourceAttributes values\n * @deprecated Use the SEMRESATTRS_XXXXX constants rather than the SemanticResourceAttributes.XXXXX for bundle minification\n */\nexport var SemanticResourceAttributes = \n/*#__PURE__*/ createConstMap([\n    TMP_CLOUD_PROVIDER,\n    TMP_CLOUD_ACCOUNT_ID,\n    TMP_CLOUD_REGION,\n    TMP_CLOUD_AVAILABILITY_ZONE,\n    TMP_CLOUD_PLATFORM,\n    TMP_AWS_ECS_CONTAINER_ARN,\n    TMP_AWS_ECS_CLUSTER_ARN,\n    TMP_AWS_ECS_LAUNCHTYPE,\n    TMP_AWS_ECS_TASK_ARN,\n    TMP_AWS_ECS_TASK_FAMILY,\n    TMP_AWS_ECS_TASK_REVISION,\n    TMP_AWS_EKS_CLUSTER_ARN,\n    TMP_AWS_LOG_GROUP_NAMES,\n    TMP_AWS_LOG_GROUP_ARNS,\n    TMP_AWS_LOG_STREAM_NAMES,\n    TMP_AWS_LOG_STREAM_ARNS,\n    TMP_CONTAINER_NAME,\n    TMP_CONTAINER_ID,\n    TMP_CONTAINER_RUNTIME,\n    TMP_CONTAINER_IMAGE_NAME,\n    TMP_CONTAINER_IMAGE_TAG,\n    TMP_DEPLOYMENT_ENVIRONMENT,\n    TMP_DEVICE_ID,\n    TMP_DEVICE_MODEL_IDENTIFIER,\n    TMP_DEVICE_MODEL_NAME,\n    TMP_FAAS_NAME,\n    TMP_FAAS_ID,\n    TMP_FAAS_VERSION,\n    TMP_FAAS_INSTANCE,\n    TMP_FAAS_MAX_MEMORY,\n    TMP_HOST_ID,\n    TMP_HOST_NAME,\n    TMP_HOST_TYPE,\n    TMP_HOST_ARCH,\n    TMP_HOST_IMAGE_NAME,\n    TMP_HOST_IMAGE_ID,\n    TMP_HOST_IMAGE_VERSION,\n    TMP_K8S_CLUSTER_NAME,\n    TMP_K8S_NODE_NAME,\n    TMP_K8S_NODE_UID,\n    TMP_K8S_NAMESPACE_NAME,\n    TMP_K8S_POD_UID,\n    TMP_K8S_POD_NAME,\n    TMP_K8S_CONTAINER_NAME,\n    TMP_K8S_REPLICASET_UID,\n    TMP_K8S_REPLICASET_NAME,\n    TMP_K8S_DEPLOYMENT_UID,\n    TMP_K8S_DEPLOYMENT_NAME,\n    TMP_K8S_STATEFULSET_UID,\n    TMP_K8S_STATEFULSET_NAME,\n    TMP_K8S_DAEMONSET_UID,\n    TMP_K8S_DAEMONSET_NAME,\n    TMP_K8S_JOB_UID,\n    TMP_K8S_JOB_NAME,\n    TMP_K8S_CRONJOB_UID,\n    TMP_K8S_CRONJOB_NAME,\n    TMP_OS_TYPE,\n    TMP_OS_DESCRIPTION,\n    TMP_OS_NAME,\n    TMP_OS_VERSION,\n    TMP_PROCESS_PID,\n    TMP_PROCESS_EXECUTABLE_NAME,\n    TMP_PROCESS_EXECUTABLE_PATH,\n    TMP_PROCESS_COMMAND,\n    TMP_PROCESS_COMMAND_LINE,\n    TMP_PROCESS_COMMAND_ARGS,\n    TMP_PROCESS_OWNER,\n    TMP_PROCESS_RUNTIME_NAME,\n    TMP_PROCESS_RUNTIME_VERSION,\n    TMP_PROCESS_RUNTIME_DESCRIPTION,\n    TMP_SERVICE_NAME,\n    TMP_SERVICE_NAMESPACE,\n    TMP_SERVICE_INSTANCE_ID,\n    TMP_SERVICE_VERSION,\n    TMP_TELEMETRY_SDK_NAME,\n    TMP_TELEMETRY_SDK_LANGUAGE,\n    TMP_TELEMETRY_SDK_VERSION,\n    TMP_TELEMETRY_AUTO_VERSION,\n    TMP_WEBENGINE_NAME,\n    TMP_WEBENGINE_VERSION,\n    TMP_WEBENGINE_DESCRIPTION,\n]);\n/* ----------------------------------------------------------------------------------------------------------\n * Constant values for CloudProviderValues enum definition\n *\n * Name of the cloud provider.\n * ---------------------------------------------------------------------------------------------------------- */\n// Temporary local constants to assign to the individual exports and the namespaced version\n// Required to avoid the namespace exports using the unminifiable export names for some package types\nvar TMP_CLOUDPROVIDERVALUES_ALIBABA_CLOUD = 'alibaba_cloud';\nvar TMP_CLOUDPROVIDERVALUES_AWS = 'aws';\nvar TMP_CLOUDPROVIDERVALUES_AZURE = 'azure';\nvar TMP_CLOUDPROVIDERVALUES_GCP = 'gcp';\n/**\n * Name of the cloud provider.\n *\n * @deprecated Use CLOUD_PROVIDER_VALUE_ALIBABA_CLOUD in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPROVIDERVALUES_ALIBABA_CLOUD = TMP_CLOUDPROVIDERVALUES_ALIBABA_CLOUD;\n/**\n * Name of the cloud provider.\n *\n * @deprecated Use CLOUD_PROVIDER_VALUE_AWS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPROVIDERVALUES_AWS = TMP_CLOUDPROVIDERVALUES_AWS;\n/**\n * Name of the cloud provider.\n *\n * @deprecated Use CLOUD_PROVIDER_VALUE_AZURE in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPROVIDERVALUES_AZURE = TMP_CLOUDPROVIDERVALUES_AZURE;\n/**\n * Name of the cloud provider.\n *\n * @deprecated Use CLOUD_PROVIDER_VALUE_GCP in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPROVIDERVALUES_GCP = TMP_CLOUDPROVIDERVALUES_GCP;\n/**\n * The constant map of values for CloudProviderValues.\n * @deprecated Use the CLOUDPROVIDERVALUES_XXXXX constants rather than the CloudProviderValues.XXXXX for bundle minification.\n */\nexport var CloudProviderValues = \n/*#__PURE__*/ createConstMap([\n    TMP_CLOUDPROVIDERVALUES_ALIBABA_CLOUD,\n    TMP_CLOUDPROVIDERVALUES_AWS,\n    TMP_CLOUDPROVIDERVALUES_AZURE,\n    TMP_CLOUDPROVIDERVALUES_GCP,\n]);\n/* ----------------------------------------------------------------------------------------------------------\n * Constant values for CloudPlatformValues enum definition\n *\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n * ---------------------------------------------------------------------------------------------------------- */\n// Temporary local constants to assign to the individual exports and the namespaced version\n// Required to avoid the namespace exports using the unminifiable export names for some package types\nvar TMP_CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS = 'alibaba_cloud_ecs';\nvar TMP_CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC = 'alibaba_cloud_fc';\nvar TMP_CLOUDPLATFORMVALUES_AWS_EC2 = 'aws_ec2';\nvar TMP_CLOUDPLATFORMVALUES_AWS_ECS = 'aws_ecs';\nvar TMP_CLOUDPLATFORMVALUES_AWS_EKS = 'aws_eks';\nvar TMP_CLOUDPLATFORMVALUES_AWS_LAMBDA = 'aws_lambda';\nvar TMP_CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK = 'aws_elastic_beanstalk';\nvar TMP_CLOUDPLATFORMVALUES_AZURE_VM = 'azure_vm';\nvar TMP_CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES = 'azure_container_instances';\nvar TMP_CLOUDPLATFORMVALUES_AZURE_AKS = 'azure_aks';\nvar TMP_CLOUDPLATFORMVALUES_AZURE_FUNCTIONS = 'azure_functions';\nvar TMP_CLOUDPLATFORMVALUES_AZURE_APP_SERVICE = 'azure_app_service';\nvar TMP_CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE = 'gcp_compute_engine';\nvar TMP_CLOUDPLATFORMVALUES_GCP_CLOUD_RUN = 'gcp_cloud_run';\nvar TMP_CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE = 'gcp_kubernetes_engine';\nvar TMP_CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS = 'gcp_cloud_functions';\nvar TMP_CLOUDPLATFORMVALUES_GCP_APP_ENGINE = 'gcp_app_engine';\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_ALIBABA_CLOUD_ECS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS = TMP_CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_ALIBABA_CLOUD_FC in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC = TMP_CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_AWS_EC2 in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_AWS_EC2 = TMP_CLOUDPLATFORMVALUES_AWS_EC2;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_AWS_ECS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_AWS_ECS = TMP_CLOUDPLATFORMVALUES_AWS_ECS;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_AWS_EKS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_AWS_EKS = TMP_CLOUDPLATFORMVALUES_AWS_EKS;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_AWS_LAMBDA in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_AWS_LAMBDA = TMP_CLOUDPLATFORMVALUES_AWS_LAMBDA;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_AWS_ELASTIC_BEANSTALK in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK = TMP_CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_AZURE_VM in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_AZURE_VM = TMP_CLOUDPLATFORMVALUES_AZURE_VM;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_AZURE_CONTAINER_INSTANCES in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES = TMP_CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_AZURE_AKS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_AZURE_AKS = TMP_CLOUDPLATFORMVALUES_AZURE_AKS;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_AZURE_FUNCTIONS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_AZURE_FUNCTIONS = TMP_CLOUDPLATFORMVALUES_AZURE_FUNCTIONS;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_AZURE_APP_SERVICE in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_AZURE_APP_SERVICE = TMP_CLOUDPLATFORMVALUES_AZURE_APP_SERVICE;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_GCP_COMPUTE_ENGINE in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE = TMP_CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_GCP_CLOUD_RUN in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_GCP_CLOUD_RUN = TMP_CLOUDPLATFORMVALUES_GCP_CLOUD_RUN;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_GCP_KUBERNETES_ENGINE in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE = TMP_CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_GCP_CLOUD_FUNCTIONS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS = TMP_CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS;\n/**\n * The cloud platform in use.\n *\n * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n *\n * @deprecated Use CLOUD_PLATFORM_VALUE_GCP_APP_ENGINE in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var CLOUDPLATFORMVALUES_GCP_APP_ENGINE = TMP_CLOUDPLATFORMVALUES_GCP_APP_ENGINE;\n/**\n * The constant map of values for CloudPlatformValues.\n * @deprecated Use the CLOUDPLATFORMVALUES_XXXXX constants rather than the CloudPlatformValues.XXXXX for bundle minification.\n */\nexport var CloudPlatformValues = \n/*#__PURE__*/ createConstMap([\n    TMP_CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS,\n    TMP_CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC,\n    TMP_CLOUDPLATFORMVALUES_AWS_EC2,\n    TMP_CLOUDPLATFORMVALUES_AWS_ECS,\n    TMP_CLOUDPLATFORMVALUES_AWS_EKS,\n    TMP_CLOUDPLATFORMVALUES_AWS_LAMBDA,\n    TMP_CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK,\n    TMP_CLOUDPLATFORMVALUES_AZURE_VM,\n    TMP_CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES,\n    TMP_CLOUDPLATFORMVALUES_AZURE_AKS,\n    TMP_CLOUDPLATFORMVALUES_AZURE_FUNCTIONS,\n    TMP_CLOUDPLATFORMVALUES_AZURE_APP_SERVICE,\n    TMP_CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE,\n    TMP_CLOUDPLATFORMVALUES_GCP_CLOUD_RUN,\n    TMP_CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE,\n    TMP_CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS,\n    TMP_CLOUDPLATFORMVALUES_GCP_APP_ENGINE,\n]);\n/* ----------------------------------------------------------------------------------------------------------\n * Constant values for AwsEcsLaunchtypeValues enum definition\n *\n * The [launch type](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/launch_types.html) for an ECS task.\n * ---------------------------------------------------------------------------------------------------------- */\n// Temporary local constants to assign to the individual exports and the namespaced version\n// Required to avoid the namespace exports using the unminifiable export names for some package types\nvar TMP_AWSECSLAUNCHTYPEVALUES_EC2 = 'ec2';\nvar TMP_AWSECSLAUNCHTYPEVALUES_FARGATE = 'fargate';\n/**\n * The [launch type](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/launch_types.html) for an ECS task.\n *\n * @deprecated Use AWS_ECS_LAUNCHTYPE_VALUE_EC2 in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var AWSECSLAUNCHTYPEVALUES_EC2 = TMP_AWSECSLAUNCHTYPEVALUES_EC2;\n/**\n * The [launch type](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/launch_types.html) for an ECS task.\n *\n * @deprecated Use AWS_ECS_LAUNCHTYPE_VALUE_FARGATE in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var AWSECSLAUNCHTYPEVALUES_FARGATE = TMP_AWSECSLAUNCHTYPEVALUES_FARGATE;\n/**\n * The constant map of values for AwsEcsLaunchtypeValues.\n * @deprecated Use the AWSECSLAUNCHTYPEVALUES_XXXXX constants rather than the AwsEcsLaunchtypeValues.XXXXX for bundle minification.\n */\nexport var AwsEcsLaunchtypeValues = \n/*#__PURE__*/ createConstMap([\n    TMP_AWSECSLAUNCHTYPEVALUES_EC2,\n    TMP_AWSECSLAUNCHTYPEVALUES_FARGATE,\n]);\n/* ----------------------------------------------------------------------------------------------------------\n * Constant values for HostArchValues enum definition\n *\n * The CPU architecture the host system is running on.\n * ---------------------------------------------------------------------------------------------------------- */\n// Temporary local constants to assign to the individual exports and the namespaced version\n// Required to avoid the namespace exports using the unminifiable export names for some package types\nvar TMP_HOSTARCHVALUES_AMD64 = 'amd64';\nvar TMP_HOSTARCHVALUES_ARM32 = 'arm32';\nvar TMP_HOSTARCHVALUES_ARM64 = 'arm64';\nvar TMP_HOSTARCHVALUES_IA64 = 'ia64';\nvar TMP_HOSTARCHVALUES_PPC32 = 'ppc32';\nvar TMP_HOSTARCHVALUES_PPC64 = 'ppc64';\nvar TMP_HOSTARCHVALUES_X86 = 'x86';\n/**\n * The CPU architecture the host system is running on.\n *\n * @deprecated Use HOST_ARCH_VALUE_AMD64 in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var HOSTARCHVALUES_AMD64 = TMP_HOSTARCHVALUES_AMD64;\n/**\n * The CPU architecture the host system is running on.\n *\n * @deprecated Use HOST_ARCH_VALUE_ARM32 in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var HOSTARCHVALUES_ARM32 = TMP_HOSTARCHVALUES_ARM32;\n/**\n * The CPU architecture the host system is running on.\n *\n * @deprecated Use HOST_ARCH_VALUE_ARM64 in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var HOSTARCHVALUES_ARM64 = TMP_HOSTARCHVALUES_ARM64;\n/**\n * The CPU architecture the host system is running on.\n *\n * @deprecated Use HOST_ARCH_VALUE_IA64 in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var HOSTARCHVALUES_IA64 = TMP_HOSTARCHVALUES_IA64;\n/**\n * The CPU architecture the host system is running on.\n *\n * @deprecated Use HOST_ARCH_VALUE_PPC32 in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var HOSTARCHVALUES_PPC32 = TMP_HOSTARCHVALUES_PPC32;\n/**\n * The CPU architecture the host system is running on.\n *\n * @deprecated Use HOST_ARCH_VALUE_PPC64 in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var HOSTARCHVALUES_PPC64 = TMP_HOSTARCHVALUES_PPC64;\n/**\n * The CPU architecture the host system is running on.\n *\n * @deprecated Use HOST_ARCH_VALUE_X86 in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var HOSTARCHVALUES_X86 = TMP_HOSTARCHVALUES_X86;\n/**\n * The constant map of values for HostArchValues.\n * @deprecated Use the HOSTARCHVALUES_XXXXX constants rather than the HostArchValues.XXXXX for bundle minification.\n */\nexport var HostArchValues = \n/*#__PURE__*/ createConstMap([\n    TMP_HOSTARCHVALUES_AMD64,\n    TMP_HOSTARCHVALUES_ARM32,\n    TMP_HOSTARCHVALUES_ARM64,\n    TMP_HOSTARCHVALUES_IA64,\n    TMP_HOSTARCHVALUES_PPC32,\n    TMP_HOSTARCHVALUES_PPC64,\n    TMP_HOSTARCHVALUES_X86,\n]);\n/* ----------------------------------------------------------------------------------------------------------\n * Constant values for OsTypeValues enum definition\n *\n * The operating system type.\n * ---------------------------------------------------------------------------------------------------------- */\n// Temporary local constants to assign to the individual exports and the namespaced version\n// Required to avoid the namespace exports using the unminifiable export names for some package types\nvar TMP_OSTYPEVALUES_WINDOWS = 'windows';\nvar TMP_OSTYPEVALUES_LINUX = 'linux';\nvar TMP_OSTYPEVALUES_DARWIN = 'darwin';\nvar TMP_OSTYPEVALUES_FREEBSD = 'freebsd';\nvar TMP_OSTYPEVALUES_NETBSD = 'netbsd';\nvar TMP_OSTYPEVALUES_OPENBSD = 'openbsd';\nvar TMP_OSTYPEVALUES_DRAGONFLYBSD = 'dragonflybsd';\nvar TMP_OSTYPEVALUES_HPUX = 'hpux';\nvar TMP_OSTYPEVALUES_AIX = 'aix';\nvar TMP_OSTYPEVALUES_SOLARIS = 'solaris';\nvar TMP_OSTYPEVALUES_Z_OS = 'z_os';\n/**\n * The operating system type.\n *\n * @deprecated Use OS_TYPE_VALUE_WINDOWS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var OSTYPEVALUES_WINDOWS = TMP_OSTYPEVALUES_WINDOWS;\n/**\n * The operating system type.\n *\n * @deprecated Use OS_TYPE_VALUE_LINUX in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var OSTYPEVALUES_LINUX = TMP_OSTYPEVALUES_LINUX;\n/**\n * The operating system type.\n *\n * @deprecated Use OS_TYPE_VALUE_DARWIN in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var OSTYPEVALUES_DARWIN = TMP_OSTYPEVALUES_DARWIN;\n/**\n * The operating system type.\n *\n * @deprecated Use OS_TYPE_VALUE_FREEBSD in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var OSTYPEVALUES_FREEBSD = TMP_OSTYPEVALUES_FREEBSD;\n/**\n * The operating system type.\n *\n * @deprecated Use OS_TYPE_VALUE_NETBSD in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var OSTYPEVALUES_NETBSD = TMP_OSTYPEVALUES_NETBSD;\n/**\n * The operating system type.\n *\n * @deprecated Use OS_TYPE_VALUE_OPENBSD in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var OSTYPEVALUES_OPENBSD = TMP_OSTYPEVALUES_OPENBSD;\n/**\n * The operating system type.\n *\n * @deprecated Use OS_TYPE_VALUE_DRAGONFLYBSD in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var OSTYPEVALUES_DRAGONFLYBSD = TMP_OSTYPEVALUES_DRAGONFLYBSD;\n/**\n * The operating system type.\n *\n * @deprecated Use OS_TYPE_VALUE_HPUX in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var OSTYPEVALUES_HPUX = TMP_OSTYPEVALUES_HPUX;\n/**\n * The operating system type.\n *\n * @deprecated Use OS_TYPE_VALUE_AIX in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var OSTYPEVALUES_AIX = TMP_OSTYPEVALUES_AIX;\n/**\n * The operating system type.\n *\n * @deprecated Use OS_TYPE_VALUE_SOLARIS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var OSTYPEVALUES_SOLARIS = TMP_OSTYPEVALUES_SOLARIS;\n/**\n * The operating system type.\n *\n * @deprecated Use OS_TYPE_VALUE_Z_OS in [incubating entry-point]({@link https://github.com/open-telemetry/opentelemetry-js/blob/main/semantic-conventions/README.md#unstable-semconv}).\n */\nexport var OSTYPEVALUES_Z_OS = TMP_OSTYPEVALUES_Z_OS;\n/**\n * The constant map of values for OsTypeValues.\n * @deprecated Use the OSTYPEVALUES_XXXXX constants rather than the OsTypeValues.XXXXX for bundle minification.\n */\nexport var OsTypeValues = \n/*#__PURE__*/ createConstMap([\n    TMP_OSTYPEVALUES_WINDOWS,\n    TMP_OSTYPEVALUES_LINUX,\n    TMP_OSTYPEVALUES_DARWIN,\n    TMP_OSTYPEVALUES_FREEBSD,\n    TMP_OSTYPEVALUES_NETBSD,\n    TMP_OSTYPEVALUES_OPENBSD,\n    TMP_OSTYPEVALUES_DRAGONFLYBSD,\n    TMP_OSTYPEVALUES_HPUX,\n    TMP_OSTYPEVALUES_AIX,\n    TMP_OSTYPEVALUES_SOLARIS,\n    TMP_OSTYPEVALUES_Z_OS,\n]);\n/* ----------------------------------------------------------------------------------------------------------\n * Constant values for TelemetrySdkLanguageValues enum definition\n *\n * The language of the telemetry SDK.\n * ---------------------------------------------------------------------------------------------------------- */\n// Temporary local constants to assign to the individual exports and the namespaced version\n// Required to avoid the namespace exports using the unminifiable export names for some package types\nvar TMP_TELEMETRYSDKLANGUAGEVALUES_CPP = 'cpp';\nvar TMP_TELEMETRYSDKLANGUAGEVALUES_DOTNET = 'dotnet';\nvar TMP_TELEMETRYSDKLANGUAGEVALUES_ERLANG = 'erlang';\nvar TMP_TELEMETRYSDKLANGUAGEVALUES_GO = 'go';\nvar TMP_TELEMETRYSDKLANGUAGEVALUES_JAVA = 'java';\nvar TMP_TELEMETRYSDKLANGUAGEVALUES_NODEJS = 'nodejs';\nvar TMP_TELEMETRYSDKLANGUAGEVALUES_PHP = 'php';\nvar TMP_TELEMETRYSDKLANGUAGEVALUES_PYTHON = 'python';\nvar TMP_TELEMETRYSDKLANGUAGEVALUES_RUBY = 'ruby';\nvar TMP_TELEMETRYSDKLANGUAGEVALUES_WEBJS = 'webjs';\n/**\n * The language of the telemetry SDK.\n *\n * @deprecated Use TELEMETRY_SDK_LANGUAGE_VALUE_CPP.\n */\nexport var TELEMETRYSDKLANGUAGEVALUES_CPP = TMP_TELEMETRYSDKLANGUAGEVALUES_CPP;\n/**\n * The language of the telemetry SDK.\n *\n * @deprecated Use TELEMETRY_SDK_LANGUAGE_VALUE_DOTNET.\n */\nexport var TELEMETRYSDKLANGUAGEVALUES_DOTNET = TMP_TELEMETRYSDKLANGUAGEVALUES_DOTNET;\n/**\n * The language of the telemetry SDK.\n *\n * @deprecated Use TELEMETRY_SDK_LANGUAGE_VALUE_ERLANG.\n */\nexport var TELEMETRYSDKLANGUAGEVALUES_ERLANG = TMP_TELEMETRYSDKLANGUAGEVALUES_ERLANG;\n/**\n * The language of the telemetry SDK.\n *\n * @deprecated Use TELEMETRY_SDK_LANGUAGE_VALUE_GO.\n */\nexport var TELEMETRYSDKLANGUAGEVALUES_GO = TMP_TELEMETRYSDKLANGUAGEVALUES_GO;\n/**\n * The language of the telemetry SDK.\n *\n * @deprecated Use TELEMETRY_SDK_LANGUAGE_VALUE_JAVA.\n */\nexport var TELEMETRYSDKLANGUAGEVALUES_JAVA = TMP_TELEMETRYSDKLANGUAGEVALUES_JAVA;\n/**\n * The language of the telemetry SDK.\n *\n * @deprecated Use TELEMETRY_SDK_LANGUAGE_VALUE_NODEJS.\n */\nexport var TELEMETRYSDKLANGUAGEVALUES_NODEJS = TMP_TELEMETRYSDKLANGUAGEVALUES_NODEJS;\n/**\n * The language of the telemetry SDK.\n *\n * @deprecated Use TELEMETRY_SDK_LANGUAGE_VALUE_PHP.\n */\nexport var TELEMETRYSDKLANGUAGEVALUES_PHP = TMP_TELEMETRYSDKLANGUAGEVALUES_PHP;\n/**\n * The language of the telemetry SDK.\n *\n * @deprecated Use TELEMETRY_SDK_LANGUAGE_VALUE_PYTHON.\n */\nexport var TELEMETRYSDKLANGUAGEVALUES_PYTHON = TMP_TELEMETRYSDKLANGUAGEVALUES_PYTHON;\n/**\n * The language of the telemetry SDK.\n *\n * @deprecated Use TELEMETRY_SDK_LANGUAGE_VALUE_RUBY.\n */\nexport var TELEMETRYSDKLANGUAGEVALUES_RUBY = TMP_TELEMETRYSDKLANGUAGEVALUES_RUBY;\n/**\n * The language of the telemetry SDK.\n *\n * @deprecated Use TELEMETRY_SDK_LANGUAGE_VALUE_WEBJS.\n */\nexport var TELEMETRYSDKLANGUAGEVALUES_WEBJS = TMP_TELEMETRYSDKLANGUAGEVALUES_WEBJS;\n/**\n * The constant map of values for TelemetrySdkLanguageValues.\n * @deprecated Use the TELEMETRYSDKLANGUAGEVALUES_XXXXX constants rather than the TelemetrySdkLanguageValues.XXXXX for bundle minification.\n */\nexport var TelemetrySdkLanguageValues = \n/*#__PURE__*/ createConstMap([\n    TMP_TELEMETRYSDKLANGUAGEVALUES_CPP,\n    TMP_TELEMETRYSDKLANGUAGEVALUES_DOTNET,\n    TMP_TELEMETRYSDKLANGUAGEVALUES_ERLANG,\n    TMP_TELEMETRYSDKLANGUAGEVALUES_GO,\n    TMP_TELEMETRYSDKLANGUAGEVALUES_JAVA,\n    TMP_TELEMETRYSDKLANGUAGEVALUES_NODEJS,\n    TMP_TELEMETRYSDKLANGUAGEVALUES_PHP,\n    TMP_TELEMETRYSDKLANGUAGEVALUES_PYTHON,\n    TMP_TELEMETRYSDKLANGUAGEVALUES_RUBY,\n    TMP_TELEMETRYSDKLANGUAGEVALUES_WEBJS,\n]);\n//# sourceMappingURL=SemanticResourceAttributes.js.map","import {\n  FieldType,\n  NodeGraphDataFrameFieldNames as Fields,\n  DataFrameView,\n  DataFrame,\n  MutableDataFrame,\n} from '@grafana/data';\n\nexport function createNodeGraphFrames(data: DataFrame): DataFrame[] {\n  const { nodes, edges } = convertTraceToGraph(data);\n  const [nodesFrame, edgesFrame] = makeFrames();\n\n  for (const node of nodes) {\n    nodesFrame.add(node);\n  }\n  for (const edge of edges) {\n    edgesFrame.add(edge);\n  }\n\n  return [nodesFrame, edgesFrame];\n}\n\nfunction convertTraceToGraph(data: DataFrame): { nodes: Node[]; edges: Edge[] } {\n  const nodes: Node[] = [];\n  const edges: Edge[] = [];\n\n  const view = new DataFrameView<TraceRow>(data);\n\n  const traceDuration = findTraceDuration(view);\n  const spanMap = makeSpanMap((index) => {\n    if (index >= data.length) {\n      return undefined;\n    }\n    const span = view.get(index);\n    return {\n      span: { ...span },\n      id: span.spanID,\n      parentIds: span.parentSpanID ? [span.parentSpanID] : [],\n    };\n  });\n\n  for (let i = 0; i < view.length; i++) {\n    const row = view.get(i);\n\n    const ranges: Array<[number, number]> = spanMap[row.spanID].children.map((c) => {\n      const span = spanMap[c].span;\n      return [span.startTime, span.startTime + span.duration];\n    });\n    const childrenDuration = getNonOverlappingDuration(ranges);\n    const selfDuration = row.duration - childrenDuration;\n    const stats = getStats(row.duration, traceDuration, selfDuration);\n\n    nodes.push({\n      [Fields.id]: row.spanID,\n      [Fields.title]: row.serviceName ?? '',\n      [Fields.subTitle]: row.operationName,\n      [Fields.mainStat]: stats.main,\n      [Fields.secondaryStat]: stats.secondary,\n      [Fields.color]: selfDuration / traceDuration,\n    });\n\n    // Sometimes some span can be missing. Don't add edges for those.\n    if (row.parentSpanID && spanMap[row.parentSpanID].span) {\n      edges.push({\n        [Fields.id]: row.parentSpanID + '--' + row.spanID,\n        [Fields.target]: row.spanID,\n        [Fields.source]: row.parentSpanID,\n      });\n    }\n  }\n\n  return { nodes, edges };\n}\n\n/**\n * Get non overlapping duration of the ranges as they can overlap or have gaps.\n */\nexport function getNonOverlappingDuration(ranges: Array<[number, number]>): number {\n  ranges.sort((a, b) => a[0] - b[0]);\n  const mergedRanges = ranges.reduce<Array<[number, number]>>((acc, range) => {\n    if (!acc.length) {\n      return [range];\n    }\n    const tail = acc.slice(-1)[0];\n    const [prevStart, prevEnd] = tail;\n    const [start, end] = range;\n    if (end < prevEnd) {\n      // In this case the range is completely inside the prev range so we can just ignore it.\n      return acc;\n    }\n\n    if (start > prevEnd) {\n      // There is no overlap so we can just add it to stack\n      return [...acc, range];\n    }\n\n    // We know there is overlap and current range ends later than previous so we can just extend the range\n    return [...acc.slice(0, -1), [prevStart, end]];\n  }, []);\n\n  return mergedRanges.reduce((acc, range) => {\n    return acc + (range[1] - range[0]);\n  }, 0);\n}\n\n/**\n * Returns a map of the spans with children array for easier processing. It will also contain empty spans in case\n * span is missing but other spans are its children. This is more generic because it needs to allow iterating over\n * both arrays and dataframe views.\n */\nexport function makeSpanMap<T>(getSpan: (index: number) => { span: T; id: string; parentIds: string[] } | undefined): {\n  [id: string]: { span: T; children: string[] };\n} {\n  const spanMap: { [id: string]: { span?: T; children: string[] } } = {};\n\n  let span;\n  for (let index = 0; (span = getSpan(index)), !!span; index++) {\n    if (!spanMap[span.id]) {\n      spanMap[span.id] = {\n        span: span.span,\n        children: [],\n      };\n    } else {\n      spanMap[span.id].span = span.span;\n    }\n\n    for (const parentId of span.parentIds) {\n      if (parentId) {\n        if (!spanMap[parentId]) {\n          spanMap[parentId] = {\n            span: undefined,\n            children: [span.id],\n          };\n        } else {\n          spanMap[parentId].children.push(span.id);\n        }\n      }\n    }\n  }\n  // Discussion on this type assertion here: https://github.com/grafana/grafana/pull/80362/files#r1451019375\n  return spanMap as { [id: string]: { span: T; children: string[] } };\n}\n\nexport function getStats(duration: number, traceDuration: number, selfDuration: number) {\n  return {\n    main: `${toFixedNoTrailingZeros(duration)}ms (${toFixedNoTrailingZeros((duration / traceDuration) * 100)}%)`,\n    secondary: `${toFixedNoTrailingZeros(selfDuration)}ms (${toFixedNoTrailingZeros(\n      (selfDuration / duration) * 100\n    )}%)`,\n  };\n}\n\nfunction toFixedNoTrailingZeros(n: number) {\n  return parseFloat(n.toFixed(2));\n}\n\n/**\n * Create default frames used when returning data for node graph.\n */\nexport function makeFrames() {\n  const nodesFrame = new MutableDataFrame({\n    fields: [\n      { name: Fields.id, type: FieldType.string },\n      { name: Fields.title, type: FieldType.string },\n      { name: Fields.subTitle, type: FieldType.string },\n      { name: Fields.mainStat, type: FieldType.string, config: { displayName: 'Total time (% of trace)' } },\n      { name: Fields.secondaryStat, type: FieldType.string, config: { displayName: 'Self time (% of total)' } },\n      {\n        name: Fields.color,\n        type: FieldType.number,\n        config: { color: { mode: 'continuous-GrYlRd' }, displayName: 'Self time / Trace duration' },\n      },\n    ],\n    meta: {\n      preferredVisualisationType: 'nodeGraph',\n    },\n  });\n\n  const edgesFrame = new MutableDataFrame({\n    fields: [\n      { name: Fields.id, type: FieldType.string },\n      { name: Fields.target, type: FieldType.string },\n      { name: Fields.source, type: FieldType.string },\n    ],\n    meta: {\n      preferredVisualisationType: 'nodeGraph',\n    },\n  });\n\n  return [nodesFrame, edgesFrame];\n}\n\n/**\n * Get the duration of the whole trace as it isn't a part of the response data.\n * Note: Seems like this should be the same as just longest span, but this is probably safer.\n */\nfunction findTraceDuration(view: DataFrameView<TraceRow>): number {\n  let traceEndTime = 0;\n  let traceStartTime = Infinity;\n\n  for (let i = 0; i < view.length; i++) {\n    const row = view.get(i);\n\n    if (row.startTime < traceStartTime) {\n      traceStartTime = row.startTime;\n    }\n\n    if (row.startTime + row.duration > traceEndTime) {\n      traceEndTime = row.startTime + row.duration;\n    }\n  }\n\n  return traceEndTime - traceStartTime;\n}\n\ninterface Node {\n  [Fields.id]: string;\n  [Fields.title]: string;\n  [Fields.subTitle]: string;\n  [Fields.mainStat]: string;\n  [Fields.secondaryStat]: string;\n  [Fields.color]: number;\n}\n\ninterface Edge {\n  [Fields.id]: string;\n  [Fields.target]: string;\n  [Fields.source]: string;\n}\n\ninterface TraceRow {\n  traceID: string;\n  spanID: string;\n  parentSpanID: string;\n  operationName: string;\n  serviceName: string;\n  serviceTags: string;\n  startTime: number;\n  duration: number;\n  logs: string;\n  tags: string;\n}\n","import { SpanStatus } from '@opentelemetry/api';\nimport { collectorTypes } from '@opentelemetry/exporter-collector';\nimport { SemanticResourceAttributes } from '@opentelemetry/semantic-conventions';\n\nimport {\n  createDataFrame,\n  createTheme,\n  DataFrame,\n  DataLink,\n  DataLinkConfigOrigin,\n  DataQueryResponse,\n  DataSourceInstanceSettings,\n  DataSourceJsonData,\n  Field,\n  FieldDTO,\n  FieldType,\n  getDisplayProcessor,\n  MutableDataFrame,\n  toDataFrame,\n  TraceKeyValuePair,\n  TraceLog,\n  TraceSpanReference,\n  TraceSpanRow,\n} from '@grafana/data';\nimport { createNodeGraphFrames, TraceToProfilesData } from '@grafana/o11y-ds-frontend';\nimport { getDataSourceSrv } from '@grafana/runtime';\n\nimport { SearchTableType } from './dataquery.gen';\nimport { Span, SpanAttributes, Spanset, TempoJsonData, TraceSearchMetadata } from './types';\n\nfunction getAttributeValue(value: collectorTypes.opentelemetryProto.common.v1.AnyValue): any {\n  if (value.stringValue) {\n    return value.stringValue;\n  }\n\n  if (value.boolValue !== undefined) {\n    return Boolean(value.boolValue);\n  }\n\n  if (value.intValue !== undefined) {\n    return Number.parseInt(String(value.intValue), 10);\n  }\n\n  if (value.doubleValue) {\n    return Number.parseFloat(String(value.doubleValue));\n  }\n\n  if (value.arrayValue) {\n    const arrayValue = [];\n    for (const arValue of value.arrayValue.values) {\n      arrayValue.push(getAttributeValue(arValue));\n    }\n    return arrayValue;\n  }\n\n  return '';\n}\n\nfunction resourceToProcess(resource: collectorTypes.opentelemetryProto.resource.v1.Resource | undefined) {\n  const serviceTags: TraceKeyValuePair[] = [];\n  let serviceName = 'OTLPResourceNoServiceName';\n  if (!resource) {\n    return { serviceName, serviceTags };\n  }\n\n  for (const attribute of resource.attributes) {\n    if (attribute.key === SemanticResourceAttributes.SERVICE_NAME) {\n      serviceName = attribute.value.stringValue || serviceName;\n    }\n    serviceTags.push({ key: attribute.key, value: getAttributeValue(attribute.value) });\n  }\n\n  return { serviceName, serviceTags };\n}\n\nfunction getSpanTags(span: collectorTypes.opentelemetryProto.trace.v1.Span): TraceKeyValuePair[] {\n  const spanTags: TraceKeyValuePair[] = [];\n\n  if (span.attributes) {\n    for (const attribute of span.attributes) {\n      spanTags.push({ key: attribute.key, value: getAttributeValue(attribute.value) });\n    }\n  }\n\n  return spanTags;\n}\n\nfunction getSpanKind(span: collectorTypes.opentelemetryProto.trace.v1.Span) {\n  let kind = undefined;\n  if (span.kind) {\n    const split = span.kind.toString().toLowerCase().split('_');\n    kind = split.length ? split[split.length - 1] : span.kind.toString();\n  }\n  return kind;\n}\n\nfunction getReferences(span: collectorTypes.opentelemetryProto.trace.v1.Span) {\n  const references: TraceSpanReference[] = [];\n  if (span.links) {\n    for (const link of span.links) {\n      const { traceId, spanId } = link;\n      const tags: TraceKeyValuePair[] = [];\n      if (link.attributes) {\n        for (const attribute of link.attributes) {\n          tags.push({ key: attribute.key, value: getAttributeValue(attribute.value) });\n        }\n      }\n      references.push({ traceID: traceId, spanID: spanId, tags });\n    }\n  }\n\n  return references;\n}\n\nfunction getLogs(span: collectorTypes.opentelemetryProto.trace.v1.Span) {\n  const logs: TraceLog[] = [];\n  if (span.events) {\n    for (const event of span.events) {\n      const fields: TraceKeyValuePair[] = [];\n      if (event.attributes) {\n        for (const attribute of event.attributes) {\n          fields.push({ key: attribute.key, value: getAttributeValue(attribute.value) });\n        }\n      }\n      logs.push({ fields, timestamp: event.timeUnixNano / 1000000, name: event.name });\n    }\n  }\n\n  return logs;\n}\n\nexport function transformFromOTLP(\n  traceData: collectorTypes.opentelemetryProto.trace.v1.ResourceSpans[],\n  nodeGraph = false\n): DataQueryResponse {\n  const frame = new MutableDataFrame({\n    fields: [\n      { name: 'traceID', type: FieldType.string, values: [] },\n      { name: 'spanID', type: FieldType.string, values: [] },\n      { name: 'parentSpanID', type: FieldType.string, values: [] },\n      { name: 'operationName', type: FieldType.string, values: [] },\n      { name: 'serviceName', type: FieldType.string, values: [] },\n      { name: 'kind', type: FieldType.string, values: [] },\n      { name: 'statusCode', type: FieldType.number, values: [] },\n      { name: 'statusMessage', type: FieldType.string, values: [] },\n      { name: 'instrumentationLibraryName', type: FieldType.string, values: [] },\n      { name: 'instrumentationLibraryVersion', type: FieldType.string, values: [] },\n      { name: 'traceState', type: FieldType.string, values: [] },\n      { name: 'serviceTags', type: FieldType.other, values: [] },\n      { name: 'startTime', type: FieldType.number, values: [] },\n      { name: 'duration', type: FieldType.number, values: [] },\n      { name: 'logs', type: FieldType.other, values: [] },\n      { name: 'references', type: FieldType.other, values: [] },\n      { name: 'tags', type: FieldType.other, values: [] },\n    ],\n    meta: {\n      preferredVisualisationType: 'trace',\n      custom: {\n        traceFormat: 'otlp',\n      },\n    },\n  });\n  try {\n    for (const data of traceData) {\n      const { serviceName, serviceTags } = resourceToProcess(data.resource);\n      for (const librarySpan of data.instrumentationLibrarySpans) {\n        for (const span of librarySpan.spans) {\n          frame.add({\n            traceID: span.traceId.length > 16 ? span.traceId.slice(16) : span.traceId,\n            spanID: span.spanId,\n            parentSpanID: span.parentSpanId || '',\n            operationName: span.name || '',\n            serviceName,\n            kind: getSpanKind(span),\n            statusCode: span.status?.code,\n            statusMessage: span.status?.message,\n            instrumentationLibraryName: librarySpan.instrumentationLibrary?.name,\n            instrumentationLibraryVersion: librarySpan.instrumentationLibrary?.version,\n            traceState: span.traceState,\n            serviceTags,\n            startTime: span.startTimeUnixNano! / 1000000,\n            duration: (span.endTimeUnixNano! - span.startTimeUnixNano!) / 1000000,\n            tags: getSpanTags(span),\n            logs: getLogs(span),\n            references: getReferences(span),\n          });\n        }\n      }\n    }\n  } catch (error) {\n    console.error(error);\n    return { error: { message: 'JSON is not valid OpenTelemetry format: ' + error }, data: [] };\n  }\n\n  let data = [frame];\n  if (nodeGraph) {\n    data.push(...(createNodeGraphFrames(frame) as MutableDataFrame[]));\n  }\n\n  return { data };\n}\n\n/**\n * Transforms trace dataframes to the OpenTelemetry format\n */\nexport function transformToOTLP(data: MutableDataFrame): {\n  batches: collectorTypes.opentelemetryProto.trace.v1.ResourceSpans[];\n} {\n  let result: { batches: collectorTypes.opentelemetryProto.trace.v1.ResourceSpans[] } = {\n    batches: [],\n  };\n\n  // Lookup object to see which batch contains spans for which services\n  let services: { [key: string]: number } = {};\n\n  for (let i = 0; i < data.length; i++) {\n    const span = data.get(i);\n\n    // Group spans based on service\n    if (!services[span.serviceName]) {\n      services[span.serviceName] = result.batches.length;\n      result.batches.push({\n        resource: {\n          attributes: [],\n          droppedAttributesCount: 0,\n        },\n        instrumentationLibrarySpans: [\n          {\n            spans: [],\n          },\n        ],\n      });\n    }\n\n    let batchIndex = services[span.serviceName];\n\n    // Populate resource attributes from service tags\n    if (result.batches[batchIndex].resource!.attributes.length === 0) {\n      result.batches[batchIndex].resource!.attributes = tagsToAttributes(span.serviceTags);\n    }\n\n    // Populate instrumentation library if it exists\n    if (!result.batches[batchIndex].instrumentationLibrarySpans[0].instrumentationLibrary) {\n      if (span.instrumentationLibraryName) {\n        result.batches[batchIndex].instrumentationLibrarySpans[0].instrumentationLibrary = {\n          name: span.instrumentationLibraryName,\n          version: span.instrumentationLibraryVersion ? span.instrumentationLibraryVersion : '',\n        };\n      }\n    }\n\n    result.batches[batchIndex].instrumentationLibrarySpans[0].spans.push({\n      traceId: span.traceID.padStart(32, '0'),\n      spanId: span.spanID,\n      parentSpanId: span.parentSpanID || '',\n      traceState: span.traceState || '',\n      name: span.operationName,\n      kind: getOTLPSpanKind(span.kind) as any,\n      startTimeUnixNano: span.startTime * 1000000,\n      endTimeUnixNano: (span.startTime + span.duration) * 1000000,\n      attributes: span.tags ? tagsToAttributes(span.tags) : [],\n      droppedAttributesCount: 0,\n      droppedEventsCount: 0,\n      droppedLinksCount: 0,\n      status: getOTLPStatus(span),\n      events: getOTLPEvents(span.logs),\n      links: getOTLPReferences(span.references),\n    });\n  }\n\n  return result;\n}\n\nfunction getOTLPSpanKind(kind: string): string | undefined {\n  let spanKind = undefined;\n  if (kind) {\n    switch (kind) {\n      case 'server':\n        spanKind = 'SPAN_KIND_SERVER';\n        break;\n      case 'client':\n        spanKind = 'SPAN_KIND_CLIENT';\n        break;\n      case 'producer':\n        spanKind = 'SPAN_KIND_PRODUCER';\n        break;\n      case 'consumer':\n        spanKind = 'SPAN_KIND_CONSUMER';\n        break;\n      case 'internal':\n        spanKind = 'SPAN_KIND_INTERNAL';\n        break;\n    }\n  }\n  return spanKind;\n}\n\n/**\n * Converts key-value tags to OTLP attributes and removes tags added by Grafana\n */\nfunction tagsToAttributes(tags: TraceKeyValuePair[]): collectorTypes.opentelemetryProto.common.v1.KeyValue[] {\n  return tags.reduce<collectorTypes.opentelemetryProto.common.v1.KeyValue[]>(\n    (attributes, tag) => [...attributes, { key: tag.key, value: toAttributeValue(tag) }],\n    []\n  );\n}\n\n/**\n * Returns the correct OTLP AnyValue based on the value of the tag value\n */\nfunction toAttributeValue(tag: TraceKeyValuePair): collectorTypes.opentelemetryProto.common.v1.AnyValue {\n  if (typeof tag.value === 'string') {\n    return { stringValue: tag.value };\n  } else if (typeof tag.value === 'boolean') {\n    return { boolValue: tag.value };\n  } else if (typeof tag.value === 'number') {\n    if (tag.value % 1 === 0) {\n      return { intValue: tag.value };\n    } else {\n      return { doubleValue: tag.value };\n    }\n  } else if (typeof tag.value === 'object') {\n    if (Array.isArray(tag.value)) {\n      const values: collectorTypes.opentelemetryProto.common.v1.AnyValue[] = [];\n      for (const val of tag.value) {\n        values.push(toAttributeValue(val));\n      }\n\n      return { arrayValue: { values } };\n    }\n  }\n  return { stringValue: tag.value };\n}\n\nfunction getOTLPStatus(span: TraceSpanRow): SpanStatus | undefined {\n  let status = undefined;\n  if (span.statusCode !== undefined) {\n    status = {\n      code: span.statusCode,\n      message: span.statusMessage ? span.statusMessage : '',\n    };\n  }\n  return status;\n}\n\nfunction getOTLPEvents(logs: TraceLog[]): collectorTypes.opentelemetryProto.trace.v1.Span.Event[] | undefined {\n  if (!logs || !logs.length) {\n    return undefined;\n  }\n\n  let events: collectorTypes.opentelemetryProto.trace.v1.Span.Event[] = [];\n  for (const log of logs) {\n    let event: collectorTypes.opentelemetryProto.trace.v1.Span.Event = {\n      timeUnixNano: log.timestamp * 1000000,\n      attributes: [],\n      droppedAttributesCount: 0,\n      name: log.name || '',\n    };\n    for (const field of log.fields) {\n      event.attributes!.push({\n        key: field.key,\n        value: toAttributeValue(field),\n      });\n    }\n    events.push(event);\n  }\n  return events;\n}\n\nfunction getOTLPReferences(\n  references: TraceSpanReference[]\n): collectorTypes.opentelemetryProto.trace.v1.Span.Link[] | undefined {\n  if (!references || !references.length) {\n    return undefined;\n  }\n\n  let links: collectorTypes.opentelemetryProto.trace.v1.Span.Link[] = [];\n  for (const ref of references) {\n    let link: collectorTypes.opentelemetryProto.trace.v1.Span.Link = {\n      traceId: ref.traceID,\n      spanId: ref.spanID,\n      attributes: [],\n      droppedAttributesCount: 0,\n    };\n    if (ref.tags?.length) {\n      for (const tag of ref.tags) {\n        link.attributes?.push({\n          key: tag.key,\n          value: toAttributeValue(tag),\n        });\n      }\n    }\n    links.push(link);\n  }\n  return links;\n}\n\nexport const RelatedProfilesTitle = 'Related profiles';\n\nexport function transformTrace(\n  response: DataQueryResponse,\n  instanceSettings: DataSourceInstanceSettings<TempoJsonData>,\n  nodeGraph = false\n): DataQueryResponse {\n  const frame = response.data[0];\n\n  if (!frame) {\n    return emptyDataQueryResponse;\n  }\n\n  // Get profiles links\n  const traceToProfilesData: TraceToProfilesData | undefined = instanceSettings?.jsonData;\n  const traceToProfilesOptions = traceToProfilesData?.tracesToProfiles;\n  let profilesDataSourceSettings: DataSourceInstanceSettings<DataSourceJsonData> | undefined;\n  if (traceToProfilesOptions?.datasourceUid) {\n    profilesDataSourceSettings = getDataSourceSrv().getInstanceSettings(traceToProfilesOptions.datasourceUid);\n  }\n\n  if (traceToProfilesOptions && profilesDataSourceSettings) {\n    const customQuery = traceToProfilesOptions.customQuery ? traceToProfilesOptions.query : undefined;\n    const dataLink: DataLink = {\n      title: RelatedProfilesTitle,\n      url: '',\n      internal: {\n        datasourceUid: profilesDataSourceSettings.uid,\n        datasourceName: profilesDataSourceSettings.name,\n        query: {\n          labelSelector: customQuery ? customQuery : '{${__tags}}',\n          groupBy: [],\n          profileTypeId: traceToProfilesOptions.profileTypeId ?? '',\n          queryType: 'profile',\n          spanSelector: ['${__span.tags[\"pyroscope.profile.id\"]}'],\n          refId: 'profile',\n        },\n      },\n      origin: DataLinkConfigOrigin.Datasource,\n    };\n\n    frame.fields.forEach((field: Field) => {\n      if (field.name === 'tags') {\n        field.config.links = [dataLink];\n      }\n    });\n  }\n\n  let data = [...response.data];\n  if (nodeGraph) {\n    data.push(...createNodeGraphFrames(toDataFrame(frame)));\n  }\n\n  return {\n    ...response,\n    data,\n  };\n}\n\nfunction transformToTraceData(data: TraceSearchMetadata) {\n  return {\n    traceID: data.traceID,\n    startTime: parseInt(data.startTimeUnixNano!, 10) / 1000000,\n    traceDuration: data.durationMs,\n    traceService: data.rootServiceName || '',\n    traceName: data.rootTraceName || '',\n  };\n}\n\nexport function enhanceTraceQlMetricsResponse(\n  data: DataQueryResponse,\n  instanceSettings: DataSourceInstanceSettings\n): DataQueryResponse {\n  data.data\n    ?.filter((f) => f.name === 'exemplar' && f.meta?.dataTopic === 'annotations')\n    .map((frame) => {\n      const traceIDField = frame.fields.find((field: Field) => field.name === 'traceId');\n      if (traceIDField) {\n        const links = getDataLinks(instanceSettings);\n        traceIDField.config.links = traceIDField.config.links?.length\n          ? [...traceIDField.config.links, ...links]\n          : links;\n      }\n      return frame;\n    });\n  return data;\n}\n\nfunction getDataLinks(instanceSettings: DataSourceInstanceSettings): DataLink[] {\n  const dataLinks: DataLink[] = [];\n\n  if (instanceSettings.uid) {\n    dataLinks.push({\n      title: 'View trace',\n      url: '',\n      internal: {\n        query: { query: '${__value.raw}', queryType: 'traceql' },\n        datasourceUid: instanceSettings.uid,\n        datasourceName: instanceSettings?.name ?? 'Data source not found',\n      },\n    });\n  }\n  return dataLinks;\n}\n\nexport function formatTraceQLResponse(\n  data: TraceSearchMetadata[],\n  instanceSettings: DataSourceInstanceSettings,\n  tableType?: SearchTableType\n) {\n  switch (tableType) {\n    case SearchTableType.Spans:\n      return createTableFrameFromTraceQlQueryAsSpans(data, instanceSettings);\n    case SearchTableType.Raw:\n      return createDataFrameFromTraceQlQuery(data);\n    default:\n      return createTableFrameFromTraceQlQuery(data, instanceSettings);\n  }\n}\n\nfunction createDataFrameFromTraceQlQuery(data: TraceSearchMetadata[]) {\n  return [\n    createDataFrame({\n      name: 'Raw response',\n      refId: 'raw',\n      fields: [{ name: 'response', type: FieldType.string, values: [JSON.stringify(data, null, 2)] }],\n    }),\n  ];\n}\n\n/**\n * Create data frame while adding spans for each trace into a subtable.\n * @param data\n * @param instanceSettings\n */\nexport function createTableFrameFromTraceQlQuery(\n  data: TraceSearchMetadata[],\n  instanceSettings: DataSourceInstanceSettings\n): DataFrame[] {\n  const frame = createDataFrame({\n    name: 'Traces',\n    refId: 'traces',\n    fields: [\n      {\n        name: 'traceID',\n        type: FieldType.string,\n        config: {\n          unit: 'string',\n          displayNameFromDS: 'Trace ID',\n          custom: {\n            width: 200,\n          },\n          links: [\n            {\n              title: 'Trace: ${__value.raw}',\n              url: '',\n              internal: {\n                datasourceUid: instanceSettings.uid,\n                datasourceName: instanceSettings.name,\n                query: {\n                  query: '${__value.raw}',\n                  queryType: 'traceql',\n                },\n              },\n            },\n          ],\n        },\n      },\n      {\n        name: 'startTime',\n        type: FieldType.time,\n        config: {\n          displayNameFromDS: 'Start time',\n          custom: {\n            width: 200,\n          },\n        },\n      },\n      { name: 'traceService', type: FieldType.string, config: { displayNameFromDS: 'Service' } },\n      { name: 'traceName', type: FieldType.string, config: { displayNameFromDS: 'Name' } },\n      {\n        name: 'traceDuration',\n        type: FieldType.number,\n        config: {\n          displayNameFromDS: 'Duration',\n          unit: 'ms',\n          custom: {\n            width: 120,\n          },\n        },\n      },\n      {\n        name: 'nested',\n        type: FieldType.nestedFrames,\n      },\n    ],\n    meta: {\n      preferredVisualisationType: 'table',\n      uniqueRowIdFields: [0],\n    },\n  });\n\n  if (!data?.length) {\n    return [frame];\n  }\n  frame.length = data.length;\n\n  data\n    // Show the most recent traces\n    .sort((a, b) => parseInt(b?.startTimeUnixNano!, 10) / 1000000 - parseInt(a?.startTimeUnixNano!, 10) / 1000000)\n    .forEach((trace) => {\n      const traceData: TraceTableData = transformToTraceData(trace);\n      frame.fields[0].values.push(traceData.traceID);\n      frame.fields[1].values.push(traceData.startTime);\n      frame.fields[2].values.push(traceData.traceService);\n      frame.fields[3].values.push(traceData.traceName);\n\n      // Note: this is a workaround to display the duration in the table when it is <1ms\n      // and the duration is not available in the trace data response.\n      frame.fields[4].values.push(traceData.traceDuration ? traceData.traceDuration : '<1ms');\n\n      if (trace.spanSets) {\n        frame.fields[5].values.push(\n          trace.spanSets.map((spanSet: Spanset) => {\n            return traceSubFrame(trace, spanSet, instanceSettings);\n          })\n        );\n      } else if (trace.spanSet) {\n        frame.fields[5].values.push([traceSubFrame(trace, trace.spanSet, instanceSettings)]);\n      }\n    });\n\n  return [frame];\n}\n\nexport function createTableFrameFromTraceQlQueryAsSpans(\n  data: TraceSearchMetadata[] | undefined,\n  instanceSettings: DataSourceInstanceSettings\n): DataFrame[] {\n  const spanDynamicAttrs: Record<string, FieldDTO> = {};\n  let hasNameAttribute = false;\n\n  data?.forEach((trace) =>\n    getSpanSets(trace).forEach((ss) => {\n      ss.attributes?.forEach((attr) => {\n        spanDynamicAttrs[attr.key] = {\n          name: attr.key,\n          type: FieldType.string,\n          config: { displayNameFromDS: attr.key },\n        };\n      });\n      ss.spans.forEach((span) => {\n        if (span.name) {\n          hasNameAttribute = true;\n        }\n        span.attributes?.forEach((attr) => {\n          spanDynamicAttrs[attr.key] = {\n            name: attr.key,\n            type: FieldType.string,\n            config: { displayNameFromDS: attr.key },\n          };\n        });\n      });\n    })\n  );\n\n  const frame = new MutableDataFrame({\n    name: 'Spans',\n    refId: 'traces',\n    fields: [\n      {\n        name: 'traceIdHidden',\n        type: FieldType.string,\n        config: {\n          custom: { hidden: true },\n        },\n      },\n      {\n        name: 'traceService',\n        type: FieldType.string,\n        config: {\n          displayNameFromDS: 'Trace Service',\n          custom: {\n            width: 200,\n          },\n        },\n      },\n      {\n        name: 'traceName',\n        type: FieldType.string,\n        config: {\n          displayNameFromDS: 'Trace Name',\n          custom: {\n            width: 200,\n          },\n        },\n      },\n      {\n        name: 'spanID',\n        type: FieldType.string,\n        config: {\n          unit: 'string',\n          displayNameFromDS: 'Span ID',\n          custom: {\n            width: 200,\n          },\n          links: [\n            {\n              title: 'Span: ${__value.raw}',\n              url: '',\n              internal: {\n                datasourceUid: instanceSettings.uid,\n                datasourceName: instanceSettings.name,\n                query: {\n                  query: '${__data.fields.traceIdHidden}',\n                  queryType: 'traceql',\n                },\n                panelsState: {\n                  trace: {\n                    spanId: '${__value.raw}',\n                  },\n                },\n              },\n            },\n          ],\n        },\n      },\n      {\n        name: 'time',\n        type: FieldType.time,\n        config: {\n          displayNameFromDS: 'Start time',\n        },\n      },\n      {\n        name: 'name',\n        type: FieldType.string,\n        config: { displayNameFromDS: 'Name', custom: { hidden: !hasNameAttribute } },\n      },\n      ...Object.values(spanDynamicAttrs).sort((a, b) => a.name.localeCompare(b.name)),\n      {\n        name: 'duration',\n        type: FieldType.number,\n        config: {\n          displayNameFromDS: 'Duration',\n          unit: 'ns',\n          custom: {\n            width: 120,\n          },\n        },\n      },\n    ],\n    meta: {\n      preferredVisualisationType: 'table',\n    },\n  });\n\n  if (!data || !data.length) {\n    return [frame];\n  }\n\n  data\n    // Show the most recent traces\n    .sort((a, b) => parseInt(b?.startTimeUnixNano!, 10) / 1000000 - parseInt(a?.startTimeUnixNano!, 10) / 1000000)\n    .forEach((trace) => {\n      getSpanSets(trace).forEach((spanSet) => {\n        spanSet.spans.forEach((span) => {\n          frame.add(transformSpanToTraceData(span, spanSet, trace));\n        });\n      });\n    });\n\n  return [frame];\n}\n\n/**\n * Get the spansets of a trace.\n *\n * Field `spanSets` is preferred to `spanSet` since the latter is deprecated in Tempo, but we\n * support both for backward compatibility.\n *\n * @param trace a trace\n * @returns the spansets of the trace, if existing\n */\nconst getSpanSets = (trace: TraceSearchMetadata): Spanset[] => {\n  return trace.spanSets || (trace.spanSet ? [trace.spanSet] : []);\n};\n\nconst traceSubFrame = (\n  trace: TraceSearchMetadata,\n  spanSet: Spanset,\n  instanceSettings: DataSourceInstanceSettings\n): DataFrame => {\n  const spanDynamicAttrs: Record<string, FieldDTO> = {};\n  let hasNameAttribute = false;\n\n  spanSet.attributes?.map((attr) => {\n    spanDynamicAttrs[attr.key] = {\n      name: attr.key,\n      type: FieldType.string,\n      config: { displayNameFromDS: attr.key },\n      values: [],\n    };\n  });\n  spanSet.spans.forEach((span) => {\n    if (span.name) {\n      hasNameAttribute = true;\n    }\n    span.attributes?.forEach((attr) => {\n      spanDynamicAttrs[attr.key] = {\n        name: attr.key,\n        type: FieldType.string,\n        config: { displayNameFromDS: attr.key },\n        values: [],\n      };\n    });\n  });\n\n  const subFrame = new MutableDataFrame({\n    fields: [\n      {\n        name: 'traceIdHidden',\n        type: FieldType.string,\n        config: {\n          custom: { hidden: true },\n        },\n        values: [],\n      },\n      {\n        name: 'spanID',\n        type: FieldType.string,\n        values: [],\n        config: {\n          unit: 'string',\n          displayNameFromDS: 'Span ID',\n          custom: {\n            width: 200,\n          },\n          links: [\n            {\n              title: 'Span: ${__value.raw}',\n              url: '',\n              internal: {\n                datasourceUid: instanceSettings.uid,\n                datasourceName: instanceSettings.name,\n                query: {\n                  query: '${__data.fields.traceIdHidden}',\n                  queryType: 'traceql',\n                },\n                panelsState: {\n                  trace: {\n                    spanId: '${__value.raw}',\n                  },\n                },\n              },\n            },\n          ],\n        },\n      },\n      {\n        name: 'time',\n        type: FieldType.time,\n        config: {\n          displayNameFromDS: 'Start time',\n          custom: {\n            width: 200,\n          },\n        },\n      },\n      {\n        name: 'name',\n        type: FieldType.string,\n        values: [],\n        config: { displayNameFromDS: 'Name', custom: { hidden: !hasNameAttribute } },\n      },\n      ...Object.values(spanDynamicAttrs).sort((a, b) => a.name.localeCompare(b.name)),\n      {\n        name: 'duration',\n        type: FieldType.number,\n        values: [],\n        config: {\n          displayNameFromDS: 'Duration',\n          unit: 'ns',\n          custom: {\n            width: 120,\n          },\n        },\n      },\n    ],\n    meta: {\n      preferredVisualisationType: 'table',\n    },\n  });\n\n  // TODO: this should be done in `applyFieldOverrides` instead recursively for the nested `DataFrames`\n  const theme = createTheme();\n  for (const field of subFrame.fields) {\n    field.display = getDisplayProcessor({ field, theme });\n  }\n\n  spanSet.spans.forEach((span) => {\n    subFrame.add(transformSpanToTraceData(span, spanSet, trace));\n  });\n\n  return subFrame;\n};\n\ninterface TraceTableData {\n  [key: string]: string | number | boolean | undefined; // dynamic attribute name\n  traceID?: string;\n  spanID?: string;\n  startTime?: number;\n  name?: string;\n  traceDuration?: number;\n}\n\nfunction transformSpanToTraceData(span: Span, spanSet: Spanset, trace: TraceSearchMetadata): TraceTableData {\n  const spanStartTimeUnixMs = parseInt(span.startTimeUnixNano, 10) / 1000000;\n\n  const data: TraceTableData = {\n    traceIdHidden: trace.traceID,\n    traceService: trace.rootServiceName || '',\n    traceName: trace.rootTraceName || '',\n    spanID: span.spanID,\n    time: spanStartTimeUnixMs,\n    duration: parseInt(span.durationNanos, 10),\n    name: span.name,\n  };\n\n  let attrs: SpanAttributes[] = [];\n  if (spanSet.attributes) {\n    attrs = attrs.concat(spanSet.attributes);\n  }\n  if (span.attributes) {\n    attrs = attrs.concat(span.attributes);\n  }\n\n  attrs.forEach((attr) => {\n    if (attr.value.boolValue || attr.value.Value?.bool_value) {\n      data[attr.key] = attr.value.boolValue || attr.value.Value?.bool_value;\n    }\n    if (attr.value.doubleValue || attr.value.Value?.double_value) {\n      data[attr.key] = attr.value.doubleValue || attr.value.Value?.double_value;\n    }\n    if (attr.value.intValue || attr.value.Value?.int_value) {\n      data[attr.key] = attr.value.intValue || attr.value.Value?.int_value;\n    }\n    if (attr.value.stringValue || attr.value.Value?.string_value) {\n      data[attr.key] = attr.value.stringValue || attr.value.Value?.string_value;\n    }\n  });\n\n  return data;\n}\n\nconst emptyDataQueryResponse = {\n  data: [\n    new MutableDataFrame({\n      fields: [\n        {\n          name: 'trace',\n          type: FieldType.trace,\n          values: [],\n        },\n      ],\n      meta: {\n        preferredVisualisationType: 'trace',\n        custom: {\n          traceFormat: 'otlp',\n        },\n      },\n    }),\n  ],\n};\n","import {\n  DataFrame,\n  DataFrameType,\n  DataQueryResponse,\n  DataQueryResponseData,\n  Field,\n  FieldType,\n  PanelData,\n  QueryResultMetaStat,\n  shallowCompare,\n} from '@grafana/data';\n\nexport function combinePanelData(currentData: PanelData, newData: PanelData): PanelData {\n  const series = combineResponses({ data: currentData.series }, { data: newData.series }).data;\n  return { ...currentData, series };\n}\n\nexport function combineResponses(currentResult: DataQueryResponse | null, newResult: DataQueryResponse) {\n  if (!currentResult) {\n    return cloneQueryResponse(newResult);\n  }\n\n  newResult.data.forEach((newFrame) => {\n    const currentFrame = currentResult.data.find((frame) => shouldCombine(frame, newFrame));\n    if (!currentFrame) {\n      currentResult.data.push(cloneDataFrame(newFrame));\n      return;\n    }\n    combineFrames(currentFrame, newFrame);\n  });\n\n  const mergedErrors = [...(currentResult.errors ?? []), ...(newResult.errors ?? [])];\n\n  // we make sure to have `.errors` as undefined, instead of empty-array\n  // when no errors.\n\n  if (mergedErrors.length > 0) {\n    currentResult.errors = mergedErrors;\n  }\n\n  // the `.error` attribute is obsolete now,\n  // but we have to maintain it, otherwise\n  // some grafana parts do not behave well.\n  // we just choose the old error, if it exists,\n  // otherwise the new error, if it exists.\n  const mergedError = currentResult.error ?? newResult.error;\n  if (mergedError != null) {\n    currentResult.error = mergedError;\n  }\n\n  const mergedTraceIds = [...(currentResult.traceIds ?? []), ...(newResult.traceIds ?? [])];\n  if (mergedTraceIds.length > 0) {\n    currentResult.traceIds = mergedTraceIds;\n  }\n\n  return currentResult;\n}\n\nfunction combineFrames(dest: DataFrame, source: DataFrame) {\n  // `dest` and `source` might have more or less fields, we need to go through all of them\n  const totalFields = Math.max(dest.fields.length, source.fields.length);\n  for (let i = 0; i < totalFields; i++) {\n    // For now, skip undefined fields that exist in the new frame\n    if (!dest.fields[i]) {\n      continue;\n    }\n    // Index is not reliable when frames have disordered fields, or an extra/missing field, so we find them by name.\n    // If the field has no name, we fallback to the old index version.\n    const sourceField = findSourceField(dest.fields[i], source.fields, i);\n    if (!sourceField) {\n      continue;\n    }\n    dest.fields[i].values = [].concat.apply(sourceField.values, dest.fields[i].values);\n    if (sourceField.nanos) {\n      const nanos: number[] = dest.fields[i].nanos?.slice() || [];\n      dest.fields[i].nanos = source.fields[i].nanos?.concat(nanos);\n    }\n  }\n  dest.length += source.length;\n  dest.meta = {\n    ...dest.meta,\n    stats: getCombinedMetadataStats(dest.meta?.stats ?? [], source.meta?.stats ?? []),\n  };\n}\n\nfunction findSourceField(referenceField: Field, sourceFields: Field[], index: number) {\n  const candidates = sourceFields.filter((f) => f.name === referenceField.name);\n\n  if (candidates.length === 1) {\n    return candidates[0];\n  }\n\n  if (referenceField.labels) {\n    return candidates.find((candidate) => shallowCompare(referenceField.labels ?? {}, candidate.labels ?? {}));\n  }\n\n  return sourceFields[index];\n}\n\nconst TOTAL_BYTES_STAT = 'Summary: total bytes processed';\n// This is specific for Loki\nfunction getCombinedMetadataStats(\n  destStats: QueryResultMetaStat[],\n  sourceStats: QueryResultMetaStat[]\n): QueryResultMetaStat[] {\n  // in the current approach, we only handle a single stat\n  const destStat = destStats.find((s) => s.displayName === TOTAL_BYTES_STAT);\n  const sourceStat = sourceStats.find((s) => s.displayName === TOTAL_BYTES_STAT);\n\n  if (sourceStat != null && destStat != null) {\n    return [{ value: sourceStat.value + destStat.value, displayName: TOTAL_BYTES_STAT, unit: destStat.unit }];\n  }\n\n  // maybe one of them exist\n  const eitherStat = sourceStat ?? destStat;\n  if (eitherStat != null) {\n    return [eitherStat];\n  }\n\n  return [];\n}\n\n/**\n * Deep clones a DataQueryResponse\n */\nexport function cloneQueryResponse(response: DataQueryResponse): DataQueryResponse {\n  const newResponse = {\n    ...response,\n    data: response.data.map(cloneDataFrame),\n  };\n  return newResponse;\n}\n\nfunction cloneDataFrame(frame: DataQueryResponseData): DataQueryResponseData {\n  return {\n    ...frame,\n    fields: frame.fields.map((field: Field) => ({\n      ...field,\n      values: field.values,\n    })),\n  };\n}\n\nfunction shouldCombine(frame1: DataFrame, frame2: DataFrame): boolean {\n  if (frame1.refId !== frame2.refId || frame1.name !== frame2.name) {\n    return false;\n  }\n\n  const frameType1 = frame1.meta?.type;\n  const frameType2 = frame2.meta?.type;\n\n  if (frameType1 !== frameType2) {\n    // we do not join things that have a different type\n    return false;\n  }\n\n  // metric range query data\n  if (frameType1 === DataFrameType.TimeSeriesMulti) {\n    const field1 = frame1.fields.find((f) => f.type === FieldType.number);\n    const field2 = frame2.fields.find((f) => f.type === FieldType.number);\n    if (field1 === undefined || field2 === undefined) {\n      // should never happen\n      return false;\n    }\n\n    return shallowCompare(field1.labels ?? {}, field2.labels ?? {});\n  }\n\n  // logs query data\n  // logs use a special attribute in the dataframe's \"custom\" section\n  // because we do not have a good \"frametype\" value for them yet.\n  const customType1 = frame1.meta?.custom?.frameType;\n  const customType2 = frame2.meta?.custom?.frameType;\n  // Legacy frames have this custom type\n  if (customType1 === 'LabeledTimeValues' && customType2 === 'LabeledTimeValues') {\n    return true;\n  } else if (customType1 === customType2) {\n    // Data plane frames don't\n    return true;\n  }\n\n  // should never reach here\n  return false;\n}\n","import { capitalize } from 'lodash';\nimport { map, Observable, scan, takeWhile } from 'rxjs';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {\n  DataFrame,\n  dataFrameFromJSON,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataSourceInstanceSettings,\n  FieldCache,\n  FieldType,\n  LiveChannelScope,\n  LoadingState,\n  MutableDataFrame,\n  sortDataFrame,\n  ThresholdsConfig,\n  ThresholdsMode,\n} from '@grafana/data';\nimport { cloneQueryResponse, combineResponses } from '@grafana/o11y-ds-frontend';\nimport { getGrafanaLiveSrv } from '@grafana/runtime';\n\nimport { SearchStreamingState } from './dataquery.gen';\nimport { DEFAULT_SPSS, TempoDatasource } from './datasource';\nimport { formatTraceQLResponse } from './resultTransformer';\nimport { SearchMetrics, TempoJsonData, TempoQuery } from './types';\nimport { stepToNanos } from './utils';\n\nfunction getLiveStreamKey(): string {\n  return uuidv4();\n}\n\nexport function doTempoSearchStreaming(\n  query: TempoQuery,\n  ds: TempoDatasource,\n  options: DataQueryRequest<TempoQuery>,\n  instanceSettings: DataSourceInstanceSettings<TempoJsonData>\n): Observable<DataQueryResponse> {\n  const range = options.range;\n\n  let frames: DataFrame[] | undefined = undefined;\n  let state: LoadingState = LoadingState.NotStarted;\n  const requestTime = performance.now();\n\n  return getGrafanaLiveSrv()\n    .getStream<MutableDataFrame>({\n      scope: LiveChannelScope.DataSource,\n      namespace: ds.uid,\n      path: `search/${getLiveStreamKey()}`,\n      data: {\n        ...query,\n        SpansPerSpanSet: query.spss ?? DEFAULT_SPSS,\n        timeRange: {\n          from: range.from.toISOString(),\n          to: range.to.toISOString(),\n        },\n      },\n    })\n    .pipe(\n      takeWhile((evt) => {\n        if ('message' in evt && evt?.message) {\n          const frameState: SearchStreamingState = evt.message.data.values[2][0];\n          if (frameState === SearchStreamingState.Done || frameState === SearchStreamingState.Error) {\n            return false;\n          }\n        }\n        return true;\n      }, true)\n    )\n    .pipe(\n      map((evt) => {\n        if ('message' in evt && evt?.message) {\n          const currentTime = performance.now();\n          const elapsedTime = currentTime - requestTime;\n\n          const messageFrame = dataFrameFromJSON(evt.message);\n          const fieldCache = new FieldCache(messageFrame);\n\n          const traces = fieldCache.getFieldByName('result')?.values[0];\n          const metrics = fieldCache.getFieldByName('metrics')?.values[0];\n          const frameState = fieldCache.getFieldByName('state')?.values[0];\n          const error = fieldCache.getFieldByName('error')?.values[0];\n\n          switch (frameState) {\n            case SearchStreamingState.Done:\n              state = LoadingState.Done;\n              break;\n            case SearchStreamingState.Streaming:\n              state = LoadingState.Streaming;\n              break;\n            case SearchStreamingState.Error:\n              throw new Error(error);\n          }\n\n          // The order of the frames is important. The metrics frame should always be the last frame.\n          // This is because the metrics frame is used to display the progress of the streaming query\n          // and we would like to display the results first.\n          frames = [\n            ...formatTraceQLResponse(traces, instanceSettings, query.tableType),\n            metricsDataFrame(metrics, frameState, elapsedTime),\n          ];\n        }\n        return {\n          data: frames || [],\n          state,\n        };\n      })\n    );\n}\n\nexport function doTempoMetricsStreaming(\n  query: TempoQuery,\n  ds: TempoDatasource,\n  options: DataQueryRequest<TempoQuery>\n): Observable<DataQueryResponse> {\n  const range = options.range;\n  const key = getLiveStreamKey();\n\n  let state: LoadingState = LoadingState.NotStarted;\n  const step = stepToNanos(query.step);\n\n  return getGrafanaLiveSrv()\n    .getStream<MutableDataFrame>({\n      scope: LiveChannelScope.DataSource,\n      namespace: ds.uid,\n      path: `metrics/${key}`,\n      data: {\n        ...query,\n        step,\n        timeRange: {\n          from: range.from.toISOString(),\n          to: range.to.toISOString(),\n        },\n      },\n    })\n    .pipe(\n      takeWhile((evt) => {\n        if ('message' in evt && evt?.message) {\n          const frameState: SearchStreamingState = evt.message.data.values[2][0];\n          if (frameState === SearchStreamingState.Done || frameState === SearchStreamingState.Error) {\n            return false;\n          }\n        }\n        return true;\n      }, true),\n      map((evt) => {\n        let newResult: DataQueryResponse = { data: [], state: LoadingState.NotStarted };\n        if ('message' in evt && evt?.message) {\n          const messageFrame = dataFrameFromJSON(evt.message);\n          const fieldCache = new FieldCache(messageFrame);\n\n          const data = fieldCache.getFieldByName('result')?.values[0];\n          const frameState = fieldCache.getFieldByName('state')?.values[0];\n          const error = fieldCache.getFieldByName('error')?.values[0];\n\n          switch (frameState) {\n            case SearchStreamingState.Done:\n              state = LoadingState.Done;\n              break;\n            case SearchStreamingState.Streaming:\n              state = LoadingState.Streaming;\n              break;\n            case SearchStreamingState.Error:\n              throw new Error(error);\n          }\n\n          newResult = {\n            data: data?.map(dataFrameFromJSON) ?? [],\n            state,\n          };\n        }\n\n        return newResult;\n      }),\n      // Merge results on acc\n      scan((acc, curr) => {\n        if (!curr) {\n          return acc;\n        }\n        if (!acc) {\n          return cloneQueryResponse(curr);\n        }\n        return mergeFrames(acc, curr);\n      })\n    );\n}\n\nfunction mergeFrames(acc: DataQueryResponse, newResult: DataQueryResponse): DataQueryResponse {\n  const result = combineResponses(cloneQueryResponse(acc), newResult);\n\n  // Remove duplicate time field values for all frames\n  result.data = result.data.map((frame: DataFrame) => {\n    let newFrame = frame;\n    const timeFieldIndex = frame.fields.findIndex((f) => f.type === FieldType.time);\n    if (timeFieldIndex >= 0) {\n      removeDuplicateTimeFieldValues(frame, timeFieldIndex);\n      newFrame = sortDataFrame(frame, timeFieldIndex);\n    }\n    return newFrame;\n  });\n\n  result.state = newResult.state;\n  return result;\n}\n\n/**\n * Remove duplicate time field values from the DataFrame. This is necessary because Tempo sends partial results to Grafana\n * that we append to an existing DataFrame. This can result in duplicate values for the same timestamp so this function removes\n * older values and keeps the latest value.\n * @param accFrame\n * @param timeFieldIndex\n */\nfunction removeDuplicateTimeFieldValues(accFrame: DataFrame, timeFieldIndex: number) {\n  const duplicatesMap = accFrame.fields[timeFieldIndex].values.reduce((acc: Record<number, number[]>, value, index) => {\n    if (acc[value]) {\n      acc[value].push(index);\n    } else {\n      acc[value] = [index];\n    }\n    return acc;\n  }, {});\n\n  const indexesToRemove = Object.values(duplicatesMap)\n    .filter((indexes) => indexes.length > 1)\n    .map((indexes) => indexes.slice(1))\n    .flat();\n  accFrame.fields.forEach((field) => {\n    field.values = field.values.filter((_, index) => !indexesToRemove.includes(index));\n  });\n}\n\nfunction metricsDataFrame(metrics: SearchMetrics, state: SearchStreamingState, elapsedTime: number) {\n  const progressThresholds: ThresholdsConfig = {\n    steps: [\n      {\n        color: 'blue',\n        value: -Infinity,\n      },\n      {\n        color: 'green',\n        value: 75,\n      },\n    ],\n    mode: ThresholdsMode.Absolute,\n  };\n\n  const frame: DataFrame = {\n    refId: 'streaming-progress',\n    name: 'Streaming Progress',\n    length: 1,\n    fields: [\n      {\n        name: 'state',\n        type: FieldType.string,\n        values: [capitalize(state.toString())],\n        config: {\n          displayNameFromDS: 'State',\n        },\n      },\n      {\n        name: 'elapsedTime',\n        type: FieldType.number,\n        values: [elapsedTime],\n        config: {\n          unit: 'ms',\n          displayNameFromDS: 'Elapsed Time',\n        },\n      },\n      {\n        name: 'totalBlocks',\n        type: FieldType.number,\n        values: [metrics.totalBlocks],\n        config: {\n          displayNameFromDS: 'Total Blocks',\n        },\n      },\n      {\n        name: 'completedJobs',\n        type: FieldType.number,\n        values: [metrics.completedJobs],\n        config: {\n          displayNameFromDS: 'Completed Jobs',\n        },\n      },\n      {\n        name: 'totalJobs',\n        type: FieldType.number,\n        values: [metrics.totalJobs],\n        config: {\n          displayNameFromDS: 'Total Jobs',\n        },\n      },\n      {\n        name: 'progress',\n        type: FieldType.number,\n        values: [\n          state === SearchStreamingState.Done ? 100 : ((metrics.completedJobs || 0) / (metrics.totalJobs || 1)) * 100,\n        ],\n        config: {\n          displayNameFromDS: 'Progress',\n          unit: 'percent',\n          min: 0,\n          max: 100,\n          custom: {\n            cellOptions: {\n              type: 'gauge',\n              mode: 'gradient',\n            },\n          },\n          thresholds: progressThresholds,\n        },\n      },\n    ],\n    meta: {\n      preferredVisualisationType: 'table',\n    },\n  };\n  return frame;\n}\n","import { from, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { DataQueryRequest, CustomVariableSupport, MetricFindValue } from '@grafana/data';\n\nimport { TempoVariableQuery, TempoVariableQueryEditor } from './VariableQueryEditor';\nimport { TempoDatasource } from './datasource';\n\nexport class TempoVariableSupport extends CustomVariableSupport<TempoDatasource, TempoVariableQuery> {\n  editor = TempoVariableQueryEditor;\n\n  constructor(private datasource: TempoDatasource) {\n    super();\n  }\n\n  query(request: DataQueryRequest<TempoVariableQuery>): Observable<{ data: MetricFindValue[] }> {\n    if (!this.datasource) {\n      throw new Error('Datasource not initialized');\n    }\n\n    const result = this.datasource.executeVariableQuery(request.targets[0]);\n    return from(result).pipe(map((data) => ({ data })));\n  }\n}\n","import { groupBy } from 'lodash';\nimport { EMPTY, forkJoin, from, lastValueFrom, merge, Observable, of } from 'rxjs';\nimport { catchError, concatMap, map, mergeMap, toArray } from 'rxjs/operators';\nimport semver from 'semver';\n\nimport {\n  CoreApp,\n  DataFrame,\n  DataFrameDTO,\n  DataLink,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataQueryResponseData,\n  DataSourceGetTagValuesOptions,\n  DataSourceInstanceSettings,\n  dateTime,\n  FieldType,\n  LoadingState,\n  NodeGraphDataFrameFieldNames,\n  rangeUtil,\n  ScopedVars,\n  SelectableValue,\n  TestDataSourceResponse,\n  urlUtil,\n} from '@grafana/data';\nimport { NodeGraphOptions, SpanBarOptions, TraceToLogsOptions } from '@grafana/o11y-ds-frontend';\nimport {\n  BackendSrvRequest,\n  config,\n  DataSourceWithBackend,\n  getBackendSrv,\n  getDataSourceSrv,\n  getTemplateSrv,\n  reportInteraction,\n  TemplateSrv,\n} from '@grafana/runtime';\nimport { BarGaugeDisplayMode, TableCellDisplayMode, VariableFormatID } from '@grafana/schema';\n\nimport { generateQueryFromAdHocFilters, getTagWithoutScope, interpolateFilters } from './SearchTraceQLEditor/utils';\nimport { TempoVariableQuery, TempoVariableQueryType } from './VariableQueryEditor';\nimport { PrometheusDatasource, PromQuery } from './_importedDependencies/datasources/prometheus/types';\nimport { TagLimitOptions } from './configuration/TagLimitSettings';\nimport { SearchTableType, TraceqlFilter, TraceqlSearchScope } from './dataquery.gen';\nimport {\n  defaultTableFilter,\n  durationMetric,\n  errorRateMetric,\n  failedMetric,\n  histogramMetric,\n  mapPromMetricsToServiceMap,\n  rateMetric,\n  serviceMapMetrics,\n  totalsMetric,\n} from './graphTransform';\nimport TempoLanguageProvider from './language_provider';\nimport { createTableFrameFromMetricsSummaryQuery, emptyResponse, MetricsSummary } from './metricsSummary';\nimport {\n  enhanceTraceQlMetricsResponse,\n  formatTraceQLResponse,\n  transformFromOTLP as transformFromOTEL,\n  transformTrace,\n} from './resultTransformer';\nimport { doTempoMetricsStreaming, doTempoSearchStreaming } from './streaming';\nimport { TempoJsonData, TempoQuery } from './types';\nimport { getErrorMessage, migrateFromSearchToTraceQLSearch } from './utils';\nimport { TempoVariableSupport } from './variables';\n\nexport const DEFAULT_LIMIT = 20;\nexport const DEFAULT_SPSS = 3; // spans per span set\n\nexport enum FeatureName {\n  searchStreaming = 'searchStreaming',\n  metricsStreaming = 'metricsStreaming',\n}\n\n/* Map, for each feature (e.g., streaming), the minimum Tempo version required to have that\n ** feature available. If the running Tempo instance on the user's backend is older than the\n ** target version, the feature is disabled in Grafana (frontend).\n */\nexport const featuresToTempoVersion = {\n  [FeatureName.searchStreaming]: '2.2.0',\n  [FeatureName.metricsStreaming]: '2.7.0',\n};\n\n// The version that we use as default in case we cannot retrieve it from the backend.\n// This is the last minor version of Tempo that does not expose the endpoint for build information.\nconst defaultTempoVersion = '2.1.0';\n\ninterface ServiceMapQueryResponse {\n  nodes: DataFrame;\n  edges: DataFrame;\n}\n\ninterface ServiceMapQueryResponseWithRates {\n  rates: Array<DataFrame | DataFrameDTO>;\n  nodes: DataFrame;\n  edges: DataFrame;\n}\n\nexport class TempoDatasource extends DataSourceWithBackend<TempoQuery, TempoJsonData> {\n  tracesToLogs?: TraceToLogsOptions;\n  serviceMap?: {\n    datasourceUid?: string;\n  };\n  search?: {\n    hide?: boolean;\n    filters?: TraceqlFilter[];\n  };\n  nodeGraph?: NodeGraphOptions;\n  traceQuery?: {\n    timeShiftEnabled?: boolean;\n    spanStartTimeShift?: string;\n    spanEndTimeShift?: string;\n  };\n  uploadedJson?: string | null = null;\n  spanBar?: SpanBarOptions;\n  tagLimit?: TagLimitOptions;\n  languageProvider: TempoLanguageProvider;\n\n  streamingEnabled?: {\n    search?: boolean;\n    metrics?: boolean;\n  };\n\n  // The version of Tempo running on the backend. `null` if we cannot retrieve it for whatever reason\n  tempoVersion?: string | null;\n\n  constructor(\n    public instanceSettings: DataSourceInstanceSettings<TempoJsonData>,\n    private readonly templateSrv: TemplateSrv = getTemplateSrv()\n  ) {\n    super(instanceSettings);\n\n    this.tracesToLogs = instanceSettings.jsonData.tracesToLogs;\n    this.serviceMap = instanceSettings.jsonData.serviceMap;\n    this.search = instanceSettings.jsonData.search;\n    this.nodeGraph = instanceSettings.jsonData.nodeGraph;\n    this.traceQuery = instanceSettings.jsonData.traceQuery;\n    this.streamingEnabled = instanceSettings.jsonData.streamingEnabled;\n\n    this.languageProvider = new TempoLanguageProvider(this);\n\n    if (!this.search?.filters) {\n      this.search = {\n        ...this.search,\n        filters: [\n          {\n            id: 'service-name',\n            tag: 'service.name',\n            operator: '=',\n            scope: TraceqlSearchScope.Resource,\n          },\n          { id: 'span-name', tag: 'name', operator: '=', scope: TraceqlSearchScope.Span },\n        ],\n      };\n    }\n\n    this.variables = new TempoVariableSupport(this);\n  }\n\n  async executeVariableQuery(query: TempoVariableQuery) {\n    // Avoid failing if the user did not select the query type (label names, label values, etc.)\n    if (query.type === undefined) {\n      return new Promise<Array<{ text: string }>>(() => []);\n    }\n\n    switch (query.type) {\n      case TempoVariableQueryType.LabelNames: {\n        return await this.labelNamesQuery();\n      }\n      case TempoVariableQueryType.LabelValues: {\n        return this.labelValuesQuery(query.label);\n      }\n      default: {\n        throw Error('Invalid query type: ' + query.type);\n      }\n    }\n  }\n\n  async labelNamesQuery(): Promise<Array<{ text: string }>> {\n    await this.languageProvider.fetchTags();\n    const tags = this.languageProvider.getAutocompleteTags();\n    return tags.filter((tag) => tag !== undefined).map((tag) => ({ text: tag }));\n  }\n\n  async labelValuesQuery(labelName?: string): Promise<Array<{ text: string }>> {\n    if (!labelName) {\n      return [];\n    }\n\n    let options;\n    try {\n      // Retrieve the scope of the tag\n      // Example: given `http.status_code`, we want scope `span`\n      // Note that we ignore possible name clashes, e.g., `http.status_code` in both `span` and `resource`\n      const scope: string | undefined = (this.languageProvider.tagsV2 || [])\n        // flatten the Scope objects\n        .flatMap((tagV2) => tagV2.tags.map((tag) => ({ scope: tagV2.name, name: tag })))\n        // find associated scope\n        .find((tag) => tag.name === labelName)?.scope;\n      if (!scope) {\n        throw Error(`Scope for tag ${labelName} not found`);\n      }\n\n      // For V2, we need to send scope and tag name, e.g. `span.http.status_code`,\n      // unless the tag has intrinsic scope\n      const scopeAndTag = scope === 'intrinsic' ? labelName : `${scope}.${labelName}`;\n      options = await this.languageProvider.getOptionsV2(scopeAndTag);\n    } catch {\n      // For V1, the tag name (e.g. `http.status_code`) is enough\n      options = await this.languageProvider.getOptionsV1(labelName);\n    }\n\n    return options.flatMap((option: SelectableValue<string>) =>\n      option.value !== undefined ? [{ text: option.value }] : []\n    );\n  }\n\n  // Allows to retrieve the list of tags for ad-hoc filters\n  async getTagKeys(): Promise<Array<{ text: string }>> {\n    await this.languageProvider.fetchTags();\n    const tags = this.languageProvider.tagsV2 || [];\n    return tags\n      .map(({ name, tags }) =>\n        tags.filter((tag) => tag !== undefined).map((t) => (name !== 'intrinsic' ? `${name}.${t}` : `${t}`))\n      )\n      .flat()\n      .map((tag) => ({ text: tag }));\n  }\n\n  // Allows to retrieve the list of tag values for ad-hoc filters\n  getTagValues(options: DataSourceGetTagValuesOptions<TempoQuery>): Promise<Array<{ text: string }>> {\n    const query = generateQueryFromAdHocFilters(options.filters, this.languageProvider);\n    return this.tagValuesQuery(options.key, query);\n  }\n\n  async tagValuesQuery(tag: string, query: string): Promise<Array<{ text: string }>> {\n    let options;\n    try {\n      // For V2, we need to send scope and tag name, e.g. `span.http.status_code`,\n      // unless the tag has intrinsic scope\n      options = await this.languageProvider.getOptionsV2(tag, query);\n    } catch {\n      // For V1, the tag name (e.g. `http.status_code`) is enough\n      options = await this.languageProvider.getOptionsV1(getTagWithoutScope(tag));\n    }\n\n    return options.flatMap((option: SelectableValue<string>) =>\n      option.value !== undefined ? [{ text: option.value }] : []\n    );\n  }\n\n  init = async () => {\n    const response = await lastValueFrom(\n      this._request('/api/status/buildinfo').pipe(\n        map((response) => response),\n        catchError((error) => {\n          console.error('Failure in retrieving build information', error.data.message);\n          return of({ error, data: { version: null } }); // unknown version\n        })\n      )\n    );\n    this.tempoVersion = response.data.version;\n  };\n\n  /**\n   * Check, for the given feature, whether it is available in Grafana.\n   *\n   * The check is done based on the version of the Tempo instance running on the backend and\n   * the minimum version required by the given feature to work.\n   *\n   * @param featureName - the name of the feature to consider\n   * @return true if the feature is available, false otherwise\n   */\n  isFeatureAvailable(featureName: FeatureName) {\n    // We know for old Tempo instances we don't know their version, so resort to default\n    const actualVersion = this.tempoVersion ?? defaultTempoVersion;\n\n    try {\n      return semver.gte(actualVersion, featuresToTempoVersion[featureName]);\n    } catch {\n      // We assume we are on a development and recent branch, thus we enable all features\n      return true;\n    }\n  }\n\n  /**\n   * Check if streaming for search queries is enabled (and available).\n   *\n   * We need to check:\n   * - the Tempo data source plugin toggle, to disable streaming if the user disabled it in the data source configuration\n   * - if Grafana Live is enabled\n   *\n   * @return true if streaming for search queries is enabled, false otherwise\n   */\n  isStreamingSearchEnabled() {\n    return this.streamingEnabled?.search && config.liveEnabled;\n  }\n  /**\n   * Check if streaming for metrics queries is enabled (and available).\n   *\n   * We need to check:\n   * - the Tempo data source plugin toggle, to disable streaming if the user disabled it in the data source configuration\n   * - if Grafana Live is enabled\n   *\n   * @return true if streaming for metrics queries is enabled, false otherwise\n   */\n  isStreamingMetricsEnabled() {\n    return this.streamingEnabled?.metrics && config.liveEnabled;\n  }\n\n  isTraceQlMetricsQuery(query: string): boolean {\n    // Check whether this is a metrics query by checking if it contains a metrics function\n    const metricsFnRegex =\n      /\\|\\s*(rate|count_over_time|avg_over_time|max_over_time|min_over_time|quantile_over_time|histogram_over_time|compare)\\s*\\(/;\n    return !!query.trim().match(metricsFnRegex);\n  }\n\n  isTraceIdQuery(query: string): boolean {\n    const hexOnlyRegex = /^[0-9A-Fa-f]*$/;\n    // Check whether this is a trace ID or traceQL query by checking if it only contains hex characters\n    return !!query.trim().match(hexOnlyRegex);\n  }\n\n  query(options: DataQueryRequest<TempoQuery>): Observable<DataQueryResponse> {\n    const subQueries: Array<Observable<DataQueryResponse>> = [];\n    const filteredTargets = options.targets.filter((target) => !target.hide);\n    const targets: { [type: string]: TempoQuery[] } = groupBy(filteredTargets, (t) => t.queryType || 'traceql');\n\n    if (targets.clear) {\n      return of({ data: [], state: LoadingState.Done });\n    }\n\n    // Migrate user to new query type if they are using the old search query type\n    if (targets.nativeSearch?.length) {\n      if (\n        targets.nativeSearch[0].spanName ||\n        targets.nativeSearch[0].serviceName ||\n        targets.nativeSearch[0].search ||\n        targets.nativeSearch[0].maxDuration ||\n        targets.nativeSearch[0].minDuration ||\n        targets.nativeSearch[0].queryType === 'nativeSearch'\n      ) {\n        const migratedQuery = migrateFromSearchToTraceQLSearch(targets.nativeSearch[0]);\n        if (targets.traceqlSearch?.length) {\n          targets.traceqlSearch.push(migratedQuery);\n        } else {\n          targets.traceqlSearch = [migratedQuery];\n        }\n      }\n    }\n\n    if (targets.traceql?.length) {\n      try {\n        const appliedQuery = this.applyVariables(targets.traceql[0], options.scopedVars);\n        const queryValue = appliedQuery?.query || '';\n        // Check whether this is a trace ID or traceQL query by checking if it only contains hex characters\n        if (this.isTraceIdQuery(queryValue)) {\n          // There's only hex characters so let's assume that this is a trace ID\n          reportInteraction('grafana_traces_traceID_queried', {\n            datasourceType: 'tempo',\n            app: options.app ?? '',\n            grafana_version: config.buildInfo.version,\n            hasQuery: queryValue !== '' ? true : false,\n          });\n\n          subQueries.push(this.handleTraceIdQuery(options, targets.traceql));\n        } else {\n          if (this.isTraceQlMetricsQuery(queryValue)) {\n            reportInteraction('grafana_traces_traceql_metrics_queried', {\n              datasourceType: 'tempo',\n              app: options.app ?? '',\n              grafana_version: config.buildInfo.version,\n              query: queryValue ?? '',\n              streaming: this.isStreamingMetricsEnabled(),\n            });\n            if (this.isStreamingMetricsEnabled()) {\n              subQueries.push(this.handleMetricsStreamingQuery(options, targets.traceql, queryValue));\n            } else {\n              subQueries.push(this.handleTraceQlMetricsQuery(options, targets.traceql));\n            }\n          } else {\n            reportInteraction('grafana_traces_traceql_queried', {\n              datasourceType: 'tempo',\n              app: options.app ?? '',\n              grafana_version: config.buildInfo.version,\n              query: queryValue ?? '',\n              streaming: this.isStreamingSearchEnabled(),\n            });\n            subQueries.push(this.handleTraceQlQuery(options, targets, queryValue));\n          }\n        }\n      } catch (error) {\n        return of({ error: { message: error instanceof Error ? error.message : 'Unknown error occurred' }, data: [] });\n      }\n    }\n\n    if (targets.traceqlSearch?.length) {\n      try {\n        if (config.featureToggles.metricsSummary) {\n          const target = targets.traceqlSearch.find((t) => this.hasGroupBy(t));\n          if (target) {\n            const appliedQuery = this.applyVariables(target, options.scopedVars);\n            const queryFromFilters = this.languageProvider.generateQueryFromFilters(appliedQuery.filters);\n            subQueries.push(this.handleMetricsSummaryQuery(appliedQuery, queryFromFilters, options));\n          }\n        }\n\n        const traceqlSearchTargets = config.featureToggles.metricsSummary\n          ? targets.traceqlSearch.filter((t) => !this.hasGroupBy(t))\n          : targets.traceqlSearch;\n        if (traceqlSearchTargets.length > 0) {\n          const appliedQuery = this.applyVariables(traceqlSearchTargets[0], options.scopedVars);\n          const queryFromFilters = this.languageProvider.generateQueryFromFilters(appliedQuery.filters);\n\n          reportInteraction('grafana_traces_traceql_search_queried', {\n            datasourceType: 'tempo',\n            app: options.app ?? '',\n            grafana_version: config.buildInfo.version,\n            query: queryFromFilters ?? '',\n            streaming: this.isStreamingSearchEnabled(),\n          });\n\n          if (this.isStreamingSearchEnabled()) {\n            subQueries.push(this.handleStreamingQuery(options, traceqlSearchTargets, queryFromFilters));\n          } else {\n            subQueries.push(\n              this._request('/api/search', {\n                q: queryFromFilters,\n                limit: options.targets[0].limit ?? DEFAULT_LIMIT,\n                spss: options.targets[0].spss ?? DEFAULT_SPSS,\n                start: options.range.from.unix(),\n                end: options.range.to.unix(),\n              }).pipe(\n                map((response) => {\n                  return {\n                    data: formatTraceQLResponse(\n                      response.data.traces,\n                      this.instanceSettings,\n                      targets.traceqlSearch[0].tableType\n                    ),\n                  };\n                }),\n                catchError((err) => {\n                  return of({ error: { message: getErrorMessage(err.data.message) }, data: [] });\n                })\n              )\n            );\n          }\n        }\n      } catch (error) {\n        return of({ error: { message: error instanceof Error ? error.message : 'Unknown error occurred' }, data: [] });\n      }\n    }\n\n    if (targets.upload?.length) {\n      if (this.uploadedJson) {\n        reportInteraction('grafana_traces_json_file_uploaded', {\n          datasourceType: 'tempo',\n          app: options.app ?? '',\n          grafana_version: config.buildInfo.version,\n        });\n\n        const jsonData = JSON.parse(this.uploadedJson);\n        const isTraceData = jsonData.batches;\n        const isServiceGraphData =\n          Array.isArray(jsonData) && jsonData.some((df) => df?.meta?.preferredVisualisationType === 'nodeGraph');\n\n        if (isTraceData) {\n          subQueries.push(of(transformFromOTEL(jsonData.batches, this.nodeGraph?.enabled)));\n        } else if (isServiceGraphData) {\n          subQueries.push(of({ data: jsonData, state: LoadingState.Done }));\n        } else {\n          subQueries.push(of({ error: { message: 'Unable to parse uploaded data.' }, data: [] }));\n        }\n      } else {\n        subQueries.push(of({ data: [], state: LoadingState.Done }));\n      }\n    }\n\n    if (this.serviceMap?.datasourceUid && targets.serviceMap?.length > 0) {\n      reportInteraction('grafana_traces_service_graph_queried', {\n        datasourceType: 'tempo',\n        app: options.app ?? '',\n        grafana_version: config.buildInfo.version,\n        hasServiceMapQuery: targets.serviceMap[0].serviceMapQuery ? true : false,\n      });\n\n      const dsId = this.serviceMap.datasourceUid;\n      const tempoDsUid = this.uid;\n      subQueries.push(\n        serviceMapQuery(options, dsId, tempoDsUid).pipe(\n          concatMap((result) =>\n            rateQuery(options, result, dsId).pipe(\n              concatMap((result) => errorAndDurationQuery(options, result, dsId, tempoDsUid))\n            )\n          )\n        )\n      );\n    }\n\n    return merge(...subQueries);\n  }\n\n  applyTemplateVariables(query: TempoQuery, scopedVars: ScopedVars) {\n    return this.applyVariables(query, scopedVars);\n  }\n\n  interpolateVariablesInQueries(queries: TempoQuery[], scopedVars: ScopedVars): TempoQuery[] {\n    if (!queries || queries.length === 0) {\n      return [];\n    }\n\n    return queries.map((query) => {\n      return {\n        ...query,\n        datasource: this.getRef(),\n        ...this.applyVariables(query, scopedVars),\n      };\n    });\n  }\n\n  applyVariables(query: TempoQuery, scopedVars: ScopedVars) {\n    const expandedQuery = { ...query };\n\n    if (query.filters) {\n      expandedQuery.filters = interpolateFilters(query.filters, scopedVars);\n    }\n\n    if (query.groupBy) {\n      expandedQuery.groupBy = query.groupBy.map((filter) => {\n        const updatedFilter = {\n          ...filter,\n          tag: this.templateSrv.replace(filter.tag ?? '', scopedVars),\n        };\n\n        return updatedFilter;\n      });\n    }\n\n    return {\n      ...expandedQuery,\n      query: this.templateSrv.replace(query.query ?? '', scopedVars, VariableFormatID.Pipe),\n      serviceMapQuery: Array.isArray(query.serviceMapQuery)\n        ? query.serviceMapQuery.map((query) => this.templateSrv.replace(query, scopedVars))\n        : this.templateSrv.replace(query.serviceMapQuery ?? '', scopedVars),\n    };\n  }\n\n  formatGroupBy = (groupBy: TraceqlFilter[]) => {\n    return groupBy\n      ?.filter((f) => f.tag)\n      .map((f) => {\n        if (f.scope === TraceqlSearchScope.Unscoped) {\n          return `.${f.tag}`;\n        }\n        return f.scope !== TraceqlSearchScope.Intrinsic ? `${f.scope}.${f.tag}` : f.tag;\n      })\n      .join(', ');\n  };\n\n  hasGroupBy = (query: TempoQuery) => {\n    return query.groupBy?.find((gb) => gb.tag);\n  };\n\n  /**\n   * Handles the simplest of the queries where we have just a trace id and return trace data for it.\n   * @param options\n   * @param targets\n   * @private\n   */\n  handleTraceIdQuery(options: DataQueryRequest<TempoQuery>, targets: TempoQuery[]): Observable<DataQueryResponse> {\n    const validTargets = targets\n      .filter((t) => t.query)\n      .map((t): TempoQuery => ({ ...t, query: t.query?.trim(), queryType: 'traceId' }));\n    if (!validTargets.length) {\n      return EMPTY;\n    }\n\n    const request = this.makeTraceIdRequest(options, validTargets);\n    return super.query(request).pipe(\n      map((response) => {\n        if (response.error) {\n          return response;\n        }\n        return transformTrace(response, this.instanceSettings, this.nodeGraph?.enabled);\n      })\n    );\n  }\n\n  handleTraceQlQuery = (\n    options: DataQueryRequest<TempoQuery>,\n    targets: {\n      [type: string]: TempoQuery[];\n    },\n    queryValue: string\n  ): Observable<DataQueryResponse> => {\n    if (this.isStreamingSearchEnabled()) {\n      return this.handleStreamingQuery(options, targets.traceql, queryValue);\n    } else {\n      return this._request('/api/search', {\n        q: queryValue,\n        limit: options.targets[0].limit ?? DEFAULT_LIMIT,\n        spss: options.targets[0].spss ?? DEFAULT_SPSS,\n        start: options.range.from.unix(),\n        end: options.range.to.unix(),\n      }).pipe(\n        map((response) => {\n          return {\n            data: formatTraceQLResponse(response.data.traces, this.instanceSettings, targets.traceql[0].tableType),\n          };\n        }),\n        catchError((err) => {\n          return of({ error: { message: getErrorMessage(err.data.message) }, data: [] });\n        })\n      );\n    }\n  };\n\n  handleTraceQlMetricsQuery(\n    options: DataQueryRequest<TempoQuery>,\n    targets: TempoQuery[]\n  ): Observable<DataQueryResponse> {\n    const validTargets = targets\n      .filter((t) => t.query)\n      .map(\n        (t): TempoQuery => ({ ...t, query: this.applyVariables(t, options.scopedVars).query, queryType: 'traceql' })\n      );\n    if (!validTargets.length) {\n      return EMPTY;\n    }\n\n    const request = { ...options, targets: validTargets };\n    return super.query(request).pipe(\n      map((response) => {\n        return enhanceTraceQlMetricsResponse(response, this.instanceSettings);\n      }),\n      catchError((err) => {\n        return of({ error: { message: getErrorMessage(err.data.message) }, data: [] });\n      })\n    );\n  }\n\n  handleMetricsSummaryQuery = (target: TempoQuery, query: string, options: DataQueryRequest<TempoQuery>) => {\n    reportInteraction('grafana_traces_metrics_summary_queried', {\n      datasourceType: 'tempo',\n      app: options.app ?? '',\n      grafana_version: config.buildInfo.version,\n      filterCount: target.groupBy?.length ?? 0,\n    });\n\n    if (query === '{}') {\n      return of({\n        error: {\n          message:\n            'Please ensure you do not have an empty query. This is so filters are applied and the metrics summary is not generated from all spans.',\n        },\n        data: emptyResponse,\n      });\n    }\n\n    const groupBy = target.groupBy ? this.formatGroupBy(target.groupBy) : '';\n    return this._request('/api/metrics/summary', {\n      q: query,\n      groupBy,\n      start: options.range.from.unix(),\n      end: options.range.to.unix(),\n    }).pipe(\n      map((response) => {\n        if (!response.data.summaries) {\n          return {\n            error: {\n              message: getErrorMessage(`No summary data for '${groupBy}'.`),\n            },\n            data: emptyResponse,\n          };\n        }\n        // Check if any of the results have series data as older versions of Tempo placed the series data in a different structure\n        const hasSeries = response.data.summaries.some((summary: MetricsSummary) => summary.series.length > 0);\n        if (!hasSeries) {\n          return {\n            error: {\n              message: getErrorMessage(`No series data. Ensure you are using an up to date version of Tempo`),\n            },\n            data: emptyResponse,\n          };\n        }\n        return {\n          data: createTableFrameFromMetricsSummaryQuery(response.data.summaries, query, this.instanceSettings),\n        };\n      }),\n      catchError((error) => {\n        return of({\n          error: { message: getErrorMessage(error.data.message) },\n          data: emptyResponse,\n        });\n      })\n    );\n  };\n\n  // This function can probably be simplified by avoiding passing both `targets` and `query`,\n  // since `query` is built from `targets`, if you look at how this function is currently called\n  handleStreamingQuery(\n    options: DataQueryRequest<TempoQuery>,\n    targets: TempoQuery[],\n    query: string\n  ): Observable<DataQueryResponse> {\n    if (query === '') {\n      return EMPTY;\n    }\n\n    return merge(\n      ...targets.map((target) =>\n        doTempoSearchStreaming(\n          { ...target, query },\n          this, // the datasource\n          options,\n          this.instanceSettings\n        )\n      )\n    );\n  }\n\n  // This function can probably be simplified by avoiding passing both `targets` and `query`,\n  // since `query` is built from `targets`, if you look at how this function is currently called\n  handleMetricsStreamingQuery(\n    options: DataQueryRequest<TempoQuery>,\n    targets: TempoQuery[],\n    query: string\n  ): Observable<DataQueryResponse> {\n    if (query === '') {\n      return EMPTY;\n    }\n\n    return merge(\n      ...targets.map((target) =>\n        doTempoMetricsStreaming(\n          { ...target, query },\n          this, // the datasource\n          options\n        )\n      )\n    );\n  }\n\n  makeTraceIdRequest(options: DataQueryRequest<TempoQuery>, targets: TempoQuery[]): DataQueryRequest<TempoQuery> {\n    const request = {\n      ...options,\n      targets,\n    };\n\n    if (this.traceQuery?.timeShiftEnabled) {\n      request.range = options.range && {\n        ...options.range,\n        from: dateTime(options.range.from).subtract(\n          rangeUtil.intervalToMs(this.traceQuery?.spanStartTimeShift || '30m'),\n          'milliseconds'\n        ),\n        to: dateTime(options.range.to).add(\n          rangeUtil.intervalToMs(this.traceQuery?.spanEndTimeShift || '30m'),\n          'milliseconds'\n        ),\n      };\n    } else {\n      request.range = { from: dateTime(0), to: dateTime(0), raw: { from: dateTime(0), to: dateTime(0) } };\n    }\n\n    return request;\n  }\n\n  async metadataRequest(url: string, params = {}) {\n    return await lastValueFrom(this._request(url, params, { method: 'GET', hideFromInspector: true }));\n  }\n\n  _request(apiUrl: string, data?: unknown, options?: Partial<BackendSrvRequest>): Observable<Record<string, any>> {\n    const params = data ? urlUtil.serializeParams(data) : '';\n    const url = `${this.instanceSettings.url}${apiUrl}${params.length ? `?${params}` : ''}`;\n    const req = { ...options, url };\n    return getBackendSrv().fetch(req);\n  }\n\n  async testDatasource(): Promise<TestDataSourceResponse> {\n    const observables = [];\n\n    const options: BackendSrvRequest = {\n      headers: {},\n      method: 'GET',\n      url: `${this.instanceSettings.url}/api/echo`,\n    };\n    observables.push(\n      getBackendSrv()\n        .fetch(options)\n        .pipe(\n          mergeMap(() => {\n            return of({ status: 'success', message: 'Health check succeeded' });\n          }),\n          catchError((err) => {\n            return of({\n              status: 'error',\n              message: getErrorMessage(err.data.message, 'Unable to connect with Tempo'),\n            });\n          })\n        )\n    );\n\n    if (this.streamingEnabled?.search) {\n      const now = new Date();\n      const from = new Date(now);\n      from.setMinutes(from.getMinutes() - 15);\n      observables.push(\n        this.handleStreamingQuery(\n          {\n            range: {\n              from: dateTime(from),\n              to: dateTime(now),\n              raw: { from: 'now-15m', to: 'now' },\n            },\n            requestId: '',\n            interval: '',\n            intervalMs: 0,\n            scopedVars: {},\n            targets: [],\n            timezone: '',\n            app: '',\n            startTime: 0,\n          },\n          [\n            {\n              datasource: this.instanceSettings,\n              limit: 1,\n              query: '{}',\n              queryType: 'traceql',\n              refId: 'A',\n              tableType: SearchTableType.Traces,\n              filters: [],\n            },\n          ],\n          '{}'\n        ).pipe(\n          mergeMap(() => {\n            return of({ status: 'success', message: 'Streaming test succeeded.' });\n          }),\n          catchError((err) => {\n            return of({\n              status: 'error',\n              message: getErrorMessage(err.data.message, 'Test for streaming failed, consider disabling streaming'),\n            });\n          })\n        )\n      );\n    }\n\n    return await lastValueFrom(\n      forkJoin(observables).pipe(\n        mergeMap((observableResults) => {\n          const erroredResult = observableResults.find((result) => result.status !== 'success');\n          return erroredResult\n            ? of(erroredResult)\n            : of({ status: 'success', message: 'Successfully connected to Tempo data source.' });\n        })\n      )\n    );\n  }\n\n  getQueryDisplayText(query: TempoQuery) {\n    if (query.queryType === 'traceql' || query.queryType === 'traceId') {\n      return query.query ?? '';\n    }\n\n    const appliedQuery = this.applyVariables(query, {});\n    return this.languageProvider.generateQueryFromFilters(appliedQuery.filters);\n  }\n}\n\nfunction queryPrometheus(request: DataQueryRequest<PromQuery>, datasourceUid: string) {\n  return from(getDataSourceSrv().get(datasourceUid)).pipe(\n    mergeMap((ds) => {\n      return (ds as PrometheusDatasource).query(request);\n    })\n  );\n}\n\nfunction serviceMapQuery(\n  request: DataQueryRequest<TempoQuery>,\n  datasourceUid: string,\n  tempoDatasourceUid: string\n): Observable<ServiceMapQueryResponse> {\n  const serviceMapRequest = makePromServiceMapRequest(request);\n\n  return queryPrometheus(serviceMapRequest, datasourceUid).pipe(\n    // Just collect all the responses first before processing into node graph data\n    toArray(),\n    map((responses: DataQueryResponse[]) => {\n      const errorRes = responses.find((res) => !!res.error);\n      if (errorRes) {\n        throw new Error(getErrorMessage(errorRes.error?.message));\n      }\n\n      const { nodes, edges } = mapPromMetricsToServiceMap(responses, request.range);\n      if (nodes.fields.length > 0 && edges.fields.length > 0) {\n        const nodeLength = nodes.fields[0].values.length;\n        const edgeLength = edges.fields[0].values.length;\n\n        reportInteraction('grafana_traces_service_graph_size', {\n          datasourceType: 'tempo',\n          grafana_version: config.buildInfo.version,\n          nodeLength,\n          edgeLength,\n        });\n      }\n\n      // No handling of multiple targets assume just one. NodeGraph does not support it anyway, but still should be\n      // fixed at some point.\n      const { serviceMapIncludeNamespace, refId } = request.targets[0];\n      nodes.refId = refId;\n      edges.refId = refId;\n\n      if (serviceMapIncludeNamespace) {\n        nodes.fields[0].config = getFieldConfig(\n          datasourceUid, // datasourceUid\n          tempoDatasourceUid, // tempoDatasourceUid\n          '__data.fields.title', // targetField\n          '__data.fields[0]', // tempoField\n          undefined, // sourceField\n          { targetNamespace: '__data.fields.subtitle' }\n        );\n\n        edges.fields[0].config = getFieldConfig(\n          datasourceUid, // datasourceUid\n          tempoDatasourceUid, // tempoDatasourceUid\n          '__data.fields.targetName', // targetField\n          '__data.fields.target', // tempoField\n          '__data.fields.sourceName', // sourceField\n          { targetNamespace: '__data.fields.targetNamespace', sourceNamespace: '__data.fields.sourceNamespace' }\n        );\n      } else {\n        nodes.fields[0].config = getFieldConfig(\n          datasourceUid,\n          tempoDatasourceUid,\n          '__data.fields.id',\n          '__data.fields[0]'\n        );\n        edges.fields[0].config = getFieldConfig(\n          datasourceUid,\n          tempoDatasourceUid,\n          '__data.fields.target',\n          '__data.fields.target',\n          '__data.fields.source'\n        );\n      }\n\n      return {\n        nodes,\n        edges,\n        state: LoadingState.Done,\n      };\n    })\n  );\n}\n\nfunction rateQuery(\n  request: DataQueryRequest<TempoQuery>,\n  serviceMapResponse: ServiceMapQueryResponse,\n  datasourceUid: string\n): Observable<ServiceMapQueryResponseWithRates> {\n  const serviceMapRequest = makePromServiceMapRequest(request);\n  serviceMapRequest.targets = makeServiceGraphViewRequest([buildExpr(rateMetric, defaultTableFilter, request)]);\n\n  return queryPrometheus(serviceMapRequest, datasourceUid).pipe(\n    toArray(),\n    map((responses: DataQueryResponse[]) => {\n      const errorRes = responses.find((res) => !!res.error);\n      if (errorRes) {\n        throw new Error(getErrorMessage(errorRes.error?.message));\n      }\n      return {\n        rates: responses[0]?.data ?? [],\n        nodes: serviceMapResponse.nodes,\n        edges: serviceMapResponse.edges,\n      };\n    })\n  );\n}\n\n// we need the response from the rate query to get the rate span_name(s),\n// -> which determine the errorRate/duration span_name(s) we need to query\nfunction errorAndDurationQuery(\n  request: DataQueryRequest<TempoQuery>,\n  rateResponse: ServiceMapQueryResponseWithRates,\n  datasourceUid: string,\n  tempoDatasourceUid: string\n) {\n  let serviceGraphViewMetrics = [];\n  let errorRateBySpanName = '';\n  let durationsBySpanName: string[] = [];\n\n  let labels = [];\n  if (rateResponse.rates[0] && request.app === CoreApp.Explore) {\n    const spanNameField = rateResponse.rates[0].fields.find((field) => field.name === 'span_name');\n    if (spanNameField && spanNameField.values) {\n      labels = spanNameField.values;\n    }\n  } else if (rateResponse.rates) {\n    rateResponse.rates.map((df: DataFrame | DataFrameDTO) => {\n      const spanNameLabels = df.fields.find((field) => field.labels?.['span_name']);\n      if (spanNameLabels) {\n        labels.push(spanNameLabels.labels?.['span_name']);\n      }\n    });\n  }\n  const spanNames = getEscapedSpanNames(labels);\n\n  if (spanNames.length > 0) {\n    errorRateBySpanName = buildExpr(errorRateMetric, 'span_name=~\"' + spanNames.join('|') + '\"', request);\n    serviceGraphViewMetrics.push(errorRateBySpanName);\n    spanNames.map((name: string) => {\n      const metric = buildExpr(durationMetric, 'span_name=~\"' + name + '\"', request);\n      durationsBySpanName.push(metric);\n      serviceGraphViewMetrics.push(metric);\n    });\n  }\n\n  const serviceMapRequest = makePromServiceMapRequest(request);\n  serviceMapRequest.targets = makeServiceGraphViewRequest(serviceGraphViewMetrics);\n\n  return queryPrometheus(serviceMapRequest, datasourceUid).pipe(\n    // Just collect all the responses first before processing into node graph data\n    toArray(),\n    map((errorAndDurationResponse: DataQueryResponse[]) => {\n      const errorRes = errorAndDurationResponse.find((res) => !!res.error);\n      if (errorRes) {\n        throw new Error(getErrorMessage(errorRes.error?.message));\n      }\n\n      const serviceGraphView = getServiceGraphViewDataFrames(\n        request,\n        rateResponse,\n        errorAndDurationResponse[0],\n        errorRateBySpanName,\n        durationsBySpanName,\n        datasourceUid,\n        tempoDatasourceUid\n      );\n\n      if (serviceGraphView.fields.length === 0) {\n        return {\n          data: [rateResponse.nodes, rateResponse.edges],\n          state: LoadingState.Done,\n        };\n      }\n\n      return {\n        data: [serviceGraphView, rateResponse.nodes, rateResponse.edges],\n        state: LoadingState.Done,\n      };\n    })\n  );\n}\n\nfunction makePromLink(title: string, expr: string, datasourceUid: string, instant: boolean) {\n  return {\n    url: '',\n    title,\n    internal: {\n      query: {\n        expr: expr,\n        range: !instant,\n        exemplar: !instant,\n        instant: instant,\n      },\n      datasourceUid,\n      datasourceName: getDataSourceSrv().getInstanceSettings(datasourceUid)?.name ?? '',\n    },\n  };\n}\n\n// TODO: this is basically the same as prometheus/datasource.ts#prometheusSpecialRegexEscape which is used to escape\n//  template variable values. It would be best to move it to some common place.\nexport function getEscapedSpanNames(values: string[]) {\n  return values.map((value: string) => value.replace(/\\\\/g, '\\\\\\\\\\\\\\\\').replace(/[$^*{}\\[\\]\\'+?.()|]/g, '\\\\\\\\$&'));\n}\n\nexport function getFieldConfig(\n  datasourceUid: string,\n  tempoDatasourceUid: string,\n  targetField: string,\n  tempoField: string,\n  sourceField?: string,\n  namespaceFields?: { targetNamespace: string; sourceNamespace?: string }\n) {\n  let source = sourceField ? `client=\"\\${${sourceField}}\",` : '';\n  let target = `server=\"\\${${targetField}}\"`;\n  let serverSumBy = 'server';\n\n  if (namespaceFields !== undefined) {\n    const { targetNamespace } = namespaceFields;\n    target += `,server_service_namespace=\"\\${${targetNamespace}}\"`;\n    serverSumBy += ', server_service_namespace';\n\n    if (source) {\n      const { sourceNamespace } = namespaceFields;\n      source += `client_service_namespace=\"\\${${sourceNamespace}}\",`;\n      serverSumBy += ', client_service_namespace';\n    }\n  }\n\n  return {\n    links: [\n      makePromLink(\n        'Request rate',\n        `sum by (client, ${serverSumBy})(rate(${totalsMetric}{${source}${target}}[$__rate_interval]))`,\n        datasourceUid,\n        false\n      ),\n      makePromLink(\n        'Request histogram',\n        `histogram_quantile(0.9, sum(rate(${histogramMetric}{${source}${target}}[$__rate_interval])) by (le, client, ${serverSumBy}))`,\n        datasourceUid,\n        false\n      ),\n      makePromLink(\n        'Failed request rate',\n        `sum by (client, ${serverSumBy})(rate(${failedMetric}{${source}${target}}[$__rate_interval]))`,\n        datasourceUid,\n        false\n      ),\n      makeTempoLinkServiceMap('View traces', tempoDatasourceUid, !!namespaceFields?.targetNamespace),\n    ],\n  };\n}\n\nexport function makeTempoLink(\n  title: string,\n  serviceNamespace: string | undefined,\n  serviceName: string,\n  spanName: string,\n  datasourceUid: string\n) {\n  let query: TempoQuery = { refId: 'A', queryType: 'traceqlSearch', filters: [] };\n  if (serviceNamespace !== undefined && serviceNamespace !== '') {\n    query.filters.push({\n      id: 'service-namespace',\n      scope: TraceqlSearchScope.Resource,\n      tag: 'service.namespace',\n      value: serviceNamespace,\n      operator: '=',\n      valueType: 'string',\n    });\n  }\n  if (serviceName !== '') {\n    query.filters.push({\n      id: 'service-name',\n      scope: TraceqlSearchScope.Resource,\n      tag: 'service.name',\n      value: serviceName,\n      operator: '=',\n      valueType: 'string',\n    });\n  }\n  if (spanName !== '') {\n    query.filters.push({\n      id: 'span-name',\n      scope: TraceqlSearchScope.Span,\n      tag: 'name',\n      value: spanName,\n      operator: '=',\n      valueType: 'string',\n    });\n  }\n\n  return {\n    url: '',\n    title,\n    internal: {\n      query,\n      datasourceUid,\n      datasourceName: getDataSourceSrv().getInstanceSettings(datasourceUid)?.name ?? '',\n    },\n  };\n}\n\nfunction makeTempoLinkServiceMap(\n  title: string,\n  datasourceUid: string,\n  includeNamespace: boolean\n): DataLink<TempoQuery> {\n  return {\n    url: '',\n    title,\n    internal: {\n      datasourceUid,\n      datasourceName: getDataSourceSrv().getInstanceSettings(datasourceUid)?.name ?? '',\n      query: ({ replaceVariables, scopedVars }) => {\n        const serviceName = replaceVariables?.(`\\${__data.fields.${NodeGraphDataFrameFieldNames.title}}`, scopedVars);\n        const serviceNamespace = replaceVariables?.(\n          `\\${__data.fields.${NodeGraphDataFrameFieldNames.subTitle}}`,\n          scopedVars\n        );\n        const isInstrumented =\n          replaceVariables?.(`\\${__data.fields.${NodeGraphDataFrameFieldNames.isInstrumented}}`, scopedVars) !==\n          'false';\n        const query: TempoQuery = { refId: 'A', queryType: 'traceqlSearch', filters: [] };\n\n        // Only do the peer query if service is actively set as not instrumented\n        if (isInstrumented === false) {\n          const filters = ['db.name', 'db.system', 'peer.service', 'messaging.system', 'net.peer.name']\n            .map((peerAttribute) => `span.${peerAttribute}=\"${serviceName}\"`)\n            .join(' || ');\n          query.queryType = 'traceql';\n          query.query = `{${filters}}`;\n        } else {\n          if (includeNamespace && serviceNamespace) {\n            query.filters.push({\n              id: 'service-namespace',\n              scope: TraceqlSearchScope.Resource,\n              tag: 'service.namespace',\n              value: serviceNamespace,\n              operator: '=',\n              valueType: 'string',\n            });\n          }\n          if (serviceName) {\n            query.filters.push({\n              id: 'service-name',\n              scope: TraceqlSearchScope.Resource,\n              tag: 'service.name',\n              value: serviceName,\n              operator: '=',\n              valueType: 'string',\n            });\n          }\n        }\n\n        return query;\n      },\n    },\n  };\n}\n\nfunction makePromServiceMapRequest(options: DataQueryRequest<TempoQuery>): DataQueryRequest<PromQuery> {\n  return {\n    ...options,\n    targets: serviceMapMetrics\n      .map<PromQuery[]>((metric) => {\n        const { serviceMapQuery, serviceMapIncludeNamespace: serviceMapIncludeNamespace } = options.targets[0];\n        const extraSumByFields = serviceMapIncludeNamespace\n          ? ', client_service_namespace, server_service_namespace'\n          : '';\n        const queries = Array.isArray(serviceMapQuery) ? serviceMapQuery : [serviceMapQuery];\n        const sumSubExprs = queries.map(\n          (query) => `sum by (client, server${extraSumByFields}) (rate(${metric}${query || ''}[$__range]))`\n        );\n        const groupSubExprs = queries.map(\n          (query) => `group by (client, connection_type, server${extraSumByFields}) (${metric}${query || ''})`\n        );\n\n        return [\n          {\n            format: 'table',\n            refId: metric,\n            // options.targets[0] is not correct here, but not sure what should happen if you have multiple queries for\n            // service map at the same time anyway\n            expr: sumSubExprs.join(' OR '),\n            instant: true,\n          },\n          {\n            format: 'table',\n            refId: `${metric}_labels`,\n            expr: groupSubExprs.join(' OR '),\n            instant: true,\n          },\n        ];\n      })\n      .flat(),\n  };\n}\n\nfunction getServiceGraphViewDataFrames(\n  request: DataQueryRequest<TempoQuery>,\n  rateResponse: ServiceMapQueryResponseWithRates,\n  secondResponse: DataQueryResponse,\n  errorRateBySpanName: string,\n  durationsBySpanName: string[],\n  datasourceUid: string,\n  tempoDatasourceUid: string\n) {\n  let df: any = { fields: [] };\n\n  const rate = rateResponse.rates.filter((x) => {\n    return x.refId === buildExpr(rateMetric, defaultTableFilter, request);\n  });\n  const errorRate = secondResponse.data.filter((x) => {\n    return x.refId === errorRateBySpanName;\n  });\n  const duration = secondResponse.data.filter((x) => {\n    return durationsBySpanName.includes(x.refId ?? '');\n  });\n\n  if (rate.length > 0 && rate[0].fields?.length > 2) {\n    df.fields.push({\n      ...rate[0].fields[1],\n      name: 'Name',\n      config: {\n        filterable: false,\n      },\n    });\n\n    df.fields.push({\n      ...rate[0].fields[2],\n      name: 'Rate',\n      config: {\n        links: [\n          makePromLink(\n            'Rate',\n            buildLinkExpr(buildExpr(rateMetric, 'span_name=\"${__data.fields[0]}\"', request)),\n            datasourceUid,\n            false\n          ),\n        ],\n        decimals: 2,\n      },\n    });\n\n    df.fields.push({\n      ...rate[0].fields[2],\n      name: '  ',\n      labels: null,\n      config: {\n        color: {\n          mode: 'continuous-BlPu',\n        },\n        custom: {\n          cellOptions: {\n            mode: BarGaugeDisplayMode.Lcd,\n            type: TableCellDisplayMode.Gauge,\n          },\n        },\n        decimals: 3,\n      },\n    });\n  }\n\n  if (errorRate.length > 0 && errorRate[0].fields?.length > 2) {\n    const errorRateNames = errorRate[0].fields[1]?.values ?? [];\n    const errorRateValues = errorRate[0].fields[2]?.values ?? [];\n    let errorRateObj: Record<\n      string,\n      {\n        value: string;\n      }\n    > = {};\n    errorRateNames.map((name: string, index: number) => {\n      errorRateObj[name] = { value: errorRateValues[index] };\n    });\n\n    const values = getRateAlignedValues({ ...rate }, errorRateObj);\n\n    df.fields.push({\n      ...errorRate[0].fields[2],\n      name: 'Error Rate',\n      values: values,\n      config: {\n        links: [\n          makePromLink(\n            'Error Rate',\n            buildLinkExpr(buildExpr(errorRateMetric, 'span_name=\"${__data.fields[0]}\"', request)),\n            datasourceUid,\n            false\n          ),\n        ],\n        decimals: 2,\n      },\n    });\n\n    df.fields.push({\n      ...errorRate[0].fields[2],\n      name: '   ',\n      values: values,\n      labels: null,\n      config: {\n        color: {\n          mode: 'continuous-RdYlGr',\n        },\n        custom: {\n          cellOptions: {\n            mode: BarGaugeDisplayMode.Lcd,\n            type: TableCellDisplayMode.Gauge,\n          },\n        },\n        decimals: 3,\n      },\n    });\n  }\n\n  if (duration.length > 0) {\n    let durationObj: Record<\n      string,\n      {\n        value: string;\n      }\n    > = {};\n    duration.forEach((d) => {\n      if (d.fields.length > 1) {\n        const delimiter = d.refId?.includes('span_name=~\"') ? 'span_name=~\"' : 'span_name=\"';\n        const name = d.refId?.split(delimiter)[1].split('\"}')[0];\n        durationObj[name!] = { value: d.fields[1].values[0] };\n      }\n    });\n    if (Object.keys(durationObj).length > 0) {\n      df.fields.push({\n        ...duration[0].fields[1],\n        name: 'Duration (p90)',\n        values: getRateAlignedValues({ ...rate }, durationObj),\n        config: {\n          links: [\n            makePromLink(\n              'Duration',\n              buildLinkExpr(buildExpr(durationMetric, 'span_name=\"${__data.fields[0]}\"', request)),\n              datasourceUid,\n              false\n            ),\n          ],\n          unit: 's',\n        },\n      });\n    }\n  }\n\n  if (df.fields.length > 0 && df.fields[0].values) {\n    df.fields.push({\n      name: 'Links',\n      type: FieldType.string,\n      values: df.fields[0].values.map(() => {\n        return 'Tempo';\n      }),\n      config: {\n        links: [makeTempoLink('Tempo', undefined, '', `\\${__data.fields[0]}`, tempoDatasourceUid)],\n      },\n    });\n  }\n\n  return df;\n}\n\nexport function buildExpr(\n  metric: { expr: string; params: string[]; topk?: number },\n  extraParams: string,\n  request: DataQueryRequest<TempoQuery>\n): string {\n  let serviceMapQuery = request.targets[0]?.serviceMapQuery ?? '';\n  const serviceMapQueries = Array.isArray(serviceMapQuery) ? serviceMapQuery : [serviceMapQuery];\n  const metricParamsArray = serviceMapQueries.map((query) => {\n    // remove surrounding curly braces from serviceMapQuery\n    const serviceMapQueryMatch = query.match(/^{(.*)}$/);\n    if (serviceMapQueryMatch?.length) {\n      query = serviceMapQueryMatch[1];\n    }\n    // map serviceGraph metric tags to serviceGraphView metric tags\n    query = query.replace('client', 'service').replace('server', 'service');\n    return query.includes('span_name')\n      ? metric.params.concat(query)\n      : metric.params\n          .concat(query)\n          .concat(extraParams)\n          .filter((item: string) => item);\n  });\n  const exprs = metricParamsArray.map((params) => metric.expr.replace('{}', '{' + params.join(',') + '}'));\n  const expr = exprs.join(' OR ');\n  if (metric.topk) {\n    return `topk(${metric.topk}, ${expr})`;\n  }\n  return expr;\n}\n\nexport function buildLinkExpr(expr: string) {\n  // don't want top 5 or by span name in links\n  expr = expr.replace('topk(5, ', '').replace(' by (span_name))', '');\n  return expr.replace('__range', '__rate_interval');\n}\n\n// query result frames can come back in any order\n// here we align the table col values to the same row name (rateName) across the table\nexport function getRateAlignedValues(\n  rateResp: DataQueryResponseData[],\n  objToAlign: { [x: string]: { value: string } }\n) {\n  const rateNames = rateResp[0]?.fields[1]?.values ?? [];\n  let values: string[] = [];\n\n  for (let i = 0; i < rateNames.length; i++) {\n    if (Object.keys(objToAlign).includes(rateNames[i])) {\n      values.push(objToAlign[rateNames[i]].value);\n    } else {\n      values.push('0');\n    }\n  }\n\n  return values;\n}\n\nexport function makeServiceGraphViewRequest(metrics: string[]): PromQuery[] {\n  return metrics.map((metric) => {\n    return {\n      refId: metric,\n      expr: metric,\n      instant: true,\n    };\n  });\n}\n","import { LanguageProvider, SelectableValue } from '@grafana/data';\nimport { getTemplateSrv } from '@grafana/runtime';\nimport { VariableFormatID } from '@grafana/schema';\n\nimport {\n  filterToQuerySection,\n  getAllTags,\n  getIntrinsicTags,\n  getTagsByScope,\n  getUnscopedTags,\n} from './SearchTraceQLEditor/utils';\nimport { TraceqlFilter, TraceqlSearchScope } from './dataquery.gen';\nimport { TempoDatasource } from './datasource';\nimport { intrinsicsV1 } from './traceql/traceql';\nimport { Scope } from './types';\n\n// Limit maximum tags retrieved from the backend\nexport const TAGS_LIMIT = 5000;\n\n// Limit maximum options in select dropdowns\nexport const OPTIONS_LIMIT = 1000;\n\nexport default class TempoLanguageProvider extends LanguageProvider {\n  datasource: TempoDatasource;\n  tagsV1?: string[];\n  tagsV2?: Scope[];\n  constructor(datasource: TempoDatasource, initialValues?: any) {\n    super();\n\n    this.datasource = datasource;\n    Object.assign(this, initialValues);\n  }\n\n  request = async (url: string, params = {}) => {\n    const res = await this.datasource.metadataRequest(url, params);\n    return res?.data;\n  };\n\n  start = async () => {\n    if (!this.startTask) {\n      this.startTask = this.fetchTags().then(() => {\n        return [];\n      });\n    }\n\n    return this.startTask;\n  };\n\n  getTagsLimit = () => {\n    return this.datasource.instanceSettings.jsonData?.tagLimit || TAGS_LIMIT;\n  };\n\n  async fetchTags() {\n    let v1Resp, v2Resp;\n    try {\n      v2Resp = await this.request('/api/v2/search/tags', { limit: this.getTagsLimit() });\n    } catch (error) {\n      v1Resp = await this.request('/api/search/tags', []);\n    }\n\n    if (v2Resp && v2Resp.scopes) {\n      this.setV2Tags(v2Resp.scopes);\n    } else if (v1Resp) {\n      this.setV1Tags(v1Resp.tagNames);\n    }\n  }\n\n  setV1Tags = (tags: string[]) => {\n    this.tagsV1 = tags;\n  };\n\n  setV2Tags = (tags: Scope[]) => {\n    this.tagsV2 = tags;\n  };\n\n  getIntrinsics = () => {\n    if (this.tagsV2) {\n      return getIntrinsicTags(this.tagsV2);\n    }\n    return intrinsicsV1;\n  };\n\n  getTags = (scope?: TraceqlSearchScope) => {\n    if (this.tagsV2 && scope) {\n      if (scope === TraceqlSearchScope.Unscoped) {\n        return getUnscopedTags(this.tagsV2);\n      }\n      return getTagsByScope(this.tagsV2, scope);\n    } else if (this.tagsV1) {\n      // This is needed because the /api/v2/search/tag/${tag}/values API expects \"status\" and the v1 API expects \"status.code\"\n      // so Tempo doesn't send anything and we inject it here for the autocomplete\n      if (!this.tagsV1.find((t) => t === 'status')) {\n        this.tagsV1.push('status');\n      }\n      return this.tagsV1;\n    }\n    return [];\n  };\n\n  getMetricsSummaryTags = (scope?: TraceqlSearchScope) => {\n    if (this.tagsV2 && scope) {\n      if (scope === TraceqlSearchScope.Unscoped) {\n        return getUnscopedTags(this.tagsV2);\n      }\n      return getTagsByScope(this.tagsV2, scope);\n    } else if (this.tagsV1) {\n      return this.tagsV1;\n    }\n    return [];\n  };\n\n  getTraceqlAutocompleteTags = (scope?: string) => {\n    if (this.tagsV2) {\n      if (!scope) {\n        // have not typed a scope yet || unscoped (.) typed\n        return getUnscopedTags(this.tagsV2);\n      } else if (scope === TraceqlSearchScope.Unscoped) {\n        return getUnscopedTags(this.tagsV2);\n      }\n      return getTagsByScope(this.tagsV2, scope);\n    } else if (this.tagsV1) {\n      // This is needed because the /api/v2/search/tag/${tag}/values API expects \"status\" and the v1 API expects \"status.code\"\n      // so Tempo doesn't send anything and we inject it here for the autocomplete\n      if (!this.tagsV1.find((t) => t === 'status')) {\n        this.tagsV1.push('status');\n      }\n      return this.tagsV1;\n    }\n    return [];\n  };\n\n  getAutocompleteTags = () => {\n    if (this.tagsV2) {\n      return getAllTags(this.tagsV2);\n    } else if (this.tagsV1) {\n      // This is needed because the /api/search/tag/${tag}/values API expects \"status.code\" and the v2 API expects \"status\"\n      // so Tempo doesn't send anything and we inject it here for the autocomplete\n      if (!this.tagsV1.find((t) => t === 'status.code')) {\n        this.tagsV1.push('status.code');\n      }\n      return this.tagsV1;\n    }\n    return [];\n  };\n\n  async getOptionsV1(tag: string): Promise<Array<SelectableValue<string>>> {\n    const encodedTag = this.encodeTag(tag);\n    const response = await this.request(`/api/search/tag/${encodedTag}/values`);\n    let options: Array<SelectableValue<string>> = [];\n    if (response && response.tagValues) {\n      options = response.tagValues.map((v: string) => ({\n        value: v,\n        label: v,\n      }));\n    }\n    return options;\n  }\n\n  async getOptionsV2(tag: string, query?: string): Promise<Array<SelectableValue<string>>> {\n    const encodedTag = this.encodeTag(tag);\n    const response = await this.request(\n      `/api/v2/search/tag/${encodedTag}/values`,\n      query\n        ? { q: getTemplateSrv().replace(query, {}, VariableFormatID.Pipe), limit: this.getTagsLimit() }\n        : { limit: this.getTagsLimit() }\n    );\n    let options: Array<SelectableValue<string>> = [];\n    if (response && response.tagValues) {\n      response.tagValues.forEach((v: { type: string; value?: string }) => {\n        if (v.value) {\n          options.push({\n            type: v.type,\n            value: v.value,\n            label: v.value,\n          });\n        }\n      });\n    }\n    return options;\n  }\n\n  /**\n   * Encode (serialize) a given tag for use in a URL.\n   *\n   * @param tag the tag to encode\n   * @returns the encoded tag\n   */\n  private encodeTag = (tag: string): string => {\n    // If we call `encodeURIComponent` only once, we still get an error when issuing a request to the backend\n    // Reference: https://stackoverflow.com/a/37456192\n    return encodeURIComponent(encodeURIComponent(tag));\n  };\n\n  generateQueryFromFilters(filters: TraceqlFilter[]) {\n    if (!filters) {\n      return '';\n    }\n\n    return `{${filters\n      .filter((f) => f.tag && f.operator && f.value?.length)\n      .map((f) => filterToQuerySection(f, filters, this))\n      .join(' && ')}}`;\n  }\n}\n","import type { languages } from 'monaco-editor';\nimport { Grammar } from 'prismjs';\n\nexport const languageConfiguration: languages.LanguageConfiguration = {\n  // the default separators except `@$`\n  wordPattern: /(-?\\d*\\.\\d\\w*)|([^`~!#%^&*()\\-=+\\[{\\]}\\\\|;:'\",.<>\\/?\\s]+)/g,\n  brackets: [\n    ['{', '}'],\n    ['(', ')'],\n  ],\n  autoClosingPairs: [\n    { open: '{', close: '}' },\n    { open: '(', close: ')' },\n    { open: '\"', close: '\"' },\n    { open: \"'\", close: \"'\" },\n  ],\n  surroundingPairs: [\n    { open: '{', close: '}' },\n    { open: '(', close: ')' },\n    { open: '\"', close: '\"' },\n    { open: \"'\", close: \"'\" },\n  ],\n  folding: {},\n};\n\nexport const operators = ['=', '!=', '>', '<', '>=', '<=', '=~', '!~'];\nexport const keywordOperators = ['=', '!='];\nexport const stringOperators = ['=', '!=', '=~', '!~'];\nexport const numberOperators = ['=', '!=', '>', '<', '>=', '<='];\n\nexport const intrinsicsV1 = [\n  'duration',\n  'kind',\n  'name',\n  'rootName',\n  'rootServiceName',\n  'status',\n  'statusMessage',\n  'traceDuration',\n];\nexport const intrinsics = intrinsicsV1.concat([\n  'event:name',\n  'event:timeSinceStart',\n  'instrumentation:name',\n  'instrumentation:version',\n  'link:spanID',\n  'link:traceID',\n  'span:duration',\n  'span:id',\n  'span:kind',\n  'span:name',\n  'span:status',\n  'span:statusMessage',\n  'trace:duration',\n  'trace:id',\n  'trace:rootName',\n  'trace:rootService',\n]);\nexport const scopes: string[] = ['event', 'instrumentation', 'link', 'resource', 'span'];\n\nconst aggregatorFunctions = ['avg', 'count', 'max', 'min', 'sum'];\nconst functions = aggregatorFunctions.concat([\n  'by',\n  'count_over_time',\n  'histogram_over_time',\n  'quantile_over_time',\n  'rate',\n  'select',\n]);\n\nconst keywords = intrinsics.concat(scopes);\n\nconst statusValues = ['ok', 'unset', 'error', 'false', 'true'];\n\nconst language: languages.IMonarchLanguage = {\n  ignoreCase: false,\n  defaultToken: '',\n  tokenPostfix: '.traceql',\n\n  keywords,\n  operators,\n  statusValues,\n  functions,\n\n  symbols: /[=><!~?:&|+\\-*\\/^%]+/,\n  escapes: /\\\\(?:[abfnrtv\\\\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,\n  digits: /\\d+(_+\\d+)*/,\n  octaldigits: /[0-7]+(_+[0-7]+)*/,\n  binarydigits: /[0-1]+(_+[0-1]+)*/,\n\n  tokenizer: {\n    root: [\n      // comments\n      [/\\/\\/.*/, 'comment'], // line comment\n      [/\\/\\*.*\\*\\//, 'comment'], // block comment\n\n      // durations\n      [/[0-9]+(.[0-9]+)?(us|µs|ns|ms|s|m|h)/, 'number'],\n\n      // trace ID\n      [/^\\s*[0-9A-Fa-f]+\\s*$/, 'tag'],\n\n      // keywords\n      [\n        // match only predefined keywords\n        `(?:${keywords.join('|')})`,\n        {\n          cases: {\n            '@keywords': 'keyword',\n            '@default': 'tag', // fallback, but should never happen\n          },\n        },\n      ],\n\n      // functions and predefined values\n      [\n        // Inside (double) quotes, all characters are allowed, with the exception of `\\` and `\"` that must be escaped (`\\\\` and `\\\"`).\n        // Outside quotes, some more characters are prohibited, such as `!` and `=`.\n        /(?:\\w|^[^{}()=~!<>&|,\" ]|\"(?:\\\\\"|\\\\\\\\|[^\\\\\"])*\")+/,\n        {\n          cases: {\n            '@functions': 'predefined',\n            '@statusValues': 'type',\n            '@default': 'tag', // fallback, used for tag names\n          },\n        },\n      ],\n\n      // strings\n      [/\"([^\"\\\\]|\\\\.)*$/, 'string.invalid'], // non-teminated string\n      [/'([^'\\\\]|\\\\.)*$/, 'string.invalid'], // non-teminated string\n      [/([^\\w])(\")/, [{ token: '' }, { token: 'string', next: '@string_double' }]],\n      [/([^\\w])(')/, [{ token: '' }, { token: 'string', next: '@string_single' }]],\n      [/([^\\w])(`)/, [{ token: '' }, { token: 'string', next: '@string_back' }]],\n\n      // delimiters and operators\n      [/[{}()\\[\\]]/, 'delimiter.bracket'],\n      [\n        /@symbols/,\n        {\n          cases: {\n            '@operators': 'delimiter',\n            '@default': '',\n          },\n        },\n      ],\n\n      // numbers\n      [/(@digits)[eE]([\\-+]?(@digits))?[fFdD]?/, 'number.float'],\n      [/(@digits)\\.(@digits)([eE][\\-+]?(@digits))?[fFdD]?/, 'number.float'],\n      [/0(@octaldigits)[Ll]?/, 'number.octal'],\n      [/0[bB](@binarydigits)[Ll]?/, 'number.binary'],\n      [/(@digits)[fFdD]/, 'number.float'],\n      [/(@digits)[lL]?/, 'number'],\n    ],\n\n    string_double: [\n      [/[^\\\\\"]+/, 'string'],\n      [/@escapes/, 'string.escape'],\n      [/\\\\./, 'string.escape.invalid'],\n      [/\"/, 'string', '@pop'],\n    ],\n\n    string_single: [\n      [/[^\\\\']+/, 'string'],\n      [/@escapes/, 'string.escape'],\n      [/\\\\./, 'string.escape.invalid'],\n      [/'/, 'string', '@pop'],\n    ],\n\n    string_back: [\n      [/[^\\\\`]+/, 'string'],\n      [/@escapes/, 'string.escape'],\n      [/\\\\./, 'string.escape.invalid'],\n      [/`/, 'string', '@pop'],\n    ],\n  },\n};\n\n// For \"TraceQL\" tab (Monarch editor for TraceQL)\nexport const languageDefinition = {\n  id: 'traceql',\n  extensions: ['.traceql'],\n  aliases: ['tempo', 'traceql'],\n  mimetypes: [],\n  def: {\n    language,\n    languageConfiguration,\n  },\n};\n\n// For \"Search\" tab (query builder)\nexport const traceqlGrammar: Grammar = {\n  comment: {\n    pattern: /\\/\\/.*/,\n  },\n  'span-set': {\n    pattern: /\\{[^}]*}/,\n    inside: {\n      filter: {\n        pattern:\n          /([\\w:.\\/-]+)\\s*(=|!=|<=|>=|=~|!~|>|<)\\s*(\"[^\"]*\"|[\\w.\\/-]+)(\\s*(\\&\\&|\\|\\|)\\s*([\\w:.\\/-]+)\\s*(=|!=|<=|>=|=~|!~|>|<)\\s*(\"[^\"]*\"|[\\w.\\/-]+))*/g,\n        inside: {\n          comment: {\n            pattern: /#.*/,\n          },\n          'label-key': {\n            pattern: /[a-z_.][\\w./_-]*(:[\\w./_-]+)?(?=\\s*(=|!=|>|<|>=|<=|=~|!~))/,\n            alias: 'attr-name',\n          },\n          'label-value': {\n            pattern: /(\"(?:\\\\.|[^\\\\\"])*\")|(\\w+)/,\n            alias: 'attr-value',\n          },\n        },\n      },\n      punctuation: /[}{&|]/,\n    },\n  },\n  number: /\\b-?\\d+((\\.\\d*)?([eE][+-]?\\d+)?)?\\b/,\n  operator: new RegExp(`/[-+*/=%^~]|&&?|\\\\|?\\\\||!=?|<(?:=>?|<|>)?|>[>=]?|`, 'i'),\n  punctuation: /[{};()`,.]/,\n};\n","import { DataSourceApi, parseDuration } from '@grafana/data';\nimport { getDataSourceSrv } from '@grafana/runtime';\n\nimport { generateId } from './SearchTraceQLEditor/TagsInput';\nimport { TraceqlFilter, TraceqlSearchScope } from './dataquery.gen';\nimport { TempoQuery } from './types';\n\nexport const getErrorMessage = (message: string | undefined, prefix?: string) => {\n  const err = message ? ` (${message})` : '';\n  let errPrefix = prefix ? prefix : 'Error';\n  return `${errPrefix}${err}. Please check the server logs for more details.`;\n};\n\nexport async function getDS(uid?: string): Promise<DataSourceApi | undefined> {\n  if (!uid) {\n    return undefined;\n  }\n\n  const dsSrv = getDataSourceSrv();\n  try {\n    return await dsSrv.get(uid);\n  } catch (error) {\n    console.error('Failed to load data source', error);\n    return undefined;\n  }\n}\n\nexport const migrateFromSearchToTraceQLSearch = (query: TempoQuery) => {\n  let filters: TraceqlFilter[] = [];\n  if (query.spanName) {\n    filters.push({\n      id: 'span-name',\n      scope: TraceqlSearchScope.Span,\n      tag: 'name',\n      operator: '=',\n      value: [query.spanName],\n      valueType: 'string',\n    });\n  }\n  if (query.serviceName) {\n    filters.push({\n      id: 'service-name',\n      scope: TraceqlSearchScope.Resource,\n      tag: 'service.name',\n      operator: '=',\n      value: [query.serviceName],\n      valueType: 'string',\n    });\n  }\n  if (query.minDuration || query.maxDuration) {\n    filters.push({\n      id: 'duration-type',\n      value: 'trace',\n    });\n  }\n  if (query.minDuration) {\n    filters.push({\n      id: 'min-duration',\n      tag: 'duration',\n      operator: '>',\n      value: [query.minDuration],\n      valueType: 'duration',\n    });\n  }\n  if (query.maxDuration) {\n    filters.push({\n      id: 'max-duration',\n      tag: 'duration',\n      operator: '<',\n      value: [query.maxDuration],\n      valueType: 'duration',\n    });\n  }\n  if (query.search) {\n    const tags = query.search.split(' ');\n    for (const tag of tags) {\n      const [key, value] = tag.split('=');\n      if (key && value) {\n        filters.push({\n          id: generateId(),\n          scope: TraceqlSearchScope.Unscoped,\n          tag: key,\n          operator: '=',\n          value: [value.replace(/(^\"|\"$)/g, '')], // remove quotes at start and end of string\n          valueType: value.startsWith('\"') && value.endsWith('\"') ? 'string' : undefined,\n        });\n      }\n    }\n  }\n\n  const migratedQuery: TempoQuery = {\n    datasource: query.datasource,\n    filters,\n    groupBy: query.groupBy,\n    limit: query.limit,\n    query: query.query,\n    queryType: 'traceqlSearch',\n    refId: query.refId,\n  };\n  return migratedQuery;\n};\n\nexport const stepToNanos = (step?: string) => {\n  if (!step) {\n    return 0;\n  }\n\n  const match = step.match(/(\\d+)(.+)/);\n\n  const rawLength = match?.[1];\n  const unit = match?.[2];\n\n  if (rawLength) {\n    if (unit === 'ns') {\n      return parseInt(rawLength, 10);\n    }\n    if (unit === 'µs') {\n      return parseInt(rawLength, 10) * 1000;\n    }\n    if (unit === 'ms') {\n      return parseInt(rawLength, 10) * 1000000;\n    }\n    const duration = parseDuration(step);\n    return (\n      (duration.seconds || 0) * 1000000000 +\n      (duration.minutes || 0) * 60000000000 +\n      (duration.hours || 0) * 3600000000000\n    );\n  }\n\n  return 0;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__6089__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7781__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8531__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2007__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3241__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8146__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5959__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1269__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3059__;","import { cx, css } from '@emotion/css';\nimport React from 'react';\nimport '@grafana/data';\nimport { useStyles2, Button } from '@grafana/ui';\n\nconst AccessoryButton = ({ className, ...props }) => {\n  const styles = useStyles2(getButtonStyles);\n  return /* @__PURE__ */ React.createElement(Button, { ...props, className: cx(className, styles.button) });\n};\nconst getButtonStyles = (theme) => ({\n  button: css({\n    paddingLeft: theme.spacing(3 / 2),\n    paddingRight: theme.spacing(3 / 2)\n  })\n});\n\nexport { AccessoryButton };\n//# sourceMappingURL=AccessoryButton.js.map\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"public/plugins/tempo/\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t4231: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunktempo\"] = globalThis[\"webpackChunktempo\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","import { DashboardLoadedEvent } from '@grafana/data';\nimport { getTemplateSrv, reportInteraction } from '@grafana/runtime';\n\nimport pluginJson from './plugin.json';\nimport { TempoQuery } from './types';\n\ntype TempoOnDashboardLoadedTrackingEvent = {\n  grafana_version?: string;\n  dashboard_id?: string;\n  org_id?: number;\n  service_map_query_count: number;\n  traceql_query_count: number;\n  upload_query_count: number;\n  service_map_queries_with_template_variables_count: number;\n  traceql_queries_with_template_variables_count: number;\n};\n\nexport const onDashboardLoadedHandler = ({\n  payload: { dashboardId, orgId, grafanaVersion, queries },\n}: DashboardLoadedEvent<TempoQuery>) => {\n  try {\n    const tempoQueries = queries[pluginJson.id];\n\n    if (!tempoQueries?.length) {\n      return;\n    }\n\n    let stats: TempoOnDashboardLoadedTrackingEvent = {\n      grafana_version: grafanaVersion,\n      dashboard_id: dashboardId,\n      org_id: orgId,\n      service_map_query_count: 0,\n      traceql_query_count: 0,\n      upload_query_count: 0,\n      service_map_queries_with_template_variables_count: 0,\n      traceql_queries_with_template_variables_count: 0,\n    };\n\n    for (const query of tempoQueries) {\n      if (query.hide) {\n        continue;\n      }\n\n      if (query.queryType === 'serviceMap') {\n        stats.service_map_query_count++;\n        if (query.serviceMapQuery && hasTemplateVariables(query.serviceMapQuery)) {\n          stats.service_map_queries_with_template_variables_count++;\n        }\n      } else if (query.queryType === 'traceql') {\n        stats.traceql_query_count++;\n        if (hasTemplateVariables(query.query)) {\n          stats.traceql_queries_with_template_variables_count++;\n        }\n      } else if (query.queryType === 'upload') {\n        stats.upload_query_count++;\n      }\n    }\n\n    reportInteraction('grafana_tempo_dashboard_loaded', stats);\n  } catch (error) {\n    console.error('error in tempo tracking handler', error);\n  }\n};\n\nconst hasTemplateVariables = (val?: string | string[]): boolean => {\n  return (Array.isArray(val) ? val : [val]).some((v) => getTemplateSrv().containsTemplate(v));\n};\n","import { lazy, Suspense } from 'react';\n\nimport { DataSourcePlugin, DashboardLoadedEvent, type QueryEditorProps } from '@grafana/data';\nimport { getAppEvents } from '@grafana/runtime';\nimport { LoadingPlaceholder } from '@grafana/ui';\n\nimport type { ConfigEditorProps } from './configuration/ConfigEditor';\nimport { TempoDatasource } from './datasource';\nimport { onDashboardLoadedHandler } from './tracking';\nimport type { TempoQuery } from './types';\n\n// Lazy load the QueryField and ConfigEditor components to reduce the size of the initial bundle\nconst TempoQueryFieldLazy = lazy(() => import('./QueryField'));\nconst ConfigEditorLazy = lazy(() => import('./configuration/ConfigEditor'));\nconst CheatSheetLazy = lazy(() => import('./CheatSheet'));\n\nfunction TempoQueryField(props: QueryEditorProps<TempoDatasource, TempoQuery>) {\n  return (\n    <Suspense fallback={<LoadingPlaceholder text={'Loading editor'} />}>\n      <TempoQueryFieldLazy {...props} />\n    </Suspense>\n  );\n}\n\nfunction ConfigEditor(props: ConfigEditorProps) {\n  return (\n    <Suspense fallback={<LoadingPlaceholder text={'Loading editor'} />}>\n      <ConfigEditorLazy {...props} />\n    </Suspense>\n  );\n}\n\nfunction CheatSheet() {\n  return (\n    <Suspense fallback={null}>\n      <CheatSheetLazy />\n    </Suspense>\n  );\n}\n\nexport const plugin = new DataSourcePlugin(TempoDatasource)\n  .setQueryEditor(TempoQueryField)\n  .setConfigEditor(ConfigEditor)\n  .setQueryEditorHelp(CheatSheet);\n\n// Subscribe to on dashboard loaded event so that we can track plugin adoption\ngetAppEvents().subscribe<DashboardLoadedEvent<TempoQuery>>(DashboardLoadedEvent, onDashboardLoadedHandler);\n"],"names":["inProgress","dataWebpackPrefix","tslib_1","react_1","useAsyncFn_1","__importDefault","exports","fn","deps","_a","default","loading","state","callback","useEffect","Object","defineProperty","value","useMountedState_1","initialState","lastCallId","useRef","isMounted","useState","set","useCallback","args","_i","arguments","length","callId","current","prevState","__assign","apply","then","error","mountedRef","get","f","k","Symbol","for","l","m","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","Fragment","jsx","jsxs","module","ANY","Comparator","constructor","comp","options","parseOptions","loose","trim","split","join","debug","this","parse","semver","operator","version","r","re","t","COMPARATORLOOSE","COMPARATOR","match","TypeError","undefined","SemVer","toString","test","er","cmp","intersects","Range","includePrerelease","startsWith","includes","safeRe","SPACE_CHARACTERS","range","raw","formatted","replace","map","parseRange","filter","first","isNullSet","isAny","i","comps","format","memoKey","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","cached","cache","hr","HYPHENRANGELOOSE","HYPHENRANGE","hyphenReplace","COMPARATORTRIM","comparatorTrimReplace","TILDETRIM","tildeTrimReplace","CARETTRIM","caretTrimReplace","rangeList","parseComparator","replaceGTE0","rangeMap","Map","comparators","size","has","delete","result","values","some","thisComparators","isSatisfiable","rangeComparators","every","thisComparator","rangeComparator","testSet","remainingComparators","slice","testComparator","pop","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","id","toLowerCase","replaceTilde","TILDELOOSE","TILDE","_","M","pr","ret","replaceCaret","CARETLOOSE","CARET","z","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","$0","from","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","prerelease","allowed","major","minor","patch","MAX_LENGTH","MAX_SAFE_INTEGER","compareIdentifiers","LOOSE","FULL","num","build","compare","other","compareMain","comparePre","compareBuild","inc","release","identifier","identifierBase","Error","PRERELEASELOOSE","PRERELEASE","base","Number","push","isNaN","s","eq","neq","gt","gte","lt","lte","op","String","rtl","coerceRtlRegex","COERCERTLFULL","COERCERTL","next","exec","index","lastIndex","COERCEFULL","COERCE","versionA","versionB","version1","version2","v1","v2","comparison","v1Higher","highVersion","lowVersion","highHasPre","prefix","throwErrors","parsed","list","sort","v","internalRe","constants","identifiers","valid","clean","diff","rcompare","compareLoose","rsort","coerce","satisfies","toComparators","maxSatisfying","minSatisfying","minVersion","validRange","outside","gtr","ltr","simplifyRange","subset","src","tokens","SEMVER_SPEC_VERSION","RELEASE_TYPES","rcompareIdentifiers","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","process","env","NODE_DEBUG","console","numeric","anum","bnum","max","firstKey","keys","looseOption","freeze","emptyOpts","R","LETTERDASHNUMBER","safeRegexReplacements","createToken","name","isGlobal","safe","token","makeSafeRegex","RegExp","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","BUILD","FULLPLAIN","MAINVERSIONLOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCEPLAIN","LONETILDE","LONECARET","r1","r2","versions","maxSV","rangeObj","forEach","min","minSV","minver","setMin","comparator","compver","hilo","gtfn","ltefn","ltfn","ecomp","high","low","prev","ranges","simplified","original","minimumVersionWithPreRelease","minimumVersion","simpleSubset","sub","dom","eqSet","Set","gtltComp","higher","lower","hasDomLT","hasDomGT","higherGT","lowerLT","add","needDomLTPre","needDomGTPre","sawNonNull","OUTER","simpleSub","simpleDom","isSub","timeoutMap","TemporaryAlert","style","theme","useTheme2","css","position","zIndex","portal","top","right","visible","setVisible","timer","setTimer","clearTimeout","text","setTimeout","severity","Alert","className","elevated","onRemove","title","BarGaugeDisplayMode","TableCellDisplayMode","VariableFormatID","datasource","updateFilter","isTagsLoading","tags","setError","hideScope","hideTag","hideValue","query","addVariablesToOptions","isMulti","allowCustomValue","styles","useStyles2","getStyles","alertText","setAlertText","scopedTag","useMemo","filterScopedTag","languageProvider","tagQuery","setTagQuery","tagValuesQuery","setTagValuesQuery","updateOptions","tag","getOptionsV2","isFetchError","status","message","isLoadingValues","useAsync","Array","isArray","find","o","label","valueType","scopeOptions","TraceqlSearchScope","getTags","optionsOfFirstType","uniqueOptionType","operatorList","allOperators","keywordOperators","stringOperators","numberOperators","operatorOptions","operatorSelectableValue","formatTagOptions","filterTag","uniq","tagOptions","OPTIONS_LIMIT","queryLowerCase","filterdOptions","tagValueOptions","HorizontalGroup","spacing","width","Select","dropdown","inputId","withTemplateVariableOptions","scope","onChange","placeholder","aria-label","isLoading","onInputChange","action","onCloseMenu","isClearable","virtualized","val","allowCreateWhileLoading","getTemplateSrv","getVariables","boxShadow","vertical","display","flexDirection","gap","horizontal","addTag","marginLeft","deleteFilter","filters","staticTags","hideValues","requireTagAndValue","generateQueryWithoutFilter","handleOnAdd","generateId","Span","getFilteredTags","validInput","div","SearchField","AccessoryButton","variant","icon","onClick","tooltip","span","uuidv4","interpolateFilters","scopedVars","updatedFilter","Pipe","isRegExpOperator","valueHelper","getEscapedSpanNames","scopeHelper","lp","getIntrinsics","Event","Instrumentation","Link","Resource","tagHelper","durationType","filterToQuerySection","generateQueryFromAdHocFilters","adHocValueHelper","parseInt","getTagWithoutScope","filterTitle","startCase","getUnscopedTags","scopes","Intrinsic","flat","getIntrinsicTags","getAllTags","getTagsByScope","replaceAt","array","description","MetricsQueryType","SearchStreamingState","SearchTableType","TempoVariableQueryType","variableOptions","refId","TempoVariableQueryEditor","setLabel","setType","labelOptions","setLabelOptions","labelQuery","setLabelQuery","labelNamesQuery","labelNames","handleBlur","InlineFieldRow","InlineField","labelWidth","newType","onBlur","newLabel","newLabelValue","secondsMetric","totalsMetric","failedMetric","histogramMetric","rateMetric","expr","topk","params","errorRateMetric","durationMetric","defaultTableFilter","serviceMapMetrics","collectMetricData","frame","stat","metric","nodesMap","edgesMap","valueName","row","serverId","server_service_namespace","server","clientId","client_service_namespace","client","edgeId","target","targetName","targetNamespace","source","sourceName","sourceNamespace","namespace","collectIsInstrumented","isInstrumented","connection_type","createTableFrameFromMetricsSummaryQuery","data","targetQuery","instanceSettings","emptyResponse","dynamicMetrics","res","configQuery","getConfigQuery","series","FieldType","string","config","getConfig","createDataFrame","fields","localeCompare","number","displayNameFromDS","custom","unit","getPercentileRow","meta","preferredVisualisationType","metricsData","transformToMetricsData","trace","field","sortDataFrame","errorPercentage","errorSpanCount","getNumberForMetric","spanCount","p50","p90","p95","p99","getMetricValue","queryParts","x","isNumber","isIntrinsic","surround","closingBracketIndex","indexOf","queryAfterClosingBracket","substring","commonConfig","noValue","links","url","internal","datasourceUid","uid","datasourceName","queryType","getSpanStatusCode","getSpanKind","kind","statusCode","MutableDataFrame","createConstMap","len","toUpperCase","SemanticResourceAttributes","createNodeGraphFrames","nodes","edges","view","DataFrameView","traceDuration","traceEndTime","traceStartTime","Infinity","startTime","duration","findTraceDuration","spanMap","getSpan","children","parentId","parentIds","makeSpanMap","spanID","parentSpanID","childrenDuration","getNonOverlappingDuration","selfDuration","stats","getStats","Fields","serviceName","subTitle","operationName","mainStat","main","secondaryStat","secondary","color","convertTraceToGraph","nodesFrame","edgesFrame","displayName","mode","node","edge","reduce","acc","tail","prevStart","prevEnd","start","end","toFixedNoTrailingZeros","parseFloat","toFixed","getAttributeValue","stringValue","boolValue","Boolean","intValue","doubleValue","arrayValue","arValue","resourceToProcess","resource","serviceTags","attribute","attributes","SERVICE_NAME","getSpanTags","spanTags","getReferences","references","link","traceId","spanId","traceID","getLogs","logs","events","event","timestamp","timeUnixNano","transformTrace","response","nodeGraph","emptyDataQueryResponse","traceToProfilesData","jsonData","traceToProfilesOptions","tracesToProfiles","profilesDataSourceSettings","getDataSourceSrv","getInstanceSettings","customQuery","dataLink","labelSelector","groupBy","profileTypeId","spanSelector","origin","DataLinkConfigOrigin","Datasource","toDataFrame","formatTraceQLResponse","tableType","Spans","spanDynamicAttrs","hasNameAttribute","getSpanSets","ss","attr","spans","hidden","panelsState","time","startTimeUnixNano","spanSet","transformSpanToTraceData","createTableFrameFromTraceQlQueryAsSpans","Raw","JSON","stringify","createDataFrameFromTraceQlQuery","nestedFrames","uniqueRowIdFields","traceData","durationMs","traceService","rootServiceName","traceName","rootTraceName","transformToTraceData","spanSets","traceSubFrame","createTableFrameFromTraceQlQuery","subFrame","createTheme","getDisplayProcessor","spanStartTimeUnixMs","traceIdHidden","durationNanos","attrs","concat","Value","bool_value","double_value","int_value","string_value","traceFormat","findSourceField","referenceField","sourceFields","candidates","labels","candidate","shallowCompare","TOTAL_BYTES_STAT","getCombinedMetadataStats","destStats","sourceStats","destStat","sourceStat","eitherStat","cloneQueryResponse","cloneDataFrame","getLiveStreamKey","doTempoMetricsStreaming","ds","LoadingState","NotStarted","step","stepToNanos","getGrafanaLiveSrv","getStream","LiveChannelScope","DataSource","path","timeRange","toISOString","pipe","takeWhile","evt","frameState","Done","newResult","fieldCache","messageFrame","dataFrameFromJSON","FieldCache","getFieldByName","Streaming","scan","curr","currentResult","newFrame","currentFrame","frame1","frame2","frameType1","DataFrameType","TimeSeriesMulti","field1","field2","customType1","frameType","customType2","shouldCombine","dest","totalFields","Math","sourceField","nanos","combineFrames","mergedErrors","errors","mergedError","mergedTraceIds","traceIds","combineResponses","timeFieldIndex","findIndex","accFrame","duplicatesMap","indexesToRemove","indexes","removeDuplicateTimeFieldValues","mergeFrames","metricsDataFrame","metrics","elapsedTime","progressThresholds","steps","ThresholdsMode","Absolute","capitalize","totalBlocks","completedJobs","totalJobs","cellOptions","thresholds","TempoVariableSupport","CustomVariableSupport","request","executeVariableQuery","targets","super","editor","DEFAULT_LIMIT","DEFAULT_SPSS","FeatureName","featuresToTempoVersion","TempoDatasource","DataSourceWithBackend","Promise","LabelNames","LabelValues","labelValuesQuery","fetchTags","getAutocompleteTags","labelName","tagsV2","flatMap","tagV2","scopeAndTag","getOptionsV1","option","getTagKeys","getTagValues","isFeatureAvailable","featureName","actualVersion","tempoVersion","isStreamingSearchEnabled","streamingEnabled","search","liveEnabled","isStreamingMetricsEnabled","isTraceQlMetricsQuery","isTraceIdQuery","subQueries","filteredTargets","hide","clear","of","nativeSearch","spanName","maxDuration","minDuration","migratedQuery","migrateFromSearchToTraceQLSearch","traceqlSearch","traceql","appliedQuery","applyVariables","queryValue","reportInteraction","datasourceType","app","grafana_version","buildInfo","hasQuery","handleTraceIdQuery","streaming","handleMetricsStreamingQuery","handleTraceQlMetricsQuery","handleTraceQlQuery","featureToggles","metricsSummary","hasGroupBy","queryFromFilters","generateQueryFromFilters","handleMetricsSummaryQuery","traceqlSearchTargets","handleStreamingQuery","_request","limit","spss","unix","traces","catchError","err","getErrorMessage","upload","uploadedJson","isTraceData","batches","isServiceGraphData","df","librarySpan","instrumentationLibrarySpans","parentSpanId","code","statusMessage","instrumentationLibraryName","instrumentationLibrary","instrumentationLibraryVersion","traceState","endTimeUnixNano","transformFromOTEL","enabled","serviceMap","hasServiceMapQuery","serviceMapQuery","dsId","tempoDsUid","tempoDatasourceUid","queryPrometheus","makePromServiceMapRequest","toArray","responses","errorRes","frames","frameDTO","getMetricFrames","createDF","arc","fixedColor","FieldColorModeId","Fixed","boolean","createServiceMapDataFrames","nodeId","total","seconds","NaN","round","failed","convertToDataFrames","mapPromMetricsToServiceMap","nodeLength","edgeLength","serviceMapIncludeNamespace","getFieldConfig","concatMap","serviceMapResponse","serviceMapRequest","makeServiceGraphViewRequest","buildExpr","rates","rateQuery","rateResponse","serviceGraphViewMetrics","errorRateBySpanName","durationsBySpanName","CoreApp","Explore","spanNameField","spanNameLabels","spanNames","errorAndDurationResponse","serviceGraphView","secondResponse","rate","errorRate","filterable","makePromLink","buildLinkExpr","decimals","Lcd","Gauge","errorRateNames","errorRateValues","errorRateObj","getRateAlignedValues","durationObj","delimiter","makeTempoLink","getServiceGraphViewDataFrames","errorAndDurationQuery","merge","applyTemplateVariables","interpolateVariablesInQueries","queries","getRef","expandedQuery","templateSrv","validTargets","EMPTY","makeTraceIdRequest","dataTopic","traceIDField","dataLinks","getDataLinks","requestTime","performance","now","SpansPerSpanSet","doTempoSearchStreaming","traceQuery","timeShiftEnabled","dateTime","subtract","rangeUtil","intervalToMs","spanStartTimeShift","spanEndTimeShift","metadataRequest","lastValueFrom","method","hideFromInspector","apiUrl","urlUtil","serializeParams","req","getBackendSrv","fetch","testDatasource","observables","headers","mergeMap","Date","setMinutes","getMinutes","requestId","interval","intervalMs","timezone","Traces","forkJoin","observableResults","erroredResult","getQueryDisplayText","tracesToLogs","spanBar","tagLimit","init","formatGroupBy","Unscoped","gb","filterCount","summaries","summary","TempoLanguageProvider","variables","instant","exemplar","targetField","tempoField","namespaceFields","serverSumBy","makeTempoLinkServiceMap","serviceNamespace","includeNamespace","replaceVariables","NodeGraphDataFrameFieldNames","peerAttribute","extraSumByFields","sumSubExprs","groupSubExprs","extraParams","serviceMapQueryMatch","item","rateResp","objToAlign","rateNames","LanguageProvider","v1Resp","v2Resp","getTagsLimit","setV2Tags","setV1Tags","tagNames","encodedTag","encodeTag","tagValues","initialValues","tagsV1","startTask","intrinsicsV1","getMetricsSummaryTags","getTraceqlAutocompleteTags","encodeURIComponent","assign","operators","intrinsics","functions","keywords","languageDefinition","extensions","aliases","mimetypes","def","language","ignoreCase","defaultToken","tokenPostfix","statusValues","symbols","escapes","digits","octaldigits","binarydigits","tokenizer","root","cases","string_double","string_single","string_back","languageConfiguration","wordPattern","brackets","autoClosingPairs","open","close","surroundingPairs","folding","traceqlGrammar","comment","pattern","inside","alias","punctuation","getDS","dsSrv","endsWith","rawLength","parseDuration","minutes","hours","__WEBPACK_EXTERNAL_MODULE__6089__","__WEBPACK_EXTERNAL_MODULE__7781__","__WEBPACK_EXTERNAL_MODULE__8531__","__WEBPACK_EXTERNAL_MODULE__2007__","__WEBPACK_EXTERNAL_MODULE__3241__","__WEBPACK_EXTERNAL_MODULE__8146__","__WEBPACK_EXTERNAL_MODULE__5959__","__WEBPACK_EXTERNAL_MODULE__1269__","__WEBPACK_EXTERNAL_MODULE__3059__","getButtonStyles","Button","cx","button","paddingLeft","paddingRight","extendStatics","setPrototypeOf","__proto__","__extends","__","create","__rest","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__esDecorate","ctor","descriptorIn","contextIn","initializers","extraInitializers","accept","descriptor","done","context","access","addInitializer","unshift","__runInitializers","thisArg","useValue","__propKey","__setFunctionName","configurable","__metadata","metadataKey","metadataValue","metadata","__awaiter","_arguments","P","generator","resolve","reject","fulfilled","rejected","__generator","body","y","sent","trys","ops","Iterator","verb","iterator","__createBinding","k2","__esModule","writable","enumerable","__exportStar","__values","__read","ar","__spread","__spreadArrays","il","j","jl","__spreadArray","pack","__await","__asyncGenerator","asyncIterator","AsyncIterator","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","__setModuleDefault","ownKeys","getOwnPropertyNames","__importStar","mod","__classPrivateFieldGet","receiver","__classPrivateFieldSet","__classPrivateFieldIn","__addDisposableResource","async","dispose","inner","asyncDispose","stack","_SuppressedError","SuppressedError","suppressed","__disposeResources","fail","hasError","__rewriteRelativeImportExtension","preserveJsx","tsx","ext","cm","randomUUID","crypto","bind","getRandomValues","rnds8","Uint8Array","byteToHex","buf","offset","rnds","random","rng","RangeError","arr","unsafeStringify","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","amdO","getter","definition","chunkId","all","promises","u","globalThis","Function","window","obj","prop","script","needAttach","scripts","document","getElementsByTagName","getAttribute","createElement","charset","timeout","nc","setAttribute","onScriptComplete","onerror","onload","doneFns","parentNode","removeChild","head","appendChild","toStringTag","baseURI","self","location","href","installedChunks","installedChunkData","promise","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","hasTemplateVariables","containsTemplate","TempoQueryFieldLazy","lazy","ConfigEditorLazy","CheatSheetLazy","plugin","DataSourcePlugin","setQueryEditor","Suspense","fallback","LoadingPlaceholder","setConfigEditor","setQueryEditorHelp","getAppEvents","subscribe","DashboardLoadedEvent","payload","dashboardId","orgId","grafanaVersion","tempoQueries","dashboard_id","org_id","service_map_query_count","traceql_query_count","upload_query_count","service_map_queries_with_template_variables_count","traceql_queries_with_template_variables_count"],"sourceRoot":""}