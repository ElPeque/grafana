"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1595],{87441:(te,H,s)=>{s.d(H,{i:()=>Q});var t=s(74848),g=s(22803),z=s(96540),$=s(29675),I=s(79653);const Q=({label:R,description:U,children:V,className:J,size:K="xl"})=>{const B=(0,$.of)(S),[O,P]=(0,z.useState)(!0),F=()=>P(!O);return(0,t.jsxs)("div",{className:(0,g.cx)(B.wrapper,J),children:[(0,t.jsx)(I.e,{className:B.toggle,size:K,onToggle:F,isCollapsed:O,text:R}),U&&(0,t.jsx)("p",{className:B.description,children:U}),(0,t.jsx)("div",{className:O?B.hidden:B.content,children:V})]})},S=R=>({wrapper:(0,g.css)({marginTop:R.spacing(1),paddingBottom:R.spacing(1)}),toggle:(0,g.css)({margin:R.spacing(1,0),padding:0}),hidden:(0,g.css)({display:"none"}),description:(0,g.css)({color:R.colors.text.secondary,fontSize:R.typography.size.sm,fontWeight:R.typography.fontWeightRegular,margin:0}),content:(0,g.css)({paddingLeft:R.spacing(3)})})},77207:(te,H,s)=>{s.d(H,{e:()=>le});var t=s(74848),g=s(22803),z=s(2543),$=s(96540),I=s(49785),Q=s(86489),S=s(29675),R=s(81942),U=s(79232),V=s(34128),J=s(44826),K=s(22084),B=s(72978),O=s(50926),P=s(54594),F=s(70437);const n=({value:e,onChange:i,readOnly:a=!1})=>{const r=(0,S.of)(o),[m,c]=(0,$.useState)(u(e));(0,$.useEffect)(()=>c(u(e)),[e]);const l=h=>{i(d(h))},f=h=>{const E=m.slice(),v=E.splice(h,1)[0];c(E),v[0]&&l(E)},j=(h,E)=>{const v=m[E],x=m.map((N,b)=>b===E?h:N);c(x),(h[0]||v[0])&&l(x)};return(0,t.jsxs)("div",{children:[!!m.length&&(0,t.jsxs)("table",{className:r.table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Value"}),!a&&(0,t.jsx)("th",{})]})}),(0,t.jsx)("tbody",{children:m.map(([h,E],v)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)(V.p,{readOnly:a,value:h,onChange:x=>j([x.currentTarget.value,E],v)})}),(0,t.jsx)("td",{children:(0,t.jsx)(V.p,{readOnly:a,value:E,onChange:x=>j([h,x.currentTarget.value],v)})}),!a&&(0,t.jsx)("td",{children:(0,t.jsx)(F.M,{icon:"trash-alt",tooltip:"delete",onClick:()=>f(v)})})]},v))})]}),!a&&(0,t.jsx)(P.$n,{className:r.addButton,type:"button",variant:"secondary",icon:"plus",size:"sm",onClick:()=>c([...m,["",""]]),children:"Add"})]})},o=e=>({addButton:(0,g.css)({marginTop:e.spacing(1)}),table:(0,g.css)({"tbody td":{padding:`0 ${e.spacing(1)} ${e.spacing(1)} 0`}})}),d=e=>{const i={};for(const[a,r]of e)a&&(i[a]=r);return i},u=e=>Object.entries(e??{}),p=({value:e,onChange:i,readOnly:a=!1})=>{const r=(0,S.of)(y),m=l=>{if(!e)return;const f=e.slice();f.splice(l,1),i(f)},c=(l,f)=>{e&&i(e.map((j,h)=>h===f?l:j))};return(0,t.jsxs)("div",{children:[!!e?.length&&e.map((l,f)=>(0,t.jsxs)("div",{className:r.row,children:[(0,t.jsx)(V.p,{readOnly:a,value:l,onChange:j=>c(j.currentTarget.value,f)}),!a&&(0,t.jsx)(F.M,{className:r.deleteIcon,icon:"trash-alt",tooltip:"delete",onClick:()=>m(f)})]},f)),!a&&(0,t.jsx)(P.$n,{className:r.addButton,type:"button",variant:"secondary",icon:"plus",size:"sm",onClick:()=>i([...e??[],""]),children:"Add"})]})},y=e=>({row:(0,g.css)({display:"flex",flexDirection:"row",marginBottom:e.spacing(1),alignItems:"center"}),deleteIcon:(0,g.css)({marginLeft:e.spacing(1)}),addButton:(0,g.css)({marginTop:e.spacing(1)})});var C=s(63202),A=s(87441);const D=e=>({collapsibleSection:(0,g.css)({margin:0,padding:0}),wrapper:(0,g.css)({margin:e.spacing(2,0),padding:e.spacing(1),border:`solid 1px ${e.colors.border.medium}`,borderRadius:e.shape.radius.default,position:"relative"}),description:(0,g.css)({color:e.colors.text.secondary,fontSize:e.typography.size.sm,fontWeight:e.typography.fontWeightRegular,margin:0}),deleteIcon:(0,g.css)({position:"absolute",right:e.spacing(1),top:e.spacing(1)}),addButton:(0,g.css)({marginTop:e.spacing(1)})}),G=({option:e,pathPrefix:i,errors:a,defaultValues:r,readOnly:m=!1})=>{const c=(0,S.of)(D),l=`${i}${e.propertyName}`,f=(0,I.xW)(),{fields:j,append:h,remove:E}=(0,C.r)({name:l,formAPI:f,defaults:r});return(0,t.jsx)("div",{className:c.wrapper,children:(0,t.jsxs)(A.i,{className:c.collapsibleSection,label:`${e.label} (${j.length})`,description:e.description,children:[(j??r??[]).map((v,x)=>(0,t.jsxs)("div",{className:c.wrapper,children:[!m&&(0,t.jsx)(F.M,{"data-testid":`${l}.${x}.delete-button`,icon:"trash-alt",tooltip:"delete",onClick:()=>E(x),className:c.deleteIcon}),e.subformOptions?.map(N=>(0,t.jsx)(le,{readOnly:m,defaultValue:v?.[N.propertyName],option:N,pathPrefix:`${l}.${x}.`,error:a?.[x]?.[N.propertyName]},N.propertyName))]},x)),!m&&(0,t.jsx)(P.$n,{"data-testid":`${l}.add-button`,className:c.addButton,type:"button",variant:"secondary",icon:"plus",size:"sm",onClick:()=>h({__id:String(Math.random())}),children:"Add"})]})})},oe=({option:e,pathPrefix:i,errors:a,defaultValue:r,readOnly:m=!1,secureFields:c={},onResetSecureField:l})=>{const f=(0,S.of)(D),j=`${i}${e.propertyName}`,{watch:h}=(0,I.xW)(),E=h(j),v=E===void 0?r:E,[x,N]=(0,$.useState)(!!v);return(0,t.jsxs)("div",{className:f.wrapper,"data-testid":`${j}.container`,children:[(0,t.jsx)("h6",{children:e.label}),e.description&&(0,t.jsx)("p",{className:f.description,children:e.description}),x&&(0,t.jsxs)(t.Fragment,{children:[!m&&(0,t.jsx)(F.M,{"data-testid":`${j}.delete-button`,icon:"trash-alt",tooltip:"delete",onClick:()=>N(!1),className:f.deleteIcon}),(e.subformOptions??[]).map(b=>(0,t.jsx)(le,{readOnly:m,secureFields:c,onResetSecureField:l,defaultValue:r?.[b.propertyName],parentOption:e,option:b,pathPrefix:`${j}.`,error:a?.[b.propertyName]},b.propertyName))]}),!x&&!m&&(0,t.jsx)(P.$n,{className:f.addButton,type:"button",variant:"secondary",icon:"plus",size:"sm",onClick:()=>N(!0),"data-testid":`${j}.add-button`,children:"Add"})]})};var se=s(73287),ge=s(58528),Y=s(48583),ve=s(60641),he=s(99764),xe=s(40271),je=s(45565),ne=s(11817),ae=s(83893),ye=s(71409),Ce=s(50292),ce=s(13005),Ee=s(38979),Te=s(70713),de=s(90231),Se=s(88214),ue=s(3991),Ne=s(12314),$e=s(91835),be=s(2876);function Re({payload:e,templateContent:i,templateName:a,payloadFormatError:r,setPayloadFormatError:m,className:c}){const l=(0,S.of)(Oe),{selectedAlertmanager:f}=(0,ce.VI)(),j=f===Se.hY,{data:h,error:E}=(0,be.g)(i,a,e,m),v=(0,$e.P)(E,r,h),x="template-preview";return(0,t.jsxs)("div",{className:(0,g.cx)(c,l.mainContainer),children:[(0,t.jsxs)("div",{className:l.container,children:[(0,t.jsx)(ue.D,{label:"Template content"}),(0,t.jsx)(de.a,{flex:1,children:(0,t.jsx)("div",{className:l.viewerContainer({height:400}),children:(0,t.jsx)(Te.default,{children:({width:N,height:b})=>(0,t.jsx)(Ne.K,{value:i,containerStyles:l.editorContainer,width:N,height:b,readOnly:!0})})})})]}),j&&(0,t.jsxs)("div",{className:l.container,children:[(0,t.jsx)(ue.D,{id:x,label:"Preview with the default payload"}),(0,t.jsx)(de.a,{flex:1,children:(0,t.jsx)("div",{role:"presentation","aria-describedby":x,className:l.viewerContainer({height:"minHeight"}),children:v})})]})]})}const Oe=e=>({mainContainer:(0,g.css)({display:"flex",flexDirection:"column",gap:e.spacing(2)}),container:(0,g.css)({label:"template-preview-container",display:"flex",flexDirection:"column",borderRadius:e.shape.radius.default,border:`1px solid ${e.colors.border.medium}`}),viewerContainer:({height:i})=>(0,g.css)({height:i,overflow:"auto",backgroundColor:e.colors.background.primary}),editorContainer:(0,g.css)({width:"fit-content",border:"none"})});var w=s(76343);const{useGetDefaultTemplatesQuery:Pe}=ye.E3;function re({onSelect:e,option:i,valueInForm:a}){const[r,m]=(0,$.useState)(!1),c=()=>{m(!0),(0,ae.U6)()},l=()=>m(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.$n,{icon:"edit",tooltip:`Edit ${i.label.toLowerCase()} using existing notification templates.`,onClick:c,variant:"secondary",size:"sm",children:`Edit ${i.label}`}),r&&(0,t.jsx)(ge._,{title:`Edit ${i.label}`,size:"md",onClose:l,children:(0,t.jsx)(Ae,{onSelect:e,onClose:l,option:i,valueInForm:a})})]})}function Ie(e,i=[]){const a=new Map;return e.forEach(({content:r})=>{(0,w.D)(r).forEach(c=>{a.set(c.name,{label:c.name,value:{name:c.name,content:c.content}})})}),i.forEach(r=>{a.set(r.name,{label:r.name,value:{name:r.name,content:r.content}})}),Array.from(a.values())}function Ae({onSelect:e,onClose:i,option:a,valueInForm:r}){const m=(0,S.of)(fe),c=!!r&&!(0,w.G7)(r),[l,f]=(0,$.useState)(void 0),[j,h]=(0,$.useState)(r),{selectedAlertmanager:E}=(0,ce.VI)(),{data:v=[],error:x,isLoading:N}=(0,Ce.cC)({alertmanager:E}),{data:b}=Pe(),[X,M]=(0,$.useState)(c?"Custom":"Existing"),[q,_]=(0,se.A)(),k=[{label:"Select notification template",ariaLabel:"Select notification template",value:"Existing",description:`Select an existing notification template and preview it, or copy it to paste it in the custom tab. ${X==="Existing"?"Clicking Save saves your changes to the selected template.":""}`},{label:`Enter custom ${a.label.toLowerCase()}`,ariaLabel:`Enter custom ${a.label.toLowerCase()}`,value:"Custom",description:`Enter custom ${a.label.toLowerCase()}. ${X==="Custom"?"Clicking Save will save the custom value only.":""}`}];(0,$.useEffect)(()=>{l?.value?.name&&h((0,w.Jl)(l.value.name))},[l]);function ee(W){h(W)}const T=W=>{M(W)},L=(0,$.useMemo)(()=>!b||!v||N||x?[]:Ie(v,b),[v,b,N,x]),Z=(0,$.useMemo)(()=>{if(!L.length||!r||!(0,w.G7)(r))return null;const W=(0,w.gY)(r);return L.find(pe=>pe.label===W)||null},[L,r]);return x?(0,t.jsx)("div",{children:"Error loading templates"}):N||!v||!b?(0,t.jsx)("div",{children:"Loading..."}):(0,t.jsxs)(Y.B,{direction:"column",gap:1,justifyContent:"space-between",height:"100%",children:[(0,t.jsxs)(Y.B,{direction:"column",gap:1,children:[(0,t.jsx)(ve.z,{options:k,value:X,onChange:T,className:m.templateTabOption}),X==="Existing"?(0,t.jsxs)(Y.B,{direction:"column",gap:1,children:[(0,t.jsxs)(Y.B,{direction:"row",gap:1,alignItems:"center",children:[(0,t.jsx)(J.l6,{"data-testid":"existing-templates-selector",placeholder:"Choose notification template","aria-label":"Choose notification template",onChange:(W,pe)=>{f(W)},options:L,width:50,defaultValue:Z}),(0,t.jsx)(he.K,{tooltip:"Copy selected notification template to clipboard. You can use it in the custom tab.",onClick:()=>_((0,w.Jl)(l?.value?.name??Z?.value?.name??"")),name:"copy"})]}),(0,t.jsx)(Re,{templateContent:l?.value?.content??Z?.value?.content??"",payload:Ee.R_,templateName:l?.value?.name??Z?.value?.name??"",setPayloadFormatError:()=>{},className:(0,g.cx)(m.templatePreview,m.minEditorSize),payloadFormatError:null})]}):(0,t.jsx)(Me,{option:a,onCustomTemplateChange:ee,initialValue:j})]}),(0,t.jsxs)("div",{className:m.actions,children:[(0,t.jsx)(P.$n,{variant:"secondary",onClick:i,children:(0,t.jsx)(ne.x6,{i18nKey:"alerting.common.cancel",children:"Cancel"})}),(0,t.jsx)(P.$n,{variant:"primary",onClick:()=>{if(X==="Custom")(0,ae.t6)(),e(j);else{(0,ae.Cl)();const W=l?.value?.name??Z?.value?.name??"";e((0,w.Jl)(W))}return i()},children:(0,t.jsx)(ne.x6,{i18nKey:"common.save",children:"Save"})})]})]})}function Me({option:e,onCustomTemplateChange:i,initialValue:a}){const r=`custom-template-${e.label}`;return(0,t.jsxs)(Y.B,{direction:"column",gap:1,children:[(0,t.jsx)(xe.J,{htmlFor:r,children:(0,t.jsx)(ne.x6,{i18nKey:"alerting.contact-points.custom-template-value",children:"Custom template value"})}),(0,t.jsx)(O.f,{id:r,label:"Custom template",placeholder:e.placeholder,onChange:m=>i(m.currentTarget.value),defaultValue:a})]})}function me({useTemplates:e,onSelectTemplate:i,option:a,name:r,children:m}){const c=(0,S.of)(fe),{getValues:l}=(0,I.xW)(),f=l(r)??"";return!a.placeholder.includes("{{ template ")||typeof f!="string"?(0,t.jsx)(t.Fragment,{children:m}):f?(f?(0,w.G7)(f):!1)?(0,t.jsx)("div",{className:c.inputContainer,children:(0,t.jsxs)(Y.B,{direction:"row",gap:1,alignItems:"center",children:[(0,t.jsx)(je.E,{variant:"bodySmall",children:`Template: ${(0,w.gY)(f)}`}),e&&(0,t.jsx)(re,{onSelect:i,option:a,valueInForm:l(r)??""})]})}):(0,t.jsx)("div",{className:c.inputContainer,children:(0,t.jsxs)(Y.B,{direction:"row",gap:1,alignItems:"center",children:[m,e&&(0,t.jsx)(re,{onSelect:i,option:a,valueInForm:l(r)??""})]})}):(0,t.jsx)("div",{className:c.inputContainer,children:(0,t.jsx)(Y.B,{direction:"row",gap:1,alignItems:"center",children:e&&(0,t.jsx)(re,{onSelect:i,option:a,valueInForm:l(r)??""})})})}const fe=e=>({actions:(0,g.css)({flex:0,justifyContent:"flex-end",display:"flex",gap:e.spacing(1)}),templatePreview:(0,g.css)({flex:1,display:"flex"}),templateTabOption:(0,g.css)({width:"fit-content"}),minEditorSize:(0,g.css)({minHeight:300,minWidth:300}),inputContainer:(0,g.css)({marginTop:e.spacing(1.5)})}),le=({option:e,parentOption:i,invalid:a,pathPrefix:r,pathSuffix:m="",error:c,defaultValue:l,readOnly:f=!1,customValidator:j,onResetSecureField:h,secureFields:E={}})=>{const v=`${r}${m}`;return e.element==="subform"?(0,t.jsx)(oe,{secureFields:E,onResetSecureField:h,readOnly:f,defaultValue:l,option:e,errors:c,pathPrefix:v}):e.element==="subform_array"?(0,t.jsx)(G,{readOnly:f,defaultValues:l,option:e,pathPrefix:v,errors:c}):(0,t.jsx)(Q.D,{label:e.element!=="checkbox"&&e.element!=="radio"?e.label:void 0,description:e.description||void 0,invalid:!!c,error:c?.message,"data-testid":`${v}${e.propertyName}`,children:(0,t.jsx)(Be,{id:`${v}${e.propertyName}`,defaultValue:l,option:e,invalid:a,pathPrefix:v,readOnly:f,pathIndex:r,parentOption:i,customValidator:j,onResetSecureField:h,secureFields:E})})},Be=({option:e,invalid:i,id:a,pathPrefix:r="",pathIndex:m="",readOnly:c=!1,customValidator:l,onResetSecureField:f,secureFields:j={},parentOption:h})=>{const E=(0,S.of)(Fe),{control:v,register:x,unregister:N,getValues:b,setValue:X}=(0,I.xW)(),M=`${r}${e.propertyName}`,q=h?`${h.propertyName}.${e.propertyName}`:e.propertyName,_=j?.[q];(0,$.useEffect)(()=>()=>{N(M,{keepValue:!1})},[N,M]);const k=e.placeholder.includes("{{ template");function ee(T){X(M,T)}switch(e.element){case"checkbox":return(0,t.jsx)(R.S,{id:a,readOnly:c,disabled:c,className:E.checkbox,...x(M),label:e.label,description:e.description});case"input":return(0,t.jsx)(me,{useTemplates:k,option:e,name:M,onSelectTemplate:ee,children:_?(0,t.jsx)(U.L4,{onReset:()=>f?.(q),isConfigured:!0}):(0,t.jsx)(V.p,{id:a,readOnly:c||k||Ve(e,b,m),invalid:i,type:e.inputType,...x(M,{required:De(e,b,m),validate:{validationRule:T=>e.validationRule?ie(T,e.validationRule,e.required):!0,customValidator:T=>l?l(T):!0},setValueAs:e.setValueAs}),placeholder:e.placeholder})});case"select":return(0,t.jsx)(I.xI,{render:({field:{onChange:T,ref:L,...Z}})=>(0,t.jsx)(J.l6,{disabled:c,options:e.selectOptions??void 0,invalid:i,onChange:W=>T(W.value),...Z}),control:v,name:M,defaultValue:e.defaultValue?.value,rules:{validate:{customValidator:T=>l?l(T):!0}}});case"radio":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("legend",{className:E.legend,children:e.label}),(0,t.jsx)(I.xI,{render:({field:{ref:T,...L}})=>(0,t.jsx)(K.a,{disabled:c,options:e.selectOptions??[],...L}),control:v,defaultValue:e.defaultValue?.value,name:M,rules:{required:e.required?"Option is required":!1,validate:{validationRule:T=>e.validationRule?ie(T,e.validationRule,e.required):!0,customValidator:T=>l?l(T):!0}}})]});case"textarea":return(0,t.jsx)(me,{useTemplates:k,option:e,name:M,onSelectTemplate:ee,children:_?(0,t.jsx)(B.lp,{onReset:()=>f?.(q),isConfigured:!0}):(0,t.jsx)(O.f,{id:a,readOnly:c||k,invalid:i,placeholder:e.placeholder,...x(M,{required:e.required?"Required":!1,validate:T=>e.validationRule!==""?ie(T,e.validationRule,e.required):!0})})});case"string_array":return(0,t.jsx)(I.xI,{render:({field:{value:T,onChange:L}})=>(0,t.jsx)(p,{readOnly:c,value:T,onChange:L}),control:v,name:M});case"key_value_map":return(0,t.jsx)(I.xI,{render:({field:{value:T,onChange:L}})=>(0,t.jsx)(n,{readOnly:c,value:T,onChange:L}),control:v,name:M});default:return console.error("Element not supported",e.element),null}},Fe=e=>({checkbox:(0,g.css)({height:"auto"}),legend:(0,g.css)({fontSize:e.typography.h6.fontSize})}),ie=(e,i,a)=>e===""&&!a||RegExp(i).test(e)?!0:"Invalid format",De=(e,i,a)=>{const r=i(`${a}secureFields`),m=i(`${a}secureSettings`);return e.dependsOn?(0,z.isEmpty)(r)||!r[e.dependsOn]?!!!m[e.dependsOn]&&e.required?"Required":!1:!!!r[e.dependsOn]&&e.required?"Required":!1:e.required?"Required":!1},Ve=(e,i,a)=>e.dependsOn?(0,z.isEmpty)(i(`${a}secureFields`))?i(`${a}secureSettings.${e.dependsOn}`):i(`${a}secureFields.${e.dependsOn}`):!1},63202:(te,H,s)=>{s.d(H,{r:()=>I});var t=s(2543),g=s.n(t),z=s(96540);const $=[];function I(Q){const{name:S,formAPI:R,defaults:U,softDelete:V}=Q,{watch:J,getValues:K,reset:B,setValue:O}=R,P=J(S)??U??$,F=(0,z.useCallback)(n=>{const o=JSON.parse(JSON.stringify(K())),d=n(P??[]);B((0,t.set)(o,S,d))},[K,S,B,P]);return{fields:P,append:(0,z.useCallback)(n=>F(o=>[...o,n]),[F]),remove:(0,z.useCallback)(n=>{V?O(`${S}.${n}.__deleted`,!0):F(o=>{const d=o.slice();return d.splice(n,1),d})},[F,S,O,V])}}},72897:(te,H,s)=>{s.d(H,{FN:()=>O,Iq:()=>$,QX:()=>Q,Xo:()=>z,bB:()=>I,qg:()=>K});var t=s(2543),g=s.n(t);function z(n,o){const d={};let u=1;return[{name:n.name,items:n.grafana_managed_receiver_configs?.map(y=>{const C=String(u++);d[C]=y;const A=o.find(({type:D})=>D===y.type);return V(C,y,A)})??[]},d]}function $(n,o){const d={};let u=1;const p=Object.entries(n).filter(([C])=>C.endsWith("_configs")&&C!=="grafana_managed_receiver_configs").map(([C,A])=>[C.replace("_configs",""),A]).map(([C,A])=>A.map(D=>{const G=String(u++);if(d[G]={type:C,config:D},!o.find(se=>se.type===C))throw new Error(`unknown cloud notifier: ${C}`);return U(G,C,D)})).flat();return[{name:n.name,items:p},d]}function I(n,o,d,u){return{name:n.name,grafana_managed_receiver_configs:(n.items??[]).map(p=>{const y=o[p.__id],C=u.find(A=>A.type===p.type);return K(p,d,n.name,y,C)})}}function Q(n,o){const d={name:n.name};return n.items.forEach(({__id:u,type:p,settings:y,sendResolved:C})=>{const A=O({...F(y),send_resolved:C??o.sendResolved}),D=p==="jira"?S(A):A;`${p}_configs`in d?d[`${p}_configs`]?.push(D):d[`${p}_configs`]=[D]}),d}function S(n){const o=structuredClone(n);if(typeof o.fields=="object")for(const[d,u]of Object.entries(o.fields)){let p;try{p=JSON.parse(u)}catch{p=u}o.fields[d]=p}return o}function R(n){const o=structuredClone(n);if(typeof o.fields=="object")for(const[d,u]of Object.entries(o.fields)){let p;typeof u=="object"?p=JSON.stringify(u):p=u,o.fields[d]=p}return o}function U(n,o,d){return{__id:n,type:o,settings:{...o==="jira"?R(d):d},secureFields:{},secureSettings:{},sendResolved:d.send_resolved}}function V(n,o,d){const u={__id:n,type:o.type,provenance:o.provenance,secureSettings:{},settings:{...o.settings},secureFields:{...o.secureFields},disableResolveMessage:o.disableResolveMessage};return d?.options.forEach(p=>{p.secure&&u.settings[p.propertyName]&&(u.secureSettings[p.propertyName]=u.settings[p.propertyName],delete u.settings[p.propertyName])}),u}function J(n){const o=[];function d(u,p){for(const y of u){const C=p?`${p}.${y.propertyName}`:y.propertyName;if(y.subformOptions){d(y.subformOptions,C);continue}if(y.secure){o.push(C);continue}}}return d(n.options),o}function K(n,o,d,u,p){const y={settings:O({...u&&u.type===n.type?u.settings??{}:{},...n.settings??{}}),secureSettings:P(n.secureSettings,u?.secureFields),type:n.type,name:d,disableResolveMessage:n.disableResolveMessage??u?.disableResolveMessage??o.disableResolveMessage},C=p?J(p):[],A=(0,t.reduce)(C,(D={},G)=>(D[G]=(0,t.get)(y.settings,G)??(0,t.get)(n.secureFields,G),D),{});return y.secureSettings={...A,...y.secureSettings},y.settings=(0,t.omit)(y.settings,C),u&&(y.uid=u.uid),y}const B=n=>(0,t.isNil)(n)||n==="";function O(n){return(0,t.isArray)(n)?n.forEach(O):typeof n=="object"&&n!==null&&Object.entries(n).forEach(([o,d])=>{B(d)?delete n[o]:O(d)}),n}function P(n={},o={}){return(0,t.omitBy)(n,(d,u)=>B(d)&&!(0,t.has)(o,u))}function F(n){function o(u){(0,t.isArray)(u)?u.forEach(o):typeof u=="object"&&u!==null&&("__id"in u&&delete u.__id,Object.values(u).forEach(o))}const d=structuredClone(n);return o(d),d}}}]);

//# sourceMappingURL=1595.d163a00c487d38d8b290.js.map