(globalThis.webpackChunkmysql=globalThis.webpackChunkmysql||[]).push([[131],{2814:(e,t,r)=>{"use strict";r.d(t,{d$:()=>Xm,M$:()=>um,XK:()=>Qg,Aq:()=>eb});var n={};r.r(n),r.d(n,{applyToJS:()=>bo,cleanJSX:()=>wo,deepEqual:()=>go,deepFreeze:()=>Co,escapeRegExp:()=>Oo,getFirstDefined:()=>xo,getLogger:()=>ko,getOpCardinality:()=>fo,isDirtyJSX:()=>So,isImmutable:()=>ho,isImmutableList:()=>yo,isJSX:()=>Eo,isJsonCompatible:()=>Io,isJsonLogic:()=>Fo,isObject:()=>uo,logger:()=>To,mergeArraysSmart:()=>Lo,mergeCustomizerNoArrays:()=>_o,omit:()=>po,opDefKeysToOmit:()=>so,shallowCopy:()=>co,shallowEqual:()=>vo,sleep:()=>jo,toImmutableList:()=>mo,uuid:()=>io,widgetDefKeysToOmit:()=>lo});var o={};r.r(o),r.d(o,{getItemInListValues:()=>Ho,getListValue:()=>Zo,getTitleInListValues:()=>Xo,getValueInListValues:()=>Jo,listValuesToArray:()=>Ko,makeCustomListValue:()=>Go,mapListValues:()=>Yo,searchListValue:()=>Qo,toListValue:()=>Uo});var i={};r.r(i),r.d(i,{_fixImmutableValue:()=>gi,expandTreePath:()=>ei,expandTreeSubpath:()=>ti,fixEmptyGroupsInTree:()=>ai,fixPathsInTree:()=>ii,getAncestorRuleGroups:()=>ni,getFlatTree:()=>li,getItemByPath:()=>ri,getLightTree:()=>ci,getSwitchValues:()=>pi,getTotalReordableNodesCountInTree:()=>si,getTotalRulesCountInTree:()=>ui,hasChildren:()=>fi,immutableToJs:()=>bo,isEmptyTree:()=>di,isImmutable:()=>ho,jsToImmutable:()=>bi,removeIsLockedInTree:()=>oi,toImmutableList:()=>mo});var a={};r.r(a),r.d(a,{SqlString:()=>Qi,mongoEmptyValue:()=>ea,spelEscape:()=>ra,spelFixList:()=>ta,spelFormatConcat:()=>na,spelImportConcat:()=>oa,sqlEmptyValue:()=>Zi,stringifyForDisplay:()=>ia,wrapWithBrackets:()=>aa});var l={};r.r(l),r.d(l,{_loadFromJsonLogic:()=>Ai,_loadFromSpel:()=>Pa,getTree:()=>vi,isImmutableTree:()=>yi,isJsonLogic:()=>Fo,isTree:()=>mi,jsToImmutable:()=>bi,loadFromJsonLogic:()=>Ri,loadFromSpel:()=>Aa,loadTree:()=>hi});var s={};r.r(s),r.d(s,{createListFromArray:()=>hl,createListWithOneElement:()=>vl,defaultConjunction:()=>cl,defaultGroupConjunction:()=>ul,defaultGroupProperties:()=>pl,defaultItemProperties:()=>dl,defaultOperatorOptions:()=>ll,defaultRoot:()=>gl,defaultRule:()=>fl,defaultRuleProperties:()=>sl,emptyProperties:()=>yl,getDefaultField:()=>nl,getDefaultFieldSrc:()=>il,getDefaultOperator:()=>al,getDefaultSubField:()=>ol});var u={};r.r(u),r.d(u,{_validateTree:()=>hu,checkTree:()=>du,getNewValueForFieldOp:()=>ju,getTreeBadFields:()=>pu,isValidTree:()=>cu,sanitizeTree:()=>gu,translateValidation:()=>iu,validateAndFixTree:()=>vu,validateRange:()=>Fu,validateTree:()=>fu,validateValue:()=>_u});var c={};r.r(c),r.d(c,{completeFuncValue:()=>Cu,getCompatibleArgsOnFuncChange:()=>Pu,setArgValue:()=>Ru,setArgValueSrc:()=>Au,setFunc:()=>Iu,setFuncDefaultArg:()=>xu});var p={};r.r(p),r.d(p,{calculateValueType:()=>Mu,completeValue:()=>ac,filterValueSourcesForField:()=>Ku,formatFieldName:()=>Ju,getFieldPartsConfigs:()=>Wu,getFieldPathLabels:()=>qu,getFirstOperator:()=>$u,getFuncPathLabels:()=>zu,getOneChildOrDescendant:()=>lc,getOperatorsForField:()=>Vu,getOperatorsForType:()=>Du,getValueLabel:()=>Bu,getValueSourcesForFieldOp:()=>Hu,getWidgetForFieldOp:()=>Xu,getWidgetsForFieldOp:()=>Gu,isEmptyGroupChildren:()=>tc,isEmptyItem:()=>Yu,isEmptyRuleGroupExtPropertiesAndChildren:()=>Zu,isEmptyRuleProperties:()=>nc,selectTypes:()=>Nu,whatRulePropertiesAreCompleted:()=>oc});var d={};r.r(d),r.d(d,{_getFromConfigCache:()=>Fp,_saveToConfigCache:()=>jp,_widgetDefKeysToOmit:()=>pp,applyJsonLogic:()=>hc,cleanJSX:()=>wo,compileConfig:()=>Pc,compressConfig:()=>Rc,configKeys:()=>Sc,createConfigMemo:()=>Yc,decompressConfig:()=>Ac,extendConfig:()=>rp,findExtendedConfigInAllMemos:()=>Jc,getCommonMemo:()=>Xc,getFieldConfig:()=>Cp,getFieldId:()=>Ep,getFieldParts:()=>wp,getFieldPath:()=>_p,getFieldPathParts:()=>Sp,getFieldRawConfig:()=>vp,getFieldSrc:()=>Lp,getFieldWidgetConfig:()=>kp,getFirstField:()=>xp,getFuncArgConfig:()=>bp,getFuncConfig:()=>mp,getFuncSignature:()=>yp,getOperatorConfig:()=>Ip,isDirtyJSX:()=>So,isFieldDescendantOfField:()=>Op,isJSX:()=>Eo,iterateFields:()=>fp,iterateFuncs:()=>dp,normalizeField:()=>hp});var f={};r.r(f),r.d(f,{_mongodbFormat:()=>id,_spelFormat:()=>ga,_sqlFormat:()=>yd,elasticSearchFormat:()=>Id,jsonLogicFormat:()=>qp,mongodbFormat:()=>od,queryBuilderFormat:()=>Ap,queryString:()=>wl,spelFormat:()=>fa,sqlFormat:()=>hd});var g={};r.r(g),r.d(g,{fixListValuesGroupOrder:()=>zd,getListValue:()=>Zo,listValueToOption:()=>Md,mergeListValues:()=>Dd,optionToListValue:()=>Vd,optionsToListValues:()=>$d,simulateAsyncFetch:()=>Nd});var v={};r.r(v),r.d(v,{Autocomplete:()=>g,ConfigUtils:()=>d,DefaultUtils:()=>s,ExportUtils:()=>a,FuncUtils:()=>c,ListUtils:()=>o,OtherUtils:()=>n,RuleUtils:()=>p,TreeUtils:()=>i,Validation:()=>u,checkTree:()=>du,clone:()=>pc(),compressConfig:()=>Rc,decompressConfig:()=>Ac,getSwitchValues:()=>pi,i18n:()=>au,isValidTree:()=>cu,moment:()=>wi(),sanitizeTree:()=>gu,uuid:()=>io,validateAndFixTree:()=>vu,validateTree:()=>fu});var h={};r.r(h),r.d(h,{LINEAR_REGRESSION:()=>Gd,LOWER:()=>Bd,NOW:()=>qd,RELATIVE_DATETIME:()=>Wd,UPPER:()=>Ud});var y={};r.r(y),r.d(y,{addCaseGroup:()=>Zf,addDefaultCaseGroup:()=>Qf,addGroup:()=>eg,addRule:()=>Jf,moveItem:()=>rg,removeGroup:()=>tg,removeRule:()=>Yf,setTree:()=>Xf});var m={};r.r(m),r.d(m,{setConjunction:()=>ng,setLock:()=>ig,setNot:()=>og});var b={};r.r(b),r.d(b,{setField:()=>ag,setFieldSrc:()=>lg,setFuncValue:()=>pg,setOperator:()=>sg,setOperatorOption:()=>dg,setValue:()=>ug,setValueSrc:()=>cg});var O={};r.r(O),r.d(O,{bindActionCreators:()=>qg,isUsingLegacyReactDomRender:()=>Vg,liteShouldComponentUpdate:()=>$g,pureShouldComponentUpdate:()=>Mg,useOnPropsChanged:()=>zg});var _={};r.r(_),r.d(_,{FuncWidget:()=>Ch,ValueFieldWidget:()=>Om,VanillaBooleanWidget:()=>_m,VanillaButton:()=>Dm,VanillaButtonGroup:()=>$m,VanillaConjs:()=>Pm,VanillaDateTimeWidget:()=>Lm,VanillaDateWidget:()=>Em,VanillaFieldSelect:()=>Am,VanillaIcon:()=>Vm,VanillaMultiSelectWidget:()=>Im,VanillaNumberWidget:()=>Tm,VanillaProvider:()=>Wm,VanillaSelectWidget:()=>xm,VanillaSliderWidget:()=>Rm,VanillaSwitch:()=>zm,VanillaTextAreaWidget:()=>Sm,VanillaTextWidget:()=>wm,VanillaTimeWidget:()=>Fm,VanillaValueSources:()=>Mm,vanillaConfirm:()=>qm});var w={};function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function F(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function L(e,t,r){return t&&j(e.prototype,t),r&&j(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e,t){if(t&&("object"==E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}r.r(w),r.d(w,{ProximityOperator:()=>Um});var T=r(5959),R=r.n(T);function A(e,t,r){return(t=F(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){if(Array.isArray(e))return e}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t){if(e){if("string"==typeof e)return N(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}function V(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $(e,t){return P(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||D(e,t)||V()}function M(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function z(e){return function(e){if(Array.isArray(e))return N(e)}(e)||M(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var q="delete",W=32,B=31,U={};function G(e){e&&(e.value=!0)}function K(){}function H(e){return void 0===e.size&&(e.size=e.__iterate(J)),e.size}function X(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r}return t<0?H(e)+t:t}function J(){return!0}function Y(e,t,r){return(0===e&&!te(e)||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function Q(e,t){return ee(e,t,0)}function Z(e,t){return ee(e,t,t)}function ee(e,t,r){return void 0===e?r:te(e)?t===1/0?t:0|Math.max(0,t+e):void 0===t||t===e?e:0|Math.min(t,e)}function te(e){return e<0||0===e&&1/e==-1/0}var re="@@__IMMUTABLE_ITERABLE__@@";function ne(e){return Boolean(e&&e[re])}var oe="@@__IMMUTABLE_KEYED__@@";function ie(e){return Boolean(e&&e[oe])}var ae="@@__IMMUTABLE_INDEXED__@@";function le(e){return Boolean(e&&e[ae])}function se(e){return ie(e)||le(e)}var ue=function(e){return ne(e)?e:Te(e)},ce=function(e){function t(e){return ie(e)?e:Re(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(ue),pe=function(e){function t(e){return le(e)?e:Ae(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(ue),de=function(e){function t(e){return ne(e)&&!se(e)?e:Pe(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(ue);ue.Keyed=ce,ue.Indexed=pe,ue.Set=de;var fe="@@__IMMUTABLE_SEQ__@@";function ge(e){return Boolean(e&&e[fe])}var ve="@@__IMMUTABLE_RECORD__@@";function he(e){return Boolean(e&&e[ve])}function ye(e){return ne(e)||he(e)}var me="@@__IMMUTABLE_ORDERED__@@";function be(e){return Boolean(e&&e[me])}var Oe="function"==typeof Symbol&&Symbol.iterator,_e="@@iterator",we=Oe||_e,Se=function(e){this.next=e};function Ee(e,t,r,n){var o=0===e?t:1===e?r:[t,r];return n?n.value=o:n={value:o,done:!1},n}function Fe(){return{value:void 0,done:!0}}function je(e){return!!Array.isArray(e)||!!Ie(e)}function Le(e){return e&&"function"==typeof e.next}function Ce(e){var t=Ie(e);return t&&t.call(e)}function Ie(e){var t=e&&(Oe&&e[Oe]||e[_e]);if("function"==typeof t)return t}Se.prototype.toString=function(){return"[Iterator]"},Se.KEYS=0,Se.VALUES=1,Se.ENTRIES=2,Se.prototype.inspect=Se.prototype.toSource=function(){return this.toString()},Se.prototype[we]=function(){return this};var ke=Object.prototype.hasOwnProperty;function xe(e){return!(!Array.isArray(e)&&"string"!=typeof e)||e&&"object"==typeof e&&Number.isInteger(e.length)&&e.length>=0&&(0===e.length?1===Object.keys(e).length:e.hasOwnProperty(e.length-1))}var Te=function(e){function t(e){return null==e?Me():ye(e)?e.toSeq():function(e){var t,r,n=We(e);if(n)return(r=Ie(t=e))&&r===t.entries?n.fromEntrySeq():function(e){var t=Ie(e);return t&&t===e.keys}(e)?n.toSetSeq():n;if("object"==typeof e)return new De(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(e,t){var r=this._cache;if(r){for(var n=r.length,o=0;o!==n;){var i=r[t?n-++o:o++];if(!1===e(i[1],i[0],this))break}return o}return this.__iterateUncached(e,t)},t.prototype.__iterator=function(e,t){var r=this._cache;if(r){var n=r.length,o=0;return new Se((function(){if(o===n)return{value:void 0,done:!0};var i=r[t?n-++o:o++];return Ee(e,i[0],i[1])}))}return this.__iteratorUncached(e,t)},t}(ue),Re=function(e){function t(e){return null==e?Me().toKeyedSeq():ne(e)?ie(e)?e.toSeq():e.fromEntrySeq():he(e)?e.toSeq():ze(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(Te),Ae=function(e){function t(e){return null==e?Me():ne(e)?ie(e)?e.entrySeq():e.toIndexedSeq():he(e)?e.toSeq().entrySeq():qe(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(Te),Pe=function(e){function t(e){return(ne(e)&&!se(e)?e:Ae(e)).toSetSeq()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(Te);Te.isSeq=ge,Te.Keyed=Re,Te.Set=Pe,Te.Indexed=Ae,Te.prototype[fe]=!0;var Ne=function(e){function t(e){this._array=e,this.size=e.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this.has(e)?this._array[X(this,e)]:t},t.prototype.__iterate=function(e,t){for(var r=this._array,n=r.length,o=0;o!==n;){var i=t?n-++o:o++;if(!1===e(r[i],i,this))break}return o},t.prototype.__iterator=function(e,t){var r=this._array,n=r.length,o=0;return new Se((function(){if(o===n)return{value:void 0,done:!0};var i=t?n-++o:o++;return Ee(e,i,r[i])}))},t}(Ae),De=function(e){function t(e){var t=Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]);this._object=e,this._keys=t,this.size=t.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},t.prototype.has=function(e){return ke.call(this._object,e)},t.prototype.__iterate=function(e,t){for(var r=this._object,n=this._keys,o=n.length,i=0;i!==o;){var a=n[t?o-++i:i++];if(!1===e(r[a],a,this))break}return i},t.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,o=n.length,i=0;return new Se((function(){if(i===o)return{value:void 0,done:!0};var a=n[t?o-++i:i++];return Ee(e,a,r[a])}))},t}(Re);De.prototype[me]=!0;var Ve,$e=function(e){function t(e){this._collection=e,this.size=e.length||e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=Ce(this._collection),n=0;if(Le(r))for(var o;!(o=r.next()).done&&!1!==e(o.value,n++,this););return n},t.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=Ce(this._collection);if(!Le(r))return new Se(Fe);var n=0;return new Se((function(){var t=r.next();return t.done?t:Ee(e,n++,t.value)}))},t}(Ae);function Me(){return Ve||(Ve=new Ne([]))}function ze(e){var t=We(e);if(t)return t.fromEntrySeq();if("object"==typeof e)return new De(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function qe(e){var t=We(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function We(e){return xe(e)?new Ne(e):je(e)?new $e(e):void 0}var Be="@@__IMMUTABLE_MAP__@@";function Ue(e){return Boolean(e&&e[Be])}function Ge(e){return Ue(e)&&be(e)}function Ke(e){return Boolean(e&&"function"==typeof e.equals&&"function"==typeof e.hashCode)}function He(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!!(Ke(e)&&Ke(t)&&e.equals(t))}var Xe="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var r=65535&(e|=0),n=65535&(t|=0);return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0};function Je(e){return e>>>1&1073741824|3221225471&e}var Ye=Object.prototype.valueOf;function Qe(e){if(null==e)return Ze(e);if("function"==typeof e.hashCode)return Je(e.hashCode(e));var t,r,n,o=(t=e).valueOf!==Ye&&"function"==typeof t.valueOf?t.valueOf(t):t;if(null==o)return Ze(o);switch(typeof o){case"boolean":return o?1108378657:1108378656;case"number":return function(e){if(e!=e||e===1/0)return 0;var t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return Je(t)}(o);case"string":return o.length>ut?(void 0===(n=dt[r=o])&&(n=et(r),pt===ct&&(pt=0,dt={}),pt++,dt[r]=n),n):et(o);case"object":case"function":return function(e){var t;if(it&&void 0!==(t=ot.get(e)))return t;if(void 0!==(t=e[st]))return t;if(!rt){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[st]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=nt(),it)ot.set(e,t);else{if(void 0!==tt&&!1===tt(e))throw new Error("Non-extensible objects are not allowed as keys.");if(rt)Object.defineProperty(e,st,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[st]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[st]=t}}return t}(o);case"symbol":return function(e){var t=at[e];return void 0!==t||(t=nt(),at[e]=t),t}(o);default:if("function"==typeof o.toString)return et(o.toString());throw new Error("Value type "+typeof o+" cannot be hashed.")}}function Ze(e){return null===e?1108378658:1108378659}function et(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return Je(t)}var tt=Object.isExtensible,rt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();function nt(){var e=++lt;return 1073741824&lt&&(lt=0),e}var ot,it="function"==typeof WeakMap;it&&(ot=new WeakMap);var at=Object.create(null),lt=0,st="__immutablehash__";"function"==typeof Symbol&&(st=Symbol(st));var ut=16,ct=255,pt=0,dt={},ft=function(e){function t(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this._iter.get(e,t)},t.prototype.has=function(e){return this._iter.has(e)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var e=this,t=bt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},t.prototype.map=function(e,t){var r=this,n=mt(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t,n){return e(t,n,r)}),t)},t.prototype.__iterator=function(e,t){return this._iter.__iterator(e,t)},t}(Re);ft.prototype[me]=!0;var gt=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.includes=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var r=this,n=0;return t&&H(this),this._iter.__iterate((function(o){return e(o,t?r.size-++n:n++,r)}),t)},t.prototype.__iterator=function(e,t){var r=this,n=this._iter.__iterator(1,t),o=0;return t&&H(this),new Se((function(){var i=n.next();return i.done?i:Ee(e,t?r.size-++o:o++,i.value,i)}))},t}(Ae),vt=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.has=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){return e(t,t,r)}),t)},t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(1,t);return new Se((function(){var t=r.next();return t.done?t:Ee(e,t.value,t.value,t)}))},t}(Pe),ht=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){if(t){It(t);var n=ne(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}}),t)},t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(1,t);return new Se((function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){It(n);var o=ne(n);return Ee(e,o?n.get(0):n[0],o?n.get(1):n[1],t)}}}))},t}(Re);function yt(e){var t=xt(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Tt,t.__iterateUncached=function(t,r){var n=this;return e.__iterate((function(e,r){return!1!==t(r,e,n)}),r)},t.__iteratorUncached=function(t,r){if(2===t){var n=e.__iterator(t,r);return new Se((function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(1===t?0:1,r)},t}function mt(e,t,r){var n=xt(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,o){var i=e.get(n,U);return i===U?o:t.call(r,i,n,e)},n.__iterateUncached=function(n,o){var i=this;return e.__iterate((function(e,o,a){return!1!==n(t.call(r,e,o,a),o,i)}),o)},n.__iteratorUncached=function(n,o){var i=e.__iterator(2,o);return new Se((function(){var o=i.next();if(o.done)return o;var a=o.value,l=a[0];return Ee(n,l,t.call(r,a[1],l,e),o)}))},n}function bt(e,t){var r=this,n=xt(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=yt(e);return t.reverse=function(){return e.flip()},t}),n.get=function(r,n){return e.get(t?r:-1-r,n)},n.has=function(r){return e.has(t?r:-1-r)},n.includes=function(t){return e.includes(t)},n.cacheResult=Tt,n.__iterate=function(r,n){var o=this,i=0;return n&&H(e),e.__iterate((function(e,a){return r(e,t?a:n?o.size-++i:i++,o)}),!n)},n.__iterator=function(n,o){var i=0;o&&H(e);var a=e.__iterator(2,!o);return new Se((function(){var e=a.next();if(e.done)return e;var l=e.value;return Ee(n,t?l[0]:o?r.size-++i:i++,l[1],e)}))},n}function Ot(e,t,r,n){var o=xt(e);return n&&(o.has=function(n){var o=e.get(n,U);return o!==U&&!!t.call(r,o,n,e)},o.get=function(n,o){var i=e.get(n,U);return i!==U&&t.call(r,i,n,e)?i:o}),o.__iterateUncached=function(o,i){var a=this,l=0;return e.__iterate((function(e,i,s){if(t.call(r,e,i,s))return l++,o(e,n?i:l-1,a)}),i),l},o.__iteratorUncached=function(o,i){var a=e.__iterator(2,i),l=0;return new Se((function(){for(;;){var i=a.next();if(i.done)return i;var s=i.value,u=s[0],c=s[1];if(t.call(r,c,u,e))return Ee(o,n?u:l++,c,i)}}))},o}function _t(e,t,r,n){var o=e.size;if(Y(t,r,o))return e;if(void 0===o&&(t<0||r<0))return _t(e.toSeq().cacheResult(),t,r,n);var i,a=Q(t,o),l=Z(r,o)-a;l==l&&(i=l<0?0:l);var s=xt(e);return s.size=0===i?i:e.size&&i||void 0,!n&&ge(e)&&i>=0&&(s.get=function(t,r){return(t=X(this,t))>=0&&t<i?e.get(t+a,r):r}),s.__iterateUncached=function(t,r){var o=this;if(0===i)return 0;if(r)return this.cacheResult().__iterate(t,r);var l=0,s=!0,u=0;return e.__iterate((function(e,r){if(!s||!(s=l++<a))return u++,!1!==t(e,n?r:u-1,o)&&u!==i})),u},s.__iteratorUncached=function(t,r){if(0!==i&&r)return this.cacheResult().__iterator(t,r);if(0===i)return new Se(Fe);var o=e.__iterator(t,r),l=0,s=0;return new Se((function(){for(;l++<a;)o.next();if(++s>i)return{value:void 0,done:!0};var e=o.next();return n||1===t||e.done?e:Ee(t,s-1,0===t?void 0:e.value[1],e)}))},s}function wt(e,t,r,n){var o=xt(e);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var l=!0,s=0;return e.__iterate((function(e,i,u){if(!l||!(l=t.call(r,e,i,u)))return s++,o(e,n?i:s-1,a)})),s},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var l=e.__iterator(2,i),s=!0,u=0;return new Se((function(){var e,i,c;do{if((e=l.next()).done)return n||1===o?e:Ee(o,u++,0===o?void 0:e.value[1],e);var p=e.value;i=p[0],c=p[1],s&&(s=t.call(r,c,i,a))}while(s);return 2===o?e:Ee(o,i,c,e)}))},o}function St(e,t,r){var n=xt(e);return n.__iterateUncached=function(o,i){if(i)return this.cacheResult().__iterate(o,i);var a=0,l=!1;return function e(s,u){s.__iterate((function(i,s){return(!t||u<t)&&ne(i)?e(i,u+1):(a++,!1===o(i,r?s:a-1,n)&&(l=!0)),!l}),i)}(e,0),a},n.__iteratorUncached=function(n,o){if(o)return this.cacheResult().__iterator(n,o);var i=e.__iterator(n,o),a=[],l=0;return new Se((function(){for(;i;){var e=i.next();if(!1===e.done){var s=e.value;if(2===n&&(s=s[1]),t&&!(a.length<t)||!ne(s))return r?e:Ee(n,l++,s,e);a.push(i),i=s.__iterator(n,o)}else i=a.pop()}return{value:void 0,done:!0}}))},n}function Et(e,t,r){t||(t=Rt);var n=ie(e),o=0,i=e.toSeq().map((function(t,n){return[n,t,o++,r?r(t,n,e):t]})).valueSeq().toArray();return i.sort((function(e,r){return t(e[3],r[3])||e[2]-r[2]})).forEach(n?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),n?Re(i):le(e)?Ae(i):Pe(i)}function Ft(e,t,r){if(t||(t=Rt),r){var n=e.toSeq().map((function(t,n){return[t,r(t,n,e)]})).reduce((function(e,r){return jt(t,e[1],r[1])?r:e}));return n&&n[0]}return e.reduce((function(e,r){return jt(t,e,r)?r:e}))}function jt(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(null==r||r!=r)||n>0}function Lt(e,t,r,n){var o=xt(e),i=new Ne(r).map((function(e){return e.size}));return o.size=n?i.max():i.min(),o.__iterate=function(e,t){for(var r,n=this.__iterator(1,t),o=0;!(r=n.next()).done&&!1!==e(r.value,o++,this););return o},o.__iteratorUncached=function(e,o){var i=r.map((function(e){return e=ue(e),Ce(o?e.reverse():e)})),a=0,l=!1;return new Se((function(){var r;return l||(r=i.map((function(e){return e.next()})),l=n?r.every((function(e){return e.done})):r.some((function(e){return e.done}))),l?{value:void 0,done:!0}:Ee(e,a++,t.apply(null,r.map((function(e){return e.value}))))}))},o}function Ct(e,t){return e===t?e:ge(e)?t:e.constructor(t)}function It(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function kt(e){return ie(e)?ce:le(e)?pe:de}function xt(e){return Object.create((ie(e)?Re:le(e)?Ae:Pe).prototype)}function Tt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Te.prototype.cacheResult.call(this)}function Rt(e,t){return void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e>t?1:e<t?-1:0}function At(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),o=0;o<r;o++)n[o]=e[o+t];return n}function Pt(e,t){if(!e)throw new Error(t)}function Nt(e){Pt(e!==1/0,"Cannot perform this action with an infinite size.")}function Dt(e){if(xe(e)&&"string"!=typeof e)return e;if(be(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}gt.prototype.cacheResult=ft.prototype.cacheResult=vt.prototype.cacheResult=ht.prototype.cacheResult=Tt;var Vt=Object.prototype.toString;function $t(e){if(!e||"object"!=typeof e||"[object Object]"!==Vt.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t,n=Object.getPrototypeOf(t);null!==n;)r=n,n=Object.getPrototypeOf(r);return r===t}function Mt(e){return"object"==typeof e&&(ye(e)||Array.isArray(e)||$t(e))}function zt(e){try{return"string"==typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function qt(e,t){return ye(e)?e.has(t):Mt(e)&&ke.call(e,t)}function Wt(e,t,r){return ye(e)?e.get(t,r):qt(e,t)?"function"==typeof e.get?e.get(t):e[t]:r}function Bt(e){if(Array.isArray(e))return At(e);var t={};for(var r in e)ke.call(e,r)&&(t[r]=e[r]);return t}function Ut(e,t){if(!Mt(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(ye(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!ke.call(e,t))return e;var r=Bt(e);return Array.isArray(r)?r.splice(t,1):delete r[t],r}function Gt(e,t,r){if(!Mt(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(ye(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,r)}if(ke.call(e,t)&&r===e[t])return e;var n=Bt(e);return n[t]=r,n}function Kt(e,t,r,n){n||(n=r,r=void 0);var o=Ht(ye(e),e,Dt(t),0,r,n);return o===U?r:o}function Ht(e,t,r,n,o,i){var a=t===U;if(n===r.length){var l=a?o:t,s=i(l);return s===l?t:s}if(!a&&!Mt(t))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(zt)+"]: "+t);var u=r[n],c=a?U:Wt(t,u,U),p=Ht(c===U?e:ye(c),c,r,n+1,o,i);return p===c?t:p===U?Ut(t,u):Gt(a?e?Lr():{}:t,u,p)}function Xt(e,t,r){return Kt(e,t,U,(function(){return r}))}function Jt(e,t){return Xt(this,e,t)}function Yt(e,t){return Kt(e,t,(function(){return U}))}function Qt(e){return Yt(this,e)}function Zt(e,t,r,n){return Kt(e,[t],r,n)}function er(e,t,r){return 1===arguments.length?e(this):Zt(this,e,t,r)}function tr(e,t,r){return Kt(this,e,t,r)}function rr(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return or(this,e)}function nr(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if("function"!=typeof e)throw new TypeError("Invalid merger function: "+e);return or(this,t,e)}function or(e,t,r){for(var n=[],o=0;o<t.length;o++){var i=ce(t[o]);0!==i.size&&n.push(i)}return 0===n.length?e:0!==e.toSeq().size||e.__ownerID||1!==n.length?e.withMutations((function(e){for(var t=r?function(t,n){Zt(e,n,U,(function(e){return e===U?t:r(e,t,n)}))}:function(t,r){e.set(r,t)},o=0;o<n.length;o++)n[o].forEach(t)})):e.constructor(n[0])}function ir(e,t,r){return ar(e,t,function(e){return function t(r,n,o){return Mt(r)&&Mt(n)&&(i=n,a=Te(r),l=Te(i),le(a)===le(l)&&ie(a)===ie(l))?ar(r,[n],t):e?e(r,n,o):n;var i,a,l}}(r))}function ar(e,t,r){if(!Mt(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(ye(e))return"function"==typeof r&&e.mergeWith?e.mergeWith.apply(e,[r].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var n=Array.isArray(e),o=e,i=n?pe:ce,a=n?function(t){o===e&&(o=Bt(o)),o.push(t)}:function(t,n){var i=ke.call(o,n),a=i&&r?r(o[n],t,n):t;i&&a===o[n]||(o===e&&(o=Bt(o)),o[n]=a)},l=0;l<t.length;l++)i(t[l]).forEach(a);return o}function lr(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return ir(this,e)}function sr(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return ir(this,t,e)}function ur(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Kt(this,e,Lr(),(function(e){return ar(e,t)}))}function cr(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Kt(this,e,Lr(),(function(e){return ir(e,t)}))}function pr(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function dr(){return this.__ownerID?this:this.__ensureOwner(new K)}function fr(){return this.__ensureOwner()}function gr(){return this.__altered}var vr=function(e){function t(t){return null==t?Lr():Ue(t)&&!be(t)?t:Lr().withMutations((function(r){var n=e(t);Nt(n.size),n.forEach((function(e,t){return r.set(t,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Lr().withMutations((function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length)throw new Error("Missing value for key: "+e[r]);t.set(e[r],e[r+1])}}))},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},t.prototype.set=function(e,t){return Cr(this,e,t)},t.prototype.remove=function(e){return Cr(this,e,U)},t.prototype.deleteAll=function(e){var t=ue(e);return 0===t.size?this:this.withMutations((function(e){t.forEach((function(t){return e.remove(t)}))}))},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Lr()},t.prototype.sort=function(e){return Zr(Et(this,e))},t.prototype.sortBy=function(e,t){return Zr(Et(this,t,e))},t.prototype.map=function(e,t){var r=this;return this.withMutations((function(n){n.forEach((function(o,i){n.set(i,e.call(t,o,i,r))}))}))},t.prototype.__iterator=function(e,t){return new Sr(this,e,t)},t.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate((function(t){return n++,e(t[1],t[0],r)}),t),n},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?jr(this.size,this._root,e,this.__hash):0===this.size?Lr():(this.__ownerID=e,this.__altered=!1,this)},t}(ce);vr.isMap=Ue;var hr=vr.prototype;hr[Be]=!0,hr[q]=hr.remove,hr.removeAll=hr.deleteAll,hr.setIn=Jt,hr.removeIn=hr.deleteIn=Qt,hr.update=er,hr.updateIn=tr,hr.merge=hr.concat=rr,hr.mergeWith=nr,hr.mergeDeep=lr,hr.mergeDeepWith=sr,hr.mergeIn=ur,hr.mergeDeepIn=cr,hr.withMutations=pr,hr.wasAltered=gr,hr.asImmutable=fr,hr["@@transducer/init"]=hr.asMutable=dr,hr["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])},hr["@@transducer/result"]=function(e){return e.asImmutable()};var yr=function(e,t){this.ownerID=e,this.entries=t};yr.prototype.get=function(e,t,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(He(r,o[i][0]))return o[i][1];return n},yr.prototype.update=function(e,t,r,n,o,i,a){for(var l=o===U,s=this.entries,u=0,c=s.length;u<c&&!He(n,s[u][0]);u++);var p=u<c;if(p?s[u][1]===o:l)return this;if(G(a),(l||!p)&&G(i),!l||1!==s.length){if(!p&&!l&&s.length>=Ar)return function(e,t,r,n){e||(e=new K);for(var o=new _r(e,Qe(r),[r,n]),i=0;i<t.length;i++){var a=t[i];o=o.update(e,0,void 0,a[0],a[1])}return o}(e,s,n,o);var d=e&&e===this.ownerID,f=d?s:At(s);return p?l?u===c-1?f.pop():f[u]=f.pop():f[u]=[n,o]:f.push([n,o]),d?(this.entries=f,this):new yr(e,f)}};var mr=function(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r};mr.prototype.get=function(e,t,r,n){void 0===t&&(t=Qe(r));var o=1<<((0===e?t:t>>>e)&B),i=this.bitmap;return i&o?this.nodes[Tr(i&o-1)].get(e+5,t,r,n):n},mr.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Qe(n));var l=(0===t?r:r>>>t)&B,s=1<<l,u=this.bitmap,c=!!(u&s);if(!c&&o===U)return this;var p=Tr(u&s-1),d=this.nodes,f=c?d[p]:void 0,g=Ir(f,e,t+5,r,n,o,i,a);if(g===f)return this;if(!c&&g&&d.length>=Pr)return function(e,t,r,n,o){for(var i=0,a=new Array(W),l=0;0!==r;l++,r>>>=1)a[l]=1&r?t[i++]:void 0;return a[n]=o,new br(e,i+1,a)}(e,d,u,l,g);if(c&&!g&&2===d.length&&kr(d[1^p]))return d[1^p];if(c&&g&&1===d.length&&kr(g))return g;var v=e&&e===this.ownerID,h=c?g?u:u^s:u|s,y=c?g?Rr(d,p,g,v):function(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var o=new Array(n),i=0,a=0;a<n;a++)a===t&&(i=1),o[a]=e[a+i];return o}(d,p,v):function(e,t,r,n){var o=e.length+1;if(n&&t+1===o)return e[t]=r,e;for(var i=new Array(o),a=0,l=0;l<o;l++)l===t?(i[l]=r,a=-1):i[l]=e[l+a];return i}(d,p,g,v);return v?(this.bitmap=h,this.nodes=y,this):new mr(e,h,y)};var br=function(e,t,r){this.ownerID=e,this.count=t,this.nodes=r};br.prototype.get=function(e,t,r,n){void 0===t&&(t=Qe(r));var o=(0===e?t:t>>>e)&B,i=this.nodes[o];return i?i.get(e+5,t,r,n):n},br.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Qe(n));var l=(0===t?r:r>>>t)&B,s=o===U,u=this.nodes,c=u[l];if(s&&!c)return this;var p=Ir(c,e,t+5,r,n,o,i,a);if(p===c)return this;var d=this.count;if(c){if(!p&&--d<Nr)return function(e,t,r,n){for(var o=0,i=0,a=new Array(r),l=0,s=1,u=t.length;l<u;l++,s<<=1){var c=t[l];void 0!==c&&l!==n&&(o|=s,a[i++]=c)}return new mr(e,o,a)}(e,u,d,l)}else d++;var f=e&&e===this.ownerID,g=Rr(u,l,p,f);return f?(this.count=d,this.nodes=g,this):new br(e,d,g)};var Or=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r};Or.prototype.get=function(e,t,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(He(r,o[i][0]))return o[i][1];return n},Or.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Qe(n));var l=o===U;if(r!==this.keyHash)return l?this:(G(a),G(i),xr(this,e,t,r,[n,o]));for(var s=this.entries,u=0,c=s.length;u<c&&!He(n,s[u][0]);u++);var p=u<c;if(p?s[u][1]===o:l)return this;if(G(a),(l||!p)&&G(i),l&&2===c)return new _r(e,this.keyHash,s[1^u]);var d=e&&e===this.ownerID,f=d?s:At(s);return p?l?u===c-1?f.pop():f[u]=f.pop():f[u]=[n,o]:f.push([n,o]),d?(this.entries=f,this):new Or(e,this.keyHash,f)};var _r=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r};_r.prototype.get=function(e,t,r,n){return He(r,this.entry[0])?this.entry[1]:n},_r.prototype.update=function(e,t,r,n,o,i,a){var l=o===U,s=He(n,this.entry[0]);return(s?o===this.entry[1]:l)?this:(G(a),l?void G(i):s?e&&e===this.ownerID?(this.entry[1]=o,this):new _r(e,this.keyHash,[n,o]):(G(i),xr(this,e,t,Qe(n),[n,o])))},yr.prototype.iterate=Or.prototype.iterate=function(e,t){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(!1===e(r[t?o-n:n]))return!1},mr.prototype.iterate=br.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var i=r[t?o-n:n];if(i&&!1===i.iterate(e,t))return!1}},_r.prototype.iterate=function(e,t){return e(this.entry)};var wr,Sr=function(e){function t(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&Fr(e._root)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r=t.node,n=t.index++,o=void 0;if(r.entry){if(0===n)return Er(e,r.entry)}else if(r.entries){if(n<=(o=r.entries.length-1))return Er(e,r.entries[this._reverse?o-n:n])}else if(n<=(o=r.nodes.length-1)){var i=r.nodes[this._reverse?o-n:n];if(i){if(i.entry)return Er(e,i.entry);t=this._stack=Fr(i,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}},t}(Se);function Er(e,t){return Ee(e,t[0],t[1])}function Fr(e,t){return{node:e,index:0,__prev:t}}function jr(e,t,r,n){var o=Object.create(hr);return o.size=e,o._root=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function Lr(){return wr||(wr=jr(0))}function Cr(e,t,r){var n,o;if(e._root){var i={value:!1},a={value:!1};if(n=Ir(e._root,e.__ownerID,0,void 0,t,r,i,a),!a.value)return e;o=e.size+(i.value?r===U?-1:1:0)}else{if(r===U)return e;o=1,n=new yr(e.__ownerID,[[t,r]])}return e.__ownerID?(e.size=o,e._root=n,e.__hash=void 0,e.__altered=!0,e):n?jr(o,n):Lr()}function Ir(e,t,r,n,o,i,a,l){return e?e.update(t,r,n,o,i,a,l):i===U?e:(G(l),G(a),new _r(t,n,[o,i]))}function kr(e){return e.constructor===_r||e.constructor===Or}function xr(e,t,r,n,o){if(e.keyHash===n)return new Or(t,n,[e.entry,o]);var i,a=(0===r?e.keyHash:e.keyHash>>>r)&B,l=(0===r?n:n>>>r)&B,s=a===l?[xr(e,t,r+5,n,o)]:(i=new _r(t,n,o),a<l?[e,i]:[i,e]);return new mr(t,1<<a|1<<l,s)}function Tr(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,127&(e+=e>>8)+(e>>16)}function Rr(e,t,r,n){var o=n?e:At(e);return o[t]=r,o}var Ar=8,Pr=16,Nr=8,Dr="@@__IMMUTABLE_LIST__@@";function Vr(e){return Boolean(e&&e[Dr])}var $r=function(e){function t(t){var r=Gr();if(null==t)return r;if(Vr(t))return t;var n=e(t),o=n.size;return 0===o?r:(Nt(o),o>0&&o<W?Ur(0,o,5,null,new zr(n.toArray())):r.withMutations((function(e){e.setSize(o),n.forEach((function(t,r){return e.set(r,t)}))})))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(e,t){if((e=X(this,e))>=0&&e<this.size){var r=Xr(this,e+=this._origin);return r&&r.array[e&B]}return t},t.prototype.set=function(e,t){return function(e,t,r){if((t=X(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?Jr(e,t).set(0,r):Jr(e,0,t+1).set(t,r)}));t+=e._origin;var n=e._tail,o=e._root,i={value:!1};return t>=Yr(e._capacity)?n=Kr(n,e.__ownerID,0,t,r,i):o=Kr(o,e.__ownerID,e._level,t,r,i),i.value?e.__ownerID?(e._root=o,e._tail=n,e.__hash=void 0,e.__altered=!0,e):Ur(e._origin,e._capacity,e._level,o,n):e}(this,e,t)},t.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},t.prototype.insert=function(e,t){return this.splice(e,0,t)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):Gr()},t.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(r){Jr(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])}))},t.prototype.pop=function(){return Jr(this,0,-1)},t.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){Jr(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])}))},t.prototype.shift=function(){return Jr(this,1)},t.prototype.concat=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++){var o=t[n],i=e("string"!=typeof o&&je(o)?o:[o]);0!==i.size&&r.push(i)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations((function(e){r.forEach((function(t){return t.forEach((function(t){return e.push(t)}))}))})):this.constructor(r[0])},t.prototype.setSize=function(e){return Jr(this,0,e)},t.prototype.map=function(e,t){var r=this;return this.withMutations((function(n){for(var o=0;o<r.size;o++)n.set(o,e.call(t,n.get(o),o,r))}))},t.prototype.slice=function(e,t){var r=this.size;return Y(e,t,r)?this:Jr(this,Q(e,r),Z(t,r))},t.prototype.__iterator=function(e,t){var r=t?this.size:0,n=Br(this,t);return new Se((function(){var o=n();return o===Wr?{value:void 0,done:!0}:Ee(e,t?--r:r++,o)}))},t.prototype.__iterate=function(e,t){for(var r,n=t?this.size:0,o=Br(this,t);(r=o())!==Wr&&!1!==e(r,t?--n:n++,this););return n},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ur(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?Gr():(this.__ownerID=e,this.__altered=!1,this)},t}(pe);$r.isList=Vr;var Mr=$r.prototype;Mr[Dr]=!0,Mr[q]=Mr.remove,Mr.merge=Mr.concat,Mr.setIn=Jt,Mr.deleteIn=Mr.removeIn=Qt,Mr.update=er,Mr.updateIn=tr,Mr.mergeIn=ur,Mr.mergeDeepIn=cr,Mr.withMutations=pr,Mr.wasAltered=gr,Mr.asImmutable=fr,Mr["@@transducer/init"]=Mr.asMutable=dr,Mr["@@transducer/step"]=function(e,t){return e.push(t)},Mr["@@transducer/result"]=function(e){return e.asImmutable()};var zr=function(e,t){this.array=e,this.ownerID=t};zr.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var n=r>>>t&B;if(n>=this.array.length)return new zr([],e);var o,i=0===n;if(t>0){var a=this.array[n];if((o=a&&a.removeBefore(e,t-5,r))===a&&i)return this}if(i&&!o)return this;var l=Hr(this,e);if(!i)for(var s=0;s<n;s++)l.array[s]=void 0;return o&&(l.array[n]=o),l},zr.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var n,o=r-1>>>t&B;if(o>=this.array.length)return this;if(t>0){var i=this.array[o];if((n=i&&i.removeAfter(e,t-5,r))===i&&o===this.array.length-1)return this}var a=Hr(this,e);return a.array.splice(o+1),n&&(a.array[o]=n),a};var qr,Wr={};function Br(e,t){var r=e._origin,n=e._capacity,o=Yr(n),i=e._tail;return function e(a,l,s){return 0===l?function(e,a){var l=a===o?i&&i.array:e&&e.array,s=a>r?0:r-a,u=n-a;return u>W&&(u=W),function(){if(s===u)return Wr;var e=t?--u:s++;return l&&l[e]}}(a,s):function(o,i,a){var l,s=o&&o.array,u=a>r?0:r-a>>i,c=1+(n-a>>i);return c>W&&(c=W),function(){for(;;){if(l){var r=l();if(r!==Wr)return r;l=null}if(u===c)return Wr;var n=t?--c:u++;l=e(s&&s[n],i-5,a+(n<<i))}}}(a,l,s)}(e._root,e._level,0)}function Ur(e,t,r,n,o,i,a){var l=Object.create(Mr);return l.size=t-e,l._origin=e,l._capacity=t,l._level=r,l._root=n,l._tail=o,l.__ownerID=i,l.__hash=a,l.__altered=!1,l}function Gr(){return qr||(qr=Ur(0,0,5))}function Kr(e,t,r,n,o,i){var a,l=n>>>r&B,s=e&&l<e.array.length;if(!s&&void 0===o)return e;if(r>0){var u=e&&e.array[l],c=Kr(u,t,r-5,n,o,i);return c===u?e:((a=Hr(e,t)).array[l]=c,a)}return s&&e.array[l]===o?e:(i&&G(i),a=Hr(e,t),void 0===o&&l===a.array.length-1?a.array.pop():a.array[l]=o,a)}function Hr(e,t){return t&&e&&t===e.ownerID?e:new zr(e?e.array.slice():[],t)}function Xr(e,t){if(t>=Yr(e._capacity))return e._tail;if(t<1<<e._level+5){for(var r=e._root,n=e._level;r&&n>0;)r=r.array[t>>>n&B],n-=5;return r}}function Jr(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var n=e.__ownerID||new K,o=e._origin,i=e._capacity,a=o+t,l=void 0===r?i:r<0?i+r:o+r;if(a===o&&l===i)return e;if(a>=l)return e.clear();for(var s=e._level,u=e._root,c=0;a+c<0;)u=new zr(u&&u.array.length?[void 0,u]:[],n),c+=1<<(s+=5);c&&(a+=c,o+=c,l+=c,i+=c);for(var p=Yr(i),d=Yr(l);d>=1<<s+5;)u=new zr(u&&u.array.length?[u]:[],n),s+=5;var f=e._tail,g=d<p?Xr(e,l-1):d>p?new zr([],n):f;if(f&&d>p&&a<i&&f.array.length){for(var v=u=Hr(u,n),h=s;h>5;h-=5){var y=p>>>h&B;v=v.array[y]=Hr(v.array[y],n)}v.array[p>>>5&B]=f}if(l<i&&(g=g&&g.removeAfter(n,0,l)),a>=d)a-=d,l-=d,s=5,u=null,g=g&&g.removeBefore(n,0,a);else if(a>o||d<p){for(c=0;u;){var m=a>>>s&B;if(m!==d>>>s&B)break;m&&(c+=(1<<s)*m),s-=5,u=u.array[m]}u&&a>o&&(u=u.removeBefore(n,s,a-c)),u&&d<p&&(u=u.removeAfter(n,s,d-c)),c&&(a-=c,l-=c)}return e.__ownerID?(e.size=l-a,e._origin=a,e._capacity=l,e._level=s,e._root=u,e._tail=g,e.__hash=void 0,e.__altered=!0,e):Ur(a,l,s,u,g)}function Yr(e){return e<W?0:e-1>>>5<<5}var Qr,Zr=function(e){function t(e){return null==e?tn():Ge(e)?e:tn().withMutations((function(t){var r=ce(e);Nt(r.size),r.forEach((function(e,r){return t.set(r,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):tn()},t.prototype.set=function(e,t){return rn(this,e,t)},t.prototype.remove=function(e){return rn(this,e,U)},t.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],r)}),t)},t.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?en(t,r,e,this.__hash):0===this.size?tn():(this.__ownerID=e,this.__altered=!1,this._map=t,this._list=r,this)},t}(vr);function en(e,t,r,n){var o=Object.create(Zr.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function tn(){return Qr||(Qr=en(Lr(),Gr()))}function rn(e,t,r){var n,o,i=e._map,a=e._list,l=i.get(t),s=void 0!==l;if(r===U){if(!s)return e;a.size>=W&&a.size>=2*i.size?(n=(o=a.filter((function(e,t){return void 0!==e&&l!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(n.__ownerID=o.__ownerID=e.__ownerID)):(n=i.remove(t),o=l===a.size-1?a.pop():a.set(l,void 0))}else if(s){if(r===a.get(l)[1])return e;n=i,o=a.set(l,[t,r])}else n=i.set(t,a.size),o=a.set(a.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=o,e.__hash=void 0,e.__altered=!0,e):en(n,o)}Zr.isOrderedMap=Ge,Zr.prototype[me]=!0,Zr.prototype[q]=Zr.prototype.remove;var nn="@@__IMMUTABLE_STACK__@@";function on(e){return Boolean(e&&e[nn])}var an=function(e){function t(e){return null==e?cn():on(e)?e:cn().pushAll(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(e,t){var r=this._head;for(e=X(this,e);r&&e--;)r=r.next;return r?r.value:t},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:e[n],next:r};return this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):un(t,r)},t.prototype.pushAll=function(t){if(0===(t=e(t)).size)return this;if(0===this.size&&on(t))return t;Nt(t.size);var r=this.size,n=this._head;return t.__iterate((function(e){r++,n={value:e,next:n}}),!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):un(r,n)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):cn()},t.prototype.slice=function(t,r){if(Y(t,r,this.size))return this;var n=Q(t,this.size);if(Z(r,this.size)!==this.size)return e.prototype.slice.call(this,t,r);for(var o=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=o,this._head=i,this.__hash=void 0,this.__altered=!0,this):un(o,i)},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?un(this.size,this._head,e,this.__hash):0===this.size?cn():(this.__ownerID=e,this.__altered=!1,this)},t.prototype.__iterate=function(e,t){var r=this;if(t)return new Ne(this.toArray()).__iterate((function(t,n){return e(t,n,r)}),t);for(var n=0,o=this._head;o&&!1!==e(o.value,n++,this);)o=o.next;return n},t.prototype.__iterator=function(e,t){if(t)return new Ne(this.toArray()).__iterator(e,t);var r=0,n=this._head;return new Se((function(){if(n){var t=n.value;return n=n.next,Ee(e,r++,t)}return{value:void 0,done:!0}}))},t}(pe);an.isStack=on;var ln,sn=an.prototype;function un(e,t,r,n){var o=Object.create(sn);return o.size=e,o._head=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function cn(){return ln||(ln=un(0))}sn[nn]=!0,sn.shift=sn.pop,sn.unshift=sn.push,sn.unshiftAll=sn.pushAll,sn.withMutations=pr,sn.wasAltered=gr,sn.asImmutable=fr,sn["@@transducer/init"]=sn.asMutable=dr,sn["@@transducer/step"]=function(e,t){return e.unshift(t)},sn["@@transducer/result"]=function(e){return e.asImmutable()};var pn="@@__IMMUTABLE_SET__@@";function dn(e){return Boolean(e&&e[pn])}function fn(e){return dn(e)&&be(e)}function gn(e,t){if(e===t)return!0;if(!ne(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||ie(e)!==ie(t)||le(e)!==le(t)||be(e)!==be(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!se(e);if(be(e)){var n=e.entries();return t.every((function(e,t){var o=n.next().value;return o&&He(o[1],e)&&(r||He(o[0],t))}))&&n.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{o=!0;var i=e;e=t,t=i}var a=!0,l=t.__iterate((function(t,n){if(r?!e.has(t):o?!He(t,e.get(n,U)):!He(e.get(n,U),t))return a=!1,!1}));return a&&e.size===l}function vn(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}function hn(e){if(!e||"object"!=typeof e)return e;if(!ne(e)){if(!Mt(e))return e;e=Te(e)}if(ie(e)){var t={};return e.__iterate((function(e,r){t[r]=hn(e)})),t}var r=[];return e.__iterate((function(e){r.push(hn(e))})),r}var yn=function(e){function t(t){return null==t?wn():dn(t)&&!be(t)?t:wn().withMutations((function(r){var n=e(t);Nt(n.size),n.forEach((function(e){return r.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(ce(e).keySeq())},t.intersect=function(e){return(e=ue(e).toArray()).length?bn.intersect.apply(t(e.pop()),e):wn()},t.union=function(e){return(e=ue(e).toArray()).length?bn.union.apply(t(e.pop()),e):wn()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(e){return this._map.has(e)},t.prototype.add=function(e){return On(this,this._map.set(e,e))},t.prototype.remove=function(e){return On(this,this._map.remove(e))},t.prototype.clear=function(){return On(this,this._map.clear())},t.prototype.map=function(e,t){var r=this,n=!1,o=On(this,this._map.mapEntries((function(o){var i=o[1],a=e.call(t,i,i,r);return a!==i&&(n=!0),[a,a]}),t));return n?o:this},t.prototype.union=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return 0===(t=t.filter((function(e){return 0!==e.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(r){for(var n=0;n<t.length;n++)"string"==typeof t[n]?r.add(t[n]):e(t[n]).forEach((function(e){return r.add(e)}))})):this.constructor(t[0])},t.prototype.intersect=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var n=[];return this.forEach((function(e){t.every((function(t){return t.includes(e)}))||n.push(e)})),this.withMutations((function(e){n.forEach((function(t){e.remove(t)}))}))},t.prototype.subtract=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var n=[];return this.forEach((function(e){t.some((function(t){return t.includes(e)}))&&n.push(e)})),this.withMutations((function(e){n.forEach((function(t){e.remove(t)}))}))},t.prototype.sort=function(e){return zn(Et(this,e))},t.prototype.sortBy=function(e,t){return zn(Et(this,t,e))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate((function(t){return e(t,t,r)}),t)},t.prototype.__iterator=function(e,t){return this._map.__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?this.__empty():(this.__ownerID=e,this._map=t,this)},t}(de);yn.isSet=dn;var mn,bn=yn.prototype;function On(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function _n(e,t){var r=Object.create(bn);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function wn(){return mn||(mn=_n(Lr()))}bn[pn]=!0,bn[q]=bn.remove,bn.merge=bn.concat=bn.union,bn.withMutations=pr,bn.asImmutable=fr,bn["@@transducer/init"]=bn.asMutable=dr,bn["@@transducer/step"]=function(e,t){return e.add(t)},bn["@@transducer/result"]=function(e){return e.asImmutable()},bn.__empty=wn,bn.__make=_n;var Sn,En=function(e){function t(e,r,n){if(!(this instanceof t))return new t(e,r,n);if(Pt(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===r&&(r=1/0),n=void 0===n?1:Math.abs(n),r<e&&(n=-n),this._start=e,this._end=r,this._step=n,this.size=Math.max(0,Math.ceil((r-e)/n-1)+1),0===this.size){if(Sn)return Sn;Sn=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},t.prototype.get=function(e,t){return this.has(e)?this._start+X(this,e)*this._step:t},t.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},t.prototype.slice=function(e,r){return Y(e,r,this.size)?this:(e=Q(e,this.size),(r=Z(r,this.size))<=e?new t(0,0):new t(this.get(e,this._end),this.get(r,this._end),this._step))},t.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},t.prototype.lastIndexOf=function(e){return this.indexOf(e)},t.prototype.__iterate=function(e,t){for(var r=this.size,n=this._step,o=t?this._start+(r-1)*n:this._start,i=0;i!==r&&!1!==e(o,t?r-++i:i++,this);)o+=t?-n:n;return i},t.prototype.__iterator=function(e,t){var r=this.size,n=this._step,o=t?this._start+(r-1)*n:this._start,i=0;return new Se((function(){if(i===r)return{value:void 0,done:!0};var a=o;return o+=t?-n:n,Ee(e,t?r-++i:i++,a)}))},t.prototype.equals=function(e){return e instanceof t?this._start===e._start&&this._end===e._end&&this._step===e._step:gn(this,e)},t}(Ae);function Fn(e,t,r){for(var n=Dt(t),o=0;o!==n.length;)if((e=Wt(e,n[o++],U))===U)return r;return e}function jn(e,t){return Fn(this,e,t)}function Ln(e,t){return Fn(e,t,U)!==U}function Cn(){Nt(this.size);var e={};return this.__iterate((function(t,r){e[r]=t})),e}ue.isIterable=ne,ue.isKeyed=ie,ue.isIndexed=le,ue.isAssociative=se,ue.isOrdered=be,ue.Iterator=Se,vn(ue,{toArray:function(){Nt(this.size);var e=new Array(this.size||0),t=ie(this),r=0;return this.__iterate((function(n,o){e[r++]=t?[o,n]:n})),e},toIndexedSeq:function(){return new gt(this)},toJS:function(){return hn(this)},toKeyedSeq:function(){return new ft(this,!0)},toMap:function(){return vr(this.toKeyedSeq())},toObject:Cn,toOrderedMap:function(){return Zr(this.toKeyedSeq())},toOrderedSet:function(){return zn(ie(this)?this.valueSeq():this)},toSet:function(){return yn(ie(this)?this.valueSeq():this)},toSetSeq:function(){return new vt(this)},toSeq:function(){return le(this)?this.toIndexedSeq():ie(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return an(ie(this)?this.valueSeq():this)},toList:function(){return $r(ie(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Ct(this,function(e,t){var r=ie(e),n=[e].concat(t).map((function(e){return ne(e)?r&&(e=ce(e)):e=r?ze(e):qe(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===n.length)return e;if(1===n.length){var o=n[0];if(o===e||r&&ie(o)||le(e)&&le(o))return o}var i=new Ne(n);return r?i=i.toKeyedSeq():le(e)||(i=i.toSetSeq()),(i=i.flatten(!0)).size=n.reduce((function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}}),0),i}(this,e))},includes:function(e){return this.some((function(t){return He(t,e)}))},entries:function(){return this.__iterator(2)},every:function(e,t){Nt(this.size);var r=!0;return this.__iterate((function(n,o,i){if(!e.call(t,n,o,i))return r=!1,!1})),r},filter:function(e,t){return Ct(this,Ot(this,e,t,!0))},partition:function(e,t){return function(e,t,r){var n=ie(e),o=[[],[]];e.__iterate((function(i,a){o[t.call(r,i,a,e)?1:0].push(n?[a,i]:i)}));var i=kt(e);return o.map((function(t){return Ct(e,i(t))}))}(this,e,t)},find:function(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},forEach:function(e,t){return Nt(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){Nt(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate((function(n){r?r=!1:t+=e,t+=null!=n?n.toString():""})),t},keys:function(){return this.__iterator(0)},map:function(e,t){return Ct(this,mt(this,e,t))},reduce:function(e,t,r){return Rn(this,e,t,r,arguments.length<2,!1)},reduceRight:function(e,t,r){return Rn(this,e,t,r,arguments.length<2,!0)},reverse:function(){return Ct(this,bt(this,!0))},slice:function(e,t){return Ct(this,_t(this,e,t,!0))},some:function(e,t){Nt(this.size);var r=!1;return this.__iterate((function(n,o,i){if(e.call(t,n,o,i))return r=!0,!1})),r},sort:function(e){return Ct(this,Et(this,e))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return H(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,r){var n=vr().asMutable();return e.__iterate((function(o,i){n.update(t.call(r,o,i,e),0,(function(e){return e+1}))})),n.asImmutable()}(this,e,t)},equals:function(e){return gn(this,e)},entrySeq:function(){var e=this;if(e._cache)return new Ne(e._cache);var t=e.toSeq().map(Pn).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Nn(e),t)},findEntry:function(e,t,r){var n=r;return this.__iterate((function(r,o,i){if(e.call(t,r,o,i))return n=[o,r],!1})),n},findKey:function(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},findLastEntry:function(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(e){return this.find(J,null,e)},flatMap:function(e,t){return Ct(this,function(e,t,r){var n=kt(e);return e.toSeq().map((function(o,i){return n(t.call(r,o,i,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return Ct(this,St(this,e,!0))},fromEntrySeq:function(){return new ht(this)},get:function(e,t){return this.find((function(t,r){return He(r,e)}),void 0,t)},getIn:jn,groupBy:function(e,t){return function(e,t,r){var n=ie(e),o=(be(e)?Zr():vr()).asMutable();e.__iterate((function(i,a){o.update(t.call(r,i,a,e),(function(e){return(e=e||[]).push(n?[a,i]:i),e}))}));var i=kt(e);return o.map((function(t){return Ct(e,i(t))})).asImmutable()}(this,e,t)},has:function(e){return this.get(e,U)!==U},hasIn:function(e){return Ln(this,e)},isSubset:function(e){return e="function"==typeof e.includes?e:ue(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:ue(e)).isSubset(this)},keyOf:function(e){return this.findKey((function(t){return He(t,e)}))},keySeq:function(){return this.toSeq().map(An).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return Ft(this,e)},maxBy:function(e,t){return Ft(this,t,e)},min:function(e){return Ft(this,e?Dn(e):$n)},minBy:function(e,t){return Ft(this,t?Dn(t):$n,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,t){return Ct(this,wt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Nn(e),t)},sortBy:function(e,t){return Ct(this,Et(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,t){return Ct(this,function(e,t,r){var n=xt(e);return n.__iterateUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterate(n,o);var a=0;return e.__iterate((function(e,o,l){return t.call(r,e,o,l)&&++a&&n(e,o,i)})),a},n.__iteratorUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterator(n,o);var a=e.__iterator(2,o),l=!0;return new Se((function(){if(!l)return{value:void 0,done:!0};var e=a.next();if(e.done)return e;var o=e.value,s=o[0],u=o[1];return t.call(r,u,s,i)?2===n?e:Ee(n,s,u,e):(l=!1,{value:void 0,done:!0})}))},n}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Nn(e),t)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=be(e),r=ie(e),n=t?1:0;return function(e,t){return t=Xe(t,3432918353),t=Xe(t<<15|t>>>-15,461845907),t=Xe(t<<13|t>>>-13,5),t=Xe((t=t+3864292196^e)^t>>>16,2246822507),t=Je((t=Xe(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(r?t?function(e,t){n=31*n+Mn(Qe(e),Qe(t))|0}:function(e,t){n=n+Mn(Qe(e),Qe(t))|0}:t?function(e){n=31*n+Qe(e)|0}:function(e){n=n+Qe(e)|0}),n)}(this))}});var In=ue.prototype;In[re]=!0,In[we]=In.values,In.toJSON=In.toArray,In.__toStringMapper=zt,In.inspect=In.toSource=function(){return this.toString()},In.chain=In.flatMap,In.contains=In.includes,vn(ce,{flip:function(){return Ct(this,yt(this))},mapEntries:function(e,t){var r=this,n=0;return Ct(this,this.toSeq().map((function(o,i){return e.call(t,[i,o],n++,r)})).fromEntrySeq())},mapKeys:function(e,t){var r=this;return Ct(this,this.toSeq().flip().map((function(n,o){return e.call(t,n,o,r)})).flip())}});var kn=ce.prototype;kn[oe]=!0,kn[we]=In.entries,kn.toJSON=Cn,kn.__toStringMapper=function(e,t){return zt(t)+": "+zt(e)},vn(pe,{toKeyedSeq:function(){return new ft(this,!1)},filter:function(e,t){return Ct(this,Ot(this,e,t,!1))},findIndex:function(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return Ct(this,bt(this,!1))},slice:function(e,t){return Ct(this,_t(this,e,t,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(t||0,0),0===r||2===r&&!t)return this;e=Q(e,e<0?this.count():this.size);var n=this.slice(0,e);return Ct(this,1===r?n:n.concat(At(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return Ct(this,St(this,e,!1))},get:function(e,t){return(e=X(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,r){return r===e}),void 0,t)},has:function(e){return(e=X(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Ct(this,function(e,t){var r=xt(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var o=this,i=0;return e.__iterate((function(e){return(!i||!1!==r(t,i++,o))&&!1!==r(e,i++,o)}),n),i},r.__iteratorUncached=function(r,n){var o,i=e.__iterator(1,n),a=0;return new Se((function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?Ee(r,a++,t):Ee(r,a++,o.value,o)}))},r}(this,e))},interleave:function(){var e=[this].concat(At(arguments)),t=Lt(this.toSeq(),Ae.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),Ct(this,r)},keySeq:function(){return En(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,t){return Ct(this,wt(this,e,t,!1))},zip:function(){return Ct(this,Lt(this,Vn,[this].concat(At(arguments))))},zipAll:function(){return Ct(this,Lt(this,Vn,[this].concat(At(arguments)),!0))},zipWith:function(e){var t=At(arguments);return t[0]=this,Ct(this,Lt(this,e,t))}});var xn=pe.prototype;xn[ae]=!0,xn[me]=!0,vn(de,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var Tn=de.prototype;function Rn(e,t,r,n,o,i){return Nt(e.size),e.__iterate((function(e,i,a){o?(o=!1,r=e):r=t.call(n,r,e,i,a)}),i),r}function An(e,t){return t}function Pn(e,t){return[t,e]}function Nn(e){return function(){return!e.apply(this,arguments)}}function Dn(e){return function(){return-e.apply(this,arguments)}}function Vn(){return At(arguments)}function $n(e,t){return e<t?1:e>t?-1:0}function Mn(e,t){return e^t+2654435769+(e<<6)+(e>>2)}Tn.has=In.includes,Tn.contains=Tn.includes,Tn.keys=Tn.values,vn(Re,kn),vn(Ae,xn),vn(Pe,Tn);var zn=function(e){function t(e){return null==e?Un():fn(e)?e:Un().withMutations((function(t){var r=de(e);Nt(r.size),r.forEach((function(e){return t.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(ce(e).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(yn);zn.isOrderedSet=fn;var qn,Wn=zn.prototype;function Bn(e,t){var r=Object.create(Wn);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function Un(){return qn||(qn=Bn(tn()))}Wn[me]=!0,Wn.zip=xn.zip,Wn.zipWith=xn.zipWith,Wn.zipAll=xn.zipAll,Wn.__empty=Un,Wn.__make=Bn;var Gn=function(e,t){var r;!function(e){if(he(e))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(ye(e))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===e||"object"!=typeof e)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(e);var n=function(i){var a=this;if(i instanceof n)return i;if(!(this instanceof n))return new n(i);if(!r){r=!0;var l=Object.keys(e),s=o._indices={};o._name=t,o._keys=l,o._defaultValues=e;for(var u=0;u<l.length;u++){var c=l[u];s[c]=u,o[c]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+Xn(this)+' with property "'+c+'" since that property name is part of the Record API.'):Yn(o,c)}}return this.__ownerID=void 0,this._values=$r().withMutations((function(e){e.setSize(a._keys.length),ce(i).forEach((function(t,r){e.set(a._indices[r],t===a._defaultValues[r]?void 0:t)}))})),this},o=n.prototype=Object.create(Kn);return o.constructor=n,t&&(n.displayName=t),n};Gn.prototype.toString=function(){for(var e,t=Xn(this)+" { ",r=this._keys,n=0,o=r.length;n!==o;n++)t+=(n?", ":"")+(e=r[n])+": "+zt(this.get(e));return t+" }"},Gn.prototype.equals=function(e){return this===e||he(e)&&Jn(this).equals(Jn(e))},Gn.prototype.hashCode=function(){return Jn(this).hashCode()},Gn.prototype.has=function(e){return this._indices.hasOwnProperty(e)},Gn.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._indices[e],n=this._values.get(r);return void 0===n?this._defaultValues[e]:n},Gn.prototype.set=function(e,t){if(this.has(e)){var r=this._values.set(this._indices[e],t===this._defaultValues[e]?void 0:t);if(r!==this._values&&!this.__ownerID)return Hn(this,r)}return this},Gn.prototype.remove=function(e){return this.set(e)},Gn.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:Hn(this,e)},Gn.prototype.wasAltered=function(){return this._values.wasAltered()},Gn.prototype.toSeq=function(){return Jn(this)},Gn.prototype.toJS=function(){return hn(this)},Gn.prototype.entries=function(){return this.__iterator(2)},Gn.prototype.__iterator=function(e,t){return Jn(this).__iterator(e,t)},Gn.prototype.__iterate=function(e,t){return Jn(this).__iterate(e,t)},Gn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?Hn(this,t,e):(this.__ownerID=e,this._values=t,this)},Gn.isRecord=he,Gn.getDescriptiveName=Xn;var Kn=Gn.prototype;function Hn(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._values=t,n.__ownerID=r,n}function Xn(e){return e.constructor.displayName||e.constructor.name||"Record"}function Jn(e){return ze(e._keys.map((function(t){return[t,e.get(t)]})))}function Yn(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){Pt(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(e){}}Kn[ve]=!0,Kn[q]=Kn.remove,Kn.deleteIn=Kn.removeIn=Qt,Kn.getIn=jn,Kn.hasIn=In.hasIn,Kn.merge=rr,Kn.mergeWith=nr,Kn.mergeIn=ur,Kn.mergeDeep=lr,Kn.mergeDeepWith=sr,Kn.mergeDeepIn=cr,Kn.setIn=Jt,Kn.update=er,Kn.updateIn=tr,Kn.withMutations=pr,Kn.asMutable=dr,Kn.asImmutable=fr,Kn[we]=Kn.entries,Kn.toJSON=Kn.toObject=In.toObject,Kn.inspect=Kn.toSource=function(){return this.toString()};var Qn,Zn=function(e){function t(e,r){if(!(this instanceof t))return new t(e,r);if(this._value=e,this.size=void 0===r?1/0:Math.max(0,r),0===this.size){if(Qn)return Qn;Qn=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},t.prototype.get=function(e,t){return this.has(e)?this._value:t},t.prototype.includes=function(e){return He(this._value,e)},t.prototype.slice=function(e,r){var n=this.size;return Y(e,r,n)?this:new t(this._value,Z(r,n)-Q(e,n))},t.prototype.reverse=function(){return this},t.prototype.indexOf=function(e){return He(this._value,e)?0:-1},t.prototype.lastIndexOf=function(e){return He(this._value,e)?this.size:-1},t.prototype.__iterate=function(e,t){for(var r=this.size,n=0;n!==r&&!1!==e(this._value,t?r-++n:n++,this););return n},t.prototype.__iterator=function(e,t){var r=this,n=this.size,o=0;return new Se((function(){return o===n?{value:void 0,done:!0}:Ee(e,t?n-++o:o++,r._value)}))},t.prototype.equals=function(e){return e instanceof t?He(this._value,e._value):gn(this,e)},t}(Ae);function eo(e,t){return to([],t||ro,e,"",t&&t.length>2?[]:void 0,{"":e})}function to(e,t,r,n,o,i){if("string"!=typeof r&&!ye(r)&&(xe(r)||je(r)||$t(r))){if(~e.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");e.push(r),o&&""!==n&&o.push(n);var a=t.call(i,n,Te(r).map((function(n,i){return to(e,t,n,i,o,r)})),o&&o.slice());return e.pop(),o&&o.pop(),a}return r}function ro(e,t){return le(t)?t.toList():ie(t)?t.toMap():t.toSet()}const no={version:"4.3.7",Collection:ue,Iterable:ue,Seq:Te,Map:vr,OrderedMap:Zr,List:$r,Stack:an,Set:yn,OrderedSet:zn,PairSorting:{LeftThenRight:-1,RightThenLeft:1},Record:Gn,Range:En,Repeat:Zn,is:He,fromJS:eo,hash:Qe,isImmutable:ye,isCollection:ne,isKeyed:ie,isIndexed:le,isAssociative:se,isOrdered:be,isValueObject:Ke,isPlainObject:$t,isSeq:ge,isList:Vr,isMap:Ue,isOrderedMap:Ge,isStack:on,isSet:dn,isOrderedSet:fn,isRecord:he,get:Wt,getIn:Fn,has:qt,hasIn:Ln,merge:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return ar(e,t)},mergeDeep:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return ir(e,t)},mergeWith:function(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return ar(t,r,e)},mergeDeepWith:function(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return ir(t,r,e)},remove:Ut,removeIn:Yt,set:Gt,setIn:Xt,update:Zt,updateIn:Kt};var oo=0;const io=function(){var e=((new Date).getTime().toString(16)+"FF").substr(0,11);return"ssssssss-xxxx-4xxx-yxxx-x".replace(/[xys]/g,(function(e){var t="s"===e?Math.floor(16*Math.random()):15&oo++;return("x"===e?t:3&t|8).toString(16)}))+e};function ao(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var lo=["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue","spelImportFuncs","spelImportValue"],so=["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"],uo=function(e){return"object"===E(e)&&null!==e&&"[object Object]"===Object.prototype.toString.call(e)},co=function(e){if("object"===E(e)&&null!==e){if(Array.isArray(e))return z(e);if(uo(e))return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ao(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}return e},po=function(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){var r=$(e,1)[0];return!t.includes(r)})))},fo=function(e){var t;return null!==(t=null==e?void 0:e.cardinality)&&void 0!==t?t:1},go=function(e,t){return e===t||(vr.isMap(e)?e.equals(t):JSON.stringify(e)==JSON.stringify(t))},vo=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t||(Array.isArray(e)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var o=0;o<n;o++)if(!(r?vo(e[o],t[o],r):e[o]===t[o]))return!1;return!0}(e,t,r):vr.isMap(e)?e.equals(t):"object"==E(e)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),o=Object.keys(t),i=n.length;if(o.length!==i)return!1;for(var a=0;a<i;a++){var l=n[a];if(!(r?vo(e[l],t[l],r):e[l]===t[l]))return!1}return!0}(e,t,r):e===t)};var ho=function(e){return"object"===E(e)&&null!==e&&"function"==typeof e.toJS},yo=function(e){return ho(e)&&no.isList(e)};function mo(e){return yo(e)?e:new no.List(e)}function bo(e){return ho(e)?e.toJS():e}var Oo=function(e){return e.replace(/[.*+?^${}()|[\]\\/]/g,"\\$&")},_o=function(e,t,r,n,o,i){if(Array.isArray(e))return t},wo=function e(t){var r;if(t instanceof Array)return t.map((function(t,r){return e(t)}));if("object"===E(t)&&null!==t&&So(t)){var n,o=po(t,["$$typeof","_owner","_store","ref","key"]);return o.type&&(o.type="string"==typeof(r=o.type)?r:"function"==typeof r?r.name:r),null!=o&&null!==(n=o.props)&&void 0!==n&&n.children&&(o.props.children=e(o.props.children)),o}return t},So=function(e){return"object"===E(e)&&null!==e&&!Array.isArray(e)&&Object.keys(e).includes("type")&&Object.keys(e).includes("props")&&Object.keys(e).includes("key")&&Object.keys(e).includes("ref")&&Object.keys(e).includes("$$typeof")},Eo=function(e){return"object"===E(e)&&null!==e&&!Array.isArray(e)&&"string"==typeof e.type&&Object.keys(e).includes("props")},Fo=function(e){return"object"===E(e)&&null!==e&&!Array.isArray(e)&&1===Object.keys(e).length};function jo(e){return new Promise((function(t){setTimeout(t,e)}))}function Lo(e,t){return e||(e=[]),t||(t=[]),t.map((function(t){return[t,e.indexOf(t)]})).map((function(e,t,r){var n=$(e,2),o=n[0];if(-1==n[1]){var i=r.slice(t+1),a=r.slice(0,t).reverse().find((function(e){var t=$(e,2);return t[0],-1!=t[1]})),l=i.find((function(e){var t=$(e,2);return t[0],-1!=t[1]}));return l?[o,"before",l[0]]:a?[o,"after",a[0]]:[o,"append",null]}return null})).filter((function(e){return null!==e})).reduce((function(e,t){var r=$(t,3),n=r[0],o=r[1],i=r[2],a=e.indexOf(i);return-1==e.indexOf(n)&&(a>-1?e.splice(a+("after"==o?1:0),0,n):e.splice("append"==o?1/0:0,0,n)),e}),e.slice())}var Co=function e(t){"object"!==E(t)||null===t||So(t)||(Object.keys(t).forEach((function(r){"__cache"!==r&&e(t[r])})),Object.freeze(t))},Io=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(uo(t)){if(t.var)return n[t.var]=r,!0;if(!uo(r))return!1;for(var i in t)if(!e(t[i],r[i],n,[].concat(z(o),[i])))return!1;return!0}if(Array.isArray(t)){if(!Array.isArray(r))return!1;for(var a=0;a<t.length;a++)if(!e(t[a],r[a],n,[].concat(z(o),[a])))return!1;return!0}return t===r},ko=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(null!=e?e:("undefined"!=typeof process&&process.env,0))?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}},xo=function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0;r<t.length;r++){var n=t[r];if(void 0!==n){e=n;break}}return e},To=ko(),Ro=r(6834),Ao=r.n(Ro),Po=r(8831),No=r.n(Po),Do=r(8906),Vo=r.n(Do),$o=r(7027),Mo=r.n($o);function zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Bo=function(e){return"object"==E(e)&&null!==e&&!Array.isArray(e)},Uo=function(e,t){return null==e||""==e?void 0:Bo(e)?Wo(Wo({},e),{},{title:e.title||e.value}):{value:e,title:void 0!==t?t:""+e}},Go=function(e){var t=Uo(e);return Bo(t)?Wo(Wo({},Uo(e)),{},{isCustom:!0}):t},Ko=function(e){if(Array.isArray(e))return e.map((function(e){return Uo(e)}));if(!Bo(e))return e;var t=[];for(var r in e){var n=e[r];t.push(Uo(r,n))}return t},Ho=function(e,t){return Array.isArray(e)?e.map((function(e){return Uo(e)})).find((function(e){return""+e.value==""+t})):void 0!==e[t]?Uo(t,e[t]):void 0},Xo=function(e,t){if(null==e)return t;var r=Ho(e,t);return void 0!==r?r.title:t},Jo=function(e,t){if(null==e)return t;var r=Ho(e,t);return void 0!==r?r.value:t},Yo=function(e,t){var r=[];if(Array.isArray(e)){var n,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return zo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zo(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(e);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=t(Uo(i));null!=a&&r.push(a)}}catch(e){o.e(e)}finally{o.f()}}else for(var l in e){var s=t(Uo(l,e[l]));null!=s&&r.push(s)}return r},Qo=function(e,t){return Yo(t,(function(t){return-1!="".concat(t.value).indexOf(e)||-1!=t.title.indexOf(e)?t:null})).filter((function(e){return null!==e})).shift()},Zo=function(e,t){return Yo(t,(function(t){return""+t.value==""+e?t:null})).filter((function(e){return null!==e})).shift()},ei=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.interpose("children1").withMutations((function(e){return e.skip(1),e.push.apply(e,r),e}))},ti=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.interpose("children1").withMutations((function(e){return e.push.apply(e,r),e}))},ri=function(e,t){var r=new no.OrderedMap(A({},e.get("id"),e)),n=e;return t.forEach((function(e){var t,o;n=null===(t=r)||void 0===t?void 0:t.get(e),r=null===(o=n)||void 0===o?void 0:o.get("children1")})),n},ni=function(e,t){var r=t.map((function(e,r){return t.take(r+1)})).reverse().toJS().map((function(t){return{item:ri(e,t),path:t}})).filter((function(e){var t=e.item;return"rule_group"===(null==t?void 0:t.get("type"))}));return r.length?r.map((function(e){var t=e.item;return{path:e.path,field:t.get("properties").get("field")}})):[]},oi=function(e){var t=e;return function e(r,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n.push(r.get("id")),a=r.getIn(["properties","isLocked"]);o&&a&&(t=t.deleteIn(ei(i,"properties","isLocked")));var l=r.get("children1");l&&l.map((function(t,r){e(t,i,a||o)}))}(e,new no.List),t},ii=function(e){var t=e;return function e(r,n,o,i){if(r){var a=r.get("path"),l=r.get("id"),s=l||i||io(),u=n.push(s);a&&a.equals(u)||(t=t.setIn(ei(u,"path"),u)),l||(t=t.setIn(ei(u,"id"),s));var c=r.get("children1");c&&("Map"===c.constructor.name&&(t=t.setIn(ei(u,"children1"),new no.OrderedMap(c))),c.map((function(t,r){e(t,u,o+1,r)})))}}(e,new no.List,0),t},ai=function(e){var t=e;return function e(r,n,o,i){if(!r)return!1;var a=r.get("id")||i,l=n.push(a),s=r.get("children1");if(s){var u=s.map((function(t,r){return e(t,l,o+1,r)})).reduce((function(e,t){return e&&t}),!0);if((0==s.size||u)&&o>0)return t=t.deleteIn(ei(l)),!0}return!1}(e,new no.List,0),t},li=function(e,t){var r=[],n={},o=[],i=0,a=0,l=0,s={};!function u(c,p,d,f,g,v,h,y,m){var b,O,_,w=c===e,S=c.get("type"),E=c.get("collapsed"),F=c.get("id"),j=c.get("children1"),L=c.getIn(["properties","isLocked"]),C=j?j.map((function(e,t){return t})).valueSeq().toArray():null,I="rule_group"===S,k="rule"===S,x="group"===S,T="case_group"===S,R=!g&&(!j||I),A=(null==C?void 0:C.length)>0,P=p.length?p[p.length-1]:null,N=z(p).reverse().find((function(e){return"rule_group"==n[e].type})),D=c.getIn(["properties","field"]),V=D&&t&&Cp(t,D),$=V?!1!==(null==V?void 0:V.canRegroup):void 0,M=null==V?void 0:V.maxNesting,q=null==n||null===(b=n[N])||void 0===b?void 0:b.canRegroup,W=null==n||null===(O=n[N])||void 0===O?void 0:O.maxNesting,B=null==n||null===(_=n[N])||void 0===_?void 0:_.lev,U=T?F:y;T&&(o.push(F),a=0,l=0,s={});var G,K=U?o.indexOf(U):null,H=r.length,X=i;w||((G={}).caseNo=K,G.globalNoByType=T?K:s[S]||0,G.indexPath=[].concat(z(p.slice(1).map((function(e){return n[e].childNo}))),[m]),k?G.globalLeafNo=a:x&&(G.globalGroupNo=l));var J=g||I?h:h+1;r.push(F),n[F]={node:c,index:H,id:F,type:S,parent:P,children:C,childNo:m,caseId:U,caseNo:K,closestRuleGroupId:N,closestRuleGroupLev:B,closestRuleGroupMaxNesting:W,closestRuleGroupCanRegroup:q,maxNesting:M,canRegroup:$,path:p.concat(F),lev:v,atomicLev:h,nextAtomicLev:J,isLeaf:!j,isAtomicRule:R,isLocked:L||f,top:d?null:X,isDefaultCase:T?!j:void 0,atomicRulesCountInCase:T?0:void 0,position:G,collapsed:E,_top:H,parentType:P?n[P].type:null,leaf:!j};var Y=0,Q=0;d||(i+=1,Y+=1,!A||E||I||(Q+=1),w||T||(x&&l++,k&&a++,s[S]=(s[S]||0)+1)),y&&R&&n[y].atomicRulesCountInCase++;var Z=0,ee=0;if(A){var te=0;j.map((function(e,t){if(e){u(e,p.concat(F),d||E,f||L,g||I,v+1,J,U,te);var r=n[t];Z=Math.max(Z,r.depth||0),ee+=r.height,te++}}))}Y+=ee,Q+=Z;var re=r.length-H,ne=d?null:X+Y;Object.assign(n[F],{depth:j?Q:void 0,_height:re,height:Y,bottom:ne})}(e,[],!1,!1,!1,0,0,null,null);for(var u=0;u<r.length;u++){var c=u>0?r[u-1]:null,p=u<r.length-1?r[u+1]:null,d=n[r[u]];d.prev=c,d.next=p}return{flat:r,items:n,cases:o}},si=function(e){if(!e)return-1;var t=0;return function e(r,n,o){var i,a,l;"function"==typeof r.get?(i=r.get("id"),a=r.get("children1"),l=r.get("type")):(i=r.id,a=r.children1,l=r.type),t++,"rule_group"==l&&o>0||a&&a.map((function(t,r){t&&e(t,n.concat(i),o+1)}))}(e,[],0),t-1},ui=function(e){if(!e)return-1;var t=0;return function e(r,n,o){var i,a,l;"function"==typeof r.get?(i=r.get("id"),a=r.get("children1"),l=r.get("type")):(i=r.id,a=r.children1,l=r.type),"rule"==l||"rule_group"==l&&o>0?t++:a&&a.map((function(t,r){t&&e(t,n.concat(i),o+1)}))}(e,[],0),t},ci=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e;return function e(n,o){t&&n.path&&delete n.path,t&&!r&&o&&delete n.id;var i=n.properties;i&&null==i.operatorOptions&&delete i.operatorOptions;var a=n.children1;if(a){for(var l in a)a[l]&&e(a[l],l);r&&(n.children1=Object.values(a))}}(e,null),n},pi=function(e){var t=[],r=e.get("children1");return r&&r.map((function(e){var r,n=e.getIn(["properties","value"]);n&&1==n.size?(r=n.get(0),Array.isArray(r)&&0==r.length&&(r=null)):r=null,t=[].concat(z(t),[r])})),t},di=function(e){return!e.get("children1")||0==e.get("children1").size},fi=function(e,t){return e.getIn(ei(t,"children1")).size>0},gi=function(e){if(null!=e&&e.toJS){var t,r=null==e||null===(t=e.toJS)||void 0===t?void 0:t.call(e);return null!=r&&r.func?e.toOrderedMap():r}return e},vi=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var n=e;return n=n.toJS(),ci(n,t,r)}},hi=function(e){if(yi(e))return e;if(mi(e))return ii(bi(e));if("string"==typeof e&&e.startsWith('["~#iM"'))throw new Error("You are trying to load query in obsolete serialization format (Immutable string) which is not supported in versions starting from 2.1.17");if("string"==typeof e)return ii(bi(JSON.parse(e)));throw new Error("Can't load tree!")},yi=function(e){return vr.isMap(e)},mi=function(e){return"object"==E(e)&&("group"==e.type||"switch_group"==e.type)};function bi(e){return eo(e,(function(e,t,r){var n,o=r&&r.length>3&&"value"===r[r.length-1]&&"args"===r[r.length-3],i=r&&r.length>3&&"value"===r[r.length-1]&&"properties"===r[r.length-2];if("properties"==e){n=t.toOrderedMap();for(var a=0;a<2;a++){var l,s,u;null===(null===(l=n.get("value"))||void 0===l||null===(s=(u=l).get)||void 0===s?void 0:s.call(u,a))&&(n=n.setIn(["value",a],void 0))}}else n=o?gi(t):(r?i:"value"==e)&&no.Iterable.isIndexed(t)?t.map(gi).toList():"asyncListValues"==e?t.toJS():"children1"==e&&no.Iterable.isIndexed(t)?new no.OrderedMap(t.map((function(e){return[(null==e?void 0:e.get("id"))||io(),e]}))):no.Iterable.isIndexed(t)?t.toList():t.toOrderedMap();return n}))}function Oi(e){return P(e)||M(e)||D(e)||V()}var _i=r(2468),wi=r.n(_i);function Si(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ei(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Si(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Si(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fi(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ji(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ji(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Li="jlField",Ci="jlArgs",Ii=["==","!="],ki=["<","<=",">",">="],xi=["multiselect_equals","multiselect_not_equals","multiselect_contains","multiselect_not_contains"],Ti=function(e){return{errors:[],settings:null==e?void 0:e.settings}},Ri=function(e,t){return Ai(e,t,!1)},Ai=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=Ti();n.settings={allowUnknownFields:!1,returnErrors:r};var o=rp(t,void 0,!1),i=Pi(o),a=e?Vi(e,i,o,["rule","group","switch"],n):void 0,l=a?hi(a):void 0;return r?[l,n.errors]:(n.errors.length&&console.warn("Errors while importing from JsonLogic:",n.errors),l)},Pi=function(e){var t={},r={};for(var n in e.operators){var o=e.operators[n];if("string"==typeof o.jsonLogic){var i=o.jsonLogic+"/"+fo(o);t[i]||(t[i]=[]),t[i].push(n)}else if("string"==typeof o.jsonLogic2){var a=o.jsonLogic2+"/"+fo(o);t[a]||(t[a]=[]),t[a].push(n),r[n]||(r[n]={}),r[n]={template:o.jsonLogic(Li,n,Ci),jsonLogic2:o.jsonLogic2,_jsonLogicIsExclamationOp:!!o._jsonLogicIsExclamationOp}}}var l={};for(var s in e.conjunctions)l[e.conjunctions[s].jsonLogicConj||s.toLowerCase()]=s;var u,c={},p=Fi(dp(e));try{for(p.s();!(u=p.n()).done;){var d=$(u.value,2),f=d[0],g=d[1],v=void 0;g.jsonLogicIsMethod?v="#"+g.jsonLogic:"string"==typeof g.jsonLogic&&(v=g.jsonLogic),v&&(c[v]||(c[v]=[]),c[v].push(f))}}catch(e){p.e(e)}finally{p.f()}var h=e.settings.jsonLogic;return{operators:t,conjunctions:l,funcs:c,varKeys:["var",h.groupVarKey,h.altVarKey],combinationOperators:r}},Ni=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null!=t&&t.combinationOperators)for(var i=0,a=Object.entries(t.combinationOperators);i<a.length;i++){var l=$(a[i],2),s=l[0],u=l[1];if(null==o||o.includes(s)){var c=Di(u.template,e);c.match&&(n?r.errors.push("Operator matched against 2 templates: ".concat(n.newOp," and ").concat(s)):n=c,n.newOp=u.jsonLogic2)}}return n},Di=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{match:!0,jlField:null,jlArgs:[]};if(null==t||null==r)return n.match=!1,n;var o=Object.keys(t),i=Object.keys(r);if(o.length!==i.length)return n.match=!1,n;for(var a=0;a<o.length;a++){var l=o[a],s=t[l];if(l!==i[a])return n.match=!1,n;if(s===Li&&Fo(r[l]))n.jlField=r[l];else if(s===Ci)n.jlArgs.push(r[l]);else if("object"===E(s)&&null!==s||Array.isArray(s))n=e(s,r[l],n);else if(s!==r[l])return n.match=!1,n}return n},Vi=function e(t,r,n,o,i){var a,l,s,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6?arguments[6]:void 0,p=arguments.length>7?arguments[7]:void 0,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;Fo(t)&&(a=Object.keys(t)[0],l=t[a],Array.isArray(l)||(l=[l]));var f=i.errors.length,g=n.settings.jsonLogic.lockedOp,v="!"==a&&1==l.length&&l[0]&&Fo(l[0])&&r.varKeys.includes(Object.keys(l[0])[0]),h=Ni(t,r,i);h&&((l=[])[0]=h.jlField,h.jlArgs.forEach((function(e){return l.push(e)})),a=h.newOp);var y="!"==a&&!v,m=g&&a==g,b=o.includes("switch");m?s=e(l[0],r,n,o,i,u,c,p,d,!0):y?s=e(l[0],r,n,o,i,!u,c,p,d):o.includes("val")?s=Mi(a,l,r,n,u,i,d)||zi(a,l,r,n,u,c,i,d)||$i(t,c,p,n,i):(o.includes("switch")&&(s=Gi(a,l,r,n,u,i,d)),null==s&&o.includes("group")&&(s=qi(a,l,r,n,u,i,d,!1)),null==s&&o.includes("rule")&&(s=Ui(a,l,r,n,u,i,d)),s&&b&&!["group","switch_group"].includes(s.type)&&(s=Wi(s,n)));var O=i.errors.length;return"!"!=a&&void 0===s&&O==f&&i.errors.push("Can't parse logic ".concat(JSON.stringify(t))),m&&(s.properties.isLocked=!0),s},$i=function(e,t,r,n,o){var i;if(void 0===e&&(e=null==t?void 0:t.defaultValue),void 0!==e){r=r||(null==t?void 0:t.mainWidget);var a=n.widgets[r],l=null==t?void 0:t.type;if(!l||a){if(!Fo(e)){if("time"===l&&"number"==typeof e){var s=Math.floor(e/60/60)%24,u=Math.floor(e/60)%60,c=e%60,p=a.valueFormat;if(p){var d=new Date(e);d.setMilliseconds(0),d.setHours(s),d.setMinutes(u),d.setSeconds(c),e=wi()(d).format(p)}else e="".concat(s,":").concat(u,":").concat(c)}if(["date","datetime"].includes(l)&&e&&!(e instanceof Date))try{var f=new Date(e);f instanceof Date&&f.toISOString()===e&&(e=f)}catch(t){o.errors.push("Can't convert value ".concat(e," as Date")),e=void 0}if(e instanceof Date&&t){var g=a.valueFormat;g&&(e=wi()(e).format(g))}var v;if(e&&null!=t&&null!==(i=t.fieldSettings)&&void 0!==i&&i.asyncFetch&&(v=Array.isArray(e)?e:[e]),null!=a&&a.jsonLogicImport)try{e=a.jsonLogicImport.call(n.ctx,e)}catch(t){var h;o.errors.push("Can't import value ".concat(e," using import func of widget ").concat(r,": ").concat(null!==(h=null==t?void 0:t.message)&&void 0!==h?h:t)),e=void 0}return{valueSrc:"value",value:e,valueType:null==a?void 0:a.type,asyncListValues:v}}o.errors.push("Unexpected logic in value: ".concat(JSON.stringify(e)))}else o.errors.push("No widget for type ".concat(l))}},Mi=function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(r.varKeys.includes(e)&&"string"==typeof t[0]){var l,s=hp(n,t[0],a),u=Cp(n,s);return u||null!==(l=i.settings)&&void 0!==l&&l.allowUnknownFields?{valueSrc:"field",value:s,valueType:null==u?void 0:u.type}:void i.errors.push("No config for field ".concat(s))}},zi=function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(e){var s,u,c,p="method"==e;if(p){var d,f,g=Oi(t);d=g[0],s=g[1],f=g.slice(2),u=[d].concat(z(f))}else s=e,u=t;var v=(p?"#":"")+s,h=(null==i?void 0:i.type)||(null==i?void 0:i.returnType),y=(r.funcs[v]||[]).filter((function(e){return!i||mp(n,e).returnType==h}));if(y.length)c=y[0];else{var m,b=A({},e,t),O=Fi(dp(n));try{for(O.s();!(m=O.n()).done;){var _=$(m.value,2),w=_[0],S=_[1];if(S.jsonLogicImport&&(!h||S.returnType==h)){var E=void 0;try{E=S.jsonLogicImport(b)}catch(e){}E&&(c=w,u=E)}}}catch(e){O.e(e)}finally{O.f()}}if(c&&c){var F=mp(n,c),j=Object.keys(F.args||{}),L=u.reduce((function(e,t,o){var i,s=j[o],u=F.args[s];return u&&(i=Vi(t,r,n,["val"],a,!1,u,null,l)),void 0!==i?Ei(Ei({},e),{},A({},s,i)):e}),{});for(var C in F.args){var I,k=F.args[C],x=L[C];if(void 0===x)if(void 0!==(x=null==k?void 0:k.defaultValue)&&(x={value:x,valueSrc:null!==(I=x)&&void 0!==I&&I.func?"func":"value",valueType:k.type}),void 0===x){if(null==k||!k.isOptional)return void a.errors.push("No value for arg ".concat(C," of func ").concat(c))}else L[C]=x}return{valueSrc:"func",value:{func:c,args:L},valueType:F.returnType}}}},qi=function(e,t,r,n,o,i){var a,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=r.conjunctions[e],u=n.settings.fieldSeparator;if(s){var c=t.map((function(e){return Vi(e,r,n,["rule","group"],i,!1,null,null,l)})).filter((function(e){return void 0!==e})).reduce((function(e,t){return Ei(Ei({},e),{},A({},t.id,t))}),{}),p=Object.values(c).map((function(e){var t,r;return"field"==(null==e||null===(t=e.properties)||void 0===t?void 0:t.fieldSrc)&&(null==e||null===(r=e.properties)||void 0===r?void 0:r.field)})).filter((function(e){var t;return null==e||null===(t=e.includes)||void 0===t?void 0:t.call(e,u)})),d=Object.fromEntries((a=p,Array.from(new Set(a))).map((function(e){var t=e.split(u),r=Object.fromEntries(t.slice(0,-1).map((function(e,t,r){return[].concat(z(r.slice(0,t)),[e])})).map((function(e){return[e.join(u),Cp(n,e)]})).filter((function(e){var t=$(e,2),r=(t[0],t[1]);return"!group"==(null==r?void 0:r.type)})));return[e,Object.keys(r)]}))),f={conjunction:s,not:o},g=io(),v={},h={};return Object.entries(c).map((function(e){var t=$(e,2),r=t[0],o=t[1];if("group"==(null==o?void 0:o.type)||"rule_group"==(null==o?void 0:o.type))v[r]=o;else{var i,a=null==o||null===(i=o.properties)||void 0===i?void 0:i.field,c=d[a]||[],p=c[c.length-1];if(p){var f=v,g=wp(l,n),y=wp(p,n);vo(g,y.slice(0,g.length))||(g=[]),p.split(u).slice(g.length).map((function(e,t,r){return[].concat(z(g),z(r.slice(0,t)),[e]).join(u)})).map((function(e){return{f:e,fc:Cp(n,e)||{}}})).filter((function(e){return"!struct"!=e.fc.type})).map((function(e,t){var r=e.f,n=e.fc,o=h[r];o||(o=io(),h[r]=o,f[o]={type:"rule_group",id:o,children1:{},properties:{conjunction:s,not:!1,field:r,fieldSrc:"field",mode:n.mode}}),f=f[o].children1})),f[r]=o}else o&&(v[r]=o)}})),{type:"group",id:g,children1:v,properties:f}}},Wi=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"group",id:io(),children1:A({},e.id,e),properties:{conjunction:ul(t),not:r}}},Bi=function(e,t,r,n,o,i,a){var l,s=xi.map((function(e){var t;return null===(t=i.operators[e])||void 0===t?void 0:t.jsonLogic2})).includes(e),u=i.settings.groupOperators.includes(e)&&!s,c=u?0:t-1;u?c=0:Ii.includes(e)&&1==c&&null===r[1]&&(t=1,c=0,r=[r[0]]);var p=e+"/"+c,d=o.operators[p];if(d){var f,g=[];if(ki.includes(e)&&3==t)f=r[1],g=[r[0],r[2]];else{var v=Oi(r);f=v[0],g=v.slice(1)}if(Fo(f)){var h=function(e,t,r,n,o){var i,a,l,s,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,p=arguments.length>7?arguments[7]:void 0,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,f=Object.keys(t)[0],g=Object.values(t)[0],v=function(e,t){return function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Array.isArray(t)||(t=[t]);var l=Mi(e,t,r,n,o,i,a);if(l)return{fieldSrc:"field",field:l.value}}(e,t,n,o,u,p,d)||function(e,t,r,n,o){var i=zi(e,t,r,n,o,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6?arguments[6]:void 0,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null);if(i)return{fieldSrc:"func",field:i.value}}(e,t,n,o,u,c,p,d)},h=p.errors.length,y=v(f,g);if(y&&(i=y.field,a=y.fieldSrc),e&&(s=!0,l=r[0],r=[]),"reduce"==f&&Array.isArray(g)&&3==g.length){var m=$(g,3),b=m[0],O=m[1],_=m[2];if(Fo(b)&&0==_&&Fo(O)&&Array.isArray(O["+"])&&1==O["+"][0]&&Fo(O["+"][1])&&"accumulator"==O["+"][1].var)if(f=Object.keys(b)[0],g=Object.values(b)[0],"filter"==f){var w=$(g,2),S=w[0],E=w[1];if(Fo(S)){var F=v(f=Object.keys(S)[0],g=Object.values(S)[0]);F&&(i=F.field,a=F.fieldSrc,l=E,s=!0)}}else{var j=v(f,g);j&&(i=j.field,a=j.fieldSrc,s=!0)}}var L=p.errors.length;if(i||L!=h||p.errors.push("Unknown LHS ".concat(JSON.stringify(t))),i)return{field:i,fieldSrc:a,having:l,isGroup:s,args:r}}(u,f,g,o,i,null,null,a,n);if(h){var y=h.field,m=h.fieldSrc,b=h.having,O=(h.isGroup,h.args),_=Cp(i,y);if(_||null!==(l=a.settings)&&void 0!==l&&l.allowUnknownFields){var w=d[0];if(d.length>1&&_&&_.operators){if(0==(d=d.filter((function(e){return _.operators.includes(e)}))).length)return void a.errors.push("No corresponding ops for LHS ".concat(y));w=d[0]}return{field:y,fieldSrc:m,fieldConfig:_,opKey:w,args:O,having:b}}a.errors.push("No config for LHS ".concat(y))}}else a.errors.push("Incorrect operands for ".concat(e,": ").concat(JSON.stringify(r)))}},Ui=function e(t,r,n,o,i,a){var l,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(t){var c=Object.values(o.conjunctions).map((function(e){return e.jsonLogicConj})),p=function(e,t,r,n,o,i,a){var l=Ti(a),s=Bi(e,t,r,n,o,i,l);if(s)return s;a.errors.push(l.errors.join("; ")||"Unknown op ".concat(e,"/").concat(t))}(t,r.length,r,s,n,o,a);if(p){var d,f,g=p.field,v=p.fieldSrc,h=p.fieldConfig,y=p.opKey,m=p.args,b=p.having,O=Cp(o,s),_=o.operators[y],w=!!o.operators[null===(l=_)||void 0===l?void 0:l.reversedOp],S="!group"==h.type,E="!group"==(null==O?void 0:O.type),F=w&&(!!o.settings.reverseOperatorsForNot||S&&!b||!S&&E&&!u),j=i&&F||!1,L=!1,C=!!o.settings.reverseOperatorsForNot;if("!group"==(null==h?void 0:h.type)&&b){d=Object.keys(b)[0],f=b[d],Array.isArray(f)||(f=[f]);for(var I=Ni(b,n,a);"!"==d&&!I&&!("!"==d&&1==f.length&&f[0]&&Fo(f[0])&&n.varKeys.includes(Object.keys(f[0])[0]));){L=!L,b=b["!"],d=Object.keys(b)[0],f=b[d],C&&c.includes(d)&&1==f.length&&(b=b[d][0],d=Object.keys(b)[0],f=b[d]),I=Ni(b,n,a)||I}Array.isArray(f)||(f=[f]),I&&((f=[])[0]=I.jlField,I.jlArgs.forEach((function(e){return f.push(e)})),d=I.newOp)}j&&(i=!i,y=_.reversedOp,_=o.operators[y]);var k=Xu(o,g,y,null),x=m.map((function(e){return Vi(e,n,o,["val"],a,!1,h,k,s)}));if(!x.filter((function(e){return void 0===e})).length){var T,R=null==h?void 0:h.type;if("!group"!==R&&"!struct"!==R||(R=null),"!group"==(null==h?void 0:h.type)&&b){var P;if(void 0!==n.conjunctions[d]?T=qi(d,f,n,o,L,a,g,!0):(T=e(d,f,n,o,L,a,g,!0))&&("rule_group"===T.type&&(null===(P=T.properties)||void 0===P?void 0:P.field)!==g&&(T=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e)return{type:"rule_group",id:io(),children1:A({},e.id,e),properties:{conjunction:o||ul(n,r),not:i,field:t}}}(T,g,h,o)),Object.assign(T.properties,{conjunction:ul(o,h)})),!T)return;T.type="rule_group",Object.assign(T.properties,{field:g,mode:h.mode,operator:y}),"array"==h.mode&&Object.assign(T.properties,{value:x.map((function(e){return e.value})),valueSrc:x.map((function(e){return e.valueSrc})),valueType:x.map((function(e){return e.valueType}))}),i&&(T=Wi(T,o,i))}else if("!group"!=(null==h?void 0:h.type)||b){var N=x.map((function(e){return e.asyncListValues})).filter((function(e){return null!=e})),D=N.length?N[0]:void 0;T={type:"rule",id:io(),properties:Ei({field:g,fieldSrc:v,operator:y,value:x.map((function(e){return e.value})),valueSrc:x.map((function(e){return e.valueSrc})),valueType:x.map((function(e){return e.valueType}))},D?{asyncListValues:D}:{})},(i||u)&&(T=Wi(T,o,i))}else T={type:"rule_group",id:io(),children1:{},properties:{conjunction:ul(o,h),not:!1,mode:h.mode,field:g,operator:y}},"array"===h.mode&&Object.assign(T.properties,{value:x.map((function(e){return e.value})),valueSrc:x.map((function(e){return e.valueSrc})),valueType:x.map((function(e){return e.valueType}))}),i&&(T=Wi(T,o,i));return T}}}},Gi=function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if("if"===(null==e?void 0:e.toLowerCase())){var l=Ki(t).map((function(e){var t=$(e,2),o=t[0],l=t[1];return[o?Vi(o,r,n,["rule","group"],i,!1,null,null,a):null,Xi(n,i,r,l)]})).map((function(e){var t=$(e,2),r=t[0],o=t[1];return Hi(r,o,n,i)}));return{type:"switch_group",id:io(),children1:l,properties:{}}}},Ki=function(e){var t=[];return function e(r){var n=$(r,3),o=n[0],i=n[1],a=n[2];t.push([o,i]);var l=Fo(a)?Object.keys(a)[0]:null;"if"===(null==l?void 0:l.toLowerCase())?e(a[l]):t.push([void 0,a])}(e),t},Hi=function(e,t,r,n){var o;return e?(o=Ei({},e)).type?("group"!=o.type&&(o=Wi(o,r)),o.type="case_group"):(n.errors.push("Unexpected case: ".concat(JSON.stringify(o))),o=void 0):o={id:io(),type:"case_group",properties:{}},o&&(o.properties=Ei(Ei({},o.properties),t)),o},Xi=function(e,t,r,n){var o=Cp(e,"!case_value");if(o){var i=o.mainWidget,a=e.widgets[i];if(a){var l=Vi(n,r,e,["val","case_val"],t,!1,o,i);if(null!=l){var s=l.value,u=l.valueSrc,c=l.valueType;return{value:[s],valueSrc:[null!=u?u:"value"],valueType:[null!=c?c:null==a?void 0:a.type],field:"!case_value"}}}else t.errors.push("No widget ".concat(i," for case value"))}else t.errors.push("Missing caseValueField in settings")},Ji=r(138),Yi=r(358),Qi=r.n(Yi)();Qi.trim=function(e){return"'"==e.charAt(0)?e.substring(1,e.length-1):e},Qi.escapeLike=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=Qi.escape(e);return"'"+(n=(t?"%":"")+(n=(n=Qi.trim(n)).replace(/[%_]/g,"\\$&"))+(r?"%":""))+"'"};var Zi=function(e){var t="''",r=null==e?void 0:e.type;return"date"==r?t="'0000-00-00'":"datetime"==r?t="'0000-00-00 00:00'":"time"==r?t="'00:00'":"number"==r&&(t="0"),t},ea=function(e){var t="";return"number"==(null==e?void 0:e.type)&&(t=0),t},ta=function(e){return"".concat(e,".?[true]")},ra=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e)return"null";switch(E(e)){case"boolean":return e?"true":"false";case"number":if(!Number.isFinite(e)||isNaN(e))return;return e+(!Number.isInteger(e)||t?"f":"");case"object":if(Array.isArray(e))return function(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=["int","float"];return e.map((function(e){if(null!=e){if("string"==typeof e)r="String";else{if("number"!=typeof e)throw new Error("spelEscape: Can't use value ".concat(e," in array"));r=Number.isInteger(e)?"int":"float"}if(t){if(t!=r){if(!i.includes(t)||!i.includes(r))throw new Error("spelEscape: Can't use different types in array: found ".concat(t," and ").concat(r));t="float"}}else t=r}})),t||(t="String"),n="float"==t?e.map((function(e){return ra(e,!0)})):e.map((function(e){return ra(e)})),o?"new ".concat(t,"[]{").concat(n.join(", "),"}"):"{".concat(n.join(", "),"}")}(e,r);throw new Error("spelEscape: Object is not supported");default:return function(e){return"'"+e.replace(/'/g,"''")+"'"}(e)}},na=function(e){return e&&Array.isArray(e)&&e.length?e.map((function(e){return"const"==e.type?ra(e.value):"property"==e.type?""+e.value:"variable"==e.type?"#"+e.value:void 0})).filter((function(e){return null!=e})).join(" + "):"null"},oa=function(e){if(null==e)return[void 0,[]];var t=[],r="case_value"==e.valueType?e.value:e;return[(Array.isArray(r)?r:[r]).map((function(e){return"value"===e.valueSrc?null===e.value?void 0:{type:"const",value:e.value}:"field"===e.valueSrc?{type:e.isVariable?"variable":"property",value:e.value}:void t.push("Unsupported valueSrc ".concat(e.valueSrc," in concatenation"))})).filter((function(e){return null!=e})),t]},ia=function(e){return null==e?"NULL":e.toString()},aa=function(e){return null==e||"("===(null==e?void 0:e[0])&&")"===(null==e?void 0:e[(null==e?void 0:e.length)-1])?e:"("+e+")"};function la(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return sa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ua(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ca(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ua(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pa="${0}.compareTo(${1})",da={datetime:!0,time:!0,date:!0},fa=function(e,t){return ga(e,t,!1)},ga=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=rp(t,void 0,!1),i=va(e,o,n,null);return r?[i,n.errors]:(n.errors.length&&console.warn("Errors while exporting to SpEL:",n.errors),i)},va=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e){var o=e.get("type");return"group"===o||"rule_group"===o?ma(e,t,r,n):"rule"===o?_a(e,t,r,n):"switch_group"==o?ya(e,t,r,n):"case_group"==o?ha(e,t,r,n):void 0}},ha=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("type");if("case_group"==o){var i=e.get("properties")||new vr,a=$(Sa(t,i,r,null,n,"!case_value"),3),l=a[0];return a[1],a[2],[ma(e,t,r,n),l]}r.errors.push("Unexpected child of type ".concat(o," inside switch"))},ya=function(e,t,r){e.get("properties")||new vr;var n=e.get("children1");if(n){var o=n.map((function(e){return ha(e,t,r,null)})).filter((function(e){return void 0!==e})).valueSeq().toArray();if(o.length){if(1==o.length&&!o[0][0])return o[0][1];for(var i=[],a=0;a<o.length;a++)a==o.length-1||o[a][0]?(i.push(o[a]),a==o.length-1&&o[a][0]&&i.push([void 0,null])):r.errors.push("No condition for case ".concat(a));for(var l="",s="",u=0;u<i.length;u++){var c=$(i[u],2),p=c[0],d=c[1];null==d&&(d="null"),null==p&&(p="true"),u!=i.length-1?(l+="(".concat(p," ? ").concat(d," : "),s+=")"):l+="".concat(d)}return l+s}}},ma=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("type"),i=e.get("properties")||new vr,a=i.get("mode"),l=e.get("children1")||new $r,s=i.get("field"),u=i.get("conjunction");u||(u=cl(t));var c=t.conjunctions[u],p=i.get("not"),d="rule_group"===o,f=d&&"struct"!=a,g=f?s:n,v=(Cp(t,g)||{}).isSpelArray,h=t.settings.fieldSeparator,y=i.get("operator");y||a&&"some"!=a||(y="some");var m=Oa(t,y,s),b=m!=y,O=y&&Ip(t,m,s)||null,_=d&&(!m||0==O.cardinality),w=$(Sa(t,i,r,m,n,null),3),S=w[0],E=w[1],F=w[2],j=l.map((function(e){return va(e,t,r,g)})).filter((function(e){return void 0!==e}));if(f&&!_){if(null==S)return}else if(!j.size)return;var L,C=d,I=j.size?c.spelFormatConj.call(t.ctx,j,u,p,C):null;if(f){var k=Fa(r,t,s,n),x=(h||".")+(v?"length":"size()"),T="".concat(k).concat(x),R=I?"".concat(k,".?[").concat(I,"]").concat(x):T;L=ba(r,t,i,R,_?T:S,m,E,F,b)}else L=I;return L},ba=function(e,t,r,n,o,i,a,l){var s=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=r.get("field"),c=Ip(t,i,u)||{},p=Cp(t,u)||{},d=r.get("operatorOptions"),f=c.spelFormatOp||function(e,t,r){var n=t.spelOp;if(n){var o,i=n.includes("${0}"),a=da[r],l=n,s=fo(t);return a?o=function(e,t,r,n,o,i,a,u){var c=pa.replace(/\${(\w+)}/g,(function(t,n){return 0==n?e:s>1?r[n-1]:r}));return"".concat(c," ").concat(l," 0")}:i?o=function(e,t,r,o,i,a,l,u){return n.replace(/\${(\w+)}/g,(function(t,n){return 0==n?e:s>1?r[n-1]:r}))}:0==s?o=function(e,t,r,n,o,i,a,s){return"".concat(e," ").concat(l)}:1==s&&(o=function(e,t,r,n,o,i,a,s){return"".concat(e," ").concat(l," ").concat(r)}),o}}(0,c,l);if(f){var g,v=[n,i,o,a,l,po(c,so),d,p];return g=f.call.apply(f,[t.ctx].concat(v)),s&&(g=t.settings.spelFormatReverse.call(t.ctx,g)),void 0===g&&e.errors.push("Operator ".concat(i," is not supported for value source ").concat(a)),g}e.errors.push("Operator ".concat(i," is not supported"))},Oa=function(e,t,r){if(t){var n=Ip(e,t,r)||{},o=n.reversedOp,i=Ip(e,o,r)||{},a=n.spelOp||n.spelFormatOp,l=i.spelOp||i.spelFormatOp;if(a||l){if(!a&&l){var s=[o,t];t=s[0],o=s[1];var u=[i,n];n=u[0],i=u[1]}return t}}},_a=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("properties")||new vr,i=o.get("field"),a=o.get("fieldSrc"),l=o.get("operator");if(null!=i&&null!=l){var s=Oa(t,l,i);if(s){var u=s!=l,c=$(Sa(t,o,r,s,n,null),3),p=c[0],d=c[1],f=c[2];if(void 0!==p){var g=wa(r,t,i,a,n);if(void 0!==g)return ba(r,t,o,g,p,s,d,f,u)}}else r.errors.push("Operator ".concat(l," is not supported"))}},wa=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return"func"===n?ja(e,t,r,o):Fa(e,t,r,o)},Sa=function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=t.get("field"),l=t.get("valueSrc"),s=t.get("valueType");("!case_value"==i||s&&"case_value"==s.get(0))&&(a="!case_value");var u,c=Cp(e,a)||{},p=Ip(e,n,a)||{},d=fo(p),f=t.get("value"),g=t.get("asyncListValues"),v=[],h=[];if(null!=f){var y=f.map((function(t,i){var u=l?l.get(i):null,d=s?s.get(i):null,f=ac(t,u,e),y=Xu(e,a,n,u),m=kp(e,a,n,y,u,{forExport:!0}),b=Ea(r,e,f,u,d,m,c,n,p,o,g);return void 0!==b&&(v.push(u),h.push(d)),b})),m=y.filter((function(e){return void 0===e})).size>0;y.size<d||m||(u=d>1?y.toArray():1==d?y.first():null)}return[u,v.length>1?v:v[0],h.length>1?h:h[0]]},Ea=function(e,t,r,n,o,i,a,l,s){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=arguments.length>10?arguments[10]:void 0;if(void 0!==r){var p;if("field"===n)p=Fa(e,t,r,u);else if("func"===n)p=ja(e,t,r,u);else if("function"==typeof(null==i?void 0:i.spelFormatValue)){var d=i.spelFormatValue,f=[r,ca(ca({},No()(a,["fieldSettings","listValues"])),{},{asyncListValues:c}),po(i,lo)];if(l&&(f.push(l),f.push(s)),"field"==n){var g=Cp(t,r)||{};f.push(g)}p=d.call.apply(d,[t.ctx].concat(f))}else p=ra(r);return p}},Fa=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r){var o=t.settings.fieldSeparator,i=Cp(t,r)||{},a=wp(r,t),l=Wu(r,t,n),s=t.settings.formatSpelField,u=Ju(r,t,e,n),c=l.map((function(e){var t,r=$(e,3),n=r[0],i=r[1],a=r[2];return a&&(t="!struct"==a.type||"!group"==a.type&&"struct"==a.mode?i.isSpelMap?"map":"class":"!group"==a.type?i.isSpelItemMap?"[map]":"[class]":"class"),{key:n,parent:t,isSpelVariable:null==i?void 0:i.isSpelVariable,fieldSeparator:o}}));return s.call(t.ctx,u,n,a,c,i,t)}},ja=function(e,t,r){var n,o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null===(n=r.get)||void 0===n?void 0:n.call(r,"func"),l=null===(o=r.get)||void 0===o?void 0:o.call(r,"args"),s=mp(t,a);if(s){var u={},c=[],p=[];for(var d in s.args){var f,g,v=s.args[d],h=Cp(t,v),y=v.defaultValue,m=v.isOptional,b=null!=y&&y.func?"func":"value",O=l?l.get(d):void 0,_=O?O.get("value"):void 0,w=O?O.get("valueSrc"):void 0;"func"!==w&&null!==(f=_)&&void 0!==f&&f.toJS&&(_=_.toJS());var S=O?O.get("asyncListValues"):void 0,E=null===(g=v.spelEscapeForFormat)||void 0===g||g,F=null,j=Xu(t,v,F,w),L=kp(t,v,F,j,w,{forExport:!0}),C=Ea(e,t,_,w,v.type,L,h,null,null,i,S);if(null!=_&&void 0===C)return void("func"!=w&&e.errors.push("Can't format value of arg ".concat(d," for func ").concat(a)));var I=void 0;if(void 0===C&&!m&&null!=y){var k=Xu(t,v,F,b),x=kp(t,v,F,k,b,{forExport:!0});if(void 0===(I=Ea(e,t,y,b,v.type,x,h,null,null,i,S)))return void("func"!=b&&e.errors.push("Can't format default value of arg ".concat(d," for func ").concat(a)))}var T=null!=C?C:I;if(void 0!==T){var R;if(c.length){var A,P=la(c);try{for(P.s();!(A=P.n()).done;){var N=A.value;u[N]=void 0}}catch(e){P.e(e)}finally{P.f()}c=[]}u[d]=E?T:null!==(R=_)&&void 0!==R?R:y}else m||p.push(d),c.push(d)}if(!p.length){var D;if("function"==typeof s.spelFormatFunc){var V=s.spelFormatFunc,$=[u];D=V.call.apply(V,[t.ctx].concat($))}else if(s.spelFunc){D=s.spelFunc.replace(/\${(\w+)}/g,(function(e,t){var r;return null!==(r=u[t])&&void 0!==r?r:e}));var M,z=Object.keys(s.args||{}).reverse().filter((function(e){return!!s.args[e].isOptional})),q=la(z);try{for(q.s();!(M=q.n()).done;){var W=M.value;if(null!=u[W])break;D=D.replace(new RegExp("(, )?\\${"+W+"}","g"),"")}}catch(e){q.e(e)}finally{q.f()}D=D.replace(/\${(\w+)}/g,"null")}else e.errors.push("Func ".concat(a," is not supported"));return D}}else e.errors.push("Func ".concat(a," is not defined in config"))};function La(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ca(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ca(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function Ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ia(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ka(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ia(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xa={number:"number",string:"text",boolean:"boolean",null:"null"},Ta={String:"text"},Ra=function(e){return"object"==E(e)&&null!==e&&!Array.isArray(e)},Aa=function(e,t){return Pa(e,t,!0)},Pa=function(e,t){var r,n,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={errors:[]},a=rp(t,void 0,!1),l=Va(a),s=void 0;try{r=Ji.SpelExpressionEvaluator.compile(e)._compiledExpression}catch(e){i.errors.push(e)}r&&(n=Na(r,i),To.debug("convertedObj:",n,i),(s=$a(n,l,a,i))&&"group"!=s.type&&"switch_group"!=s.type&&(s=el(s,a,n.not)),To.debug("jsTree:",s));var u=s?hi(s):void 0;return o?[u,i.errors]:(i.errors.length&&console.warn("Errors while importing from SpEL:",i.errors),u)},Na=function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.getType(),a=t.getChildren().map((function(n){return e(n,r,t)}));if("op-or"!=i&&"op-and"!=i||(a=a.reduce((function(e,t){var r=t.type!=i||t.not?[t]:t.children;return[].concat(z(e),z(r))}),[])),"op-not"==i)return 1!=a.length&&r.errors.push("Operator NOT should have 1 child, but got ".concat(a.length,"}")),ka(ka({},a[0]),{},{not:!a[0].not});if("compound"==i){var l=(a=a.filter((function(e){return!("selection"==e.type&&1==e.children.length&&"boolean"==e.children[0].type&&1==e.children[0].val)}))).find((function(e){return"selection"==e.type}));l&&1!=l.children.length&&r.errors.push("Selection should have 1 child, but got ".concat(l.children.length));var s=l?l.children[0]:null,u=a[a.length-1],c="method"==u.type&&"size"==u.val.methodName||"!func"==u.type&&"size"==u.methodName,p="property"==u.type&&"length"==u.val,d=a.filter((function(e){return e!==l&&e!==u})),f={type:"compound",children:d};if((c||p)&&null!=za(d))return{type:"!aggr",filter:s,source:f};if(a=(a=a.filter((function(e){var t="variable"==e.type&&"this"==e.val,r="variable"==e.type&&"root"==e.val;return!(t||r)}))).map((function(e){return"indexer"==e.type&&1==e.children.length?{type:"indexer",val:e.children[0].val,itype:e.children[0].type}:e})),"!func"==u.type){var g={},v=g;do{var h,y;Object.assign(v,u),a=a.filter((function(e){return e!==u})),"!func"==(null===(y=u=a[a.length-1])||void 0===y?void 0:y.type)?(v.obj={},v=v.obj):a.length>1?v.obj={type:"compound",children:a}:v.obj=u}while("!func"==(null===(h=u)||void 0===h?void 0:h.type));return g}}try{t.getRaw?n=t.getRaw():0==t.getValue.length&&(n=t.getValue())}catch(e){To.error("[spel2js] Error in getValue()",e)}if("ternary"==i&&(n=Da(a)),"object"===E(n)&&null!==n&&(n.methodName||n.functionName)&&(n.args=n.args.map((function(n){return e(n,r,t)}))),"list"==i&&(n=n.map((function(n){return e(n,r,t)})),!o&&1==n.length))return n[0];if("constructorref"==i){var m=a.find((function(e){return"qualifiedidentifier"==e.type})),b=null==m?void 0:m.val;return b?{type:"!new",cls:b,args:a.filter((function(e){return"qualifiedidentifier"!=e.type}))}:void r.errors.push("Can't find qualifiedidentifier in constructorref children: ".concat(JSON.stringify(a)))}if("typeref"==i){var O=a.find((function(e){return"qualifiedidentifier"==e.type})),_=null==O?void 0:O.val;return _?(a.filter((function(e){return"qualifiedidentifier"!=e.type})),{type:"!type",cls:_}):void r.errors.push("Can't find qualifiedidentifier in typeref children: ".concat(JSON.stringify(a)))}if("function"==i||"method"==i){var w=n,S=w.functionName,F=w.methodName,j=w.args;return{type:"!func",methodName:S||F,isVar:"function"==i,args:j}}return{type:i,children:a,val:n}},Da=function(e){var t=[];return function e(r){var n=$(r,3),o=n[0],i=n[1],a=n[2];t.push([o,i]),"ternary"==(null==a?void 0:a.type)?e(a.children):t.push([void 0,a])}(e),t},Va=function(e){var t={},r=function(r){var n=e.operators[r];if(n.spelOps)n.spelOps.forEach((function(e){var n=e;t[n]||(t[n]=[]),t[n].push(r)}));else if(n.spelOp){var o=n.spelOp;t[o]||(t[o]=[]),t[o].push(r)}else To.log("[spel] No spelOp for operator ".concat(r))};for(var n in e.operators)r(n);var o={};for(var i in e.conjunctions)o[e.conjunctions[i].spelConj||i.toLowerCase()]=i;var a,l={},s=La(dp(e));try{var u=function(){var e=$(a.value,2),t=e[0],r=e[1],n=[],o=r.spelFunc;if("string"==typeof o){var i=Object.keys(r.args||{}).reverse().filter((function(e){return!!r.args[e].isOptional||null!=r.args[e].defaultValue})),s=o.replace(/\${(\w+)}/g,(function(e,t){return"?"})),u=i.reduce((function(e,t){return[].concat(z(e),[[t].concat(z(e[e.length-1]||[]))])}),[]).map((function(e){return o.replace(/(?:, )?\${(\w+)}/g,(function(t,r){return e.includes(r)?"":t})).replace(/\${(\w+)}/g,(function(e,t){return"?"}))}));n=[s].concat(z(u))}var c,p=La(n);try{for(p.s();!(c=p.n()).done;){var d=c.value;l[d]||(l[d]=[]),l[d].push(t)}}catch(e){p.e(e)}finally{p.f()}};for(s.s();!(a=s.n()).done;)u()}catch(e){s.e(e)}finally{s.f()}var c={};for(var p in e.widgets){var d=e.widgets[p],f=d.spelImportFuncs;if(d.type,f){var g,v=La(f);try{for(v.s();!(g=v.n()).done;){var h=g.value;if("string"==typeof h){var y=h.replace(/\${(\w+)}/g,(function(e,t){return"?"})),m=z(h.matchAll(/\${(\w+)}/g)).map((function(e){var t=$(e,2);return t[0],t[1]}));c[y]||(c[y]=[]),c[y].push({w:p,argsOrder:m})}}}catch(e){v.e(e)}finally{v.f()}}}var b={};for(var O in e.operators){var _=e.operators[O].spelOp;if(null!=_&&_.includes("${0}")){var w=_.replace(/\${(\w+)}/g,(function(e,t){return"?"})),S=z(_.matchAll(/\${(\w+)}/g)).map((function(e){var t=$(e,2);return t[0],t[1]}));b[w]||(b[w]=[]),b[w].push({op:O,argsOrder:S})}}return b[pa.replace(/\${(\w+)}/g,(function(e,t){return"?"}))]=[{op:"!compare",argsOrder:["0","1"]}],{operators:t,conjunctions:o,funcs:l,valueFuncs:c,opFuncs:b}},$a=function e(t,r,n,o){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(t){t._groupField=null!==(i=t._groupField)&&void 0!==i?i:null==a?void 0:a._groupField;var l,s=!0;if(0===t.type.indexOf("op-")||"matches"===t.type)l=Ma(t,r,n,o,a);else if("!aggr"==t.type){var u,c=e(t.source,r,n,o,t);t._groupField=null==c?void 0:c.value;var p=e(t.filter,r,n,o,t);"rule"==(null===(u=p)||void 0===u?void 0:u.type)&&(p=el(p,n,t.filter.not)),l={groupFilter:p,groupFieldValue:c},a||(l=void 0,o.errors.push("Unexpected !aggr in root"),s=!1)}else if("ternary"==t.type){var d={};t.val.forEach((function(e){var i=$(e,2),a=i[0],l=i[1],s=Ya(a,l,r,n,o,t);s&&(d[s.id]=s)})),l={type:"switch_group",id:io(),children1:d,properties:{}}}if(!l&&s&&(l=qa(t,r,n,o,a)),l&&!l.type&&!a){var f=Ja(t,r,n,o);f?l=f:(l=void 0,o.errors.push("Can't convert rule of type ".concat(t.type,", it looks like var/literal")))}return l}},Ma=function e(t,r,n,o){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=t.type.startsWith("op-")?t.type.slice(3):t.type;if(("minus"==l||"plus"==l)&&1==t.children.length){var s=t.negative;return"minus"==l&&(s=!s),t.children[0].negative=s,$a(t.children[0],r,n,o,a)}var u="and"==l&&2==t.children.length&&"op-ge"==t.children[0].type&&"op-le"==t.children[1].type,c="or"==l&&2==t.children.length&&"op-lt"==t.children[0].type&&"op-gt"==t.children[1].type;if(u||c){var p=$(t.children[0].children,2),d=p[0],f=p[1],g=$(t.children[1].children,2),v=g[0],h=g[1];if(Xa(d,v,t,r,n,o,a)){f.val,h.val;var y={type:"op-between",children:[d,f,h],not:c};return y._groupField=null==a?void 0:a._groupField,e(y,r,n,o,a)}}var m=r.operators[l];"eq"==l&&"null"==t.children[1].type?m=["is_null"]:"ne"==l&&"null"==t.children[1].type?m=["is_not_null"]:"le"==l&&"string"==t.children[1].type&&""==t.children[1].val?m=["is_empty"]:"gt"==l&&"string"==t.children[1].type&&""==t.children[1].val?m=["is_not_empty"]:"between"==l&&(m=["between"]);var b=function(){var e,i=t.children.map((function(e){return $a(e,r,n,o,t)}));return i.length>=2&&"!compare"==(null===(e=i)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.type)&&(i=i[0].children),i};if("and"==l||"or"==l){var O={};b().forEach((function(e){if(e){var t=io();e.id=t,null!=e.type?O[t]=e:o.errors.push("Bad item in AND/OR: ".concat(JSON.stringify(e)))}})),i={type:"group",id:io(),children1:O,properties:{conjunction:r.conjunctions[l],not:t.not}}}else if(m){var _,w,S,E=b(),F=E[0],j=E.slice(1),L=null==F||null===(_=F.groupFieldValue)||void 0===_?void 0:_.value,C=null===(w=j)||void 0===w?void 0:w[0],I=m[0];if(m.length>1){var k,x,T=(null===(k=E[0])||void 0===k?void 0:k.valueType)||(null===(x=E[1])||void 0===x?void 0:x.valueType),R=null==F?void 0:F.value,A=m.map((function(e){return{op:e,widget:Xu(n,R,e)}}));if(To.warn("[spel] Spel operator ".concat(l," can be mapped to ").concat(m,"."),"widgets:",A,"vals:",E,"valueType=",T),"eq"==l||"ne"==l){var P=A.find((function(e){e.op;var t=e.widget;return t&&"field"!=t}));P&&(I=P.op)}}null!=F&&F.groupFieldValue&&(C&&C.groupFieldValue&&"field"==C.groupFieldValue.valueSrc&&C.groupFieldValue.value==L?(I="all",j=[]):"equal"==I&&"value"==C.valueSrc&&"number"==C.valueType&&0==C.value?(I="none",j=[]):"greater"==I&&"value"==C.valueSrc&&"number"==C.valueType&&0==C.value&&(I="some",j=[]));var N=n.operators[I],D=n.operators[null===(S=N)||void 0===S?void 0:S.reversedOp],V=t.not&&["between"].includes(I),M=!!D&&(!!n.settings.reverseOperatorsForNot||V);(t.not&&M||V)&&(I=N.reversedOp,N=n.operators[I],t.not=!t.not);var z=!!t.not;if(t.not=!1,F)if(F.groupFieldValue)"field"!=F.groupFieldValue.valueSrc&&o.errors.push("Expected group field ".concat(JSON.stringify(F))),i=Ha(F,I,j,n,o);else{"field"!=F.valueSrc&&"func"!=F.valueSrc&&o.errors.push("Expected field/func at LHS, but got ".concat(JSON.stringify(F)));var q=F.value;i=Ka(n,o,q,I,j,t)}z&&("group"!==i.type?i=el(i,n,!0):i.properties.not=!i.properties.not)}else a||(i=Ja(t,r,n,o));return i},za=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1,o=e.map((function(e){if("variable"==e.type||"property"==e.type||"indexer"==e.type&&"string"==e.itype)return e.val;var o,i;n=!0,r&&(null==t||null===(o=t.errors)||void 0===o||null===(i=o.push)||void 0===i||i.call(o,"Unexpected item in field path compound: ".concat(JSON.stringify(e))))}));return n?void 0:o},qa=function e(t,r,n,o){var i,a,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(null!=t){var s=n.settings.fieldSeparator;if(t._groupField=null!==(i=t._groupField)&&void 0!==i?i:null==l?void 0:l._groupField,"variable"==t.type||"property"==t.type){var u=hp(n,t.val,t._groupField),c=Cp(n,u),p="variable"==t.type;return{valueSrc:"field",valueType:null==c?void 0:c.type,isVariable:p,value:u}}if("compound"==t.type){var d=za(t.children,o);if(d){var f,g=hp(n,d.join(s),t._groupField),v=Cp(n,g),h="variable"==(null===(f=t.children)||void 0===f||null===(f=f[0])||void 0===f?void 0:f.type);return{valueSrc:"field",valueType:null==v?void 0:v.type,isVariable:h,value:g}}}else{if(xa[t.type]){var y=t.val,m=xa[t.type];return t.negative&&(y=-y),{valueSrc:"value",valueType:m,value:y}}if("!new"==t.type&&Ta[t.cls.at(-1)]){var b=t.args.map((function(i){return e(i,r,n,o,t)})),O=null==b?void 0:b[0],_=Ta[t.cls.at(-1)];return ka(ka({},O),{},{valueType:_})}if("list"==t.type){var w,S=t.val.map((function(i){return e(i,r,n,o,t)}));return S.length&&(null===(w=S[0])||void 0===w||w.valueType),{valueSrc:"value",valueType:"multiselect",value:S.map((function(e){return null==e?void 0:e.value}))}}if("op-plus"===t.type&&"ternary"===(null==l?void 0:l.type)&&"case_value"===(null===(a=n.settings.caseValueField)||void 0===a?void 0:a.type))return Qa(t,r,n,o)}var E=Ba(t,r,n,o,l);if(void 0!==E)return E;o.errors.push("Can't convert arg of type ".concat(t.type))}},Wa=function e(t,r){var n,o=[],i="",a=t.type,l=t.methodName,s=(t.val,t.obj),u=t.args,c=t.isVar,p=t.cls,d=t.children,f=null==d?void 0:d[d.length-1],g=r[r.length-1];if("!func"===a){for(var v=s;v;){var h,y=$(e(ka(ka({},v),{},{obj:null}),[{}]),2),m=y[0],b=y[1];if("?"!==m){var O={s:g.s,params:z(g.params),objs:z(g.objs)};g.objs.unshift("?"),g.params.unshift(v),r.push(O),g=r[r.length-1]}g.objs.unshift(m),(h=g.params).unshift.apply(h,z(b)),v="!func"===v.type?v.obj:null}var _,w=La(r);try{for(w.s();!(_=w.n()).done;){var S,E=_.value;o=[].concat(z((null==E?void 0:E.params)||[]),z(u||[])),i="",null!=E&&null!==(S=E.objs)&&void 0!==S&&S.length&&(i+=E.objs.join(".")+"."),i+=(c?"#":"")+l,i+="("+(u||[]).map((function(e){return"?"})).join(", ")+")",E.s=i,E.params=o}}catch(e){w.e(e)}finally{w.f()}}else"!new"===a?(o=u||[],i="new ".concat(p.join("."),"(").concat(o.map((function(e){return"?"})).join(", "),")")):"!type"===a?i="T(".concat(p.join("."),")"):"compound"===a&&"property"===f.type&&(n=f.val,["length"].includes(n))?i=d.map((function(t){var r;if(t===f)return t.val;var n=$(e(ka(ka({},t),{},{obj:null}),[{}]),2),i=n[0],a=n[1];return(r=o).push.apply(r,z(a)),i})).join("."):(o=[t],i="?");return g&&(g.s=i,g.params=o),[i,o]},Ba=function(e,t,r,n){var o,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=function(o){return $a(o,t,r,n,e)},l=function(e){var t=[{s:"",params:[],objs:[]}];return Wa(e,t),t.map((function(e){return{s:e.s,params:e.params}})).reverse().filter((function(e){var t=e.s;return""!==t&&"?"!==t}))}(e),s=null==l||null===(o=l[0])||void 0===o?void 0:o.s;l.length&&To.debug("Signatures for ",e,":",s,l);var u=Ua(e,t,r,n,i,l,a);if(void 0!==u)return u;var c,p,d,f=Ga(e,t,r,n,i,l,a);if(void 0!==f)return f;var g,v=La(l);try{var h=function(){var e=g.value,n=e.s,o=e.params,i=t.funcs[n];if(i){c=i[0];var l=(p=mp(r,c)).spelFunc,s=o.map(a),u=z(l.matchAll(/\${(\w+)}/g)).map((function(e){var t=$(e,2);return t[0],t[1]}));return d=Object.fromEntries(u.map((function(e,t){return[e,s[t]]}))),1}};for(v.s();!(g=v.n()).done&&!h(););}catch(e){v.e(e)}finally{v.f()}if(!c){var y,m=La(dp(r));try{for(m.s();!(y=m.n()).done;){var b=$(y.value,2),O=b[0],_=b[1];if(_.spelImport){var w=void 0;try{w=_.spelImport(e)}catch(e){}if(w)for(var S in p=mp(r,c=O),d={},w)d[S]=a(w[S])}}}catch(e){m.e(e)}finally{m.f()}}if(c){var E={};for(var F in p.args){var j,L=p.args[F],C=d[F];if(void 0===C)if(void 0===(C=null==L?void 0:L.defaultValue)){if(null==L||!L.isOptional)return void n.errors.push("No value for arg ".concat(F," of func ").concat(c))}else C={value:C,valueSrc:null!==(j=C)&&void 0!==j&&j.func?"func":"value",valueType:L.type};C&&(E[F]=C)}return{valueSrc:"func",value:{func:c,args:E},valueType:p.returnType}}e.methodName&&n.errors.push("Signature ".concat(s," - failed to convert"))},Ua=function(e,t,r,n,o,i,a){var l,s,u,c=[];for(var p in r.widgets){var d=r.widgets[p].spelImportFuncs;if(d)for(var f=0;f<d.length;f++){var g=d[f];if(Ra(g)){var v={};if(Io(g,e,v)){for(var h in v)v[h]=a(v[h]);c.push({s:"widgets.".concat(p,".spelImportFuncs[").concat(f,"]"),w:p,argsObj:v})}}}}var y,m=La(i);try{for(m.s();!(y=m.n()).done;){var b,O=y.value,_=O.s,w=O.params,S=La(t.valueFuncs[_]||[]);try{var E=function(){var e=b.value,t=e.w,r=e.argsOrder,n=w.map(a),o=Object.fromEntries(r.map((function(e,t){return[e,n[t]]})));c.push({s:_,w:t,argsObj:o})};for(S.s();!(b=S.n()).done;)E()}catch(e){S.e(e)}finally{S.f()}}}catch(e){m.e(e)}finally{m.f()}for(var F=0,j=c;F<j.length;F++){var L=j[F],C=L.s,I=L.w,k=L.argsObj,x=r.widgets[I],T=x.spelImportValue,R=x.type;for(var A in u=I,s=C,l=[],k)["value"].includes(k[A].valueSrc)||l.push("".concat(A," has unsupported value src ").concat(k[A].valueSrc));var P=k.v.value;if(T&&!l.length){var N=$(T.call(r.ctx,k.v,x,k),2);P=N[0],(l=N[1])&&!Array.isArray(l)&&(l=[l])}if(!l.length)return{valueSrc:"value",valueType:R,value:P}}u&&l.length&&n.errors.push("Signature ".concat(s," - looks like convertable to ").concat(u,", but: ").concat(l.join("; ")))},Ga=function(e,t,r,n,o,i,a){var l,s,u,c,p=La(i);try{for(p.s();!(c=p.n()).done;){var d,f=c.value,g=f.s,v=f.params,h=La(t.opFuncs[g]||[]);try{var y,m=function(){var t,i=d.value,c=i.op,p=i.argsOrder,f=v.map(a);if(s=c,"!compare"===c){if(o.type.startsWith("op-")&&2==o.children.length&&"number"==o.children[1].type&&0===o.children[1].val)return{v:{type:"!compare",children:f}};l.push("Result of compareTo() should be compared to 0")}u=g,l=[];var h=r.operators[s],y=(h.spelOp,h.valueTypes),m=Object.fromEntries(p.map((function(e,t){return[e,f[t]]}))),b=m[0],O=Object.keys(m).filter((function(e){return parseInt(e)>0})).map((function(e){return m[e]})),_=null===(t=f.filter((function(e){return!!e})).find((function(e){return"value"===e.valueSrc})))||void 0===t?void 0:t.valueType;if(y&&_&&!y.includes(_)&&l.push("Op supports types ".concat(y,", but got ").concat(_)),!l.length)return{v:Ka(r,n,b,s,O,e)}};for(h.s();!(d=h.n()).done;)if(y=m())return y.v}catch(e){h.e(e)}finally{h.f()}}}catch(e){p.e(e)}finally{p.f()}s&&l.length&&n.errors.push("Signature ".concat(u," - looks like convertable to ").concat(s,", but: ").concat(l.join("; ")))},Ka=function(e,t,r,n,o,i){var a,l;if(!o.filter((function(e){return void 0===e})).length){var s=null!==(a=r)&&void 0!==a&&a.func?"func":"field";Ra(r)&&r.valueSrc&&(s=r.valueSrc,r=r.value);var u=Cp(e,r);if(u){var c=Cp(e,null==i?void 0:i._groupField),p="!group"==u.type,d=(p&&u.mode,"!group"==(null==c?void 0:c.type)),f=e.operators[n],g=e.operators[null===(l=f)||void 0===l?void 0:l.reversedOp],v=(null==i?void 0:i.not)&&["between"].includes(n),h=!!g&&(!!e.settings.reverseOperatorsForNot||v||!p&&d);((null==i?void 0:i.not)&&h||v)&&(n=f.reversedOp,f=e.operators[n],i.not=!i.not);var y=!(null==i||!i.not),m=Xu(e,r,n),b=e.widgets[m||u.mainWidget],O=o.map((function(e){return e.asyncListValues})).filter((function(e){return null!=e})),_=O.length?O[0]:void 0,w={type:"rule",id:io(),properties:ka({field:r,fieldSrc:s,operator:n,value:o.map((function(e){return e.value})),valueSrc:o.map((function(e){return e.valueSrc})),valueType:o.map((function(e){return"value"==e.valueSrc&&((null==b?void 0:b.type)||(null==u?void 0:u.type))||e.valueType}))},_?{asyncListValues:_}:{})};return y&&(w=el(w,e,i.not)),w}t.errors.push("No config for field ".concat(r))}},Ha=function(e,t,r,n,o){var i=e.groupFilter,a=e.groupFieldValue;if("field"!=a.valueSrc)throw"Bad groupFieldValue: ".concat(JSON.stringify(a));var l=a.value,s=Ka(n,o,l,t,r);if(s){var u,c=Cp(n,l),p=null==c?void 0:c.mode;return(u="group"===(null==i?void 0:i.type)?ka(ka({},i||{}),{},{type:"rule_group",properties:ka(ka(ka({},s.properties),(null==i?void 0:i.properties)||{}),{},{mode:p})}):ka(ka({},s||{}),{},i?{type:"rule_group",children1:[i],properties:ka(ka({},s.properties),{},{mode:p})}:{type:"rule_group",properties:ka(ka({},s.properties),{},{mode:p})})).id||(u.id=io()),u}},Xa=function(e,t,r,n,o,i){if(e.type==t.type){if("!aggr"==e.type){var a=$([e.source,t.source].map((function(e){return qa(e,n,o,i,r)})),2),l=a[0],s=a[1];return l.value==s.value}var u=$([e,t].map((function(e){return qa(e,n,o,i,r)})),2),c=u[0],p=u[1];return c.value==p.value}return!1},Ja=function(e,t,r,n){var o={},i=Ya(null,e,t,r,n);return i&&(o[i.id]=i),{type:"switch_group",id:io(),children1:o,properties:{}}},Ya=function(e,t,r,n,o){var i,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=Za(n,o,r,t,a);return e?(i=$a(e,r,n,o,a))&&i.type?("group"!=i.type&&(i=el(i,n)),i.type="case_group"):(o.errors.push("Unexpected case: ".concat(JSON.stringify(i))),i=void 0):i={id:io(),type:"case_group",properties:{}},i&&(i.properties=ka(ka({},i.properties),l)),i},Qa=function(e,t,r,n){var o=[];return function i(a){a.map((function(a){if("op-plus"===a.type)i(a.children);else{var l=qa(a,t,r,n,e);l?o.push(l):n.errors.push("Can't convert ".concat(a.type," in concatenation"))}}))}(e.children),{valueSrc:"value",valueType:"case_value",value:o}},Za=function(e,t,r,n){var o,i,a,l,s,u,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,p={},d=Cp(e,"!case_value");"op-plus"===(null==n?void 0:n.type)&&"case_value"===(null===(o=e.settings.caseValueField)||void 0===o?void 0:o.type)?(l="case_value",a=Qa(n,r,e,t)):(l=null==d?void 0:d.mainWidget,s=e.widgets[l],(a=qa(n,r,e,t,c))&&"value"===a.valueSrc&&(a.valueType=(null===(u=s)||void 0===u?void 0:u.type)||(null==d?void 0:d.type)||a.valueType));var f=e.widgets[l];if("case_value"===l){var g=null==f?void 0:f.spelImportValue;if(g){var v,h=$(g.call(e.ctx,a),2),y=h[0];h[1].map((function(e){return t.errors.push(e)})),null!=y&&(p={value:[y],valueSrc:["value"],valueType:[null!==(v=null==f?void 0:f.type)&&void 0!==v?v:"case_value"],field:"!case_value"})}}else null!=a&&null!=(null===(i=a)||void 0===i?void 0:i.value)&&(p={value:[a.value],valueSrc:[a.valueSrc],valueType:[a.valueType],field:"!case_value"});return p},el=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"group",id:io(),children1:A({},e.id,e),properties:{conjunction:ul(t),not:r||!1}}};function tl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nl=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.settings.defaultField,o=(r?ol(e,r):n)||t&&xp(e,r)||null;return null==o||"string"==typeof o||ho(o)||(o=bi(o)),o},ol=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!r)return null;var n=(null==e||null===(t=e.settings)||void 0===t?void 0:t.fieldSeparator)||".",o=Cp(e,r),i=null==o?void 0:o.defaultField;return i&&(i=[].concat(z(wp(r)),[i]).join(n)),i},il=function(e){var t;return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(null===(t=e.settings.fieldSources)||void 0===t?void 0:t[0])||"field"},al=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=Cp(e,t),o=(null==n?void 0:n.operators)||[],i=e.settings.defaultOperator;i&&!o.includes(i)&&(i=null);var a=null==n?void 0:n.defaultOperator,l=null==n?void 0:n.ownDefaultOperator,s=r?$u(e,t):null;return l||i||a||s},ll=function(e,t,r){var n=t?Ip(e,t,r):null;return n&&n.options?new no.Map(n.options&&n.options.defaults||{}):null},sl=function(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=null,u=null,c=null,p=e.settings.showErrorMessage;i?(c=null==i||null===(t=i.properties)||void 0===t?void 0:t.fieldSrc,s=null==i||null===(r=i.properties)||void 0===r?void 0:r.field,u=null==i||null===(n=i.properties)||void 0===n?void 0:n.operator):a?(c=(s=nl(e,l,o))?ho(s)?"func":"field":il(e),u=al(e,s,!0)):c=il(e);var d=new no.Map({fieldSrc:c,field:s,operator:u,value:new no.List,valueSrc:new no.List,operatorOptions:ll(e,u,s)});if(p&&(d=d.set("valueError",new no.List)),s&&u){var f=ju(e,e,d,s,u,"operator",!1),g=f.newValue,v=f.newValueSrc,h=f.newValueType,y=f.newValueError,m=f.newFieldError;d=d.set("value",g).set("valueSrc",v).set("valueType",h),p&&(d=d.set("valueError",y).set("fieldError",m))}var b=Cp(e,s);if("!group"===(null==b?void 0:b.type)){var O=ul(e,b);d=d.set("conjunction",O)}return d},ul=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=(null===(t=n=Cp(e,n))||void 0===t?void 0:t.conjunctions)||Object.keys(e.conjunctions);return 1==o.length?o[0]:(null===(r=n)||void 0===r?void 0:r.defaultConjunction)||e.settings.defaultConjunction||e.settings.defaultGroupConjunction||o[0]},cl=function(e){return ul(e)},pl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new no.Map({conjunction:ul(e,t),not:!1})},dl=function(e,t){return"group"==(null==t?void 0:t.type)?pl(e):sl(e,null,t)},fl=function(e,t){return A({},e,new no.Map({type:"rule",id:e,properties:sl(t)}))},gl=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new no.Map({type:"group",id:io(),children1:new no.OrderedMap(t?rl({},fl(io(),e)):{}),properties:pl(e)})},vl=function(e){return yo(e)?e:hl([e])},hl=function(e){return yo(e)?e:new no.List(e)},yl=function(){return new no.Map};function ml(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return bl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bl(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ol(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ol(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ol(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wl=function(e,t){var r={errors:[],settings:{isForDisplay:arguments.length>2&&void 0!==arguments[2]&&arguments[2],isDebugMode:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},n=rp(t,void 0,!1),o=Sl(e,n,r,null);return r.errors.length&&console.warn("Errors while exporting to string:",r.errors),o},Sl=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e){var o=e.get("type");return e.get("children1"),"group"===o||"rule_group"===o?El(e,t,r,n):"rule"===o?Fl(e,t,r,n):void 0}},El=function(e,t,r){var n,o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=r.settings,l=a.isForDisplay,s=a.isDebugMode,u=e.get("type"),c=e.get("properties")||new vr,p=c.get("mode"),d=e.get("children1")||new $r,f="rule_group"===u,g=f&&"array"==p?c.get("field"):null,v="rule_group"===u?c.get("operator"):null,h=v?null!==(n=null===(o=t.operators[v])||void 0===o?void 0:o.cardinality)&&void 0!==n?n:1:void 0,y=f&&"array"===p&&h>=1,m=c.get("not"),b=d.map((function(e){return Sl(e,t,r,g)})).filter((function(e){return void 0!==e}));if(y||b.size||s){var O=c.get("conjunction");O||(O=cl(t));var _,w=t.conjunctions[O],S=b.size?w.formatConj.call(t.ctx,b,O,m,l):null;if(g){var E=Fl(e,t,r,i,!0);if(E){var F,j=E.pop(),L=[S].concat(z(E));_=(F=t.settings.formatAggr).call.apply(F,[t.ctx].concat(z(L))),j&&(_=t.settings.formatReverse.call(t.ctx,_,null,null,null,null,l))}}else _=S;return s&&null==_&&(_="?"),_}},Fl=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=r.settings,a=i.isForDisplay,l=i.isDebugMode,s=e.get("properties")||new vr,u=s.get("field"),c=s.get("fieldSrc"),p=s.get("operator"),d=s.get("operatorOptions");if(null!=u&&null!=p||l){var f=Cp(t,u)||{},g=Ip(t,p,u)||{},v=g.reversedOp,h=Ip(t,v,u)||{},y=!1,m=g.formatOp;if(!m&&v&&(m=h.formatOp)){y=!0;var b=[v,p];p=b[0],v=b[1];var O=[h,g];g=O[0],h=O[1]}if(l&&!p&&(p="?"),m||(m=function(e,t,r){var n,o=r.settings.isDebugMode,i=(null==t?void 0:t.labelForFormat)||e,a=fo(t);return 0==a?n=function(e,t,r,n,o,a,l,s){return"".concat(e," ").concat(i)}:1==a?n=function(e,t,r,n,a,l,s,u){return o&&"?"===t&&"?"===r?e&&"?"!==e?"".concat(e," ?"):"?":"".concat(e," ").concat(i," ").concat(r)}:2==a&&(n=function(e,t,r,n,o,a,l,s){var u,c,p=null==r||null===(u=r.first)||void 0===u?void 0:u.call(r),d=null==r||null===(c=r.get)||void 0===c?void 0:c.call(r,1);return"".concat(e," ").concat(i," ").concat(p," AND ").concat(d)}),n}(p,g,r)),m){var _="func"===c?Cl(t,r,u,n):Ll(t,r,u,n);if(null!=_){var w=function(e,t,r,n,o){var i,a,l=r.settings,s=(l.isForDisplay,l.isDebugMode),u=t.get("field"),c=t.get("valueSrc"),p=t.get("valueType"),d=Cp(e,u)||{},f=n||t.get("operator"),g=Ip(e,f,u)||{},v=fo(g),h=t.get("value"),y=t.get("asyncListValues"),m=[],b=[];return null!=h&&!((a=h.map((function(t,n){var i=c?c.get(n):null,a=p?p.get(n):null,l=s?t:ac(t,i,e),v=Xu(e,u,f,i),h=kp(e,u,f,v,i,{forExport:!0}),O=jl(e,r,l,i,a,h,d,f,g,o,y);return void 0!==O&&(m.push(i),b.push(a)),O}))).filter((function(e){return void 0===e})).size>0)&&a.size===v&&(i=1==v?a.first():a),s&&!i&&(i=v>1?new $r(Array.from({length:v}).map((function(e,t){var r,n;return null!==(r=null===(n=a)||void 0===n?void 0:n.get(t))&&void 0!==r?r:"?"}))):"?"),[i,m.length>1?m:m[0],b.length>1?b:b[0]]}(t,s,r,p,n),S=$(w,3),E=S[0],F=S[1],j=S[2];if(void 0!==E){var L=[_,p,E,F,j,po(g,so),d,a,f,y];if(o)return L;var C,I=(C=m).call.apply(C,[t.ctx].concat(L));return y&&(I=t.settings.formatReverse.call(t.ctx,I,p,v,g,h,a)),I}}}}},jl=function(e,t,r,n,o,i,a,l,s){var u,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,p=arguments.length>10?arguments[10]:void 0,d=t.settings,f=d.isForDisplay,g=d.isDebugMode;if(void 0===r)return g?"array"===(null==i?void 0:i.jsType)?[]:"?":void 0;if("field"==n)u=Ll(e,t,r,c);else if("func"==n)u=Cl(e,t,r,c);else if("function"==typeof(null==i?void 0:i.formatValue)){var v=i.formatValue,h=[r,_l(_l({},No()(a,["fieldSettings","listValues"])),{},{asyncListValues:p}),po(i,lo),f];if(l&&(h.push(l),h.push(s)),"field"==n){var y=Cp(e,r)||{};h.push(y)}u=v.call.apply(v,[e.ctx].concat(h))}else u=r;return u},Ll=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=t.settings,a=i.isForDisplay,l=i.isDebugMode,s=e.settings,u=(s.fieldSeparator,s.fieldSeparatorDisplay),c=null;if(r){var p=Cp(e,r)||{},d=wp(r,e),f=qu(r,e,o?n:null),g=f?f.join(u):null,v=p.label2||g;c=(0,e.settings.formatField)(Ju(r,e,t,o?n:null,{useTableName:!0}),d,v,p,e,a)}else l&&(c="?");return c},Cl=function(e,t,r){var n,o,i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=t.settings,s=l.isForDisplay,u=l.isDebugMode,c=null==r||null===(n=r.get)||void 0===n?void 0:n.call(r,"func");if(!c)return u?"?()":void 0;var p=null===(o=r.get)||void 0===o?void 0:o.call(r,"args"),d=mp(e,c);if(d||u){var f,g=wp(c,e),v=g[g.length-1],h=s&&(null==d?void 0:d.label)||v,y={},m=[],b=[],O={},_=ml(d?Object.keys(d.args||{}):(null==p||null===(i=p.keySeq)||void 0===i?void 0:i.call(p).toArray())||[]);try{for(_.s();!(f=_.n()).done;){var w,S=f.value,E=null==d?void 0:d.args[S],F=Cp(e,E),j=E||{},L=j.defaultValue,C=j.isOptional,I=null!=L&&L.func?"func":"value",k=s&&(null==E?void 0:E.label)||S,x=p?p.get(S):void 0,T=x?x.get("value"):void 0,R=x?x.get("valueSrc"):void 0;"func"!==R&&null!==(w=T)&&void 0!==w&&w.toJS&&(T=T.toJS());var A=x?x.get("asyncListValues"):void 0,P=jl(e,t,T,R,null==E?void 0:E.type,F,E,null,null,a,A);null!=T&&void 0===P&&"func"!=R&&t.errors.push("Can't format value of arg ".concat(S," for func ").concat(c));var N=void 0;if(void 0===P&&!C&&null!=L&&void 0===(N=jl(e,t,L,I,null==E?void 0:E.type,F,E,null,null,a,A)))return void("func"!=I&&t.errors.push("Can't format default value of arg ".concat(S," for func ").concat(c)));var D=null!=P?P:N;if(void 0!==D){if(m.length){var V,M=ml(S);try{for(M.s();!(V=M.n()).done;){var z=$(V.value,2),q=z[0];z[1],y[q]=void 0}}catch(e){M.e(e)}finally{M.f()}m=[]}y[S]=D,O[k]=D}else C||b.push(S),m.push([S,k])}}catch(e){_.e(e)}finally{_.f()}if(!b.length||u){var W=null;if("function"==typeof(null==d?void 0:d.formatFunc)){var B=d.formatFunc,U=[y,s];W=B.call.apply(B,[e.ctx].concat(U))}else{var G=Object.entries(s?O:y).map((function(e){var t=$(e,2),r=t[0],n=t[1];return s?"".concat(r,": ").concat(n):"".concat(n)})).join(", ");W="".concat(h,"(").concat(G,")")}return W}}else t.errors.push("Func ".concat(c," is not defined in config"))},Il="EMPTY_GROUP",kl="EMPTY_RULE_GROUP",xl="EMPTY_QUERY",Tl="EMPTY_CASE",Rl="NO_CONFIG_FOR_FIELD",Al="NO_CONFIG_FOR_OPERATOR",Pl="NO_CONFIG_FOR_FUNCTION",Nl="INVALID_VALUE",Dl="INVALID_FUNC_ARG_VALUE",Vl="UNSUPPORTED_FIELD_TYPE",$l="UNSUPPORTED_OPERATOR_FOR_FIELD",Ml="INVALID_VALUE_SRC",zl="INCOMPLETE_RULE",ql="INCOMPLETE_LHS",Wl="INCOMPLETE_RHS",Bl="BAD_MULTISELECT_VALUES",Ul="BAD_SELECT_VALUE",Gl="INCORRECT_VALUE_TYPE",Kl="INCORRECT_VALUE_JS_TYPE",Hl="VALUE_LENGTH_CONSTRAINT_FAIL",Xl="VALUE_MIN_CONSTRAINT_FAIL",Jl="VALUE_MAX_CONSTRAINT_FAIL",Yl="NO_CONFIG_FOR_FIELD_VALUE",Ql="CANT_COMPARE_FIELD_WITH_ITSELF",Zl="CANT_COMPARE_FIELD_WITH_FIELD",es="INCORRECT_FIELD_TYPE",ts="UNSUPPORTED_FUNCTION_FOR_FIELD",rs="REQUIRED_FUNCTION_ARG",ns="INCORRECT_FUNCTION_RETURN_TYPE",os="INVALID_RANGE",is="ITEM_POSITION",as="ITEM_POSITION_ROOT",ls="ITEM_POSITION_WITH_INDEX_PATH",ss="ITEM_POSITION_IN_CASE",us="range";const cs=e=>"string"==typeof e,ps=()=>{let e,t;const r=new Promise(((r,n)=>{e=r,t=n}));return r.resolve=e,r.reject=t,r},ds=e=>null==e?"":""+e,fs=/###/g,gs=e=>e&&e.indexOf("###")>-1?e.replace(fs,"."):e,vs=e=>!e||cs(e),hs=(e,t,r)=>{const n=cs(t)?t.split("."):t;let o=0;for(;o<n.length-1;){if(vs(e))return{};const t=gs(n[o]);!e[t]&&r&&(e[t]=new r),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++o}return vs(e)?{}:{obj:e,k:gs(n[o])}},ys=(e,t,r)=>{const{obj:n,k:o}=hs(e,t,Object);if(void 0!==n||1===t.length)return void(n[o]=r);let i=t[t.length-1],a=t.slice(0,t.length-1),l=hs(e,a,Object);for(;void 0===l.obj&&a.length;)i=`${a[a.length-1]}.${i}`,a=a.slice(0,a.length-1),l=hs(e,a,Object),l&&l.obj&&void 0!==l.obj[`${l.k}.${i}`]&&(l.obj=void 0);l.obj[`${l.k}.${i}`]=r},ms=(e,t)=>{const{obj:r,k:n}=hs(e,t);if(r)return r[n]},bs=(e,t,r)=>{for(const n in t)"__proto__"!==n&&"constructor"!==n&&(n in e?cs(e[n])||e[n]instanceof String||cs(t[n])||t[n]instanceof String?r&&(e[n]=t[n]):bs(e[n],t[n],r):e[n]=t[n]);return e},Os=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ws=e=>cs(e)?e.replace(/[&<>"'\/]/g,(e=>_s[e])):e,Ss=[" ",",","?","!",";"],Es=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}(20),Fs=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const n=t.split(r);let o=e;for(let e=0;e<n.length;){if(!o||"object"!=typeof o)return;let t,i="";for(let a=e;a<n.length;++a)if(a!==e&&(i+=r),i+=n[a],t=o[i],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&a<n.length-1)continue;e+=a-e+1;break}o=t}return o},js=e=>e&&e.replace("_","-"),Ls={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class Cs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Ls,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,n){return n&&!this.debug?null:(cs(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Cs(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Cs(this.logger,e)}}var Is=new Cs;class ks{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const r=this.observers[e].get(t)||0;this.observers[e].set(t,r+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.observers[e]&&Array.from(this.observers[e].entries()).forEach((e=>{let[t,n]=e;for(let e=0;e<n;e++)t(...r)})),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach((t=>{let[n,o]=t;for(let t=0;t<o;t++)n.apply(n,[e,...r])}))}}class xs extends ks{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,i=void 0!==n.ignoreJSONStructure?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],r&&(Array.isArray(r)?a.push(...r):cs(r)&&o?a.push(...r.split(o)):a.push(r)));const l=ms(this.data,a);return!l&&!t&&!r&&e.indexOf(".")>-1&&(e=a[0],t=a[1],r=a.slice(2).join(".")),!l&&i&&cs(r)?Fs(this.data&&this.data[e]&&this.data[e][t],r,o):l}addResource(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const i=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator;let a=[e,t];r&&(a=a.concat(i?r.split(i):r)),e.indexOf(".")>-1&&(a=e.split("."),n=t,t=a[1]),this.addNamespaces(t),ys(this.data,a,n),o.silent||this.emit("added",e,t,r,n)}addResources(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const n in r)(cs(r[n])||Array.isArray(r[n]))&&this.addResource(e,t,n,r[n],{silent:!0});n.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,n,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),n=r,r=t,t=a[1]),this.addNamespaces(t);let l=ms(this.data,a)||{};i.skipCopy||(r=JSON.parse(JSON.stringify(r))),n?bs(l,r,o):l={...l,...r},ys(this.data,a,l),i.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var Ts={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,o){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,r,n,o))})),t}};const Rs={};class As extends ks{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,n;super(),r=e,n=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach((e=>{r[e]&&(n[e]=r[e])})),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=Is.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const r=this.resolve(e,t);return r&&void 0!==r.res}extractFromKey(e,t){let r=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===r&&(r=":");const n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const i=r&&e.indexOf(r)>-1,a=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,r)=>{t=t||"",r=r||"";const n=Ss.filter((e=>t.indexOf(e)<0&&r.indexOf(e)<0));if(0===n.length)return!0;const o=Es.getRegExp(`(${n.map((e=>"?"===e?"\\?":e)).join("|")})`);let i=!o.test(e);if(!i){const t=e.indexOf(r);t>0&&!o.test(e.substring(0,t))&&(i=!0)}return i})(e,r,n));if(i&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:cs(o)?[o]:o};const i=e.split(r);(r!==n||r===n&&this.options.ns.indexOf(i[0])>-1)&&(o=i.shift()),e=i.join(n)}return{key:e,namespaces:cs(o)?[o]:o}}translate(e,t,r){if("object"!=typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof t&&(t={...t}),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const n=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,o=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:i,namespaces:a}=this.extractFromKey(e[e.length-1],t),l=a[a.length-1],s=t.lng||this.language,u=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(s&&"cimode"===s.toLowerCase()){if(u){const e=t.nsSeparator||this.options.nsSeparator;return n?{res:`${l}${e}${i}`,usedKey:i,exactUsedKey:i,usedLng:s,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:`${l}${e}${i}`}return n?{res:i,usedKey:i,exactUsedKey:i,usedLng:s,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:i}const c=this.resolve(e,t);let p=c&&c.res;const d=c&&c.usedKey||i,f=c&&c.exactUsedKey||i,g=Object.prototype.toString.apply(p),v=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,h=!this.i18nFormat||this.i18nFormat.handleAsObject,y=!cs(p)&&"boolean"!=typeof p&&"number"!=typeof p;if(!(h&&p&&y&&["[object Number]","[object Function]","[object RegExp]"].indexOf(g)<0)||cs(v)&&Array.isArray(p))if(h&&cs(v)&&Array.isArray(p))p=p.join(v),p&&(p=this.extendTranslation(p,e,t,r));else{let n=!1,a=!1;const u=void 0!==t.count&&!cs(t.count),d=As.hasDefaultValue(t),f=u?this.pluralResolver.getSuffix(s,t.count,t):"",g=t.ordinal&&u?this.pluralResolver.getSuffix(s,t.count,{ordinal:!1}):"",v=u&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),h=v&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${f}`]||t[`defaultValue${g}`]||t.defaultValue;!this.isValidLookup(p)&&d&&(n=!0,p=h),this.isValidLookup(p)||(a=!0,p=i);const y=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&a?void 0:p,m=d&&h!==p&&this.options.updateMissing;if(a||n||m){if(this.logger.log(m?"updateKey":"missingKey",s,l,i,m?h:p),o){const e=this.resolve(i,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const r=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&r&&r[0])for(let t=0;t<r.length;t++)e.push(r[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const n=(e,r,n)=>{const o=d&&n!==p?n:y;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,r,o,m,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,l,r,o,m,t),this.emit("missingKey",e,l,r,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&u?e.forEach((e=>{const r=this.pluralResolver.getSuffixes(e,t);v&&t[`defaultValue${this.options.pluralSeparator}zero`]&&r.indexOf(`${this.options.pluralSeparator}zero`)<0&&r.push(`${this.options.pluralSeparator}zero`),r.forEach((r=>{n([e],i+r,t[`defaultValue${r}`]||h)}))})):n(e,i,h))}p=this.extendTranslation(p,e,t,c,r),a&&p===i&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${i}`),(a||n)&&this.options.parseMissingKeyHandler&&(p="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${i}`:i,n?p:void 0):this.options.parseMissingKeyHandler(p))}else{if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(d,p,{...t,ns:a}):`key '${i} (${this.language})' returned an object instead of string.`;return n?(c.res=e,c.usedParams=this.getUsedParamsDetails(t),c):e}if(o){const e=Array.isArray(p),r=e?[]:{},n=e?f:d;for(const e in p)if(Object.prototype.hasOwnProperty.call(p,e)){const i=`${n}${o}${e}`;r[e]=this.translate(i,{...t,joinArrays:!1,ns:a}),r[e]===i&&(r[e]=p[e])}p=r}}return n?(c.res=p,c.usedParams=this.getUsedParamsDetails(t),c):p}extendTranslation(e,t,r,n,o){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const a=cs(e)&&(r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l;if(a){const t=e.match(this.interpolator.nestingRegexp);l=t&&t.length}let s=r.replace&&!cs(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),e=this.interpolator.interpolate(e,s,r.lng||this.language||n.usedLng,r),a){const t=e.match(this.interpolator.nestingRegexp);l<(t&&t.length)&&(r.nest=!1)}!r.lng&&"v1"!==this.options.compatibilityAPI&&n&&n.res&&(r.lng=this.language||n.usedLng),!1!==r.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return o&&o[0]===n[0]&&!r.context?(i.logger.warn(`It seems you are nesting recursively key: ${n[0]} in key: ${t[0]}`),null):i.translate(...n,t)}),r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=cs(a)?[a]:a;return null!=e&&l&&l.length&&!1!==r.applyPostProcessor&&(e=Ts.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t,r,n,o,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return cs(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const l=this.extractFromKey(e,a),s=l.key;r=s;let u=l.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const c=void 0!==a.count&&!cs(a.count),p=c&&!a.ordinal&&0===a.count&&this.pluralResolver.shouldUseIntlApi(),d=void 0!==a.context&&(cs(a.context)||"number"==typeof a.context)&&""!==a.context,f=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);u.forEach((e=>{this.isValidLookup(t)||(i=e,!Rs[`${f[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(i)&&(Rs[`${f[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${f.join(", ")}" won't get resolved as namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach((r=>{if(this.isValidLookup(t))return;o=r;const i=[s];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(i,s,r,e,a);else{let e;c&&(e=this.pluralResolver.getSuffix(r,a.count,a));const t=`${this.options.pluralSeparator}zero`,n=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(c&&(i.push(s+e),a.ordinal&&0===e.indexOf(n)&&i.push(s+e.replace(n,this.options.pluralSeparator)),p&&i.push(s+t)),d){const r=`${s}${this.options.contextSeparator}${a.context}`;i.push(r),c&&(i.push(r+e),a.ordinal&&0===e.indexOf(n)&&i.push(r+e.replace(n,this.options.pluralSeparator)),p&&i.push(r+t))}}let l;for(;l=i.pop();)this.isValidLookup(t)||(n=l,t=this.getResource(r,e,l,a))})))}))})),{res:t,usedKey:r,exactUsedKey:n,usedLng:o,usedNS:i}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,r,n):this.resourceStore.getResource(e,t,r,n)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!cs(e.replace);let n=r?e.replace:e;if(r&&void 0!==e.count&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!r){n={...n};for(const e of t)delete n[e]}return n}static hasDefaultValue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,12)&&void 0!==e[t])return!0;return!1}}const Ps=e=>e.charAt(0).toUpperCase()+e.slice(1);class Ns{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Is.create("languageUtils")}getScriptPartFromCode(e){if(!(e=js(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=js(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(cs(e)&&e.indexOf("-")>-1){if("undefined"!=typeof Intl&&void 0!==Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(e){}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map((e=>e.toLowerCase())):2===r.length?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),t.indexOf(r[1].toLowerCase())>-1&&(r[1]=Ps(r[1].toLowerCase()))):3===r.length&&(r[0]=r[0].toLowerCase(),2===r[1].length&&(r[1]=r[1].toUpperCase()),"sgn"!==r[0]&&2===r[2].length&&(r[2]=r[2].toUpperCase()),t.indexOf(r[1].toLowerCase())>-1&&(r[1]=Ps(r[1].toLowerCase())),t.indexOf(r[2].toLowerCase())>-1&&(r[2]=Ps(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const r=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(r)||(t=r)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find((e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),cs(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),n=[],o=e=>{e&&(this.isSupportedCode(e)?n.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return cs(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):cs(e)&&o(this.formatLanguageCode(e)),r.forEach((e=>{n.indexOf(e)<0&&o(this.formatLanguageCode(e))})),n}}let Ds=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Vs={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const $s=["v1","v2","v3"],Ms=["v4"],zs={zero:0,one:1,two:2,few:3,many:4,other:5};class qs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Is.create("pluralResolver"),this.options.compatibilityJSON&&!Ms.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return Ds.forEach((t=>{t.lngs.forEach((r=>{e[r]={numbers:t.nr,plurals:Vs[t.fc]}}))})),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const r=js("dev"===e?"en":e),n=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:n});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let i;try{i=new Intl.PluralRules(r,{type:n})}catch(r){if(!e.match(/-|_/))return;const n=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(n,t)}return this.pluralRulesCache[o]=i,i}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.getRule(e,t);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,r).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.getRule(e,t);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort(((e,t)=>zs[e]-zs[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):r.numbers.map((r=>this.getSuffix(e,r,t))):[]}getSuffix(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.getRule(e,r);return n?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${n.select(t)}`:this.getSuffixRetroCompatible(n,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let n=e.numbers[r];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===n?n="plural":1===n&&(n=""));const o=()=>this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString();return"v1"===this.options.compatibilityJSON?1===n?"":"number"==typeof n?`_plural_${n.toString()}`:o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!$s.includes(this.options.compatibilityJSON)}}const Ws=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=((e,t,r)=>{const n=ms(e,r);return void 0!==n?n:ms(t,r)})(e,t,r);return!i&&o&&cs(r)&&(i=Fs(e,r,n),void 0===i&&(i=Fs(t,r,n))),i},Bs=e=>e.replace(/\$/g,"$$$$");class Us{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Is.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:n,prefix:o,prefixEscaped:i,suffix:a,suffixEscaped:l,formatSeparator:s,unescapeSuffix:u,unescapePrefix:c,nestingPrefix:p,nestingPrefixEscaped:d,nestingSuffix:f,nestingSuffixEscaped:g,nestingOptionsSeparator:v,maxReplaces:h,alwaysFormat:y}=e.interpolation;this.escape=void 0!==t?t:ws,this.escapeValue=void 0===r||r,this.useRawValueToEscape=void 0!==n&&n,this.prefix=o?Os(o):i||"{{",this.suffix=a?Os(a):l||"}}",this.formatSeparator=s||",",this.unescapePrefix=u?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=p?Os(p):d||Os("$t("),this.nestingSuffix=f?Os(f):g||Os(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=h||1e3,this.alwaysFormat=void 0!==y&&y,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,n){let o,i,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},s=e=>{if(e.indexOf(this.formatSeparator)<0){const o=Ws(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(o,void 0,r,{...n,...t,interpolationkey:e}):o}const o=e.split(this.formatSeparator),i=o.shift().trim(),a=o.join(this.formatSeparator).trim();return this.format(Ws(t,l,i,this.options.keySeparator,this.options.ignoreJSONStructure),a,r,{...n,...t,interpolationkey:i})};this.resetRegExp();const u=n&&n.missingInterpolationHandler||this.options.missingInterpolationHandler,c=n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>Bs(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?Bs(this.escape(e)):Bs(e)}].forEach((t=>{for(a=0;o=t.regex.exec(e);){const r=o[1].trim();if(i=s(r),void 0===i)if("function"==typeof u){const t=u(e,o,n);i=cs(t)?t:""}else if(n&&Object.prototype.hasOwnProperty.call(n,r))i="";else{if(c){i=o[0];continue}this.logger.warn(`missed to pass in variable ${r} for interpolating ${e}`),i=""}else cs(i)||this.useRawValueToEscape||(i=ds(i));const l=t.safeValue(i);if(e=e.replace(o[0],l),c?(t.regex.lastIndex+=i.length,t.regex.lastIndex-=o[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}})),e}nest(e,t){let r,n,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=(e,t)=>{const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const n=e.split(new RegExp(`${r}[ ]*{`));let i=`{${n[1]}`;e=n[0],i=this.interpolate(i,o);const a=i.match(/'/g),l=i.match(/"/g);(a&&a.length%2==0&&!l||l.length%2!=0)&&(i=i.replace(/'/g,'"'));try{o=JSON.parse(i),t&&(o={...t,...o})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${r}${i}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,e};for(;r=this.nestingRegexp.exec(e);){let l=[];o={...i},o=o.replace&&!cs(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let s=!1;if(-1!==r[0].indexOf(this.formatSeparator)&&!/{.*}/.test(r[1])){const e=r[1].split(this.formatSeparator).map((e=>e.trim()));r[1]=e.shift(),l=e,s=!0}if(n=t(a.call(this,r[1].trim(),o),o),n&&r[0]===e&&!cs(n))return n;cs(n)||(n=ds(n)),n||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),n=""),s&&(n=l.reduce(((e,t)=>this.format(e,t,i.lng,{...i,interpolationkey:r[1].trim()})),n.trim())),e=e.replace(r[0],n),this.regexp.lastIndex=0}return e}}const Gs=e=>{const t={};return(r,n,o)=>{let i=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(i={...i,[o.interpolationkey]:void 0});const a=n+JSON.stringify(i);let l=t[a];return l||(l=e(js(n),o),t[a]=l),l(r)}};class Ks{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Is.create("formatter"),this.options=e,this.formats={number:Gs(((e,t)=>{const r=new Intl.NumberFormat(e,{...t});return e=>r.format(e)})),currency:Gs(((e,t)=>{const r=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>r.format(e)})),datetime:Gs(((e,t)=>{const r=new Intl.DateTimeFormat(e,{...t});return e=>r.format(e)})),relativetime:Gs(((e,t)=>{const r=new Intl.RelativeTimeFormat(e,{...t});return e=>r.format(e,t.range||"day")})),list:Gs(((e,t)=>{const r=new Intl.ListFormat(e,{...t});return e=>r.format(e)}))},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Gs(t)}format(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find((e=>e.indexOf(")")>-1))){const e=o.findIndex((e=>e.indexOf(")")>-1));o[0]=[o[0],...o.splice(1,e)].join(this.formatSeparator)}return o.reduce(((e,t)=>{const{formatName:o,formatOptions:i}=(e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const o=n[1].substring(0,n[1].length-1);"currency"===t&&o.indexOf(":")<0?r.currency||(r.currency=o.trim()):"relativetime"===t&&o.indexOf(":")<0?r.range||(r.range=o.trim()):o.split(";").forEach((e=>{if(e){const[t,...n]=e.split(":"),o=n.join(":").trim().replace(/^'+|'+$/g,""),i=t.trim();r[i]||(r[i]=o),"false"===o&&(r[i]=!1),"true"===o&&(r[i]=!0),isNaN(o)||(r[i]=parseInt(o,10))}}))}return{formatName:t,formatOptions:r}})(t);if(this.formats[o]){let t=e;try{const a=n&&n.formatParams&&n.formatParams[n.interpolationkey]||{},l=a.locale||a.lng||n.locale||n.lng||r;t=this.formats[o](e,l,{...i,...n,...a})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${o}`),e}),e)}}class Hs extends ks{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=n,this.logger=Is.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,n.backend,n)}queueLoad(e,t,r,n){const o={},i={},a={},l={};return e.forEach((e=>{let n=!0;t.forEach((t=>{const a=`${e}|${t}`;!r.reload&&this.store.hasResourceBundle(e,t)?this.state[a]=2:this.state[a]<0||(1===this.state[a]?void 0===i[a]&&(i[a]=!0):(this.state[a]=1,n=!1,void 0===i[a]&&(i[a]=!0),void 0===o[a]&&(o[a]=!0),void 0===l[t]&&(l[t]=!0)))})),n||(a[e]=!0)})),(Object.keys(o).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(o),pending:Object.keys(i),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,t,r){const n=e.split("|"),o=n[0],i=n[1];t&&this.emit("failedLoading",o,i,t),!t&&r&&this.store.addResourceBundle(o,i,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const a={};this.queue.forEach((r=>{((e,t,r)=>{const{obj:n,k:o}=hs(e,t,Object);n[o]=n[o]||[],n[o].push(r)})(r.loaded,[o],i),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(r,e),t&&r.errors.push(t),0!==r.pendingCount||r.done||(Object.keys(r.loaded).forEach((e=>{a[e]||(a[e]={});const t=r.loaded[e];t.length&&t.forEach((t=>{void 0===a[e][t]&&(a[e][t]=!0)}))})),r.done=!0,r.errors.length?r.callback(r.errors):r.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((e=>!e.done))}read(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:r,tried:n,wait:o,callback:i});this.readingCalls++;const a=(a,l)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}a&&l&&n<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,r,n+1,2*o,i)}),o):i(a,l)},l=this.backend[r].bind(this.backend);if(2!==l.length)return l(e,t,a);try{const r=l(e,t);r&&"function"==typeof r.then?r.then((e=>a(null,e))).catch(a):a(null,r)}catch(e){a(e)}}prepareLoading(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();cs(e)&&(e=this.languageUtils.toResolveHierarchy(e)),cs(t)&&(t=[t]);const o=this.queueLoad(e,t,r,n);if(!o.toLoad.length)return o.pending.length||n(),null;o.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e.split("|"),n=r[0],o=r[1];this.read(n,o,"read",void 0,void 0,((r,i)=>{r&&this.logger.warn(`${t}loading namespace ${o} for language ${n} failed`,r),!r&&i&&this.logger.log(`${t}loaded namespace ${o} for language ${n}`,i),this.loaded(e,r,i)}))}saveMissing(e,t,r,n,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=r&&""!==r){if(this.backend&&this.backend.create){const l={...i,isUpdate:o},s=this.backend.create.bind(this.backend);if(s.length<6)try{let o;o=5===s.length?s(e,t,r,n,l):s(e,t,r,n),o&&"function"==typeof o.then?o.then((e=>a(null,e))).catch(a):a(null,o)}catch(e){a(e)}else s(e,t,r,n,a,l)}e&&e[0]&&this.store.addResource(e[0],t,r,n)}}}const Xs=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),cs(e[1])&&(t.defaultValue=e[1]),cs(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const r=e[3]||e[2];Object.keys(r).forEach((e=>{t[e]=r[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Js=e=>(cs(e.ns)&&(e.ns=[e.ns]),cs(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),cs(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),Ys=()=>{};class Qs extends ks{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var r;if(super(),this.options=Js(e),this.services={},this.logger=Is,this.modules={external:[]},r=this,Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach((e=>{"function"==typeof r[e]&&(r[e]=r[e].bind(r))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof t&&(r=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&(cs(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=Xs();this.options={...n,...this.options,...Js(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...n.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const o=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?Is.init(o(this.modules.logger),this.options):Is.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=Ks);const r=new Ns(this.options);this.store=new xs(this.options.resources,this.options);const i=this.services;i.logger=Is,i.resourceStore=this.store,i.languageUtils=r,i.pluralResolver=new qs(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format||(i.formatter=o(t),i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new Us(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new Hs(o(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.emit(t,...n)})),this.modules.languageDetector&&(i.languageDetector=o(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=o(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new As(this.services,this.options),this.translator.on("*",(function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.emit(t,...n)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,r||(r=Ys),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}})),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const i=ps(),a=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),i.resolve(t),r(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?a():setTimeout(a,0),i}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ys;const r=cs(e)?e:this.language;if("function"==typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],n=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};r?n(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>n(e))),this.options.preload&&this.options.preload.forEach((e=>n(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,r){const n=ps();return"function"==typeof e&&(r=e,e=void 0),"function"==typeof t&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=Ys),this.services.backendConnector.reload(e,t,(e=>{n.resolve(),r(e)})),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Ts.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const n=ps();this.emit("languageChanging",e);const o=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},i=(e,i)=>{i?(o(i),this.translator.changeLanguage(i),this.isLanguageChangingTo=void 0,this.emit("languageChanged",i),this.logger.log("languageChanged",i)):this.isLanguageChangingTo=void 0,n.resolve((function(){return r.t(...arguments)})),t&&t(e,(function(){return r.t(...arguments)}))},a=t=>{e||t||!this.services.languageDetector||(t=[]);const r=cs(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);r&&(this.language||o(r),this.translator.language||this.translator.changeLanguage(r),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(r)),this.loadResources(r,(e=>{i(e,r)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),n}getFixedT(e,t,r){var n=this;const o=function(e,t){let i;if("object"!=typeof t){for(var a=arguments.length,l=new Array(a>2?a-2:0),s=2;s<a;s++)l[s-2]=arguments[s];i=n.options.overloadTranslationOptionHandler([e,t].concat(l))}else i={...t};i.lng=i.lng||o.lng,i.lngs=i.lngs||o.lngs,i.ns=i.ns||o.ns,""!==i.keyPrefix&&(i.keyPrefix=i.keyPrefix||r||o.keyPrefix);const u=n.options.keySeparator||".";let c;return c=i.keyPrefix&&Array.isArray(e)?e.map((e=>`${i.keyPrefix}${u}${e}`)):i.keyPrefix?`${i.keyPrefix}${u}${e}`:e,n.t(c,i)};return cs(e)?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=r,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],n=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;const i=(e,t)=>{const r=this.services.backendConnector.state[`${e}|${t}`];return-1===r||0===r||2===r};if(t.precheck){const e=t.precheck(this,i);if(void 0!==e)return e}return!(!this.hasResourceBundle(r,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!i(r,e)||n&&!i(o,e)))}loadNamespaces(e,t){const r=ps();return this.options.ns?(cs(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=ps();cs(e)&&(e=[e]);const n=this.options.preload||[],o=e.filter((e=>n.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return o.length?(this.options.preload=n.concat(o),this.loadResources((e=>{r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new Ns(Xs());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new Qs(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ys;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},o=new Qs(n);return void 0===e.debug&&void 0===e.prefix||(o.logger=o.logger.clone(e)),["store","services","language"].forEach((e=>{o[e]=this[e]})),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r&&(o.store=new xs(this.store.data,n),o.services.resourceStore=o.store),o.translator=new As(o.services,n),o.translator.on("*",(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];o.emit(e,...r)})),o.init(n,t),o.translator.options=n,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Zs=Qs.createInstance();Zs.createInstance=Qs.createInstance,Zs.createInstance,Zs.dir,Zs.init,Zs.loadResources,Zs.reloadResources,Zs.use,Zs.changeLanguage,Zs.getFixedT,Zs.t,Zs.exists,Zs.setDefaultNamespace,Zs.hasLoadedNamespace,Zs.loadNamespaces,Zs.loadLanguages;var eu,tu=(A(A(A(A(A(A(A(A(A(A(eu={},Il,"Empty group"),kl,"No conditions for group field {{field}}"),xl,"Empty query"),Tl,"Empty case"),Rl,"No config for field {{field}}"),"FIXED_OPERATOR","Fixed operator {{from}} to {{to}} for field {{field}}"),Al,"No config for operator {{operator}}"),Pl,"No config for function {{funcKey}}"),Nl,"Invalid value"),Dl,"Invalid value of arg {{argName}} for func {{funcName}}: {{argValidationError}}"),A(A(A(A(A(A(A(A(A(A(eu,Vl,"Type of field {{field}} is not supported"),$l,"Operator {{operator}} is not supported for field {{field}}"),zl,"Incomplete rule"),ql,"Incomplete LHS"),Wl,"Incomplete RHS"),Ml,"Invalid value src {{valueSrcs, list}}"),Bl+"_one","Value {{badValues, list}} is not in the list of allowed values"),Bl+"_other","Values {{badValues, list}} are not in the list of allowed values"),Ul,"Value {{value}} is not in the list of allowed values"),Gl,"Value should have type {{wType}}, but got value of type {{valueType}}"),A(A(A(A(A(A(A(A(A(A(eu,Kl,"Value should have JS type {{jsType}}, but got value of type {{valueTypeof}}"),Hl,"Value {{value}} should have max length {{fieldSettings.maxLength}} but got {{length}}"),Xl,"Value {{value}} should be greater than or equal to {{fieldSettings.min}}"),Xl+"_"+us,"Value {{value}} should be from {{fieldSettings.min}} to {{fieldSettings.max}}"),Jl,"Value {{value}} should be less than or equal to {{fieldSettings.max}}"),Jl+"_"+us,"Value {{value}} should be from {{fieldSettings.min}} to {{fieldSettings.max}}"),Yl,"No config for field {{field}}"),Ql,"Can't compare field {{field}} with itself"),Zl,"Can't compare field {{leftField}} with {{rightField}}"),es,"Field {{field}} is of type {{type}}, but expected {{expected}}"),A(A(A(A(A(A(A(A(A(A(eu,ts,"Unsupported function {{funcKey}} for field {{field}}"),rs,"Value of arg {{argName}} for func {{funcName}} is required"),ns,"Function {{funcKey}} should return value of type {{returnType}}, but got {{valueType}}"),os,"Invalid range"),as,"Root"),is+"__rule","Leaf #{{globalLeafNo}}"),is+"__group","Group #{{globalGroupNo}}"),is+"__rule_group","Rule-group #{{globalNoByType}}"),is+"__case_group","Case #{{globalNoByType}}"),is+"__rule__deleted","Deleted leaf #{{globalLeafNo}}"),A(A(A(A(A(eu,is+"__group__deleted","Deleted group #{{globalGroupNo}}"),is+"__rule_group__deleted","Deleted rule-group #{{globalNoByType}}"),is+"__case_group__deleted","Deleted case #{{globalNoByType}}"),ss,"{{str}} in case #{{caseNo}}"),ls,"{{str}} (index path: {{indexPath, list}})")),ru="raqbvalidation",nu="".concat(ru,":"),ou=Zs.createInstance();ou.init({fallbackLng:"en"}),ou.addResources("en",ru,tu);var iu=function e(t,r){return null!=t&&t.str?t.str:null!=t&&t.key?e(t.key,t.args):null===r?t:ou.t(t.includes(":")?t:nu+t,r)};const au=ou;function lu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function su(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lu(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var uu=function(e){return"object"===E(e)&&null!==e&&Array.isArray(e)?"array":E(e)},cu=function(e,t){return 0===pu(e,t).length},pu=function(e,t){var r=t.settings.showErrorMessage,n=[];return e&&function e(t,o,i){var a,l,s=t.get("id"),u=t.get("children1"),c=t.getIn(["properties","valueError"]),p=t.getIn(["properties","fieldError"]),d=t.getIn(["properties","field"]),f=null!==(a=null==d||null===(l=d.get)||void 0===l?void 0:l.call(d,"func"))&&void 0!==a?a:d;((null==c?void 0:c.size)>0&&c.filter((function(e){return null!=e})).size>0||!!p)&&r&&n.push(f),u&&u.map((function(t,r){t&&e(t,o.concat(s),i+1)}))}(e,[],0),Array.from(new Set(n))},du=function(e,t){var r=rp(t,void 0,!0),n={removeEmptyGroups:t.settings.removeEmptyGroupsOnLoad,removeIncompleteRules:t.settings.removeIncompleteRulesOnLoad,removeEmptyRules:t.settings.removeEmptyRulesOnLoad,forceFix:!1},o=hu(e,null,r,r,n),i=o.fixedTree,a=o.allErrors;return o.isSanitized&&a.length&&console.warn("Tree check errors: ",a),i},fu=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=rp(t,void 0,!0),o=su(su({},r),{},{removeEmptyGroups:!1,removeEmptyRules:!1,removeIncompleteRules:!1,forceFix:!1});return hu(e,null,n,n,o).allErrors},gu=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=rp(t,void 0,!0),o=su({removeEmptyGroups:!0,removeEmptyRules:!0,removeIncompleteRules:!0,forceFix:!1},r),i=hu(e,null,n,n,o);return{fixedTree:i.fixedTree,fixedErrors:i.fixedErrors,nonFixedErrors:i.nonFixedErrors,allErrors:i.allErrors}},vu=function(e,t,r,n,o,i,a){void 0===o&&(o=r.settings.removeEmptyGroupsOnLoad),void 0===i&&(i=r.settings.removeEmptyRulesOnLoad),void 0===a&&(a=r.settings.removeIncompleteRulesOnLoad);var l=hu(e,t,r,n,{removeEmptyGroups:o,removeEmptyRules:i,removeIncompleteRules:a,forceFix:!1}),s=l.fixedTree,u=(l.allErrors,l.fixedErrors);return l.nonFixedErrors,l.isSanitized&&u.length&&console.warn("Fixed tree errors: ",u),ii(s)},hu=function(e,t,r,n,o){if(!e)return{fixedTree:e,allErrors:[],fixedErrors:[],nonFixedErrors:[],isSanitized:!1};var i,a,l=o||{},s=l.removeEmptyGroups,u=l.removeEmptyRules,c=l.removeIncompleteRules,p=l.forceFix,d=l.translateErrors,f=void 0===d||d,g=l.includeStringifiedItems,v=void 0===g||g,h=l.stringifyFixedItems,y=void 0!==h&&h,m=l.stringifyItemsUserFriendly,b=void 0===m||m,O=l.includeItemsPositions,_=void 0===O||O,w={errors:{}},S=bu(e,[],null,w,{config:r,oldConfig:n,removeEmptyGroups:s,removeEmptyRules:u,removeIncompleteRules:c,forceFix:p}),E=w.sanitized,F=[];for(var j in _&&(i=li(S,r).items),w.errors){var L=w.errors[j],C=L.path,I=L.errors;f&&(I=I.map((function(e){return su(su({},e),{},{str:iu(e)})})));var k={path:C,errors:I};if(v){var x=ri(y?S:e,C);if(1!==C.length&&"group"!==x.get("type")){var T=wl(x,r,b,!0);k.itemStr=T}}if(_){var R=i[j],A=!R;if(A&&(a||(a=li(e,r).items),R=a[j]),R){var P=su(su({},R.position),{},{index:R.index,type:R.type,isDeleted:A});k.itemPosition=P;var N=R.index?is+"__"+R.type+(A?"__deleted":""):as,D=su({},P);if(b){for(var V,$=0,M=["caseNo","globalLeafNo","globalGroupNo","globalNoByType"];$<M.length;$++){var z=M[$];null!=D[z]&&(D[z]=D[z]+1)}D.indexPath=null===(V=P.indexPath)||void 0===V?void 0:V.map((function(e){return e+1}))}k.itemPositionStr=iu(N,D),R.index&&(R.caseId&&"case_group"!==R.type&&(k.itemPositionStr=iu(ss,su(su({},D),{},{str:k.itemPositionStr}))),"case_group"!==R.type&&(k.itemPositionStr=iu(ls,su(su({},D),{},{str:k.itemPositionStr}))))}}F.push(k)}for(var q=[],W=[],B=0,U=F;B<U.length;B++){var G=U[B],K=G.errors.filter((function(e){return!!e.fixed})),H=G.errors.filter((function(e){return!e.fixed&&"EMPTY_QUERY"!==e.key}));K.length&&q.push(su(su({},G),{},{errors:K})),H.length&&W.push(su(su({},G),{},{errors:H}))}return{fixedTree:S,allErrors:F,fixedErrors:q,nonFixedErrors:W,isSanitized:E}};function yu(e,t,r,n){var o=t.get("id");e.errors[o]||(e.errors[o]={path:[].concat(z(r),[o]),errors:[]}),e.errors[o].errors.push(n)}function mu(e,t){var r=t.get("id");e.errors[r]&&e.errors[r].errors.map((function(e){e.fixed=!0}))}function bu(e,t,r,n,o){var i=null==e?void 0:e.get("type");return"group"===i||"rule_group"===i||"case_group"==i||"switch_group"==i?function(e,t,r,n,o){var i,a,l,s,u,c,p=o.removeEmptyGroups,d=o.removeIncompleteRules,f=(o.forceFix,o.config),g=(f.settings.showErrorMessage,e.get("id")),v=e.get("children1"),h=!t.length,y=v,m=e.get("type"),b=e.get("properties"),O=null==b?void 0:b.get("field"),_=null==b?void 0:b.get("mode"),w=null==b||null===(i=b.get)||void 0===i?void 0:i.call(b,"operator"),S="rule_group"===m&&"array"===_,E="case_group"===m,F=E&&null==v,j=w?null!==(a=null===(l=f.operators[w])||void 0===l?void 0:l.cardinality)&&void 0!==a?a:1:void 0,L=E?!F:S?0==j:p,C=S||E;!g&&r&&(g=r,e=e.set("id",g),n.sanitized=!0),C&&(e=Ou(e,t,r,n,o));var I={errors:{}},k=null===(u=v=null===(s=v)||void 0===s?void 0:s.map((function(e,r){return bu(e,t.concat(g),r,I,o)})))||void 0===u?void 0:u.filter((function(e){return null!=e}));p&&(v=k);var x=I.sanitized||(null==y?void 0:y.size)!=(null===(c=v)||void 0===c?void 0:c.size),T=p&&!h;return S&&O&&(T=d),!(null!=k&&k.size)&&L&&(yu(n,e,t,{key:h?xl:E?Tl:S?kl:Il,args:{field:O},fixed:T}),T&&(mu(n,e),e=void 0)),x&&(n.sanitized=!0),x&&e&&(e=e.set("children1",v)),n.errors=su(su({},n.errors),(null==I?void 0:I.errors)||{}),e}(e,t,r,n,o):"rule"===i?Ou(e,t,r,n,o):e}function Ou(e,t,r,n,o){var i=o.removeIncompleteRules,a=o.removeEmptyRules,l=o.forceFix,s=o.config,u=o.oldConfig,c=s.settings.showErrorMessage,p=!c||l,d=e.get("id"),f="case_group"===e.get("type"),g=e.get("properties");if(!g){if(!f)return void yu(n,e,t,{key:zl,args:{},fixed:i||a});g=new no.Map}var v=g.get("field")||null;f&&(v="!case_value");var h=g.get("fieldSrc")||null,y=g.get("operator")||null,m=g.get("operatorOptions"),b=g.get("valueSrc"),O=g.get("value"),_=g.get("valueError"),w=g.get("fieldError"),S=function(){var e,t;return{field:(null===(e=v)||void 0===e||null===(t=e.toJS)||void 0===t?void 0:t.call(e))||v,fieldSrc:h,operator:y,operatorOptions:m?m.toJS():{},valueSrc:b?b.toJS():null,value:O?O.toJS():null,valueError:_?_.toJS():null,fieldError:w||null}},E=S();!d&&r&&(d=r,e=e.set("id",d),n.sanitized=!0);var F=v?Cp(s,v):null;v&&!F&&(yu(n,e,t,{key:Rl,args:{field:v},side:"lhs",fixed:i||a}),v=null),null!=v||f||(g=["operator","operatorOptions","valueSrc","value","valueError","fieldError","field"].reduce((function(e,t){return e.delete(t)}),g),y=null),h||!v||f||(h=Lp(v),g=g.set("fieldSrc",h)),"range_between"!==y&&"range_not_between"!==y||(y="range_between"===y?"between":"not_between",g=g.set("operator",y));var j=y?Ip(s,y,v):null;y&&!j&&(yu(n,e,t,{key:Al,args:{operator:y},side:"op",fixed:i||a}),y=null);var L=v?Vu(s,v):[];v&&!f&&(null!=L&&L.length?y&&-1==L.indexOf(y)&&("is_empty"===y||"is_not_empty"===y?(y="is_empty"===y?"is_null":"is_not_null",g=g.set("operator",y)):(yu(n,e,t,{key:$l,args:{operator:y,field:v},side:"lhs",fixed:i||a}),y=null)):(yu(n,e,t,{key:Vl,args:{field:v},side:"lhs",fixed:i||a}),y=null)),null!=y||f||(g=["operatorOptions","valueSrc","value","valueError"].reduce((function(e,t){return e.delete(t)}),g)),m=g.get("operatorOptions"),!y||m&&!j.options?(m=null,g=g.delete("operatorOptions")):y&&!m&&j.options&&(m=ll(s,y,v),g=g.set("operatorOptions",m)),b=g.get("valueSrc"),O=g.get("value");var C=ju(s,u,g,v,y,null,p,!0),I=C.newValue,k=C.newValueSrc,x=C.newValueError,T=C.validationErrors,R=C.newFieldError,A=C.fixedField;O=I,b=k,_=x,w=R,v=A,g=(g=(g=g.set("field",v)).set("value",O)).set("valueSrc",b),g=c?g.set("valueError",_).set("fieldError",w):g.delete("valueError").delete("fieldError");var P=S(),N=!go(E,P),D=oc(g.toObject(),s),V=f?D.parts.value:D.score>=3;if(N&&(n.sanitized=!0,e=e.set("properties",g)),null==T||T.map((function(r){return yu(n,e,t,r)})),!V)if(f);else{var $=D.score?i:a,M={key:zl,args:{}};if(D.parts.field){if(!D.parts.value){var z,q,W,B;M.key=Wl,M.side="rhs",null!==(z=P.valueSrc)&&void 0!==z&&z[0]&&(null===(q=P.valueSrc)||void 0===q?void 0:q[0])!=(null===(W=E.valueSrc)||void 0===W?void 0:W[0])&&null!=(null===(B=P.value)||void 0===B?void 0:B[0])&&(M.key=Ml,M.args={valueSrcs:P.valueSrc})}}else M.key=ql,M.side="lhs";M.fixed=$,yu(n,e,t,M),$&&(mu(n,e),e=void 0)}return e}var _u=function(e,t,r,n,o,i,a,l){var s=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=arguments.length>9&&void 0!==arguments[9]&&arguments[9],c=arguments.length>10&&void 0!==arguments[10]&&arguments[10],p=[],d=o;if(null!=o){var f,g,v,h;if("field"===a){var y=$(Su(t,r,o,a,i,l,e,n,s,u),2);d=y[0],p=y[1]}else if("func"===a){var m=$(Eu(t,r,o,a,i,l,e,n,s,u,c),2);d=m[0],p=m[1]}else if("value"===a||!a){var b=$(wu(r,o,a,i,l,e,n,s,u),2);d=b[0],p=b[1]}var O=!(null!==(f=p)&&void 0!==f&&f.find((function(e){return!e.fixed})));if(r&&!["field","func"].includes(a)&&(null===(g=p)||void 0===g||!g.length||O)){var _=Xu(e,r,n,a),w=n?Ip(e,n,r):null,S=kp(e,r,n,_,a,{forExport:!0}),F="field"===a?Cp(e,o):null,j=S,L=S.validateValue;if("function"==typeof L){var C=[d,j,n,w];"field"===a&&C.push(F);var I,k,x=L.call.apply(L,[e.ctx].concat(C));"object"!==E(x)||null===x||Array.isArray(x)?"boolean"==typeof x?0==x&&p.push({key:Nl,args:{}}):"string"==typeof x&&p.push({key:x,args:null}):(k=null!==(I=x.error)&&void 0!==I&&I.key?su({},x.error):{key:x.error,args:null},void 0!==x.fixedValue&&s&&(k.fixed=!0,k.fixedFrom=d,k.fixedTo=x.fixedValue,d=x.fixedValue),p.push(k))}}if(O=!(null!==(v=p)&&void 0!==v&&v.find((function(e){return!e.fixed}))),null!==(h=p)&&void 0!==h&&h.length&&!O&&s){var T=Cp(e,r),R=null==T?void 0:T.fieldSettings,A=null==R?void 0:R.defaultValue;if(void 0!==A){var P=p[p.length-1];P.fixed=!0,P.fixedFrom=d,P.fixedTo=A,d=A,p.map((function(e){e.fixed=!0}))}}}return[d,p]},wu=function(e,t,r,n,o,i){var a,l,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=[],p=t;if(e){var d=Cp(i,e),f=Xu(i,e,s,r),g=i.widgets[f],v=null==g?void 0:g.type,h=null==g?void 0:g.jsType,y=null==d?void 0:d.fieldSettings,m=(null==y?void 0:y.treeValues)||(null==y?void 0:y.listValues),b=!(null==y||!y.asyncFetch),O=m||b;if(n&&v&&n!=v)return c.push({key:Gl,args:{wType:v,valueType:n}}),[t,c];if(h&&(l=h,uu(a=t)!==l&&("number"!==l||isNaN(a)))&&!O)return c.push({key:Kl,args:{jsType:h,valueTypeof:uu(t)}}),[t,c];if(y){var _=o||m;if(_&&!y.allowCustomValues&&"case_value"!==f){var w=function(e,t,r,n,o){var i=no.List.isList(e)?e.toJS():e instanceof Array?z(e):void 0,a=e,l=[];if(i){var s=i.reduce((function(e,r){var n=$(e,2),o=n[0],i=n[1],a=Ho(t,r);return null==a?[o,[].concat(z(i),[r])]:[[].concat(z(o),[a.value]),i]}),[[],[]]),u=$(s,2),c=u[0],p=u[1],d=p.length>0;if(a=(r=r||!0===o)&&d?c:e,p.length){var f=r&&d;l.push({key:Bl,args:{badValues:p,count:p.length},fixed:f,fixedFrom:f?i:void 0,fixedTo:f?a:void 0})}return[a,l]}var g=Ho(t,e);return null==g?(a=r?null:e,l.push({key:Ul,args:{value:e},fixed:r,fixedFrom:r?e:void 0,fixedTo:r?a:void 0})):a=g.value,[a,l]}(t,_,u,0,i.settings.removeInvalidMultiSelectValuesOnLoad),S=$(w,2);p=S[0],c=S[1]}y.maxLength>0&&null!=t&&String(t).length>y.maxLength&&(p=u?String(t).substring(0,y.maxLength):t,c.push({key:Hl,args:{value:t,length:String(t).length,fieldSettings:y},fixed:u,fixedFrom:u?t:void 0,fixedTo:u?p:void 0}));var E=null!=y.min&&null!=y.max?us:void 0;null!=y.min&&t<y.min&&(p=u?y.min:t,c.push({key:Xl,args:{value:t,fieldSettings:y,context:E},fixed:u,fixedFrom:u?t:void 0,fixedTo:u?p:void 0})),null!=y.max&&t>y.max&&(p=u?y.max:t,c.push({key:Jl,args:{value:t,fieldSettings:y,context:E},fixed:u,fixedFrom:u?t:void 0,fixedTo:u?p:void 0}))}}return[p,c]},Su=function(e,t,r,n,o,i,a){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,s=[],u=a.settings,c=u.fieldSeparator,p=u.canCompareFieldWithField,d="object"==E(t)&&(null==t?void 0:t._isFuncArg),f=Array.isArray(e)?e.join(c):e,g=Cp(a,e),v=Array.isArray(r)?r.join(c):r,h=Cp(a,r);return h?e&&v===f&&!d?(s.push({key:Ql,args:{field:f}}),[r,s]):o&&o!=h.type?(s.push({key:es,args:{field:v,type:h.type,expected:o}}),[r,s]):e&&!d&&p&&!p(f,g,v,h,l)?(s.push({key:Zl,args:{leftField:f,rightField:v}}),[r,s]):[r]:(s.push({key:Yl,args:{field:v}}),[r,s])},Eu=function(e,t,r,n,o,i,a){var l,s,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=arguments.length>9&&void 0!==arguments[9]&&arguments[9],d=arguments.length>10&&void 0!==arguments[10]&&arguments[10],f=r,g=[];if(!r)return[r];var v=null===(l=r.get)||void 0===l?void 0:l.call(r,"func");if(!v)return[r];var h=Cp(a,t);if(null!=h&&h.funcs&&!h.funcs.includes(v))return g.push({key:ts,args:{funcKey:v,field:t}}),[r,g];var y=mp(a,v);if(!y)return g.push({key:Pl,args:{funcKey:v}}),[r,g];var m=null!==(s=y.label)&&void 0!==s?s:v;if(o&&y.returnType!=o)return g.push({key:ns,args:{funcKey:v,funcName:m,returnType:y.returnType,valueType:o}}),[r,g];for(var b in c=c||d,y.args){var O,_=y.args[b],w=f.get("args"),S=w?w.get(b):void 0,E=Cp(a,_),F=null!==(O=null==E?void 0:E.label)&&void 0!==O?O:b,j=S?S.get("value"):void 0,L=S?S.get("valueSrc"):void 0;if(void 0!==j){var C=$(_u(a,e,E,u,j,_.type,L,i,c,p,d),2),I=C[0],k=C[1],x=!(null!=k&&k.length),T=c&&I!==j,R=c&&!x&&!T&&(p||d);if(T&&(f=f.setIn(["args",b,"value"],I)),R&&(f=f.deleteIn(["args",b]),f=xu(a,f,y,b)),!x){var A,P,N=null!==(A=null!==(P=k.find((function(e){return!e.fixed&&!e.ignore})))&&void 0!==P?P:k.find((function(e){return!e.fixed})))&&void 0!==A?A:k[0],D=T||R,V=0===k.filter((function(e){return!e.ignore})).length;if(N){var M=iu(N);g.push({key:Dl,args:{funcKey:v,funcName:m,argKey:b,argName:F,argValidationError:M,argErrors:k},ignore:V,fixed:D,fixedFrom:D?j:void 0,fixedTo:D?T?I:_.defaultValue:void 0})}}}else if(!_.isOptional&&(p||d)){var z=c&&void 0!==_.defaultValue&&(p||d);p&&g.push({key:rs,args:{funcKey:v,funcName:m,argKey:b,argName:F},fixed:z,fixedTo:z?_.defaultValue:void 0,ignore:!z}),z&&(f=f.deleteIn(["args",b]),f=xu(a,f,y,b))}}return[f,g]},Fu=function(e,t,r,n,o){var i,a=Ip(e,r,t),l=r?fo(a):null,s=o.toJS?o.toJS():o,u=n.toJS?n.toJS():n,c=s.filter((function(e){return"value"==e||null==e})).length==l;if(null!=a&&a.validateValues&&c){var p=s[0],d=Xu(e,t,r,p),f=kp(e,t,r,d,p),g=null!=f&&f.toJS?u.map((function(t){var r=f.toJS.call(e.ctx,t,f);return r instanceof Date&&(r=r.getTime()),r})):u,v=a.validateValues(g);"boolean"==typeof v&&0==v&&(i={key:os,args:{jsValues:g,values:u}})}return i},ju=function(e){var t,r,n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],p=arguments.length>7&&void 0!==arguments[7]&&arguments[7],d=arguments.length>8&&void 0!==arguments[8]&&arguments[8];i||(i=e);var f=e.settings,g=f.keepInputOnChangeFieldSrc,v=f.convertableWidgets,h=f.clearValueOnChangeField,y=f.clearValueOnChangeOp,m="!case_value"==l,b=a.get("field");!b&&m&&(b=l);var O,_=a.get("fieldType"),w=a.get("fieldSrc"),S=a.get("operator"),E=a.get("value"),F=a.get("valueSrc",new no.List),j=a.get("valueType",new no.List),L=a.get("valueError",new no.List),C=a.get("asyncListValues"),I=m,k=Ip(i,S),x=Ip(e,s,l),T=m?1:S?fo(k):null,R=m?1:s?fo(x):null,A=Cp(i,b),P=Cp(e,l),N=!b&&_&&g,D=(null==A?void 0:A.type)||_,V=(null==P?void 0:P.type)||!l&&N&&D,M=null==A?void 0:A.listValuesType,z=null==P?void 0:P.listValuesType,q=(null===(t=b)||void 0===t||null===(r=t.get)||void 0===r?void 0:r.call(t,"func"))||b,W=((null===(n=l)||void 0===n||null===(o=n.get)||void 0===o?void 0:o.call(n,"func"))||l)!=q,B=[],U=(b||N)&&(S&&s||I)&&null!=E;if((!D||!V||D!=V||"field"===u&&W&&h||"operator"===u&&y)&&(U=!1),W&&Nu.includes(V)&&(z&&z===M||(U=!1)),I||(null!=E&&E.size||!R)&&(null==E||!E.size||R)||(U=!1),"func"===w&&l){var G=$(_u(e,null,null,s,l,V,w,C,c,p,d),2),K=G[0],H=G[1],X=!(null!=H&&H.length),J=K!==l,Y=!X&&J&&!H.find((function(e){return!e.fixed})),Q=c&&!X&&!Y&&!!u&&l!==b;if(Q?l=b:J&&(l=K),!X){var Z=!X&&!Y&&!Q,ee=H.find((function(e){return!e.fixed&&!e.ignore}));Z&&ee&&(O=iu(ee)),H.map((function(e){return B.push(su(su({side:"lhs"},e),{},{fixed:e.fixed||Q||false}))}))}}for(var te=0;te<R;te++){var re=F.get(te)||null,ne=Xu(i,b,S,re),oe=Xu(e,l,s,re),ie="value"===re?ne:Xu(i,b,S,"value"),ae="value"===re?oe:Xu(e,l,s,"value");ae==ie||(v[ie]||[]).includes(ae)||!ie&&N||(U=!1)}S!=s&&[S,s].includes("proximity")&&(U=!1);var le=F.first(),se=kp(e,l,s,null,le),ue=Hu(e,l,s,null);!l&&N&&(ue=Object.keys(e.settings.valueSourcesInfo));var ce,pe=ue[0];1===R&&se&&void 0!==se.type?ce=se.type:1===R&&P&&void 0!==P.type&&(ce="!group"===P.type?"number":P.type);var de=U&&"operator"===u&&1===T&&2===R,fe=[],ge=[],ve=[],he=Array.from({length:R},(function(){return null}));if(U)for(var ye=function(t){var r=E.get(t),n=j.get(t)||null,o=F.get(t)||null;de&&1===t&&(r=void 0!==fe[0]?fe[0]:E.get(0),fe[t]=r,n=j.get(0)||null,o=F.get(0)||null);var i=!o||void 0!==ue.find((function(e){return e==o})),a=$(_u(e,l,l,s,r,n,o,C,c,p,d),2),u=a[0],f=a[1],g=!(null!=f&&f.length),v=u!==r,h=!g&&v&&!(null!=f&&f.find((function(e){return!e.fixed}))),y=!(null!=f&&f.find((function(e){return!e.fixed&&!e.ignore}))),m=!i||c&&!g&&!h&&(!y||W);g||null==f||f.map((function(e){return B.push(su(su({side:"rhs",delta:t},e),{},{fixed:e.fixed||m}))})),m&&(fe[t]=null,0===t&&delete fe[1]);var b=!g&&!v,O=null==f?void 0:f.find((function(e){return!e.fixed&&!e.ignore}));b&&O&&(he[t]=iu(O)),v&&(fe[t]=u),!de||0!==t||g||v||(de=!1),de&&0===t&&["func","field"].includes(o)&&(de=!1)},me=0;me<R;me++)ye(me);if(!U)for(var be=0;be<R;be++)if(1===R){var Oe,_e=xo([null==P?void 0:P.defaultValue,null==P||null===(Oe=P.fieldSettings)||void 0===Oe?void 0:Oe.defaultValue,null==se?void 0:se.defaultValue]);fe[be]=_e,null!=_e&&_e.func&&(ge[be]="func")}for(var we=0;we<R;we++){var Se,Ee,Fe=U&&F.get(we)||null,je=U&&j.get(we)||null;U&&de&&1===we&&(Fe=null!==(Se=ge[we])&&void 0!==Se?Se:F.get(0),je=null!==(Ee=ve[we])&&void 0!==Ee?Ee:j.get(0),ge[we]=Fe,ve[we]=je),ue.includes(Fe)||(ge[we]=pe),je||(ve[we]=ce)}var Le=E;(fe.length>0||!U||R<T)&&(Le=new no.List(Array.from({length:R},(function(e,t){return void 0!==fe[t]?fe[t]:U?E.get(t):void 0}))));var Ce=F;(ge.length>0||!U||R<T)&&(Ce=new no.List(Array.from({length:R},(function(e,t){var r;return null!==(r=ge[t])&&void 0!==r?r:U&&F.get(t)||null}))));var Ie=j;(ve.length>0||!U||R<T)&&(Ie=new no.List(Array.from({length:R},(function(e,t){var r;return null!==(r=ve[t])&&void 0!==r?r:U&&j.get(t)||null}))));var ke=Fu(e,l,s,Le,Ce);if(ke){var xe=iu(ke),Te=c&&R>=2,Re=Le;Te&&(fe[1]=Le.get(0),Le=Le.set(1,fe[1]),he[1]=he[0]),!Te&&he.push(xe),B.push(su(su({side:"rhs",delta:-1},ke),{},{fixed:Te,fixedFrom:Te?[Re.get(0),Re.get(1)]:void 0,fixedTo:Te?[Le.get(0),Le.get(1)]:void 0}))}var Ae=L,Pe=(null==L?void 0:L.size)!==he.length||he.filter((function(e,t){return e!=L.get(t)})).length>0;return Pe&&(Ae=new no.List(he)),{canReuseValue:U,newValue:Le,newValueSrc:Ce,newValueType:Ie,operatorCardinality:R,fixedField:l,newValueError:Ae,newFieldError:O,validationErrors:B}},Lu=function(e){return"object"==E(e)&&null!==e&&!Array.isArray(e)},Cu=function(e,t){if(e){var r=e.get("func"),n=r&&mp(t,r);if(n){var o=e,i=!1;for(var a in n.args){var l=n.args[a],s=l.valueSources,u=l.isOptional,c=l.defaultValue,p=Ku(t,s,l),d=o.get("args"),f=1==p.length?p[0]:void 0,g=d?d.get(a):void 0,v=g?g.get("value"):void 0,h=(g?g.get("valueSrc"):void 0)||f;if(void 0!==v){var y=ac(v,h,t);if(void 0===y)return;if(y!==v&&(o=o.setIn(["args",a,"value"],y)),i)return}else if(void 0===c||Lu(c)){if(!u)return;i=!0}else o=(o=o.setIn(["args",a,"value"],Tu(l))).setIn(["args",a,"valueSrc"],"value")}return o}}},Iu=function(e,t,r,n){var o=r.settings.fieldSeparator;e=e||new no.Map,Array.isArray(t)&&(t=t.join(o));var i=e.get("func"),a=e.get("args");e=e.set("func",t);var l=t&&mp(r,t),s=t&&yp(r,t),u=i&&yp(r,i),c=Pu(u,s,a,r,n);return e=c.length?Object.keys(s.args).filter((function(e){return!c.includes(e)})).reduce((function(e,t){return e.deleteIn(["args",t])}),e):e.set("args",new no.Map),ku(r,e,l)},ku=function(e,t,r){if(r)for(var n in r.args)t=xu(e,t,r,n);return t},xu=function(e,t,r,n){var o=r.args[n],i=o.valueSources,a=o.defaultValue,l=Ku(e,i,o),s=l.length?l[0]:void 0,u=(a?Lu(a)&&a.func?"func":"value":void 0)||s;return t.getIn(["args",n])||(void 0!==a&&(t=t.setIn(["args",n,"value"],Tu(o))),u&&(t=t.setIn(["args",n,"valueSrc"],u))),t},Tu=function(e){var t=e.defaultValue;return Lu(t)&&!no.Map.isMap(t)&&t.func?no.fromJS(t,(function(e,t){return no.Iterable.isIndexed(t)?t.toList():t.toOrderedMap()})):t},Ru=function(e,t,r,n,o){if(e&&e.get("func")){var i=(e=e.setIn(["args",t,"value"],r)).getIn(["args",t,"valueSrc"]),a=n.valueSources,l=Ku(o,a,n),s=1==l.length?l[0]:void 0;!s&&l.includes("value")&&(s="value"),!i&&s&&(e=e.setIn(["args",t,"valueSrc"],s))}return e},Au=function(e,t,r,n,o){return e&&e.get("func")&&(e=e.setIn(["args",t],new no.Map({valueSrc:r}))),e},Pu=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(null==e?void 0:e.returnType)!=(null==t?void 0:t.returnType)?[]:Object.keys(t.args).filter((function(i,a){var l=t.args[i],s=e.args[i];if(Object.keys(e.args).indexOf(i),!s&&(void 0!==l.defaultValue||l.isOptional))return!0;if((null==s?void 0:s.type)!=l.type)return!1;if(Nu.includes(l.type)&&(!s.listValuesType||s.listValuesType!==l.listValuesType))return!1;if(r){var u,c=r.get(i),p=null==c?void 0:c.get("value"),d=null==c?void 0:c.get("valueSrc");if(d&&l.valueSources&&!l.valueSources.includes(d))return!1;var f=$(_u(n,null,l,null,p,l.type,d,null,o,!0),2),g=(f[0],f[1]);if(null!=g&&null!==(u=g.filter((function(e){return!e.fixed})))&&void 0!==u&&u.length)return!1}return!0}))},Nu=["select","multiselect","treeselect","treemultiselect"],Du=function(e,t){var r;return(null===(r=e.types[t])||void 0===r?void 0:r.operators)||null},Vu=function(e,t){var r=Cp(e,t);return r?r.operators:[]},$u=function(e,t){var r,n=Vu(e,t);return null!==(r=null==n?void 0:n[0])&&void 0!==r?r:null},Mu=function(e,t,r){var n=null;if(e)if("field"===t){var o=Cp(r,e);o&&(n=o.type)}else if("func"===t){var i=e.get("func");if(i){var a=mp(r,i);a&&(n=a.returnType||a.type)}}return n},zu=function(e,t){return qu(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,"funcs","subfields")},qu=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fields",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"subfields";if(!e)return null;var i=t.settings.fieldSeparator,a=wp(e,t),l=wp(r,t);return a.slice(l.length).map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return[].concat(z(l),z(e)).join(i)})).map((function(e){var r=vp(t,e,n,o);return r&&r.label||Vo()(e.split(i))})).filter((function(e){return null!=e}))},Wu=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;var n=r&&vp(t,r)||null,o=t.settings.fieldSeparator,i=wp(e,t),a=Op(e,r,t)?wp(r,t):[];return i.slice(a.length).map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return{part:[].concat(z(a),z(e)).join(o),key:e[e.length-1]}})).map((function(e){var r=e.part;return{key:e.key,cnf:vp(t,r)}})).map((function(e,t,r){return[e.key,e.cnf,t>0?r[t-1].cnf:n]}))},Bu=function(e,t,r,n){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=kp(e,t,r,null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:null)||{},a=Ip(e,r,t)||{},l=null;if((o?1:a.cardinality)>1){var s=i.valueLabels||a.valueLabels;s&&(l=s[n]),l&&"object"!==E(l)&&(l={label:l,placeholder:l}),l||(l={label:e.settings.valueLabel+" "+(n+1),placeholder:e.settings.valuePlaceholder+" "+(n+1)})}else{var u=i.valueLabel,c=i.valuePlaceholder;l={label:u||e.settings.valueLabel,placeholder:c||e.settings.valuePlaceholder}}return l};function Uu(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=[],i=[];if(!t)return{widgets:o,valueSrcs:i};var a=Ep(t),l=a?"".concat(a,"__").concat(r,"__").concat(n):null,s=Fp(e,"_getWidgetsAndSrcsForFieldOp",l);if(s)return s;var u="object"===E(t)&&(!!t.func&&!!t.arg||t._isFuncArg),c=Cp(e,t),p=r?e.operators[r]:null;if(null!=c&&c.widgets){var d=function(){var a=c.widgets[f];if(!e.widgets[f])return 1;var l=e.widgets[f].valueSrc||"value",s=!0;if("field"===f&&(s=s&&Ku(e,["field"],c).length>0),"func"===f&&(s=s&&Ku(e,["func"],c).length>0),"value"!==n||a.operators||u||"!case_value"===t||(s=!1),a.operators&&r&&(s=s&&-1!=a.operators.indexOf(r)),n&&n!=l&&"const"!==n&&(s=!1),p&&0==p.cardinality&&"value"!==l&&(s=!1),s){var d,g;o.push(f);var v=-1!=(null===(d=c.valueSources)||void 0===d?void 0:d.indexOf(l));-1==(null==p||null===(g=p.valueSources)||void 0===g?void 0:g.indexOf(l))&&(v=!1),v&&!i.find((function(e){return e==l}))&&i.push(l)}};for(var f in c.widgets)d()}var g=function(e){var t=0;return c.preferWidgets?c.preferWidgets.includes(e)&&(t+=10-c.preferWidgets.indexOf(e)):e==c.mainWidget&&(t+=100),"field"===e&&(t-=1),"func"===e&&(t-=2),t};o.sort((function(e,t){return g(t)-g(e)}));var v={widgets:o,valueSrcs:i};return jp(e,"_getWidgetsAndSrcsForFieldOp",l,v),v}var Gu=function(e,t,r){return Uu(e,t,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null).widgets},Ku=function(e,t,r){var n;if(!r)return t;var o=null!==(n=r.type)&&void 0!==n?n:r.returnType;return"!group"===o&&(o="number"),t||(t=Object.keys(e.settings.valueSourcesInfo)),t.filter((function(t){var n=!0;if("field"===t&&e.__fieldsCntByType){var i=r._isFuncArg?0:1;n=n&&e.__fieldsCntByType[o]>i}return"func"===t&&(r.funcs&&(n=n&&r.funcs.length>0),e.__funcsCntByType&&(n=n&&e.__funcsCntByType[o]>0)),n}))},Hu=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=Uu(e,t,r,null).valueSrcs;return Ku(e,o,n)},Xu=function(e,t,r){var n=Uu(e,t,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null).widgets,o=null;return n.length&&(o=n[0]),o},Ju=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(e){var i=Cp(t,e)||{},a=t.settings.fieldSeparator,l=wp(e,t),s=Array.isArray(e)?e.join(a):e;if(null!=o&&o.useTableName&&i.tableName){var u=z(l);u[0]=i.tableName,s=u.join(a)}if(i.fieldName&&(s=i.fieldName),n){Cp(t,n);var c=n;0==s.indexOf(c+a)?s=s.slice((c+a).length):i.fieldName||r.errors.push("Can't cut group ".concat(c," from field ").concat(s))}return s}},Yu=function(e,t){var r=e.get("type"),n=e.getIn(["properties","mode"]);return"rule_group"==r&&"array"==n?Qu(e,t):"group"==r||"rule_group"==r?ec(e,t):rc(e,t)},Qu=function(e,t){var r=e.get("children1"),n=e.get("properties");return Zu(n.toObject(),r,t)},Zu=function(e,t,r){var n,o,i=e.operator,a=0==(null!==(n=null===(o=r.operators[i])||void 0===o?void 0:o.cardinality)&&void 0!==n?n:1),l=!nc(e,r),s=!tc(t,r);return!(l&&(!a||s))},ec=function(e,t){var r=e.get("children1");return tc(r,t)},tc=function(e,t){return!((null==e?void 0:e.size)>0&&e.filter((function(e){return!Yu(e,t)})).size>0)},rc=function(e,t){var r=e.get("properties");return nc((null==r?void 0:r.toObject())||{},t)},nc=function(e,t){return!(oc(e,t,!0).score>=3)},oc=function(e,t){var r,n,o,i=e.field,a=e.fieldSrc,l=(e.fieldType,e.operator),s=e.value,u=e.valueSrc,c=(e.valueType,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),p=null!==(r=null===(n=t.operators[l])||void 0===n?void 0:n.cardinality)&&void 0!==r?r:1,d=null!=u&&u.get?u.toJS():u,f={parts:{},score:0};if(f.parts.field=c?null!=i:ic(i,a,t),f.parts.operator=!!l,f.parts.value=(null==s||null===(o=s.filter((function(e,r){return ic(e,null==d?void 0:d[r],t,c)})))||void 0===o?void 0:o.size)>=(c?Math.min(p,1):p),f.score=Object.keys(f.parts).filter((function(e){return!!f.parts[e]})).length,c&&f.score<3){var g=!0;!f.parts.value&&"func"===a&&ic(i,a,t,!1,g)&&f.score++,f.parts.field||null==s||s.map((function(e,r){"func"===(null==d?void 0:d[r])&&ic(e,null==d?void 0:d[r],t,!1,g)&&f.score++}))}return f},ic=function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(!o&&"func"==r&&t){var a,l=null===(a=t.get)||void 0===a?void 0:a.call(t,"func"),s=mp(n,l);if(s){var u=t.get("args");for(var c in s.args){var p=s.args[c],d=u?u.get(c):void 0,f=d?d.get("value"):void 0,g=d?d.get("valueSrc"):void 0;if(null==f&&void 0===(null==p?void 0:p.defaultValue)&&(null==p||!p.isOptional))return!1;if(null!=f&&!e(f,g,n,!i||o))return!1}return!0}}return null!=t},ac=function(e,t,r){return"func"==t?Cu(e,r):e},lc=function e(t){var r=t.get("children1");if(1==(null==r?void 0:r.size)){var n=r.first();return"group"===n.get("type")?e(n):n}return null},sc=r(4308),uc=r.n(sc),cc=r(3523),pc=r.n(cc),dc=r(502),fc=r.n(dc);function gc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gc(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hc(e,t){return fc().apply(e,t)}var yc={CALL:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return e.call.apply(e,[t].concat(n))},JSX:function(e,t){return{type:e,props:t}},mergeObjects:function(e,t){return vc(vc({},e),t)},fromEntries:function(e){return Object.fromEntries(e)},strlen:function(e){return(null==e?void 0:e.length)||0},regexTest:function(e,t,r){return null!=(null==e?void 0:e.match(new RegExp(t,r)))},now:function(){return new Date},date_add:function(e,t,r){return wi()(e).add(t,r).toDate()},toLowerCase:function(e){return e.toLowerCase()},toUpperCase:function(e){return e.toUpperCase()}};function mc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bc(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _c(e,t,r){var n;try{n=fc().apply(e,t)}catch(e){throw e.message="".concat(r.join(".")," :: ").concat(e.message),e}return n}function wc(e,t,r,n){var o;try{o=t.call.apply(t,[e].concat(z(r)))}catch(e){throw e.message="".concat(n.join(".")," :: ").concat(e.message),e}return o}!function(){for(var e in yc)t=e,r=yc[e],fc().add_operation(t,r);var t,r}();var Sc=["conjunctions","fields","types","operators","widgets","settings","funcs","ctx"],Ec={asyncFetch:{type:"f",args:["search","offset"]},labelYes:{type:"r"},labelNo:{type:"r"},marks:{type:"r",isArr:!0},validateValue:{type:"f",args:["val","fieldSettings","op","opDef","rightFieldDef"]}},Fc=Oc(Oc({},Ec),{},{factory:{type:"rf"},formatValue:{type:"f",args:["val","fieldDef","wgtDef","isForDisplay","op","opDef","rightFieldDef"]},sqlFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef","rightFieldDef"]},spelFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef","rightFieldDef"]},spelImportValue:{type:"f",args:["val","wgtDef","args"]},mongoFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef"]},elasticSearchFormatValue:{type:"f",args:["queryType","val","op","field","config"]},jsonLogic:{type:"f",args:["val","fieldDef","wgtDef","op","opDef"]},jsonLogicImport:{type:"f",args:["val"]},validateValue:{type:"f",args:["val","fieldSettings","op","opDef","rightFieldDef"]},toJS:{type:"f",args:["val"]}}),jc={options:{factory:{type:"rf"}},formatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","isForDisplay","fieldDef"]},mongoFormatOp:{type:"f",args:["field","op","vals","useExpr","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},sqlFormatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},spelFormatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},jsonLogic:{type:"f",ignore:"string",args:["field","op","vals","opDef","operatorOptions","fieldDef"]},elasticSearchQueryType:{type:"f",ignore:"string",args:["valueType"]},textSeparators:{type:"r",isArr:!0}},Lc={widgetProps:Fc,opProps:jc},Cc=Oc(Oc({},Ec),{},{fieldSettings:Ec}),Ic=Oc(Oc({},Ec),{},{fieldSettings:Ec,widgets:{x:Lc},mainWidgetProps:Fc}),kc={locale:{mui:{type:"f",args:[],invokeWith:[],ignore:"jl"}},caseValueField:Ic,canCompareFieldWithField:{type:"f",args:["leftField","leftFieldConfig","rightField","rightFieldConfig","op"]},formatReverse:{type:"f",args:["q","op","reversedOp","operatorDefinition","revOperatorDefinition","isForDisplay"]},sqlFormatReverse:{type:"f",args:["q"]},spelFormatReverse:{type:"f",args:["q"]},formatField:{type:"f",args:["field","parts","label2","fieldDefinition","config","isForDisplay"]},formatSpelField:{type:"f",args:["field","parentField","parts","partsExt","fieldDefinition","config"]},formatAggr:{type:"f",args:["whereStr","aggrField","operator","value","valueSrc","valueType","opDef","operatorOptions","isForDisplay","aggrFieldDef"]},normalizeListValues:{type:"f",args:["listValues","type","fieldSettings"]},renderConfirm:{type:"f",args:["props"]},useConfirm:{type:"f",args:[]},renderField:{type:"rf"},renderOperator:{type:"rf"},renderFunc:{type:"rf"},renderConjs:{type:"rf"},renderButton:{type:"rf"},renderIcon:{type:"rf"},renderButtonGroup:{type:"rf"},renderValueSources:{type:"rf"},renderFieldSources:{type:"rf"},renderProvider:{type:"rf"},renderSwitch:{type:"rf"},renderSwitchPrefix:{type:"r"},renderItem:{type:"rf"},renderBeforeWidget:{type:"rf"},renderAfterWidget:{type:"rf"},renderBeforeActions:{type:"rf"},renderAfterActions:{type:"rf"},renderBeforeCaseValue:{type:"rf"},renderAfterCaseValue:{type:"rf"},renderRuleError:{type:"rf"}},xc={fields:{x:Ic},widgets:{x:Fc},conjunctions:{x:{formatConj:{type:"f",args:["children","conj","not","isForDisplay"]},sqlFormatConj:{type:"f",args:["children","conj","not"]},spelFormatConj:{type:"f",args:["children","conj","not","omitBrackets"]}}},operators:{x:jc},types:{x:{widgets:{x:Lc}}},funcs:{x:Oc(Oc(Oc({},Cc),{renderBrackets:{type:"r",isArr:!0},renderSeps:{type:"r",isArr:!0},jsonLogic:{type:"f",ignore:"string",args:["formattedArgs"]},jsonLogicImport:{type:"f",args:["val"]},spelImport:{type:"f",args:["spel"]},formatFunc:{type:"f",args:["formattedArgs","isForDisplay"]},sqlFormatFunc:{type:"f",args:["formattedArgs"]},mongoFormatFunc:{type:"f",args:["formattedArgs"]},spelFormatFunc:{type:"f",args:["formattedArgs"]}}),{},{args:{x:Oc({},Cc)}})},settings:kc},Tc=function(e){return"object"==E(e)&&null!==e&&!Array.isArray(e)},Rc=function(e,t){if(e.__fieldNames)throw new Error("Don't apply `compressConfig()` to extended config");var r=No()(e,Sc);delete r.ctx;for(var n=function e(t,r,n,o){if(Tc(t)){if(So(t)&&(t=wo(t)),"funcs"===n[0]&&!r){var i=n[n.length-1];(r=vp({funcs:o.BasicFuncs},i,"funcs","subfields")||void 0)&&(t.$$key=i)}if(void 0!==r&&Tc(r))for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(!Object.keys(t).includes(a)||void 0===t[a]&&void 0!==r[a]?t[a]="$$deleted":(t[a]=e(t[a],r[a],[].concat(z(n),[a]),o),void 0===t[a]&&delete t[a]));for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var s;r&&Object.keys(r).includes(l)||(t[l]=e(t[l],null===(s=r)||void 0===s?void 0:s[l],[].concat(z(n),[l]),o)),void 0===t[l]&&delete t[l]}0===Object.keys(t).length&&(t=void 0)}else Array.isArray(t)&&t.forEach((function(r,i){t[i]=e(t[i],void 0,[].concat(z(n),[i]),o)}));if(void 0===r||!vo(t,r,!0)){if("function"==typeof t)throw new Error("compressConfig: function at ".concat(n.join(".")," should be converted to JsonLogic"));return t}},o=0,i=Sc;o<i.length;o++){var a=i[o];if("ctx"===a);else if("fields"===a)r[a]=pc()(r[a]),n(r[a],{},[a]);else if("funcs"===a)for(var l in r[a]=pc()(r[a]||{}),r[a])n(r[a][l],null,[a,l],{BasicFuncs:h});else r[a]=pc()(r[a]),n(r[a],t[a],[a])}return r},Ac=function(e,t,r){if(!e.settings.useConfigCompress)throw new Error("Please enable `useConfigCompress` in config settings to use decompressConfig()");for(var n={},o=function e(t,r,n){if(Tc(r))for(var o in Tc(t)||(t={}),r)Object.prototype.hasOwnProperty.call(r,o)&&("$$deleted"===r[o]?delete t[o]:t[o]=e(t[o],r[o],[].concat(z(n),[o])));else t=Array.isArray(r)?pc()(r):r;return t},i=function e(t,r,n){var i=!1;if(Tc(t)&&Object.prototype.hasOwnProperty.call(t,"$$key")&&t.$$key){var a=vp({funcs:n.BasicFuncs},t.$$key,"funcs","subfields");if(!a)throw new Error("decompressConfig: basic function not found by key ".concat(t.$$key," at ").concat(r.join(".")));delete t.$$key,t=o(pc()(a),t,r),i=!0}if(!i)if(Tc(t))for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(t[l]=e(t[l],[].concat(z(r),[l]),n));else if(Array.isArray(t)){var s,u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return mc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(t);try{for(u.s();!(s=u.n()).done;){var c=s.value;t[c]=e(t[c],[].concat(z(r),[c]),n)}}catch(e){u.e(e)}finally{u.f()}}return t},a=0,l=Sc;a<l.length;a++){var s=l[a];"ctx"===s?n[s]=uc()({},t.ctx||{},r||{}):"funcs"===s?(n[s]=pc()(e[s]||{}),i(n[s],[s],{BasicFuncs:h})):"fields"===s?n[s]=pc()(e[s]||{}):(n[s]=pc()(t[s]||{}),o(n[s],e[s]||{},[s]))}return n},Pc=function(e){return e.__compliled||(Nc(e=pc()(e),e,{ctx:e.ctx},xc,[]),Object.defineProperty(e,"__compliled",{enumerable:!1,writable:!1,value:!0})),e};function Nc(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];if(t)for(var a in i.length,n){var l=n[a],s="x"===a?i:[].concat(z(i),[a]);if("r"===l.type){var u=t,c=u[a];if(l.isArr)for(var p in c){var d=$c(c[p],r,[].concat(z(s),[p]));d!==c[p]&&(o.push("Compiled ".concat(s.join("."),"[").concat(p,"]")),c[p]=d)}else{var f=$c(c,r,s,void 0);f!==c&&(o.push("Compiled R ".concat(s.join("."))),u[a]=f)}}else if("rf"===l.type){var g=t,v=g[a],h=Dc(v,r,s,l.ignore);h!==v&&(o.push("Compiled JL-RF ".concat(s.join("."))),g[a]=h)}else if("f"===l.type){var y,m=t,b=m[a],O=Vc(b,r,s,l.args,l.ignore);l.invokeWith&&O&&"function"==typeof O&&(O=(y=O).call.apply(y,[null].concat(z(l.invokeWith)))),O!==b&&(o.push("Compiled JL-F ".concat(s.join("."))),m[a]=O)}else if("x"===a)for(var _ in t){s=[].concat(z(i),[_]);var w=t[_];Nc(e,w,r,l,o,s),w.subfields&&Nc(e,w.subfields,r,n,o,s)}else Nc(e,t[a],r,l,o,s)}}function Dc(e,t,r){return Fo(e)?function(n,o){o=o||(null==t?void 0:t.ctx);var i=_c(e,{props:n,ctx:o},r);return"string"==typeof i&&(i={type:i,props:n}),$c(i,{ctx:o},r)}:"string"==typeof e?function(n,o){o=o||(null==t?void 0:t.ctx);var i=e.split(".").reduce((function(e,t){return null==e?void 0:e[t]}),o);return i?wc(this,i,[n,o],r):$c({type:e,props:n},{ctx:o},r)}:e}function Vc(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return Fo(e)&&"jl"!==o?function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var l=this||(null==t?void 0:t.ctx),s=(n||[]).reduce((function(e,t,r){return Oc(Oc({},e),{},A({},t,i[r]))}),{args:i,ctx:l});return _c(e,s,r)}.bind(null==t?void 0:t.ctx):"string"==typeof e&&"string"!==o?function(){var n=this||(null==t?void 0:t.ctx),o=e.split(".").reduce((function(e,t){return null==e?void 0:e[t]}),n);if(o){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return wc(this,o,a,r)}throw new Error("".concat(r.join(".")," :: Function ").concat(e," is not found in ctx"))}.bind(null==t?void 0:t.ctx):e}function $c(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(Eo(e)){var o,i=e.type,a=e.props;if("string"!=typeof i)throw new Error("renderReactElement for ".concat(r.join("."),": type should be string"));var l,s=function(e,t){var r;return(null==t||null===(r=t.components)||void 0===r?void 0:r[e])||t.W[e]||t.O[e]}(i,t.ctx)||i.toLowerCase();return void 0!==n&&(a=Oc(Oc({},a),{},{key:n})),null!==(o=a)&&void 0!==o&&o.children&&(l=$c(a.children,t,r),a=Oc(Oc({},a),{},{children:l})),t.ctx.RCE(s,a)}return e instanceof Array?e.map((function(e,n){return $c(e,t,r,""+n)})):e}var Mc=r(2815),zc=r.n(Mc),qc={reverseOperatorsForNot:!1,canShortMongoQuery:!0,formatField:function(e,t,r,n,o,i){return i?r:e},caseValueField:{type:"case_value"},fieldSources:["field"],keepInputOnChangeFieldSrc:!0,fieldItemKeysForSearch:["label","path","altLabel","grouplabel"],listKeysForSearch:["title","value"],valueSourcesInfo:{value:{}},fieldSeparator:".",fieldSeparatorDisplay:".",canReorder:!0,canRegroup:!0,canDeleteLocked:!1,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,exportPreserveGroups:!1,removeEmptyGroupsOnLoad:!0,removeEmptyRulesOnLoad:!0,removeIncompleteRulesOnLoad:!1,removeInvalidMultiSelectValuesOnLoad:!0,showErrorMessage:!1,setOpOnChangeField:["keep","default"],groupOperators:["some","all","none"],defaultConjunction:"AND",defaultGroupConjunction:"AND",locale:{moment:"en"},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:"Delete",addGroupLabel:"Add group",addCaseLabel:"Add condition",addDefaultCaseLabel:"Add default condition",defaultCaseLabel:"Default:",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",addSubGroupLabel:"Add sub group",delGroupLabel:"Delete",notLabel:"Not",fieldSourcesPopupTitle:"Select source",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:null,removeGroupConfirmOptions:null};function Wc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Bc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function Bc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Uc,Gc=0,Kc=0,Hc={},Xc=function(){return Uc||(Uc=Yc({reactIndex:void 0,maxSize:3,canCompile:void 0})),Uc},Jc=function(e,t){var r;for(var n in Hc){var o=Hc[n].findExtendedConfig(e,t);if(o){r=o;break}}return r},Yc=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{reactIndex:void 0,maxSize:2,canCompile:!0},r=new Map,n=t.maxSize||2,o=++Gc,i=function(e,t){r.size+1>n&&r.delete(r.keys().next().value),r.set(e,t)},a=function(e,t){var n,o=Wc(r.keys());try{var i,a=function(){var o=n.value;if(Sc.filter((function(t){return o[t]===e[t]})).length===Sc.length&&(!t||o.__compliled))return{v:r.get(o)}};for(o.s();!(n=o.n()).done;)if(i=a())return i.v}catch(e){o.e(e)}finally{o.f()}var l,s=Wc(r.values());try{var u,c=function(){var r=l.value;if(Sc.filter((function(t){return r[t]===e[t]})).length===Sc.length&&(!t||r.__compliled))return{v:r}};for(s.s();!(l=s.n()).done;)if(u=c())return u.v}catch(e){s.e(e)}finally{s.f()}return null};return e={getExtendedConfig:function(e){return function(e){return a(e)||function(e){var r=rp(e,++Kc,t.canCompile);return i(e,r),r}(e)}(function(e){return No()(e,Sc)}(e))},findExtendedConfig:a,getBasicConfig:function(e){var t,n=Wc(r.keys());try{var o,i=function(){var n=t.value,o=r.get(n);if(0===Sc.map((function(t){return o[t]===e[t]})).filter((function(e){return!e})).length)return{v:n}};for(n.s();!(t=n.n()).done;)if(o=i())return o.v}catch(e){n.e(e)}finally{n.f()}return e},clearConfigMemo:function(){r.clear(),delete Hc[o],Uc===e&&(Uc=void 0)},configId:Kc,storeConfigPair:i,getSize:function(){return r.size},configStore:r,memoId:o,meta:t},void 0===t.reactIndex&&(Uc=e),Hc[o]=e,e};function Qc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Zc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function Zc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ep(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ep(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rp=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r=r&&e.settings.useConfigCompress,e.__configId)return e;var n=Jc(e,r);if(n)return n;var o=e;(e=r?e.__compliled?pc()(e):Pc(e):pc()(e)).settings=zc()({},qc,e.settings,_o),e.__fieldsCntByType={},e.__funcsCntByType={},e.__fieldNames={},function(e,t){for(var r in e)np(0,e[r],t)}(e.types,e),op(e.fields,e),ip(e.funcs,e);var i=e.settings.caseValueField;i&&ap(i,e,[],!1,!0);var a=e.settings.locale.moment;return a&&wi().locale(a),Object.defineProperty(e,"__configId",{enumerable:!1,writable:!1,value:t||io()}),e.__cache={},Co(e),Xc().storeConfigPair(o,e),e};function np(e,t,r){var n=null,o=null;t.mainWidget=t.mainWidget||Object.keys(t.widgets).filter((function(e){return"field"!=e&&"func"!=e}))[0];var i=t.excludeOperators||[];for(var a in t.widgets){var l=t.widgets[a],s=l.defaultOperator;l.operators&&(n=Lo(n,l.operators.filter((function(e){return!i.includes(e)})))),s&&!i.includes(s)&&(o&&a!==t.mainWidget||(o=s)),a==t.mainWidget&&(l.widgetProps=tp(tp({},t.mainWidgetProps||{}),l.widgetProps||{})),t.widgets[a]=l}t.valueSources||(t.valueSources=Object.keys(r.settings.valueSourcesInfo));var u,c=Qc(t.valueSources);try{for(c.s();!(u=c.n()).done;){var p=u.value;"value"==p||t.widgets[p]||(t.widgets[p]={})}}catch(e){c.e(e)}finally{c.f()}!t.operators&&n&&(t.operators=Array.from(new Set(n))),!t.defaultOperator&&o&&(t.defaultOperator=o)}function op(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(var n in e){var o=[].concat(z(r),[n]);ap(e[n],t,o),e[n].subfields&&op(e[n].subfields,t,o)}}function ip(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e){var o=(null==t||null===(r=t.settings)||void 0===r?void 0:r.fieldSeparator)||".";for(var i in e){var a=[].concat(z(n),[i]),l=a.join(o),s=e[i];if(s.returnType&&(s.type=s.returnType,t.__funcsCntByType[s.returnType]||(t.__funcsCntByType[s.returnType]=0),t.__funcsCntByType[s.returnType]++),ap(s,t,a,!1),s.args){for(var u in s.args)ap(s.args[u],t,[].concat(z(a),[u]),!0);var c,p=!0,d=Qc(Object.keys(s.args).reverse());try{for(d.s();!(c=d.n()).done;){var f=c.value,g=s.args[f];!p&&g.isOptional&&(To.info("Arg ".concat(f," for func ").concat(l," can't be optional")),delete g.isOptional),g.isOptional||(p=!1)}}catch(e){d.e(e)}finally{d.f()}}s.subfields&&ip(s.subfields,t,[].concat(z(n),[i]))}}}function ap(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t.settings,l=a.showLabels,s=a.fieldSeparator;s=null!==(r=s)&&void 0!==r?r:".";var u=n[n.length-1],c=o?n.slice(0,n.length-1).join(s):n.join(s),p=!!e.returnType,d=e.type||e.returnType,f=t.types[d],g=e.excludeOperators||[],v=(e.operators||(null==f?void 0:f.operators)||[]).filter((function(e){return!g.includes(e)})),h=e.defaultOperator||(null==f?void 0:f.defaultOperator);g.includes(h)&&(h=void 0);var y=!!h&&h==e.defaultOperator;if(y&&(e.ownDefaultOperator=e.defaultOperator),f){o||p||i||(t.__fieldsCntByType[d]||(t.__fieldsCntByType[d]=0),t.__fieldsCntByType[d]++),o&&(e._isFuncArg=!0,e._argKey=u,e._funcKey=c),p&&(e._isFunc=!0,e._funcKey=c),i&&(e._isCaseValue=!0),function(e,t,r){for(var n,o,i=0,a=["listValues","treeValues","allowCustomValues","validateValue"];i<a.length;i++){var l=a[i];e[l]&&(e.fieldSettings||(e.fieldSettings={}),e.fieldSettings[l]=e[l],delete e[l])}null!==(n=e.fieldSettings)&&void 0!==n&&n.listValues&&t.settings.normalizeListValues&&(e.fieldSettings.listValues=t.settings.normalizeListValues.call(t.ctx,e.fieldSettings.listValues,r,e.fieldSettings)),null!==(o=e.fieldSettings)&&void 0!==o&&o.treeValues&&t.settings.normalizeListValues&&(e.fieldSettings.treeValues=t.settings.normalizeListValues.call(t.ctx,e.fieldSettings.treeValues,r,e.fieldSettings))}(e,t,d);var m=["widgets","operators","defaultOperator"];Object.keys(f).filter((function(e){return!m.includes(e)})).map((function(t){e[t]||(e[t]=co(f[t]))}));var b=f.excludeOperators||[];e.operators&&(b=b.filter((function(t){return!e.operators.includes(t)}))),e.widgets||(e.widgets={});var O=function(){var t=tp({},e.widgets[_]||{}),r=f.widgets[_]||{};if(!o){var n=t.defaultOperator,i=[].concat(z(g),z(b)),a=e.preferWidgets&&("field"===_||e.preferWidgets.includes(_))||i.length>0;if(t.operators){var s=t.operators.filter((function(e){return!i.includes(e)}));t.operators=s,v=Lo(v,s)}else if(a&&r.operators){var c=r.operators.filter((function(e){return!i.includes(e)}));t.operators=c,v=Lo(v,c)}n&&!i.includes(n)&&(h&&(y||_!==e.mainWidget)||(h=n))}_===e.mainWidget?t.widgetProps=tp(tp(tp({},r.widgetProps||{}),e.mainWidgetProps||{}),t.widgetProps||{}):t.widgetProps=tp(tp({},r.widgetProps||{}),t.widgetProps||{});var p=Array.from(new Set([].concat(z(Object.keys(r.opProps||{})),z(Object.keys(t.opProps||{})))));if(p.length){var d,m={},O=Qc(p);try{for(O.s();!(d=O.n()).done;){var w,S,E=d.value;m[E]=tp(tp({},(null===(w=r.opProps)||void 0===w?void 0:w[E])||{}),(null===(S=t.opProps)||void 0===S?void 0:S[E])||{})}}catch(e){O.e(e)}finally{O.f()}t.opProps=m}var F=t,j=F.valueLabel,L=F.valuePlaceholder;o&&(j||(t.valueLabel=e.label||u),L||l||(t.valuePlaceholder=e.label||u)),t=tp(tp({},r),t),e.widgets[_]=t};for(var _ in f.widgets)O();if(o||(e.operators||(e.operators=Array.from(new Set(v))),e.defaultOperator||(e.defaultOperator=h)),!o&&!p&&!i){var w=function(e,t){if(!t)return{};var r=e.settings.fieldSeparator,n=z(t).reduce((function(t,n,o,i){var a=t.computedPath,l=t.computed,s=t.inGroup,u=[].concat(z(i.slice(0,o)),[n]),c=vp(e,u);return"!group"===(null==c?void 0:c.type)&&o<i.length-1?(s=u.join(r),a=[]):null!=c&&c.fieldName?(l=!0,a=[c.fieldName]):a=[].concat(z(a),[n]),{computedPath:a,computed:l,inGroup:s}}),{computedPath:[],computed:!1,inGroup:void 0}),o=n.computedPath,i=n.computed,a=n.inGroup;return i?{fieldName:o.join(r),inGroup:a}:{}}(t,n),S=w.fieldName,E=w.inGroup;S&&(e.fieldName=S,t.__fieldNames[S]||(t.__fieldNames[S]=[]),t.__fieldNames[S].push({fullPath:n,inGroup:E}))}}else e.disabled=!0}function lp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lp(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var up=Ao().mark(dp),cp=Ao().mark(fp),pp=lo;function dp(e){return Ao().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(gp(e,e.funcs||{},[]),"t0",1);case 1:case"end":return t.stop()}}),up)}function fp(e){return Ao().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(gp(e,e.fields||{},[]),"t0",1);case 1:case"end":return t.stop()}}),cp)}function gp(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"subfields";return Ao().mark((function o(i){var a,l,s;return Ao().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:a=(null==e||null===(i=e.settings)||void 0===i?void 0:i.fieldSeparator)||".",o.t0=Ao().keys(t);case 2:if((o.t1=o.t0()).done){o.next=13;break}if(l=o.t1.value,!(s=t[l])[n]){o.next=9;break}return o.delegateYield(gp(e,s[n],[].concat(z(r),[l]),n),"t2",7);case 7:o.next=11;break;case 9:return o.next=11,[[].concat(z(r),[l]).join(a),s];case 11:o.next=2;break;case 13:case"end":return o.stop()}}),o)}))()}var vp=function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fields",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"subfields";if(!t)return null;if("!case_value"===t)return null==e||null===(n=e.settings)||void 0===n?void 0:n.caseValueField;var a=(null==e||null===(r=e.settings)||void 0===r?void 0:r.fieldSeparator)||".",l=wp(t,e),s=e[o];if(!s)return null;for(var u=s,c=null,p=[],d=0;d<l.length;d++){var f=l[d];p.push(f),c=u[p.join(a)],d<l.length-1&&(c&&c[i]?(u=c[i],p=[]):c=null)}return c},hp=function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.settings.fieldSeparator,a=[o].concat(z(t.split(i))).filter((function(e){return null!=e})),l=t;return((null===(r=e.__fieldNames[l])||void 0===r||null===(n=r.find)||void 0===n||null===(n=n.call(r,(function(e){var t=e.inGroup;return!t||(null==o?void 0:o.startsWith(t))})))||void 0===n?void 0:n.fullPath)||a).join(i)},yp=function(e,t){if(!t)return null;var r=vp(e,t,"funcs","subfields");if(!r)return null;var n=r.returnType,o=r.args;return{returnType:n,args:Object.fromEntries(Object.entries(o||{}).map((function(e){var t=$(e,2),r=t[0],n=t[1];return[r,No()(n,["type","valueSources","defaultValue","fieldSettings","isOptional","_funcKey","_argKey","_isFuncArg"])]})))}},mp=function(e,t){return t&&vp(e,t,"funcs","subfields")||null},bp=function(e,t,r){var n=mp(e,t);return n&&(n.args&&n.args[r]||null)||null},Op=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return!1;var o=(null==n||null===(r=n.settings)||void 0===r?void 0:r.fieldSeparator)||".",i=_p(e,n),a=_p(t,n);return i.startsWith(a+o)},_p=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e)return e;var n=(null==r||null===(t=r.settings)||void 0===t?void 0:t.fieldSeparator)||".";return wp(e,r).join(n)},wp=function(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return[];if(Array.isArray(e))return e;var i,a=(null==o||null===(t=o.settings)||void 0===t?void 0:t.fieldSeparator)||".";return null!=e&&e.func?Array.isArray(e.func)?e.func:e.func.split(a):null!=e&&null!==(r=e.get)&&void 0!==r&&r.call(e,"func")?null==e||null===(i=e.get)||void 0===i?void 0:i.call(e,"func").split(a):(null==e||null===(n=e.split)||void 0===n?void 0:n.call(e,a))||[]},Sp=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;var n=t.settings.fieldSeparator,o=wp(e,t);return r?o:o.map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return e.join(n)}))},Ep=function(e){var t;if("string"==typeof e||Array.isArray(e))return"field:".concat(_p(e));if("object"===E(e)&&e){if(e._funcKey&&e._argKey)return"arg:".concat(_p(e._funcKey),"__").concat(e._argKey);if(e._funcKey)return"func:".concat(_p(e._funcKey));if(e.func&&e.arg)return"arg:".concat(_p(e.func),"__").concat(e.arg);if(e.func)return"func:".concat(_p(e.func));if(e.type)return null}return null!=e&&null!==(t=e.get)&&void 0!==t&&t.call(e,"func")?null!=e&&e.get("arg")?"arg:".concat(_p(e.get("func")),"__").concat(e.get("arg")):"func:".concat(_p(e.get("func"))):null},Fp=function(e,t,r){var n;return null===(n=e.__cache)||void 0===n||null===(n=n[t])||void 0===n?void 0:n[r]},jp=function(e,t,r,n){e.__cache&&r&&(e.__cache[t]||(e.__cache[t]={}),e.__cache[t][r]=n)},Lp=function(e){var t;if(!e)return null;if("object"===E(e)){if(!e.func&&e.type)return"field";if(e.func)return e.func&&e.arg?null:"func"}return null!=e&&null!==(t=e.get)&&void 0!==t&&t.call(e,"func")?null!=e&&e.get("arg")?null:"func":"field"},Cp=function(e,t){var r;if(!t)return null;if("object"==E(t)){if(!t.func&&t.type)return t;if(t.func)return t.func&&t.arg?bp(e,t.func,t.arg):mp(e,t.func)}return null!=t&&null!==(r=t.get)&&void 0!==r&&r.call(t,"func")?null!=t&&t.get("arg")?bp(e,t.get("func"),t.get("arg")):mp(e,t.get("func")):vp(e,t)||null},Ip=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;var n=e.operators[t];if(r){var o,i,a=Ep(r),l=a?"".concat(a,"__").concat(t):null,s=Fp(e,"getOperatorConfig",l);if(s)return s;var u=Cp(e,r),c=Xu(e,r,t,null),p=e.widgets[c]||{},d=(u&&u.widgets?u.widgets[c]:{})||{},f=(null===(o=p.opProps)||void 0===o?void 0:o[t])||{},g=(null===(i=d.opProps)||void 0===i?void 0:i[t])||{},v=sp(sp(sp({},n),f),g);return jp(e,"getOperatorConfig",l,v),v}return n},kp=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!t)return null;var l=Cp(e,t),s=Ep(t);o||(o=Xu(e,t,n,i));var u=s?"".concat(s,"__").concat(n,"__").concat(o,"__").concat(i):null,c=Fp(e,"getFieldWidgetConfig",u);if(c)return c;var p=e.widgets[o]||{},d=(null==l||null===(r=l.widgets)||void 0===r?void 0:r[o])||{},f=d.widgetProps||{},g="value"!==i&&i?{}:null==l?void 0:l.fieldSettings,v=sp(sp(sp(sp({},p),d),f),g);return jp(e,"getFieldWidgetConfig",u,v),a.forExport&&(v=po(v,"factory")),v},xp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.settings.fieldSeparator,n=wp(t,e),o=t?vp(e,t):e,i=null,a=[];do{var l,s=o===e?e.fields:null===(l=o)||void 0===l?void 0:l.subfields;if(!s||!Object.keys(s).length){o=i=null;break}i=Object.keys(s)[0],a.push(i),o=s[i]}while("!struct"==o.type||"!group"==o.type);return(n||[]).concat(a).join(r)};function Tp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tp(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ap=function(e,t){var r={usedFields:[]},n=Pp(e,t,r);if(n)return Rp(Rp({},n),r)},Pp=function(e,t,r){if(e){var n=e.get("type"),o=e.get("children1");return("group"===n||"rule_group"===n)&&o&&o.size?Np(e,t,r):"rule"===n?Dp(e,t,r):void 0}},Np=function(e,t,r){var n=e.get("properties")||new vr,o=e.get("children1"),i=e.get("id"),a=o.map((function(e){return Pp(e,t,r)})).filter((function(e){return void 0!==e}));if(a.size){var l=n.get("conjunction");l||(l=cl(t));var s=n.get("not");return{id:i,rules:a.toList(),condition:l.toUpperCase(),not:s}}},Dp=function(e,t,r){var n,o=e.get("properties")||new vr,i=e.get("id"),a=o.get("operator"),l=o.get("operatorOptions"),s=o.get("field"),u=o.get("value"),c=o.get("valueSrc"),p=o.get("valueType"),d=u.filter((function(e){return void 0===e})).size>0;if(null!=s&&null!=a&&!d){var f=Cp(t,s)||{},g=Ip(t,a,s)||{},v=f.type||"undefined",h=fo(g),y=t.types[f.type]||{},m=Ju(s,t,r);if(!(u.size<h)){-1==r.usedFields.indexOf(s)&&r.usedFields.push(s),u=u.toArray(),c=c.toArray(),p=(null===(n=p)||void 0===n?void 0:n.toArray())||[];for(var b=[],O=0;O<u.length;O++){var _={type:p[O],value:u[O]};if(b.push(_),"field"==c[O]){var w=u[O];-1==r.usedFields.indexOf(w)&&r.usedFields.push(w)}}var S=l?l.toJS():null;S&&!Object.keys(S).length&&(S=null);var E={id:i,fieldName:m,type:v,input:y.mainWidget,operator:a};return S&&(E.operatorOptions=S),E.values=b,E}}};function Vp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vp(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mp(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return zp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function zp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qp=function(e,t){var r,n={usedFields:[],errors:[]},o=rp(t,void 0,!1),i=Wp(e,o,n,!1,!0),a=n.errors,l=n.usedFields,s=(o.settings.fieldSeparator,{}),u=Mp(l);try{for(u.s();!(r=u.n()).done;)for(var c=r.value,p=wp(c,t),d=(Cp(o,c),s),f=0;f<p.length;f++){var g=p[f],v=Cp(o,p.slice(0,f+1))||{};f!=p.length-1?"!group"==v.type&&"struct"!=v.mode?(d[g]||(d[g]=[{}]),d=d[g][0]):(d[g]||(d[g]={}),d=d[g]):d[g]||(d[g]=null)}}catch(e){u.e(e)}finally{u.f()}return{errors:a,logic:i,data:s}},Wp=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(e){var a,l=e.get("type"),s=(e.get("properties")||new vr).get("isLocked"),u=t.settings.jsonLogic.lockedOp;return"group"===l||"rule_group"===l?a=Bp(e,t,r,n,o,i):"rule"===l?a=Up(e,t,r,n,i):"switch_group"==l?a=Gp(e,t,r,n):"case_group"==l&&(a=Kp(e,t,r,n,i)),s&&a&&u&&(a=A({},u,a)),a}},Bp=function(e,t,r){var n,o,i,a,l,s,u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,d=e.get("type"),f=e.get("properties")||new vr,g=f.get("mode"),v=e.get("children1")||new $r,h=f.get("field"),y=Cp(t,h),m=f.get("conjunction");m||(m=cl(t));var b=t.conjunctions[m],O=(null==b?void 0:b.jsonLogicConj)||m.toLowerCase(),_=!!f.get("not"),w="rule_group"===d&&!c,S=w&&"struct"!=g,E=S?h:p,F=f.get("operator"),j=F&&Ip(t,F,h)||null,L=Hp(t,f,r,F,p),C=w&&(!F||0==(null===(n=j)||void 0===n?void 0:n.cardinality)),I=w&&(null==v?void 0:v.size)>0,k=(w&&null!=v&&v.size,_),x=!1;I?(x=_,k=u):u&&(k=!k);var T=!1,R=null===(o=j)||void 0===o?void 0:o.reversedOp,P=Ip(t,R,h),N=!(null!==(i=j)&&void 0!==i&&i.jsonLogic||null===(a=P)||void 0===a||!a.jsonLogic),D=!(null===(l=P)||void 0===l||!l.jsonLogic),V=null===(s=lc(e))||void 0===s?void 0:s.get("type");if(!!t.settings.reverseOperatorsForNot&&(!w&&k&&"rule"===V||x&&1===(null==v?void 0:v.size))&&(I?x=!x:k=!k,T=!0),k&&w&&D&&(t.settings.reverseOperatorsForNot||N)){k=!k;var $=[R,F];F=$[0],R=$[1];var M=[P,j];j=M[0],P=M[1]}var z=v.map((function(e){return Wp(e,t,r,T,!1,E)})).filter((function(e){return void 0!==e})),q=!!t.settings.exportPreserveGroups;if(S&&!C){if(null==L)return}else if(!z.size&&!q)return;var W=c||q||1!=z.size;W||!_||T||(W=v.some((function(e){var r,n,o,i,a=null===(r=e.get("properties"))||void 0===r?void 0:r.get("operator"),l=null===(n=t.operators)||void 0===n||null===(n=n[a])||void 0===n?void 0:n.reversedOp;return null!==(o=null===(i=t.operators)||void 0===i||null===(i=i[l])||void 0===i?void 0:i._jsonLogicIsExclamationOp)&&void 0!==o&&o})));var B={};if(W?B[O]=z.toList().toJS():B=z.first(),x&&(B={"!":B}),S){var U=Yp(r,t,h,p);if(C)B=A({},F||"some",[U,B]);else{var G=z.size?{filter:[U,B]}:U;B=Qp(t,f,{reduce:[G,{"+":[1,{var:"accumulator"}]},0]},L,F,null,y)}}return k&&(B={"!":B}),B},Up=function(e,t,r){var n,o,i,a,l,s,u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,p=e.get("properties")||new vr,d=p.get("field"),f=p.get("fieldSrc"),g=p.get("operator"),v=p.get("operatorOptions");if((v=v?v.toJS():null)&&!Object.keys(v).length&&(v=null),null!=d&&null!=g){var h=Cp(t,d),y=Ip(t,g,d),m=null===(n=y)||void 0===n?void 0:n.reversedOp,b=Ip(t,m,d);if(null!==(o=y)&&void 0!==o&&o.jsonLogic||null!==(i=b)&&void 0!==i&&i.jsonLogic){var O=u,_=!(null!==(a=y)&&void 0!==a&&a.jsonLogic||null===(l=b)||void 0===l||!l.jsonLogic),w=!(null===(s=b)||void 0===s||!s.jsonLogic)&&(!!t.settings.reverseOperatorsForNot||_);if(O&&w||_){O=!O;var S=[m,g];g=S[0],m=S[1];var E=[b,y];y=E[0],b=E[1]}var F=Hp(t,p,r,g,c);if(void 0!==F){var j="func"===f?Jp(r,t,d,c):Yp(r,t,d,c);if(void 0!==j)return Qp(t,p,j,F,g,v,h,O)}}else r.errors.push("Operator ".concat(g," is not supported"))}},Gp=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.get("children1");if(o){for(var i=o.map((function(e){return Kp(e,t,r,n,null)})).filter((function(e){return void 0!==e})).valueSeq().toArray(),a=[],l=0;l<i.length;l++)l===i.length-1||i[l][0]?(a.push(i[l]),l===i.length-1&&i[l][0]&&a.push([void 0,null])):r.errors.push("No condition for case ".concat(l));if(a.length){if(1===a.length){var s=$(a[0],2),u=(s[0],s[1]);return null==u&&(u=null),u}for(var c={if:[]},p=c.if,d=$(a[a.length-1],2),f=(d[0],d[1]),g=0;g<a.length-1;g++){var v=g===a.length-2,h=$(a[g],2),y=h[0],m=h[1];null==m&&(m=null),null==y&&(y=!0),p.push(y),p.push(m),v?p.push(f):(p.push({if:[]}),p=p[p.length-1].if)}return c}}},Kp=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=e.get("type");if("case_group"==i){var a=e.get("properties")||new vr;return[Bp(e,t,r,n,o),Hp(t,a,r,null,o,"!case_value")]}r.errors.push("Unexpected child of type ".concat(i," inside switch"))},Hp=function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=t.get("field"),l=t.get("valueSrc"),s=t.get("valueType");("!case_value"==i||s&&"case_value"==s.get(0))&&(a="!case_value");var u=Cp(e,a),c=Ip(e,n,a),p=fo(c),d=t.get("value"),f=t.get("asyncListValues");if(null!=d){var g=[],v=[],h=r.usedFields,y=d.map((function(t,i){var p=l?l.get(i):null,d=s?s.get(i):null,h=ac(t,p,e),y=Xu(e,a,n,p),m=kp(e,a,n,y,p,{forExport:!0}),b=Xp(r,e,h,p,d,m,u,n,c,o,f);return void 0!==b&&(g.push(p),v.push(d)),b})),m=y.filter((function(e){return void 0===e})).size>0;if(!(y.size<p||m))return p>1?y.toArray():1==p?y.first():null;r.usedFields=h}},Xp=function(e,t,r,n,o,i,a,l,s){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=arguments.length>10?arguments[10]:void 0;if(void 0!==r){var p;if("field"==n)p=Yp(e,t,r,u);else if("func"==n)p=Jp(e,t,r,u);else if("function"==typeof(null==i?void 0:i.jsonLogic)){var d=i.jsonLogic,f=[r,$p($p({},a?No()(a,["fieldSettings","listValues"]):{}),{},{asyncListValues:c}),po(i,lo)];l&&(f.push(l),f.push(s)),p=d.call.apply(d,[t.ctx].concat(f))}else p=r;return p}},Jp=function(e,t,r){var n,o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null===(n=r.get)||void 0===n?void 0:n.call(r,"func"),l=null===(o=r.get)||void 0===o?void 0:o.call(r,"args"),s=mp(t,a),u=wp(a,t),c=u[u.length-1];if(s)if(null!=s&&s.jsonLogic){var p={},d=[],f=[];for(var g in s.args){var v,h=s.args[g],y=Cp(t,h),m=h.defaultValue,b=h.isOptional,O=null!=m&&m.func?"func":"value",_=l?l.get(g):void 0,w=_?_.get("value"):void 0,S=_?_.get("valueSrc"):void 0;"func"!==S&&null!==(v=w)&&void 0!==v&&v.toJS&&(w=w.toJS());var E=null,F=Xu(t,h,E,S),j=kp(t,h,E,F,S,{forExport:!0}),L=Xp(e,t,w,S,h.type,j,y,null,null,i);if(null!=w&&void 0===L)return void("func"!=S&&e.errors.push("Can't format value of arg ".concat(g," for func ").concat(a)));var C=void 0;if(void 0===L&&!b&&null!=m){var I=Xu(t,h,E,O),k=kp(t,h,E,I,O,{forExport:!0});if(void 0===(C=Xp(e,t,m,O,h.type,k,y,null,null,i)))return void("func"!=O&&e.errors.push("Can't format default value of arg ".concat(g," for func ").concat(a)))}var x=null!=L?L:C;if(void 0!==x){if(d.length){var T,R=Mp(d);try{for(R.s();!(T=R.n()).done;)p[T.value]=void 0}catch(e){R.e(e)}finally{R.f()}d=[]}p[g]=x}else b||f.push(g),d.push(g)}if(!f.length){var P,N=Object.values(p);if("function"==typeof s.jsonLogic){var D=s.jsonLogic,V=[p];P=D.call.apply(D,[t.ctx].concat(V))}else{var $=s.jsonLogic||c;if(s.jsonLogicIsMethod){var M=N[0],z=N.slice(1);P=z.length?{method:[M,$,z]}:{method:[M,$]}}else P=A({},$,N)}return P}}else e.errors.push("Func ".concat(a," is not supported"));else e.errors.push("Func ".concat(a," is not defined in config"))},Yp=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.settings,a=i.fieldSeparator,l=i.jsonLogic;if(r){Array.isArray(r)&&(r=r.join(a));var s=Cp(t,r)||{},u=Ju(r,t,e,o);n=A({},s.jsonLogicVar||("!group"==s.type?l.groupVarKey:"var"),u),-1==e.usedFields.indexOf(r)&&e.usedFields.push(r)}return n},Qp=function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],s=t.get("field"),u=Ip(e,o,s)||{},c="function"==typeof u.jsonLogic?u.jsonLogic:function(e,t,r,n){var o=e,i=fo(t);"string"==typeof t.jsonLogic&&(o=t.jsonLogic);var a=["<","<=",">",">="],l=["==","!="];return function(e,t,s,u,c){return 0==i&&l.includes(o)?A({},o,[r,null]):0==i?A({},o,r):1==i?A({},o,[r,n]):2==i&&a.includes(o)?A({},o,[n[0],r,n[1]]):A({},o,[r].concat(z(n)))}}(o,u,r,n),p=[r,o,n,po(u,so),i,a],d=c.call.apply(c,[e.ctx].concat(p));return l&&(d={"!":d}),d};function Zp(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ed(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ed(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function td(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?td(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):td(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nd=function(e){return"object"==E(e)&&null!==e&&!Array.isArray(e)},od=function(e,t){return id(e,t,!1)},id=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=rp(t,void 0,!1),i=ad([],e,o,n);return r?[i,n.errors]:(n.errors.length&&console.warn("Errors while exporting to MongoDb:",n.errors),i)},ad=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;if(t){var s=t.get("type");return"group"===s||"rule_group"===s?ld(e,t,r,n,o,i,a,l):"rule"===s?sd(e,t,r,n,o,i,a,l):void 0}},ld=function(e,t,r,n){var o,i,a,l,s,u,c,p,d=arguments.length>4&&void 0!==arguments[4]&&arguments[4],f=t.get("type"),g=t.get("properties")||new vr,v=!!g.get("not"),h=t.get("children1")||new $r,y=r.settings,m=y.canShortMongoQuery,b=y.fieldSeparator,O=e.filter((function(e){return"rule_group"==e.get("type")})).length>0,_=e.filter((function(e){return"rule_group"==e.get("type")})).map((function(e){return e.get("properties").get("field")})).slice(-1).pop(),w=O&&_,S="rule_group"===f,E=S?g.get("field"):null,F=S?g.get("operator"):null,j=F&&Ip(r,F,E)||null,L=F?null!==(o=null===(i=j)||void 0===i?void 0:i.cardinality)&&void 0!==o?o:1:void 0,C=Ju(E,r,n,w),I=(Cp(r,E)||{}).mode,k=E&&"array"===I&&L>=1,x=S&&(null==h?void 0:h.size)>0,T=(S&&null!=h&&h.size,!1),R=v,P=!1;x?(P=v,R=d):d&&(R=!R);var N=null===(a=j)||void 0===a?void 0:a.reversedOp,D=Ip(r,N,E),V=!(null!==(l=j)&&void 0!==l&&l.mongoFormatOp||null===(s=D)||void 0===s||!s.mongoFormatOp),$=!(null===(u=D)||void 0===u||!u.mongoFormatOp),M=null===(c=lc(t))||void 0===c?void 0:c.get("type");if(!!r.settings.reverseOperatorsForNot&&(!S&&R&&"rule"===M||P&&1===(null==h?void 0:h.size))&&(x?P=!P:R=!R,T=!0),R&&S&&$&&(r.settings.reverseOperatorsForNot||V)){R=!R;var q=[N,F];F=q[0],N=q[1];var W=[D,j];j=W[0],D=W[1]}var B=g.get("conjunction");B||(B=cl(r));var U=r.conjunctions[B];if(U){var G=U.reversedConj;R&&"or"===(null===(p=B)||void 0===p?void 0:p.toLowerCase())&&G&&!S&&r.settings.canShortMongoQuery&&r.settings.reverseOperatorsForNot&&(B=G,U=r.conjunctions[B],R=!R,T=!0);var K=U.mongoConj,H=h.map((function(o){return ad([].concat(z(e),[t]),o,r,n,T,"array"!=I,"array"==I?function(e){return"$$el".concat(b).concat(e)}:void 0)})).filter((function(e){return void 0!==e}));if(k||H.size){var X;if(1==H.size)X=H.first();else if(H.size>1){var J=H.toList().toJS();m&&"$and"==K&&(X=J.reduce((function(e,t){if(e){for(var r in t){if("$"==r[0]){e=void 0;break}if(null==e[r])e[r]=t[r];else{var n=e[r],o=t[r];if(nd(n)||(n={$eq:n}),nd(o)||(o={$eq:o}),Object.keys(n)[0]==Object.keys(o)[0]){e=void 0;break}e[r]=Object.assign({},n,o)}}return e}}),{})),X||(X=A({},K,J))}if(E)if("array"==I){var Y={$size:{$ifNull:["$"+C,[]]}},Q=X?{$size:{$ifNull:[{$filter:{input:"$"+C,as:"el",cond:X}},[]]}}:Y;X={$expr:X=ad(e,t.set("type","rule"),r,n,P,!1,(function(e){return Q}),Y)}}else X=A({},C,{$elemMatch:X});return R&&(X={$not:X}),X}}},sd=function(e,t,r,n){var o,i,a,l,s,u,c,p=arguments.length>4&&void 0!==arguments[4]&&arguments[4],d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,v=t.get("properties")||new vr,h=e.filter((function(e){return"rule_group"==e.get("type")})).length>0,y=e.filter((function(e){return"rule_group"==e.get("type")})).map((function(e){return e.get("properties").get("field")})).slice(-1).pop(),m=h&&y,b=v.get("operator"),O=v.get("operatorOptions"),_=v.get("field"),w=v.get("fieldSrc"),S=v.get("value"),E=v.get("valueSrc"),F=v.get("valueType"),j=v.get("asyncListValues");if(null!=_&&null!=b&&void 0!==S){var L=Cp(r,_),C=Ip(r,b,_),I=null===(o=C)||void 0===o?void 0:o.reversedOp,k=Ip(r,I,_),x=fo(C);if(null!==(i=C)&&void 0!==i&&i.mongoFormatOp||null!==(a=k)&&void 0!==a&&a.mongoFormatOp){var T,R=p,A=!(null!==(l=C)&&void 0!==l&&l.mongoFormatOp||null===(s=k)||void 0===s||!s.mongoFormatOp);if(null!==(u=k)&&void 0!==u&&u.mongoFormatOp&&(r.settings.reverseOperatorsForNot||A)&&R||A){var P=[I,b];b=P[0],I=P[1];var N=[k,C];C=N[0],k=N[1],R=!R}var D=!1;if("func"==w){var V=$(pd(n,r,_,m),2);T=V[0],D=V[1]}else T=Ju(_,r,n,m),f&&(D=!0,T=f(T));if(null!=T){var M,z=[],q=[];if(null!=S){var W=S.map((function(e,t){var o=E?E.get(t):null,i=F?F.get(t):null,a=ac(e,o,r),l=Xu(r,_,b,o),s=kp(r,_,b,l,o,{forExport:!0}),u=$(ud(n,r,a,o,i,s,L,m,b,C,j),2),c=u[0],p=u[1];return void 0!==c&&(D=D||p,z.push(o),q.push(i)),c})),B=W.filter((function(e){return void 0===e})).size>0;if(W.size<x||B)return;M=x>1?W.toArray():1==x?W.first():null}var U=D&&d,G=null===(c=C)||void 0===c?void 0:c.mongoFormatOp,K=[T,b,void 0!==g&&null==M?g:M,D,z.length>1?z:z[0],q.length>1?q:q[0],po(C,so),O,L],H=G.call.apply(G,[r.ctx].concat(K));return U&&(H={$expr:H}),R&&(H={$not:H}),H}}else n.errors.push("Operator ".concat(b," is not supported"))}},ud=function(e,t,r,n,o,i,a,l,s,u,c){if(void 0===r)return[void 0,!1];var p,d=!1;if("field"==n){var f=$(cd(e,t,r,l),2);p=f[0],d=f[1]}else if("func"==n){var g=$(pd(e,t,r,l),2);p=g[0],d=g[1]}else if("function"==typeof(null==i?void 0:i.mongoFormatValue)){var v=i.mongoFormatValue,h=[r,rd(rd({},a?No()(a,["fieldSettings","listValues"]):{}),{},{asyncListValues:c}),po(i,lo)];s&&(h.push(s),h.push(u)),p=v.call.apply(v,[t.ctx].concat(h))}else p=r;return[p,d]},cd=function(e,t,r,n){var o,i=t.settings.fieldSeparator;if(r){var a=Cp(t,r)||{},l=wp(r,t),s=qu(r,t),u=s?s.join(i):null;o="$"+(0,t.settings.formatField)(Ju(r,t,e,n),l,u,a,t,!1)}return[o,!0]},pd=function(e,t,r,n){var o,i,a,l=null===(o=r.get)||void 0===o?void 0:o.call(r,"func"),s=null===(i=r.get)||void 0===i?void 0:i.call(r,"args"),u=mp(t,l);if(!u)return e.errors.push("Func ".concat(l," is not defined in config")),[void 0,!1];var c=wp(l,t),p=c[c.length-1],d=u.mongoFunc||p,f=u.mongoArgsAsObject,g={},v=0,h=void 0,y=[],m=[];for(var b in u.args){var O;v++;var _=u.args[b],w=Cp(t,_),S=_.defaultValue,E=_.isOptional,F=null!=S&&S.func?"func":"value",j=s?s.get(b):void 0,L=j?j.get("value"):void 0,C=j?j.get("valueSrc"):void 0;"func"!==C&&null!==(O=L)&&void 0!==O&&O.toJS&&(L=L.toJS());var I=j?j.get("asyncListValues"):void 0,k=null,x=Xu(t,_,k,C),T=kp(t,_,k,x,C,{forExport:!0}),R=$(ud(e,t,L,C,_.type,T,w,n,null,null,I),2),P=R[0];if(R[1],null!=L&&void 0===P)return"func"!=C&&e.errors.push("Can't format value of arg ".concat(b," for func ").concat(l)),[void 0,!1];var N=void 0;if(void 0===P&&!E&&null!=S){var D=Xu(t,_,k,F),V=kp(t,_,k,D,F,{forExport:!0}),M=$(ud(e,t,S,F,_.type,V,w,n,null,null,I),2);if(N=M[0],M[1],void 0===N)return"func"!=F&&e.errors.push("Can't format default value of arg ".concat(b," for func ").concat(l)),[void 0,!1]}var z=null!=P?P:N;if(void 0!==z){if(y.length){var q,W=Zp(y);try{for(W.s();!(q=W.n()).done;)g[q.value]=void 0}catch(e){W.e(e)}finally{W.f()}y=[]}g[b]=z,h=z}else E||m.push(b),y.push(b)}if(m.length)return[void 0,!1];if("function"==typeof u.mongoFormatFunc){var B=u.mongoFormatFunc,U=[g];a=B.call.apply(B,[t.ctx].concat(U))}else{if(null===u.mongoFormatFunc)return e.errors.push("Functon ".concat(d," is not supported")),[void 0,!1];a=A({},d,f?g:1==v&&void 0!==h?h:Object.values(g))}return[a,!0]};function dd(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return fd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function fd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gd(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var hd=function(e,t){return yd(e,t,!1)},yd=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=rp(t,void 0,!1),i=md(e,o,n);return r?[i,n.errors]:(n.errors.length&&console.warn("Errors while exporting to SQL:",n.errors),i)},md=function(e,t,r){if(e){var n=e.get("type");return e.get("children1"),"group"===n||"rule_group"===n?bd(e,t,r):"rule"===n?Od(e,t,r):void 0}},bd=function(e,t,r){var n=e.get("type"),o=e.get("properties")||new vr,i=e.get("children1")||new $r,a="rule_group"===n?o.get("field"):null;"array"==(Cp(t,a)||{}).mode&&r.errors.push("Aggregation is not supported for ".concat(a));var l=o.get("not"),s=i.map((function(e){return md(e,t,r)})).filter((function(e){return void 0!==e}));if(s.size){var u=o.get("conjunction");return u||(u=cl(t)),t.conjunctions[u].sqlFormatConj.call(t.ctx,s,u,l)}},Od=function(e,t,r){var n=e.get("properties")||new vr,o=n.get("field"),i=n.get("fieldSrc"),a=n.get("operator"),l=n.get("operatorOptions"),s=n.get("valueSrc"),u=n.get("valueType"),c=n.get("value"),p=n.get("asyncListValues");if(null!=o&&null!=a){var d=Cp(t,o)||{},f=Ip(t,a,o)||{},g=f.reversedOp,v=Ip(t,g,o)||{},h=fo(f),y=!1,m=f.sqlOp||f.sqlFormatOp,b=v.sqlOp||v.sqlFormatOp;if(m||b){if(!m&&b){y=!0;var O=[g,a];a=O[0],g=O[1];var _=[v,f];f=_[0],v=_[1]}var w,S=[],E=[];if(null!=c){var F=c.map((function(e,n){var i=s?s.get(n):null,l=u?u.get(n):null,c=ac(e,i,t),g=Xu(t,o,a,i),v=kp(t,o,a,g,i,{forExport:!0}),h=_d(r,t,c,i,l,v,d,a,f,p);return void 0!==h&&(S.push(i),E.push(l)),h}));if(F.filter((function(e){return void 0===e})).size>0||F.size<h)return;w=1==h?F.first():F}var j=f.sqlFormatOp||function(e,t){var r,n=t.sqlOp||e,o=fo(t);return 0==o?r=function(e,t,r,o,i,a,l,s){return"".concat(e," ").concat(n)}:1==o?r=function(e,t,r,o,i,a,l,s){return"".concat(e," ").concat(n," ").concat(r)}:2==o&&(r=function(e,t,r,o,i,a,l,s){var u,c,p=null==r||null===(u=r.first)||void 0===u?void 0:u.call(r),d=null==r||null===(c=r.get)||void 0===c?void 0:c.call(r,1);return"".concat(e," ").concat(n," ").concat(p," AND ").concat(d)}),r}(a,f);if(j){var L="func"==i?Sd(r,t,o):wd(r,t,o);if(null!=L){var C,I=[L,a,w,S.length>1?S:S[0],E.length>1?E:E[0],po(f,so),l,d];if(C=j.call.apply(j,[t.ctx].concat(I)),y&&(C=t.settings.sqlFormatReverse.call(t.ctx,C)),void 0!==C)return C;r.errors.push("Operator ".concat(a," is not supported for value source ").concat(S.join(", ")))}}else r.errors.push("Operator ".concat(a," is not supported"))}else r.errors.push("Operator ".concat(a," is not supported"))}},_d=function(e,t,r,n,o,i,a,l,s,u){if(void 0!==r){var c;if("field"==n)c=wd(e,t,r);else if("func"==n)c=Sd(e,t,r);else if("function"==typeof(null==i?void 0:i.sqlFormatValue)){var p=i.sqlFormatValue,d=[r,vd(vd({},No()(a,["fieldSettings","listValues"])),{},{asyncListValues:u}),po(i,lo)];if(l&&(d.push(l),d.push(s)),"field"==n){var f=Cp(t,r)||{};d.push(f)}c=p.call.apply(p,[t.ctx].concat(d))}else c=Array.isArray(r)?r.map((function(e){return Qi.escape(e)})):Qi.escape(r);return c}},wd=function(e,t,r){if(r){var n=t.settings.fieldSeparator,o=Cp(t,r)||{},i=wp(r,t),a=qu(r,t),l=a?a.join(n):null;return(0,t.settings.formatField)(Ju(r,t,e,null,{useTableName:!0}),i,l,o,t)}},Sd=function(e,t,r){var n,o,i=null===(n=r.get)||void 0===n?void 0:n.call(r,"func"),a=null===(o=r.get)||void 0===o?void 0:o.call(r,"args"),l=mp(t,i);if(l){var s=wp(i,t),u=s[s.length-1],c=l.sqlFunc||u,p={},d=[],f=[];for(var g in l.args){var v,h=l.args[g],y=Cp(t,h),m=h.defaultValue,b=h.isOptional,O=null!=m&&m.func?"func":"value",_=a?a.get(g):void 0,w=_?_.get("value"):void 0,S=_?_.get("valueSrc"):void 0;"func"!==S&&null!==(v=w)&&void 0!==v&&v.toJS&&(w=w.toJS());var E=_?_.get("asyncListValues"):void 0,F=_d(e,t,w,S,h.type,y,h,null,null,E);if(null!=w&&void 0===F)return void("func"!=S&&e.errors.push("Can't format value of arg ".concat(g," for func ").concat(i)));var j=void 0;if(void 0===F&&!b&&null!=m&&void 0===(j=_d(e,t,m,O,h.type,y,h,null,null,E)))return void("func"!=O&&e.errors.push("Can't format default value of arg ".concat(g," for func ").concat(i)));var L=null!=F?F:j;if(void 0!==L){if(d.length){var C,I=dd(g);try{for(I.s();!(C=I.n()).done;)p[C.value]=void 0}catch(e){I.e(e)}finally{I.f()}d=[]}p[g]=L}else b||f.push(g),d.push(g)}if(!f.length){var k;if("function"==typeof l.sqlFormatFunc){var x=l.sqlFormatFunc,T=[p];k=x.call.apply(x,[t.ctx].concat(T))}else{var R=Object.entries(p).map((function(e){var t=$(e,2);return t[0],t[1]})).join(", ");k="".concat(c,"(").concat(R,")")}return k}}else e.errors.push("Func ".concat(i," is not defined in config"))};function Ed(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ed(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ed(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jd(e,t,r,n,o,i){if(e&&r&&null!=t){var a=r,l=n.operators[a];if(l){var s=l.elasticSearchQueryType,u=!1;!s&&l.reversedOp&&(u=!0,a=l.reversedOp,s=(l=n.operators[a]).elasticSearchQueryType);var c=Xu(n,e,a,o),p=n.widgets[c];if(p){var d,f,g=p.elasticSearchFormatValue;if(d="function"==typeof s?s(c):s)return f="function"==typeof g?g(d,t,a,e,n):function(e,t,r,n,o,i){var a=n;switch(e){case"filter":return{script:o.operators[r].elasticSearchScript(n,t)};case"exists":return{field:n};case"match":return A({},a,t[0]);case"term":return A({},n,i===Ld?{value:t[0]}:t[0]);case"geo_bounding_box":return A({},n,function(e){if(null==e)return null;var t=e.split(",").map(Number);return{top_left:{lat:t[0],lon:t[1]},bottom_right:{lat:t[2],lon:t[3]}}}(t[0]));case"range":return A({},n,function(e,t){if(e.length>1)return{gte:"".concat(e[0]),lte:"".concat(e[1])};var r=e[0];switch(t){case"on_date":case"not_on_date":case"equal":case"select_equals":case"not_equal":return{gte:"".concat(r,"||/d"),lte:"".concat(r,"||+1d")};case"less_or_equal":return{lte:"".concat(r)};case"greater_or_equal":return{gte:"".concat(r)};case"less":return{lt:"".concat(r)};case"greater":return{gt:"".concat(r)};default:return}}(t,r));case"wildcard":return A({},n,function(e){return{value:"*"+e+"*"}}(t[0]));case"regexp":return A({},n,function(e){return{value:e}}(t[0]));default:return}}(d,t,a,e,n,i),u?{bool:{must_not:A({},d,Fd({},f))}}:A({},d,Fd({},f))}}}}var Ld="ES_7_SYNTAX",Cd="ES_6_SYNTAX";function Id(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cd,n=rp(t,void 0,!1);if(e){var o=e.get("type"),i=e.get("properties")||new Map;if("rule"===o&&i.get("field")){var a,l,s,u=i.get("operator"),c=i.get("field"),p=i.get("fieldSrc"),d=null===(a=i.get("value"))||void 0===a?void 0:a.toJS(),f=(null===(l=i.get("valueType"))||void 0===l||l.get(0),null===(s=i.get("valueSrc"))||void 0===s?void 0:s.get(0));if("func"===f||"func"==p)return;return d&&Array.isArray(d[0])?d[0].map((function(e){return jd(c,[e],u,n,f,r)})):jd(c,d,u,n,f,r)}if("group"===o||"rule_group"===o){var g=i.get("not"),v=i.get("conjunction");return v||(v=cl(n)),function(e,t,r,n,o,i){if(e&&e.size){var a=e.valueSeq().toArray(),l=function(e,t){switch(e){case"AND":return t?"must_not":"must";case"OR":return t?"should_not":"should";case"NOT":return t?"must":"must_not";default:return}}(t,r),s=a.map((function(e){return n(e,o,i)})).filter((function(e){return void 0!==e}));if(s.length)return{bool:A({},l,s.flat(1/0))}}}(e.get("children1"),v,g,Id,n,r)}}}function kd(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function xd(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}var Td=["title","value","disabled","groupTitle","grouplabel","renderTitle","children","label","isCustom","isHidden"];function Rd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ad(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ad(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ad(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return function(){var n,o=(n=Ao().mark((function n(o,i,a){var l,s,u,c,p,d;return Ao().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=null!=(null==a?void 0:a.pageSize)?a.pageSize:t,s=Ko(e).filter((function(e){var t=e.title,r=e.value;return null==o||-1!=t.toUpperCase().indexOf(o.toUpperCase())||-1!="".concat(r).toUpperCase().indexOf(o.toUpperCase())})),l&&Math.ceil(s.length/l),u=i||0,l&&Math.ceil(u/l),c=l?s.slice(u,u+l):s,p=l?u+c.length:null,d=!!l&&p<s.length,!r){n.next=11;break}return n.next=11,jo(r);case 11:return n.abrupt("return",{values:c,hasMore:d});case 12:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){xd(i,r,o,a,l,"next",e)}function l(e){xd(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e,t,r){return o.apply(this,arguments)}}()},Dd=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t)return e;var o=e||[],i=t.filter((function(e){return null==o.find((function(t){return""+t.value==""+e.value}))})).map((function(e){return n?Pd(Pd({},e),{},{isHidden:!0}):e}));return r?[].concat(z(i),z(o)):[].concat(z(o),z(i))},Vd=function(e,t,r){var n,o=null==e||""==e?void 0:null!==(n=null==e?void 0:e.value)&&void 0!==n?n:e,i=Zo(o,t),a=r&&!i?Go(o):void 0,l=i||a;return[o,l?[l]:void 0]},$d=function(e,t,r){var n=e.map((function(e,n){var o,i=null==e||""==e?void 0:null!==(o=null==e?void 0:e.value)&&void 0!==o?o:e,a=Zo(i,t),l=r&&!a?Go(i):void 0;return a||l})).filter((function(e){return null!=e})),o=n.map((function(e){var t;return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:e}));return o.length||(o=void 0),[o,n]},Md=function(e){if(null==e)return null;var t=e.title,r=e.value,n=e.disabled,o=e.groupTitle,i=e.grouplabel,a=e.renderTitle,l=e.children,s=e.label,u=e.isCustom,c=e.isHidden,p=kd(e,Td),d={value:r,title:t||s||l};return n&&(d.disabled=n),u&&(d.isCustom=u),c&&(d.isHidden=c),(o||i)&&(d.groupTitle=o||i),a&&(d.renderTitle=a),Pd(Pd({},d),p)},zd=function(e){var t,r=[],n=[],o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Rd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(e);try{var i=function(){var e=t.value,o=function(e,t){if(e.findLastIndex)return e.findLastIndex(t);var r=z(e).reverse().findIndex(t);return-1==r?-1:e.length-1-r}(r,(function(t){var r,n;return(null!==(r=t.groupTitle)&&void 0!==r?r:"")==(null!==(n=e.groupTitle)&&void 0!==n?n:"")}));null==e.groupTitle||n.includes(e.groupTitle)||(n.push(e.groupTitle),1===n.length&&(r=r.map((function(e){return Pd(Pd({},e),{},{groupTitle:""})})))),null==e.groupTitle&&n.length&&(e=Pd(Pd({},e),{},{groupTitle:""})),-1!=o?r.splice(o+1,0,e):r.push(e)};for(o.s();!(t=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}return r},qd={label:"Now",returnType:"datetime",jsonLogic:"now",jsonLogicCustomOps:{now:{}},spelFunc:"T(java.time.LocalDateTime).now()",sqlFormatFunc:function(){return"NOW()"},mongoFormatFunc:function(){return new Date},formatFunc:function(){return"NOW"}},Wd={label:"Relative",returnType:"datetime",renderBrackets:["",""],renderSeps:["","",""],spelFormatFunc:function(e){var t=e.date,r=e.op,n=e.val,o=e.dim,i=r+(o.charAt(0).toUpperCase()+o.slice(1)+"s");return"".concat(t,".").concat(i,"(").concat(n,")")},spelImport:function(e){var t,r,n,o,i=null===(t=e.methodName)||void 0===t?void 0:t.match(/^(minus|plus)(\w+)s$/);if(i&&(o=i[2].toLowerCase(),r=i[1],["minus","plus"].includes(r)&&["day","week","month","year"].includes(o)))return r={type:"string",val:r},o={type:"string",val:o},n=e.args[0],{date:e.obj,op:r,val:n,dim:o}},jsonLogic:function(e){var t=e.date,r=e.op;return{date_add:[t,e.val*("minus"==r?-1:1),e.dim]}},jsonLogicImport:function(e){var t=e.date_add[0],r=Math.abs(e.date_add[1]);return[t,e.date_add[1]>=0?"plus":"minus",r,e.date_add[2]]},jsonLogicCustomOps:{date_add:{}},sqlFormatFunc:function(e){var t=e.date,r=e.op,n=e.val,o=e.dim;return"DATE_ADD(".concat(t,", INTERVAL ").concat(parseInt(n)*("minus"==r?-1:1)," ").concat(o.replace(/^'|'$/g,""),")")},mongoFormatFunc:null,formatFunc:function(e){var t=e.date,r=e.op,n=e.val,o=e.dim;return n?"".concat(t," ").concat("minus"==r?"-":"+"," ").concat(n," ").concat(o):t},args:{date:{label:"Date",type:"datetime",defaultValue:{func:"NOW",args:[]},valueSources:["func","field","value"],spelEscapeForFormat:!0},op:{label:"Op",type:"select",defaultValue:"plus",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{plus:"+",minus:"-"}},spelEscapeForFormat:!1},val:{label:"Value",type:"number",fieldSettings:{min:0},defaultValue:0,valueSources:["value"],spelEscapeForFormat:!1},dim:{label:"Dimension",type:"select",defaultValue:"day",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{day:"day",week:"week",month:"month",year:"year"}},spelEscapeForFormat:!1}}},Bd={label:"Lowercase",mongoFunc:"$toLower",jsonLogic:"toLowerCase",spelFunc:"${str}.toLowerCase()",jsonLogicCustomOps:{toLowerCase:{}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field","func"]}}},Ud={label:"Uppercase",mongoFunc:"$toUpper",jsonLogic:"toUpperCase",spelFunc:"${str}.toUpperCase()",jsonLogicCustomOps:{toUpperCase:{}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field","func"]}}},Gd={label:"Linear regression",returnType:"number",formatFunc:function(e,t){var r=e.coef,n=e.bias,o=e.val;return"(".concat(r," * ").concat(o," + ").concat(n,")")},sqlFormatFunc:function(e){var t=e.coef,r=e.bias,n=e.val;return"(".concat(t," * ").concat(n," + ").concat(r,")")},spelFormatFunc:function(e){var t=e.coef,r=e.bias,n=e.val;return"(".concat(t," * ").concat(n," + ").concat(r,")")},spelImport:function(e){var t,r;if("op-plus"===e.type){var n=$(e.children,2);if(r=n[0],t=n[1],"op-multiply"===r.type){var o=$(r.children,2);return{coef:o[0],val:o[1],bias:t}}}},mongoFormatFunc:function(e){var t=e.coef,r=e.bias;return{$sum:[{$multiply:[t,e.val]},r]}},jsonLogic:function(e){var t=e.coef,r=e.bias;return{"+":[{"*":[t,e.val]},r]}},jsonLogicImport:function(e){return[e["+"][0]["*"][0],e["+"][0]["*"][1],e["+"][1]]},renderBrackets:["",""],renderSeps:[" * "," + "],args:{coef:{label:"Coef",type:"number",defaultValue:1,valueSources:["value"]},val:{label:"Value",type:"number",valueSources:["value","field"]},bias:{label:"Bias",type:"number",defaultValue:0,valueSources:["value"]}}},Kd={utils:{SqlString:Qi,moment:wi(),mongoFormatOp1:function(e,t,r,n,o,i,a,l,s,u,c,p){var d="string"!=typeof n||n.startsWith("$")?n:"$"+n,f=t(i,p);if(void 0!==f)return r?a||e&&"$eq"!=e?a?{$not:A({},e,[d,f])}:A({},n,{$not:A({},e,f)}):A({},n,{$ne:f}):a||e&&"$eq"!=e?a?A({},e,[d,f]):A({},n,A({},e,f)):A({},n,f)},mongoFormatOp2:function(e,t,r,n,o,i,a,l,s,u,c){var p="string"!=typeof r||r.startsWith("$")?r:"$"+r;return t?i?{$not:{$and:[A({},e[0],[p,o[0]]),A({},e[1],[p,o[1]])]}}:A({},r,{$not:A(A({},e[0],o[0]),e[1],o[1])}):i?{$and:[A({},e[0],[p,o[0]]),A({},e[1],[p,o[1]])]}:A({},r,A(A({},e[0],o[0]),e[1],o[1]))},mongoEmptyValue:ea,escapeRegExp:Oo,sqlEmptyValue:Zi,stringifyForDisplay:ia,getTitleInListValues:Xo,spelEscape:ra,spelFixList:ta,wrapWithBrackets:aa}};const Hd=Kd;function Xd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jd(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qd={equal:{label:"==",labelForFormat:"==",sqlOp:"=",spelOp:"==",spelOps:["==","eq"],reversedOp:"not_equal",formatOp:function(e,t,r,n,o,i,a,l,s){var u=l?"=":i.label;return"boolean"==o&&l?"No"==r?"NOT ".concat(e):"".concat(e):"".concat(e," ").concat(u," ").concat(r)},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return e},!1].concat(r))},jsonLogic:"==",elasticSearchQueryType:"term"},not_equal:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",spelOp:"!=",spelOps:["!=","ne"],reversedOp:"equal",formatOp:function(e,t,r,n,o,i,a,l,s){return"boolean"==o&&l?"No"==r?"".concat(e):"NOT ".concat(e):"".concat(e," ").concat(i.label," ").concat(r)},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(e){return e},!1].concat(r))},jsonLogic:"!="},less:{label:"<",labelForFormat:"<",sqlOp:"<",spelOp:"<",spelOps:["<","lt"],reversedOp:"greater_or_equal",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$lt",function(e){return e},!1].concat(r))},jsonLogic:"<",elasticSearchQueryType:"range"},less_or_equal:{label:"<=",labelForFormat:"<=",sqlOp:"<=",spelOp:"<=",spelOps:["<=","le"],reversedOp:"greater",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$lte",function(e){return e},!1].concat(r))},jsonLogic:"<=",elasticSearchQueryType:"range"},greater:{label:">",labelForFormat:">",sqlOp:">",spelOp:">",spelOps:[">","gt"],reversedOp:"less_or_equal",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$gt",function(e){return e},!1].concat(r))},jsonLogic:">",elasticSearchQueryType:"range"},greater_or_equal:{label:">=",labelForFormat:">=",sqlOp:">=",spelOp:">=",spelOps:[">=","ge"],reversedOp:"less",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$gte",function(e){return e},!1].concat(r))},jsonLogic:">=",elasticSearchQueryType:"range"},like:{label:"Contains",labelForFormat:"Contains",reversedOp:"not_like",sqlOp:"LIKE",spelOp:"${0}.contains(${1})",valueTypes:["text"],mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(e){return"string"==typeof e?t.utils.escapeRegExp(e):void 0},!1].concat(n))},jsonLogic:function(e,t,r){return{in:[r,e]}},jsonLogic2:"#in",valueSources:["value"],elasticSearchQueryType:"regexp"},not_like:{isNotOp:!0,label:"Not contains",reversedOp:"like",labelForFormat:"Not Contains",sqlOp:"NOT LIKE",mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(e){return"string"==typeof e?t.utils.escapeRegExp(e):void 0},!0].concat(n))},jsonLogic:function(e,t,r){return{"!":{in:[r,e]}}},jsonLogic2:"#!in",_jsonLogicIsExclamationOp:!0,valueSources:["value"]},starts_with:{label:"Starts with",labelForFormat:"Starts with",sqlOp:"LIKE",spelOp:"${0}.startsWith(${1})",mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(e){return"string"==typeof e?"^"+t.utils.escapeRegExp(e):void 0},!1].concat(n))},jsonLogic:void 0,valueSources:["value"]},ends_with:{label:"Ends with",labelForFormat:"Ends with",sqlOp:"LIKE",spelOp:"${0}.endsWith(${1})",mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(e){return"string"==typeof e?t.utils.escapeRegExp(e)+"$":void 0},!1].concat(n))},jsonLogic:void 0,valueSources:["value"]},between:{label:"Between",labelForFormat:"BETWEEN",sqlOp:"BETWEEN",cardinality:2,formatOp:function(e,t,r,n,o,i,a,l){var s=r.first(),u=r.get(1);return l?"".concat(e," BETWEEN ").concat(s," AND ").concat(u):"".concat(e," >= ").concat(s," && ").concat(e," <= ").concat(u)},spelFormatOp:function(e,t,r,n,o,i,a,l){var s=r[0],u=r[1];return"".concat(e," >= ").concat(s," && ").concat(e," <= ").concat(u)},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp2.apply(e,[["$gte","$lte"],!1].concat(r))},valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"not_between",jsonLogic:"<=",validateValues:function(e){return null!=e[0]&&null!=e[1]?e[0]<=e[1]:null},elasticSearchQueryType:function(e){return"time"===e?"filter":"range"}},not_between:{isNotOp:!0,label:"Not between",labelForFormat:"NOT BETWEEN",sqlOp:"NOT BETWEEN",cardinality:2,formatOp:function(e,t,r,n,o,i,a,l){var s=r.first(),u=r.get(1);return l?"".concat(e," NOT BETWEEN ").concat(s," AND ").concat(u):"(".concat(e," < ").concat(s," || ").concat(e," > ").concat(u,")")},spelFormatOp:function(e,t,r,n,o,i,a,l){var s=r[0],u=r[1];return"(".concat(e," < ").concat(s," || ").concat(e," > ").concat(u,")")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp2.apply(e,[["$gte","$lte"],!0].concat(r))},valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"between",jsonLogic:function(e,t,r){return{"!":{"<=":[Array.isArray(r)?r[0]:r,e,Array.isArray(r)?r[1]:r]}}},jsonLogic2:"!<=",_jsonLogicIsExclamationOp:!0,validateValues:function(e){return null!=e[0]&&null!=e[1]?e[0]<=e[1]:null}},is_empty:{label:"Is empty",labelForFormat:"IS EMPTY",cardinality:0,reversedOp:"is_not_empty",formatOp:function(e,t,r,n,o,i,a,l){return l?"".concat(e," IS EMPTY"):"!".concat(e)},sqlFormatOp:function(e,t,r,n,o,i,a,l){var s=this.utils.sqlEmptyValue(l);return"COALESCE(".concat(e,", ").concat(s,") = ").concat(s)},spelFormatOp:function(e,t,r,n,o,i,a,l){return"".concat(e," <= ''")},mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(e,r){return[t.utils.mongoEmptyValue(r),null]},!1].concat(n))},jsonLogic:"!"},is_not_empty:{isNotOp:!0,label:"Is not empty",labelForFormat:"IS NOT EMPTY",cardinality:0,reversedOp:"is_empty",formatOp:function(e,t,r,n,o,i,a,l){return l?"".concat(e," IS NOT EMPTY"):"!!".concat(e)},sqlFormatOp:function(e,t,r,n,o,i,a,l){var s=this.utils.sqlEmptyValue(l);return"COALESCE(".concat(e,", ").concat(s,") <> ").concat(s)},spelFormatOp:function(e,t,r,n,o,i,a,l){return"".concat(e," > ''")},mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$nin",function(e,r){return[t.utils.mongoEmptyValue(r),null]},!1].concat(n))},jsonLogic:"!!",elasticSearchQueryType:"exists"},is_null:{label:"Is null",labelForFormat:"IS NULL",sqlOp:"IS NULL",cardinality:0,reversedOp:"is_not_null",formatOp:function(e,t,r,n,o,i,a,l){return l?"".concat(e," IS NULL"):"!".concat(e)},spelFormatOp:function(e,t,r,n,o,i,a,l){return"".concat(e," == null")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return null},!1].concat(r))},jsonLogic:"=="},is_not_null:{label:"Is not null",labelForFormat:"IS NOT NULL",sqlOp:"IS NOT NULL",cardinality:0,reversedOp:"is_null",formatOp:function(e,t,r,n,o,i,a,l){return l?"".concat(e," IS NOT NULL"):"!!".concat(e)},spelFormatOp:function(e,t,r,n,o,i,a,l){return"".concat(e," != null")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(e){return null},!1].concat(r))},jsonLogic:"!=",elasticSearchQueryType:"exists"},select_equals:{label:"==",labelForFormat:"==",sqlOp:"=",formatOp:function(e,t,r,n,o,i,a,l){var s=l?"=":"==";return"".concat(e," ").concat(s," ").concat(r)},spelOp:"==",spelOps:["==","eq"],mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return e},!1].concat(r))},reversedOp:"select_not_equals",jsonLogic:"==",elasticSearchQueryType:"term"},select_not_equals:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,t,r,n,o,i,a,l){return"".concat(e," != ").concat(r)},spelOp:"!=",spelOps:["!=","ne"],mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(e){return e},!1].concat(r))},reversedOp:"select_equals",jsonLogic:"!="},select_any_in:{label:"Any in",labelForFormat:"IN",sqlOp:"IN",formatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," IN (").concat(r.join(", "),")"):"".concat(e," IN (").concat(r,")")},sqlFormatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," IN (").concat(r.join(", "),")"):void 0},valueTypes:["multiselect"],spelOp:"${1}.contains(${0})",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(e){return e},!1].concat(r))},reversedOp:"select_not_any_in",jsonLogic:"in",elasticSearchQueryType:"term"},select_not_any_in:{isNotOp:!0,label:"Not in",labelForFormat:"NOT IN",sqlOp:"NOT IN",formatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," NOT IN (").concat(r.join(", "),")"):"".concat(e," NOT IN (").concat(r,")")},sqlFormatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," NOT IN (").concat(r.join(", "),")"):void 0},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$nin",function(e){return e},!1].concat(r))},reversedOp:"select_any_in",jsonLogic:function(e,t,r){return{"!":{in:[e,r]}}},jsonLogic2:"!in",_jsonLogicIsExclamationOp:!0},multiselect_contains:{label:"Contains",labelForFormat:"CONTAINS",formatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," CONTAINS [").concat(r.join(", "),"]"):"".concat(e," CONTAINS ").concat(r)},reversedOp:"multiselect_not_contains",jsonLogic2:"some-in",jsonLogic:function(e,t,r){return{some:[e,{in:[{var:""},r]}]}},spelOp:"T(CollectionUtils).containsAny(${0}, ${1})",elasticSearchQueryType:"term",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(e){return e},!1].concat(r))}},multiselect_not_contains:{isNotOp:!0,label:"Not contains",labelForFormat:"NOT CONTAINS",formatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," NOT CONTAINS [").concat(r.join(", "),"]"):"".concat(e," NOT CONTAINS ").concat(r)},reversedOp:"multiselect_contains",jsonLogic2:"!some-in",jsonLogic:function(e,t,r){return{"!":{some:[e,{in:[{var:""},r]}]}}},_jsonLogicIsExclamationOp:!0},multiselect_equals:{label:"Equals",labelForFormat:"==",sqlOp:"=",formatOp:function(e,t,r,n,o,i,a,l){var s=l?"=":"==";return"value"==n?"".concat(e," ").concat(s," [").concat(r.join(", "),"]"):"".concat(e," ").concat(s," ").concat(r)},sqlFormatOp:function(e,t,r,n,o,i,a,l){var s=this;return"value"==n?"".concat(e," = '").concat(r.map((function(e){return s.utils.SqlString.trim(e)})).join(","),"'"):void 0},spelOp:"${0}.equals(${1})",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return e},!1].concat(r))},reversedOp:"multiselect_not_equals",jsonLogic2:"all-in",jsonLogic:function(e,t,r){return{all:[e,{in:[{var:""},r]}]}},elasticSearchQueryType:"term"},multiselect_not_equals:{isNotOp:!0,label:"Not equals",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," != [").concat(r.join(", "),"]"):"".concat(e," != ").concat(r)},sqlFormatOp:function(e,t,r,n,o,i,a,l){var s=this;return"value"==n?"".concat(e," != '").concat(r.map((function(e){return s.utils.SqlString.trim(e)})).join(","),"'"):void 0},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(e){return e},!1].concat(r))},reversedOp:"multiselect_equals",jsonLogic2:"!all-in",jsonLogic:function(e,t,r){return{"!":{all:[e,{in:[{var:""},r]}]}}},_jsonLogicIsExclamationOp:!0},proximity:{label:"Proximity search",cardinality:2,valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],formatOp:function(e,t,r,n,o,i,a,l){var s=r.first(),u=r.get(1),c=null==a?void 0:a.get("proximity");return"".concat(e," ").concat(s," NEAR/").concat(c," ").concat(u)},sqlFormatOp:function(e,t,r,n,o,i,a,l){var s=r.first(),u=r.get(1),c=this.utils.SqlString.trim(s),p=this.utils.SqlString.trim(u),d=null==a?void 0:a.get("proximity");return"CONTAINS(".concat(e,", 'NEAR((").concat(c,", ").concat(p,"), ").concat(d,")')")},mongoFormatOp:void 0,jsonLogic:void 0,options:{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",minProximity:2,maxProximity:10,defaults:{proximity:2}}},some:{label:"Some",labelForFormat:"SOME",cardinality:0,jsonLogic:"some",spelFormatOp:function(e){return"".concat(e," > 0")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$gt",function(e){return 0},!1].concat(r))}},all:{label:"All",labelForFormat:"ALL",cardinality:0,jsonLogic:"all",spelFormatOp:function(e,t,r){return"".concat(e," == ").concat(r)},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return e},!1].concat(r))}},none:{label:"None",labelForFormat:"NONE",cardinality:0,jsonLogic:"none",spelFormatOp:function(e){return"".concat(e," == 0")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return 0},!1].concat(r))}}},Zd={text:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"String",valuePlaceholder:"Enter string",formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},spelFormatValue:function(e,t,r,n,o){return this.utils.spelEscape(e)},sqlFormatValue:function(e,t,r,n,o){return"LIKE"==o.sqlOp||"NOT LIKE"==o.sqlOp?this.utils.SqlString.escapeLike(e,"starts_with"!=n,"ends_with"!=n):this.utils.SqlString.escape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},textarea:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"Text",valuePlaceholder:"Enter text",formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return"LIKE"==o.sqlOp||"NOT LIKE"==o.sqlOp?this.utils.SqlString.escapeLike(e,"starts_with"!=n,"ends_with"!=n):this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e},fullWidth:!0},number:{type:"number",jsType:"number",valueSrc:"value",valueLabel:"Number",valuePlaceholder:"Enter number",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e,t,r){var n=r.step&&!Number.isInteger(r.step);return this.utils.spelEscape(e,n)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},slider:{type:"number",jsType:"number",valueSrc:"value",valueLabel:"Number",valuePlaceholder:"Enter number or move slider",formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},select:{type:"select",jsType:"string",valueSrc:"value",valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(e,t,r,n){var o=this.utils.getTitleInListValues(t.fieldSettings.listValues||t.asyncListValues,e);return n?this.utils.stringifyForDisplay(o):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},multiselect:{type:"multiselect",jsType:"array",valueSrc:"value",valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(e,t,r,n){var o=this,i=e.map((function(e){return o.utils.getTitleInListValues(t.fieldSettings.listValues||t.asyncListValues,e)}));return n?i.map(this.utils.stringifyForDisplay):e.map(JSON.stringify)},sqlFormatValue:function(e,t,r,n,o){var i=this;return e.map((function(e){return i.utils.SqlString.escape(e)}))},spelFormatValue:function(e,t,r,n,o){var i=o&&o.spelOp&&o.spelOp.startsWith("${1}"),a=this.utils.spelEscape(e);return i&&(a=this.utils.spelFixList(a)),a},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},date:{type:"date",jsType:"string",valueSrc:"value",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD",valueLabel:"Date",valuePlaceholder:"Enter date",valueLabels:[{label:"Date from",placeholder:"Enter date from"},{label:"Date to",placeholder:"Enter date to"}],formatValue:function(e,t,r,n){var o=this.utils.moment(e,r.valueFormat);return n?o.format(r.dateFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat);return this.utils.SqlString.escape(i.format("YYYY-MM-DD"))},spelFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat).format("YYYY-MM-DD");return"T(java.time.LocalDate).parse('".concat(i,"', T(java.time.format.DateTimeFormatter).ofPattern('").concat("yyyy-MM-dd","'))")},spelImportFuncs:[{obj:{cls:["java","time","LocalDate"]},methodName:"parse",args:[{var:"v"},{obj:{cls:["java","time","format","DateTimeFormatter"]},methodName:"ofPattern",args:[{var:"fmt"}]}]}],spelImportValue:function(e,t,r){var n,o,i,a;if(!t)return[void 0,"No widget def to get value format"];if(null!=r&&null!==(n=r.fmt)&&void 0!==n&&null!==(n=n.value)&&void 0!==n&&null!==(o=n.includes)&&void 0!==o&&o.call(n," ")||null!==(i=r.fmt)&&void 0!==i&&null!==(i=i.value)&&void 0!==i&&null!==(a=i.toLowerCase)&&void 0!==a&&a.call(i).includes("hh:mm"))return[void 0,"Invalid date format ".concat(JSON.stringify(r.fmt))];var l=this.utils.moment(e.value,this.utils.moment.ISO_8601);return l.isValid()?[l.format(null==t?void 0:t.valueFormat),[]]:[void 0,"Invalid date"]},jsonLogic:function(e,t,r){return this.utils.moment(e,r.valueFormat).toDate()},toJS:function(e,t){var r=this.utils.moment(e,t.valueFormat);return r.isValid()?r.toDate():void 0},mongoFormatValue:function(e,t,r){var n=this.utils.moment(e,r.valueFormat);return n.isValid()?n.toDate():void 0}},time:{type:"time",jsType:"string",valueSrc:"value",timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1,valueLabel:"Time",valuePlaceholder:"Enter time",valueLabels:[{label:"Time from",placeholder:"Enter time from"},{label:"Time to",placeholder:"Enter time to"}],formatValue:function(e,t,r,n){var o=this.utils.moment(e,r.valueFormat);return n?o.format(r.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat);return this.utils.SqlString.escape(i.format("HH:mm:ss"))},spelFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat).format("HH:mm:ss");return"T(java.time.LocalTime).parse('".concat(i,"')")},spelImportFuncs:["T(java.time.LocalTime).parse(${v})"],spelImportValue:function(e,t,r){var n,o,i;if(!t)return[void 0,"No widget def to get value format"];if(null!=r&&r.fmt&&(null===(n=r.fmt)||void 0===n||null===(n=n.value)||void 0===n||null===(o=n.toLowerCase)||void 0===o||!o.call(n).includes("hh:mm")||null!==(i=r.fmt)&&void 0!==i&&null!==(i=i.value)&&void 0!==i&&i.includes(" ")))return[void 0,"Invalid time format ".concat(JSON.stringify(r.fmt))];var a=this.utils.moment(e.value,"HH:mm:ss");return a.isValid()?[a.format(null==t?void 0:t.valueFormat),[]]:[void 0,"Invalid date"]},jsonLogic:function(e,t,r){var n=this.utils.moment(e,r.valueFormat);return 60*n.get("hour")*60+60*n.get("minute")+n.get("second")},toJS:function(e,t){var r=this.utils.moment(e,t.valueFormat);return r.isValid()?60*r.get("hour")*60+60*r.get("minute")+r.get("second"):void 0},mongoFormatValue:function(e,t,r){var n=this.utils.moment(e,r.valueFormat);return 60*n.get("hour")*60+60*n.get("minute")+n.get("second")},elasticSearchFormatValue:function(e,t,r,n){return{script:{script:{source:"doc[".concat(n,"][0].getHour() >== params.min && doc[").concat(n,"][0].getHour() <== params.max"),params:{min:t[0],max:t[1]}}}}}},datetime:{type:"datetime",jsType:"string",valueSrc:"value",timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1,valueLabel:"Datetime",valuePlaceholder:"Enter datetime",valueLabels:[{label:"Datetime from",placeholder:"Enter datetime from"},{label:"Datetime to",placeholder:"Enter datetime to"}],formatValue:function(e,t,r,n){var o=this.utils.moment(e,r.valueFormat);return n?o.format(r.dateFormat+" "+r.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat);return this.utils.SqlString.escape(i.toDate())},spelFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat).format("YYYY-MM-DD HH:mm:ss");return"T(java.time.LocalDateTime).parse('".concat(i,"', T(java.time.format.DateTimeFormatter).ofPattern('").concat("yyyy-MM-dd HH:mm:ss","'))")},spelImportFuncs:[{obj:{cls:["java","time","LocalDateTime"]},methodName:"parse",args:[{var:"v"},{obj:{cls:["java","time","format","DateTimeFormatter"]},methodName:"ofPattern",args:[{var:"fmt"}]}]}],spelImportValue:function(e,t,r){var n,o;if(!t)return[void 0,"No widget def to get value format"];if(null==r||null===(n=r.fmt)||void 0===n||null===(n=n.value)||void 0===n||null===(o=n.includes)||void 0===o||!o.call(n," "))return[void 0,"Invalid datetime format ".concat(JSON.stringify(r.fmt))];var i=this.utils.moment(e.value,this.utils.moment.ISO_8601);return i.isValid()?[i.format(null==t?void 0:t.valueFormat),[]]:[void 0,"Invalid date"]},jsonLogic:function(e,t,r){return this.utils.moment(e,r.valueFormat).toDate()},toJS:function(e,t){var r=this.utils.moment(e,t.valueFormat);return r.isValid()?r.toDate():void 0},mongoFormatValue:function(e,t,r){var n=this.utils.moment(e,r.valueFormat);return n.isValid()?n.toDate():void 0}},boolean:{type:"boolean",jsType:"boolean",valueSrc:"value",labelYes:"Yes",labelNo:"No",formatValue:function(e,t,r,n){return n?e?"Yes":"No":JSON.stringify(!!e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e,t,r,n,o){return this.utils.spelEscape(e)},defaultValue:!1,toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},field:{valueSrc:"field",formatValue:function(e,t,r,n,o,i,a){return n&&a.label||e},sqlFormatValue:function(e,t,r,n,o,i){return e},spelFormatValue:function(e,t,r,n,o){return e},valueLabel:"Field to compare",valuePlaceholder:"Select field to compare"},func:{valueSrc:"func",valueLabel:"Function",valuePlaceholder:"Select function"},case_value:{valueSrc:"value",type:"case_value",spelFormatValue:function(e){return this.utils.spelEscape(""===e?null:e)},spelImportValue:function(e){return[e.value,[]]},jsonLogic:function(e){return""===e?null:e}}},ef=Yd(Yd({},qc),{},{convertableWidgets:{number:["slider","rangeslider"],slider:["number","rangeslider"],rangeslider:["number","slider"],text:["textarea"],textarea:["text"]},formatSpelField:function(e,t,r,n,o,i){var a=this,l=n.map((function(e,t){var r=e.key,n=e.parent,o=e.fieldSeparator;return 0==t?"[map]"==n?"#this[".concat(a.utils.spelEscape(r),"]"):r:"map"==n||"[map]"==n?"[".concat(a.utils.spelEscape(r),"]"):"".concat(o).concat(r)})).join("");return o.fieldName&&(l=e),o.isSpelVariable&&(l="#"+l),l},sqlFormatReverse:function(e){if(null!=e)return"NOT"+this.utils.wrapWithBrackets(e)},spelFormatReverse:function(e){if(null!=e)return"!"+this.utils.wrapWithBrackets(e)},formatReverse:function(e,t,r,n,o,i){if(null!=e)return i?"NOT "+this.utils.wrapWithBrackets(e):"!"+this.utils.wrapWithBrackets(e)},formatAggr:function(e,t,r,n,o,i,a,l,s,u){var c=a.labelForFormat,p=a.cardinality;if(0==p){var d=e?" HAVE ".concat(e):"";return"".concat(c," OF ").concat(t).concat(d)}if(null==p||1==p){var f=e?" WHERE ".concat(e):"";return"COUNT OF ".concat(t).concat(f," ").concat(c," ").concat(n)}if(2==p){var g=e?" WHERE ".concat(e):"",v=n.first(),h=n.get(1);return"COUNT OF ".concat(t).concat(g," ").concat(c," ").concat(v," AND ").concat(h)}},jsonLogic:{groupVarKey:"var",altVarKey:"var",lockedOp:"locked"},canCompareFieldWithField:function(e,t,r,n){return!0},valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}}}),tf=function(e,t){var r,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={rangeslider:of,treeselect:af,treemultiselect:lf,rangeable__date:nf("date","date")},i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Xd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,l=o[a];if(!l)throw new Error("Can't ".concat(n?"add":"remove"," mixin ").concat(a));e=l(e,n)}}catch(e){i.e(e)}finally{i.f()}return e},rf=function(e,t){return tf(e,t,!0)},nf=function(e,t){return function(r){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=r.types;return o=Yd(Yd({},o),{},A({},e,Yd(Yd({},o[e]),{},{widgets:Yd({},o[e].widgets)}))),n?o[e].widgets[t]=Yd({opProps:{between:{isSpecialRange:!0,textSeparators:[null,null]},not_between:{isSpecialRange:!0,textSeparators:[null,null]}}},o[e].widgets[t]):delete o[e].widgets[t],Yd(Yd({},r),{},{types:o})}},of=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.widgets,n=e.types;return r=Yd({},r),t?r.rangeslider=Yd({type:"number",jsType:"number",valueSrc:"value",valueLabel:"Range",valuePlaceholder:"Select range",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},singleWidget:"slider",toJS:function(e,t){return e}},r.rangeslider):delete r.rangeslider,n=Yd(Yd({},n),{},{number:Yd(Yd({},n.number),{},{widgets:Yd({},n.number.widgets)})}),t?n.number.widgets.rangeslider=Yd({opProps:{between:{isSpecialRange:!0},not_between:{isSpecialRange:!0}},operators:["between","not_between","is_null","is_not_null"]},n.number.widgets.rangeslider):delete n.number.widgets.rangeslider,Yd(Yd({},e),{},{widgets:r,types:n})},af=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.widgets,n=e.types;return r=Yd({},r),t?r.treeselect=Yd({type:"treeselect",jsType:"string",valueSrc:"value",valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(e,t,r,n){var o=t.fieldSettings.treeValues||t.fieldSettings.listValues||t.asyncListValues,i=this.utils.getTitleInListValues(o,e);return n?this.utils.stringifyForDisplay(i):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,t){return e}},r.treeselect):delete r.treeselect,n=Yd({},n),t?n.treeselect=Yd({mainWidget:"treeselect",defaultOperator:"select_equals",widgets:{treeselect:{operators:["select_equals","select_not_equals"]},treemultiselect:{operators:["select_any_in","select_not_any_in"]}}},n.treeselect):delete n.treeselect,Yd(Yd({},e),{},{widgets:r,types:n})},lf=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.widgets,n=e.types;return r=Yd({},r),t?r.treemultiselect=Yd({type:"treemultiselect",jsType:"array",valueSrc:"value",valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(e,t,r,n){var o=this,i=t.fieldSettings.treeValues||t.fieldSettings.listValues||t.asyncListValues,a=e.map((function(e){return o.utils.getTitleInListValues(i,e)}));return n?a.map(this.utils.stringifyForDisplay):e.map(JSON.stringify)},sqlFormatValue:function(e,t,r,n,o){var i=this;return e.map((function(e){return i.utils.SqlString.escape(e)}))},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,t){return e}},r.treemultiselect):delete r.treemultiselect,n=Yd({},n),t?n.treemultiselect=Yd({defaultOperator:"multiselect_equals",widgets:{treemultiselect:{operators:["multiselect_equals","multiselect_not_equals"]}}},n.treemultiselect):delete n.treemultiselect,Yd(Yd({},e),{},{widgets:r,types:n})},sf={addMixins:rf,removeMixins:function(e,t){return tf(e,t,!1)}},uf={conjunctions:{AND:{label:"And",mongoConj:"$and",jsonLogicConj:"and",sqlConj:"AND",spelConj:"and",spelConjs:["and","&&"],reversedConj:"OR",formatConj:function(e,t,r,n){var o=e.size>1?e.join(" "+(n?"AND":"&&")+" "):e.first();return(e.size>1||r)&&(o=this.utils.wrapWithBrackets(o)),r&&(o="NOT "+o),o},sqlFormatConj:function(e,t,r){var n=e.size>1?e.join(" AND "):e.first();return(e.size>1||r)&&(n=this.utils.wrapWithBrackets(n)),r&&(n="NOT "+n),n},spelFormatConj:function(e,t,r,n){r&&(n=!1);var o=e.size>1?e.join(" && "):e.first();return(e.size>1||r)&&!n&&(o=this.utils.wrapWithBrackets(o)),r&&(o="!"+o),o}},OR:{label:"Or",mongoConj:"$or",jsonLogicConj:"or",sqlConj:"OR",spelConj:"or",spelConjs:["or","||"],reversedConj:"AND",formatConj:function(e,t,r,n){return e.size>1?(r?"NOT ":"")+"("+e.join(" "+(n?"OR":"||")+" ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},sqlFormatConj:function(e,t,r){return e.size>1?(r?"NOT ":"")+"("+e.join(" OR ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},spelFormatConj:function(e,t,r,n){return r&&(n=!1),e.size>1?(r?"!":"")+(n?"":"(")+e.join(" || ")+(n?"":")"):(r?"!(":"")+e.first()+(r?")":"")}}},operators:Qd,widgets:Zd,types:{text:{defaultOperator:"equal",mainWidget:"text",widgets:{text:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","proximity","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},textarea:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},field:{operators:["equal","not_equal","proximity"]}}},number:{defaultOperator:"equal",mainWidget:"number",widgets:{number:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]},slider:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_null","is_not_null"]}}},date:{defaultOperator:"equal",widgets:{date:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},time:{defaultOperator:"equal",widgets:{time:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},datetime:{defaultOperator:"equal",widgets:{datetime:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},select:{mainWidget:"select",defaultOperator:"select_equals",widgets:{select:{operators:["select_equals","select_not_equals","is_null","is_not_null"]},multiselect:{operators:["select_any_in","select_not_any_in","is_null","is_not_null"]}}},multiselect:{defaultOperator:"multiselect_equals",widgets:{multiselect:{operators:["multiselect_contains","multiselect_not_contains","multiselect_equals","multiselect_not_equals","is_null","is_not_null"]}}},boolean:{defaultOperator:"equal",widgets:{boolean:{operators:["equal","not_equal","is_null","is_not_null"],widgetProps:{}},field:{operators:["equal","not_equal"]}}},"!group":{defaultOperator:"some",mainWidget:"number",widgets:{number:{widgetProps:{min:0},operators:["some","all","none","equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between"],opProps:{equal:{label:"Count =="},not_equal:{label:"Count !="},less:{label:"Count <"},less_or_equal:{label:"Count <="},greater:{label:"Count >"},greater_or_equal:{label:"Count >="},between:{label:"Count between"},not_between:{label:"Count not between"}}}}},case_value:{mainWidget:"case_value",widgets:{case_value:{widgetProps:{}}}}},settings:ef,ctx:Hd};const cf=uf=rf(uf,["rangeslider","treeselect","treemultiselect"]);var pf="ADD_GROUP",df="ADD_CASE_GROUP",ff="REMOVE_GROUP",gf="SET_CONJUNCTION",vf="SET_NOT",hf="ADD_RULE",yf="REMOVE_RULE",mf="SET_FIELD",bf="SET_FIELD_SRC",Of="SET_OPERATOR",_f="SET_VALUE",wf="SET_VALUE_SRC",Sf="SET_FUNC_VALUE",Ef="SET_OPERATOR_OPTION",Ff="SET_LOCK",jf="SET_TREE",Lf="MOVE_ITEM",Cf="after",If="before",kf="append",xf="prepend",Tf="SET_DRAG_PROGRESS",Rf="SET_DRAG_START",Af="SET_DRAG_END",Pf=r(1612),Nf=r.n(Pf);function Df(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Df(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Df(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Mf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function Mf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zf=function(e,t,r,n,o,i){var a,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(!e.getIn(ei(t)))return e;var u=(null==o||null===(a=o.get)||void 0===a?void 0:a.call(o,"id"))||n,c=i.settings.shouldCreateEmptyGroup,p=t.push(u),d=!c,f=!(null==s||!s.isDefaultCase),g=e;return(e=qf(e,t,r,u,pl(i).merge(eo(o)||{}),i,l))!==g&&(l||f||(e=e.setIn(ei(p,"children1"),new no.OrderedMap),d&&(e=qf(e,p,"rule",io(),sl(i,null==s?void 0:s.parentRuleGroupField),i))),e=ii(e)),e},qf=function(e,t,r,n,o,i){var a,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if("switch_group"===r)throw new Error("Can't add switch_group programmatically");if(!e.getIn(ei(t)))return e;var s,u,c=(null==o||null===(a=o.get)||void 0===a?void 0:a.call(o,"id"))||n,p=i.settings,d=p.maxNumberOfCases,f=p.maxNumberOfRules,g=p.maxNesting,v="switch_group"===e.get("type"),h=v?e.getIn(ei(t.take(2))):null,y=ei(t,"children1"),m=e.getIn(y),b=!!m&&m.size,O=b?m.size:null;if("case_group"===r)s=O,u=d;else if("group"===r){var _=ni(e,t);if(_.length){var w=_[0],S=w.path,E=w.field,F=Cp(i,E);s=t.size-S.length,u=null==F?void 0:F.maxNesting}else s=t.size,u=g}else{var j=ni(e,t);if(j.length){var L=j[0],C=L.path,I=L.field,k=Cp(i,I),x=ri(e,C);u=null==k?void 0:k.maxNumberOfRules,s=ui(x)}else s=ui(v?h:e),u=f}var T=!u||!s||s<u,R={type:r,id:c,properties:o};Kf(i,R,l);var P="case_group"===r&&b&&null==m.last().get("children1");if(T){var N=new no.OrderedMap(A({},c,new no.Map(R)));if(b)if(P){var D=m.last(),V=new no.OrderedMap(A(A({},c,new no.Map(R)),D.get("id"),D));e=(e=e.deleteIn(ei(y,"children1",D.get("id")))).mergeIn(y,V)}else e=e.mergeIn(y,N);else e=e.setIn(y,N);e=ii(e)}return e},Wf=function(e,t){return e=e.deleteIn(ei(t)),ii(e)},Bf=function(e,t,r,n,o){var i,a,l,s,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=e.getIn(ei(t));if(!c)return{state:e};var p=u.isEndValue,d=u.canDropArgs;if(!r)return{state:e=Wf(e,t)};var f=n.settings,g=f.fieldSeparator,v=f.setOpOnChangeField,h=f.showErrorMessage;Array.isArray(r)&&(r=r.join(g));var y=c.get("type"),m=c.get("properties"),b="rule_group"==y,O=null==m?void 0:m.get("fieldSrc"),_=Cp(n,r);if(!_)return console.warn("No config for LHS ".concat(r)),{state:e};var w=_.type;"!group"!==w&&"!struct"!==w||(w=null);var S=null==m?void 0:m.get("operator"),E=null==m?void 0:m.get("operatorOptions"),F=null==m?void 0:m.get("field"),j="!group"==_.type,L=j&&"array"==_.mode,C=b!=j,I=_&&-1!==(null===(i=_.operators)||void 0===i?void 0:i.indexOf(S))?S:null,k="func"===O&&(null==F||null===(a=F.get)||void 0===a?void 0:a.call(F,"func"))===(null===(l=r)||void 0===l||null===(s=l.get)||void 0===s?void 0:s.call(l,"func"))&&!!I,x=null,T="func"===O?Du(n,w):Vu(n,r);if(T&&1==T.length)x=T[0];else if(k)x=I;else if(T&&T.length>1){var R,A=$f(v);try{for(A.s();!(R=A.n()).done;){var P=R.value;if("keep"!=P||C?"default"==P?x=al(n,r,!1):"first"==P&&(x=$u(n,r)):x=I,x)break}}catch(e){A.e(e)}finally{A.f()}}if(!j&&!_.operators)return console.warn("Type ".concat(_.type," is not supported")),{state:e};b&&!j&&(e=(e=(e=e.setIn(ei(t,"type"),"rule")).deleteIn(ei(t,"children1"))).setIn(ei(t,"properties"),new no.OrderedMap)),m||(e=e.setIn(ei(t,"properties"),new no.OrderedMap));var N=!h;if(j){e=e.setIn(ei(t,"type"),"rule_group");var D=ju(n,n,m,r,x,"field",N,p,d),V=(D.canReuseValue,D.newValue),$=D.newValueSrc,M=D.newValueType,z=D.operatorCardinality,q=pl(n,_,r).merge({field:r,fieldSrc:"field",mode:_.mode});L&&(q=q.merge({operator:x,value:V,valueSrc:$,valueType:M})),e=(e=e.setIn(ei(t,"children1"),new no.OrderedMap)).setIn(ei(t,"properties"),q),_.initialEmptyWhere&&1==z||(e=qf(e,t,"rule",io(),sl(n,r),n)),e=ii(e)}else e=e.updateIn(ei(t,"properties"),(function(e){return e.withMutations((function(e){var t=ju(n,n,e,r,x,"field",N,p,d),o=t.canReuseValue,i=t.newValue,a=t.newValueSrc,l=t.newValueType,s=t.newValueError,u=t.newFieldError,c=t.fixedField,f=r;c!==r&&(f=c),h&&(e=(e=e.set("fieldError",u)).set("valueError",s));var g=o?E:ll(n,x,f);return e=e.set("field",f).delete("fieldType").set("fieldSrc",O).set("operator",x).set("operatorOptions",g).set("value",i).set("valueSrc",a).set("valueType",l),o||(e=e.delete("asyncListValues")),e}))}));return{state:e}},Uf=function(e,t,r,n,o,i,a){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(!e.getIn(ei(t)))return{state:e};var s=l.canDropArgs,u=l.isEndValue,c=i.settings,p=c.fieldSeparator,d=c.showErrorMessage,f=e.getIn(ei(t,"properties","valueSrc",r+""))||null;"field"===f&&Array.isArray(n)&&(n=n.join(p));var g=e.getIn(ei(t,"properties","field"))||null,v=e.getIn(ei(t,"properties","operator"))||null,h=Ip(i,v,g),y=v?fo(h):null,m=o||Mu(n,f,i),b=$(_u(i,g,g,v,n,m,f,a,!d,u,s),2),O=b[0],_=b[1],w=null==_?void 0:_.find((function(e){return!e.fixed&&!e.ignore})),S=w?iu(w):null,E=O!==n;E&&(n=O),e=Gf(e,t,i,y);var F=Array.from({length:y},(function(o,i){return i==r?n:e.getIn(ei(t,"properties","value",i+""))||null})),j=Array.from({length:y},(function(r,n){return e.getIn(ei(t,"properties","valueSrc",n+""))||null})),L=Fu(i,g,v,F,j),C=L?iu(L):null;return(!!d||!S&&!C||E)&&(e=e.deleteIn(ei(t,"properties","asyncListValues")),void 0===n?e=(e=e.setIn(ei(t,"properties","value",r),void 0)).setIn(ei(t,"properties","valueType",r),null):(a&&(e=e.setIn(ei(t,"properties","asyncListValues"),a)),e=(e=e.setIn(ei(t,"properties","value",r),n)).setIn(ei(t,"properties","valueType",r),m))),d&&(e.getIn(ei(t,"properties","valueError"))||(e=e.setIn(ei(t,"properties","valueError"),new no.List(new Array(y)))),e=e.setIn(ei(t,"properties","valueError",r),S),y>=2&&(e=e.setIn(ei(t,"properties","valueError",y),C))),{state:e}},Gf=function(e,t,r,n){if(!n){var o=e.getIn(ei(t,"properties","field"))||null,i=e.getIn(ei(t,"properties","operator"))||null,a=Ip(r,i,o);n=i?fo(a):null}for(var l=0,s=["value","valueType","valueError","valueSrc"];l<s.length;l++){var u=s[l];e.getIn(ei(t,"properties",u))||(e=e.setIn(ei(t,"properties",u),new no.List(n?Array.from({length:n}):[])))}return e},Kf=function e(t,r,n){n&&Array.isArray(n)&&(r.children1=new no.OrderedMap(n.reduce((function(r,n){var o,i=null!==(o=n.id)&&void 0!==o?o:io(),a=Vf(Vf({},n),{},{properties:dl(t,n).merge(eo(n.properties)||{}),id:i});return e(t,a,a.children1),Vf(Vf({},r),{},A({},i,new no.Map(a)))}),{})))},Hf={dragging:{id:null,x:null,y:null,w:null,h:null},mousePos:{},dragStart:{id:null}},Xf=function(e,t){return{type:jf,tree:t,config:e}},Jf=function(e,t,r){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return{type:hf,ruleType:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rule",children:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,path:mo(t),id:io(),properties:sl(e,n).merge(eo(r)||{}),config:e,meta:{parentRuleGroupField:n}}},Yf=function(e,t){return{type:yf,path:mo(t),config:e}},Qf=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:df,path:mo(t),children:n,id:io(),properties:pl(e).merge(eo(r)||{}),config:e,meta:{isDefaultCase:!0}}},Zf=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:df,path:mo(t),children:n,id:io(),properties:pl(e).merge(eo(r)||{}),config:e}},eg=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:pf,path:mo(t),children:n,id:io(),properties:pl(e,o).merge(eo(r)||{}),config:e,meta:{parentRuleGroupField:o}}},tg=function(e,t){return{type:ff,path:mo(t),config:e}},rg=function(e,t,r,n){return{type:Lf,fromPath:mo(t),toPath:mo(r),placement:n,config:e}},ng=function(e,t,r){return{type:gf,path:mo(t),conjunction:r}},og=function(e,t,r){return{type:vf,path:mo(t),not:r}},ig=function(e,t,r){return{type:Ff,path:mo(t),lock:r}},ag=function(e,t,r,n,o){return{type:mf,path:mo(t),field:r,config:e,asyncListValues:n,_meta:o}},lg=function(e,t,r){return{type:bf,path:mo(t),srcKey:r,config:e}},sg=function(e,t,r){return{type:Of,path:mo(t),operator:r,config:e}},ug=function(e,t,r,n,o,i,a){return{type:_f,path:mo(t),delta:r,value:n,valueType:o,asyncListValues:i,config:e,_meta:a}},cg=function(e,t,r,n,o){return{type:wf,path:mo(t),delta:r,srcKey:n,config:e,_meta:o}},pg=function(e,t,r,n,o,i,a,l,s){return{type:Sf,path:mo(t),delta:r,parentFuncs:n,argKey:o,value:i,valueType:a,asyncListValues:l,config:e,_meta:s}},dg=function(e,t,r,n){return{type:Ef,path:mo(t),name:r,value:n,config:e}};function fg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fg(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vg=gg(gg(gg({},v),{},{Export:f,Import:l,ConfigMixins:sf},f),l),hg=r(7028),yg=r.n(hg);const mg=function(e,t,r,n,o){var i=Vf({tree:t},Hf);return function(){var t,a,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments.length>1?arguments[1]:void 0,u=null!==(t=null!==(a=null==o?void 0:o())&&void 0!==a?a:null==s?void 0:s.config)&&void 0!==t?t:e,c={},p=function(e,t){if(!e||!e.type)return null;var r,n=[jf,Rf,Tf,Af],o=Nf()(Mo()(e,["config","asyncListValues"]),bo),i=e.path&&function(e,t){return e.getIn(ei(t,"properties","field"))||null}(t.tree,e.path)||e.field;return i&&(null!==(r=i)&&void 0!==r&&r.toJS&&(i=i.toJS()),o.affectedField=i),(n.includes(e.type)||0==e.type.indexOf("@@redux"))&&(o=null),o}(s,l);switch(null==s?void 0:s.type){case jf:var d=r(u,s.tree);c.tree=d;break;case df:c.tree=zf(l.tree,s.path,"case_group",s.id,s.properties,u,s.children,s.meta);break;case pf:c.tree=zf(l.tree,s.path,"group",s.id,s.properties,u,s.children,s.meta);break;case ff:c.tree=function(e,t,r){if(!e.getIn(ei(t)))return e;e=Wf(e,t);var n=r.settings.canLeaveEmptyGroup,o=t.slice(0,-1);return fi(e,o)||n||(e=ai(e),!di(e)||n)||(e=qf(e,new no.List,"rule",io(),sl(r,void 0,void 0,!1,!1),r)),ii(e)}(l.tree,s.path,u);break;case hf:c.tree=qf(l.tree,s.path,s.ruleType,s.id,s.properties,u,s.children);break;case yf:c.tree=function(e,t,r){if(!e.getIn(ei(t)))return e;e=Wf(e,t);var n=r.settings.canLeaveEmptyGroup,o=t.pop(),i=e.getIn(ei(o)),a=i.getIn(["properties","field"]),l=i.getIn(["properties","operator"]),s=a?Cp(r,a):null,u=l?Ip(r,l,a):null,c=a&&l&&0!=u.cardinality,p="rule_group"==i.get("type"),d=!fi(e,o),f=p?c&&s.initialEmptyWhere:n;return d&&!f&&(p&&(e=e.deleteIn(ei(o))),e=ai(e),di(e)&&!n)&&(e=qf(e,new no.List,"rule",io(),sl(r,void 0,void 0,!1,!1),r)),ii(e)}(l.tree,s.path,u);break;case gf:c.tree=function(e,t,r){return e.getIn(ei(t))?e=e.setIn(ei(t,"properties","conjunction"),r):e}(l.tree,s.path,s.conjunction);break;case vf:c.tree=function(e,t,r){return e.getIn(ei(t))?e=e.setIn(ei(t,"properties","not"),r):e}(l.tree,s.path,s.not);break;case mf:var f=Bf(l.tree,s.path,s.field,u,s.asyncListValues,s._meta).state;c.tree=f;break;case bf:c.tree=function(e,t,r,n){var o=e.getIn(ei(t));if(!o)return e;var i=n.settings.keepInputOnChangeFieldSrc,a=o.get("properties"),l=null==a?void 0:a.get("field"),s=null==a?void 0:a.get("fieldType"),u=Cp(n,l),c=(null==u?void 0:u.type)||s;c&&"!group"!==c&&"!struct"!==c||(c=null);var p=!Nu.includes(c);return(e=i&&!Yu(o,n)&&p?(e=(e=e.setIn(ei(t,"properties","field"),null)).deleteIn(ei(t,"properties","fieldError"))).setIn(ei(t,"properties","fieldType"),c):e.setIn(ei(t,"properties"),sl(n,null,null,!1))).setIn(ei(t,"properties","fieldSrc"),r)}(l.tree,s.path,s.srcKey,u);break;case Ff:c.tree=function(e,t,r){return e.getIn(ei(t))?e=oi(e.setIn(ei(t,"properties","isLocked"),r)):e}(l.tree,s.path,s.lock);break;case Of:c.tree=function(e,t,r,n){var o=e.getIn(ei(t));if(!o)return e;var i=n.settings.showErrorMessage,a=o.get("properties"),l=o.get("children1"),s=a.get("field"),u=(a.get("fieldSrc"),Cp(n,s)),c="!group"==(null==u?void 0:u.type),p=Ip(n,r,s),d=p?fo(p):null;return e=e.updateIn(ei(t,"properties"),(function(e){return e.withMutations((function(e){var t=e.get("field"),o=e.get("operatorOptions"),a=(e.get("value",new no.List),e.get("valueSrc",new no.List),e.get("operator"),ju(n,n,e,t,r,"operator",!0)),l=a.canReuseValue,s=a.newValue,u=a.newValueSrc,c=a.newValueType,p=a.newValueError;i&&(e=e.set("valueError",p));var d=l?o:ll(n,r,t);return l||(e=e.delete("asyncListValues")),e.set("operator",r).set("operatorOptions",d).set("value",s).set("valueSrc",u).set("valueType",c)}))})),c&&0==d&&0==l.size&&(e=qf(e,t,"rule",io(),sl(n,s),n)),e}(l.tree,s.path,s.operator,u);break;case _f:var g=Uf(l.tree,s.path,s.delta,s.value,s.valueType,u,s.asyncListValues,s._meta).state;c.tree=g;break;case Sf:var v=function(e,t,r,n,o,i,a,l,s){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},c=t.getIn(ei(r));if(!c)return t;var p,d=-1===n,f=c.get("properties"),g=f.get("field"),v=f.get("value"),h=[],y=d?g:v.getIn([n]),m=$f(o||[]);try{for(m.s();!(p=m.n()).done;){var b=$(p.value,2),O=b[0],_=b[1];if(h.push([O,_,y]),O!==y.get("func")){var w=h.map((function(e){var t=$(e,2),r=t[0],n=t[1];return"".concat(r,"(").concat(n,")")})).join("/")||"root";throw new Error("In ".concat(d?"LHS":"RHS"," for path ").concat(w," expected func key ").concat(O," but got ").concat(parent.get("func")))}y=y.getIn(["args",_,"value"])}}catch(e){m.e(e)}finally{m.f()}if(i){var S=y.get("func"),E=mp(e,S).args[i];y="!valueSrc"===l?Au(y,i,a,E,e):Ru(y,i,a,E,e)}else y=Iu(y,a,e,!0),u.canDropArgs=!0;for(var F=y;h.length;){var j=$(h.pop(),3),L=j[0],C=j[1],I=j[2],k=mp(e,L).args[C];F=Ru(I,C,F,k,e)}return d?Bf(t,r,F,e,s,u):Uf(t,r,n,F,void 0,e,s,u)}(u,l.tree,s.path,s.delta,s.parentFuncs,s.argKey,s.value,s.valueType,s.asyncListValues,s._meta),h=v.state;c.tree=h;break;case wf:c.tree=function(e,t,r,n,o){if(!e.getIn(ei(t)))return e;var i=o.settings.showErrorMessage,a=e.getIn(ei(t,"properties","field"))||null,l=e.getIn(ei(t,"properties","operator"))||null,s=Ip(o,l,a),u=l?fo(s):null;if(e=(e=(e=(e=Gf(e,t,o,u)).setIn(ei(t,"properties","value",r+""),void 0)).setIn(ei(t,"properties","valueType",r+""),null)).deleteIn(ei(t,"properties","asyncListValues")),i&&(e=e.setIn(ei(t,"properties","valueError",r),null),s.validateValues&&(e=e.setIn(ei(t,"properties","valueError",u),null))),e=void 0===n?e.setIn(ei(t,"properties","valueSrc",r+""),null):e.setIn(ei(t,"properties","valueSrc",r+""),n),n){var c=e.getIn(ei(t,"properties")),p=ju(o,o,c,a,l,"valueSrc",!0),d=p.canReuseValue,f=p.newValue,g=p.newValueSrc,v=p.newValueType;p.newValueError,d||g.get(r)!=n||(e=(e=e.setIn(ei(t,"properties","value",r+""),f.get(r))).setIn(ei(t,"properties","valueType",r+""),v.get(r)))}return e}(l.tree,s.path,s.delta,s.srcKey,u,s._meta);break;case Ef:c.tree=function(e,t,r,n){return e.getIn(ei(t))?e.setIn(ei(t,"properties","operatorOptions",r),n):e}(l.tree,s.path,s.name,s.value);break;case Lf:c.tree=function(e,t,r,n){var o=ri(e,t),i=t.pop(),a=t.size>1?ri(e,i):null,l=a?a.get("children1"):null,s=ri(e,r),u=n==kf||n==xf?r:r.pop(),c=n==kf||n==xf?s:r.size>1?ri(e,u):null,p=c?c.get("children1"):null;if(!a||!c||!o)return e;var d=a.get("id")==c.get("id"),f=u.size<i.size&&go(u.toArray(),i.toArray().slice(0,u.size)),g=u.size>i.size&&go(i.toArray(),u.toArray().slice(0,i.size)),v=null,h=null;f?v=no.List(i.toArray().slice(u.size)):g&&(h=no.List(u.toArray().slice(i.size)));var y=p,m=l;return g||(m=m.delete(o.get("id"))),d?y=m:f&&(y=y.updateIn(ti(v,"children1"),(function(e){return m}))),n==If||n==Cf?y=no.OrderedMap().withMutations((function(e){var t,r=$f(y.entries());try{for(r.s();!(t=r.n()).done;){var i=$(t.value,2),a=i[0],l=i[1];a==(null==s?void 0:s.get("id"))&&n==If&&e.set(o.get("id"),o),e.set(a,l),a==(null==s?void 0:s.get("id"))&&n==Cf&&e.set(o.get("id"),o)}}catch(e){r.e(e)}finally{r.f()}})):n==kf?y=y.merge(no.OrderedMap(A({},o.get("id"),o))):n==xf&&(y=no.OrderedMap(A({},o.get("id"),o)).merge(y)),g&&(m=(m=m.updateIn(ti(h,"children1"),(function(e){return y}))).delete(o.get("id"))),d||f||(e=e.updateIn(ei(i,"children1"),(function(e){return m}))),g||(e=e.updateIn(ei(u,"children1"),(function(e){return y}))),ii(e)}(l.tree,s.fromPath,s.toPath,s.placement);break;case Rf:c.dragStart=s.dragStart,c.dragging=s.dragging,c.mousePos=s.mousePos;break;case Tf:c.mousePos=s.mousePos,c.dragging=s.dragging;break;case Af:c.tree=function(e,t){return t.settings.canLeaveEmptyGroup||(e=ai(e)),e}(l.tree,u),c=Vf(Vf({},c),Hf)}return p&&(c.__lastAction=p),n&&c.tree&&l.tree&&n(l.tree),Vf(Vf(Vf({},l),{__lastAction:void 0}),c)}},bg=R().createContext();var Og=r(7694),_g=r(200),wg="after",Sg="before",Eg="append",Fg="prepend",jg=function(e,t){return{type:"SET_DRAG_PROGRESS",mousePos:e,dragging:t}},Lg=function(e,t,r){return{type:"SET_DRAG_START",dragStart:e,dragging:t,mousePos:r}},Cg=function(){return{type:"SET_DRAG_END"}},Ig=y,kg=m,xg=b,Tg=function(e,t,r){if(!t||!e||e.length<=t)return e;var n=e.substr(0,t-1);return(r?n.substr(0,n.lastIndexOf(" ")):n)+"..."},Rg=function(e,t){return e===t||(null==e?void 0:e.equals(t))},Ag=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t||(Array.isArray(e)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var o=0;o<n;o++)if(!(r?Ag(e[o],t[o],r):e[o]===t[o]))return!1;return!0}(e,t,r):e&&"function"==typeof e.equals?e.equals(t):"object"===E(e)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),o=Object.keys(t),i=n.length;if(o.length!==i)return!1;for(var a=0;a<i;a++){var l=n[a];if(!(r?Ag(e[l],t[l],r):e[l]===t[l]))return!1}return!0}(e,t,r):e===t)},Pg=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(null!=e?e:("undefined"!=typeof process&&process.env,0))?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}}(),Ng=vg.Validation.validateAndFixTree,Dg=function e(t){if(t){var r,n=(r=t)._reactRootContainer?"root":Object.getOwnPropertyNames(r).filter((function(e){return e.startsWith("__reactContainer")})).length>0?"container":void 0;return void 0!==n?n:e(t.parentNode)}},Vg=function(e){return"root"===Dg(e)},$g=function(e,t){return function(r,n){var o=e.props,i=e.state,a=r!=o||n!=i;if(a&&i==n&&o!=r){var l=[];for(var s in r){var u=r[s]!=o[s];u&&("ignore"==t[s]?u=!1:"shallow_deep"==t[s]?u=!Ag(r[s],o[s],!0):"shallow"==t[s]?u=!Ag(r[s],o[s]):"function"==typeof t[s]&&(u=t[s](r[s],o[s],r,o))),u&&l.push(s)}l.length||(a=!1)}return a}},Mg=function(e){return function(t,r){return!Ag(e.props,t)||!Ag(e.state,r)}},zg=function(e){if(e.shouldComponentUpdate||(e.shouldComponentUpdate=Mg(e)),16==(r=R().version.split(".").map(parseInt.bind(null,10)))[0]&&r[1]<3||r[0]<16)e.componentWillReceiveProps=function(t){e.onPropsChanged(t)};else{var t=e.shouldComponentUpdate;e.shouldComponentUpdate=function(r,n){return!Ag(e.props,r)&&e.onPropsChanged(r),t.call(e,r,n)}.bind(e)}var r},qg=function(e,t,r){return Nf()(e,(function(e){return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r(e.apply(void 0,[t].concat(o)))}}))};function Wg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wg(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ug(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ug=function(){return!!e})()}var Gg=function(e){function t(e){var r,n,o,i;S(this,t),n=this,i=[e],o=I(o=t),(r=C(n,Ug()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i))).shouldComponentUpdate=$g(r,{tree:function(e){return e!==r.oldValidatedTree||r.oldValidatedTree!==r.validatedTree}}),zg(r),r._updateActions(e),r.validatedTree=e.getMemoizedTree(e.config,e.tree,void 0,e.sanitizeTree),r.oldValidatedTree=r.validatedTree;var a=e.getBasicConfig(e.config);return e.onInit&&e.onInit(r.validatedTree,a,void 0,r.actions),r}return x(t,e),L(t,[{key:"_updateActions",value:function(e){var t=e.config,r=e.dispatch;this.actions=qg(Bg(Bg(Bg({},Ig),kg),xg),t,r)}},{key:"onPropsChanged",value:function(e){var t=e.onChange,r=this.props.config,n=e.tree,o=(this.props.tree,e.config);if(this.oldValidatedTree=this.validatedTree,this.validatedTree=n,r!==o&&(this._updateActions(e),this.validatedTree=e.getMemoizedTree(o,n,r)),!Rg(this.validatedTree,this.oldValidatedTree)){var i=e.getBasicConfig(o);t&&t(this.validatedTree,i,e.__lastAction,this.actions)}}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.renderBuilder,n=e.dispatch;return r({tree:this.validatedTree,actions:this.actions,config:t,dispatch:n})}}])}(T.Component);Gg.propTypes={config:yg().object.isRequired,onChange:yg().func,onInit:yg().func,renderBuilder:yg().func,tree:yg().any};var Kg=(0,_g.connect)((function(e){return{tree:e.tree,__lastAction:e.__lastAction}}),null,null,{context:bg})(Gg);Kg.displayName="ConnectedQuery";const Hg=Kg;function Xg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xg=function(){return!!e})()}var Jg=vg.DefaultUtils.defaultRoot,Yg=vg.ConfigUtils.createConfigMemo,Qg=function(e){function t(e,r){var n,o,i,a,l,s;S(this,t),a=this,s=[e,r],l=I(l=t),(i=C(a,Xg()?Reflect.construct(l,s||[],I(a).constructor):l.apply(a,s))).setLastTree=function(e){i.prevTree&&(i.prevprevTree=i.prevTree),i.prevTree=e},i.getConfig=function(){return i.config},i.shouldComponentUpdate=$g(i,{value:function(e,t){return!1}}),zg(i);var u=Yg({reactIndex:null!==(n=null===(o=i._reactInternals)||void 0===o?void 0:o.index)&&void 0!==n?n:-1,maxSize:2,canCompile:!0}),c=u.getExtendedConfig,p=u.getBasicConfig,d=u.clearConfigMemo;i.getMemoizedConfig=c,i.getBasicConfig=p,i.clearConfigMemo=d,i.getMemoizedTree=function(){var e,t,r;return function(n,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return o?n.__configId===r&&(Rg(o,e)||Rg(o,t))?t:(r=n.__configId,e=o,t=!1===a?Ng(o,null,n,i||n,!1,!1,!1):Ng(o,null,n,i||n)):null}}();var f=i.getMemoizedConfig(e),g=f.settings.shouldCreateEmptyGroup,v=Jg(f,!g),h=!!e.value,y=e.value||v,m=i.getMemoizedTree(f,y,void 0,h),b=mg(f,m,i.getMemoizedTree,i.setLastTree,i.getConfig),O=(0,Og.createStore)(b);return i.config=f,i.state={store:O},i.QueryWrapper=function(e){return f.settings.renderProvider(e,f.ctx)},i}return x(t,e),L(t,[{key:"componentWillUnmount",value:function(){this.clearConfigMemo()}},{key:"onPropsChanged",value:function(e){var t=this.props,r=this.config,n=this.getMemoizedConfig(e),o=r!==n,i=this.state.store.getState().tree,a=!Rg(e.value,this.props.value)&&!Rg(e.value,i),l=a?e.value||Jg(e):i,s=a&&!Rg(e.value,this.prevTree)&&!Rg(e.value,this.prevprevTree);if(this.sanitizeTree=s||o,o&&(t.settings.renderProvider!==e.settings.renderProvider&&(this.QueryWrapper=function(e){return n.settings.renderProvider(e,n.ctx)}),this.config=n),a||o){var u=this.getMemoizedTree(n,l,r,this.sanitizeTree);this.state.store.dispatch(Ig.setTree(n,u))}}},{key:"render",value:function(){var e=this.props,t=e.renderBuilder,r=e.get_children,n=e.onChange,o=e.onInit,i=this.state.store,a=this.config,l=this.QueryWrapper;return R().createElement(l,{config:a},R().createElement(_g.Provider,{store:i,context:bg},R().createElement(Hg,{config:a,getMemoizedTree:this.getMemoizedTree,getBasicConfig:this.getBasicConfig,sanitizeTree:this.sanitizeTree,onChange:n,onInit:o,renderBuilder:t||r})))}}])}(T.Component);function Zg(){return Zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zg.apply(null,arguments)}Qg.propTypes={conjunctions:yg().object.isRequired,fields:yg().object.isRequired,types:yg().object.isRequired,operators:yg().object.isRequired,widgets:yg().object.isRequired,settings:yg().object.isRequired,ctx:yg().object.isRequired,onChange:yg().func,onInit:yg().func,renderBuilder:yg().func,value:yg().any};var ev=r(2584),tv=r.n(ev);function rv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rv=function(){return!!e})()}var nv=vg.ConfigUtils.getFieldConfig;function ov(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ov=function(){return!!e})()}var iv=vg.clone,av=vg.TreeUtils.getFlatTree,lv=!1,sv=["isDraggingTempo","isDraggingMe","dragging"];function uv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uv=function(){return!!e})()}const cv=function(e){return function(t){var r;return r=function(r){function n(e){var t,r,o,i;return S(this,n),r=this,i=[e],o=I(o=n),(t=C(r,uv()?Reflect.construct(o,i||[],I(r).constructor):o.apply(r,i))).handleDraggerMouseDown=function(e){var r=t.props.id,n=t.wrapper.current;t.props.onDragStart&&t.props.onDragStart(r,n,e)},t.wrapper=R().createRef(),t}return x(n,r),L(n,[{key:"render",value:function(){var r=this.props,n=r.isDraggingTempo,o=r.isDraggingMe,i=r.dragging,a=kd(r,sv),l=a.isTrueLocked,s={};o&&n&&(lv||(s={top:i.y,left:i.x,width:i.w}));var u=tv()(e,"group-or-rule",o&&n?"qb-draggable":null,o&&!n?"qb-placeholder":null,l?"locked":null);return R().createElement("div",{className:u,style:s,ref:this.wrapper,"data-id":this.props.id},R().createElement(t,Zg({handleDraggerMouseDown:this.handleDraggerMouseDown,isDraggingMe:o,isDraggingTempo:n},a)))}}])}(T.PureComponent),r.propTypes={isDraggingTempo:yg().bool,isDraggingMe:yg().bool,onDragStart:yg().func,dragging:yg().object,isLocked:yg().bool,isTrueLocked:yg().bool},r}};var pv=r(3790),dv=r.n(pv),fv=r(350),gv=r.n(fv);function vv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hv=function(){return!!e})()}var yv=vg.ConfigUtils,mv=yv.getFieldConfig,bv=yv.getOperatorConfig,Ov=function(e){function t(e){var r,n,o,i;return S(this,t),n=this,i=[e],o=I(o=t),(r=C(n,hv()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i))).shouldComponentUpdate=$g(r,{selectedField:function(e,t){return!1}}),zg(r),r.onPropsChanged(e),r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","selectedField","selectedFieldSrc","selectedFieldType","selectedOperator"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t,r=e.config,n=e.selectedField,o=e.selectedFieldType,i=e.selectedOperator,a=mv(r,n),l=z((null==a?void 0:a.operators)||(null===(t=r.types[o])||void 0===t?void 0:t.operators)||[]);n||l.includes(i)||l.push(i);var s=Nf()(gv()(r.operators,(function(e,t){return-1!==(null==l?void 0:l.indexOf(t))})),(function(e,t){return bv(r,t,n)})),u=this.buildOptions(r,s,l),c=s[i]||{},p=i?[i]:null;return{placeholder:this.props.config.settings.operatorPlaceholder,items:u,selectedKey:i,selectedKeys:p,selectedPath:p,selectedLabel:c.label,selectedAltLabel:c.label2||c.tooltip,selectedOpts:c,fieldConfig:a}}},{key:"buildOptions",value:function(e,t,r){return t&&r?dv()(t).sort((function(e,t){return r.indexOf(e)-r.indexOf(t)})).map((function(e){var r=t[e];return{key:e,path:e,label:r.label,altLabel:r.label2,tooltip:r.tooltip}})):null}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setOperator,o=e.readonly,i=e.id,a=e.groupId,l=t.settings.renderOperator,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vv(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:i,groupId:a,config:t,customProps:r,readonly:o,setField:n},this.meta);return s.items?l(s,t.ctx):null}}])}(T.Component);Ov.propTypes={id:yg().string,groupId:yg().string,config:yg().object.isRequired,selectedField:yg().any,selectedFieldId:yg().string,selectedFieldType:yg().string,selectedFieldSrc:yg().string,selectedOperator:yg().string,readonly:yg().bool,customProps:yg().object,setOperator:yg().func.isRequired};var _v=["children"],wv=function(e){var t=e.children,r=kd(e,_v);return R().createElement("div",r,t)},Sv=function(){},Ev=function(){return R().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"gray",width:"18px",height:"18px"},R().createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),R().createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))},Fv=function(e){return function(t){var r=t.config.settings.useConfirm,n=r?r.call(t.config.ctx,t.config.ctx):null;return R().createElement(e,Zg({},t,{confirmFn:n}))}},jv=function(e){var t=e.id,r=e.isLHS,n=e.delta;return[t,r?"L":"R",r?-1:n||0,(e.parentFuncs||[]).map((function(e){var t=$(e,2),r=t[0],n=t[1];return"".concat(r,"(").concat(n,")")})).join("/")].join(":")},Lv=function(e,t){var r;return"function"==typeof t?(r=function(r){return null==t?void 0:t(r,e.ctx)}).displayName=t.name:r=t,r};function Cv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cv=function(){return!!e})()}var Iv=function(e){function t(){return S(this,t),e=this,n=arguments,r=I(r=t),C(e,Cv()?Reflect.construct(r,n||[],I(e).constructor):r.apply(e,n));var e,r,n}return x(t,e),L(t,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedFieldSrc,o=e.selectedFieldType,i=e.selectedOperator,a=e.setOperator,l=e.selectedFieldId,s=e.showOperator,u=e.showOperatorLabel,c=e.selectedFieldWidgetConfig,p=e.readonly,d=e.id,f=e.groupId;return[s&&R().createElement(wv,{key:"operators-for-"+l,className:"rule--operator"},t.settings.showLabels&&R().createElement("label",{className:"rule--label"},t.settings.operatorLabel),R().createElement(Ov,{key:"operator",config:t,selectedField:r,selectedFieldSrc:n,selectedFieldType:o,selectedFieldId:l,selectedOperator:i,setOperator:a,customProps:t.settings.customOperatorSelectProps,readonly:p,id:d,groupId:f})),u&&R().createElement(wv,{key:"operators-for-"+l,className:"rule--operator"},R().createElement("div",{className:"rule--operator-wrapper"},t.settings.showLabels?R().createElement("label",{className:"rule--label"},""):null,R().createElement("div",{className:"rule--operator-text-wrapper"},R().createElement("span",{className:"rule--operator-text"},c.operatorInlineLabel))))]}}])}(T.PureComponent);function kv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xv=function(){return!!e})()}var Tv=vg.RuleUtils.getFieldPathLabels,Rv=vg.ConfigUtils,Av=Rv.getFieldConfig,Pv=Rv.getFieldParts,Nv=Rv.getFieldPathParts,Dv=function(e){function t(e){var r,n,o,i;return S(this,t),n=this,i=[e],o=I(o=t),(r=C(n,xv()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i))).setField=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.props.id;if(!n.widgetId){var i=[o,"L",-1].join(":");n.widgetId=i}r.props.setField(e,t,n)},zg(r),r.onPropsChanged(e),r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["selectedField","selectedFieldSrc","selectedFieldType","config","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.selectedField,r=e.selectedFieldType,n=e.config,o=e.parentField,i=t,a=n.settings,l=a.maxLabelsLength,s=a.fieldSeparatorDisplay,u=a.fieldPlaceholder,c=(a.fieldSeparator,!!t),p=c?null:Tg(u,l),d=c?Av(n,i):null,f=d||{},g=Nv(i,n),v=Nv(i,n,!0),h=this.getFieldLabel(d,i,n),y=Tv(i,n),m=y?y.join(s):null;(m==h||o)&&(m=null);var b=f.label2||f.tooltip,O=Pv(o,n),_=o?Av(n,o):null,w=o?_&&_.subfields:n.fields,S=!c&&r,F=this.buildOptions(O,n,w,S,O),j=S?"Please select field":null;return i&&"object"===E(i)&&(i=void 0),{placeholder:p,items:F,parentField:o,selectedKey:i,selectedKeys:g,selectedPath:v,selectedLabel:h,selectedOpts:f,selectedAltLabel:b,selectedFullLabel:m,errorText:j}}},{key:"getFieldLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.maxLabelsLength,o=Pv(t,r),i=(null==e?void 0:e.label)||Vo()(o);return Tg(i,n)}},{key:"buildOptions",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(!r)return null;var l=t.settings,s=l.fieldSeparator,u=l.fieldSeparatorDisplay,c=null!=i&&i.length?i.join(s)+s:"",p=function e(t){return Object.keys(t||{}).reduce((function(r,n){var i=t[n];return"!struct"===i.type?r+e(i.subfields):r+(i.type===o?1:0)}),0)};return dv()(r).map((function(l){var s=[].concat(z(null!=i?i:[]),[l]),d=r[l],f=n.getFieldLabel(d,s,t),g=Tv(s,t).join(u);(g==f||null!=e&&e.length)&&(g=null);var v=d.label2,h=d.tooltip,y=d.disabled;if(!d.hideForSelect){if("!struct"==d.type){var m=n.buildOptions(e,t,d.subfields,o,s,{label:f,tooltip:h}),b=p(d.subfields)>0;return{disabled:y,key:l,path:c+l,label:f,fullLabel:g,altLabel:v,tooltip:h,items:m,matchesType:b}}var O=void 0!==o?d.type===o:void 0;return{disabled:y,key:l,path:c+l,label:f,fullLabel:g,altLabel:v,tooltip:h,grouplabel:null==a?void 0:a.label,group:a,matchesType:O}}})).filter((function(e){return!!e}))}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setFieldSrc,o=e.readonly,i=e.id,a=e.groupId,l=t.settings.renderField,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kv(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:i,groupId:a,config:t,customProps:r,readonly:o,setField:this.setField,setFieldSrc:n},this.meta);return l(s,t.ctx)}}])}(T.Component);function Vv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($v=function(){return!!e})()}Dv.propTypes={id:yg().string,groupId:yg().string,config:yg().object.isRequired,selectedField:yg().any,selectedFieldSrc:yg().string,selectedFieldType:yg().string,parentField:yg().string,customProps:yg().object,readonly:yg().bool,setField:yg().func.isRequired,setFieldSrc:yg().func};var Mv=vg.clone,zv=vg.ConfigUtils,qv=zv.getFieldConfig,Wv=zv.getFuncConfig,Bv=zv.getFieldParts,Uv=zv.getFieldPathParts,Gv=vg.RuleUtils,Kv=Gv.getFuncPathLabels,Hv=Gv.getWidgetForFieldOp,Xv=vg.OtherUtils.shallowEqual,Jv=function(e){function t(e){var r,n,o,i;return S(this,t),n=this,i=[e],o=I(o=t),r=C(n,$v()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i)),zg(r),r.onPropsChanged(e),r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){var t=this.props,r=!this.items||["config","field","fieldType","fieldSrc","operator","isFuncArg","isLHS","parentFuncs"].map((function(r){return"parentFuncs"===r?!Xv(e[r],t[r],!0):e[r]!==t[r]})).filter((function(e){return e})).length>0;(!this.meta||["config","field","fieldType","fieldSrc","value","isLHS"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e)),r&&(this.items=this.getItems(e,this.meta))}},{key:"getItems",value:function(e,t){var r=e.config,n=e.field,o=e.fieldType,i=e.isLHS,a=e.operator,l=e.parentFuncs,s=e.fieldDefinition,u=e.isFuncArg,c=t.lookingForFieldType,p=r.settings.canUseFuncForField,d=this.filterFuncs(r,r.funcs,n,o,i,a,p,l,u,s);return this.buildOptions(r,d,c)}},{key:"getMeta",value:function(e){var t=e.config,r=(e._field,e.fieldType),n=e.value,o=e.isLHS,i=e.isFuncArg,a=t.settings,l=a.funcPlaceholder,s=a.fieldSeparatorDisplay,u=n,c=!!n,p=c?null:l,d=c?Wv(t,u):null,f=d||{},g=Uv(u,t),v=Uv(u,t,!0),h=this.getFuncLabel(d,u,t),y=Kv(u,t),m=y?y.join(s):null;m==h&&(m=null);var b=o&&!i&&!c&&r;return{placeholder:p,selectedKey:u,selectedKeys:g,selectedPath:v,selectedLabel:h,selectedOpts:f,selectedFullLabel:m,errorText:b?"Please select function":null,lookingForFieldType:b}}},{key:"filterFuncs",value:function(e,t,r,n,o,i,a,l,s,u){t=Mv(t);var c,p=e.settings.fieldSeparator,d=qv(e,r),f=d,g=Hv(e,r,i,"value");return g&&e.widgets[g],s?(f=u,c=null==u?void 0:u.type):d?c=d.type:o||(c=n),function t(n,o){for(var s in n){var u=n[s].subfields,g=(o||[]).concat(s),v=g.join(p),h=Wv(e,v);if("!struct"==h.type)0==t(u,g)&&delete n[s];else{var y,m=!c||h.returnType==c;null!==(y=f)&&void 0!==y&&y.funcs&&(m=m&&f.funcs.includes(v)),a&&(m=m&&a(r,d,v,h,i)),!h.allowSelfNesting&&l&&l.map((function(e){var t=$(e,2),r=t[0];return t[1],r})).includes(v)&&(m=!1),m||delete n[s]}}return dv()(n).length}(t,[]),t}},{key:"buildOptions",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!t)return null;var a=e.settings,l=a.fieldSeparator,s=a.fieldSeparatorDisplay,u=null!=o&&o.length?o.join(l)+l:"",c=function e(t){return Object.keys(t||{}).reduce((function(r,o){var i=t[o];return"!struct"===i.type?r+e(i.subfields):r+(i.type===n?1:0)}),0)};return dv()(t).map((function(a){var l=[].concat(z(null!=o?o:[]),[a]),p=t[a],d=r.getFuncLabel(p,l,e),f=Kv(l,e).join(s);f==d&&(f=null);var g=p.tooltip;if("!struct"==p.type){var v=r.buildOptions(e,p.subfields,n,l,{label:d,tooltip:g}),h=c(p.subfields)>0;return{key:a,path:u+a,label:d,fullLabel:f,tooltip:g,items:v,matchesType:h}}var y=void 0!==n?p.returnType===n:void 0;return{key:a,path:u+a,label:d,fullLabel:f,tooltip:g,grouplabel:null==i?void 0:i.label,group:i,matchesType:y}}))}},{key:"getFuncLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.maxLabelsLength,o=Bv(t,r),i=(null==e?void 0:e.label)||Vo()(o);return Tg(i,n)}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setValue,o=e.readonly,i=e.id,a=e.groupId,l=t.settings.renderFunc,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vv(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({config:t,customProps:r,readonly:o,setField:n,items:this.items,id:i,groupId:a},this.meta);return l(s,t.ctx)}}])}(T.Component);Jv.propTypes={id:yg().string,groupId:yg().string,config:yg().object.isRequired,field:yg().any,fieldType:yg().string,fieldSrc:yg().string,operator:yg().string,customProps:yg().object,value:yg().string,setValue:yg().func.isRequired,readonly:yg().bool,parentFuncs:yg().array,fieldDefinition:yg().object,isFuncArg:yg().bool,isLHS:yg().bool};var Yv=r(2285),Qv=r.n(Yv),Zv=["widgetFactory"],eh=["factory"];function th(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?th(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):th(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nh=vg.ListUtils.getTitleInListValues,oh=vg.ConfigUtils._widgetDefKeysToOmit,ih=vg.TreeUtils,ah=ih._fixImmutableValue,lh=ih.isImmutable,sh=(0,T.memo)((function(e){var t=e.widgetFactory,r=kd(e,Zv),n=r.config,o=r.isFuncArg,i=r.fieldDefinition||{},a=i.fieldSettings,l=i.defaultValue,s=i.valueSources,u=o&&1==(null==s?void 0:s.length)&&"const"===(null==s?void 0:s[0]),c=(null==a?void 0:a.treeValues)||(null==a?void 0:a.listValues);return u&&l?"boolean"==typeof l?l?r.labelYes||"YES":r.labelNo||"NO":c?Array.isArray(l)?l.map((function(e){return nh(c,e)||e})).join(", "):nh(c,l)||l:""+l:t?t(r,n.ctx):"?"}));sh.displayName="WidgetFactoryMemo";var uh=function(e){var t=e.delta,r=e.isFuncArg,n=e.valueSrc,o=e.value,i=e.valueError,a=e.fieldError,l=e.asyncListValues,s=e.isSpecialRange,u=e.fieldDefinition,c=e.widget,p=e.widgetDefinition,d=e.widgetValueLabel,f=e.valueLabels,g=e.textSeparators,v=e.setValue,h=e.setFuncValue,y=e.config,m=e.field,b=e.fieldSrc,O=e.fieldPath,_=e.fieldType,w=e.isLHS,S=e.operator,E=e.readonly,F=e.parentField,j=e.parentFuncs,L=e.id,C=e.groupId,I=e.widgetId,k=p.factory,x=kd(p,eh),A=o?o.map((function(e){return ah(e)})):void 0,P=(0,T.useMemo)((function(){if(s){var e=[null==A?void 0:A.get(0),null==A?void 0:A.get(1)];return void 0===e[0]&&void 0===e[1]&&(e=void 0),e}return null==A?void 0:A.get(t)}),[s,o]),N=(0,T.useMemo)((function(){return i?s?[i.get(0),i.get(1),i.get(2)]:null==i?void 0:i.get(t):null}),[s,o]),D=w?a:N,V=(u||{}).fieldSettings,$=d.label,M=d.placeholder,q=f?f.placeholder:null,W=lh(m)?null:m,B=Mo()(rh(rh(rh({},x),V),{},{config:y,field:W,fieldPath:O,fieldSrc:b,fieldType:_,isLHS:w,parentField:F,parentFuncs:j,fieldDefinition:u,operator:S,delta:t,isSpecialRange:s,isFuncArg:r,value:P,valueSrc:n,valueError:N,fieldError:a,errorMessage:D,label:$,placeholder:M,placeholders:q,textSeparators:g,setValue:v,setFuncValue:h,readonly:E,asyncListValues:l,id:L,groupId:C,widgetId:I,widgetFactory:k,widget:c}),[].concat(z(oh),["toJS"]));return R().createElement(sh,Zg({widgetFactory:k},B))};uh.displayName="WidgetFactory";const ch=uh;function ph(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ph=function(){return!!e})()}var dh=vg.ConfigUtils,fh=dh.getFieldConfig,gh=dh.getOperatorConfig,vh=dh.getFieldWidgetConfig,hh=vg.RuleUtils,yh=hh.getValueSourcesForFieldOp,mh=hh.getWidgetForFieldOp,bh=hh.getValueLabel,Oh=vg.DefaultUtils.createListWithOneElement,_h=vg.OtherUtils.shallowEqual,wh=(vg.TreeUtils.isImmutable,{cardinality:1}),Sh=function(e){function t(e){var r,n,o,i;return S(this,t),n=this,i=[e],o=I(o=t),(r=C(n,ph()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i)))._setValue=function(e,t,n,o,i,a){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};if(l.widgetId||(l.widgetId=o),e&&Array.isArray(i)){var s=[r.props.value.get(0),r.props.value.get(1)];s[0]!=i[0]&&r.props.setValue(0,i[0],n,a,l),s[1]!=i[1]&&r.props.setValue(1,i[1],n,a,l)}else r.props.setValue(t,i,n,a,l)},r._setValueSrc=function(e,t,n){var o={widgetId:t};r.props.setValueSrc(e,n,o)},r.renderWidget=function(e,t,r){var n=r.config,o=r.isFuncArg,i=r.leftField,a=r.operator,l=r.value,s=r.valueError,u=r.fieldError,c=r.readonly,p=r.parentField,d=r.parentFuncs,f=r.id,g=r.groupId,v=r.fieldSrc,h=r.fieldType,y=r.isLHS,m=r.setFuncValue,b=n.settings,O=t.widgets,_=t.iValues,w=t.aField,S=t.valueSources,E=o?_:l,F=o?i:w,j=O[e],L=j.valueSrc,C=j.valueLabel,I=j.widgetId,k=S.length>1&&!c,x=b.showLabels?R().createElement("label",{key:"label-"+I,className:"rule--label"},C.label):null;return R().createElement("div",{key:"wrapper-"+I,className:tv()("func"===L?"widget--func":"widget--widget",k?"widget--has-valuesrcs":"widget--has-no-valuesrcs")},"func"===L?null:x,R().createElement(ch,Zg({key:I,id:f,groupId:g,widgetId:I,valueSrc:L,delta:e,value:E,valueError:s,fieldError:u,isFuncArg:o,isLHS:y},No()(t,["isSpecialRange","fieldDefinition","asyncListValues"]),No()(O[e],["widget","widgetDefinition","widgetValueLabel","valueLabels","textSeparators","setValue"]),{setFuncValue:m,config:n,field:F,fieldSrc:v,fieldType:h,parentField:p,parentFuncs:d,operator:a,readonly:c})))},r.renderValueSources=function(e,t,n){var o=n.config,i=n.isFuncArg,a=n.leftField,l=n.operator,s=n.readonly,u=o.settings,c=t.valueSources,p=t.widgets,d=t.aField,f=t.valueSourcesOptions,g=i?a:d,v=p[e],h=v.valueSrc,y=v.setValueSrc,m=r.ValueSources,b=u.showLabels?R().createElement("label",{className:"rule--label"},""):null;return c.length>1&&!s&&R().createElement("div",{key:"wrapper-valuesrc-"+e,className:"widget--valuesrc"},b,R().createElement(m,{key:"valuesrc-"+e,delta:e,valueSources:f,valueSrc:h,config:o,field:g,operator:l,setValueSrc:y,readonly:s,title:u.valueSourcesPopupTitle}))},r.renderSep=function(e,t,r){var n=r.config,o=t.widgets,i=n.settings,a=o[e].sepText,l=i.showLabels?R().createElement("label",{className:"rule--label"},""):null;return a&&R().createElement("div",{key:"widget-separators-"+e,className:tv()("widget--sep",0==e&&"widget--sep-first")},l,R().createElement("span",null,a))},r.renderWidgetDelta=function(e){return[r.renderSep(e,r.meta,r.props),r.renderValueSources(e,r.meta,r.props),r.renderWidget(e,r.meta,r.props)]},zg(r),r.onPropsChanged(e),r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){var t=this.props,r=!this.ValueSources||(null==t?void 0:t.config)!==(null==e?void 0:e.config),n=["config","id","parentFuncs","field","fieldId","fieldSrc","fieldType","fieldFunc","fieldArg","leftField","operator","valueSrc","asyncListValues","isLHS","isFuncArg","isForRuleGroup","isCaseValue","value"].filter((function(r){return"parentFuncs"===r?!_h(e[r],t[r],!0):"field"===r?e.fieldId!==t.fieldId:e[r]!==t[r]}));if((!this.meta||n.length>0)&&(this.meta=this.getMeta(e,n)),r){var o=e.config,i=o.settings.renderValueSources;this.ValueSources=Lv(o,i)}}},{key:"getMeta",value:function(e){var t,r,n,o,i=this,a=e.config,l=e.field,s=(e.fieldSrc,e.fieldType),u=e.fieldFunc,c=e.fieldArg,p=e.operator,d=e.valueSrc,f=e.value,g=e.isForRuleGroup,v=e.isCaseValue,h=e.isFuncArg,y=(e.leftField,e.asyncListValues),m=e.parentFuncs,b=e.isLHS,O=e.id,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],w=a.settings.valueSourcesInfo,S=h?{func:u,arg:c}:l,E=!l&&s,F=d,j=f;(h||g||v)&&(F=Oh(d),j=Oh(f));var L=fh(a,S);!L&&E&&(L=a.types[s]);var C,I=mh(a,S,p);!I&&E&&(I=null===(C=a.types[s])||void 0===C?void 0:C.mainWidget);var k=h?wh:gh(a,p,S);if((null==L||null==k)&&!v)return null;var x,T,R=null==k?void 0:k.isSpecialRange,A=R&&("field"===(null===(t=F)||void 0===t?void 0:t.get(0))||"field"===(null===(r=F)||void 0===r?void 0:r.get(1))),P=R&&!A,N=P?1:null!==(T=null==(x=k)?void 0:x.cardinality)&&void 0!==T?T:1;if(0===N)return null;var D=null===(n=this.meta)||void 0===n?void 0:n.valueSources,V=null===(o=this.meta)||void 0===o?void 0:o.valueSourcesOptions;D&&!["field","operator","config","fieldDefinition","isForRuleGroup"].filter((function(e){return _.includes(e)})).length||(D=yh(a,S,p,L),g&&(D=["value"]),S||(D=Object.keys(w)),V=D.map((function(e){return[e,{label:w[e].label}]})));var $=Qv()(0,N).map((function(e){var t,r,n,o,l=null===(t=i.meta)||void 0===t||null===(t=t.widgets)||void 0===t?void 0:t[e],s=(null===(r=F)||void 0===r?void 0:r.get(e))||null,u=mh(a,S,p,s),c=vh(a,S,p,u,s);A&&(u=c.singleWidget,c=vh(a,S,p,u,s)),!c&&E&&(u=["func","field"].includes(s)?s:I,c=a.widgets[u]);var d=null===(n=c)||void 0===n?void 0:n.type,f=bh(a,S,p,e,s,P),g=bh(a,S,p,e,null,P),v=null!=k&&k.textSeparators?null==k?void 0:k.textSeparators[e]:null,h=null,y=null;R&&(h={placeholder:[(h=[bh(a,S,p,0),bh(a,S,p,1)])[0].placeholder,h[1].placeholder],label:[h[0].label,h[1].label]},y=null==k?void 0:k.textSeparators);var _=jv({id:O,isLHS:b,delta:e,parentFuncs:m}),w=_+":VS",j=null==l?void 0:l.setValueSrc;j&&(null==l?void 0:l.widgetId)===_||(j=i._setValueSrc.bind(i,e,w));var L=null==l?void 0:l.setValue;return L&&(null==l?void 0:l.widgetId)===_&&(null==l?void 0:l.widgetType)===d&&(null===(o=i.meta)||void 0===o?void 0:o.isSpecialRange)===R||(L=i._setValue.bind(i,R,e,d,_)),{valueSrc:s,valueLabel:f,widget:u,sepText:v,widgetDefinition:c,widgetValueLabel:g,valueLabels:h,textSeparators:y,setValueSrc:j,setValue:L,widgetId:_,widgetType:d}}));return{defaultWidget:I,fieldDefinition:L,operatorDefinition:k,isSpecialRange:P,cardinality:N,valueSources:D,valueSourcesOptions:V,widgets:$,iValues:j,aField:S,asyncListValues:y}}},{key:"render",value:function(){if(!this.meta)return null;var e=this.meta,t=e.defaultWidget,r=e.cardinality;if(!t)return null;var n=t;return R().createElement(wv,{className:"rule--widget rule--widget--".concat(n.toUpperCase()),key:"widget-col-"+n},Qv()(0,r).map(this.renderWidgetDelta))}}])}(T.Component);function Eh(e,t,r){return t=I(t),C(e,Fh()?Reflect.construct(t,r||[],I(e).constructor):t.apply(e,r))}function Fh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fh=function(){return!!e})()}Sh.propTypes={config:yg().object.isRequired,value:yg().any,valueSrc:yg().any,valueError:yg().any,fieldError:yg().string,field:yg().any,fieldSrc:yg().string,fieldType:yg().string,fieldId:yg().string,operator:yg().string,readonly:yg().bool,asyncListValues:yg().array,id:yg().string,groupId:yg().string,setValue:yg().func,setValueSrc:yg().func,setFuncValue:yg().func,isFuncArg:yg().bool,fieldFunc:yg().string,fieldArg:yg().string,leftField:yg().any,isForRuleGroup:yg().bool,parentField:yg().string,parentFuncs:yg().array,isLHS:yg().bool,isCaseValue:yg().bool};var jh=vg.ConfigUtils.getFuncConfig,Lh=vg.OtherUtils.shallowEqual,Ch=function(e){function t(e){var r;return S(this,t),(r=Eh(this,t,[e])).setFunc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.props,o=n.isLHS,i=n.delta,a=n.parentFuncs,l=n.id;if(!t.widgetId){var s=jv({id:l,isLHS:o,delta:i,parentFuncs:a});t.widgetId=s}r.props.setFuncValue(o?-1:i||0,a,null,e,"!func",void 0,t)},r.setArgValue=function(e,t,n,o,i){var a=r.props,l=(a.config,a.delta),s=a.isLHS,u=a.parentFuncs;r.props.setFuncValue(s?-1:l||0,u,e,t,n,o,i)},r.setArgValueSrc=function(e,t,n){var o=r.props,i=(o.config,o.delta),a=o.isLHS,l=o.parentFuncs;r.props.setFuncValue(a?-1:i||0,l,e,t,"!valueSrc",void 0,n)},r.renderFuncSelect=function(){var e,t,n=r.props,o=n.config,i=n.field,a=n.fieldType,l=n.fieldSrc,s=n.isLHS,u=n.operator,c=n.customProps,p=n.value,d=n.readonly,f=n.parentFuncs,g=n.id,v=n.groupId,h=n.isFuncArg,y=n.fieldDefinition,m={value:null!==(e=null==p||null===(t=p.get)||void 0===t?void 0:t.call(p,"func"))&&void 0!==e?e:null,setValue:r.setFunc,config:o,field:i,fieldType:a,fieldSrc:l,isLHS:s,operator:u,customProps:c,readonly:d,parentFuncs:f,isFuncArg:h,fieldDefinition:y,id:g,groupId:v},b=o.settings,O=b.showLabels,_=b.funcLabel,w=O?R().createElement("label",{className:"rule--label"},_):null;return R().createElement(wv,{key:"func",className:"rule--func"},w,R().createElement(Jv,m))},r.renderArgLabel=function(e,t){var n=t.valueSources,o=t.type,i=t.showPrefix,a=t.label,l=r.props.config,s=n&&1==n.length&&"const"==n[0];return l.settings.showLabels||"boolean"!=o&&!s||!i?null:R().createElement(wv,{className:"rule--func--arg-label"},a||e)},r.renderArgLabelSep=function(e,t){var n=t.valueSources,o=t.type,i=t.showPrefix,a=r.props.config,l=n&&1==n.length&&"const"==n[0];return a.settings.showLabels||"boolean"!=o&&!l||!i?null:R().createElement(wv,{className:"rule--func--arg-label-sep"},":")},r.renderArgVal=function(e,t,n){var o=r.props,i=o.config,a=o.field,l=o.fieldType,s=o.fieldSrc,u=o.isLHS,c=(o.operator,o.value),p=o.readonly,d=o.parentFuncs,f=o.id,g=o.groupId,v=o.fieldError,h=o.valueError,y=o.setFuncValue,m=c?c.getIn(["args",t]):null,b=m?m.get("value"):void 0,O=1==n.valueSources.length?n.valueSources[0]:void 0,_={config:i,fieldFunc:e,fieldArg:t,leftField:a,fieldType:l,fieldSrc:s,fieldError:v,valueError:h,isLHS:u,operator:null,value:b,valueSrc:m?m.get("valueSrc")||O||"value":O,setValue:r.setArgValue,setValueSrc:r.setArgValueSrc,setFuncValue:y,funcKey:e,argKey:t,argDefinition:n,readonly:p,parentFuncs:d,id:f,groupId:g};return R().createElement(wv,{className:"rule--func--arg-value"},R().createElement(Ih,_))},r.renderArgSep=function(e,t,r,n){var o=n.renderSeps;return r?R().createElement(wv,{className:"rule--func--arg-sep"},o?o[r-1]:", "):null},r.renderBracketBefore=function(e){var t=e.renderBrackets;return R().createElement(wv,{key:"before_args",className:"rule--func--bracket-before"},t?t[0]:"(")},r.renderBracketAfter=function(e){var t=e.renderBrackets;return R().createElement(wv,{key:"after_args",className:"rule--func--bracket-after"},t?t[1]:")")},r.renderFuncArgs=function(){var e=r.meta,t=e.funcDefinition,n=e.funcKey;if(!n)return null;var o=(t||{}).args;return o?R().createElement(R().Fragment,null,r.renderBracketBefore(t),R().createElement(wv,{key:"args-".concat(n),className:"rule--func--args rule--func--".concat(n,"--args")},Object.keys(o).map((function(e,i){return R().createElement(wv,{key:"arg-".concat(e,"-").concat(i),className:"rule--func--arg rule--func--".concat(n,"--arg--").concat(e)},r.renderArgSep(e,o[e],i,t),r.renderArgLabel(e,o[e]),r.renderArgLabelSep(e,o[e]),r.renderArgVal(n,e,o[e]))}))),r.renderBracketAfter(t)):null},zg(r),r.onPropsChanged(e),r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","field","operator","value","fieldSrc","fieldType","isLHS"].map((function(r){return"parentFuncs"===r?!Lh(e[r],t[r],!0):e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t,r,n=e.config,o=(e.field,e.operator,e.value),i=null!==(t=null==o||null===(r=o.get)||void 0===r?void 0:r.call(o,"func"))&&void 0!==t?t:null;return{funcDefinition:i?jh(n,i):null,funcKey:i}}},{key:"render",value:function(){var e=this.props.parentFuncs,t=e?e.map((function(e){var t=$(e,2),r=t[0],n=t[1];return"".concat(r,"_").concat(n)})).join("-"):"root",r=(null==e?void 0:e.length)||0;return R().createElement(wv,{className:"rule--func--wrapper rule--func--wrapper--under-".concat(t," rule--func--wrapper--lev-").concat(r)},this.renderFuncSelect(),this.renderFuncArgs())}}])}(T.Component);Ch.propTypes={id:yg().string,groupId:yg().string,config:yg().object.isRequired,field:yg().any,fieldSrc:yg().string,fieldType:yg().string,fieldError:yg().string,operator:yg().string,customProps:yg().object,value:yg().object,setValue:yg().func.isRequired,setFuncValue:yg().func,readonly:yg().bool,parentFuncs:yg().array,fieldDefinition:yg().object,isFuncArg:yg().bool,isLHS:yg().bool,valueError:yg().string};var Ih=function(e){function t(e){var r;return S(this,t),(r=Eh(this,t,[e])).setValue=function(e,t,n,o,i){var a=r.props;(0,a.setValue)(a.argKey,t,n,o,i)},r.setValueSrc=function(e,t,n){var o=r.props;(0,o.setValueSrc)(o.argKey,t,n)},zg(r),r.onPropsChanged(e),r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["parentFuncs","funcKey","argKey"].map((function(r){return"parentFuncs"===r?!Lh(e[r],t[r],!0):e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.parentFuncs,r=e.funcKey,n=e.argKey;return{parentFuncs:[].concat(z(t||[]),[[r,n]])}}},{key:"render",value:function(){var e=this.meta.parentFuncs;return R().createElement(Sh,Zg({},this.props,{setValue:this.setValue,setValueSrc:this.setValueSrc,isFuncArg:!0,parentFuncs:e}))}}])}(T.Component);function kh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kh=function(){return!!e})()}Ih.propTypes={funcKey:yg().string.isRequired,argKey:yg().string.isRequired,setValue:yg().func.isRequired,setValueSrc:yg().func.isRequired,readonly:yg().bool,isLHS:yg().bool,parentFuncs:yg().array,id:yg().string,groupId:yg().string};var xh=function(e){function t(e){var r,n,o,i;return S(this,t),n=this,i=[e],o=I(o=t),(r=C(n,kh()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i))).renderField=function(){var e=r.props,t=e.config,n=e.classname,o=e.selectedField,i=e.selectedFieldSrc,a=e.selectedFieldType,l=e.setField,s=e.setFuncValue,u=e.parentField,c=e.readonly,p=e.id,d=e.groupId,f=e.fieldError,g=e.valueError;if(!["func","field"].includes(i))return"?";var v="func"===i?R().createElement(Ch,{isLHS:!0,config:t,value:o,fieldSrc:i,fieldType:a,fieldError:f,valueError:g,parentField:u,setValue:l,setFuncValue:s,readonly:c,id:p,groupId:d,key:"field-func-"+p}):R().createElement(Dv,{config:t,selectedField:o,selectedFieldSrc:i,selectedFieldType:a,parentField:u,setField:l,customProps:t.settings.customFieldSelectProps,readonly:c,id:p,groupId:d,key:"field-"+p}),h="func"===i?t.settings.funcLabel:t.settings.fieldLabel,y=t.settings.showLabels&&"func"!==i&&R().createElement("label",{className:"rule--label"},h);return R().createElement("div",{key:i,className:n},y,v)},r.renderFieldSources=function(){if(!r.meta)return null;var e=r.props,t=e.config,n=e.readonly,o=e.selectedFieldSrc,i=e.setFieldSrc,a=e.id,l=r.meta.fieldSourcesOptions,s=t.settings,u=r.ValueSources,c=s.showLabels?R().createElement("label",{className:"rule--label"},""):null;return l.length>1&&!n&&R().createElement("div",{key:"fieldsrc",className:"rule--fieldsrc"},c,R().createElement(u,{key:"fieldsrc-"+a,valueSources:l,valueSrc:o,config:t,setValueSrc:i,readonly:n,title:s.fieldSourcesPopupTitle}))},zg(r),r.onPropsChanged(e),r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){var t=this.props,r=!this.ValueSources||(null==t?void 0:t.config)!==(null==e?void 0:e.config);if((!this.meta||["config"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e)),r){var n=e.config,o=n.settings.renderValueSources;this.ValueSources=function(e){return o(e,n.ctx)}}}},{key:"getMeta",value:function(e){var t=e.config.settings,r=t.valueSourcesInfo;return{fieldSourcesOptions:t.fieldSources.map((function(e){return[e,{label:r[e].label}]}))}}},{key:"render",value:function(){var e=this.props,t=(e.classname,e.canSelectFieldSource),r=t&&this.renderFieldSources(),n=this.renderField();return t?R().createElement(wv,{className:"rule--field-wrapper"},r,n):n}}])}(T.Component),Th=["factory"];function Rh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rh=function(){return!!e})()}var Ah=vg.ConfigUtils.getOperatorConfig,Ph=function(e){function t(){return S(this,t),e=this,n=arguments,r=I(r=t),C(e,Rh()?Reflect.construct(r,n||[],I(e).constructor):r.apply(e,n));var e,r,n}return x(t,e),L(t,[{key:"render",value:function(){if(!this.props.selectedOperator)return null;var e=Ah(this.props.config,this.props.selectedOperator,this.props.selectedField);if(void 0===e.options)return null;var t=e.options,r=t.factory,n=kd(t,Th),o=r(Object.assign({},n,{config:this.props.config,field:this.props.selectedField,fieldSrc:this.props.selectedFieldSrc,operator:this.props.selectedOperator,options:this.props.operatorOptions,setOption:this.props.setOperatorOption,readonly:this.props.readonly}),this.props.config.ctx),i=this.props.selectedOperator;return R().createElement("div",{className:"rule--operator rule--operator--".concat(i.toUpperCase())},o)}}])}(T.PureComponent);function Nh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nh(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vh=function(){return!!e})()}Ph.propTypes={config:yg().object.isRequired,operatorOptions:yg().any.isRequired,selectedField:yg().any,selectedFieldSrc:yg().string,selectedOperator:yg().string.isRequired,readonly:yg().bool,setOperatorOption:yg().func.isRequired};var $h=vg.ConfigUtils,Mh=$h.getFieldConfig,zh=$h.getOperatorConfig,qh=$h.getFieldWidgetConfig,Wh=$h.getFieldId,Bh=vg.RuleUtils.isEmptyRuleProperties,Uh=function(e){function t(e){var r,n,o,i;return S(this,t),n=this,i=[e],o=I(o=t),r=C(n,Vh()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i)),zg(r),r.removeSelf=r.removeSelf.bind(r),r.setLock=r.setLock.bind(r),r.onPropsChanged(e),r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){var t=this,r=this.props,n=!this.Icon||(null==r?void 0:r.config)!==(null==e?void 0:e.config);if((!this.meta||["selectedField","selectedFieldSrc","selectedFieldType","selectedOperator","config","reordableNodesCnt","isLocked","parentField","parentFieldCanReorder"].map((function(t){return e[t]!==r[t]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e)),n){var o=e.config,i=o.settings,a=i.renderIcon,l=i.renderButton,s=i.renderButtonGroup,u=i.renderSwitch,c=i.renderBeforeWidget,p=i.renderAfterWidget,d=i.renderRuleError;this.Icon=Lv(o,a),this.Btn=Lv(o,l),this.BtnGrp=Lv(o,s),this.Switch=Lv(o,u),this.BeforeWidget=Lv(o,c),this.AfterWidget=Lv(o,p),this.RuleError=Lv(o,d)}this.doRemove=function(){t.props.removeSelf()}}},{key:"getMeta",value:function(e){var t=e.selectedField,r=e.selectedFieldType,n=e.selectedOperator,o=e.config,i=e.reordableNodesCnt,a=e.isLocked,l=e.parentField,s=e.parentFieldCanReorder,u=o.settings.keepInputOnChangeFieldSrc,c=Wh(t,o),p=Mh(o,t),d=p&&"!struct"===p.type,f=!!t||u&&r,g=f&&n,v=zh(o,n,t),h=v&&null!=v.options,y=qh(o,t,n,null,null)||{},m=y.hideOperator,b=o.settings.canReorder&&i>1&&!a;return l&&(b=b&&s),{selectedFieldId:c,selectedFieldWidgetConfig:y,showDragIcon:b,showOperator:f&&!m,showOperatorLabel:f&&m&&y.operatorInlineLabel,showWidget:g&&!d,showOperatorOptions:g&&h}}},{key:"setLock",value:function(e){this.props.setLock(e)}},{key:"removeSelf",value:function(){var e=this.props,t=e.confirmFn,r=e.config,n=r.settings,o=n.renderConfirm,i=n.removeRuleConfirmOptions;i&&!this.isEmptyCurrentRule()?o.call(r.ctx,Dh(Dh({},i),{},{onOk:this.doRemove,onCancel:null,confirmFn:t}),r.ctx):this.doRemove()}},{key:"_buildWidgetProps",value:function(e,t){var r=e.selectedField,n=e.selectedFieldSrc,o=e.selectedFieldType,i=e.selectedOperator,a=e.operatorOptions,l=e.value,s=e.valueType,u=e.valueSrc,c=e.asyncListValues,p=e.valueError,d=e.fieldError,f=e.parentField;return{field:r,fieldSrc:n,fieldType:o,fieldId:t.selectedFieldId,operator:i,operatorOptions:a,value:l,valueType:s,valueSrc:u,asyncListValues:c,valueError:p,fieldError:d,parentField:f}}},{key:"isEmptyCurrentRule",value:function(){var e=this.props.config,t=this._buildWidgetProps(this.props,this.meta);return Bh(t,e)}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=e.parentField,o=e.groupId,i=e.id,a=e.selectedFieldSrc,l=e.selectedField,s=e.selectedFieldType,u=e.setField,c=e.setFuncValue,p=e.setFieldSrc,d=e.fieldError,f=t.settings.immutableFieldsMode,g=this.meta.selectedFieldId;return R().createElement(xh,{key:"field",classname:tv()("func"==a?"rule--field--func":"rule--field"),config:t,canSelectFieldSource:!n,selectedField:l,selectedFieldSrc:a,selectedFieldType:s,selectedFieldId:g,fieldError:d,setField:f?Sv:u,setFuncValue:f?Sv:c,setFieldSrc:f?Sv:p,parentField:n,readonly:f||r,id:i,groupId:o})}},{key:"renderOperator",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=this.meta,o=n.selectedFieldId,i=n.selectedFieldWidgetConfig,a=n.showOperator,l=n.showOperatorLabel,s=t.settings.immutableOpsMode;return R().createElement(Iv,{key:"operator",config:t,selectedField:this.props.selectedField,selectedFieldSrc:this.props.selectedFieldSrc,selectedFieldType:this.props.selectedFieldType,selectedFieldId:o,selectedOperator:this.props.selectedOperator,setOperator:s?Sv:this.props.setOperator,showOperator:a,showOperatorLabel:l,selectedFieldWidgetConfig:i,readonly:s||r,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=this.meta.showWidget,o=t.settings.immutableValuesMode;if(!n)return null;var i=R().createElement(Sh,Zg({key:"values"},this._buildWidgetProps(this.props,this.meta),{config:t,setValue:o?Sv:this.props.setValue,setValueSrc:o?Sv:this.props.setValueSrc,setFuncValue:o?Sv:this.props.setFuncValue,readonly:o||r,id:this.props.id,groupId:this.props.groupId}));return R().createElement(wv,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},i)}},{key:"renderOperatorOptions",value:function(){var e=this.props.config,t=this.meta.showOperatorOptions,r=e.settings,n=r.immutableOpsMode,o=r.immutableValuesMode;if(!t)return null;var i=R().createElement(Ph,{key:"operatorOptions",selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,operatorOptions:this.props.operatorOptions,setOperatorOption:n?Sv:this.props.setOperatorOption,config:e,readonly:o});return R().createElement(wv,{key:"op-options-for-"+this.props.selectedOperator,className:"rule--operator-options"},i)}},{key:"renderBeforeWidget",value:function(){var e=this.BeforeWidget;return e?R().createElement(wv,{key:"before-widget-for-"+this.props.selectedOperator,className:"rule--before-widget"},R().createElement(e,this.props)):null}},{key:"renderAfterWidget",value:function(){var e=this.AfterWidget;return e?R().createElement(wv,{key:"after-widget-for-"+this.props.selectedOperator,className:"rule--after-widget"},R().createElement(e,this.props)):null}},{key:"renderError",value:function(){var e=this.props,t=e.config,r=e.valueError,n=e.fieldError,o=t.settings.showErrorMessage,i=this.RuleError,a=[n].concat(z((null==r?void 0:r.toArray())||[])).filter((function(e){return!!e})).shift()||null;return o&&a&&R().createElement("div",{className:"rule--error"},i?R().createElement(i,{error:a}):a)}},{key:"renderDrag",value:function(){var e=this.props.handleDraggerMouseDown,t=this.meta.showDragIcon,r=this.Icon,n=R().createElement(r,{type:"drag"});return t&&R().createElement("div",{key:"rule-drag-icon",onMouseDown:e,className:"qb-drag-handler rule--drag-handler"},n)}},{key:"renderDel",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=t.settings,o=n.deleteLabel,i=n.immutableGroupsMode,a=n.canDeleteLocked,l=this.Icon,s=this.Btn;return!i&&(!r||r&&a)&&R().createElement(s,{key:"rule-del",type:"delRule",onClick:this.removeSelf,label:o,config:t,renderIcon:l})}},{key:"renderLock",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=e.isTrueLocked,o=e.id,i=t.settings,a=i.lockLabel,l=i.lockedLabel,s=i.showLock,u=this.Switch;return s&&!(r&&!n)&&R().createElement(u,{key:"rule-lock",type:"lock",id:o,value:r,setValue:this.setLock,label:a,checkedLabel:l,hideLabel:!0,config:t})}},{key:"render",value:function(){var e=this.meta,t=e.showOperatorOptions,r=e.selectedFieldWidgetConfig,n=this.props,o=n.valueSrc,i=n.value,a=n.config,l="value"==(null==o?void 0:o.first())&&!t&&1==i.size&&r.fullWidth,s=this.BtnGrp,u=[this.renderField(),this.renderOperator(),this.renderBeforeWidget(),this.renderWidget(),this.renderAfterWidget(),this.renderOperatorOptions()],c=R().createElement("div",{key:"rule-body",className:tv()("rule--body",l&&"can--shrink--value")},u),p=this.renderError(),d=this.renderDrag(),f=this.renderLock(),g=this.renderDel();return R().createElement(R().Fragment,null,d,R().createElement("div",{key:"rule-body-wrapper",className:"rule--body--wrapper"},c,p),R().createElement("div",{key:"rule-header-wrapper",className:"rule--header"},R().createElement(s,{key:"rule-header-group",config:a},f,g)))}}])}(T.Component);Uh.propTypes={id:yg().string.isRequired,groupId:yg().string,selectedField:yg().any,selectedFieldSrc:yg().string,selectedFieldType:yg().string,selectedOperator:yg().string,operatorOptions:yg().object,config:yg().object.isRequired,value:yg().any,valueSrc:yg().any,valueType:yg().any,asyncListValues:yg().array,isDraggingMe:yg().bool,isDraggingTempo:yg().bool,parentField:yg().string,valueError:yg().any,fieldError:yg().string,isLocked:yg().bool,isTrueLocked:yg().bool,handleDraggerMouseDown:yg().func,setField:yg().func,setFieldSrc:yg().func,setOperator:yg().func,setOperatorOption:yg().func,setLock:yg().func,removeSelf:yg().func,setValue:yg().func,setValueSrc:yg().func,setFuncValue:yg().func,reordableNodesCnt:yg().number,totalRulesCnt:yg().number,parentReordableNodesCnt:yg().number,parentFieldCanReorder:yg().bool};const Gh=function(e){var t=(0,_g.connect)((function(e){return{dragging:e.dragging}}),null,null,{context:bg})(function(e){var t;return t=function(t){function r(e){var t,n,o,i;return S(this,r),n=this,i=[e],o=I(o=r),(t=C(n,rv()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i))).dummyFn=function(){},t.removeSelf=function(){t.props.actions.removeRule(t.props.path)},t.setLock=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setLock(t.props.path,e)},t.setField=function(e,r,n){t.props.actions.setField(t.props.path,e,r,n)},t.setFieldSrc=function(e){t.props.actions.setFieldSrc(t.props.path,e)},t.setOperator=function(e){t.props.actions.setOperator(t.props.path,e)},t.setOperatorOption=function(e,r){t.props.actions.setOperatorOption(t.props.path,e,r)},t.setValue=function(e,r,n,o,i){t.props.actions.setValue(t.props.path,e,r,n,o,i)},t.setValueSrc=function(e,r,n){t.props.actions.setValueSrc(t.props.path,e,r,n)},t.setFuncValue=function(e,r,n,o,i,a,l){t.props.actions.setFuncValue(t.props.path,e,r,n,o,i,a,l)},t.pureShouldComponentUpdate=Mg(t),t.dummyFn.isDummyFn=!0,t}return x(r,t),L(r,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=this.pureShouldComponentUpdate(e,t);if(o&&n==t&&r!=e){var i=(e.dragging.id||r.dragging.id)==e.id,a=[];for(var l in e){var s=e[l]!=r[l];"dragging"!=l||i||(s=!1),s&&a.push(l)}a.length||(o=!1)}return o}},{key:"render",value:function(){var t=this.props.dragging.id==this.props.id,r=nv(this.props.config,this.props.field),n=this.props.fieldType||(null==r?void 0:r.type)||null,o=this.props.config.settings.showErrorMessage,i=(r&&r.type,!t&&this.props.isDraggingTempo),a=this.props,l=a.valueError,s=null!=([a.fieldError].concat(z((null==l?void 0:l.toArray())||[])).filter((function(e){return!!e})).shift()||null)&&o;return R().createElement("div",{className:tv()("group-or-rule-container","rule-container",s?"rule-with-error":null),"data-id":this.props.id},[t?R().createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,lev:this.props.path.size-1,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,setField:this.dummyFn,setFieldSrc:this.dummyFn,setFuncValue:this.dummyFn,setOperator:this.dummyFn,setOperatorOption:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:n,parentField:this.props.parentField||null,parentFieldPathSize:this.props.parentFieldPathSize,parentFieldCanReorder:this.props.parentFieldCanReorder,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueType:this.props.valueType||null,valueError:this.props.valueError||null,fieldError:this.props.fieldError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,R().createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,lev:this.props.path.size-1,isDraggingMe:t,isDraggingTempo:i,onDragStart:this.props.onDragStart,setLock:i?this.dummyFn:this.setLock,removeSelf:i?this.dummyFn:this.removeSelf,setField:i?this.dummyFn:this.setField,setFieldSrc:i?this.dummyFn:this.setFieldSrc,setFuncValue:i?this.dummyFn:this.setFuncValue,setOperator:i?this.dummyFn:this.setOperator,setOperatorOption:i?this.dummyFn:this.setOperatorOption,setValue:i?this.dummyFn:this.setValue,setValueSrc:i?this.dummyFn:this.setValueSrc,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:n,parentField:this.props.parentField||null,parentFieldPathSize:this.props.parentFieldPathSize,parentFieldCanReorder:this.props.parentFieldCanReorder,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueType:this.props.valueType||null,valueError:this.props.valueError||null,fieldError:this.props.fieldError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}])}(T.Component),t.propTypes={id:yg().string.isRequired,groupId:yg().string,config:yg().object.isRequired,path:yg().any.isRequired,operator:yg().string,field:yg().any,fieldSrc:yg().string,fieldType:yg().string,actions:yg().object.isRequired,onDragStart:yg().func,value:yg().any,valueSrc:yg().any,asyncListValues:yg().array,valueError:yg().any,fieldError:yg().string,operatorOptions:yg().object,reordableNodesCnt:yg().number,parentField:yg().string,isLocked:yg().bool,isTrueLocked:yg().bool,dragging:yg().object,isDraggingTempo:yg().bool},t}(e));return t.displayName="ConnectedRuleContainer",t}(cv("rule")(Fv(Uh)));var Kh=r(3547),Hh=r.n(Kh);function Xh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xh=function(){return!!e})()}var Jh=vg.DefaultUtils.defaultGroupConjunction,Yh=vg.ConfigUtils.getFieldConfig;const Qh=function(e,t){var r=(0,_g.connect)((function(e){return{dragging:e.dragging}}),null,null,{context:bg})(function(e,t){var r;return r=function(r){function n(e){var r,o,i,a;return S(this,n),o=this,a=[e],i=I(i=n),(r=C(o,Xh()?Reflect.construct(i,a||[],I(o).constructor):i.apply(o,a)))._selectedConjunction=function(e){return(e=e||r.props).conjunction||Jh(e.config,e.field)},r.setConjunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.props.actions.setConjunction(r.props.path,e)},r.setNot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.props.actions.setNot(r.props.path,e)},r.setLock=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.props.actions.setLock(r.props.path,e)},r.dummyFn=function(){},r.removeSelf=function(){r.props.actions.removeGroup(r.props.path)},r.addGroup=function(){var e="rule_group"==t?r.props.field:r.props.parentField;r.props.actions.addGroup(r.props.path,void 0,void 0,e)},r.addCaseGroup=function(){r.props.actions.addCaseGroup(r.props.path)},r.addDefaultCaseGroup=function(){r.props.actions.addDefaultCaseGroup(r.props.path)},r.addRule=function(){var e="rule_group"==t?r.props.field:r.props.parentField;r.props.actions.addRule(r.props.path,void 0,void 0,void 0,e)},r.setField=function(e,t,n){r.props.actions.setField(r.props.path,e,t,n)},r.setOperator=function(e){r.props.actions.setOperator(r.props.path,e)},r.setValue=function(e,t,n,o,i){r.props.actions.setValue(r.props.path,e,t,n,o,i)},r.setValueSrc=function(e,t,n){r.props.actions.setValueSrc(r.props.path,e,t,n)},r.setFuncValue=function(e,t,n,o,i,a,l){r.props.actions.setFuncValue(r.props.path,e,t,n,o,i,a,l)},r.pureShouldComponentUpdate=Mg(r),zg(r),r.selectedConjunction=r._selectedConjunction(e),r.conjunctionOptions=r._getConjunctionOptions(e),r.dummyFn.isDummyFn=!0,r}return x(n,r),L(n,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=this.pureShouldComponentUpdate(e,t);if(o&&n==t&&r!=e){var i=(e.dragging.id||r.dragging.id)==e.id,a=[];for(var l in e){var s=e[l]!=r[l];"dragging"!=l||i||(s=!1),s&&a.push(l)}a.length||(o=!1)}return o}},{key:"onPropsChanged",value:function(e){var t=e.config,r=(e.id,e.conjunction),n=this.props.config,o=this.props.conjunction;n==t&&o==r||(this.selectedConjunction=this._selectedConjunction(e),this.conjunctionOptions=this._getConjunctionOptions(e))}},{key:"_getConjunctionOptions",value:function(e){var t=this;return Nf()(e.config.conjunctions,(function(r,n){return{id:"conjunction-".concat(e.id,"-").concat(n),name:"conjunction[".concat(e.id,"]"),key:n,label:r.label,checked:n===t._selectedConjunction(e)}}))}},{key:"render",value:function(){var t=this.props.config.settings.showErrorMessage,r=this.props.dragging.id==this.props.id,n=this.props.path.size,o=this.props.config.settings.maxNesting,i=1==n;if(this.props.parentField&&this.props.parentFieldPathSize){var a=Yh(this.props.config,this.props.parentField);n=this.props.path.size-this.props.parentFieldPathSize+1,o=null==a?void 0:a.maxNesting,i=!1}else if(this.props.field){var l=Yh(this.props.config,this.props.field);n=1,o=null==l?void 0:l.maxNesting,i=!1}var s=!r&&this.props.isDraggingTempo,u=this.props.fieldType||null,c=this.props.valueError,p=null!=(z((null==c?void 0:c.toArray())||[]).filter((function(e){return!!e})).shift()||null)&&t,d=void 0===o||n<o,f=o&&n>o;return R().createElement("div",{className:tv()("group-or-rule-container","group-container",p?"group-with-error":null),"data-id":this.props.id},[r?R().createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,isRoot:i,lev:this.props.path.size-1,allowFurtherNesting:d,isMaxNestingExceeded:f,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:this.dummyFn,setNot:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,addGroup:this.dummyFn,addCaseGroup:this.dummyFn,addDefaultCaseGroup:this.dummyFn,addRule:this.dummyFn,setField:this.dummyFn,setFuncValue:this.dummyFn,setOperator:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,value:this.props.value||null,valueError:this.props.valueError||null,valueSrc:this.props.valueSrc||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:u,parentField:this.props.parentField||null,parentFieldPathSize:this.props.parentFieldPathSize,parentFieldCanReorder:this.props.parentFieldCanReorder,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,R().createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:r,isDraggingTempo:s,onDragStart:this.props.onDragStart,isRoot:i,lev:this.props.path.size-1,allowFurtherNesting:d,isMaxNestingExceeded:f,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:s?this.dummyFn:this.setConjunction,setNot:s?this.dummyFn:this.setNot,setLock:s?this.dummyFn:this.setLock,removeSelf:s?this.dummyFn:this.removeSelf,addGroup:s?this.dummyFn:this.addGroup,addCaseGroup:s?this.dummyFn:this.addCaseGroup,addDefaultCaseGroup:s?this.dummyFn:this.addDefaultCaseGroup,addRule:s?this.dummyFn:this.addRule,setField:s?this.dummyFn:this.setField,setFuncValue:s?this.dummyFn:this.setFuncValue,setOperator:s?this.dummyFn:this.setOperator,setValue:s?this.dummyFn:this.setValue,setValueSrc:s?this.dummyFn:this.setValueSrc,value:this.props.value||null,valueError:this.props.valueError||null,valueSrc:this.props.valueSrc||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:u,parentField:this.props.parentField||null,parentFieldPathSize:this.props.parentFieldPathSize,parentFieldCanReorder:this.props.parentFieldCanReorder,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}])}(T.Component),r.propTypes={config:yg().object.isRequired,actions:yg().object.isRequired,path:yg().any.isRequired,id:yg().string.isRequired,groupId:yg().string,not:yg().bool,conjunction:yg().string,children1:yg().any,onDragStart:yg().func,reordableNodesCnt:yg().number,field:yg().any,fieldSrc:yg().string,fieldType:yg().string,parentField:yg().string,value:yg().any,valueSrc:yg().any,valueError:yg().any,isLocked:yg().bool,isTrueLocked:yg().bool,dragging:yg().object,isDraggingTempo:yg().bool},r}(e,t));return r.displayName="ConnectedGroupContainer",r};function Zh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zh=function(){return!!e})()}var ey={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},ty=function(e){function t(){return S(this,t),e=this,n=arguments,r=I(r=t),C(e,Zh()?Reflect.construct(r,n||[],I(e).constructor):r.apply(e,n));var e,r,n}return x(t,e),L(t,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.addGroup,o=e.removeSelf,i=e.setLock,a=e.isLocked,l=e.isTrueLocked,s=e.id,u=e.parentField,c=e.canAddGroup,p=e.canAddRule,d=e.canDeleteGroup,f=t.settings,g=f.immutableGroupsMode,v=f.addRuleLabel,h=f.addGroupLabel,y=f.addSubRuleLabel,m=f.addSubGroupLabel,b=f.delGroupLabel,O=f.groupActionsPosition,_=f.renderButton,w=f.renderIcon,S=f.renderSwitch,E=f.renderButtonGroup,F=f.lockLabel,j=f.lockedLabel,L=f.showLock,C=f.canDeleteLocked,I=function(e){return w(e,t.ctx)},k=function(e){return _(e,t.ctx)},x=function(e){return S(e,t.ctx)},T=function(e){return E(e,t.ctx)},A=ey[O||"topRight"],P=L&&!(a&&!l)&&R().createElement(x,{type:"lock",id:s,value:a,setValue:i,label:F,checkedLabel:j,config:t}),N=!g&&p&&!a&&R().createElement(k,{type:u?"addSubRule":"addRule",onClick:r,label:u?y:v,readonly:a,config:t,renderIcon:I}),D=!g&&c&&!a&&R().createElement(k,{type:u?"addSubGroup":"addGroup",onClick:n,label:u?m:h,readonly:a,config:t,renderIcon:I}),V=!g&&d&&(!a||a&&C)&&R().createElement(k,{type:"delGroup",onClick:o,label:b,config:t,renderIcon:I});return R().createElement("div",{className:"group--actions ".concat(A)},R().createElement(T,{config:t},P,N,D,V))}}])}(T.PureComponent);function ry(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ny(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ny(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ny(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function iy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iy=function(){return!!e})()}var ay=vg.ConfigUtils.getFieldConfig,ly=vg.RuleUtils.isEmptyGroupChildren,sy=vg.TreeUtils,uy=(sy.getTotalReordableNodesCountInTree,sy.getTotalRulesCountInTree),cy=function(e){function t(e){var r,n,o,i;return S(this,t),n=this,i=[e],o=I(o=t),(r=C(n,iy()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i))).childrenClassName=function(){return""},r.renderBeforeActions=function(){var e=r.BeforeActions;return null==e?null:R().createElement(e,Zg({key:"group-actions-before"},r.props))},r.renderAfterActions=function(){var e=r.AfterActions;return null==e?null:R().createElement(e,Zg({key:"group-actions-after"},r.props))},zg(r),r.onPropsChanged(e),r.removeSelf=r.removeSelf.bind(r),r.setLock=r.setLock.bind(r),r.renderItem=r.renderItem.bind(r),r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){var t=this,r=this.props;if(!this.Icon||(null==r?void 0:r.config)!==(null==e?void 0:e.config)){var n=e.config,o=n.settings,i=o.renderIcon,a=o.renderConjs,l=o.renderBeforeActions,s=o.renderAfterActions;this.Icon=Lv(n,i),this.Conjs=Lv(n,a),this.BeforeActions=Lv(n,l),this.AfterActions=Lv(n,s)}this.doRemove=function(){t.props.removeSelf()}}},{key:"isGroupTopPosition",value:function(){return Hh()(this.props.config.settings.groupActionsPosition||"topRight","top")}},{key:"setLock",value:function(e){this.props.setLock(e)}},{key:"removeSelf",value:function(){var e=this.props,t=e.confirmFn,r=e.config,n=r.settings,o=n.renderConfirm,i=n.removeGroupConfirmOptions;i&&!this.isEmptyCurrentGroup()?o.call(r.ctx,oy(oy({},i),{},{onOk:this.doRemove,onCancel:null,confirmFn:t}),r.ctx):this.doRemove()}},{key:"isEmptyCurrentGroup",value:function(){var e=this.props,t=e.children1,r=e.config;return ly(t,r)}},{key:"showNot",value:function(){var e=this.props,t=e.config,r=e.parentField,n=t.settings.showNot;if(r){var o,i=ay(t,r);n=n&&(null===(o=null==i?void 0:i.showNot)||void 0===o||o)}return n}},{key:"showConjs",value:function(){var e=this.props.config.settings.forceShowConj,t=this.conjunctionOptions();return Object.keys(t).length>1&&!this.isOneChild()||this.showNot()||e}},{key:"isNoChildren",value:function(){var e=this.props.children1;return!e||0==e.size}},{key:"isOneChild",value:function(){var e=this.props.children1;return!e||e.size<2}},{key:"renderChildrenWrapper",value:function(){return this.props.children1&&R().createElement("div",{key:"group-children",className:tv()("group--children",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isOneChild()?"one--child":"",this.childrenClassName())},this.renderChildren())}},{key:"renderHeaderWrapper",value:function(){var e=this.isGroupTopPosition();return R().createElement("div",{key:"group-header",className:tv()("group--header",this.isOneChild()?"one--child":"",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"")},this.renderHeader(),e&&this.renderBeforeActions(),e&&this.renderActions(),e&&this.renderAfterActions())}},{key:"renderFooterWrapper",value:function(){return!this.isGroupTopPosition()&&R().createElement("div",{key:"group-footer",className:"group--footer"},this.renderBeforeActions(),this.renderActions(),this.renderAfterActions())}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.addGroup,o=e.isLocked,i=e.isTrueLocked,a=e.id,l=e.parentField;return R().createElement(ty,{key:"group-actions",config:t,addRule:r,addGroup:n,canAddGroup:this.canAddGroup(),canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:i,id:a,parentField:l})}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var e=this.props,t=e.totalRulesCnt,r=e.isMaxNestingExceeded,n=e.parentField,o=this.props.config.settings.maxNumberOfRules;return n&&(o=ay(this.props.config,n).maxNumberOfRules),!r&&(!o||t<o)}},{key:"canDeleteGroup",value:function(){return!this.props.isRoot}},{key:"renderChildren",value:function(){var e=this.props.children1;return e?e.valueSeq().toArray().map(this.renderItem):null}},{key:"renderItem",value:function(e){if(e){var t=this.props,r=t.config,n=t.actions,o=t.onDragStart,i=t.isLocked,a=t.parentField,l=t.parentFieldPathSize,s=t.parentFieldCanReorder,u="group"==e.get("type")&&null!=e.getIn(["properties","field"])?"rule_group":e.get("type");return R().createElement(em,Zg({key:e.get("id"),id:e.get("id"),groupId:t.id,path:e.get("path"),type:u,properties:e.get("properties"),config:r,actions:n,children1:e.get("children1"),parentField:a,parentFieldPathSize:l,parentFieldCanReorder:s,reordableNodesCnt:this.reordableNodesCntForItem(e),totalRulesCnt:this.totalRulesCntForItem(e),parentReordableNodesCnt:this.reordableNodesCnt(),onDragStart:o,isDraggingTempo:this.props.isDraggingTempo,isParentLocked:i},this.extraPropsForItem(e)))}}},{key:"extraPropsForItem",value:function(e){return{}}},{key:"reordableNodesCnt",value:function(){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(e){return"rule_group"===e.get("type")?uy(e):this.props.totalRulesCnt}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.reordableNodesCnt()}},{key:"showDragIcon",value:function(){var e=this.props,t=e.config,r=e.isRoot,n=e.isLocked,o=e.parentField,i=e.parentFieldCanReorder,a=this.reordableNodesCnt(),l=t.settings.canReorder&&!r&&a>1&&!n;return o&&(l=l&&i),l}},{key:"renderDrag",value:function(){var e=this.props.handleDraggerMouseDown,t=this.Icon,r=R().createElement(t,{type:"drag"});return this.showDragIcon()&&R().createElement("div",{key:"group-drag-icon",onMouseDown:e,className:"qb-drag-handler group--drag-handler"},r)}},{key:"conjunctionOptions",value:function(){var e=this.props,t=e.parentField,r=e.conjunctionOptions;return t?this.conjunctionOptionsForGroupField(t):r}},{key:"conjunctionOptionsForGroupField",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.props,r=t.config,n=t.conjunctionOptions,o=ay(r,e);if(null!=o&&o.conjunctions){var i,a={},l=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ry(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ry(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(o.conjunctions);try{for(l.s();!(i=l.n()).done;){var s=i.value,u=n[s];u&&(a[s]=u)}}catch(e){l.e(e)}finally{l.f()}return a}return n}},{key:"renderConjs",value:function(){var e=this.props,t=e.config,r=e.children1,n=e.id,o=e.selectedConjunction,i=e.setConjunction,a=e.not,l=e.setNot,s=e.isLocked,u=t.settings,c=u.immutableGroupsMode,p=u.notLabel,d=this.conjunctionOptions();if(!this.showConjs())return null;if(!r||!r.size)return null;var f={disabled:this.isOneChild(),readonly:c||s,selectedConjunction:o,setConjunction:c?Sv:i,conjunctionOptions:d,config:t,not:a||!1,id:n,setNot:c?Sv:l,notLabel:p,showNot:this.showNot(),isLocked:s},g=this.Conjs;return R().createElement(g,Zg({key:"group-conjs"},f))}},{key:"renderHeader",value:function(){return R().createElement("div",{key:"group-conjunctions",className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"render",value:function(){return R().createElement(R().Fragment,null,this.renderHeaderWrapper(),this.renderChildrenWrapper(),this.renderFooterWrapper())}}])}(T.Component);cy.propTypes={reordableNodesCnt:yg().number,conjunctionOptions:yg().object.isRequired,allowFurtherNesting:yg().bool.isRequired,isMaxNestingExceeded:yg().bool,isRoot:yg().bool.isRequired,not:yg().bool,selectedConjunction:yg().string,config:yg().object.isRequired,id:yg().string.isRequired,groupId:yg().string,path:yg().any,children1:yg().any,isDraggingMe:yg().bool,isDraggingTempo:yg().bool,isLocked:yg().bool,isTrueLocked:yg().bool,parentField:yg().string,handleDraggerMouseDown:yg().func,onDragStart:yg().func,addRule:yg().func.isRequired,addGroup:yg().func.isRequired,removeSelf:yg().func.isRequired,setConjunction:yg().func.isRequired,setNot:yg().func.isRequired,setLock:yg().func.isRequired,actions:yg().object.isRequired};const py=Qh(cv("group")(Fv(cy)),"group");function dy(){return dy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},dy.apply(null,arguments)}function fy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fy=function(){return!!e})()}var gy=function(e){function t(){return S(this,t),e=this,n=arguments,r=I(r=t),C(e,fy()?Reflect.construct(r,n||[],I(e).constructor):r.apply(e,n));var e,r,n}return x(t,e),L(t,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.canAddRule,o=e.canDeleteGroup,i=e.removeSelf,a=e.setLock,l=e.isLocked,s=e.isTrueLocked,u=e.id,c=t.settings,p=c.immutableGroupsMode,d=c.addRuleLabel,f=c.delGroupLabel,g=c.renderButton,v=c.renderIcon,h=c.renderSwitch,y=c.renderButtonGroup,m=c.lockLabel,b=c.lockedLabel,O=c.showLock,_=c.canDeleteLocked,w=function(e){return v(e,t.ctx)},S=function(e){return g(e,t.ctx)},E=function(e){return h(e,t.ctx)},F=function(e){return y(e,t.ctx)},j=O&&!(l&&!s)&&R().createElement(E,{type:"lock",id:u,value:l,setValue:a,label:m,checkedLabel:b,hideLabel:!0,config:t}),L=!p&&n&&!l&&R().createElement(S,{type:"addSubRuleSimple",onClick:r,label:d,readonly:l,config:t,renderIcon:w}),C=!p&&o&&(!l||l&&_)&&R().createElement(S,{type:"delRuleGroup",onClick:i,label:f,config:t,renderIcon:w});return R().createElement("div",{className:"group--actions"},R().createElement(F,{config:t},j,L,C))}}])}(T.PureComponent);function vy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vy(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yy=function(){return!!e})()}var my=vg.ConfigUtils.getFieldConfig,by=function(e){function t(e){var r,n,o,i;return S(this,t),n=this,i=[e],o=I(o=t),(r=C(n,yy()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i))).childrenClassName=function(){return"rule_group--children"},r.renderHeaderWrapper=function(){return null},r.renderFooterWrapper=function(){return null},r.renderConjs=function(){return null},r.canAddGroup=function(){return!1},r.canAddRule=function(){return!0},r.canDeleteGroup=function(){return!1},r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){dy(I(t.prototype),"onPropsChanged",this).call(this,e)}},{key:"reordableNodesCntForItem",value:function(e){if(this.props.isLocked)return 0;var t=this.props.children1;return(null==t?void 0:t.size)||0}},{key:"renderChildrenWrapper",value:function(){return R().createElement(R().Fragment,null,this.renderDrag(),this.renderField(),this.renderActions(),dy(I(t.prototype),"renderChildrenWrapper",this).call(this))}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedFieldSrc,o=e.selectedFieldType,i=e.setField,a=e.setFuncValue,l=e.setFieldSrc,s=e.parentField,u=e.id,c=e.groupId,p=e.isLocked,d=t.settings.immutableFieldsMode;return R().createElement(xh,{key:"field",classname:"group--field",config:t,canSelectFieldSource:!1,selectedField:r,selectedFieldSrc:n,selectedFieldType:o,setField:i,setFuncValue:a,setFieldSrc:l,parentField:s,readonly:d||p,id:u,groupId:c})}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.isLocked,o=e.isTrueLocked,i=e.id;return R().createElement(gy,{config:t,addRule:r,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:n,isTrueLocked:o,id:i})}},{key:"extraPropsForItem",value:function(e){var t,r=this.props,n=r.selectedField,o=r.lev,i=r.config,a=my(i,n);return{parentField:n,parentFieldPathSize:o+1,parentFieldCanReorder:null!==(t=null==a?void 0:a.canReorder)&&void 0!==t?t:i.settings.canReorder}}}])}(cy);by.propTypes=hy(hy({},cy.propTypes),{},{selectedField:yg().any,selectedFieldSrc:yg().string,parentField:yg().string,setField:yg().func,setFieldSrc:yg().func,lev:yg().number});const Oy=Qh(cv("group rule_group")(Fv(by)),"rule_group");function _y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_y=function(){return!!e})()}var wy=function(e){function t(){return S(this,t),e=this,n=arguments,r=I(r=t),C(e,_y()?Reflect.construct(r,n||[],I(e).constructor):r.apply(e,n));var e,r,n}return x(t,e),L(t,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.addGroup,o=e.canAddRule,i=e.canAddGroup,a=e.canDeleteGroup,l=e.removeSelf,s=e.setLock,u=e.isLocked,c=e.isTrueLocked,p=e.id,d=t.settings,f=d.immutableGroupsMode,g=d.addSubRuleLabel,v=d.addSubGroupLabel,h=d.delGroupLabel,y=d.renderButton,m=d.renderIcon,b=d.renderSwitch,O=d.renderButtonGroup,_=d.lockLabel,w=d.lockedLabel,S=d.showLock,E=d.canDeleteLocked,F=function(e){return m(e,t.ctx)},j=function(e){return y(e,t.ctx)},L=function(e){return b(e,t.ctx)},C=function(e){return O(e,t.ctx)},I=S&&!(u&&!c)&&R().createElement(L,{type:"lock",id:p,value:u,setValue:s,label:_,checkedLabel:w,config:t}),k=!f&&o&&!u&&R().createElement(j,{type:"addSubRule",onClick:r,label:g,readonly:u,config:t,renderIcon:F}),x=!f&&i&&!u&&R().createElement(j,{type:"addSubGroup",onClick:n,label:v,readonly:u,config:t,renderIcon:F}),T=!f&&a&&(!u||u&&E)&&R().createElement(j,{type:"delRuleGroup",onClick:l,label:h,config:t,renderIcon:F});return R().createElement("div",{className:"group--actions group--actions--tr"},R().createElement(C,{config:t},I,k,x,T))}}])}(T.PureComponent);function Sy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ey(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sy(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fy=function(){return!!e})()}var jy=vg.ConfigUtils,Ly=jy.getFieldConfig,Cy=jy.getFieldWidgetConfig,Iy=vg.RuleUtils.isEmptyRuleGroupExtPropertiesAndChildren,ky=vg.TreeUtils.getTotalReordableNodesCountInTree,xy=function(e){function t(e){var r,n,o,i;return S(this,t),n=this,i=[e],o=I(o=t),(r=C(n,Fy()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i))).childrenClassName=function(){return"rule_group_ext--children"},r.renderFooterWrapper=function(){return null},r.canDeleteGroup=function(){return!0},r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){dy(I(t.prototype),"onPropsChanged",this).call(this,e)}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=Ly(t,r).maxNumberOfRules,o=this.props.totalRulesCnt;return!n||o<n}},{key:"renderHeaderWrapper",value:function(){return R().createElement("div",{key:"group-header",className:tv()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderGroupField(),this.renderActions())}},{key:"renderHeader",value:function(){return R().createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderGroupField",value:function(){return R().createElement("div",{className:"group--field--count--rule"},this.renderField(),this.renderOperator(),this.renderWidget(),this.renderError())}},{key:"renderError",value:function(){var e=this.props,t=e.config,r=e.valueError,n=t.settings,o=n.renderRuleError,i=n.showErrorMessage,a=z((null==r?void 0:r.toArray())||[]).filter((function(e){return!!e})).shift()||null;return i&&a&&R().createElement("div",{className:"rule_group--error"},o?o({error:a},t.ctx):a)}},{key:"showNot",value:function(){var e,t=this.props,r=t.config,n=t.selectedField,o=Ly(r,n);return null!==(e=null==o?void 0:o.showNot)&&void 0!==e?e:r.settings.showNot}},{key:"conjunctionOptions",value:function(){var e=this.props.selectedField;return this.conjunctionOptionsForGroupField(e)}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedFieldSrc,o=e.selectedFieldType,i=e.setField,a=e.setFieldSrc,l=e.setFuncValue,s=e.parentField,u=e.id,c=e.groupId,p=e.isLocked,d=t.settings.immutableFieldsMode;return R().createElement(xh,{key:"field",classname:"rule--field",config:t,canSelectFieldSource:!1,selectedField:r,selectedFieldSrc:n,selectedFieldType:o,setField:i,setFuncValue:l,setFieldSrc:a,parentField:s,readonly:d||p,id:u,groupId:c})}},{key:"renderOperator",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedFieldSrc,o=e.selectedOperator,i=(e.setField,e.setOperator),a=e.isLocked,l=t.settings.immutableFieldsMode,s=Cy(t,r,o)||{},u=s.hideOperator,c=r&&u&&s.operatorInlineLabel,p=r&&!u;return R().createElement(Iv,{key:"operator",classname:"group--operator",config:t,selectedField:r,selectedFieldSrc:n,selectedOperator:o,setOperator:i,showOperator:p,showOperatorLabel:c,selectedFieldWidgetConfig:s,readonly:l||a,id:this.props.id,groupId:this.props.groupId})}},{key:"isEmptyCurrentGroup",value:function(){var e=this.props,t=e.children1,r=e.config,n=this._buildWidgetProps(this.props);return Iy(n,t,r)}},{key:"_buildWidgetProps",value:function(e){var t=e.selectedField,r=e.selectedFieldSrc,n=e.selectedFieldType,o=e.selectedOperator,i=e.operatorOptions,a=e.value,l=e.valueType,s=(e.valueSrc,e.asyncListValues,e.valueError);return e.fieldError,{field:t,fieldSrc:r,fieldType:n,operator:o,operatorOptions:i,value:a,valueType:l,valueSrc:["value"],valueError:s,fieldError:null,parentField:e.parentField}}},{key:"renderWidget",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedOperator,o=e.isLocked,i=t.settings.immutableValuesMode;if(!r||!n)return null;var a=R().createElement(Sh,Zg({key:"values",isForRuleGroup:!0},this._buildWidgetProps(this.props),{config:t,setValue:i?Sv:this.props.setValue,setValueSrc:Sv,readonly:i||o,id:this.props.id,groupId:this.props.groupId}));return R().createElement(wv,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},a)}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.addGroup,o=e.isLocked,i=e.isTrueLocked,a=e.id;return R().createElement(wy,{config:t,addRule:r,addGroup:n,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:i,id:a})}},{key:"reordableNodesCntForItem",value:function(e){if(this.props.isLocked)return 0;var t=this.props,r=t.children1,n=t.id;return ky({id:n,type:"rule_group",children1:r})}},{key:"extraPropsForItem",value:function(e){var t,r=this.props,n=r.selectedField,o=r.lev,i=r.config,a=Ly(i,n);return{parentField:n,parentFieldPathSize:o+1,parentFieldCanReorder:null!==(t=null==a?void 0:a.canReorder)&&void 0!==t?t:i.settings.canReorder}}}])}(cy);xy.propTypes=Ey(Ey({},cy.propTypes),{},{selectedField:yg().any,selectedFieldSrc:yg().string,selectedOperator:yg().string,value:yg().any,parentField:yg().string,setField:yg().func,setFieldSrc:yg().func,setOperator:yg().func,setValue:yg().func,valueError:yg().any,lev:yg().number});const Ty=Qh(cv("group rule_group_ext")(Fv(xy)),"rule_group");function Ry(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ry=function(){return!!e})()}var Ay={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},Py=function(e){function t(){return S(this,t),e=this,n=arguments,r=I(r=t),C(e,Ry()?Reflect.construct(r,n||[],I(e).constructor):r.apply(e,n));var e,r,n}return x(t,e),L(t,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addCaseGroup,n=e.addDefaultCaseGroup,o=e.setLock,i=e.isLocked,a=e.isTrueLocked,l=e.id,s=e.canAddGroup,u=e.canAddDefault,c=t.settings,p=c.immutableGroupsMode,d=c.addCaseLabel,f=c.addDefaultCaseLabel,g=c.groupActionsPosition,v=c.renderButton,h=c.renderIcon,y=c.renderSwitch,m=c.renderButtonGroup,b=c.lockLabel,O=c.lockedLabel,_=c.showLock,w=function(e){return h(e,t.ctx)},S=function(e){return v(e,t.ctx)},E=function(e){return y(e,t.ctx)},F=function(e){return m(e,t.ctx)},j=Ay[g||"topRight"],L=_&&!(i&&!a)&&R().createElement(E,{type:"lock",id:l,value:i,setValue:o,label:b,checkedLabel:O,config:t}),C=!p&&s&&!i&&R().createElement(S,{type:"addCaseGroup",onClick:r,label:d,readonly:i,config:t,renderIcon:w}),I=!p&&u&&!i&&R().createElement(S,{type:"addDefaultCaseGroup",onClick:n,label:f,readonly:i,config:t,renderIcon:w});return R().createElement("div",{className:"group--actions ".concat(j)},R().createElement(F,{config:t},L,C,I))}}])}(T.PureComponent);function Ny(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dy=function(){return!!e})()}var Vy=vg.TreeUtils,$y=Vy.getTotalReordableNodesCountInTree,My=Vy.getTotalRulesCountInTree,zy=function(e){function t(e){var r,n,o,i;return S(this,t),n=this,i=[e],o=I(o=t),(r=C(n,Dy()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i))).childrenClassName=function(){return"switch_group--children"},r.renderFooterWrapper=function(){return null},r.hasDefaultCase=function(){var e;return(null===(e=r.props.children1)||void 0===e?void 0:e.size)&&r.props.children1.filter((function(e){return null==e.get("children1")})).size>0},r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){dy(I(t.prototype),"onPropsChanged",this).call(this,e)}},{key:"canAddGroup",value:function(){var e,t=this.props.config.settings.maxNumberOfCases,r=(null===(e=this.props.children1)||void 0===e?void 0:e.size)||0;return!t||r<t}},{key:"canAddRule",value:function(){return!1}},{key:"reordableNodesCnt",value:function(){var e,t=(null===(e=this.props.children1)||void 0===e?void 0:e.size)||0;return this.hasDefaultCase()&&t--,t}},{key:"totalRulesCntForItem",value:function(e){return My(e)}},{key:"reordableNodesCntForItem",value:function(e){var t;if(this.props.isLocked)return 0;var r=this.props.config.settings,n=r.canLeaveEmptyCase,o=r.canRegroupCases,i=(null===(t=this.props.children1)||void 0===t?void 0:t.size)||0;this.hasDefaultCase()&&i--;var a=$y(e);return 1==a&&o&&n&&i>1&&(a=111),a}},{key:"showConjs",value:function(){return!0}},{key:"renderHeaderWrapper",value:function(){return R().createElement("div",{key:"group-header",className:tv()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderActions())}},{key:"renderHeader",value:function(){return R().createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderConjs",value:function(){return this.props.config.settings.renderSwitchPrefix||null}},{key:"showNot",value:function(){return!1}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addCaseGroup,n=e.addDefaultCaseGroup,o=e.isLocked,i=e.isTrueLocked,a=e.id;return R().createElement(Py,{config:t,addCaseGroup:r,addDefaultCaseGroup:n,canAddDefault:!this.hasDefaultCase(),canAddGroup:this.canAddGroup(),setLock:this.setLock,isLocked:o,isTrueLocked:i,id:a})}}])}(cy);zy.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ny(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ny(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},cy.propTypes);const qy=Qh(cv("group switch_group")(Fv(zy)),"switch_group");function Wy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function By(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wy(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Uy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Uy=function(){return!!e})()}var Gy=function(e){function t(e){var r,n,o,i;return S(this,t),n=this,i=[e],o=I(o=t),(r=C(n,Uy()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i))).childrenClassName=function(){return"case_group--children"},r.renderFooterWrapper=function(){return null},r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){var r=this.props,n=!this.renderBeforeCaseValue||(null==r?void 0:r.config)!==(null==e?void 0:e.config);if(dy(I(t.prototype),"onPropsChanged",this).call(this,e),n){var o=e.config,i=o.settings,a=i.renderBeforeCaseValue,l=i.renderAfterCaseValue,s=i.renderRuleError;this.BeforeCaseValue=Lv(o,a),this.AfterCaseValue=Lv(o,l),this.RuleError=Lv(o,s)}}},{key:"isDefaultCase",value:function(){return null==this.props.children1}},{key:"reordableNodesCnt",value:function(){return this.props.parentReordableNodesCnt}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(e){return this.props.totalRulesCnt}},{key:"showDragIcon",value:function(){return!this.isDefaultCase()&&dy(I(t.prototype),"showDragIcon",this).call(this)}},{key:"renderHeaderWrapper",value:function(){return R().createElement("div",{key:"group-header",className:tv()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag",!this.showConjs()||this.isOneChild()&&!this.showNot()?"hide--conjs":"with--conjs")},this.renderHeaderLeft(),this.renderHeaderCenter(),this.renderActions())}},{key:"renderChildrenWrapper",value:function(){return this.isDefaultCase()?null:R().createElement("div",{className:"case_group--body"},this.renderCondition(),this.renderBeforeValue(),this.renderValue(),this.renderAfterValue())}},{key:"renderHeaderLeft",value:function(){return this.isDefaultCase()?this.props.config.settings.defaultCaseLabel||"":R().createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag(),this.renderError())}},{key:"renderCondition",value:function(){return this.isDefaultCase()?null:dy(I(t.prototype),"renderChildrenWrapper",this).call(this)}},{key:"renderHeaderCenter",value:function(){return this.isDefaultCase()?R().createElement("div",null,this.renderValue(),this.renderError()):null}},{key:"canAddGroup",value:function(){return!this.isDefaultCase()&&dy(I(t.prototype),"canAddGroup",this).call(this)}},{key:"canAddRule",value:function(){return!this.isDefaultCase()&&dy(I(t.prototype),"canAddRule",this).call(this)}},{key:"renderBeforeValue",value:function(){var e=this.BeforeCaseValue;return null==e?null:R().createElement(e,Zg({key:"values-before"},this.props))}},{key:"renderAfterValue",value:function(){var e=this.AfterCaseValue;return null==e?null:R().createElement(e,Zg({key:"values-after"},this.props))}},{key:"renderError",value:function(){var e=this.props,t=e.config,r=e.valueError,n=t.settings.showErrorMessage,o=this.RuleError,i=z((null==r?void 0:r.toArray())||[]).filter((function(e){return!!e})).shift()||null;return n&&i&&R().createElement("div",{className:"rule--error"},o?R().createElement(o,{error:i}):i)}},{key:"renderValue",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=e.value,o=e.valueSrc,i=e.valueError,a=e.setValue,l=e.setValueSrc,s=e.setFuncValue,u=e.id,c=t.settings.immutableValuesMode,p=R().createElement(Sh,{key:"values",isCaseValue:!0,field:"!case_value",operator:null,value:n,valueSrc:null!=o?o:"value",valueError:i,fieldError:null,config:t,setValue:c?Sv:a,setValueSrc:c?Sv:l,setFuncValue:c?Sv:s,readonly:c||r,id:u,groupId:null});return R().createElement(wv,{className:"case_group--value"},p)}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addGroup,n=e.addRule,o=e.isLocked,i=e.isTrueLocked,a=e.id;return R().createElement(ty,{config:t,addGroup:r,addRule:n,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:i,id:a})}},{key:"isEmptyCurrentGroup",value:function(){var e=this.props.value,r=e&&e.size?e.get(0):null,n=null!=r&&(!Array.isArray(r)||r.length>0);return dy(I(t.prototype),"isEmptyCurrentGroup",this).call(this)&&!n}}])}(cy);Gy.propTypes=By(By({},cy.propTypes),{},{parentReordableNodesCnt:yg().number,value:yg().any,setValue:yg().func});const Ky=Qh(cv("group case_group")(Fv(Gy)),"case_group");var Hy=["type"];function Xy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xy=function(){return!!e})()}function Jy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jy(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qy=function(e){var t,r=(null===(t=e.properties)||void 0===t?void 0:t.toObject())||{},n=Yy({},r);return e.isParentLocked&&(n.isLocked=!0),r.isLocked&&(n.isTrueLocked=!0),n},Zy={rule:function(e){return R().createElement(Gh,Zg({},Qy(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,config:e.config,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,parentField:e.parentField,parentFieldPathSize:e.parentFieldPathSize,parentReordableNodesCnt:e.parentReordableNodesCnt,parentFieldCanReorder:e.parentFieldCanReorder}))},group:function(e){return R().createElement(py,Zg({},Qy(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentFieldPathSize:e.parentFieldPathSize,parentReordableNodesCnt:e.parentReordableNodesCnt,parentFieldCanReorder:e.parentFieldCanReorder}))},rule_group:function(e){return R().createElement(Oy,Zg({},Qy(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentFieldPathSize:e.parentFieldPathSize,parentReordableNodesCnt:e.parentReordableNodesCnt,parentFieldCanReorder:e.parentFieldCanReorder}))},rule_group_ext:function(e){return R().createElement(Ty,Zg({},Qy(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentFieldPathSize:e.parentFieldPathSize,parentReordableNodesCnt:e.parentReordableNodesCnt,parentFieldCanReorder:e.parentFieldCanReorder}))},switch_group:function(e){return R().createElement(qy,Zg({},Qy(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))},case_group:function(e){return R().createElement(Ky,Zg({},Qy(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))}},em=function(e){function t(){return S(this,t),e=this,n=arguments,r=I(r=t),C(e,Xy()?Reflect.construct(r,n||[],I(e).constructor):r.apply(e,n));var e,r,n}return x(t,e),L(t,[{key:"render",value:function(){var e,t=this.props,r=t.type,n=kd(t,Hy),o="array"==(null===(e=n.properties)||void 0===e?void 0:e.get("mode"))?"_ext":"",i=n.config.settings.renderItem,a=Zy[r+o];return i?i(Yy(Yy({},n),{},{type:r,itemComponent:a}),n.config.ctx):a?a(n):null}}])}(T.PureComponent);function tm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tm=function(){return!!e})()}em.propTypes={config:yg().object.isRequired,id:yg().string.isRequired,groupId:yg().string,type:yg().oneOf(["rule","group","rule_group","switch_group","case_group"]).isRequired,path:yg().any.isRequired,properties:yg().any,children1:yg().any,actions:yg().object.isRequired,reordableNodesCnt:yg().number,onDragStart:yg().func,parentField:yg().string,isDraggingTempo:yg().bool,isParentLocked:yg().bool};var rm=vg.TreeUtils,nm=rm.getTotalReordableNodesCountInTree,om=rm.getTotalRulesCountInTree,im=vg.DefaultUtils,am=im.createListWithOneElement,lm=im.emptyProperties,sm=function(e){function t(e){var r,n,o,i;return S(this,t),n=this,i=[e],o=I(o=t),(r=C(n,tm()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i))).pureShouldComponentUpdate=Mg(r),r._updPath(e),r}return x(t,e),L(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.pureShouldComponentUpdate(e,t)}},{key:"_updPath",value:function(e){var t=e.tree.get("id");this.path=am(t)}},{key:"render",value:function(){var e=this.props,t=e.tree,r=e.config,n=e.actions,o=e.onDragStart,i=t.get("type"),a="switch_group"==i,l=a?null:nm(t),s=a?null:om(t),u=t.get("id");return R().createElement(em,{key:u,id:u,path:this.path,type:i,properties:t.get("properties")||lm(),config:r,actions:n,children1:t.get("children1")||lm(),reordableNodesCnt:l,totalRulesCnt:s,parentReordableNodesCnt:0,onDragStart:o})}}])}(T.Component);sm.propTypes={tree:yg().any.isRequired,config:yg().object.isRequired,actions:yg().object.isRequired,onDragStart:yg().func};const um=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(0,_g.connect)((function(e){return{dragging:e.dragging,dragStart:e.dragStart,mousePos:e.mousePos}}),{setDragStart:Lg,setDragProgress:jg,setDragEnd:Cg},null,{context:bg})(function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=function(t){function n(e){var t,o,i,a;return S(this,n),o=this,a=[e],i=I(i=n),(t=C(o,ov()?Reflect.construct(i,a||[],I(o).constructor):i.apply(o,a)))._getEventTarget=function(e,t){return e&&e.__mocked_window||document.body||window},t.onDragStart=function(e,r,n){var o=r.closest(".query-builder");void 0===t._isUsingLegacyReactDomRender&&(t._isUsingLegacyReactDomRender=Vg(o)),document.body.classList.add("qb-dragging"),o.classList.add("qb-dragging");var i,a=o.closest(".query-builder-container")||o,l=(a=t._getScrollParent(a)||document.body).scrollTop,s=(t._getDraggableNodeEl(o),t._getPlaceholderNodeEl(o),o.querySelectorAll(".group--children")),u=s.length?s[0]:null;u&&(i=window.getComputedStyle(u,null).getPropertyValue("padding-left"),i=parseInt(i));var c={id:e,x:r.offsetLeft,y:r.offsetTop,w:r.offsetWidth,h:r.offsetHeight,itemInfo:t.tree.items[e],paddingLeft:i},p={id:e,x:r.offsetLeft,y:r.offsetTop,scrollTop:l,clientX:n.clientX,clientY:n.clientY,itemInfo:iv(t.tree.items[e]),treeEl:o,treeElContainer:a},d={clientX:n.clientX,clientY:n.clientY},f=t._getEventTarget(n,p);t.eventTarget=f,f.addEventListener("mousemove",t.onDrag),f.addEventListener("mouseup",t.onDragEnd),t.props.setDragStart(p,c,d)},t.onDrag=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=Object.assign({},t.props.dragging),i=t.props.dragStart,a=o.paddingLeft,l=i.treeElContainer.scrollTop;if(o.itemInfo=t.tree.items[o.id],o.itemInfo){var s={clientX:e.clientX,clientY:e.clientY},u={clientX:i.clientX,clientY:i.clientY};if(e.__mock_dom){var c=i.treeEl,p=t._getDraggableNodeEl(c),d=t._getPlaceholderNodeEl(c);e.__mock_dom({treeEl:c,dragEl:p,plhEl:d})}if(!i.plX){var f=i.treeEl,g=t._getPlaceholderNodeEl(f);g&&(i.plX=g.getBoundingClientRect().left+window.scrollX,i.plY=g.getBoundingClientRect().top+window.scrollY)}var v=i.x,h=i.y,y=i.clientX,m=i.clientY,b=i.scrollTop,O={x:v+(e.clientX-y),y:h+(e.clientY-m)+(l-b)};o.x=O.x,o.y=O.y,o.paddingLeft=a,o.mousePos=s,o.startMousePos=u,t.props.setDragProgress(s,o),n&&t.handleDrag(o,e,r)||e.preventDefault&&e.preventDefault()}},t.onDragEnd=function(){var e=t.props.dragStart.treeEl;t.props.setDragEnd(),e.classList.remove("qb-dragging"),document.body.classList.remove("qb-dragging"),t._cacheEls={};var r=t.eventTarget||t._getEventTarget();r.removeEventListener("mousemove",t.onDrag),r.removeEventListener("mouseup",t.onDragEnd)},t.pureShouldComponentUpdate=Mg(t),zg(t),t.onPropsChanged(e),t}return x(n,t),L(n,[{key:"onPropsChanged",value:function(e){this.tree=av(e.tree,e.config)}},{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=this.pureShouldComponentUpdate(e,t);if(o&&n==t&&r!=e){var i=[];for(var a in e)e[a]!=r[a]&&"dragging"!=a&&"mousePos"!=a&&i.push(a);i.length||(o=!1)}return o}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.dragging,n=this.props.dragStart;if(lv=!1,n&&n.id&&(r.itemInfo=this.tree.items[r.id],r.itemInfo&&(r.itemInfo.index!=n.itemInfo.index||r.itemInfo.parent!=n.itemInfo.parent))){var o=n.treeEl,i=n.treeElContainer,a=this._getPlaceholderNodeEl(o,!0);if(a){var l=a.getBoundingClientRect().left+window.scrollX,s=a.getBoundingClientRect().top+window.scrollY,u=n.plX,c=n.plY,p=i.scrollTop;n.plX=l,n.plY=s,n.itemInfo=iv(r.itemInfo),n.y=a.offsetTop,n.x=a.offsetLeft,n.clientY+=s-c,n.clientX+=l-u,i!=document.body&&(n.scrollTop=p),this.onDrag(this.props.mousePos,!1)}}}},{key:"_getNodeElById",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t)return null;this._cacheEls||(this._cacheEls={});var n=this._cacheEls[t];return n&&document.contains(n)&&!r||(n=e.querySelector('.group-or-rule-container[data-id="'+t+'"]'),this._cacheEls[t]=n),n}},{key:"_getDraggableNodeEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._cacheEls||(this._cacheEls={});var r=this._cacheEls.draggable;if(r&&document.contains(r)&&!t)return r;var n=e.getElementsByClassName("qb-draggable");return r=n.length?n[0]:null,this._cacheEls.draggable=r,r}},{key:"_getPlaceholderNodeEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._cacheEls||(this._cacheEls={});var r=this._cacheEls.placeholder;if(r&&document.contains(r)&&!t)return r;var n=e.getElementsByClassName("qb-placeholder");return r=n.length?n[0]:null,this._cacheEls.placeholder=r,r}},{key:"_isScrollable",value:function(e){var t=window.getComputedStyle(e)["overflow-y"];return("scroll"===t||"auto"===t)&&e.scrollHeight>e.offsetHeight}},{key:"_getScrollParent",value:function(e){return null==e?null:e===document.body||this._isScrollable(e)?e:this._getScrollParent(e.parentNode)}},{key:"handleDrag",value:function(e,t,r){var n,o,i,a,l=this,s=e.itemInfo,u=e.paddingLeft,c=null,p=this.props.dragStart.treeEl,d=e.id,f=this._getDraggableNodeEl(p),g=this._getPlaceholderNodeEl(p);if(f&&g){if(n=f.getBoundingClientRect(),!(o=g.getBoundingClientRect()).width)return;var v={hrz:0,vrt:0};n.top<o.top?v.vrt=-1:n.bottom>o.bottom&&(v.vrt=1),n.left>o.left?v.hrz=1:n.left<o.left&&(v.hrz=-1);var h,y={x:(a=p.getBoundingClientRect()).left+(a.right-a.left)/2,y:v.vrt>=0?n.bottom:n.top};if(t.__mocked_hov_container)h=t.__mocked_hov_container;else{var m=document.elementFromPoint(y.x,y.y-1);if(!(h=m?m.closest(".group-or-rule-container"):null)&&m&&m.classList.contains("query-builder-container")){var b,O=null==m||null===(b=m.firstChild)||void 0===b?void 0:b.firstChild;O&&O.classList.contains("group-or-rule-container")&&(h=O)}}if(h){var _=h.classList.contains("group-container"),w=h.getAttribute("data-id"),S=h,E=!1,F=!1;if(S){var j=(i=S.getBoundingClientRect()).bottom-i.top,L=this.tree.items[w];if(!L)throw new Error("There is an issue with rendering. If you use Next.js, please check getServerSideProps() method.");var C=null,I=null,k=null,x=null;if(0==v.vrt)k=s,(I=g)&&(C=I.getBoundingClientRect());else if(_){if(v.vrt>0){var T=h.getElementsByClassName("group--header"),R=T.length?T[0]:null;if(R){var A=R.getBoundingClientRect(),P=A.bottom-A.top;n.bottom-A.top>3*P/4&&L.top>e.itemInfo.top&&(k=L,C=A,I=R,F=!0)}}else v.vrt<0&&L.lev>=s.lev&&i.bottom-n.top>=2&&L.top<e.itemInfo.top&&(k=L,C=i,I=S,E=!0);(v.vrt<0?i.bottom-n.top>j-5:n.bottom-i.top>j-5)&&(F||E||(k=L,C=i,I=S),x=L)}else(v.vrt<0?i.bottom-n.top>j/2:n.bottom-i.top>j/2)&&(k=L,C=i,I=S);var N=k&&k.id==d;if(C){var D=n.left-a.left,V=(C.left,a.left,Math.max(0,Math.round(D/u))),$=[],M=[];if(N);else{if(_&&(E?$.push([Eg,k,k.lev+1]):F&&$.push([Fg,k,k.lev+1]),x)){var q=0==x.lev,W="case_group"==x.type&&"case_group"!=s.type,B=x.prev&&this.tree.items[x.prev].caseId,U=x.next&&this.tree.items[x.next].caseId;s.caseId==B&&(B=null),s.caseId==U&&(U=null);var G=B&&this.tree.items[B],K=U&&this.tree.items[U];v.vrt>0?q?M.push([Eg,x,x.lev+1]):W&&K?M.push([Fg,K,K.lev+1]):M.push([wg,x,x.lev]):v.vrt<0&&(q?M.push([Fg,x,x.lev+1]):W&&G?M.push([Eg,G,G.lev+1]):M.push([Sg,x,x.lev]))}E||F||(v.vrt<0?$.push([Sg,k,k.lev]):v.vrt>0&&$.push([wg,k,k.lev]))}var H=function(e){var t=e[1],r=s.caseId?l.tree.items[s.caseId]:null,n=t.caseId?l.tree.items[t.caseId]:null;return[].concat(z(e),[r,n])};$=$.map(H),M=M.map(H);var X=null,J=($=$.filter((function(e){var t=e[0],r=e[1];if((t==Sg||t==wg)&&null==r.parent)return!1;if(r.collapsed&&(t==Eg||t==Fg))return!1;var n=r.id==s.id;if(!n)for(var o=r;o.parent;)if((o=l.tree.items[o.parent]).id==s.id){n=!0;break}return!n})).map((function(e){var t=e[0],r=e[1],n=(e[2],e[3],e[4],null);return(n=t==Eg||t==Fg?r:l.tree.items[r.parent])&&null==n.parent&&(n=null),e[5]=n,e}))).filter((function(e){return l.canMove(s,e[1],e[0],e[3],e[4],e[5],r)}));0==J.length&&M.length>0&&(J=M.filter((function(e){return l.canMove(s,e[1],e[0],e[3],e[4],e[5],r)})));var Y=J.map((function(e){return e[2]})),Q=s.lev,Z=Y.concat(Q),ee=null;-1!=Z.indexOf(V)?ee=V:V>Math.max.apply(Math,z(Z))?ee=Math.max.apply(Math,z(Z)):V<Math.min.apply(Math,z(Z))&&(ee=Math.min.apply(Math,z(Z))),X=J.find((function(e){return e[2]==ee})),N||X||!J.length||(X=J[0]),c=X}}}else Pg.log("out of tree bounds!")}return!!c&&(this.move(s,c[1],c[0],c[3]),!0)}},{key:"canMove",value:function(e,t,r,n,o,i,a){if(!e||!t)return!1;if(e.id===t.id)return!1;var l=this.props.config.settings,s=l.canRegroup,u=l.canRegroupCases,c=l.maxNesting,p=l.maxNumberOfRules,d=l.canLeaveEmptyCase,f=(i?i.nextAtomicLev:t.atomicLev)+(e.closestRuleGroupId?0:e.depth||("group"==e.type?1:0)),g=r==Sg||r==wg,v=r==Fg||r==Eg,h=g&&1==t.lev||v&&0==t.lev,y=e.parent!=t.parent,m=v||y,b="rule_group"==e.type||!!e.closestRuleGroupId||"rule_group"==t.type||!!t.closestRuleGroupId,O=v&&"rule_group"==t.type?t.id:t.closestRuleGroupId,_=v&&"rule_group"==t.type?t.maxNesting:t.closestRuleGroupMaxNesting,w=0!=(v&&"rule_group"==t.type?t.canRegroup:t.closestRuleGroupCanRegroup),S=v&&"rule_group"==t.type?t.lev:t.closestRuleGroupLev,E=(i?i.lev+1:t.lev)+(e.depth||("group"==e.type?1:0))-(S||0),F=b&&e.closestRuleGroupId!=O,j="case_group"==e.type&&!h||"case_group"!=e.type&&"case_group"==t.type&&g||"case_group"!=e.type&&"switch_group"==t.type||!u&&e.caseId!=t.caseId||F,L=t.isLocked||e.isLocked||i&&i.isLocked;if(c&&f>c)return!1;if(_&&E>_)return!1;if(m&&(!s||j||L))return!1;if(b&&m&&!w)return!1;if("case_group"!=e.type&&e.caseId!=t.caseId){var C=!!n&&2==n._height,I=o?o.atomicRulesCountInCase+1:0;if(p&&I>p)return!1;if(C&&!d)return!1}if("case_group"==e.type&&(e.isDefaultCase||t.isDefaultCase||"switch_group"==t.type&&r==Eg))return!1;var k=!0;return a&&(k=a(e.node.toJS(),t.node.toJS(),r,i?i.node.toJS():null)),k}},{key:"move",value:function(e,t,r,n){this._isUsingLegacyReactDomRender||(lv=!0),this.props.actions.moveItem(e.path,t.path,r)}},{key:"render",value:function(){return R().createElement(e,Zg({},this.props,{onDragStart:this.onDragStart}))}}])}(T.Component),t.propTypes={tree:yg().any.isRequired,actions:yg().object.isRequired},t}(e,t));return r.displayName="ConnectedSortableContainer",r}(sm);function cm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pm=function(){return!!e})()}var dm=vg.clone,fm=vg.ConfigUtils,gm=fm.getFieldConfig,vm=fm.getFieldParts,hm=fm.getFieldPathParts,ym=vg.RuleUtils,mm=ym.getFieldPathLabels,bm=ym.getWidgetForFieldOp,Om=function(e){function t(e){var r,n,o,i;return S(this,t),n=this,i=[e],o=I(o=t),r=C(n,pm()?Reflect.construct(o,i||[],I(n).constructor):o.apply(n,i)),zg(r),r.onPropsChanged(e),r}return x(t,e),L(t,[{key:"onPropsChanged",value:function(e){var t=this.props,r=!this.items||["config","field","fieldSrc","fieldType","operator","isFuncArg","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0,n=!this.meta||["config","field","fieldSrc","fieldType","operator","value","placeholder","isFuncArg","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0;r&&(this.items=this.getItems(e)),n&&(this.meta=this.getMeta(e))}},{key:"getItems",value:function(e){var t=e.config,r=e.field,n=e.fieldType,o=e.operator,i=e.parentField,a=e.isFuncArg,l=e.fieldDefinition,s=t.settings.canCompareFieldWithField,u=vm(i,t),c=i?gm(t,i):null,p=i?null==c?void 0:c.subfields:t.fields,d=this.filterFields(t,p,r,i,u,o,s,a,l,n);return this.buildOptions(u,t,d,u)}},{key:"getMeta",value:function(e){var t,r=e.config,n=e.field,o=(e.fieldType,e.operator,e.value),i=e.placeholder,a=e.isFuncArg,l=e.parentField,s=r.settings,u=s.fieldPlaceholder,c=s.fieldSeparatorDisplay,p=o,d=!!o,f=n?gm(r,n):{},g=null==f||null===(t=f.widgets)||void 0===t?void 0:t.field,v=(null==g?void 0:g.widgetProps)||{},h=d?null:a&&i||v.valuePlaceholder||u,y=d?gm(r,p):null,m=y||{},b=hm(p,r),O=hm(p,r,!0),_=this.getFieldLabel(y,p,r),w=mm(p,r),S=w?w.join(c):null;return(S==_||l)&&(S=null),{placeholder:h,selectedKey:p,selectedKeys:b,selectedPath:O,selectedLabel:_,selectedOpts:m,selectedAltLabel:m.label2||m.tooltip,selectedFullLabel:S}}},{key:"filterFields",value:function(e,t,r,n,o,i,a,l,s,u){t=dm(t);var c,p=e.settings.fieldSeparator,d=gm(e,r),f=bm(e,r,i,"value");return e.widgets[f],c=l?null==s?void 0:s.type:d?d.type:u,function t(n,o){for(var s in n){var u=n[s].subfields,f=(o||[]).concat(s),g=f.join(p),v=gm(e,g);if(v)if("!struct"==v.type||"!group"==v.type)0==t(u,f)&&delete n[s];else{var h=!(c&&v.type!=c||!l&&g==r),y=a||e.settings.canCompareFieldWithField;y&&(h=h&&y(r,d,g,v,i)),h||delete n[s]}else delete n[s]}return dv()(n).length}(t,o||[]),t}},{key:"buildOptions",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!r)return null;var a=t.settings,l=a.fieldSeparator,s=a.fieldSeparatorDisplay,u=null!=o&&o.length?o.join(l)+l:"";return dv()(r).map((function(a){var l=[].concat(z(null!=o?o:[]),[a]),c=r[a],p=n.getFieldLabel(c,l,t),d=mm(l,t).join(s);(d==p||e)&&(d=null);var f=c.label2,g=c.tooltip;if(!c.hideForCompare)return"!struct"==c.type||"!group"==c.type?{key:a,path:u+a,label:p,fullLabel:d,altLabel:f,tooltip:g,items:n.buildOptions(e,t,c.subfields,l,{label:p,tooltip:g})}:{key:a,path:u+a,label:p,fullLabel:d,altLabel:f,tooltip:g,grouplabel:null==i?void 0:i.label,group:i}})).filter((function(e){return!!e}))}},{key:"getFieldLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.maxLabelsLength,o=vm(t,r),i=(null==e?void 0:e.label)||Vo()(o);return Tg(i,n)}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setValue,o=e.readonly,i=e.id,a=e.groupId,l=t.settings.renderField,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cm(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isValueField:!0,config:t,customProps:r,setField:n,readonly:o,items:this.items,id:i,groupId:a},this.meta);return l(s,t.ctx)}}])}(T.Component);Om.propTypes={id:yg().string,groupId:yg().string,setValue:yg().func.isRequired,config:yg().object.isRequired,field:yg().any,fieldSrc:yg().string,fieldType:yg().string,value:yg().string,operator:yg().string,customProps:yg().object,readonly:yg().bool,parentField:yg().string,fieldDefinition:yg().object,isFuncArg:yg().bool};const _m=function(e){var t=e.value,r=e.setValue,n=(e.config,e.labelYes),o=e.labelNo,i=e.readonly,a=(e.widgetId,e.customProps),l=void 0===a?{}:a,s=l.radioYes||{},u=l.radioNo||{},c=function(e){return r("true"==e.target.value)};return R().createElement(R().Fragment,null,R().createElement("input",Zg({type:"radio",value:!0,checked:!!t,disabled:i,onChange:c},s))," ",n,R().createElement("input",Zg({type:"radio",value:!1,checked:!t,disabled:i,onChange:c},u))," ",o)},wm=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.placeholder,i=e.maxLength,a=e.customProps,l=t||"";return R().createElement("input",Zg({type:"text",value:l,placeholder:o,disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)},maxLength:i},a))},Sm=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.placeholder,i=e.maxLength,a=(e.maxRows,e.fullWidth),l=e.customProps,s=t||"";return R().createElement("textarea",Zg({value:s,placeholder:o,disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)},maxLength:i,style:{width:a?"100%":void 0}},l))};vg.moment;const Em=function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat,e.readonly),o=e.customProps;return R().createElement("input",Zg({type:"date",value:t||"",disabled:n,onChange:function(e){var t=e.target.value;""==t&&(t=void 0),r(t)}},o))},Fm=function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat,e.use12Hours,e.readonly),o=e.customProps;return R().createElement("input",Zg({type:"time",value:t||"",disabled:n,onChange:function(e){var t=e.target.value;""==t&&(t=void 0),r(t)}},o))};var jm=vg.moment;const Lm=function(e){var t,r=e.value,n=e.setValue,o=(e.config,e.valueFormat),i=(e.use12Hours,e.readonly),a=e.customProps;return t=r?jm(r).format("YYYY-MM-DDTHH:mm"):"",R().createElement("input",Zg({type:"datetime-local",value:t,disabled:i,onChange:function(e){var t=e.target.value;t=""==t?void 0:jm(new Date(t)).format(o),n(t)}},a))};var Cm=vg.ListUtils.mapListValues;const Im=function(e){var t=e.listValues,r=e.value,n=e.setValue,o=(e.allowCustomValues,e.readonly),i=e.customProps;return R().createElement("select",Zg({multiple:!0,onChange:function(e){return n(function(e){for(var t=[],r=e.options,n=0;n<r.length;n++){var o=r[n];o.selected&&t.push(o.value)}return t.length||(t=void 0),t}(e.target))},value:r,disabled:o},Mo()(i,["showSearch","input","showCheckboxes"])),Cm(t,(function(e){var t=e.title,r=e.value;return R().createElement("option",{key:r,value:r},t)})))};var km=vg.ListUtils.mapListValues;const xm=function(e){var t=e.listValues,r=e.value,n=e.setValue,o=(e.allowCustomValues,e.readonly),i=e.customProps,a=null!=r;return R().createElement("select",Zg({onChange:function(e){return n(e.target.value)},value:a?r:"",disabled:o},Mo()(i,["showSearch","input"])),!a&&R().createElement("option",{disabled:!0,value:""}),km(t,(function(e){var t=e.title,r=e.value;return R().createElement("option",{key:r,value:r},t)})))},Tm=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.min,i=e.max,a=e.step,l=e.placeholder,s=e.customProps,u=null==t?"":t;return R().createElement("input",Zg({type:"number",value:u,placeholder:l,disabled:n,min:o,max:i,step:a,onChange:function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)}},s))},Rm=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.min,i=e.max,a=e.step,l=e.placeholder,s=e.customProps,u=void 0===s?{}:s,c=u.input||{},p=u.slider||u,d=function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)},f=null==t?"":t;return R().createElement("div",{style:{display:"inline-flex"}},R().createElement("input",Zg({key:"number",type:"number",value:f,placeholder:l,disabled:n,min:o,max:i,step:a,onChange:d},c)),R().createElement("input",Zg({key:"range",type:"range",value:f,disabled:n,min:o,max:i,step:a,onChange:d},p)))},Am=function(e){var t=e.items,r=e.setField,n=e.selectedKey,o=e.readonly,i=e.errorText,a=null!=n;return R().createElement("select",{onChange:function(e){return r(e.target.value)},value:a?n:"",disabled:o,style:{color:i?"red":null}},!a&&R().createElement("option",{disabled:!0,value:""}),function e(t){return t.map((function(t){var r=t.items,n=t.path,o=t.label,i=t.disabled,a=t.matchesType;if(r)return R().createElement("optgroup",{disabled:i,key:n,label:o},e(r));var l=a?{fontWeight:"bold"}:{};return R().createElement("option",{disabled:i,key:n,value:n,style:l},o)}))}(t))},Pm=function(e){var t,r=e.id,n=e.not,o=e.setNot,i=e.conjunctionOptions,a=e.setConjunction,l=e.disabled,s=e.readonly,u=e.config,c=e.showNot,p=e.notLabel,d=Object.keys(i).length,f=l,g=u.settings.forceShowConj||d>1&&!f,v=function(e){return a(e.target.value)};return[c&&(t="not",[R().createElement("input",{key:r+t,type:"checkbox",id:r+t,checked:n,disabled:s,onChange:function(e){return o(e.target.checked)}}),R().createElement("label",{key:r+t+"label",htmlFor:r+t},p||"NOT")]),g&&Object.keys(i).map((function(e){var t=i[e],r=t.id,n=t.name,o=t.label,u=t.checked,c=a.isDummyFn?"__dummy":"";return!s&&!l||u?[R().createElement("input",{key:r+c,type:"radio",id:r+c,name:n+c,checked:u,disabled:s||l,value:e,onChange:v}),R().createElement("label",{key:r+c+"label",htmlFor:r+c},o)]:null}))]};var Nm={addSubRuleSimple:"+",addSubRule:"+",addSubGroup:"+",delGroup:"x",delRuleGroup:"x",delRule:"x"};const Dm=function(e){var t=e.type,r=e.label,n=e.onClick,o=e.readonly,i=r||Nm[t];return R().createElement("button",{onClick:n,type:"button",disabled:o},i)},Vm=function(e){var t=e.type,r={}[t]||null;return r||"drag"!==t||(r=R().createElement(Ev,null)),r},$m=function(e){var t=e.children;return e.config,R().createElement(R().Fragment,null,t)},Mm=function(e){e.config;var t=e.valueSources,r=e.valueSrc,n=(e.title,e.setValueSrc),o=e.readonly;return R().createElement("select",{onChange:function(e){return n(e.target.value)},value:r||"",disabled:o},function(e){return e.map((function(e){var t=$(e,2),r=t[0],n=t[1];return R().createElement("option",{key:r,value:r},n.label)}))}(t))},zm=function(e){var t=e.value,r=e.setValue,n=e.label,o=e.id,i=(e.config,e.type);return[R().createElement("input",{key:o+i,type:"checkbox",id:o+i,checked:!!t,onChange:function(e){return r(e.target.checked)}}),R().createElement("label",{key:o+i+"label",htmlFor:o+i},n)]},qm=function(e){var t=e.onOk,r=(e.okText,e.cancelText,e.title);confirm(r)&&t()};var Wm=function(e){return e.config,e.children};function Bm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bm=function(){return!!e})()}var Um=function(e){function t(){var e,r,n,o;S(this,t);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=this,n=t,o=[].concat(a),n=I(n),(e=C(r,Bm()?Reflect.construct(n,o||[],I(r).constructor):n.apply(r,o))).handleChange=function(t){e.props.setOption("proximity",parseInt(t))},e}return x(t,e),L(t,[{key:"render",value:function(){var e=this.props,t=e.defaults,r=e.options,n=e.config,o=e.optionLabel,i=e.optionPlaceholder,a=e.customProps,l=e.minProximity,s=e.maxProximity,u=e.optionTextBefore,c=e.readonly,p=n.settings,d=n.widgets,f=n.ctx,g=t?t.proximity:void 0,v=p.showLabels,h=r.get("proximity",g),y=Qv()(l,s+1).map((function(e){return{title:e,value:e}})),m=d.select.factory,b=function(e){return m(e,f)};return R().createElement("div",{className:"operator--PROXIMITY"},R().createElement("div",{className:"operator--options"},v&&R().createElement("label",{className:"rule--label"},o),!v&&u&&R().createElement("div",{className:"operator--options--sep"},R().createElement("span",null,u)),R().createElement(b,Zg({config:n,value:h,listValues:y,setValue:this.handleChange,readonly:c,placeholder:i},a))),R().createElement("div",{className:"operator--widgets"},this.props.children))}}])}(T.PureComponent);function Gm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Km(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gm(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Um.propTypes={config:yg().object.isRequired,setOption:yg().func.isRequired,options:yg().any.isRequired,minProximity:yg().number,maxProximity:yg().number,optionPlaceholder:yg().string,optionTextBefore:yg().string,optionLabel:yg().string,customProps:yg().object,readonly:yg().bool},Um.defaultProps={customProps:{},minProximity:2,maxProximity:10,optionPlaceholder:"Select words between",optionLabel:"Words between",optionTextBefore:null};var Hm={conjunctions:Km({},cf.conjunctions),operators:Km(Km({},cf.operators),{},{proximity:Km(Km({},cf.operators.proximity),{},{options:Km(Km({},cf.operators.proximity.options),{},{factory:function(e,t){return(0,t.RCE)(t.O.ProximityOperator,e)}})})}),widgets:{text:Km(Km({},cf.widgets.text),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaTextWidget,e)}}),textarea:Km(Km({},cf.widgets.textarea),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaTextAreaWidget,e)}}),number:Km(Km({},cf.widgets.number),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaNumberWidget,e)}}),slider:Km(Km({},cf.widgets.slider),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaSliderWidget,e)}}),select:Km(Km({},cf.widgets.select),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaSelectWidget,e)}}),multiselect:Km(Km({},cf.widgets.multiselect),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaMultiSelectWidget,e)}}),date:Km(Km({},cf.widgets.date),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaDateWidget,e)}}),time:Km(Km({},cf.widgets.time),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaTimeWidget,e)}}),datetime:Km(Km({},cf.widgets.datetime),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaDateTimeWidget,e)}}),boolean:Km(Km({},cf.widgets.boolean),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaBooleanWidget,e)}}),field:Km(Km({},cf.widgets.field),{},{factory:function(e,t){return(0,t.RCE)(t.W.ValueFieldWidget,e)},customProps:{showSearch:!0}}),func:Km(Km({},cf.widgets.func),{},{factory:function(e,t){return(0,t.RCE)(t.W.FuncWidget,e)},customProps:{}}),case_value:Km(Km({},cf.widgets.case_value),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaTextWidget,e)}})},types:Km(Km({},cf.types),{},{select:Km(Km({},cf.types.select),{},{widgets:Km(Km({},cf.types.select.widgets),{},{select:Km(Km({},cf.types.select.widgets.select),{},{widgetProps:{customProps:{showSearch:!0}}})})})}),settings:Km(Km({},cf.settings),{},{renderField:function(e,t){return(0,t.RCE)(t.W.VanillaFieldSelect,e)},renderOperator:function(e,t){return(0,t.RCE)(t.W.VanillaFieldSelect,e)},renderFunc:function(e,t){return(0,t.RCE)(t.W.VanillaFieldSelect,e)},renderConjs:function(e,t){return(0,t.RCE)(t.W.VanillaConjs,e)},renderSwitch:function(e,t){return(0,t.RCE)(t.W.VanillaSwitch,e)},renderButton:function(e,t){return(0,t.RCE)(t.W.VanillaButton,e)},renderIcon:function(e,t){return(0,t.RCE)(t.W.VanillaIcon,e)},renderButtonGroup:function(e,t){return(0,t.RCE)(t.W.VanillaButtonGroup,e)},renderProvider:function(e,t){return(0,t.RCE)(t.W.VanillaProvider,e)},renderValueSources:function(e,t){return(0,t.RCE)(t.W.VanillaValueSources,e)},renderFieldSources:function(e,t){return(0,t.RCE)(t.W.VanillaValueSources,e)},renderConfirm:function(e,t){return(0,t.W.vanillaConfirm)(e)},renderSwitchPrefix:"IF",renderBeforeCaseValue:function(e,t){return(0,t.RCE)("span",{children:[" then "]})},customFieldSelectProps:{showSearch:!0},customOperatorSelectProps:{},defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5,renderSize:"small",maxLabelsLength:100,showLock:!1,showNot:!0,forceShowConj:!1,groupActionsPosition:"topRight"}),ctx:Km(Km({},cf.ctx),{},{W:Km({},_),O:Km({},w),RCE:function(e,t){return R().createElement(e,t)}})};const Xm=Hm=vg.ConfigMixins.removeMixins(Hm,["rangeslider","treeselect","treemultiselect"]);r(9517);var Jm=vg.Autocomplete,Ym=(Jm.mergeListValues,Jm.listValueToOption,Jm.optionToListValue,Jm.optionsToListValues,Jm.fixListValuesGroupOrder,vg.ListUtils);function Qm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qm(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Ym.mapListValues,Ym.listValuesToArray,Ym.getListValue,Ym.makeCustomListValue,Ym.searchListValue,Ym.getItemInListValues;const eb=Zm(Zm({},vg),{},{ReactUtils:O,DragIcon:Ev})},4221:(e,t,r)=>{"use strict";var n=r(1882),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var r,i,a,l,s,u,c=!1;t||(t={}),r=t.debug||!1;try{if(a=n(),l=document.createRange(),s=document.getSelection(),(u=document.createElement("span")).textContent=e,u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=o[t.format]||o.default;window.clipboardData.setData(i,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(u),l.selectNodeContents(u),s.addRange(l),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");c=!0}catch(n){r&&console.error("unable to copy using execCommand: ",n),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),c=!0}catch(n){r&&console.error("unable to copy using clipboardData: ",n),r&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(l):s.removeAllRanges()),u&&document.body.removeChild(u),a()}return c}},502:function(e,t,r){var n,o;n=function(){"use strict";Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var e={},t={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"<":function(e,t,r){return void 0===r?e<t:e<t&&t<r},"<=":function(e,t,r){return void 0===r?e<=t:e<=t&&t<=r},"!!":function(t){return e.truthy(t)},"!":function(t){return!e.truthy(t)},"%":function(e,t){return e%t},log:function(e){return console.log(e),e},in:function(e,t){return!(!t||void 0===t.indexOf)&&-1!==t.indexOf(e)},cat:function(){return Array.prototype.join.call(arguments,"")},substr:function(e,t,r){if(r<0){var n=String(e).substr(t);return n.substr(0,n.length+r)}return String(e).substr(t,r)},"+":function(){return Array.prototype.reduce.call(arguments,(function(e,t){return parseFloat(e,10)+parseFloat(t,10)}),0)},"*":function(){return Array.prototype.reduce.call(arguments,(function(e,t){return parseFloat(e,10)*parseFloat(t,10)}))},"-":function(e,t){return void 0===t?-e:e-t},"/":function(e,t){return e/t},min:function(){return Math.min.apply(this,arguments)},max:function(){return Math.max.apply(this,arguments)},merge:function(){return Array.prototype.reduce.call(arguments,(function(e,t){return e.concat(t)}),[])},var:function(e,t){var r=void 0===t?null:t,n=this;if(void 0===e||""===e||null===e)return n;for(var o=String(e).split("."),i=0;i<o.length;i++){if(null==n)return r;if(void 0===(n=n[o[i]]))return r}return n},missing:function(){for(var t=[],r=Array.isArray(arguments[0])?arguments[0]:arguments,n=0;n<r.length;n++){var o=r[n],i=e.apply({var:o},this);null!==i&&""!==i||t.push(o)}return t},missing_some:function(t,r){var n=e.apply({missing:r},this);return r.length-n.length>=t?[]:n}};return e.is_logic=function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&1===Object.keys(e).length},e.truthy=function(e){return!(Array.isArray(e)&&0===e.length||!e)},e.get_operator=function(e){return Object.keys(e)[0]},e.get_values=function(t){return t[e.get_operator(t)]},e.apply=function(r,n){if(Array.isArray(r))return r.map((function(t){return e.apply(t,n)}));if(!e.is_logic(r))return r;var o,i,a,l,s,u=e.get_operator(r),c=r[u];if(Array.isArray(c)||(c=[c]),"if"===u||"?:"==u){for(o=0;o<c.length-1;o+=2)if(e.truthy(e.apply(c[o],n)))return e.apply(c[o+1],n);return c.length===o+1?e.apply(c[o],n):null}if("and"===u){for(o=0;o<c.length;o+=1)if(i=e.apply(c[o],n),!e.truthy(i))return i;return i}if("or"===u){for(o=0;o<c.length;o+=1)if(i=e.apply(c[o],n),e.truthy(i))return i;return i}if("filter"===u)return l=e.apply(c[0],n),a=c[1],Array.isArray(l)?l.filter((function(t){return e.truthy(e.apply(a,t))})):[];if("map"===u)return l=e.apply(c[0],n),a=c[1],Array.isArray(l)?l.map((function(t){return e.apply(a,t)})):[];if("reduce"===u)return l=e.apply(c[0],n),a=c[1],s=void 0!==c[2]?c[2]:null,Array.isArray(l)?l.reduce((function(t,r){return e.apply(a,{current:r,accumulator:t})}),s):s;if("all"===u){if(l=e.apply(c[0],n),a=c[1],!Array.isArray(l)||!l.length)return!1;for(o=0;o<l.length;o+=1)if(!e.truthy(e.apply(a,l[o])))return!1;return!0}if("none"===u){if(l=e.apply(c[0],n),a=c[1],!Array.isArray(l)||!l.length)return!0;for(o=0;o<l.length;o+=1)if(e.truthy(e.apply(a,l[o])))return!1;return!0}if("some"===u){if(l=e.apply(c[0],n),a=c[1],!Array.isArray(l)||!l.length)return!1;for(o=0;o<l.length;o+=1)if(e.truthy(e.apply(a,l[o])))return!0;return!1}if(c=c.map((function(t){return e.apply(t,n)})),t.hasOwnProperty(u)&&"function"==typeof t[u])return t[u].apply(n,c);if(u.indexOf(".")>0){var p=String(u).split("."),d=t;for(o=0;o<p.length;o++){if(!d.hasOwnProperty(p[o]))throw new Error("Unrecognized operation "+u+" (failed at "+p.slice(0,o+1).join(".")+")");d=d[p[o]]}return d.apply(n,c)}throw new Error("Unrecognized operation "+u)},e.uses_data=function(t){var r=[];if(e.is_logic(t)){var n=e.get_operator(t),o=t[n];Array.isArray(o)||(o=[o]),"var"===n?r.push(o[0]):o.forEach((function(t){r.push.apply(r,e.uses_data(t))}))}return function(e){for(var t=[],r=0,n=e.length;r<n;r++)-1===t.indexOf(e[r])&&t.push(e[r]);return t}(r)},e.add_operation=function(e,r){t[e]=r},e.rm_operation=function(e){delete t[e]},e.rule_like=function(t,r){if(r===t)return!0;if("@"===r)return!0;if("number"===r)return"number"==typeof t;if("string"===r)return"string"==typeof t;if("array"===r)return Array.isArray(t)&&!e.is_logic(t);if(e.is_logic(r)){if(e.is_logic(t)){var n=e.get_operator(r),o=e.get_operator(t);if("@"===n||n===o)return e.rule_like(e.get_values(t,!1),e.get_values(r,!1))}return!1}if(Array.isArray(r)){if(Array.isArray(t)){if(r.length!==t.length)return!1;for(var i=0;i<r.length;i+=1)if(!e.rule_like(t[i],r[i]))return!1;return!0}return!1}return!1},e},void 0===(o=n.call(t,r,t,e))||(e.exports=o)},9517:(e,t,r)=>{var n=r(7453),o=r(2220),i=r(3662),a=Math.max,l=Math.min;e.exports=function(e,t,r){var s,u,c,p,d,f,g=0,v=!1,h=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var r=s,n=u;return s=u=void 0,g=t,p=e.apply(n,r)}function b(e){var r=e-f;return void 0===f||r>=t||r<0||h&&e-g>=c}function O(){var e=o();if(b(e))return _(e);d=setTimeout(O,function(e){var r=t-(e-f);return h?l(r,c-(e-g)):r}(e))}function _(e){return d=void 0,y&&s?m(e):(s=u=void 0,p)}function w(){var e=o(),r=b(e);if(s=arguments,u=this,f=e,r){if(void 0===d)return function(e){return g=e,d=setTimeout(O,t),v?m(e):p}(f);if(h)return clearTimeout(d),d=setTimeout(O,t),m(f)}return void 0===d&&(d=setTimeout(O,t)),p}return t=i(t)||0,n(r)&&(v=!!r.leading,c=(h="maxWait"in r)?a(i(r.maxWait)||0,t):c,y="trailing"in r?!!r.trailing:y),w.cancel=function(){void 0!==d&&clearTimeout(d),g=0,s=f=u=d=void 0},w.flush=function(){return void 0===d?p:_(o())},w}},2220:(e,t,r)=>{var n=r(9965);e.exports=function(){return n.Date.now()}},5489:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(5959),o=r(9389);function i(e,t){void 0===t&&(t=[]);var r=(0,o.A)(e,t,{loading:!0}),i=r[0],a=r[1];return(0,n.useEffect)((function(){a()}),[a]),i}},9389:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(7150),o=r(5959),i=r(1316);function a(e,t,r){void 0===t&&(t=[]),void 0===r&&(r={loading:!1});var a=(0,o.useRef)(0),l=(0,i.A)(),s=(0,o.useState)(r),u=s[0],c=s[1],p=(0,o.useCallback)((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=++a.current;return u.loading||c((function(e){return(0,n.__assign)((0,n.__assign)({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return l()&&o===a.current&&c({value:e,loading:!1}),e}),(function(e){return l()&&o===a.current&&c({error:e,loading:!1}),e}))}),t);return[u,p]}},4519:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(4221),o=r.n(n),i=r(5959),a=r(1316);const l=function(){var e=(0,a.A)(),t=function(e){void 0===e&&(e={});var t=(0,i.useState)(e),r=t[0],n=t[1];return[r,(0,i.useCallback)((function(e){n((function(t){return Object.assign({},t,e instanceof Function?e(t):e)}))}),[])]}({value:void 0,error:void 0,noUserInteraction:!0}),r=t[0],n=t[1];return[r,(0,i.useCallback)((function(t){var r,i;if(e())try{if("string"!=typeof t&&"number"!=typeof t){var a=new Error("Cannot copy typeof "+typeof t+" to clipboard, must be a string");return void n({value:t,error:a,noUserInteraction:!0})}if(""===t)return a=new Error("Cannot copy empty string to clipboard."),void n({value:t,error:a,noUserInteraction:!0});i=t.toString(),r=o()(i),n({value:i,error:void 0,noUserInteraction:r})}catch(a){n({value:i,error:a,noUserInteraction:r})}}),[])]}},8722:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(5959),o=function(){},i="undefined"!=typeof window;const a=i?n.useLayoutEffect:n.useEffect;var l={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const s=i&&void 0!==window.ResizeObserver?function(){var e=(0,n.useState)(null),t=e[0],r=e[1],o=(0,n.useState)(l),i=o[0],s=o[1],u=(0,n.useMemo)((function(){return new window.ResizeObserver((function(e){if(e[0]){var t=e[0].contentRect,r=t.x,n=t.y,o=t.width,i=t.height,a=t.top,l=t.left,u=t.bottom,c=t.right;s({x:r,y:n,width:o,height:i,top:a,left:l,bottom:u,right:c})}}))}),[]);return a((function(){if(t)return u.observe(t),function(){u.disconnect()}}),[t]),[r,i]}:function(){return[o,l]}},1316:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(5959);function o(){var e=(0,n.useRef)(!1),t=(0,n.useCallback)((function(){return e.current}),[]);return(0,n.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t}},1777:(e,t,r)=>{"use strict";var n=r(7150),o=r(5959),i=n.__importDefault(r(5053));t.A=function(e,t){void 0===t&&(t=[]);var r=i.default(e,t,{loading:!0}),n=r[0],a=r[1];return o.useEffect((function(){a()}),[a]),n}},5053:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7150),o=r(5959),i=n.__importDefault(r(9812));t.default=function(e,t,r){void 0===t&&(t=[]),void 0===r&&(r={loading:!1});var a=o.useRef(0),l=i.default(),s=o.useState(r),u=s[0],c=s[1],p=o.useCallback((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=++a.current;return u.loading||c((function(e){return n.__assign(n.__assign({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return l()&&o===a.current&&c({value:e,loading:!1}),e}),(function(e){return l()&&o===a.current&&c({error:e,loading:!1}),e}))}),t);return[u,p]}},990:(e,t,r)=>{"use strict";var n=r(7150),o=r(5959),i=n.__importDefault(r(1854));t.A=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=[]);var n=i.default(e,t),a=n[0],l=n[1],s=n[2];return o.useEffect(s,r),[a,l]}},9812:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5959);t.default=function(){var e=n.useRef(!1),t=n.useCallback((function(){return e.current}),[]);return n.useEffect((function(){return e.current=!0,function(){e.current=!1}}),[]),t}},1854:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5959);t.default=function(e,t){void 0===t&&(t=0);var r=n.useRef(!1),o=n.useRef(),i=n.useRef(e),a=n.useCallback((function(){return r.current}),[]),l=n.useCallback((function(){r.current=!1,o.current&&clearTimeout(o.current),o.current=setTimeout((function(){r.current=!0,i.current()}),t)}),[t]),s=n.useCallback((function(){r.current=null,o.current&&clearTimeout(o.current)}),[]);return n.useEffect((function(){i.current=e}),[e]),n.useEffect((function(){return l(),s}),[t]),[a,s,l]}},4889:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>p});var n=r(5959);let o;o="undefined"!=typeof window?window:"undefined"!=typeof self?self:r.g;let i=null,a=null;const l=o.clearTimeout,s=o.setTimeout,u=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame,c=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame;null==u||null==c?(i=l,a=function(e){return s(e,20)}):(i=function([e,t]){u(e),l(t)},a=function(e){const t=c((function(){l(r),e()})),r=s((function(){u(t),e()}),20);return[t,r]});class p extends n.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:e,disableWidth:t,onResize:r}=this.props;if(this._parentNode){const n=window.getComputedStyle(this._parentNode)||{},o=parseFloat(n.paddingLeft||"0"),i=parseFloat(n.paddingRight||"0"),a=parseFloat(n.paddingTop||"0"),l=parseFloat(n.paddingBottom||"0"),s=this._parentNode.getBoundingClientRect(),u=s.height-a-l,c=s.width-o-i,p=this._parentNode.offsetHeight-a-l,d=this._parentNode.offsetWidth-o-i;(e||this.state.height===p&&this.state.scaledHeight===u)&&(t||this.state.width===d&&this.state.scaledWidth===c)||(this.setState({height:p,width:d,scaledHeight:u,scaledWidth:c}),"function"==typeof r&&r({height:p,scaledHeight:u,scaledWidth:c,width:d}))}},this._setRef=e=>{this._autoSizer=e}}componentDidMount(){const{nonce:e}=this.props,t=this._autoSizer?this._autoSizer.parentNode:null;if(null!=t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){this._parentNode=t;const r=t.ownerDocument.defaultView.ResizeObserver;null!=r?(this._resizeObserver=new r((()=>{this._timeoutId=setTimeout(this._onResize,0)})),this._resizeObserver.observe(t)):(this._detectElementResize=function(e){let t,r,n,l,s,u,c;const p="undefined"!=typeof document&&document.attachEvent;if(!p){u=function(e){const t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,o=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,o.style.width=r.offsetWidth+1+"px",o.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},s=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},c=function(e){if(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)return;const t=this;u(this),this.__resizeRAF__&&i(this.__resizeRAF__),this.__resizeRAF__=a((function(){s(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(r){r.call(t,e)})))}))};let e=!1,o="";n="animationstart";const p="Webkit Moz O ms".split(" ");let d="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),f="";{const t=document.createElement("fakeelement");if(void 0!==t.style.animationName&&(e=!0),!1===e)for(let r=0;r<p.length;r++)if(void 0!==t.style[p[r]+"AnimationName"]){f=p[r],o="-"+f.toLowerCase()+"-",n=d[r],e=!0;break}}r="resizeanim",t="@"+o+"keyframes "+r+" { from { opacity: 0; } to { opacity: 0; } } ",l=o+"animation: 1ms "+r+"; "}return{addResizeListener:function(i,a){if(p)i.attachEvent("onresize",a);else{if(!i.__resizeTriggers__){const a=i.ownerDocument,s=o.getComputedStyle(i);s&&"static"===s.position&&(i.style.position="relative"),function(r){if(!r.getElementById("detectElementResize")){const n=(t||"")+".resize-triggers { "+(l||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',o=r.head||r.getElementsByTagName("head")[0],i=r.createElement("style");i.id="detectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(r.createTextNode(n)),o.appendChild(i)}}(a),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=a.createElement("div")).className="resize-triggers";const p=a.createElement("div");p.className="expand-trigger",p.appendChild(a.createElement("div"));const d=a.createElement("div");d.className="contract-trigger",i.__resizeTriggers__.appendChild(p),i.__resizeTriggers__.appendChild(d),i.appendChild(i.__resizeTriggers__),u(i),i.addEventListener("scroll",c,!0),n&&(i.__resizeTriggers__.__animationListener__=function(e){e.animationName===r&&u(i)},i.__resizeTriggers__.addEventListener(n,i.__resizeTriggers__.__animationListener__))}i.__resizeListeners__.push(a)}},removeResizeListener:function(e,t){if(p)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",c,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(n,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}(e),this._detectElementResize.addResizeListener(t,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),null!==this._timeoutId&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:e,defaultHeight:t,defaultWidth:r,disableHeight:o=!1,disableWidth:i=!1,doNotBailOutOnEmptyChildren:a=!1,nonce:l,onResize:s,style:u={},tagName:c="div",...p}=this.props,{height:d,scaledHeight:f,scaledWidth:g,width:v}=this.state,h={overflow:"visible"},y={};let m=!1;return o||(0===d&&(m=!0),h.height=0,y.height=d,y.scaledHeight=f),i||(0===v&&(m=!0),h.width=0,y.width=v,y.scaledWidth=g),a&&(m=!1),(0,n.createElement)(c,{ref:this._setRef,style:{...h,...u},...p},!m&&e(y))}}},9264:(e,t,r)=>{const n=Symbol("SemVer ANY");class o{static get ANY(){return n}constructor(e,t){if(t=i(t),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?a[l.COMPARATORLOOSE]:a[l.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return s(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new p(e.value,t).test(this.value):""===e.operator?""===e.value||new p(this.value,t).test(e.semver):!((t=i(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(s(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(s(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=o;const i=r(9547),{safeRe:a,t:l}=r(5750),s=r(4991),u=r(1064),c=r(2327),p=r(2839)},2839:(e,t,r)=>{const n=/\s+/g;class o{constructor(e,t){if(t=a(t),e instanceof o)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new o(e.raw,t);if(e instanceof l)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!y(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&m(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&v)|(this.options.loose&&h))+":"+e,r=i.get(t);if(r)return r;const n=this.options.loose,o=n?c[p.HYPHENRANGELOOSE]:c[p.HYPHENRANGE];e=e.replace(o,k(this.options.includePrerelease)),s("hyphen replace",e),e=e.replace(c[p.COMPARATORTRIM],d),s("comparator trim",e),e=e.replace(c[p.TILDETRIM],f),s("tilde trim",e),e=e.replace(c[p.CARETTRIM],g),s("caret trim",e);let a=e.split(" ").map((e=>O(e,this.options))).join(" ").split(/\s+/).map((e=>I(e,this.options)));n&&(a=a.filter((e=>(s("loose invalid filter",e,this.options),!!e.match(c[p.COMPARATORLOOSE]))))),s("range list",a);const u=new Map,m=a.map((e=>new l(e,this.options)));for(const e of m){if(y(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");const b=[...u.values()];return i.set(t,b),b}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Range is required");return this.set.some((r=>b(r,t)&&e.set.some((e=>b(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(x(this.set[t],e,this.options))return!0;return!1}}e.exports=o;const i=new(r(122)),a=r(9547),l=r(9264),s=r(1064),u=r(2327),{safeRe:c,t:p,comparatorTrimReplace:d,tildeTrimReplace:f,caretTrimReplace:g}=r(5750),{FLAG_INCLUDE_PRERELEASE:v,FLAG_LOOSE:h}=r(2074),y=e=>"<0.0.0-0"===e.value,m=e=>""===e.value,b=(e,t)=>{let r=!0;const n=e.slice();let o=n.pop();for(;r&&n.length;)r=n.every((e=>o.intersects(e,t))),o=n.pop();return r},O=(e,t)=>(s("comp",e,t),e=E(e,t),s("caret",e),e=w(e,t),s("tildes",e),e=j(e,t),s("xrange",e),e=C(e,t),s("stars",e),e),_=e=>!e||"x"===e.toLowerCase()||"*"===e,w=(e,t)=>e.trim().split(/\s+/).map((e=>S(e,t))).join(" "),S=(e,t)=>{const r=t.loose?c[p.TILDELOOSE]:c[p.TILDE];return e.replace(r,((t,r,n,o,i)=>{let a;return s("tilde",e,t,r,n,o,i),_(r)?a="":_(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:_(o)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(s("replaceTilde pr",i),a=`>=${r}.${n}.${o}-${i} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,s("tilde return",a),a}))},E=(e,t)=>e.trim().split(/\s+/).map((e=>F(e,t))).join(" "),F=(e,t)=>{s("caret",e,t);const r=t.loose?c[p.CARETLOOSE]:c[p.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,o,i,a)=>{let l;return s("caret",e,t,r,o,i,a),_(r)?l="":_(o)?l=`>=${r}.0.0${n} <${+r+1}.0.0-0`:_(i)?l="0"===r?`>=${r}.${o}.0${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.0${n} <${+r+1}.0.0-0`:a?(s("replaceCaret pr",a),l="0"===r?"0"===o?`>=${r}.${o}.${i}-${a} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}-${a} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i}-${a} <${+r+1}.0.0-0`):(s("no pr"),l="0"===r?"0"===o?`>=${r}.${o}.${i}${n} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i} <${+r+1}.0.0-0`),s("caret return",l),l}))},j=(e,t)=>(s("replaceXRanges",e,t),e.split(/\s+/).map((e=>L(e,t))).join(" ")),L=(e,t)=>{e=e.trim();const r=t.loose?c[p.XRANGELOOSE]:c[p.XRANGE];return e.replace(r,((r,n,o,i,a,l)=>{s("xRange",e,r,n,o,i,a,l);const u=_(o),c=u||_(i),p=c||_(a),d=p;return"="===n&&d&&(n=""),l=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&d?(c&&(i=0),a=0,">"===n?(n=">=",c?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===n&&(n="<",c?o=+o+1:i=+i+1),"<"===n&&(l="-0"),r=`${n+o}.${i}.${a}${l}`):c?r=`>=${o}.0.0${l} <${+o+1}.0.0-0`:p&&(r=`>=${o}.${i}.0${l} <${o}.${+i+1}.0-0`),s("xRange return",r),r}))},C=(e,t)=>(s("replaceStars",e,t),e.trim().replace(c[p.STAR],"")),I=(e,t)=>(s("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?p.GTE0PRE:p.GTE0],"")),k=e=>(t,r,n,o,i,a,l,s,u,c,p,d)=>`${r=_(n)?"":_(o)?`>=${n}.0.0${e?"-0":""}`:_(i)?`>=${n}.${o}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`} ${s=_(u)?"":_(c)?`<${+u+1}.0.0-0`:_(p)?`<${u}.${+c+1}.0-0`:d?`<=${u}.${c}.${p}-${d}`:e?`<${u}.${c}.${+p+1}-0`:`<=${s}`}`.trim(),x=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(s(e[r].semver),e[r].semver!==l.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},2327:(e,t,r)=>{const n=r(1064),{MAX_LENGTH:o,MAX_SAFE_INTEGER:i}=r(2074),{safeRe:a,t:l}=r(5750),s=r(9547),{compareIdentifiers:u}=r(1427);class c{constructor(e,t){if(t=s(t),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?a[l.LOOSE]:a[l.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],o=e.prerelease[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return u(r,o)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const r=this.build[t],o=e.build[t];if(n("build compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return u(r,o)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=`-${t}`.match(this.options.loose?a[l.PRERELEASELOOSE]:a[l.PRERELEASE]);if(!e||e[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=c},8854:(e,t,r)=>{const n=r(4256);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},4991:(e,t,r)=>{const n=r(1409),o=r(6031),i=r(9308),a=r(3833),l=r(2083),s=r(4624);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return o(e,r,u);case">":return i(e,r,u);case">=":return a(e,r,u);case"<":return l(e,r,u);case"<=":return s(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},362:(e,t,r)=>{const n=r(2327),o=r(4256),{safeRe:i,t:a}=r(5750);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?i[a.COERCERTLFULL]:i[a.COERCERTL];let o;for(;(o=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&o.index+o[0].length===r.index+r[0].length||(r=o),n.lastIndex=o.index+o[1].length+o[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?i[a.COERCEFULL]:i[a.COERCE]);if(null===r)return null;const l=r[2],s=r[3]||"0",u=r[4]||"0",c=t.includePrerelease&&r[5]?`-${r[5]}`:"",p=t.includePrerelease&&r[6]?`+${r[6]}`:"";return o(`${l}.${s}.${u}${c}${p}`,t)}},7565:(e,t,r)=>{const n=r(2327);e.exports=(e,t,r)=>{const o=new n(e,r),i=new n(t,r);return o.compare(i)||o.compareBuild(i)}},5699:(e,t,r)=>{const n=r(3440);e.exports=(e,t)=>n(e,t,!0)},3440:(e,t,r)=>{const n=r(2327);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},4952:(e,t,r)=>{const n=r(4256);e.exports=(e,t)=>{const r=n(e,null,!0),o=n(t,null,!0),i=r.compare(o);if(0===i)return null;const a=i>0,l=a?r:o,s=a?o:r,u=!!l.prerelease.length;if(s.prerelease.length&&!u){if(!s.patch&&!s.minor)return"major";if(0===s.compareMain(l))return s.minor&&!s.patch?"minor":"patch"}const c=u?"pre":"";return r.major!==o.major?c+"major":r.minor!==o.minor?c+"minor":r.patch!==o.patch?c+"patch":"prerelease"}},1409:(e,t,r)=>{const n=r(3440);e.exports=(e,t,r)=>0===n(e,t,r)},9308:(e,t,r)=>{const n=r(3440);e.exports=(e,t,r)=>n(e,t,r)>0},3833:(e,t,r)=>{const n=r(3440);e.exports=(e,t,r)=>n(e,t,r)>=0},2479:(e,t,r)=>{const n=r(2327);e.exports=(e,t,r,o,i)=>{"string"==typeof r&&(i=o,o=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,o,i).version}catch(e){return null}}},2083:(e,t,r)=>{const n=r(3440);e.exports=(e,t,r)=>n(e,t,r)<0},4624:(e,t,r)=>{const n=r(3440);e.exports=(e,t,r)=>n(e,t,r)<=0},1034:(e,t,r)=>{const n=r(2327);e.exports=(e,t)=>new n(e,t).major},9406:(e,t,r)=>{const n=r(2327);e.exports=(e,t)=>new n(e,t).minor},6031:(e,t,r)=>{const n=r(3440);e.exports=(e,t,r)=>0!==n(e,t,r)},4256:(e,t,r)=>{const n=r(2327);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},5229:(e,t,r)=>{const n=r(2327);e.exports=(e,t)=>new n(e,t).patch},6513:(e,t,r)=>{const n=r(4256);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},7618:(e,t,r)=>{const n=r(3440);e.exports=(e,t,r)=>n(t,e,r)},1173:(e,t,r)=>{const n=r(7565);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},3238:(e,t,r)=>{const n=r(2839);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},3559:(e,t,r)=>{const n=r(7565);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},9881:(e,t,r)=>{const n=r(4256);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},3090:(e,t,r)=>{const n=r(5750),o=r(2074),i=r(2327),a=r(1427),l=r(4256),s=r(9881),u=r(8854),c=r(2479),p=r(4952),d=r(1034),f=r(9406),g=r(5229),v=r(6513),h=r(3440),y=r(7618),m=r(5699),b=r(7565),O=r(3559),_=r(1173),w=r(9308),S=r(2083),E=r(1409),F=r(6031),j=r(3833),L=r(4624),C=r(4991),I=r(362),k=r(9264),x=r(2839),T=r(3238),R=r(3327),A=r(6988),P=r(2366),N=r(9834),D=r(4892),V=r(7715),$=r(7379),M=r(110),z=r(284),q=r(8285),W=r(2008);e.exports={parse:l,valid:s,clean:u,inc:c,diff:p,major:d,minor:f,patch:g,prerelease:v,compare:h,rcompare:y,compareLoose:m,compareBuild:b,sort:O,rsort:_,gt:w,lt:S,eq:E,neq:F,gte:j,lte:L,cmp:C,coerce:I,Comparator:k,Range:x,satisfies:T,toComparators:R,maxSatisfying:A,minSatisfying:P,minVersion:N,validRange:D,outside:V,gtr:$,ltr:M,intersects:z,simplifyRange:q,subset:W,SemVer:i,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:o.SEMVER_SPEC_VERSION,RELEASE_TYPES:o.RELEASE_TYPES,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers}},2074:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},1064:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},1427:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),o=t.test(r);return n&&o&&(e=+e,r=+r),e===r?0:n&&!o?-1:o&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},122:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},9547:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},5750:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:o,MAX_LENGTH:i}=r(2074),a=r(1064),l=(t=e.exports={}).re=[],s=t.safeRe=[],u=t.src=[],c=t.t={};let p=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[d,o]],g=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),o=p++;a(e,o,t),c[e]=o,u[o]=t,l[o]=new RegExp(t,r?"g":void 0),s[o]=new RegExp(n,r?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),g("MAINVERSION",`(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${u[c.NUMERICIDENTIFIER]}|${u[c.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${u[c.NUMERICIDENTIFIERLOOSE]}|${u[c.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${u[c.PRERELEASEIDENTIFIER]}(?:\\.${u[c.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${u[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[c.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${d}+`),g("BUILD",`(?:\\+(${u[c.BUILDIDENTIFIER]}(?:\\.${u[c.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${u[c.MAINVERSION]}${u[c.PRERELEASE]}?${u[c.BUILD]}?`),g("FULL",`^${u[c.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${u[c.MAINVERSIONLOOSE]}${u[c.PRERELEASELOOSE]}?${u[c.BUILD]}?`),g("LOOSE",`^${u[c.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${u[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${u[c.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:${u[c.PRERELEASE]})?${u[c.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:${u[c.PRERELEASELOOSE]})?${u[c.BUILD]}?)?)?`),g("XRANGE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),g("COERCE",`${u[c.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",u[c.COERCEPLAIN]+`(?:${u[c.PRERELEASE]})?`+`(?:${u[c.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",u[c.COERCE],!0),g("COERCERTLFULL",u[c.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${u[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${u[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${u[c.LONECARET]}${u[c.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${u[c.LONECARET]}${u[c.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${u[c.GTLT]}\\s*(${u[c.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]}|${u[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${u[c.XRANGEPLAIN]})\\s+-\\s+(${u[c.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${u[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[c.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},7379:(e,t,r)=>{const n=r(7715);e.exports=(e,t,r)=>n(e,t,">",r)},284:(e,t,r)=>{const n=r(2839);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},110:(e,t,r)=>{const n=r(7715);e.exports=(e,t,r)=>n(e,t,"<",r)},6988:(e,t,r)=>{const n=r(2327),o=r(2839);e.exports=(e,t,r)=>{let i=null,a=null,l=null;try{l=new o(t,r)}catch(e){return null}return e.forEach((e=>{l.test(e)&&(i&&-1!==a.compare(e)||(i=e,a=new n(i,r)))})),i}},2366:(e,t,r)=>{const n=r(2327),o=r(2839);e.exports=(e,t,r)=>{let i=null,a=null,l=null;try{l=new o(t,r)}catch(e){return null}return e.forEach((e=>{l.test(e)&&(i&&1!==a.compare(e)||(i=e,a=new n(i,r)))})),i}},9834:(e,t,r)=>{const n=r(2327),o=r(2839),i=r(9308);e.exports=(e,t)=>{e=new o(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const o=e.set[t];let a=null;o.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":a&&!i(t,a)||(a=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!a||r&&!i(r,a)||(r=a)}return r&&e.test(r)?r:null}},7715:(e,t,r)=>{const n=r(2327),o=r(9264),{ANY:i}=o,a=r(2839),l=r(3238),s=r(9308),u=r(2083),c=r(4624),p=r(3833);e.exports=(e,t,r,d)=>{let f,g,v,h,y;switch(e=new n(e,d),t=new a(t,d),r){case">":f=s,g=c,v=u,h=">",y=">=";break;case"<":f=u,g=p,v=s,h="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(l(e,t,d))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let a=null,l=null;if(n.forEach((e=>{e.semver===i&&(e=new o(">=0.0.0")),a=a||e,l=l||e,f(e.semver,a.semver,d)?a=e:v(e.semver,l.semver,d)&&(l=e)})),a.operator===h||a.operator===y)return!1;if((!l.operator||l.operator===h)&&g(e,l.semver))return!1;if(l.operator===y&&v(e,l.semver))return!1}return!0}},8285:(e,t,r)=>{const n=r(3238),o=r(3440);e.exports=(e,t,r)=>{const i=[];let a=null,l=null;const s=e.sort(((e,t)=>o(e,t,r)));for(const e of s)n(e,t,r)?(l=e,a||(a=e)):(l&&i.push([a,l]),l=null,a=null);a&&i.push([a,null]);const u=[];for(const[e,t]of i)e===t?u.push(e):t||e!==s[0]?t?e===s[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),p="string"==typeof t.raw?t.raw:String(t);return c.length<p.length?c:t}},2008:(e,t,r)=>{const n=r(2839),o=r(9264),{ANY:i}=o,a=r(3238),l=r(3440),s=[new o(">=0.0.0-0")],u=[new o(">=0.0.0")],c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?s:u}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=u}const n=new Set;let o,c,f,g,v,h,y;for(const t of e)">"===t.operator||">="===t.operator?o=p(o,t,r):"<"===t.operator||"<="===t.operator?c=d(c,t,r):n.add(t.semver);if(n.size>1)return null;if(o&&c){if(f=l(o.semver,c.semver,r),f>0)return null;if(0===f&&(">="!==o.operator||"<="!==c.operator))return null}for(const e of n){if(o&&!a(e,String(o),r))return null;if(c&&!a(e,String(c),r))return null;for(const n of t)if(!a(e,String(n),r))return!1;return!0}let m=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver,b=!(!o||r.includePrerelease||!o.semver.prerelease.length)&&o.semver;m&&1===m.prerelease.length&&"<"===c.operator&&0===m.prerelease[0]&&(m=!1);for(const e of t){if(y=y||">"===e.operator||">="===e.operator,h=h||"<"===e.operator||"<="===e.operator,o)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),">"===e.operator||">="===e.operator){if(g=p(o,e,r),g===e&&g!==o)return!1}else if(">="===o.operator&&!a(o.semver,String(e),r))return!1;if(c)if(m&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===m.major&&e.semver.minor===m.minor&&e.semver.patch===m.patch&&(m=!1),"<"===e.operator||"<="===e.operator){if(v=d(c,e,r),v===e&&v!==c)return!1}else if("<="===c.operator&&!a(c.semver,String(e),r))return!1;if(!e.operator&&(c||o)&&0!==f)return!1}return!(o&&h&&!c&&0!==f||c&&y&&!o&&0!==f||b||m)},p=(e,t,r)=>{if(!e)return t;const n=l(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},d=(e,t,r)=>{if(!e)return t;const n=l(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let o=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(o=o||null!==t,t)continue e}if(o)return!1}return!0}},3327:(e,t,r)=>{const n=r(2839);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},4892:(e,t,r)=>{const n=r(2839);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},1882:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],n=0;n<e.rangeCount;n++)r.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||r.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},2827:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(6089),o=r(5959),i=(r(7781),r(2007));const a=({className:e,...t})=>{const r=(0,i.useStyles2)(l);return o.createElement(i.Button,{...t,className:(0,n.cx)(e,r.button)})},l=e=>({button:(0,n.css)({paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)})})},4326:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(6089),o=r(5959),i=(r(7781),r(2007));const a=e=>{var t;const{label:r,optional:n,tooltip:a,tooltipInteractive:s,children:u,width:c,...p}=e,d=(0,i.useStyles2)(l,c),f=(null==p?void 0:p.htmlFor)||(null==(t=i.ReactUtils)?void 0:t.getChildId(u)),g=o.createElement(o.Fragment,null,o.createElement("label",{className:d.label,htmlFor:f},r,n&&o.createElement("span",{className:d.optional}," - optional"),a&&o.createElement(i.Tooltip,{placement:"top",content:a,theme:"info",interactive:s},o.createElement(i.Icon,{tabIndex:0,name:"info-circle",size:"sm",className:d.icon}))),o.createElement(i.Space,{v:.5}));return o.createElement("div",{className:d.root},o.createElement(i.Field,{className:d.field,label:g,...p},u))},l=(e,t)=>({root:(0,n.css)({minWidth:e.spacing(null!=t?t:0)}),label:(0,n.css)({fontSize:12,fontWeight:e.typography.fontWeightMedium}),optional:(0,n.css)({fontStyle:"italic",color:e.colors.text.secondary}),field:(0,n.css)({marginBottom:0}),icon:(0,n.css)({color:e.colors.text.secondary,marginLeft:e.spacing(1),":hover":{color:e.colors.text.primary}})})},45:(e,t,r)=>{"use strict";r.d(t,{X:()=>a});var n=r(6089),o=r(5959),i=(r(7781),r(2007));const a=({children:e})=>{const t=(0,i.useStyles2)(l);return o.createElement("div",{className:t.root},e)},l=e=>({root:(0,n.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:e.spacing(3),minHeight:e.spacing(4)})})},7088:(e,t,r)=>{"use strict";r.d(t,{o:()=>a});var n=r(2007),o=r(5959),i=r(5910);const a=o.forwardRef((function({items:e,renderItem:t,onChange:r},a){return o.createElement(i.C,null,e.map(((n,i)=>o.createElement("div",{key:i},t(n,(t=>((t,n)=>{const o=[...e];o[t]=n,r(o)})(i,t)),(()=>(t=>{const n=[...e];n.splice(t,1),r(n)})(i)))))),o.createElement(n.Button,{ref:a,onClick:()=>{const t=[...e,{}];r(t)},variant:"secondary",size:"md",icon:"plus","aria-label":"Add",type:"button"}))}))},8442:(e,t,r)=>{"use strict";r.d(t,{U:()=>l});var n=r(6089),o=r(5959),i=(r(7781),r(2007)),a=r(5910);const l=({children:e})=>{const t=(0,i.useStyles2)(s);return o.createElement("div",{className:t.root},o.createElement(a.C,{gap:2},e))},s=e=>({root:(0,n.css)({padding:e.spacing(1),backgroundColor:e.colors.background.secondary,borderRadius:e.shape.radius.default})})},3769:(e,t,r)=>{"use strict";r.d(t,{D:()=>i});var n=r(5959),o=r(5910);const i=({children:e})=>n.createElement(o.C,{gap:.5,direction:"column"},e)},2961:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(5959);const o=({grow:e,shrink:t})=>n.createElement("div",{style:{display:"block",flexGrow:e,flexShrink:t}})},4364:(e,t,r)=>{"use strict";r.d(t,{W:()=>a});var n=r(6089),o=r(5959),i=(r(7781),r(2007));function a({label:e,...t}){const[r]=(0,o.useState)((()=>Math.random().toString(16).slice(2))),n=(0,i.useStyles2)(u),a={SelectContainer:l,ValueContainer:s,SingleValue:s};return o.createElement("div",{className:n.root},e&&o.createElement("label",{className:n.label,htmlFor:r},e,":",""),o.createElement(i.Select,{openMenuOnFocus:!0,inputId:r,...t,components:a}))}const l=e=>{const{children:t}=e,r=(0,i.useStyles2)(u);return o.createElement(i.SelectContainer,{...e,className:(0,n.cx)(e.className,r.container)},t)},s=e=>{const{className:t,children:r}=e,a=(0,i.useStyles2)(u);return o.createElement("div",{className:(0,n.cx)(t,a.valueContainer)},r)},u=e=>({root:(0,n.css)({display:"flex",fontSize:12,alignItems:"center"}),label:(0,n.css)({color:e.colors.text.secondary,whiteSpace:"nowrap"}),container:(0,n.css)({background:"none",borderColor:"transparent"}),valueContainer:(0,n.css)({display:"flex",alignItems:"center",flex:"initial",color:e.colors.text.secondary,fontSize:12})})},258:(e,t,r)=>{"use strict";r.d(t,{M:()=>a});var n=r(6089),o=r(2007),i=r(5959);const a=({children:e})=>{const t=(0,o.useStyles2)(s),r=i.Children.map(e,(e=>(0,i.isValidElement)(e)&&e.props.invalid?(0,i.cloneElement)(e,{className:(0,n.cx)(e.props.className,t.invalidChild)}):e));return i.createElement("div",{className:t.root},r)},l=["","base","hovered","invalid","focused"],s=()=>({root:(0,n.css)({display:"flex","> *":{"&:not(:first-child)":{marginLeft:-1},"&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:first-child):not(:last-child)":{borderRadius:0},position:"relative",zIndex:l.indexOf("base"),"&:hover":{zIndex:l.indexOf("hovered")},"&:focus-within":{zIndex:l.indexOf("focused")}}}),invalidChild:(0,n.css)({zIndex:l.indexOf("invalid")})})},7893:(e,t,r)=>{"use strict";r.d(t,{Y:()=>R});var n=r(2007),o=r(5959),i=r(8056),a=r(7781);const l=(e,t,r={})=>({label:e,insertText:e,kind:i.Io.Field,sortText:i.mY.Medium,range:t,...r}),s=()=>[{id:i.X7.SelectKeyword,name:i.X7.SelectKeyword,kind:[i.ng.SelectKeyword]},{id:i.X7.WithKeyword,name:i.X7.WithKeyword,kind:[i.ng.WithKeyword]},{id:i.X7.AfterSelectKeyword,name:i.X7.AfterSelectKeyword,kind:[i.ng.StarWildCard,i.ng.FunctionsWithArguments,i.ng.Columns,i.ng.SelectMacro]},{id:i.X7.AfterSelectFuncFirstArgument,name:i.X7.AfterSelectFuncFirstArgument,kind:[i.ng.Columns]},{id:i.X7.AfterGroupByFunctionArgument,name:i.X7.AfterGroupByFunctionArgument,kind:[i.ng.Columns]},{id:i.X7.AfterWhereFunctionArgument,name:i.X7.AfterWhereFunctionArgument,kind:[i.ng.Columns]},{id:i.X7.AfterSelectArguments,name:i.X7.AfterSelectArguments,kind:[i.ng.Columns]},{id:i.X7.AfterFromKeyword,name:i.X7.AfterFromKeyword,kind:[i.ng.Schemas,i.ng.Tables,i.ng.TableMacro]},{id:i.X7.AfterSchema,name:i.X7.AfterSchema,kind:[i.ng.Tables,i.ng.TableMacro]},{id:i.X7.SelectAlias,name:i.X7.SelectAlias,kind:[i.ng.Columns,i.ng.FunctionsWithArguments]},{id:i.X7.FromKeyword,name:i.X7.FromKeyword,kind:[i.ng.FromKeyword]},{id:i.X7.AfterFrom,name:i.X7.AfterFrom,kind:[i.ng.WhereKeyword,i.ng.GroupByKeywords,i.ng.OrderByKeywords,i.ng.LimitKeyword]},{id:i.X7.AfterTable,name:i.X7.AfterTable,kind:[i.ng.WhereKeyword,i.ng.GroupByKeywords,i.ng.OrderByKeywords,i.ng.LimitKeyword]},{id:i.X7.WhereKeyword,name:i.X7.WhereKeyword,kind:[i.ng.Columns,i.ng.FilterMacro,i.ng.TemplateVariables]},{id:i.X7.WhereComparisonOperator,name:i.X7.WhereComparisonOperator,kind:[i.ng.ComparisonOperators]},{id:i.X7.WhereValue,name:i.X7.WhereValue,kind:[i.ng.FilterMacro,i.ng.TemplateVariables]},{id:i.X7.AfterWhereValue,name:i.X7.AfterWhereValue,kind:[i.ng.LogicalOperators,i.ng.GroupByKeywords,i.ng.OrderByKeywords,i.ng.LimitKeyword,i.ng.Columns,i.ng.TemplateVariables]},{id:i.X7.AfterGroupByKeywords,name:i.X7.AfterGroupByKeywords,kind:[i.ng.GroupMacro,i.ng.Columns]},{id:i.X7.AfterGroupBy,name:i.X7.AfterGroupBy,kind:[i.ng.OrderByKeywords,i.ng.LimitKeyword]},{id:i.X7.AfterOrderByKeywords,name:i.X7.AfterOrderByKeywords,kind:[i.ng.Columns]},{id:i.X7.AfterOrderByFunction,name:i.X7.AfterOrderByFunction,kind:[i.ng.SortOrderDirectionKeyword,i.ng.LimitKeyword]},{id:i.X7.AfterOrderByDirection,name:i.X7.AfterOrderByDirection,kind:[i.ng.LimitKeyword]},{id:i.X7.AfterIsOperator,name:i.X7.AfterOrderByDirection,kind:[i.ng.NotKeyword,i.ng.NullValue,i.ng.BoolValues]},{id:i.X7.AfterIsNotOperator,name:i.X7.AfterOrderByDirection,kind:[i.ng.NullValue,i.ng.BoolValues]}];class u{constructor(e,t,r,n,o){this.type=e,this.value=t,this.range=r,this.previous=n,this.next=o}isKeyword(){return this.type===i.ks.Keyword}isWhiteSpace(){return this.type===i.ks.Whitespace}isParenthesis(){return this.type===i.ks.Parenthesis}isIdentifier(){return this.type===i.ks.Identifier}isString(){return this.type===i.ks.String}isNumber(){return this.type===i.ks.Number}isDoubleQuotedString(){return this.type===i.ks.Type}isVariable(){return this.type===i.ks.Variable}isFunction(){return this.type===i.ks.Function}isOperator(){return this.type===i.ks.Operator}isTemplateVariable(){return this.type===i.ks.Variable}is(e,t){const r=this.type===e;return void 0!==t?r&&c(e,this,t):r}getPreviousNonWhiteSpaceToken(){let e=this.previous;for(;null!=e;){if(!e.isWhiteSpace())return e;e=e.previous}return null}getPreviousOfType(e,t){let r=this.previous;for(;null!=r;){const n=r.type===e;if(void 0!==t?n&&c(e,r,t):n)return r;r=r.previous}return null}getPreviousUntil(e,t,r){let n=[],o=this.previous;for(;null!=o;){if(t.some((e=>e===(null==o?void 0:o.type)))){o=o.previous;continue}const i=o.type===e;if(void 0!==r?i&&c(e,o,r):i)return n;o.isWhiteSpace()||n.push(o),o=o.previous}return n}getNextUntil(e,t,r){let n=[],o=this.next;for(;null!=o;){if(t.some((e=>e===(null==o?void 0:o.type)))){o=o.next;continue}const i=o.type===e;if(void 0!==r?i&&c(e,o,r):i)return n;o.isWhiteSpace()||n.push(o),o=o.next}return n}getPreviousKeyword(){let e=this.previous;for(;null!=e;){if(e.isKeyword())return e;e=e.previous}return null}getNextNonWhiteSpaceToken(){let e=this.next;for(;null!=e;){if(!e.isWhiteSpace())return e;e=e.next}return null}getNextOfType(e,t){let r=this.next;for(;null!=r;){const n=r.type===e;if(void 0!==t?n&&c(e,r,t):n)return r;r=r.next}return null}}function c(e,t,r){return e===i.ks.Keyword||e===i.ks.Operator?t.value.toLowerCase()===r.toString().toLowerCase():t.value===r}const p="select",d="from",f="where",g="group",v="order",h="by",y="desc",m="asc",b="with",O=e=>{var t;const r=(e=>{const t=(e=>{var t;return null!=(t=null==e?void 0:e.getPreviousOfType(i.ks.Keyword,p))?t:null})(e);return null==t?void 0:t.getNextOfType(i.ks.Keyword,d)})(e),n=null==r?void 0:r.getNextNonWhiteSpaceToken();return(null==n?void 0:n.isVariable())||(null==n?void 0:n.isKeyword())&&(null==(t=n.next)?void 0:t.is(i.ks.Parenthesis,"("))?null:n},_=e=>{const t=null==e?void 0:e.value.split(".");return 1===(null==t?void 0:t.length)?{table:t[0]}:2===(null==t?void 0:t.length)?{schema:t[0],table:t[1]}:null},w={id:"editor.action.triggerSuggest",title:""};var S=r(6373),E=r(8531);function F(e){return{label:e.name,insertText:`${"\\"+e.text}${t=e.args,t?"(".concat(t.map(((e,t)=>`\${${t}:${e}}`)).join(", ")).concat(")"):"()"} `,insertTextRules:i._E.InsertAsSnippet,kind:i.Io.Snippet,documentation:e.description,command:w};var t}function j(){return[{id:i.X7.SelectKeyword,name:i.X7.SelectKeyword,resolve:(e,t,r,n)=>Boolean(null===e||e.isWhiteSpace()&&null===e.previous||e.is(i.ks.Keyword,p)||e.is(i.ks.Keyword,p)&&null===e.previous||n||e.isIdentifier()&&(n||null===(null==e?void 0:e.previous))||e.isIdentifier()&&p.startsWith(e.value.toLowerCase()))},{id:i.X7.WithKeyword,name:i.X7.WithKeyword,resolve:(e,t,r,n)=>Boolean(null===e||e.isWhiteSpace()&&null===e.previous||e.is(i.ks.Keyword,b)&&null===e.previous||e.isIdentifier()&&b.toLowerCase().startsWith(e.value.toLowerCase()))},{id:i.X7.AfterSelectKeyword,name:i.X7.AfterSelectKeyword,resolve:(e,t,r,n)=>Boolean((null==r?void 0:r.value.toLowerCase())===p)},{id:i.X7.AfterSelectArguments,name:i.X7.AfterSelectArguments,resolve:(e,t,r,n)=>Boolean((null==t?void 0:t.value.toLowerCase())===p&&","===(null==r?void 0:r.value))},{id:i.X7.AfterSelectFuncFirstArgument,name:i.X7.AfterSelectFuncFirstArgument,resolve:(e,t,r,n)=>Boolean(((null==t?void 0:t.value.toLowerCase())===p||"as"===(null==t?void 0:t.value.toLowerCase()))&&((null==r?void 0:r.is(i.ks.Parenthesis,"("))||(null==e?void 0:e.is(i.ks.Parenthesis,"()"))))},{id:i.X7.AfterWhereFunctionArgument,name:i.X7.AfterWhereFunctionArgument,resolve:(e,t,r,n)=>Boolean((null==t?void 0:t.is(i.ks.Keyword,f))&&((null==r?void 0:r.is(i.ks.Parenthesis,"("))||(null==e?void 0:e.is(i.ks.Parenthesis,"()"))))},{id:i.X7.AfterGroupBy,name:i.X7.AfterGroupBy,resolve:(e,t,r,n)=>{var o;return Boolean((null==t?void 0:t.is(i.ks.Keyword,h))&&(null==(o=null==t?void 0:t.getPreviousKeyword())?void 0:o.is(i.ks.Keyword,g))&&((null==r?void 0:r.isIdentifier())||(null==r?void 0:r.isDoubleQuotedString())||(null==r?void 0:r.is(i.ks.Parenthesis,")"))||(null==r?void 0:r.is(i.ks.Parenthesis,"()"))))}},{id:i.X7.SelectAlias,name:i.X7.SelectAlias,resolve:(e,t,r,n)=>","===(null==r?void 0:r.value)&&"as"===(null==t?void 0:t.value.toLowerCase())},{id:i.X7.FromKeyword,name:i.X7.FromKeyword,resolve:(e,t,r,n)=>Boolean((null==t?void 0:t.value.toLowerCase())===p&&","!==(null==r?void 0:r.value)||((null==e?void 0:e.isKeyword())||(null==e?void 0:e.isIdentifier()))&&d.toLowerCase().startsWith(e.value.toLowerCase()))},{id:i.X7.AfterFromKeyword,name:i.X7.AfterFromKeyword,resolve:(e,t,r,n)=>Boolean(!(null==e?void 0:e.value.includes("."))&&(null==r?void 0:r.value.toLowerCase())===d)},{id:i.X7.AfterSchema,name:i.X7.AfterSchema,resolve:(e,t,r,n)=>((null==e?void 0:e.isWhiteSpace())&&(null==e?void 0:e.next)&&(r=(e=null==e?void 0:e.previous).getPreviousNonWhiteSpaceToken()),Boolean((null==e?void 0:e.isIdentifier())&&(null==e?void 0:e.value.endsWith("."))&&(null==r?void 0:r.value.toLowerCase())===d))},{id:i.X7.AfterFrom,name:i.X7.AfterFrom,resolve:(e,t,r,n)=>Boolean((null==t?void 0:t.value.toLowerCase())===d&&(null==r?void 0:r.isDoubleQuotedString())||(null==t?void 0:t.value.toLowerCase())===d&&(null==r?void 0:r.isIdentifier())||(null==t?void 0:t.value.toLowerCase())===d&&(null==r?void 0:r.isVariable()))},{id:i.X7.AfterTable,name:i.X7.AfterTable,resolve:(e,t,r,n)=>Boolean((null==t?void 0:t.value.toLowerCase())===d&&((null==r?void 0:r.isVariable())||""!==(null==r?void 0:r.value)&&(null==r?void 0:r.value.toLowerCase())!==d))},{id:i.X7.WhereKeyword,name:i.X7.WhereKeyword,resolve:(e,t,r,n)=>Boolean((null==t?void 0:t.value.toLowerCase())===f&&((null==r?void 0:r.isKeyword())||(null==r?void 0:r.is(i.ks.Parenthesis,"("))||(null==r?void 0:r.is(i.ks.Operator,"AND"))))},{id:i.X7.WhereComparisonOperator,name:i.X7.WhereComparisonOperator,resolve:(e,t,r,n)=>{var o;return Boolean((null==t?void 0:t.value.toLowerCase())===f&&!(null==(o=null==r?void 0:r.getPreviousNonWhiteSpaceToken())?void 0:o.isOperator())&&!(null==e?void 0:e.is(i.ks.Delimiter,"."))&&!(null==e?void 0:e.isParenthesis())&&((null==r?void 0:r.isIdentifier())||(null==r?void 0:r.isDoubleQuotedString())))}},{id:i.X7.WhereValue,name:i.X7.WhereValue,resolve:(e,t,r,n)=>Boolean((null==t?void 0:t.value.toLowerCase())===f&&(null==r?void 0:r.isOperator()))},{id:i.X7.AfterWhereValue,name:i.X7.AfterWhereValue,resolve:(e,t,r,n)=>{var o,a,l;return Boolean((null==t?void 0:t.value.toLowerCase())===f&&((null==r?void 0:r.is(i.ks.Operator,"and"))||(null==r?void 0:r.is(i.ks.Operator,"or"))||(null==r?void 0:r.isString())||(null==r?void 0:r.isNumber())||(null==r?void 0:r.is(i.ks.Parenthesis,")"))||(null==r?void 0:r.is(i.ks.Parenthesis,"()"))||(null==r?void 0:r.isTemplateVariable())||(null==r?void 0:r.is(i.ks.IdentifierQuote))&&(null==(o=r.getPreviousNonWhiteSpaceToken())?void 0:o.is(i.ks.Identifier))&&(null==(l=null==(a=null==r?void 0:r.getPreviousNonWhiteSpaceToken())?void 0:a.getPreviousNonWhiteSpaceToken())?void 0:l.is(i.ks.IdentifierQuote))))}},{id:i.X7.AfterGroupByKeywords,name:i.X7.AfterGroupByKeywords,resolve:(e,t,r,n)=>{var o;return Boolean((null==t?void 0:t.is(i.ks.Keyword,h))&&(null==(o=null==t?void 0:t.getPreviousKeyword())?void 0:o.is(i.ks.Keyword,g))&&((null==r?void 0:r.is(i.ks.Keyword,h))||(null==r?void 0:r.is(i.ks.Delimiter,","))))}},{id:i.X7.AfterGroupByFunctionArgument,name:i.X7.AfterGroupByFunctionArgument,resolve:(e,t,r,n)=>{var o;return Boolean((null==t?void 0:t.is(i.ks.Keyword,h))&&(null==(o=null==t?void 0:t.getPreviousKeyword())?void 0:o.is(i.ks.Keyword,g))&&((null==r?void 0:r.is(i.ks.Parenthesis,"("))||(null==e?void 0:e.is(i.ks.Parenthesis,"()"))))}},{id:i.X7.AfterOrderByKeywords,name:i.X7.AfterOrderByKeywords,resolve:(e,t,r,n)=>{var o;return Boolean((null==r?void 0:r.is(i.ks.Keyword,h))&&(null==(o=null==r?void 0:r.getPreviousKeyword())?void 0:o.is(i.ks.Keyword,v)))}},{id:i.X7.AfterOrderByFunction,name:i.X7.AfterOrderByFunction,resolve:(e,t,r,n)=>{var o,a;return Boolean((null==t?void 0:t.is(i.ks.Keyword,h))&&(null==(o=null==t?void 0:t.getPreviousKeyword())?void 0:o.is(i.ks.Keyword,v))&&(null==r?void 0:r.is(i.ks.Parenthesis))&&(null==(a=null==r?void 0:r.getPreviousNonWhiteSpaceToken())?void 0:a.is(i.ks.Function)))}},{id:i.X7.AfterOrderByDirection,name:i.X7.AfterOrderByDirection,resolve:(e,t,r,n)=>Boolean((null==t?void 0:t.is(i.ks.Keyword,y))||(null==t?void 0:t.is(i.ks.Keyword,m)))},{id:i.X7.AfterIsOperator,name:i.X7.AfterIsOperator,resolve:(e,t,r,n)=>Boolean(null==r?void 0:r.is(i.ks.Operator,"IS"))},{id:i.X7.AfterIsNotOperator,name:i.X7.AfterIsNotOperator,resolve:(e,t,r,n)=>{var o;return Boolean((null==r?void 0:r.is(i.ks.Operator,"NOT"))&&(null==(o=r.getPreviousNonWhiteSpaceToken())?void 0:o.is(i.ks.Operator,"IS")))}}]}let L={logger:()=>{}},C=()=>{};n.attachDebugger&&n.createLogger&&(L=(0,n.createLogger)("SQLEditor"),C=L.logger,(0,n.attachDebugger)("sqleditor",void 0,L));var I=r(3247);const k={id:"standardSql",extensions:[".sql"],aliases:["sql"],mimetypes:[],loader:()=>require("./language"),completionProvider:I.N},x=new Map,T=new Map,R=({children:e,onBlur:t,onChange:r,query:i,language:a={id:"sql"},width:l,height:s})=>{const u=(0,o.useRef)(null),c=(0,o.useRef)(),p=(0,o.useMemo)((()=>{const e=(0,S.A)(),t=`${a.id}-${e}`;return c.current=t,t}),[a.id]);(0,o.useEffect)((()=>()=>{c.current&&T.delete(c.current),C(`Removing instance cache ${c.current}`,!1,T)}),[]);const d=(0,o.useCallback)((()=>{u.current&&u.current.getAction("editor.action.formatDocument").run()}),[]);return o.createElement("div",{style:{width:l}},o.createElement(n.CodeEditor,{height:s||"240px",width:l?l-2+"px":void 0,language:p,value:i,onBlur:e=>{r&&r(e,!1),t&&t(e)},showMiniMap:!1,showLineNumbers:!0,onEditorDidMount:(e,t)=>{u.current=e,e.onDidChangeModelContent((t=>{const n=e.getValue();r&&r(n,!1)})),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.Enter,(()=>{const t=e.getValue();r&&r(t,!0)})),e.onKeyUp((t=>{84===t.keyCode&&e.trigger(w.id,w.id,{})})),A(t,a,p)}}),e&&e({formatQuery:d}))},A=async(e,t,r)=>{const n=((e,t)=>{if("sql"!==(null==t?void 0:t.id)&&!t.loader){C(`Loading language '${null==t?void 0:t.id}' from Monaco registry`,!1);const r=e.languages.getLanguages().find((({id:e})=>e===(null==t?void 0:t.id)));if(!r)throw Error(`Unknown Monaco language ${null==t?void 0:t.id}`);return{completionProvider:I.N,...r,...t}}return{...k,...t}})(e,t);if(!n.loader)return;const{language:o,conf:c}=await n.loader(e);if(e.languages.register({id:r}),e.languages.setMonarchTokensProvider(r,{...o}),e.languages.setLanguageConfiguration(r,{...c}),n.formatter&&e.languages.registerDocumentFormattingEditProvider(r,{provideDocumentFormattingEdits:e=>{var r;const n=null==(r=t.formatter)?void 0:r.call(t,e.getValue());return[{range:e.getFullModelRange(),text:n||""}]}}),n.completionProvider){const c=n.completionProvider(e,o);!function(e,t,r){var n;x.has(e)||function(e){x.has(e)||x.set(e,{functions:new a.Registry,operators:new a.Registry,suggestionKinds:new a.Registry(s),positionResolvers:new a.Registry(j),macros:new a.Registry}),x.get(e)}(e);const o=x.get(e);var l,u,c;T.has(t)||T.set(t,new a.Registry((l=o.functions,u=o.operators,c=o.macros,()=>[{id:i.ng.SelectKeyword,name:i.ng.SelectKeyword,suggestions:(e,t)=>Promise.resolve([{label:"SELECT <column>",insertText:"SELECT $0",insertTextRules:i._E.InsertAsSnippet,kind:i.Io.Snippet,command:w,sortText:i.mY.Medium},{label:"SELECT <column> FROM <table>",insertText:"SELECT $2 FROM $1",insertTextRules:i._E.InsertAsSnippet,kind:i.Io.Snippet,command:w,sortText:i.mY.Medium}])},{id:i.ng.TemplateVariables,name:i.ng.TemplateVariables,suggestions:(e,t)=>{const r=(0,E.getTemplateSrv)();return r?Promise.resolve(r.getVariables().map((e=>{const t=`$${e.name}`,n=r.replace(t);return{label:t,detail:`(Template Variable) ${n}`,kind:i.Io.Snippet,documentation:`(Template Variable) ${n}`,insertText:`\\$${e.name} `,insertTextRules:i._E.InsertAsSnippet,command:w,sortText:i.mY.Low}}))):Promise.resolve([])}},{id:i.ng.SelectMacro,name:i.ng.SelectMacro,suggestions:(e,t)=>Promise.resolve([...c.list().filter((e=>e.type===i.hh.Value||e.type===i.hh.Column)).map(F)])},{id:i.ng.TableMacro,name:i.ng.TableMacro,suggestions:(e,t)=>Promise.resolve([...c.list().filter((e=>e.type===i.hh.Table)).map(F)])},{id:i.ng.GroupMacro,name:i.ng.GroupMacro,suggestions:(e,t)=>Promise.resolve([...c.list().filter((e=>e.type===i.hh.Group)).map(F)])},{id:i.ng.FilterMacro,name:i.ng.FilterMacro,suggestions:(e,t)=>Promise.resolve([...c.list().filter((e=>e.type===i.hh.Filter)).map(F)])},{id:i.ng.WithKeyword,name:i.ng.WithKeyword,suggestions:(e,t)=>Promise.resolve([{label:"WITH <alias> AS ( ... )",insertText:"WITH $1  AS ( $2 )",insertTextRules:i._E.InsertAsSnippet,kind:i.Io.Snippet,command:w,sortText:i.mY.Medium}])},{id:i.ng.StarWildCard,name:i.ng.StarWildCard,suggestions:(e,t)=>Promise.resolve([{label:"*",insertText:"* $0",insertTextRules:i._E.InsertAsSnippet,kind:i.Io.Field,command:w,sortText:i.mY.High}])},{id:i.ng.FunctionsWithArguments,name:i.ng.FunctionsWithArguments,suggestions:(e,t)=>Promise.resolve([...l.list().map((e=>({label:e.name,insertText:`${e.name}($0)`,documentation:e.description,insertTextRules:i._E.InsertAsSnippet,kind:i.Io.Function,command:w,sortText:i.mY.MediumLow})))])},{id:i.ng.FunctionsWithoutArguments,name:i.ng.FunctionsWithoutArguments,suggestions:(e,t)=>Promise.resolve([...l.list().map((e=>({label:e.name,insertText:`${e.name}()`,documentation:e.description,insertTextRules:i._E.InsertAsSnippet,kind:i.Io.Function,command:w,sortText:i.mY.MediumHigh})))])},{id:i.ng.FromKeyword,name:i.ng.FromKeyword,suggestions:(e,t)=>Promise.resolve([{label:"FROM",insertText:"FROM $0",command:w,insertTextRules:i._E.InsertAsSnippet,kind:i.Io.Keyword}])},{id:i.ng.Schemas,name:i.ng.Schemas,suggestions:(e,t)=>Promise.resolve([])},{id:i.ng.Tables,name:i.ng.Tables,suggestions:(e,t)=>Promise.resolve([])},{id:i.ng.Columns,name:i.ng.Columns,suggestions:(e,t)=>Promise.resolve([])},{id:i.ng.LogicalOperators,name:i.ng.LogicalOperators,suggestions:(e,t)=>Promise.resolve(u.list().filter((e=>e.type===i.hu.Logical)).map((e=>({label:e.operator,insertText:`${e.operator} `,documentation:e.description,command:w,sortText:i.mY.MediumHigh,kind:i.Io.Operator}))))},{id:i.ng.WhereKeyword,name:i.ng.WhereKeyword,suggestions:(e,t)=>Promise.resolve([{label:"WHERE",insertText:"WHERE ",command:w,sortText:i.mY.MediumHigh,kind:i.Io.Keyword}])},{id:i.ng.ComparisonOperators,name:i.ng.ComparisonOperators,suggestions:(e,t)=>Promise.resolve([...u.list().filter((e=>e.type===i.hu.Comparison)).map((e=>({label:e.operator,insertText:`${e.operator} `,documentation:e.description,command:w,sortText:i.mY.MediumHigh,kind:i.Io.Operator}))),{label:"IN (...)",insertText:"IN ( $0 )",command:w,sortText:i.mY.Medium,kind:i.Io.Operator,insertTextRules:i._E.InsertAsSnippet},{label:"NOT IN (...)",insertText:"NOT IN ( $0 )",command:w,sortText:i.mY.Medium,kind:i.Io.Operator,insertTextRules:i._E.InsertAsSnippet},{label:"IS",insertText:"IS",command:w,sortText:i.mY.Medium,kind:i.Io.Operator},{label:"IS NOT",insertText:"IS NOT",command:w,sortText:i.mY.Medium,kind:i.Io.Operator}])},{id:i.ng.GroupByKeywords,name:i.ng.GroupByKeywords,suggestions:(e,t)=>Promise.resolve([{label:"GROUP BY",insertText:"GROUP BY ",command:w,sortText:i.mY.MediumHigh,kind:i.Io.Keyword}])},{id:i.ng.OrderByKeywords,name:i.ng.OrderByKeywords,suggestions:(e,t)=>Promise.resolve([{label:"ORDER BY",insertText:"ORDER BY ",command:w,sortText:i.mY.Medium,kind:i.Io.Keyword},{label:"ORDER BY(ascending)",insertText:"ORDER BY $1 ASC ",command:w,sortText:i.mY.MediumLow,kind:i.Io.Snippet,insertTextRules:i._E.InsertAsSnippet},{label:"ORDER BY(descending)",insertText:"ORDER BY $1 DESC",command:w,sortText:i.mY.MediumLow,kind:i.Io.Snippet,insertTextRules:i._E.InsertAsSnippet}])},{id:i.ng.LimitKeyword,name:i.ng.LimitKeyword,suggestions:(e,t)=>Promise.resolve([{label:"LIMIT",insertText:"LIMIT ",command:w,sortText:i.mY.MediumLow,kind:i.Io.Keyword}])},{id:i.ng.SortOrderDirectionKeyword,name:i.ng.SortOrderDirectionKeyword,suggestions:(e,t)=>Promise.resolve([m,y].map((e=>({label:e,insertText:`${e} `,command:w,kind:i.Io.Keyword}))))},{id:i.ng.NotKeyword,name:i.ng.NotKeyword,suggestions:()=>Promise.resolve([{label:"NOT",insertText:"NOT",command:w,kind:i.Io.Keyword,sortText:i.mY.High}])},{id:i.ng.BoolValues,name:i.ng.BoolValues,suggestions:()=>Promise.resolve(["TRUE","FALSE"].map((e=>({label:e,insertText:`${e}`,command:w,kind:i.Io.Keyword,sortText:i.mY.Medium}))))},{id:i.ng.NullValue,name:i.ng.NullValue,suggestions:()=>Promise.resolve(["NULL"].map((e=>({label:e,insertText:`${e}`,command:w,kind:i.Io.Keyword,sortText:i.mY.Low}))))}])));const p=T.get(t);if(r.supportedFunctions)for(const e of r.supportedFunctions())o.functions.getIfExists(e.id)||o.functions.register(e);if(r.supportedOperators)for(const e of r.supportedOperators())o.operators.getIfExists(e.id)||o.operators.register({...e,name:e.id});if(r.supportedMacros)for(const e of r.supportedMacros())o.macros.getIfExists(e.id)||o.macros.register({...e,name:e.id});if(r.customStatementPlacement)for(const e of r.customStatementPlacement()){const t=o.positionResolvers.getIfExists(e.id);if(t){const r=t.resolve;t.resolve=(...t)=>{const n=e.resolve(...t);return e.overrideDefault?n:r(...t)||n}}else o.positionResolvers.register({...e,id:e.id,name:e.id}),o.suggestionKinds.register({id:e.id,name:e.id,kind:[]})}if(r.customSuggestionKinds)for(const e of r.customSuggestionKinds()){if(null==(n=e.applyTo)||n.forEach((t=>{const r=o.suggestionKinds.getIfExists(t);r&&-1===r.kind.indexOf(e.id)&&r.kind.push(e.id)})),e.overrideDefault){const t=p.get(e.id);if(void 0!==t){t.suggestions=e.suggestionsResolver;continue}}p.register({id:e.id,name:e.id,suggestions:e.suggestionsResolver})}if(r.schemas){const e=p.get(i.ng.Schemas),t=e.suggestions;e.suggestions=async(e,n)=>{const o=await t(e,n);if(!r.schemas)return[...o];const a=(await r.schemas.resolve()).map((e=>{var t;return{label:e.name,insertText:`${null!=(t=e.completion)?t:e.name}.`,command:w,kind:i.Io.Module,sortText:i.mY.High}}));return[...o,...a]}}if(r.tables){const e=p.get(i.ng.Tables),t=e.suggestions;e.suggestions=async(e,n)=>{var o,a,l,s,u;const c=await t(e,n),p=O(e.currentToken),d=(null!=(a=null==(o=r.tables)?void 0:o.parseName)?a:_)(p);return[...c,...(null!=(u=await(null==(s=null==(l=r.tables)?void 0:l.resolve)?void 0:s.call(l,d)))?u:[]).map((e=>{var t;return{label:e.name,insertText:`${null!=(t=e.completion)?t:e.name}${e.completion===e.name?" $0":""}`,insertTextRules:i._E.InsertAsSnippet,command:w,kind:i.Io.Field,sortText:i.mY.MediumHigh}}))]}}if(r.columns){const e=p.get(i.ng.Columns),t=e.suggestions;e.suggestions=async(e,n)=>{var o,a,l;const s=await t(e,n),u=O(e.currentToken);let c;const p=null!=(a=null==(o=r.tables)?void 0:o.parseName)?a:_;u&&u.value&&(c=p(u));let d=[];if(c){const e=await(null==(l=r.columns)?void 0:l.resolve(c));d=e?e.map((e=>{var t;return{label:e.name,insertText:null!=(t=e.completion)?t:e.name,kind:i.Io.Field,sortText:i.mY.High,detail:e.type,documentation:e.description}})):[]}return[...s,...d]}}}(t.id,r,c);const p=x.get(t.id),d=T.get(r),f=async(t,n,o,a)=>{const s=function(e,t,r,n="sql"){var o;let a=null,l=null;const s=e.editor.tokenize(null!=(o=t.getValue())?o:"",n);for(let o=0;o<s.length;o++){const c=s[o];if(!c.length&&l){const e={offset:0,type:i.ks.Whitespace,language:n,_tokenBrand:void 0};c.push(e)}for(let n=0;n<c.length;n++){const i=c[n];let s=c.length>n+1?c[n+1].offset+1:t.getLineLength(o+1)+1;const p={startLineNumber:o+1,startColumn:0===i.offset?0:i.offset+1,endLineNumber:o+1,endColumn:s},d=t.getValueInRange(p),f=new u(i.type,d,p,l,null);e.Range.containsPosition(p,r)&&(a=f),l&&(l.next=f),l=f}}return a}(e,t,n,r),c=function(e,t){var r;const n=null==e?void 0:e.getPreviousNonWhiteSpaceToken(),o=null==e?void 0:e.getPreviousKeyword(),a=null==(r=null==e?void 0:e.getPreviousNonWhiteSpaceToken())?void 0:r.is(i.ks.Operator,"/"),l=t.list(),s=[];for(const t of l)t.resolve(e,null!=o?o:null,null!=n?n:null,Boolean(a))&&s.push(t.id);return 0===s.length?[i.X7.Unknown]:s}(s,p.positionResolvers),f=function(e,t){let r=[];for(let n=0;n<e.length;n++){const o=t.getIfExists(e[n]);o&&(r=r.concat(o.kind))}return r}(c,p.suggestionKinds);C("Statement position",!1,c),C("Suggestion kinds",!1,f);const g={position:n,currentToken:s,statementPosition:c,kind:f,range:e.Range.fromPositions(n)},v=await(async(e,t,r,n,o)=>{let i=[];const a=(null==t?void 0:t.isWhiteSpace())||(null==t?void 0:t.isParenthesis())||(null==t?void 0:t.isIdentifier())&&t.value.endsWith(".")||!(null==t?void 0:t.range)?e.Range.fromPositions(n.position):null==t?void 0:t.range;for(const t of[...new Set(r)]){const r=o.getIfExists(t);if(r){const t=await r.suggestions({...n,range:a},e);i=[...i,...t.map((e=>l(e.label,a,{kind:e.kind,...e})))]}}return Promise.resolve(i)})(e,s,f,g,d);return{suggestions:v}};e.languages.registerCompletionItemProvider(r,{...c,provideCompletionItems:f})}}},7150:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__addDisposableResource:()=>P,__assign:()=>i,__asyncDelegator:()=>F,__asyncGenerator:()=>E,__asyncValues:()=>j,__await:()=>S,__awaiter:()=>g,__classPrivateFieldGet:()=>T,__classPrivateFieldIn:()=>A,__classPrivateFieldSet:()=>R,__createBinding:()=>h,__decorate:()=>l,__disposeResources:()=>D,__esDecorate:()=>u,__exportStar:()=>y,__extends:()=>o,__generator:()=>v,__importDefault:()=>x,__importStar:()=>k,__makeTemplateObject:()=>L,__metadata:()=>f,__param:()=>s,__propKey:()=>p,__read:()=>b,__rest:()=>a,__rewriteRelativeImportExtension:()=>V,__runInitializers:()=>c,__setFunctionName:()=>d,__spread:()=>O,__spreadArray:()=>w,__spreadArrays:()=>_,__values:()=>m,default:()=>$});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function l(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function s(e,t){return function(r,n){t(r,n,e)}}function u(e,t,r,n,o,i){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var l,s=n.kind,u="getter"===s?"get":"setter"===s?"set":"value",c=!t&&e?n.static?e:e.prototype:null,p=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d=!1,f=r.length-1;f>=0;f--){var g={};for(var v in n)g[v]="access"===v?{}:n[v];for(var v in n.access)g.access[v]=n.access[v];g.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(e||null))};var h=(0,r[f])("accessor"===s?{get:p.get,set:p.set}:p[u],g);if("accessor"===s){if(void 0===h)continue;if(null===h||"object"!=typeof h)throw new TypeError("Object expected");(l=a(h.get))&&(p.get=l),(l=a(h.set))&&(p.set=l),(l=a(h.init))&&o.unshift(l)}else(l=a(h))&&("field"===s?o.unshift(l):p[u]=l)}c&&Object.defineProperty(c,n.name,p),d=!0}function c(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function p(e){return"symbol"==typeof e?e:"".concat(e)}function d(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function g(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))}function v(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}var h=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function y(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||h(t,e,r)}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function O(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function _(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,l=i.length;a<l;a++,o++)n[o]=i[a];return n}function w(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function E(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),n[Symbol.asyncIterator]=function(){return this},n;function a(e,t){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||l(e,t)}))},t&&(n[e]=t(n[e])))}function l(e,t){try{(r=o[e](t)).value instanceof S?Promise.resolve(r.value.v).then(s,u):c(i[0][2],r)}catch(e){c(i[0][3],e)}var r}function s(e){l("next",e)}function u(e){l("throw",e)}function c(e,t){e(t),i.shift(),i.length&&l(i[0][0],i[0][1])}}function F(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:S(e[n](t)),done:!1}:o?o(t):t}:o}}function j(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=m(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}}function L(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var C=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},I=function(e){return I=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},I(e)};function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=I(e),n=0;n<r.length;n++)"default"!==r[n]&&h(t,e,r[n]);return C(t,e),t}function x(e){return e&&e.__esModule?e:{default:e}}function T(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function R(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}function A(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function P(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(o=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var N="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function D(e){function t(t){e.error=e.hasError?new N(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function o(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(o);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(o,(function(e){return t(e),o()}))}else n|=1}catch(e){t(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function V(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,r,n,o,i){return r?t?".jsx":".js":!n||o&&i?n+o+"."+i.toLowerCase()+"js":e})):e}const $={__extends:o,__assign:i,__rest:a,__decorate:l,__param:s,__esDecorate:u,__runInitializers:c,__propKey:p,__setFunctionName:d,__metadata:f,__awaiter:g,__generator:v,__createBinding:h,__exportStar:y,__values:m,__read:b,__spread:O,__spreadArrays:_,__spreadArray:w,__await:S,__asyncGenerator:E,__asyncDelegator:F,__asyncValues:j,__makeTemplateObject:L,__importStar:k,__importDefault:x,__classPrivateFieldGet:T,__classPrivateFieldSet:R,__classPrivateFieldIn:A,__addDisposableResource:P,__disposeResources:D,__rewriteRelativeImportExtension:V}}}]);
//# sourceMappingURL=131.js.map